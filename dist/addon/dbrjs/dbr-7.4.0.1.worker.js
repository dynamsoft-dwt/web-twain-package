'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,f){a!=Array.prototype&&a!=Object.prototype&&(a[b]=f.value)};
$jscomp.polyfill=function(a,b,f,n){if(b){f=$jscomp.global;a=a.split(".");for(n=0;n<a.length-1;n++){var l=a[n];l in f||(f[l]={});f=f[l]}a=a[a.length-1];n=f[a];b=b(n);b!=n&&null!=b&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function f(a){return a instanceof l?a:new l(function(b,u){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var n=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){n(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var f=a[b];a[b]=null;try{f()}catch(A){this.asyncThrow_(A)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var l=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(H){b.reject(H)}};l.prototype.createResolveAndReject_=function(){function a(a){return function(u){f||(f=!0,a.call(b,u))}}var b=this,f=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};l.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof l)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};l.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(H){this.reject_(H);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};l.prototype.reject_=function(a){this.settle_(2,a)};l.prototype.fulfill_=function(a){this.settle_(1,a)};l.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};l.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)r.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var r=new b;l.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};l.prototype.settleSameAsThenable_=function(a,b){var f=this.createResolveAndReject_();try{a.call(b,f.resolve,f.reject)}catch(A){f.reject(A)}};l.prototype.then=function(a,b){function f(a,b){return"function"==typeof a?function(b){try{n(a(b))}catch(P){u(P)}}:b}var n,u,r=new l(function(a,b){n=a;u=b});this.callWhenSettled_(f(a,n),f(b,u));return r};
l.prototype.catch=function(a){return this.then(void 0,a)};l.prototype.callWhenSettled_=function(a,b){function f(){switch(l.state_){case 1:a(l.result_);break;case 2:b(l.result_);break;default:throw Error("Unexpected state: "+l.state_);}}var l=this;null==this.onSettledCallbacks_?r.asyncExecute(f):this.onSettledCallbacks_.push(f)};l.resolve=f;l.reject=function(a){return new l(function(b,f){f(a)})};l.race=function(a){return new l(function(b,l){for(var n=$jscomp.makeIterator(a),u=n.next();!u.done;u=n.next())f(u.value).callWhenSettled_(b,
l)})};l.all=function(a){var b=$jscomp.makeIterator(a),n=b.next();return n.done?f([]):new l(function(a,l){function u(b){return function(f){r[b]=f;A--;0==A&&a(r)}}var r=[],A=0;do r.push(void 0),A++,f(n.value).callWhenSettled_(u(r.length-1),l),n=b.next();while(!n.done)})};return l},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(f){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(f||"")+"_"+b++,f)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(f){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var f=a.next();$jscomp.generator.ensureIteratorResultIsObject_(f);if(f.done)this.yieldResult=f.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(f.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,f){f?this.finallyContexts_[f]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,f){try{var n=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(n);if(!n.done)return this.context_.stop_(),n;var l=n.value}catch(r){return this.context_.yieldAllIterator_=null,this.context_.throw_(r),this.nextStep_()}this.context_.yieldAllIterator_=null;f.call(this.context_,l);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function f(b){return a.throw(b)}return new Promise(function(n,l){function r(a){a.done?n(a.value):Promise.resolve(a.value).then(b,f).then(r,l)}r(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
(()=>{const a=!!("object"==typeof global&&global.process&&global.process.release&&global.process.release.name);let b;a&&(b=require("worker_threads"));let f=a?b.parentPort:self,n,l,r,u,fa,H,A=!1,L=!1,V,Y,Z,U="https://dbrjsauth.dynamsoft.com/v2/",P,ha,C,aa=Promise.resolve();a||!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?
self:this).localforage=a()}(function(){return function y(a,b,f){function k(d,B){if(!b[d]){if(!a[d]){var q="function"==typeof require&&require;if(!B&&q)return q(d,!0);if(g)return g(d,!0);B=Error("Cannot find module '"+d+"'");throw B.code="MODULE_NOT_FOUND",B;}B=b[d]={exports:{}};a[d][0].call(B.exports,function(b){return k(a[d][1][b]||b)},B,B.exports,y,a,b,f)}return b[d].exports}for(var g="function"==typeof require&&require,d=0;d<f.length;d++)k(f[d]);return k}({1:[function(a,b,f){(function(a){function f(){t=
!0;for(var a,b,d=n.length;d;){b=n;n=[];for(a=-1;++a<d;)b[a]();d=n.length}t=!1}var k=a.MutationObserver||a.WebKitMutationObserver;if(k){var d=0;k=new k(f);var q=a.document.createTextNode("");k.observe(q,{characterData:!0});var g=function(){q.data=d=++d%2}}else if(a.setImmediate||void 0===a.MessageChannel)g="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){f();b.onreadystatechange=null;b.parentNode.removeChild(b);
b=null};a.document.documentElement.appendChild(b)}:function(){setTimeout(f,0)};else{var l=new a.MessageChannel;l.port1.onmessage=f;g=function(){l.port2.postMessage(0)}}var t,n=[];b.exports=function(a){1!==n.push(a)||t||g()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,f){function k(){}function g(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=v;this.queue=[];this.outcome=
void 0;a!==k&&n(this,a)}function l(a,b,d){this.promise=a;"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled);"function"==typeof d&&(this.onRejected=d,this.callRejected=this.otherCallRejected)}function d(a,b,d){u(function(){try{var f=b(d)}catch(E){return x.reject(a,E)}f===a?x.reject(a,new TypeError("Cannot resolve promise with itself")):x.resolve(a,f)})}function q(a){var b=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof b)return function(){b.apply(a,
arguments)}}function n(a,b){function d(b){k||(k=!0,x.reject(a,b))}function f(b){k||(k=!0,x.resolve(a,b))}var k=!1,g=t(function(){b(f,d)});"error"===g.status&&d(g.value)}function t(a,b){var d={};try{d.value=a(b),d.status="success"}catch(ua){d.status="error",d.value=ua}return d}var u=a(1),x={},r=["REJECTED"],Q=["FULFILLED"],v=["PENDING"];b.exports=g;g.prototype.catch=function(a){return this.then(null,a)};g.prototype.then=function(a,b){if("function"!=typeof a&&this.state===Q||"function"!=typeof b&&this.state===
r)return this;var f=new this.constructor(k);this.state!==v?d(f,this.state===Q?a:b,this.outcome):this.queue.push(new l(f,a,b));return f};l.prototype.callFulfilled=function(a){x.resolve(this.promise,a)};l.prototype.otherCallFulfilled=function(a){d(this.promise,this.onFulfilled,a)};l.prototype.callRejected=function(a){x.reject(this.promise,a)};l.prototype.otherCallRejected=function(a){d(this.promise,this.onRejected,a)};x.resolve=function(a,b){var d=t(q,b);if("error"===d.status)return x.reject(a,d.value);
if(d=d.value)n(a,d);else{a.state=Q;a.outcome=b;d=-1;for(var f=a.queue.length;++d<f;)a.queue[d].callFulfilled(b)}return a};x.reject=function(a,b){a.state=r;a.outcome=b;for(var d=-1,f=a.queue.length;++d<f;)a.queue[d].callRejected(b);return a};g.resolve=function(a){return a instanceof this?a:x.resolve(new this(k),a)};g.reject=function(a){var b=new this(k);return x.reject(b,a)};g.all=function(a){function b(a,b){d.resolve(a).then(function(a){q[b]=a;++l!==f||g||(g=!0,x.resolve(n,q))},function(a){g||(g=
!0,x.reject(n,a))})}var d=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var f=a.length,g=!1;if(!f)return this.resolve([]);for(var q=Array(f),l=0,B=-1,n=new this(k);++B<f;)b(a[B],B);return n};g.race=function(a){function b(a){d.resolve(a).then(function(a){g||(g=!0,x.resolve(l,a))},function(a){g||(g=!0,x.reject(l,a))})}var d=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));
var f=a.length,g=!1;if(!f)return this.resolve([]);for(var q=-1,l=new this(k);++q<f;)b(a[q]);return l}},{1:1}],3:[function(a,b,f){b="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};"function"!=typeof b.Promise&&(b.Promise=a(2))},{2:2}],4:[function(a,b,f){function k(c,a){c=c||[];a=a||{};try{return new Blob(c,a)}catch(w){if("TypeError"!==w.name)throw w;for(var e=new ("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:
"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),b=0;b<c.length;b+=1)e.append(c[b]);return e.getBlob(a.type)}}function g(c,a){a&&c.then(function(c){a(null,c)},function(c){a(c)})}function l(c,a,h){"function"==typeof a&&c.then(a);"function"==typeof h&&c.catch(h)}function d(c){return"string"!=typeof c&&(console.warn(c+" used as a key, but it is not a string."),c=String(c)),c}function q(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-
1]}function n(c){return(new p(function(a){var e=c.transaction(T,ja),b=k([""]);e.objectStore(T).put(b,"key");e.onabort=function(c){c.preventDefault();c.stopPropagation();a(!1)};e.oncomplete=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),e=navigator.userAgent.match(/Edge\//);a(e||!c||43<=parseInt(c[1],10))}})).catch(function(){return!1})}function t(c){return"boolean"==typeof na?p.resolve(na):n(c).then(function(c){return na=c})}function u(c){c=D[c.name];var a={};a.promise=new p(function(c,
e){a.resolve=c;a.reject=e});c.deferredOperations.push(a);c.dbReady?c.dbReady=c.dbReady.then(function(){return a.promise}):c.dbReady=a.promise}function x(c){if(c=D[c.name].deferredOperations.pop())return c.resolve(),c.promise}function r(c,a){if(c=D[c.name].deferredOperations.pop())return c.reject(a),c.promise}function v(c,a){return new p(function(e,b){if(D[c.name]=D[c.name]||H(),c.db){if(!a)return e(c.db);u(c);c.db.close()}var h=[c.name];a&&h.push(c.version);var m=ba.open.apply(ba,h);a&&(m.onupgradeneeded=
function(a){var e=m.result;try{e.createObjectStore(c.storeName),1>=a.oldVersion&&e.createObjectStore(T)}catch(I){if("ConstraintError"!==I.name)throw I;console.warn('The database "'+c.name+'" has been upgraded from version '+a.oldVersion+" to version "+a.newVersion+', but the storage "'+c.storeName+'" already exists.')}});m.onerror=function(a){a.preventDefault();b(m.error)};m.onsuccess=function(){e(m.result);x(c)}})}function z(a,e){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),
b=a.version>a.db.version;return(a.version<a.db.version&&(a.version!==e&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),b||c)?(c&&(e=a.db.version+1,e>a.version&&(a.version=e)),!0):!1}function A(a){return new p(function(c,h){var e=new FileReader;e.onerror=h;e.onloadend=function(e){e=btoa(e.target.result||"");c({__local_forage_encoded_blob:!0,data:e,type:a.type})};e.readAsBinaryString(a)})}function C(a){for(var c=
atob(a.data),h=c.length,b=new ArrayBuffer(h),d=new Uint8Array(b),m=0;m<h;m++)d[m]=c.charCodeAt(m);return k([b],{type:a.type})}function F(a){var c=this,h=c._initReady().then(function(){var a=D[c._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return l(h,a,a),h}function J(a){u(a);for(var c=D[a.name],h=c.forages,b=0;b<h.length;b++){var d=h[b];d._dbInfo.db&&(d._dbInfo.db.close(),d._dbInfo.db=null)}return a.db=null,v(a,!1).then(function(c){return a.db=c,z(a)?v(a,!0):c}).then(function(e){a.db=c.db=e;for(var b=
0;b<h.length;b++)h[b]._dbInfo.db=e}).catch(function(c){throw r(a,c),c;})}function E(a,e,h,b){void 0===b&&(b=1);try{var c=a.db.transaction(a.storeName,e);h(null,c)}catch(m){if(0<b&&(!a.db||"InvalidStateError"===m.name||"NotFoundError"===m.name))return p.resolve().then(function(){if(!a.db||"NotFoundError"===m.name&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),v(a,!0)}).then(function(){return J(a).then(function(){E(a,e,h,b-1)})}).catch(h);
h(m)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function K(a){var c=.75*a.length;var h=a.length,b=0;"="===a[a.length-1]&&(c--,"="===a[a.length-2]&&c--);var d=new ArrayBuffer(c),m=new Uint8Array(d);for(c=0;c<h;c+=4){var f=N.indexOf(a[c]);var g=N.indexOf(a[c+1]);var I=N.indexOf(a[c+2]);var R=N.indexOf(a[c+3]);m[b++]=f<<2|g>>4;m[b++]=(15&g)<<4|I>>2;m[b++]=(3&I)<<6|63&R}return d}function G(a){var c=new Uint8Array(a),h="";for(a=0;a<c.length;a+=3)h+=N[c[a]>>2],h+=N[(3&c[a])<<
4|c[a+1]>>4],h+=N[(15&c[a+1])<<2|c[a+2]>>6],h+=N[63&c[a+2]];return 2==c.length%3?h=h.substring(0,h.length-1)+"=":1==c.length%3&&(h=h.substring(0,h.length-2)+"=="),h}function L(a,e,h,b){a.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],h,b)}function M(a,e,h,b,d,m){a.executeSql(h,b,d,function(a,c){c.code===c.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],function(a,ia){ia.rows.length?m(a,c):
L(a,e,function(){a.executeSql(h,b,d,m)},m)},m):m(a,c)},m)}function O(a,b,h,ia){var c=this;a=d(a);var e=new p(function(e,d){c.ready().then(function(){void 0===b&&(b=null);var m=b,w=c._dbInfo;w.serializer.serialize(b,function(b,f){f?d(f):w.db.transaction(function(c){M(c,w,"INSERT OR REPLACE INTO "+w.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){e(m)},function(a,c){d(c)})},function(b){if(b.code===b.QUOTA_ERR){if(0<ia)return void e(O.apply(c,[a,m,h,ia-1]));d(b)}})})}).catch(d)});return g(e,
h),e}function U(a){return new p(function(c,b){a.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(b,e){b=[];for(var h=0;h<e.rows.length;h++)b.push(e.rows.item(h).name);c({db:a,storeNames:b})},function(a,c){b(c)})},function(a){b(a)})})}function P(a,b){var c=a.name+"/";return a.storeName!==b.storeName&&(c+=a.storeName+"/"),c}function V(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,
c)})}}function S(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var h in b)b.hasOwnProperty(h)&&(aa(b[h])?arguments[0][h]=b[h].slice():arguments[0][h]=b[h])}return arguments[0]}var ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ba=function(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;
if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}();"undefined"==typeof Promise&&a(3);var p=Promise,T="local-forage-detect-blob-support",na=void 0,D={},fa=Object.prototype.toString,ja="readwrite";a={_driver:"asyncStorage",_initStorage:function(a){function c(){return p.resolve()}var b=this,d={db:null};if(a)for(var w in a)d[w]=a[w];var m=D[d.name];m||(m=H(),D[d.name]=m);m.forages.push(b);
b._initReady||(b._initReady=b.ready,b.ready=F);a=[];for(w=0;w<m.forages.length;w++){var f=m.forages[w];f!==b&&a.push(f._initReady().catch(c))}var g=m.forages.slice(0);return p.all(a).then(function(){return d.db=m.db,v(d,!1)}).then(function(a){return d.db=a,z(d,b._defaultConfig.version)?v(d,!0):a}).then(function(a){d.db=m.db=a;b._dbInfo=d;for(a=0;a<g.length;a++){var c=g[a];c!==b&&(c._dbInfo.db=d.db,c._dbInfo.version=d.version)}})},_support:function(){try{if(!ba)return!1;var a="undefined"!=typeof openDatabase&&
/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),b="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!a||b)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(h){return!1}}(),iterate:function(a,b){var c=this,e=new p(function(b,e){c.ready().then(function(){E(c._dbInfo,"readonly",function(h,d){if(h)return e(h);try{var m=d.objectStore(c._dbInfo.storeName).openCursor(),w=1;
m.onsuccess=function(){var c=m.result;if(c){var e=c.value;e&&e.__local_forage_encoded_blob&&(e=C(e));e=a(e,c.key,w++);void 0!==e?b(e):c.continue()}else b()};m.onerror=function(){e(m.error)}}catch(oa){e(oa)}})}).catch(e)});return g(e,b),e},getItem:function(a,b){var c=this;a=d(a);var e=new p(function(b,e){c.ready().then(function(){E(c._dbInfo,"readonly",function(h,d){if(h)return e(h);try{var m=d.objectStore(c._dbInfo.storeName).get(a);m.onsuccess=function(){var a=m.result;void 0===a&&(a=null);a&&a.__local_forage_encoded_blob&&
(a=C(a));b(a)};m.onerror=function(){e(m.error)}}catch(R){e(R)}})}).catch(e)});return g(e,b),e},setItem:function(a,b,h){var c=this;a=d(a);var e=new p(function(e,h){var d;c.ready().then(function(){return d=c._dbInfo,"[object Blob]"===fa.call(b)?t(d.db).then(function(a){return a?b:A(b)}):b}).then(function(b){E(c._dbInfo,ja,function(d,m){if(d)return h(d);try{var f=m.objectStore(c._dbInfo.storeName);null===b&&(b=void 0);var w=f.put(b,a);m.oncomplete=function(){void 0===b&&(b=null);e(b)};m.onabort=m.onerror=
function(){h(w.error?w.error:w.transaction.error)}}catch(pa){h(pa)}})}).catch(h)});return g(e,h),e},removeItem:function(a,b){var c=this;a=d(a);var e=new p(function(b,e){c.ready().then(function(){E(c._dbInfo,ja,function(h,d){if(h)return e(h);try{var m=d.objectStore(c._dbInfo.storeName).delete(a);d.oncomplete=function(){b()};d.onerror=function(){e(m.error)};d.onabort=function(){e(m.error?m.error:m.transaction.error)}}catch(R){e(R)}})}).catch(e)});return g(e,b),e},clear:function(a){var c=this,b=new p(function(a,
b){c.ready().then(function(){E(c._dbInfo,ja,function(e,h){if(e)return b(e);try{var d=h.objectStore(c._dbInfo.storeName).clear();h.oncomplete=function(){a()};h.onabort=h.onerror=function(){b(d.error?d.error:d.transaction.error)}}catch(I){b(I)}})}).catch(b)});return g(b,a),b},length:function(a){var c=this,b=new p(function(a,b){c.ready().then(function(){E(c._dbInfo,"readonly",function(e,h){if(e)return b(e);try{var d=h.objectStore(c._dbInfo.storeName).count();d.onsuccess=function(){a(d.result)};d.onerror=
function(){b(d.error)}}catch(I){b(I)}})}).catch(b)});return g(b,a),b},key:function(a,b){var c=this,e=new p(function(b,e){if(0>a)return void b(null);c.ready().then(function(){E(c._dbInfo,"readonly",function(h,d){if(h)return e(h);try{var m=!1,f=d.objectStore(c._dbInfo.storeName).openCursor();f.onsuccess=function(){var c=f.result;if(!c)return void b(null);0===a?b(c.key):m?b(c.key):(m=!0,c.advance(a))};f.onerror=function(){e(f.error)}}catch(oa){e(oa)}})}).catch(e)});return g(e,b),e},keys:function(a){var c=
this,b=new p(function(a,b){c.ready().then(function(){E(c._dbInfo,"readonly",function(e,h){if(e)return b(e);try{var d=h.objectStore(c._dbInfo.storeName).openCursor(),m=[];d.onsuccess=function(){var c=d.result;if(!c)return void a(m);m.push(c.key);c.continue()};d.onerror=function(){b(d.error)}}catch(R){b(R)}})}).catch(b)});return g(b,a),b},dropInstance:function(a,b){b=q.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);
a.name?(c=a.name===c.name&&this._dbInfo.db?p.resolve(this._dbInfo.db):v(a,!1).then(function(b){var c=D[a.name],e=c.forages;c.db=b;for(c=0;c<e.length;c++)e[c]._dbInfo.db=b;return b}),c=a.storeName?c.then(function(b){if(b.objectStoreNames.contains(a.storeName)){var c=b.version+1;u(a);var e=D[a.name],d=e.forages;b.close();for(b=0;b<d.length;b++){var h=d[b];h._dbInfo.db=null;h._dbInfo.version=c}return(new p(function(b,e){var d=ba.open(a.name,c);d.onerror=function(a){d.result.close();e(a)};d.onupgradeneeded=
function(){d.result.deleteObjectStore(a.storeName)};d.onsuccess=function(){var a=d.result;a.close();b(a)}})).then(function(a){e.db=a;for(var b=0;b<d.length;b++){var c=d[b];c._dbInfo.db=a;x(c._dbInfo)}}).catch(function(b){throw(r(a,b)||p.resolve()).catch(function(){}),b;})}}):c.then(function(b){u(a);var c=D[a.name],e=c.forages;b.close();for(b=0;b<e.length;b++)e[b]._dbInfo.db=null;return(new p(function(b,c){var e=ba.deleteDatabase(a.name);e.onerror=e.onblocked=function(a){var b=e.result;b&&b.close();
c(a)};e.onsuccess=function(){var a=e.result;a&&a.close();b(a)}})).then(function(a){c.db=a;for(a=0;a<e.length;a++)x(e[a]._dbInfo)}).catch(function(b){throw(r(a,b)||p.resolve()).catch(function(){}),b;})})):c=p.reject("Invalid arguments");return g(c,b),c}};var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y=/^~~local_forage_type~([^~]+)~/,Z=Object.prototype.toString,qa={serialize:function(a,b){var c="";if(a&&(c=Z.call(a)),a&&("[object ArrayBuffer]"===c||a.buffer&&"[object ArrayBuffer]"===
Z.call(a.buffer))){var e,d="__lfsc__:";a instanceof ArrayBuffer?(e=a,d+="arbf"):(e=a.buffer,"[object Int8Array]"===c?d+="si08":"[object Uint8Array]"===c?d+="ui08":"[object Uint8ClampedArray]"===c?d+="uic8":"[object Int16Array]"===c?d+="si16":"[object Uint16Array]"===c?d+="ur16":"[object Int32Array]"===c?d+="si32":"[object Uint32Array]"===c?d+="ui32":"[object Float32Array]"===c?d+="fl32":"[object Float64Array]"===c?d+="fl64":b(Error("Failed to get type for BinaryArray")));b(d+G(e))}else if("[object Blob]"===
c)c=new FileReader,c.onload=function(){var c="~~local_forage_type~"+a.type+"~"+G(this.result);b("__lfsc__:blob"+c)},c.readAsArrayBuffer(a);else try{b(JSON.stringify(a))}catch(m){console.error("Couldn't convert value into a JSON string: ",a),b(null,m)}},deserialize:function(a){if("__lfsc__:"!==a.substring(0,9))return JSON.parse(a);var b=a.substring(13);a=a.substring(9,13);if("blob"===a&&Y.test(b)){var c=b.match(Y);var d=c[1];b=b.substring(c[0].length)}b=K(b);switch(a){case "arbf":return b;case "blob":return k([b],
{type:d});case "si08":return new Int8Array(b);case "ui08":return new Uint8Array(b);case "uic8":return new Uint8ClampedArray(b);case "si16":return new Int16Array(b);case "ur16":return new Uint16Array(b);case "si32":return new Int32Array(b);case "ui32":return new Uint32Array(b);case "fl32":return new Float32Array(b);case "fl64":return new Float64Array(b);default:throw Error("Unkown type: "+a);}},stringToBuffer:K,bufferToString:G};f={_driver:"webSQLStorage",_initStorage:function(a){var b=this,c={db:null};
if(a)for(var d in a)c[d]="string"!=typeof a[d]?a[d].toString():a[d];a=new p(function(a,d){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(sa){return d(sa)}c.db.transaction(function(e){L(e,c,function(){b._dbInfo=c;a()},function(a,b){d(b)})},d)});return c.serializer=qa,a},_support:"function"==typeof openDatabase,iterate:function(a,b){var c=this,d=new p(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){M(c,e,"SELECT * FROM "+e.storeName,[],
function(c,d){c=d.rows;d=c.length;for(var h=0;h<d;h++){var m=c.item(h),f=m.value;if(f&&(f=e.serializer.deserialize(f)),void 0!==(f=a(f,m.key,h+1)))return void b(f)}b()},function(a,b){d(b)})})}).catch(d)});return g(d,b),d},getItem:function(a,b){var c=this;a=d(a);var e=new p(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){M(c,e,"SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){(a=c.rows.length?c.rows.item(0).value:null)&&(a=e.serializer.deserialize(a));
b(a)},function(a,b){d(b)})})}).catch(d)});return g(e,b),e},setItem:function(a,b,d){return O.apply(this,[a,b,d,1])},removeItem:function(a,b){var c=this;a=d(a);var e=new p(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){M(c,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){d(b)})})}).catch(d)});return g(e,b),e},clear:function(a){var b=this,c=new p(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){M(b,
d,"DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});return g(c,a),c},length:function(a){var b=this,c=new p(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){M(b,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){b=c.rows.item(0).c;a(b)},function(a,b){c(b)})})}).catch(c)});return g(c,a),c},key:function(a,b){var c=this,d=new p(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){M(c,e,"SELECT key FROM "+
e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){a=c.rows.length?c.rows.item(0).key:null;b(a)},function(a,b){d(b)})})}).catch(d)});return g(d,b),d},keys:function(a){var b=this,c=new p(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){M(b,d,"SELECT key FROM "+d.storeName,[],function(b,c){b=[];for(var d=0;d<c.rows.length;d++)b.push(c.rows.item(d).key);a(b)},function(a,b){c(b)})})}).catch(c)});return g(c,a),c},dropInstance:function(a,b){b=q.apply(this,arguments);
var c=this.config();a="function"!=typeof a&&a||{};a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);var d,e=this;return d=a.name?(new p(function(b){var d=a.name===c.name?e._dbInfo.db:openDatabase(a.name,"","",0);b(a.storeName?{db:d,storeNames:[a.storeName]}:U(d))})).then(function(a){return new p(function(b,c){a.db.transaction(function(d){function e(a){return new p(function(b,c){d.executeSql("DROP TABLE IF EXISTS "+a,[],function(){b()},function(a,b){c(b)})})}for(var h=[],f=0,g=a.storeNames.length;f<
g;f++)h.push(e(a.storeNames[f]));p.all(h).then(function(){b()}).catch(function(a){c(a)})},function(a){c(a)})})}):p.reject("Invalid arguments"),g(d,b),d}};try{var W="undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(c){W=!1}var ha=function(a,b){for(var c=a.length,d=0;d<c;){var e=a[d],f=b;if(e===f||"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))return!0;d++}return!1},aa=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},
ca={},da={},X={INDEXEDDB:a,WEBSQL:f,LOCALSTORAGE:{_driver:"localStorageWrapper",_initStorage:function(a){var b={};if(a)for(var c in a)b[c]=a[c];b.keyPrefix=P(a,this._defaultConfig);try{var d=(localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1)}catch(w){d=!0}return!d||0<localStorage.length?(this._dbInfo=b,b.serializer=qa,p.resolve()):p.reject()},_support:W,iterate:function(a,b){var c=this,d=c.ready().then(function(){for(var b=c._dbInfo,d=b.keyPrefix,
e=d.length,h=localStorage.length,f=1,g=0;g<h;g++){var k=localStorage.key(g);if(0===k.indexOf(d)){var q=localStorage.getItem(k);if(q&&(q=b.serializer.deserialize(q)),void 0!==(q=a(q,k.substring(e),f++)))return q}}});return g(d,b),d},getItem:function(a,b){var c=this;a=d(a);var e=c.ready().then(function(){var b=c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return g(e,b),e},setItem:function(a,b,h){var c=this;a=d(a);var e=c.ready().then(function(){void 0===
b&&(b=null);var d=b;return new p(function(e,h){var f=c._dbInfo;f.serializer.serialize(b,function(b,c){if(c)h(c);else try{localStorage.setItem(f.keyPrefix+a,b),e(d)}catch(ka){"QuotaExceededError"!==ka.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==ka.name||h(ka),h(ka)}})})});return g(e,h),e},removeItem:function(a,b){var c=this;a=d(a);var e=c.ready().then(function(){localStorage.removeItem(c._dbInfo.keyPrefix+a)});return g(e,b),e},clear:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,
c=localStorage.length-1;0<=c;c--){var d=localStorage.key(c);0===d.indexOf(a)&&localStorage.removeItem(d)}});return g(c,a),c},length:function(a){var b=this.keys().then(function(a){return a.length});return g(b,a),b},key:function(a,b){var c=this,d=c.ready().then(function(){var b=c._dbInfo;try{var d=localStorage.key(a)}catch(sa){d=null}return d&&(d=d.substring(b.keyPrefix.length)),d});return g(d,b),d},keys:function(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,d=
[],e=0;e<c;e++){var f=localStorage.key(e);0===f.indexOf(a.keyPrefix)&&d.push(f.substring(a.keyPrefix.length))}return d});return g(c,a),c},dropInstance:function(a,b){if(b=q.apply(this,arguments),a="function"!=typeof a&&a||{},!a.name){var c=this.config();a.name=a.name||c.name;a.storeName=a.storeName||c.storeName}var d,e=this;return d=a.name?(new p(function(b){b(a.storeName?P(a,e._defaultConfig):a.name+"/")})).then(function(a){for(var b=localStorage.length-1;0<=b;b--){var c=localStorage.key(b);0===c.indexOf(a)&&
localStorage.removeItem(c)}}):p.reject("Invalid arguments"),g(d,b),d}}};W=[X.INDEXEDDB._driver,X.WEBSQL._driver,X.LOCALSTORAGE._driver];var la=["dropInstance"],ra="clear getItem iterate key keys length removeItem setItem".split(" ").concat(la),ma={description:"",driver:W.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};W=new (function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");for(var c in X)if(X.hasOwnProperty(c)){var d=
X[c],e=d._driver;this[c]=e;ca[e]||this.defineDriver(d)}this._defaultConfig=S({},ma);this._config=S({},this._defaultConfig,b);this._initDriver=this._driverSet=null;this._ready=!1;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===(void 0===a?"undefined":ea(a))){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"===b&&(a[b]=a[b].replace(/\W/g,
"_")),"version"===b&&"number"!=typeof a[b])return Error("Database version must be a number.");this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var d=new p(function(b,c){try{var d=a._driver,e=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver)return void c(e);for(var f=ra.concat("_initStorage"),h=0,k=f.length;h<
k;h++){var q=f[h];if((!ha(la,q)||a[q])&&"function"!=typeof a[q])return void c(e)}(function(){for(var b=function(a){return function(){var b=p.reject(Error("Method "+a+" is not implemented by the current driver"));return g(b,arguments[arguments.length-1]),b}},c=0,d=la.length;c<d;c++){var e=la[c];a[e]||(a[e]=b(e))}})();e=function(c){ca[d]&&console.info("Redefining LocalForage driver: "+d);ca[d]=a;da[d]=c;b()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(e,c):e(!!a._support):
e(!0)}catch(pa){c(pa)}});return l(d,b,c),d},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,c){a=ca[a]?p.resolve(ca[a]):p.reject(Error("Driver not found."));return l(a,b,c),a},a.prototype.getSerializer=function(a){var b=p.resolve(qa);return l(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return l(c,a,a),c},a.prototype.setDriver=function(a,b,c){function d(){g._config.driver=
g.driver()}function e(a){return g._extend(a),d(),g._ready=g._initStorage(g._config),g._ready}function f(a){return function(){function b(){for(;c<a.length;){var f=a[c];return c++,g._dbInfo=null,g._ready=null,g.getDriver(f).then(e).catch(b)}d();return g._driverSet=p.reject(Error("No available storage method found.")),g._driverSet}var c=0;return b()}}var g=this;aa(a)||(a=[a]);var h=this._getSupportedDrivers(a);return this._driverSet=(null!==this._driverSet?this._driverSet.catch(function(){return p.resolve()}):
p.resolve()).then(function(){var a=h[0];return g._dbInfo=null,g._ready=null,g.getDriver(a).then(function(a){g._driver=a._driver;d();g._wrapLibraryMethodsWithReady();g._initDriver=f(h)})}).catch(function(){d();return g._driverSet=p.reject(Error("No available storage method found.")),g._driverSet}),l(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!da[a]},a.prototype._extend=function(a){S(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,d=a.length;c<
d;c++){var e=a[c];this.supports(e)&&b.push(e)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0,b=ra.length;a<b;a++)V(this,ra[a])},a.prototype.createInstance=function(b){return new a(b)},a}());b.exports=W},{3:3}]},{},[4])(4)});let O,J,da,F,S=-Infinity,ea=0,K=new Map,G,ma=()=>self.crypto.subtle.importKey("raw",new Uint8Array([80,88,27,82,145,164,199,211,187,87,89,128,150,44,190,213,99,181,118,158,215,103,76,117,29,83,122,137,5,180,157,114]),"AES-GCM",!0,["encrypt","decrypt"]),
va=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self.crypto&&self.crypto.subtle&&self.crypto.subtle.importKey){var b=atob(a),g=new Uint8Array(b.length);for(let a=0;a<b.length;++a)g[a]=b.charCodeAt(a);b=g.subarray(0,12);g=g.subarray(b.length);G||(G=yield ma());g=yield self.crypto.subtle.decrypt({name:"AES-GCM",iv:b,tagLength:128},G,g);return String.fromCharCode.apply(null,new Uint8Array(g))}return yield new Promise((b,g)=>{let k=ea++;K.set(k,a=>{if(a.success)return n&&console.log(a.txt),
b(a.txt);{let b=Error(a.message);b.stack+="\n"+a.stack;return g(b)}});f.postMessage({type:"taskd",taskID:k,txt:a})})}),wa=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(self.crypto&&self.crypto.subtle&&self.crypto.subtle.importKey){var b=new Uint8Array(a.length);for(var g=0;g<a.length;++g)b[g]=a.charCodeAt(g);g=self.crypto.getRandomValues(new Uint8Array(12));G||(G=yield ma());b=yield self.crypto.subtle.encrypt({name:"AES-GCM",iv:g,tagLength:128},G,b);b=new Uint8Array(b);let f=new Uint8Array(g.length+
b.length);f.set(g);f.set(b,g.length);return btoa(String.fromCharCode.apply(null,f))}return yield new Promise((b,g)=>{let k=ea++;K.set(k,a=>{if(a.success)return n&&console.log(a.txt),b(a.txt);{let b=Error(a.message);b.stack+="\n"+a.stack;return g(b)}});f.postMessage({type:"taske",taskID:k,txt:a})})});(a?global:self).Module={locateFile:function(b){return"libDynamsoftBarcodeReader.wasm"==b?a?l+"dbr-"+r+".node.wasm":l+"dbr-"+r+(L?".full":"")+".wasm":l+b},print:a=>{f.postMessage({type:"log",message:a})},
printErr:a=>{console.error(a);f.postMessage({type:"log",message:a})},onRuntimeInitialized:function(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){f.postMessage({type:"log",message:"wasm initialized, cost "+(Date.now()-P)+" ms"});let a={productKeys:u,domain:H};n&&(a.bDebug=!0);if(fa){yield ha;let b=C;if(b instanceof Error){f.postMessage({type:"load",success:!1,message:b.message,stack:b.stack});setTimeout(()=>{throw b;},0);return}if(!b.productKeys){f.postMessage({type:"load",success:!1,
message:b.message,stack:""});return}b.message&&f.postMessage({type:"log",message:b.message});F=1E3*b.sessionDuration;a.runtimeKeys=u;a.productKeys=b.productKeys;a.consumeType=b.consumeType;a.urlGetLicense="";a.aryUrlPostConsume=a.sm_aryUrlPostConsume=[];a.bNewDevice=A;a.uuid=V;a.initTime=Date.now().toString();T();setInterval(T,F)}Module.BarcodeReaderWasm.init(JSON.stringify(a));f.postMessage({type:"load",success:!0,version:Module.BarcodeReaderWasm.getVersion()})})}};let v=new Map,xa=0;f.onmessage=
function(b){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var k=b.data?b.data:b,g=k.id,t=k.instanceID;const y=k.body;switch(k.type){case "loadWasm":n=k.bWasmDebug;l=k.engineResourcePath;r=k.version;u=k.productKeys;H=k.domain;L=k.bUseFullFeature;V=k.deviceId;Y=k.browserInfo;Z=k.deviceFriendlyName;U=k.licenseServer?k.licenseServer:U;da=k.bSendSmallRecordsForDebug;f.postMessage({type:"log",message:"wasm loading..."});P=Date.now();if(a){k=Module;Module=require("./dbr-"+r+".node.wasm.js");
for(let a in k)Module[a]=k[a]}else importScripts(l+"dbr-"+r+(L?".full":"")+".wasm.js");(fa=8==u.length)&&(ha=(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{yield(yield localforage.createInstance({name:"dbrjshello"})).setItem("dbrjshello","available")}catch(Q){localforage=function(a){this.dbname=a};localforage.createInstance=function(a){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){return new localforage(a.name)})};var a=a=>function(){let b=[];for(let a=0;a<arguments.length;++a)b.push(arguments[a]);
return new Promise((d,g)=>{let q=ea++;K.set(q,a=>{if(a.success)return n&&console.log(a.result),d(a.result);{let b=Error(a.message);b.stack+="\n"+a.stack;return g(b)}});f.postMessage({type:"localforage",taskID:q,dbname:this.dbname,method:a,paras:b})})};localforage.prototype.setItem=a("setItem");localforage.prototype.getItem=a("getItem");localforage.prototype.removeItem=a("removeItem");localforage.prototype.keys=a("keys")}J=yield localforage.createInstance({name:"dbrjsLicenseInfo"});O=yield localforage.createInstance({name:"dbrjs"+
u+"unsV2"});A=!(yield J.getItem(u+"old"));a=Date.now();let b;var g;let k=!0,l,t;if(g=yield J.getItem(u))[b,l,g]=g,k=a>g,a>b&&(yield J.removeItem(u),l=null);try{t=yield Promise.race([fetch(U+"api/verification/"+u).then(a=>{if(a.ok)return a.text();throw Error("Network Error. Can't get license.");}),new Promise((a,b)=>{setTimeout(()=>b(Error("Network Error. Request timeout.")),k?15E3:3E3)})])}catch(Q){if(n&&console.error(Q),k){C=Q;return}}g=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){return yield va(a).then(a=>
JSON.parse(a)).catch(()=>Error("Parse Error. Can't get valid license."))});if(t){C=yield g(t);var r="device"==C.consumeType;C.productKeys?yield J.setItem(u,[a+864E5*(r?366:7),t,a+6048E5]):r&&(r=C,C=yield g(l),C.message=r.message,yield J.setItem(u,[b,t,Math.min(a+6048E5,b)]))}else C=yield g(l)}))());break;case "createInstance":t=xa++;try{let b=new Module.BarcodeReaderWasm(k.bScanner,t);v.set(t,b);let f=JSON.parse(b.getRuntimeSettings());k.bScanner?(f.localizationModes=[2,0,0,0,0,0,0,0],f.deblurLevel=
0):(f.expectedBarcodesCount=512,f.scaleDownThreshold=1E5,f.timeout=1E5);a||L||(f.barcodeFormatIds=234883071);b.updateRuntimeSettings(JSON.stringify(f))}catch(d){z(d,g);break}f.postMessage({type:"task",id:g,body:{success:!0,instanceID:t}});break;case "destroy":try{v.get(t).delete(),v.delete(t)}catch(d){z(d,g);break}f.postMessage({type:"task",id:g,body:{success:!0}});break;case "decodeBuffer":{let a;try{a=JSON.parse(v.get(t).decodeBuffer(y.buffer,y.width,y.height,y.stride,y.format))}catch(q){z(q,g);
break}f.postMessage({type:"task",id:g,body:{success:!0,decodeReturn:a}});break}case "decodeFileInMemory":{let a;try{a=JSON.parse(v.get(t).decodeFileInMemory(y.bytes))}catch(q){z(q,g);break}f.postMessage({type:"task",id:g,body:{success:!0,decodeReturn:a}});break}case "clearMapDecodeRecord":try{v.get(t).clearMapDecodeRecord()}catch(d){z(d,g);break}f.postMessage({type:"task",id:g,body:{success:!0}});break;case "getRuntimeSettings":{let a;try{a=v.get(t).getRuntimeSettings()}catch(q){z(q,g);break}f.postMessage({type:"task",
id:g,body:{success:!0,results:a}});break}case "updateRuntimeSettings":{let a;try{a=JSON.parse(v.get(t).updateRuntimeSettings(y.settings))}catch(q){z(q,g);break}f.postMessage({type:"task",id:g,body:{success:!0,updateReturn:a}});break}case "resetRuntimeSettings":try{let a=v.get(t);a.resetRuntimeSettings();let b=JSON.parse(a.getRuntimeSettings());a.bScanner?(b.localizationModes=[2,0,0,0,0,0,0,0],b.deblurLevel=0):(b.expectedBarcodesCount=512,b.scaleDownThreshold=1E5,b.timeout=1E5);L||(b.barcodeFormatIds=
234883071);a.updateRuntimeSettings(JSON.stringify(b))}catch(d){z(b,g);break}f.postMessage({type:"task",id:g,body:{success:!0}});break;case "outputSettingsToString":{let a;try{a=v.get(t).outputSettingsToString()}catch(q){z(q,g);break}f.postMessage({type:"task",id:g,body:{success:!0,results:a}});break}case "initRuntimeSettingsWithString":{let a;try{a=JSON.parse(v.get(t).initRuntimeSettingsWithString(y.settings))}catch(q){z(q,g);break}f.postMessage({type:"task",id:g,body:{success:!0,initReturn:a}});
break}case "getIntermediateResults":{let a=null;try{var B=v.get(t).getIntermediateResults(),ta=JSON.parse(B,(b,d)=>"bytes"===b&&"ptr"in d&&"length"in d?a=Module.BarcodeReaderWasm.getBytes(d.ptr,d.length):d)}catch(q){z(q,g);break}f.postMessage({type:"task",id:g,body:{success:!0,results:ta}});v.get(t).freeIntermediateResults();break}case "setModeArgument":{let a;try{a=JSON.parse(v.get(t).setModeArgument(y.modeName,y.index,y.argumentName,y.argumentValue))}catch(q){z(q,g);break}f.postMessage({type:"task",
id:g,body:{success:!0,setReturn:a}});break}case "getModeArgument":{let a;try{a=JSON.parse(v.get(t).getModeArgument(y.modeName,y.index,y.argumentName))}catch(q){z(q,g);break}f.postMessage({type:"task",id:g,body:{success:!0,getReturn:a}});break}case "updateScanSettings":try{let a=v.get(t),b=y.settings;a.duplicateForgetTime=b.duplicateForgetTime;a.oneDRememberFrameCount=b.oneDRememberFrameCount;a.oneDTrustFrameCount=b.oneDTrustFrameCount;b.frameFilter?a.setFrameFilter(JSON.stringify(b.frameFilter)):
a.setFrameFilter("")}catch(d){z(d,g);break}f.postMessage({type:"task",id:g,body:{success:!0}});break;case "getScanSettings":k={};try{let a=v.get(t);k.duplicateForgetTime=a.duplicateForgetTime;k.oneDRememberFrameCount=a.oneDRememberFrameCount;k.oneDTrustFrameCount=a.oneDTrustFrameCount;let b=a.getFrameFilter();b&&(k.frameFilter=JSON.parse(b))}catch(d){z(d,g);break}f.postMessage({type:"task",id:g,body:{success:!0,results:k}});break;case "task":g=k.id;k=k.body;try{K.get(g)(k),K.delete(g)}catch(d){throw K.delete(g),
d;}break;default:console.warn("Unmatched task: ",b)}})};if(a)f.on("message",f.onmessage);let z=(a,b)=>{f.postMessage({type:"task",id:b,body:{success:!1,message:a.message,stack:a.stack}});setTimeout(()=>{throw a;},0)};(a?global:self).addConsumeRecordToDB=a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){n&&console.log("%c","color:#0f0",atob(a));yield O.setItem(Date.now().toString(),a);S<Date.now()&&(S=Date.now()+F,T())});let T=()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){aa=
aa.then(()=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){var a=Date.now();let b=yield O.keys();if(b.length){n&&console.log("get keys to filter for send: %o",b);var f=[],l=new Map;for(let g of b){let b=JSON.parse(atob(yield O.getItem(g))),d;A?(A=!1,yield J.setItem(u+"old",btoa(V)),d=Math.floor(b.decodeTime/F)*F):d=Math.ceil(b.decodeTime/F)*F;da&&(d=parseInt(b.decodeTime));n&&console.log("timeKey: %d, dateNow: %d",d,a);if(d>a)continue;f.push(g);let k=l.has(d)?l.get(d):{all:0,oned:0,qr:0,
pdf417:0,dm:0,mc:0,other:0};k.all+=b.consumption.all;k.oned+=b.consumption.oned;k.qr+=b.consumption.qr;k.pdf417+=b.consumption.pdf417;k.dm+=b.consumption.dm;k.mc+=b.consumption.mc;k.other+=b.consumption.other;l.set(d,k)}if(f.length){n&&console.log("get keys for send: %o",b);S=a+F;var r=[];l.forEach((a,b)=>{r.push({recordTime:b,consumption:a})});a={version:"2",runtimeKeys:u,uuid:V,browserInfo:Y,deviceFriendlyName:Z,postTime:Date.now(),records:r};n&&n&&console.log(a);yield fetch(U+"api/verification",
{mode:"cors",method:"POST",body:yield wa(JSON.stringify(a))}).then(a=>$jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(a.ok)for(let a of f)yield O.removeItem(a)}),a=>{console.error(a)})}}}))})})();
