/*
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2019, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 14.3.1
*
* Module: addon/ocr
* final js: build\addon\dynamsoft.webtwain.addon.OCR.js
*/
Dynamsoft.OCRVerInName="10.0.0.0618";Dynamsoft.OCRLanguageData_eng="4113088";Dynamsoft.OCRLanguageData_ara="1432056";Dynamsoft.OCRLanguageData_chi_sim="2469156";Dynamsoft.OCRLanguageData_chi_tra="2366642";Dynamsoft.OCRLanguageData_hin="1122751";Dynamsoft.OCRLanguageData_urd="1398718";Dynamsoft.OCRLanguageData_spa="2294433";Dynamsoft.OCRLanguageData_fra="1130365";Dynamsoft.OCRLanguageData_msa="1747801";Dynamsoft.OCRLanguageData_ind="1122661";Dynamsoft.OCRLanguageData_rus="3861738";Dynamsoft.OCRLanguageData_ben="855841";Dynamsoft.OCRLanguageData_por="1982756";Dynamsoft.OCRLanguageData_pan="497721";Dynamsoft.OCRLanguageData_deu="1525436";Dynamsoft.OCRLanguageData_jpn="2471260";Dynamsoft.OCRLanguageData_fas="431500";Dynamsoft.OCRLanguageData_swa="2167651";Dynamsoft.OCRLanguageData_jav="2982741";Dynamsoft.OCRLanguageData_tel="2769654";Dynamsoft.OCRLanguageData_tur="4550554";Dynamsoft.OCRLanguageData_kor="1677415";Dynamsoft.OCRLanguageData_mar="2118233";Dynamsoft.OCRLanguageData_tam="3237963";Dynamsoft.OCRLanguageData_vie="531275";Dynamsoft.OCRLanguageData_ita="2701314";Dynamsoft.OCRLanguageData_tha="1072600";(function(a){function b(){var c=this;c._text="";c._fontName="";c._fontSize="";c._left=0;c._top=0;c._right=0;c._bottom=0}b.prototype.GetText=function(){var c=this;return c._text};b.prototype.GetFontName=function(){var c=this;return c._fontName};b.prototype.GetFontSize=function(){var c=this;return c._fontSize};b.prototype.GetWordRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};a.NewWordBasicResult=function(){return new b()}})(Dynamsoft.Lib);(function(a){function b(){var c=this;c._count=0;c._left=0;c._top=0;c._right=0;c._bottom=0;c._wordlist=[]}b.prototype.GetWordCount=function(){var c=this;return c._count};b.prototype.GetLineRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};b.prototype.GetWordContent=function(d){var f=this,c=f._wordlist.length;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetWordContent");return""}var e=Dynamsoft.Lib.NewWordBasicResult();e._text=f._wordlist[d].text;e._fontName=f._wordlist[d].fontname;e._fontSize=f._wordlist[d].fontsize;e._left=f._wordlist[d].rect[0];e._top=f._wordlist[d].rect[1];e._right=f._wordlist[d].rect[2];e._bottom=f._wordlist[d].rect[3];return e};a.NewLineBasicResult=function(){return new b()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._linelist=[]}a.prototype.GetLineCount=function(){var c=this;return c._count};a.prototype.GetLineContent=function(e){var f=this,d=f._linelist.length;if(f._errorCode<0){return""}if(e==null||e>=d||e<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetLineContent");return""}var c=Dynamsoft.Lib.NewLineBasicResult();c._count=f._linelist[e].words.length;c._left=f._linelist[e].rect[0];c._top=f._linelist[e].rect[1];c._right=f._linelist[e].rect[2];c._bottom=f._linelist[e].rect[3];c._wordlist=f._linelist[e].words;return c};b.NewPageBasicResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._pagelist=[]}a.prototype.GetPageCount=function(){var c=this;return c._count};a.prototype.GetPageContent=function(d){var f=this,c=f._pagelist.length;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageContent");return""}var e=Dynamsoft.Lib.NewPageBasicResult();e._count=f._pagelist[d].lines.length;e._linelist=f._pagelist[d].lines;return e};b.NewPageSetBasicResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(d){var c=this;c._errorCode=0;c._errorString="";c._resultlist=[];c._stwain=d}a.prototype.GetErrorCode=function(){var c=this;return c._errorCode};a.prototype.GetErrorString=function(){var c=this;return c._errorString};a.prototype.GetFormat=function(){var c=this;return c._resultlist[0].format};a.prototype.GetInput=function(){var c=this;return c._resultlist[0].input};a.prototype.GetPageSetCount=function(){var c=this;return c._resultlist[0].pagesets.length};a.prototype.GetPageSetContent=function(e){var f=this,c=f._resultlist[0].pagesets.length;if(f._errorCode<0){return""}if(e==null||e>=c||e<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageSetContent");return""}var d=Dynamsoft.Lib.NewPageSetBasicResult();d._count=f._resultlist[0].pagesets[e].pages.length;d._pagelist=f._resultlist[0].pagesets[e].pages;return d};a.prototype.Get=function(){var c=this;return c._stwain._innerFun("GetOCRRestult")};a.prototype.Save=function(c){var e=this,d=b.html5.Funs.replaceLocalFilename(c);return e._stwain._innerFun("SaveOCRRestult",b.html5.Funs.makeParams(d))};b.NewOCRBasicResult=function(c){return new a(c)}})(Dynamsoft.Lib);var EnumDWT_OCRLanguage={OCRL_ENG:"eng",OCRL_ARA:"ara",OCRL_CHI_SIM:"chi_sim",OCRL_CHI_TRA:"chi_tra",OCRL_HIN:"hin",OCRL_URD:"urd",OCRL_SPA:"spa",OCRL_FRA:"fra",OCRL_MSA:"msa",OCRL_IND:"ind",OCRL_RUS:"rus",OCRL_BEN:"ben",OCRL_POR:"por",OCRL_PAN:"pan",OCRL_DEU:"deu",OCRL_JPN:"jpn",OCRL_FAS:"fas",OCRL_SWA:"swa",OCRL_JAV:"jav",OCRL_TEL:"tel",OCRL_TUR:"tur",OCRL_KOR:"kor",OCRL_MAR:"mar",OCRL_TAM:"tam",OCRL_VIE:"vie",OCRL_ITA:"ita",OCRL_THA:"tha"};var EnumDWT_OCRPageSetMode={OCRPSM_OSD_ONLY:0,PSM_AUTO_OSD:1,PSM_AUTO_ONLY:2,PSM_AUTO:3,PSM_SINGLE_COLUMN:4,PSM_SINGLE_BLOCK_VERT_TEXT:5,PSM_SINGLE_BLOCK:6,PSM_SINGLE_LINE:7,PSM_SINGLE_WORD:8,PSM_CIRCLE_WORD:9,PSM_SINGLE_CHAR:10};var EnumDWT_OCROutputFormat={OCROF_TEXT:0,OCROF_PDFPLAINTEXT:1,OCROF_PDFIMAGEOVERTEXT:2,OCROF_PDFPLAINTEXT_PDFX:3,OCROF_PDFIMAGEOVERTEXT_PDFX:4};(function(b){function a(){var c=this;c.UnicodeFontName="";c.UseDetectedFont=true;c.MinFontSizeforMoreAccurateResult=0;c.OCRLanguage=EnumDWT_OCRLanguage.OCRL_ENG;c.PageSetMode=EnumDWT_OCRPageSetMode.PSM_AUTO;c.OutputFormat=EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT}a.prototype.GetUnicodeFontName=function(){var c=this;return c.UnicodeFontName};a.prototype.SetUnicodeFontName=function(c){var d=this;d.UnicodeFontName=c;return true};a.prototype.GetUseDetectedFont=function(){var c=this;return c.UseDetectedFont};a.prototype.SetUseDetectedFont=function(c){var d=this;d.UseDetectedFont=c;return true};a.prototype.GetMinFontSizeforMoreAccurateResult=function(){var c=this;return c.MinFontSizeforMoreAccurateResult};a.prototype.SetMinFontSizeforMoreAccurateResult=function(c){var d=this;d.MinFontSizeforMoreAccurateResult=c;return true};a.prototype.GetOCRLanguage=function(){var c=this;return c.OCRLanguage};a.prototype.SetOCRLanguage=function(c){var d=this;d.OCRLanguage=c;return true};a.prototype.GetPageSetMode=function(){var c=this;return c.PageSetMode};a.prototype.SetPageSetMode=function(c){var d=this;d.PageSetMode=c;return true};a.prototype.GetOutputFormat=function(){var c=this;return c.OutputFormat};a.prototype.SetOutputFormat=function(c){var d=this;d.OutputFormat=c;return true};b.NewOptions=function(){return new a()}})(Dynamsoft.Lib);var EnumDWT_OCRDownloadType={OCRDT_Dll:0,OCRDT_LANGUAGE:1};(function(b){if(!b.product.bChromeEdition){return}var a;function d(e){var f=b.html5.Funs;if(b.env.bMac){a="DynamicOCR_"+Dynamsoft.OCRVerInName+".dylib"}else{if(b.env.bLinux){a="DynamicOCR_"+Dynamsoft.OCRVerInName+".so"}else{if(dynamsoft.dcp.b64bit){a="DynamicOCRx64_"+Dynamsoft.OCRVerInName+".dll"}else{a="DynamicOCR_"+Dynamsoft.OCRVerInName+".dll"}}}e._innerSend("GetAddOnVersion",f.makeParams("ocr",a),true,false,false);e.__innerOCRBasicReadFunction=function(k,t,l,q,j,r,s,g,h,o,i){var n=this;if(!b.isFunction(o)){return n.__innerOCRSyncReadFunction(k,h)}else{return n.__innerOCRBasicAsyncReadFunction(k,t,l,q,j,r,s,g,h,o,i)}};e.__innerGetOCRBasicResultAsyncFunction=function(h){var g=Dynamsoft.Lib.NewOCRBasicResult(this);if(h){g._errorCode=h.exception;g._errorString=h.description;g._resultlist=h.result}return g};e.__innerOCRBasicAsyncReadFunction=function(k,v,l,r,j,s,u,g,h,q,i){var o=this;var n=function(m){if(m.exception==0){if(b.isFunction(q)){if(v!=-1){if(r==1){q(v,j,s,u,g,o.__innerGetOCRBasicResultAsyncFunction(m))}else{q(v,o.__innerGetOCRBasicResultAsyncFunction(m))}}else{if(l!=""){q(l,o.__innerGetOCRBasicResultAsyncFunction(m))}else{q(o.__innerGetOCRBasicResultAsyncFunction(m))}}}}else{if(b.isFunction(i)){i(m.exception,m.description)}}f.hideMask(k)},t=function(m){f.hideMask(k)};f.showMask(k);o._innerSend(k,h,true,n,t);return true};e.__innerOCRSyncReadFunction=function(h,j){var k=this,i,g;i=k._innerFunRaw(h,j,false,false);g=b.NewOCRBasicResult();g._errorCode=k._errorCode;g._errorString=k._errorString;if(i&&b.isArray(i)){g._resultlist=i;g._Count=i.length}return g};e.__IsOCRBasicModuleInstalled=function(){var i=e;var g=i._innerFun("GetAddOnVersion",f.makeParams("ocr",a));var h=g.split("|");if(h[0]!=""){return true}else{return false}};e.__innerBasicDownload=function(n,q,i,s,j){var m=e,o;b.cancelFrome=2;n=n.toString();var l=function(){if(b.isFunction(s)){s()}return true},t=function(){if(b.isFunction(j)){j(m.ErrorCode,m.ErrorString)}return false};if(!b.License.checkProductKey(m,{Core:true})){return t()}if(!b.License.checkProductKey(m,{OCR:true},true)){return t()}if(q!=EnumDWT_OCRDownloadType.OCRDT_Dll){m._innerFun("SetOCRLanguage",f.makeParams(i))}var g=m._innerFun("GetAddOnVersion",f.makeParams("ocr",a));var h=g.split("|");if(q==EnumDWT_OCRDownloadType.OCRDT_Dll){if(h[0]!=""){l();return true}}else{if((i==EnumDWT_OCRLanguage.OCRL_ENG&&h[1]==Dynamsoft.OCRLanguageData_eng)||(i==EnumDWT_OCRLanguage.OCRL_ARA&&h[1]==Dynamsoft.OCRLanguageData_ara)||(i==EnumDWT_OCRLanguage.OCRL_CHI_TRA&&h[1]==Dynamsoft.OCRLanguageData_chi_tra)||(i==EnumDWT_OCRLanguage.OCRL_CHI_SIM&&h[1]==Dynamsoft.OCRLanguageData_chi_sim)||(i==EnumDWT_OCRLanguage.OCRL_HIN&&h[1]==Dynamsoft.OCRLanguageData_hin)||(i==EnumDWT_OCRLanguage.OCRL_URD&&h[1]==Dynamsoft.OCRLanguageData_urd)||(i==EnumDWT_OCRLanguage.OCRL_SPA&&h[1]==Dynamsoft.OCRLanguageData_spa)||(i==EnumDWT_OCRLanguage.OCRL_FRA&&h[1]==Dynamsoft.OCRLanguageData_fra)||(i==EnumDWT_OCRLanguage.OCRL_MSA&&h[1]==Dynamsoft.OCRLanguageData_msa)||(i==EnumDWT_OCRLanguage.OCRL_IND&&h[1]==Dynamsoft.OCRLanguageData_ind)||(i==EnumDWT_OCRLanguage.OCRL_RUS&&h[1]==Dynamsoft.OCRLanguageData_rus)||(i==EnumDWT_OCRLanguage.OCRL_BEN&&h[1]==Dynamsoft.OCRLanguageData_ben)||(i==EnumDWT_OCRLanguage.OCRL_POR&&h[1]==Dynamsoft.OCRLanguageData_por)||(i==EnumDWT_OCRLanguage.OCRL_PAN&&h[1]==Dynamsoft.OCRLanguageData_pan)||(i==EnumDWT_OCRLanguage.OCRL_DEU&&h[1]==Dynamsoft.OCRLanguageData_deu)||(i==EnumDWT_OCRLanguage.OCRL_JPN&&h[1]==Dynamsoft.OCRLanguageData_jpn)||(i==EnumDWT_OCRLanguage.OCRL_FAS&&h[1]==Dynamsoft.OCRLanguageData_fas)||(i==EnumDWT_OCRLanguage.OCRL_SWA&&h[1]==Dynamsoft.OCRLanguageData_swa)||(i==EnumDWT_OCRLanguage.OCRL_JAV&&h[1]==Dynamsoft.OCRLanguageData_jav)||(i==EnumDWT_OCRLanguage.OCRL_TEL&&h[1]==Dynamsoft.OCRLanguageData_tel)||(i==EnumDWT_OCRLanguage.OCRL_TUR&&h[1]==Dynamsoft.OCRLanguageData_tur)||(i==EnumDWT_OCRLanguage.OCRL_KOR&&h[1]==Dynamsoft.OCRLanguageData_kor)||(i==EnumDWT_OCRLanguage.OCRL_MAR&&h[1]==Dynamsoft.OCRLanguageData_mar)||(i==EnumDWT_OCRLanguage.OCRL_TAM&&h[1]==Dynamsoft.OCRLanguageData_tam)||(i==EnumDWT_OCRLanguage.OCRL_VIE&&h[1]==Dynamsoft.OCRLanguageData_vie)||(i==EnumDWT_OCRLanguage.OCRL_ITA&&h[1]==Dynamsoft.OCRLanguageData_ita)||(i==EnumDWT_OCRLanguage.OCRL_THA&&h[1]==Dynamsoft.OCRLanguageData_tha)){l();return true}}if(!n||n==""){b.Errors.OCR_InvalidRemoteFilename(m);t();return false}if(f.isServerInvalid(m)){t();return false}o="get";b.showProgress(m,"Download",true);var r=function(u){var v=(u.total===0)?100:Math.round(u.loaded*100/u.total),w=[u.loaded," / ",u.total].join("");m._OnPercentDone([0,v,"","http"])},k=true;if(q==EnumDWT_OCRDownloadType.OCRDT_Dll){m._OnPercentDone([0,-1,"Downloading OCR Module...","http"])}else{m._OnPercentDone([0,-1,"Downloading OCR Language Data...","http"])}if(!b.isFunction(s)){k=false}f.loadHttpBlob(m,o,n,k,function(p){m._OnPercentDone([0,-1,"Loading..."]);var u=100;if(q==EnumDWT_OCRDownloadType.OCRDT_LANGUAGE){u=101}m.__LoadImageFromBytes(p,u,"",k,l,t)},function(){b.closeProgress("Download");t()},r)}}var c=function(g){var h=b.html5.Funs,e;var f=b.NewOptions();d(g);e={OCR:{SetUnicodeFontName:function(i){return f.SetUnicodeFontName(i)},GetUnicodeFontName:function(){return f.GetUnicodeFontName()},SetIfUseDetectedFont:function(i){return f.SetUseDetectedFont(i)},GetIfUseDetectedFont:function(){return f.GetUseDetectedFont()},SetMinFontSizeforMoreAccurateResult:function(i){return f.SetMinFontSizeforMoreAccurateResult(i)},GetMinFontSizeforMoreAccurateResult:function(){return f.GetMinFontSizeforMoreAccurateResult()},SetLanguage:function(i){return f.SetOCRLanguage(i)},IsModuleInstalled:function(){return g.__IsOCRBasicModuleInstalled()},SetPageSetMode:function(j){var i=j*1;if(i==EnumDWT_OCRPageSetMode.OCRPSM_OSD_ONLY||i==EnumDWT_OCRPageSetMode.PSM_AUTO_OSD||i==EnumDWT_OCRPageSetMode.PSM_AUTO_ONLY||i==EnumDWT_OCRPageSetMode.PSM_AUTO||i==EnumDWT_OCRPageSetMode.PSM_SINGLE_COLUMN||i==EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK_VERT_TEXT||i==EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK||i==EnumDWT_OCRPageSetMode.PSM_SINGLE_LINE||i==EnumDWT_OCRPageSetMode.PSM_SINGLE_WORD||i==EnumDWT_OCRPageSetMode.PSM_CIRCLE_WORD||i==EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR){return f.SetPageSetMode(i)}Dynamsoft.Lib.Errors.OCR_InvalidPageSetMode(g);return false},SetOutputFormat:function(j){var i=j*1;if(i==EnumDWT_OCROutputFormat.OCROF_TEXT||i==EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT||i==EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT||i==EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT_PDFX||i==EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX){return f.SetOutputFormat(i)}Dynamsoft.Lib.Errors.OCR_InvalidOutputFormat(g);return false},Recognize:function(k,i,j){if(!b.License.checkProductKey(g,{OCR:true},true)){if(b.isFunction(j)){j(g._errorCode,g._errorString)}return false}return g.__innerOCRBasicReadFunction("OCRRecognize",k,"",0,0,0,0,0,h.makeParams(0,k,"",0,0,0,0,f.GetUnicodeFontName(),f.GetUseDetectedFont(),f.GetMinFontSizeforMoreAccurateResult(),f.GetOCRLanguage(),f.GetPageSetMode(),f.GetOutputFormat()),i,j)},RecognizeRect:function(p,j,m,o,i,n,k){if((!j&&j!=0)||(!m&&m!=0)||(!o&&o!=0)||(!i&&i!=0)){var l=this;var q=Dynamsoft.Lib.NewOCRBasicResult(g);Dynamsoft.Lib.Errors.OCR_InvalidLeftOrTopOrRightOrBottom(q,"RecognizeRect");k(q.GetErrorCode(),q.GetErrorString());return}if(!b.License.checkProductKey(g,{OCR:true},true)){if(b.isFunction(k)){k(g._errorCode,g._errorString)}return false}return g.__innerOCRBasicReadFunction("OCRRecognize",p,"",1,j,m,o,i,h.makeParams(0,p,"",j,m,o,i,f.GetUnicodeFontName(),f.GetUseDetectedFont(),f.GetMinFontSizeforMoreAccurateResult(),f.GetOCRLanguage(),f.GetPageSetMode(),f.GetOutputFormat()),n,k)},RecognizeFile:function(j,i,k){var l=h.replaceLocalFilename(j);if(!b.License.checkProductKey(g,{OCR:true},true)){if(b.isFunction(k)){k(g._errorCode,g._errorString)}return false}return g.__innerOCRBasicReadFunction("OCRRecognize",-1,l,0,0,0,0,0,h.makeParams(1,-1,l,0,0,0,0,f.GetUnicodeFontName(),f.GetUseDetectedFont(),f.GetMinFontSizeforMoreAccurateResult(),f.GetOCRLanguage(),f.GetPageSetMode(),f.GetOutputFormat()),i,k)},RecognizeSelectedImages:function(i,k){var j;if(!b.License.checkProductKey(g,{OCR:true},true)){if(b.isFunction(k)){k(g._errorCode,g._errorString)}return false}j=h.__SetSelectedImages(g,g._UIManager.GetCurrentImageIndex(),g._UIManager.GetSelectedIndexes());if(j){j=g.__innerOCRBasicReadFunction("OCRRecognize",-1,"",0,0,0,0,0,h.makeParams(2,-1,"",0,0,0,0,f.GetUnicodeFontName(),f.GetUseDetectedFont(),f.GetMinFontSizeforMoreAccurateResult(),f.GetOCRLanguage(),f.GetPageSetMode(),f.GetOutputFormat()),i,k)}return j},Download:function(k,i,j){return g.__innerBasicDownload(k,EnumDWT_OCRDownloadType.OCRDT_Dll,f.GetOCRLanguage(),i,j)},DownloadLangData:function(k,i,j){return g.__innerBasicDownload(k,EnumDWT_OCRDownloadType.OCRDT_LANGUAGE,f.GetOCRLanguage(),i,j)}}};g.__addon=g.__addon||{};b.mix(g.__addon,e)};if(b.DynamicLoadAddonFuns){b.DynamicLoadAddonFuns.push(c)}})(Dynamsoft.Lib);
