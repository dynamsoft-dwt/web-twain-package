/*
* @name: dwt esm (ES Modules) package
* @version: 16.1
* @date: 2020-08-11
* @components:
*   + Dynamsoft Dynamic Web TWAIN version: @Mon 07/27/2020 151023
*   + Dynamsoft Barcode Reader Addon for DWT version 16.1 (DBR version 7.4) 20200605 1340
*   + Dynamsoft PDF Rasterizer Addon for DWT version: 16.1
*   + Dynamsoft OCR Basic Addon for DWT version: 16.1
*   + Dynamsoft OCR Pro Addon for DWT version: 16.1
*   + Dynamsoft Webcam Addon for DWT version: 16.1
*   + Dynamsoft Camera Addon for DWT version: 16.1
*   + Dynamsoft File Uploader version: 1.6.0.0428
*/

/**
 * dynamsoft-javascript-barcode is the package for Dynamsoft WASM-based Barcode Reader.
 * It's used as part of the barcode add-on when required.
 */
import DSBarcodeReader from "dynamsoft-javascript-barcode";

// Dynamsoft Dynamic Web TWAIN version: @Thu 08/20/2020 145245
// @Thu 08/20/2020 145245
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2020, Dynamsoft Corporation
* Author: Dynamsoft Support Team
* Version: 16.1.1
*/
/** dynamsoft.webtwain.initiate.js
 * --Custom Changes--
 * 1. imported dynamsoft.imageio.js:
 *    [changed]b.getScript(ab,true,function(af) -> if(getScriptImageIO())
 *    [changed] ad()}) -->ad()}
 * 2. changed local functions in the SelectSource dialog to global ones by removing 'Dynamsoft'
 *    [changed] window.Dynamsoft.dialog_selectsource_select -> window.dialog_selectsource_select
 *    [changed] window.Dynamsoft.dialog_selectsource_li_click -> window.dialog_selectsource_li_click
 *    [changed] window.Dynamsoft.dialog_selectsource_cancel -> window.dialog_selectsource_cancel
 *    [changed] onclick="Dynamsoft.dialog_selectsource_li_click(this);" -> onclick="window.dialog_selectsource_li_click(this);"
 *    [changed] onclick="Dynamsoft.dialog_selectsource_select()" -> onclick="window.dialog_selectsource_select()"
 *    [changed] onclick="Dynamsoft.dialog_selectsource_cancel()" -> onclick="window.dialog_selectsource_cancel()"
 * 3. make sure not to load install.js by commenting out af.push([ae,"/dynamsoft.webtwain.install.js",ai].join(""));
 */
var Dynamsoft=window.Dynamsoft||{Lib:{}};(function(b){var a=b.WebTwainEnv||(b.WebTwainEnv={});a.initQueue=[];b.initOrder=b.initOrder||[];b.unloadQueue=b.unloadQueue||[];})(Dynamsoft);
Dynamsoft.WebTwainEnv.IfUseActiveXForIE10Plus=false;var Dynamsoft=Dynamsoft||{};(function(e,b,a){var c=20200521;if(b._preDefine_ver){if(b._preDefine_ver>=c){return}}b._preDefine_ver=c;var d=function(g,j){for(var h in j){if(j.hasOwnProperty(h)){g[h]=j[h]}}return g},f=function(j){if(null==j||"object"!=typeof j){return j}var k,h,g;if(j instanceof Date){k=new Date();k.setTime(j.getTime());return k}else{if(j instanceof Array){k=[];g=j.length;for(h=0;h<g;h++){k[h]=f(j[h])}return k}else{if(j instanceof Object){k={};for(h in j){if(j.hasOwnProperty(h)){k[h]=f(j[h])}}return k}else{return 0}}}};if(!b.Lib){b.Lib={}}d(b.Lib,{win:e,doc:e.document,debug:!1,nil:a,mix:d,clone:f,keys:Object.keys,guid:function(l){var k=[],g="0123456789abcdef",j,h;for(j=0;j<8;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");for(j=0;j<4;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-4");for(j=0;j<3;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");h=g.substr(Math.floor(Math.random()*16),1);h=g.substr((h&3)|8,1);k.push(h);for(j=0;j<3;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");for(j=0;j<8;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.unshift(l);return k.join("")},now:Date.now||function(){return +new Date()},noop:function(){}})})(typeof window!=="undefined"?window:this,Dynamsoft);(function(d){var b=!({toString:1}.propertyIsEnumerable("toString")),c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function a(f,e){return({}).hasOwnProperty.call(f,e)}d.keys=Object.keys||function(h){var e=[],g,f;for(g in h){if(a(h,g)){e.push(g)}}if(b){for(f=c.length-1;f>=0;f--){g=c[f];if(a(h,g)){e.push(g)}}}return e}})(Dynamsoft.Lib);(function(j,k){var f=20200716;if(j._isXXX_ver){if(j._isXXX_ver>=f){return}}j._isXXX_ver=f;var o=j.mix,l,g,i=!1,e=!0,d=i,c={}.hasOwnProperty,n={},m=(typeof HTMLElement==="object");function h(p){return p===k}function a(p){return p!==k}o(j,{isDef:a,isUndef:h,isUndefined:h,isNull:function(p){return(p===null)},isNaN:function(p){return isNaN(p)},type:function(p){if(p===null||p===k){return String(p)}return n[{}.toString.call(p)]||"object"},isPlainObject:function(s){if(!s||j.type(s)!=="object"||s.nodeType||s.window==s){return i}var p,q;try{if((q=s.constructor)&&!c(s,"constructor")&&!c(q.prototype,"isPrototypeOf")){return i}}catch(r){return i}for(p in s){}return(h(p)||c(s,p))},isDOM:function(p){return m?(p instanceof HTMLElement):p&&typeof p==="object"&&(p.nodeType===1||p.nodeType===9)&&typeof p.nodeName==="string"},isDOMInBody:function(q){var p=q;if(j.isDOM(q)){while(!p&&p!=document.body){p=p.parentNode}}else{p=0}return !!p}});function b(p,q){n["[object "+p+"]"]=(q=p.toLowerCase());j["is"+p]=function(r){return j.type(r)===q}}b("Function");j.each=l=function(t,v,p){if(t){var w,r,x,u=0,q=t.length,s=h(q)||j.isFunction(t);p=p||null;if(s){x=j.keys(t);for(;u<x.length;u++){w=x[u];if(v.call(p,t[w],w,t)===i){break}}}else{for(r=t[0];u<q;r=t[++u]){if(v.call(p,r,u,t)===i){break}}}}return t};g=["String","Object","Boolean","Number"];if(Array.isArray){j.isArray=Array.isArray}else{g.push("Array")}l(g,b)})(Dynamsoft.Lib);(function(c){var a=c.mix,b=c.win,e;var d=20200521;if(c._log_ver){if(c.isNumber(c._log_ver)&&c._log_ver>=d){return}}c._log_ver=d;if(c.isDef(b.console)){e=b.console;if(!c.isFunction(e.log)||!c.isFunction(e.error)){e=false}}a(c,{log:function(f){if(c.debug&&e){e.log(f)}},error:function(f){if(c.debug&&e){e.error(f)}},getLogger:function(){var f=c.log;return{warn:f,log:f,info:f,debug:f}}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._random_ver){if(b._random_ver>=a){return}}b._random_ver=a;b.getRandom=function(){var d=b.now()%10000,c=[],f;for(var e=0;e<5;e++){f=Math.floor(Math.random()*10);if(e==0&&f==0){e=-1;continue}c.push(f)}if(d<10){c.push("000")}else{if(d<100){c.push("00")}else{if(d<1000){c.push("0")}}}c.push(d);return c.join("")}})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._strUtil_ver){if(b.isNumber(b._strUtil_ver)&&b._strUtil_ver>=a){return}}b._strUtil_ver=a;b.mix(b,{startsWith:function(d,c){return d.lastIndexOf(c,0)===0},endsWith:function(e,d){var c=e.length-d.length;return c>=0&&e.indexOf(d,c)===c},replaceAll:function(e,d,c){return e.replace(new RegExp(d,"gi"),c)},upperCaseFirst:function(c){return c.charAt(0).toUpperCase()+c.substr(1)},makeArray:function(h){if(h==null){return[]}if(b.isArray(h)){return h}var c=typeof h.length,g=typeof h;if(c!=="number"||h.alert||g==="string"||(g==="function"&&!("item" in h&&c==="number"))){return[h]}var e=[];for(var f=0,d=h.length;f<d;f++){e[f]=h[f]}return e}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._extend_ver){if(b.isNumber(b._extend_ver)&&b._extend_ver>=a){return}}b._extend_ver=a;b.extend=function(c,d){var e=function(){c.apply(this,arguments);if(d){d.apply(this,arguments)}};b.each(c.prototype,function(g,f){e.prototype[f]=g});e.prototype.constructor=e;return e}})(Dynamsoft.Lib);(function(c){var a=20200521;if(c._attribute_ver){if(c.isNumber(c._attribute_ver)&&c._attribute_ver>=a){return}}c._attribute_ver=a;function b(e){var d=this,f=d.constructor;d.__attrs={};d.__attrVals={};d.userConfig=e;while(f){d.addAttrs(f.ATTRS);f=f.superclass?f.superclass.constructor:null}c.mix(d.__attrs,e)}c.mix(b.prototype,{get:function(e){var d=this;if(e in d.__attrs){return d.__attrs[e]}return""},set:function(f,e){var d=this;if(f in d.__attrs){d.__attrs[f]=e}},addAttrs:function(d){c.mix(this.__attrs,d)}});b.extend=function(f){var d=this,g,e;f=f||{};if(f.constructor){g=f.constructor}e=c.extend(d,g);c.mix(e,f);return e};c.Attributes=b})(Dynamsoft.Lib);(function(h){var m=20200521;if(h._json_ver){if(h._json_ver>=m){return}}h._json_ver=m;var j=h.win.JSON;if(j&&j.parse&&j.stringify){h.parse=j.parse;h.stringify=j.stringify;return}var l=(function(){var q={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},p={},r=/["\b\f\n\r\t\x00-\x1f]/g,o=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;h.each(q,function(s,t){p[s]=t});p["\\/"]="/";p["\\\\"]="\\";return{quote:function(s){return'"'+s.replace(r,function(t){var u;if(!(u=q[t])){u="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(0-4)}return u})+'"'},unQuote:function(s){return s.slice(1,s.length-1).replace(o,function(t){var u;if(!(u=p[t])){u=String.fromCharCode(parseInt(t.slice(2),16))}return u})}}})(),i;function b(o){return o<10?"0"+o:o}function f(F,z,r,E,D,t){var u=t;t+=E;var v,q,x=0,s;if(r!==undefined){v=r}else{v=h.keys(F)}var C=[];for(q=v.length;x<q;x++){s=v[x];var o=i(s,F,z,r,E,D,t);if(o!==undefined){var w=l.quote(s);w+=":";if(E){w+=" "}w+=o;C[C.length]=w}}var A;if(!C.length){A="{}"}else{if(!E){A="{"+C.join(",")+"}"}else{var y=",\n"+t;var B=C.join(y);A="{\n"+t+B+"\n"+u+"}"}}return A}function n(B,t,p,A,z,q){var r=q;q+=A;var y=[];var v=B.length;var u=0;while(u<v){var o=i(String(u),B,t,p,A,z,q);if(o===undefined){y[y.length]="null"}else{y[y.length]=o}++u}var w;if(!y.length){w="[]"}else{if(!A){w="["+y.join(",")+"]"}else{var s="\n,"+q;var x=y.join(s);w="[\n"+q+x+"\n"+r+"]"}}return w}i=function(r,q,u,s,v,p,o){var t=q[r];if(t&&typeof t==="object"){if(typeof t.toJSON==="function"){t=t.toJSON(r)}else{if(t instanceof Date){t=isFinite(t.valueOf())?t.getUTCFullYear()+"-"+b(t.getUTCMonth()+1)+"-"+b(t.getUTCDate())+"T"+b(t.getUTCHours())+":"+b(t.getUTCMinutes())+":"+b(t.getUTCSeconds())+"Z":null}else{if(t instanceof String||t instanceof Number||t instanceof Boolean){t=t.valueOf()}}}}if(u!==undefined){t=u.call(q,r,t)}switch(typeof t){case"number":return isFinite(t)?String(t):"null";case"string":return l.quote(t);case"boolean":return String(t);case"object":if(!t){return"null"}if(h.isArray(t)){return n(t,u,s,v,p,o)}return f(t,u,s,v,p,o)}return undefined};h.stringify=function(r,o,q){var t="";var p,s;if(o){if(typeof o==="function"){s=o}else{if(h.isArray(o)){p=o}}}if(typeof q==="number"){q=Math.min(10,q);t=new Array(q+1).join(" ")}else{if(typeof q==="string"){t=q.slice(0,10)}}return i("",{"":r},s,p,t,[],"")};var c={},d={SHIFT_TYPE:1,REDUCE_TYPE:2,ACCEPT_TYPE:0,TYPE_INDEX:0,PRODUCTION_INDEX:1,TO_INDEX:2},a;c.yy={unQuote:l.unQuote};a=function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)};a.prototype={constructor:function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)},resetInput:function(o){h.mix(this,{input:o,matched:"",stateStack:[a.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var o=this,p=o.stateStack[o.stateStack.length-1],q=[];p=o.mapState(p);h.each(o.rules,function(s){var t=s.state||s[3];if(!t){if(p==a.STATIC.INITIAL){q.push(s)}}else{if(h.inArray(p,t)){q.push(s)}}});return q},pushState:function(o){this.stateStack.push(o)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var q=this,s=a.STATIC.DEBUG_CONTEXT_LIMIT,o=q.matched,r=q.match,p=q.input;o=o.slice(0,o.length-r.length);var u=(o.length>s?"...":"")+o.slice(-s).replace(/\n/," "),t=r+p;t=t.slice(0,s)+(t.length>s?"...":"");return u+t+"\n"+new Array(u.length+1).join("-")+"^"},mapSymbol:function(q){var o=this,p=o.symbolMap;if(!p){return q}return p[q]||(p[q]=(++o.symbolId))},mapReverseSymbol:function(p){var o=this,r=o.symbolMap,q,s=o.reverseSymbolMap;if(!s&&r){s=o.reverseSymbolMap={};h.each(r,function(u,t){s[u]=t})}if(s){return s[p]}else{return p}},mapState:function(q){var o=this,p=o.stateMap;if(!p){return q}return p[q]||(p[q]=(++o.stateId))},lex:function(){var y=this,w=y.input,r,v,o,t,z,x=y.getCurrentRules();y.match=y.text="";if(!w){return y.mapSymbol(a.STATIC.END_TAG)}for(r=0;r<x.length;r++){v=x[r];var u=v.regexp||v[1],p=v.token||v[0],q=v.action||v[2]||undefined;if((o=w.match(u))){z=o[0].match(/\n.*/g);if(z){y.lineNumber+=z.length}h.mix(y,{firstLine:y.lastLine,lastLine:y.lineNumber+1,firstColumn:y.lastColumn,lastColumn:z?z[z.length-1].length-1:y.lastColumn+o[0].length});var s;s=y.match=o[0];y.matches=o;y.text=s;y.matched+=s;t=q&&q.call(y);if(t===undefined){t=p}else{t=y.mapSymbol(t)}w=w.slice(s.length);y.input=w;if(t){return t}else{return y.lex()}}}h.error("lex error at line "+y.lineNumber+":\n"+y.showDebugInfo());return undefined}};a.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var e=new a({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});c.lexer=e;e.symbolMap={"$EOF":1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,"$START":13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20};c.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return this.$1==="true"}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){this.$1[this.$1.length]=this.$3;return this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var o={};o[this.$1.key]=this.$1.value;return o}],[20,[20,3,19],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]];c.table={gotos:{"0":{"14":7,"15":8,"16":9,"17":10},"2":{"15":12,"16":9,"17":10,"18":13},"3":{"19":16,"20":17},"18":{"15":23,"16":9,"17":10},"20":{"15":24,"16":9,"17":10},"21":{"19":25}},action:{"0":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"1":{"1":[2,2,0],"3":[2,2,0],"6":[2,2,0],"8":[2,2,0]},"2":{"2":[1,0,1],"5":[1,0,2],"6":[1,0,11],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"3":{"2":[1,0,14],"8":[1,0,15]},"4":{"1":[2,3,0],"3":[2,3,0],"6":[2,3,0],"8":[2,3,0]},"5":{"1":[2,6,0],"3":[2,6,0],"6":[2,6,0],"8":[2,6,0]},"6":{"1":[2,7,0],"3":[2,7,0],"6":[2,7,0],"8":[2,7,0]},"7":{"1":[0,0,0]},"8":{"1":[2,1,0]},"9":{"1":[2,4,0],"3":[2,4,0],"6":[2,4,0],"8":[2,4,0]},"10":{"1":[2,5,0],"3":[2,5,0],"6":[2,5,0],"8":[2,5,0]},"11":{"1":[2,10,0],"3":[2,10,0],"6":[2,10,0],"8":[2,10,0]},"12":{"3":[2,8,0],"6":[2,8,0]},"13":{"3":[1,0,18],"6":[1,0,19]},"14":{"4":[1,0,20]},"15":{"1":[2,15,0],"3":[2,15,0],"6":[2,15,0],"8":[2,15,0]},"16":{"3":[2,13,0],"8":[2,13,0]},"17":{"3":[1,0,21],"8":[1,0,22]},"18":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"19":{"1":[2,11,0],"3":[2,11,0],"6":[2,11,0],"8":[2,11,0]},"20":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"21":{"2":[1,0,14]},"22":{"1":[2,16,0],"3":[2,16,0],"6":[2,16,0],"8":[2,16,0]},"23":{"3":[2,9,0],"6":[2,9,0]},"24":{"3":[2,12,0],"8":[2,12,0]},"25":{"3":[2,14,0],"8":[2,14,0]}}};c.parse=function g(y){var A=this,o=A.lexer,t,F,E,I=A.table,B=I.gotos,s=I.action,r=A.productions,u=[null],v=[0];o.resetInput(y);while(1){t=v[v.length-1];if(!F){F=o.lex()}if(!F){h.log("it is not a valid input: "+y,"error");return false}E=s[t]&&s[t][F];if(!E){var w=[],D;if(s[t]){h.each(s[t],function(L,M){w.push(A.lexer.mapReverseSymbol(M))})}D="Syntax error at line "+o.lineNumber+":\n"+o.showDebugInfo()+"\nexpect "+w.join(", ");h.log(D);return false}switch(E[d.TYPE_INDEX]){case d.SHIFT_TYPE:v.push(F);u.push(o.text);v.push(E[d.TO_INDEX]);F=null;break;case d.REDUCE_TYPE:var J=r[E[d.PRODUCTION_INDEX]],z=J.symbol||J[0],q=J.action||J[2],C=J.rhs||J[1],H=C.length,G=0,K,x=u[u.length-H];A.$$=x;K=undefined;for(;G<H;G++){A["$"+(H-G)]=u[u.length-1-G]}if(q){K=q.call(A)}if(K!==undefined){x=K}else{x=A.$$}if(H){v=v.slice(0,-1*H*2);u=u.slice(0,-1*H)}v.push(z);u.push(x);var p=B[v[v.length-2]][v[v.length-1]];v.push(p);break;case d.ACCEPT_TYPE:return x}}};function k(w,o,x){var s=w[o],t,v,u;if(typeof s==="object"){if(h.isArray(s)){t=0;v=s.length;var r=[];while(t<v){u=k(s,String(t),x);if(u!==undefined){r[r.length]=u}}s=r}else{var y=h.keys(s);t=0;for(v=y.length;t<v;t++){var q=y[t];u=k(s,q,x);if(u===undefined){delete s[q]}else{s[q]=u}}}}return x.call(w,o,s)}h.parse=function(q,o){var p=c.parse(String(q));if(o){return k({"":p},"",o)}else{return p}}})(Dynamsoft.Lib);(function(e){var d=20200521;if(e._array_ver){if(e._array_ver>=d){return}}e._array_ver=d;var c=Array.prototype,b=c.indexOf,a=c.filter;if(!e.isFunction(b)){b=function(h,i){var g;if(this==null){return -1}var j=Object(this);var f=j.length>>>0;if(f===0){return -1}var l=+i||0;if(Math.abs(l)===Infinity){l=0}if(l>=f){return -1}g=Math.max(l>=0?l:f-Math.abs(l),0);while(g<f){if(g in j&&j[g]===h){return g}g++}return -1}}e.mix(e,{filter:a?function(f,h,g){return a.call(f,h,g||this)}:function(f,i,h){var g=[];e.each(f,function(l,k,j){if(i.call(h||this,l,k,j)){g.push(l)}});return g},indexOf:function(g,f){return b.call(f,g)},uniq:function(l){var k=[],f=l.length;for(var h=0;h<f;h++){for(var g=h+1;g<f;g++){if(l[h]===l[g]){h++;g=h}}k.push(l[h])}return k}})})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._function_ver){if(d._function_ver>=c){return}}d._function_ver=c;var b=Array.prototype,a=Function.prototype;if(!d.isFunction(a.bind)){a.bind=function(g){var f=this;if(1<arguments.length){var e=b.slice.call(arguments,1);return function(){return f.apply(g,arguments.length?e.concat(b.slice.call(arguments)):e)}}return function(){return arguments.length?f.apply(g,arguments):f.call(g)}}}})(Dynamsoft.Lib);(function(f){var d=20200521;if(f._string_ver){if(f._string_ver>=d){return}}f._string_ver=d;var b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,e=String.prototype,c="",a=e.trim;if(!a){a=e.trim=function(){return this.replace(b,c)}}f.trim=function(g){return g==null?c:a.call(g)}})(Dynamsoft.Lib);(function(g,c){var t="",j=!1,f=!0,s=g.getLogger(),l=g.isDef,a=g.each,k="&",m="=",p=16,d={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},o={},h,i,b=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;a(d,function(v,u){o[v]=u});function r(v){var u=typeof v;return v==null||(u!=="object"&&u!=="function")}function q(){if(h){return h}var u=t;a(d,function(v){u+=v+"|"});u=u.slice(0,-1);h=new RegExp(u,"g");return h}function n(){if(i){return i}var u=t;a(o,function(v){u+=v+"|"});u+="&#(\\d{1,5});";i=new RegExp(u,"g");return i}function e(u){return encodeURIComponent(String(u))}g.mix(g,{urlEncode:e,urlDecode:function(u){return decodeURIComponent(u.replace(/\+/g," "))},fromUnicode:function(u){return u.replace(/\\u([a-f\d]{4})/ig,function(v,w){return String.fromCharCode(parseInt(w,p))})},escapeHtml:function(u){return(u+"").replace(q(),function(v){return o[v]})},escapeRegExp:function(u){return u.replace(b,"\\$&")},unEscapeHtml:function(u){return u.replace(n(),function(v,w){return d[v]||String.fromCharCode(+w)})},param:function(y,x,v,u){x=x||k;v=v||m;if(g.isUndef(u)){u=f}var w=[];a(y,function(B,z){var A=e(z);if(r(B)){w.push(A);if(l(B)){w.push(v,e(B+t))}w.push(x)}else{if(g.isArray(B)&&B.length){a(B,function(C){if(r(C)){w.push(A,(u?e("[]"):t));if(l(C)){w.push(v,e(C+t))}w.push(x)}})}}});w.pop();return w.join(t)},unparam:function(B,F,E){if(!g.isString(B)||!(B=g.trim(B))){return{}}F=F||k;E=E||m;var A={},C,u=g.urlDecode,v=B.split(F),D,w,x=0,y=v.length;for(;x<y;++x){C=g.indexOf(E,v[x]);if(C===-1){D=u(v[x]);w=c}else{D=u(v[x].substring(0,C));w=v[x].substring(C+1);try{w=u(w)}catch(z){s.error("decodeURIComponent error : "+w);s.error(z)}if(g.endsWith(D,"[]")){D=D.substring(0,D.length-2)}}if(D in A){if(g.isArray(A[D])){A[D].push(w)}else{A[D]=[A[D],w]}}else{A[D]=w}}return A}})})(Dynamsoft.Lib);(function(d){var c=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function b(j,e){var g=[];for(var f=0;f<j.length;f++){var h=j[f];if(!h||h==="."){continue}if(h===".."){if(g.length&&g[g.length-1]!==".."){g.pop()}else{if(e){g.push("..")}}}else{g.push(h)}}return g}var a=d.Path={resolve:function(){var h="",f,g,e=(arguments),j,k=0;for(g=e.length-1;g>=0&&!k;g--){j=e[g];if(d.isString(j)&&!!j){h=j+"/"+h;k=j.charAt(0)==="/"}}f=b(d.filter(h.split("/"),function(i){return !!i}),!k).join("/");return((k?"/":"")+f)||"."},normalize:function(f){var g=f.charAt(0)==="/",e=f.slice(-1)==="/";f=b(d.filter(f.split("/"),function(h){return !!h}),!g).join("/");if(!f&&!g){f="."}if(f&&e){f+="/"}return(g?"/":"")+f},join:function(){var e=d.makeArray(arguments);return a.normalize(d.filter(e,function(f){return f&&(d.isString(f))}).join("/"))},relative:function(l,k){l=a.normalize(l);k=a.normalize(k);var j=d.filter(l.split("/"),function(m){return !!m}),i=[],f,g,e=d.filter(k.split("/"),function(m){return !!m}),h=Math.min(j.length,e.length);for(f=0;f<h;f++){if(j[f]!==e[f]){break}}g=f;while(f<j.length){i.push("..");f++}i=i.concat(e.slice(g));return i.join("/")},basename:function(h,f){var e=h.match(c)||[],g;g=e[3]||"";if(f&&g&&g.slice(-1*f.length)===f){g=g.slice(0,-1*f.length)}return g},dirname:function(h){var e=h.match(c)||[],f=e[1]||"",g=e[2]||"";if(!f&&!g){return"."}if(g){g=g.substring(0,g.length-1)}return f+g},extname:function(e){return(e.match(c)||[])[4]||""}}})(Dynamsoft.Lib);(function(d,c){function b(e){if(!e._queryMap){e._queryMap=d.unparam(e._query)}}function a(e){this._query=e||""}a.prototype={constructor:a,clone:function(){return new a(this.toString())},reset:function(f){var e=this;e._query=f||"";e._queryMap=null;return e},count:function(){var e=this,f=0;b(e);d.each(e._queryMap,function(g){if(d.isArray(g)){f+=g.length}else{f++}});return f},has:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return f in g}else{return !d.isEmptyObject(g)}},get:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return g[f]}else{return g}},keys:function(){var e=this;b(e);return d.keys(e._queryMap)},set:function(f,g){var e=this,h;b(e);h=e._queryMap;if(d.isString(f)){e._queryMap[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(j,i){h[i]=j})}return e},remove:function(f){var e=this;b(e);if(f){delete e._queryMap[f]}else{e._queryMap={}}return e},add:function(f,h){var e=this,i,g;if(d.isString(f)){b(e);i=e._queryMap;g=i[f];if(d.isUndef(g)){g=h}else{g=[].concat(g).concat(h)}i[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(l,j){e.add(j,l)})}return e},toString:function(e){var f=this;b(f);return d.param(f._queryMap,c,c,e)}};d.uriQuery=a})(Dynamsoft.Lib);(function(j){var h=j.uriQuery,l=j.each,f=j.Path,n=j.getLogger(),o=/[#\/\?@]/g,c=/[#\?]/g,k=/[#@]/g,e=/#/g,g={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},b=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function a(p){return p.length===1?"0"+p:p}function i(q,p){return q.toLowerCase()===p.toLowerCase()}function m(q,p){return encodeURI(q).replace(p,function(r){return"%"+a(r.charCodeAt(0).toString(16))})}function d(r){if(r instanceof d){return r.clone()}var q,p=this;j.mix(p,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""});q=d.getComponents(r);l(q,function(s,t){s=s||"";if(t==="query"){p.query=new h(s)}else{try{s=j.urlDecode(s)}catch(u){n.error(u+"urlDecode error : "+s)}p[t]=s}});return p}d.prototype={constructor:d,clone:function(){var q=new d(),p=this;l(g,function(r,s){q[s]=p[s]});q.query=q.query.clone();return q},resolve:function(t){if(j.isString(t)){t=new d(t)}var r=this,s=0,q,p=["scheme","userInfo","hostname","port","path","query","fragment"],u=r.clone();l(p,function(w){if(w==="path"){if(s){u[w]=t[w]}else{var v=t.path;if(v){s=1;if(!j.startsWith(v,"/")){if(u.hostname&&!u.path){v="/"+v}else{if(u.path){q=u.path.lastIndexOf("/");if(q!==-1){v=u.path.slice(0,q+1)+v}}}}u.path=f.normalize(v)}}}else{if(w==="query"){if(s||t.query.toString()){u.query=t.query.clone();s=1}}else{if(s||t[w]){u[w]=t[w];s=1}}}});return u},getScheme:function(){return this.scheme},setScheme:function(p){this.scheme=p;return this},getHostname:function(){return this.hostname},setHostname:function(p){this.hostname=p;return this},setUserInfo:function(p){this.userInfo=p;return this},getUserInfo:function(){return this.userInfo},setPort:function(p){this.port=p;return this},getPort:function(){return this.port},setPath:function(p){this.path=p;return this},getPath:function(){return this.path},setQuery:function(p){if(j.isString(p)){if(j.startsWith(p,"?")){p=p.slice(1)}p=new h(m(p,k))}this.query=p;return this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(q){var p=this;if(j.startsWith(q,"#")){q=q.slice(1)}p.fragment=q;return p},isSameOriginAs:function(p){var q=this;return i(q.hostname,p.hostname)&&i(q.scheme,p.scheme)&&i(q.port,p.port)},toString:function(s){var r=[],x=this,p,v,y,q,t,u,w;if((p=x.scheme)){r.push(m(p,o));r.push(":")}if((v=x.hostname)){r.push("//");if((w=x.userInfo)){r.push(m(w,o));r.push("@")}r.push(encodeURIComponent(v));if((q=x.port)){r.push(":");r.push(q)}}if((y=x.path)){if(v&&!j.startsWith(y,"/")){y="/"+y}y=f.normalize(y);r.push(m(y,c))}if((u=(x.query.toString.call(x.query,s)))){r.push("?");r.push(u)}if((t=x.fragment)){r.push("#");r.push(m(t,e))}return r.join("")}};d.getComponents=function(s){var r="";s=s||r;var p=s.match(b)||[],q={};l(g,function(t,u){q[u]=p[t]});return q};j.Uri=d})(Dynamsoft.Lib);(function(c,b){var e=c.Lib,d=e.win,a=20200716;if(e._promise_ver){if(e.isNumber(e._promise_ver)&&e._promise_ver>=a){return}}e._promise_ver=a;if(e.isFunction(d.__zone_symbol__Promise)){e.nativePromise=d.__zone_symbol__Promise}if(self&&self.Promise){e.Promise=self.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}else{if(d&&d.Promise){e.Promise=d.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}}!function(f){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=f()}else{if("function"==typeof define&&define.amd){define([],f)}else{var g;"undefined"!=typeof window?g=window:"undefined"!=typeof global?g=global:"undefined"!=typeof self&&(g=self),g.Promise=f()}}}(function(){var f,h,i;return function g(l,m,q){function p(o,t){if(!m[o]){if(!l[o]){var v="function"==typeof _dereq_&&_dereq_;if(!t&&v){return v(o,!0)}if(k){return k(o,!0)}var n=new Error("Cannot find module '"+o+"'");throw n.code="MODULE_NOT_FOUND",n}var r=m[o]={exports:{}};l[o][0].call(r.exports,function(s){var u=l[o][1][s];return p(u?u:s)},r,r.exports,g,l,m,q)}return m[o].exports}for(var k="function"==typeof _dereq_&&_dereq_,j=0;j<q.length;j++){p(q[j])}return p}({1:[function(C,y,q){function j(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new x(16),this._normalQueue=new x(16),this._haveDrainedQueues=!1;var l=this;this.drainQueues=function(){l._drainQueues()},this._schedule=k}function m(l,o,p){this._lateQueue.push(l,o,p),this._queueTick()}function w(l,o,p){this._normalQueue.push(l,o,p),this._queueTick()}function A(l){this._normalQueue._pushOne(l),this._queueTick()}function D(l){for(;l.length()>0;){z(l)}}function z(l){var p=l.shift();if("function"!=typeof p){p._settlePromises()}else{var s=l.shift(),o=l.shift();p.call(s,o)}}var v;try{throw new Error}catch(B){v=B}var k=C("./schedule"),x=C("./queue");j.prototype.setScheduler=function(l){var n=this._schedule;return this._schedule=l,this._customScheduler=!0,n},j.prototype.hasCustomScheduler=function(){return this._customScheduler},j.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},j.prototype.fatalError=function(l,n){n?(process.stderr.write("Fatal "+(l instanceof Error?l.stack:l)+"\n"),process.exit(2)):this.throwLater(l)},j.prototype.throwLater=function(l,o){if(1===arguments.length&&(o=l,l=function(){throw o}),"undefined"!=typeof setTimeout){setTimeout(function(){l(o)},0)}else{try{this._schedule(function(){l(o)})}catch(p){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}}},j.prototype.invokeLater=m,j.prototype.invoke=w,j.prototype.settlePromises=A,j.prototype._drainQueues=function(){D(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,D(this._lateQueue)},j.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},j.prototype._reset=function(){this._isTickUsed=!1},y.exports=j,y.exports.firstLineError=v},{"./queue":17,"./schedule":18}],2:[function(j,k,l){k.exports=function(y,v,q,m){var p=!1,u=function(n,o){this._reject(o)},x=function(n,o){o.promiseRejectionQueued=!0,o.bindingPromise._then(u,u,null,this,n)},z=function(n,o){0===(50397184&this._bitField)&&this._resolveCallback(o.target)},w=function(n,o){o.promiseRejectionQueued||this._reject(n)};y.prototype.bind=function(r){p||(p=!0,y.prototype._propagateFrom=m.propagateFromFunction(),y.prototype._boundValue=m.boundValueFunction());var n=q(r),o=new y(v);o._propagateFrom(this,1);var t=this._target();if(o._setBoundTo(n),n instanceof y){var s={promiseRejectionQueued:!1,promise:o,target:t,bindingPromise:n};t._then(v,x,void 0,o,s),n._then(z,w,void 0,o,s),o._setOnCancel(n)}else{o._resolveCallback(t)}return o},y.prototype._setBoundTo=function(n){void 0!==n?(this._bitField=2097152|this._bitField,this._boundTo=n):this._bitField=-2097153&this._bitField},y.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},y.bind=function(o,r){return y.resolve(r).bind(o)}}},{}],3:[function(k,m,q){function l(){try{Promise===j&&(Promise=p)}catch(n){}return j}var p;"undefined"!=typeof Promise&&(p=Promise);var j=k("./promise")();j.noConflict=l,m.exports=j},{"./promise":15}],4:[function(j,k,l){k.exports=function(u,x,t,v){var p=j("./util"),m=p.tryCatch,q=p.errorObj,w=u._async;u.prototype["break"]=u.prototype.cancel=function(){if(!v.cancellation()){return this._warn("cancellation is disabled")}for(var o=this,r=o;o._isCancellable();){if(!o._cancelBy(r)){r._isFollowing()?r._followee().cancel():r._cancelBranched();break}var s=o._cancellationParent;if(null==s||!s._isCancellable()){o._isFollowing()?o._followee().cancel():o._cancelBranched();break}o._isFollowing()&&o._followee().cancel(),o._setWillBeCancelled(),r=o,o=s}},u.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},u.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},u.prototype._cancelBy=function(n){return n===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},u.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},u.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),w.invoke(this._cancelPromises,this,void 0))},u.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},u.prototype._unsetOnCancel=function(){this._onCancelField=void 0},u.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},u.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},u.prototype._doInvokeOnCancel=function(o,y){if(p.isArray(o)){for(var z=0;z<o.length;++z){this._doInvokeOnCancel(o[z],y)}}else{if(void 0!==o){if("function"==typeof o){if(!y){var s=m(o).call(this._boundValue());s===q&&(this._attachExtraTrace(s.e),w.throwLater(s.e))}}else{o._resultCancelled(this)}}}},u.prototype._invokeOnCancel=function(){var n=this._onCancel();this._unsetOnCancel(),w.invoke(this._doInvokeOnCancel,this,n)},u.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},u.prototype._resultCancelled=function(){this.cancel()}}},{"./util":21}],5:[function(j,k,l){k.exports=function(s){function u(o,v,r){return function(C){var n=r._boundValue();o:for(var x=0;x<o.length;++x){var A=o[x];if(A===Error||null!=A&&A.prototype instanceof Error){if(C instanceof A){return p(v).call(n,C)}}else{if("function"==typeof A){var z=p(A).call(n,C);if(z===m){return z}if(z){return p(v).call(n,C)}}else{if(q.isObject(C)){for(var y=t(A),B=0;B<y.length;++B){var w=y[B];if(A[w]!=C[w]){continue o}}return p(v).call(n,C)}}}}return s}}var q=j("./util"),t=j("./es5").keys,p=q.tryCatch,m=q.errorObj;return u}},{"./es5":10,"./util":21}],6:[function(j,k,l){k.exports=function(p){function s(){this._trace=new s.CapturedTrace(q())}function v(){return u?new s:void 0}function q(){var n=m.length-1;return n>=0?m[n]:void 0}var u=!1,m=[];return p.prototype._promiseCreated=function(){},p.prototype._pushContext=function(){},p.prototype._popContext=function(){return null},p._peekContext=p.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,m.push(this._trace))},s.prototype._popContext=function(){if(void 0!==this._trace){var n=m.pop(),o=n._promiseCreated;return n._promiseCreated=null,o}return null},s.CapturedTrace=null,s.create=v,s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var x=p.prototype._pushContext,r=p.prototype._popContext,o=p._peekContext,t=p.prototype._peekContext,w=p.prototype._promiseCreated;s.deactivateLongStackTraces=function(){p.prototype._pushContext=x,p.prototype._popContext=r,p._peekContext=o,p.prototype._peekContext=t,p.prototype._promiseCreated=w,u=!1},u=!0,p.prototype._pushContext=s.prototype._pushContext,p.prototype._popContext=s.prototype._popContext,p._peekContext=p.prototype._peekContext=q,p.prototype._promiseCreated=function(){var n=this._peekContext();n&&null==n._promiseCreated&&(n._promiseCreated=this)}},s}},{}],7:[function(j,k,l){k.exports=function(a7,aW,aR,aV){function a2(m,n){return{promise:n}}function bb(){return !1}function aQ(m,q,u){var p=this;try{m(q,u,function(n){if("function"!=typeof n){throw new TypeError("onCancel must be a function, got: "+ad.toString(n))}p._attachCancellationCallback(n)})}catch(s){return s}}function a9(m){if(!this._isCancellable()){return this}var n=this._onCancel();void 0!==n?ad.isArray(n)?n.push(m):this._setOnCancel([n,m]):this._setOnCancel(m)}function aY(){return this._onCancelField}function aP(m){this._onCancelField=m}function aU(){this._cancellationParent=void 0,this._onCancelField=void 0}function a6(m,o){if(0!==(1&o)){this._cancellationParent=m;var p=m._branchesRemainingToCancel;void 0===p&&(p=0),m._branchesRemainingToCancel=p+1}0!==(2&o)&&m._isBound()&&this._setBoundTo(m._boundTo)}function a3(m,n){0!==(2&n)&&m._isBound()&&this._setBoundTo(m._boundTo)}function a8(){var m=this._boundTo;return void 0!==m&&m instanceof a7?m.isFulfilled()?m.value():void 0:m}function bc(){this._trace=new au(this._peekContext())}function aO(m,p){if(aS(m)){var q=this._trace;if(void 0!==q&&p&&(q=q._parent),void 0!==q){q.attachExtraTrace(m)}else{if(!m.__stackCleaned__){var o=ax(m);ad.notEnumerableProp(m,"stack",o.message+"\n"+o.stack.join("\n")),ad.notEnumerableProp(m,"__stackCleaned__",!0)}}}}function aL(){this._trace=void 0}function a4(F,B,w,m,v){if(void 0===F&&null!==B&&t){if(void 0!==v&&v._returnedNonUndefined()){return}if(0===(65535&m._bitField)){return}w&&(w+=" ");var y="",D="";if(B._trace){for(var G=B._trace.stack.split("\n"),C=ay(G),x=C.length-1;x>=0;--x){var E=C[x];if(!an.test(E)){var q=E.match(ac);q&&(y="at "+q[1]+":"+q[2]+":"+q[3]+" ");break}}if(C.length>0){for(var A=C[0],x=0;x<G.length;++x){if(G[x]===A){x>0&&(D="\n"+G[x-1]);break}}}}var z="a promise was created in a "+w+"handler "+y+"but was not returned from it, see http://goo.gl/rRqMUw"+D;m._warn(z,!0,B)}}function aX(m,o){var p=m+" is deprecated and will be removed in a future version.";return o&&(p+=" Use "+o+" instead."),ba(p)}function ba(q,v,s){if(aI.warnings){var u,p=new az(q);if(v){s._attachExtraTrace(p)}else{if(aI.longStackTraces&&(u=a7._peekContext())){u.attachExtraTrace(p)}else{var m=ax(p);p.stack=m.message+"\n"+m.stack.join("\n")}}aE("warning",p)||af(p,"",!0)}}function aA(m,o){for(var p=0;p<o.length-1;++p){o[p].push("From previous event:"),o[p]=o[p].join("\n")}return p<o.length&&(o[p]=o[p].join("\n")),m+"\n"+o.join("\n")}function aN(m){for(var n=0;n<m.length;++n){(0===m[n].length||n+1<m.length&&m[n][0]===m[n+1][0])&&(m.splice(n,1),n--)}}function aZ(y){for(var v=y[0],q=1;q<y.length;++q){for(var m=y[q],p=v.length-1,u=v[p],x=-1,z=m.length-1;z>=0;--z){if(m[z]===u){x=z;break}}for(var z=x;z>=0;--z){var w=m[z];if(v[p]!==w){break}v.pop(),p--}v=m}}function ay(p){for(var s=[],v=0;v<p.length;++v){var q=p[v],u="    (No stack trace)"===q||aJ.test(q),m=u&&av(q);u&&!m&&(ab&&" "!==q.charAt(0)&&(q="    "+q),s.push(q))}return s}function a1(m){for(var p=m.stack.replace(/\s+$/g,"").split("\n"),q=0;q<p.length;++q){var o=p[q];if("    (No stack trace)"===o||aJ.test(o)){break}}return q>0&&"SyntaxError"!=m.name&&(p=p.slice(q)),p}function ax(m){var o=m.stack,p=m.toString();return o="string"==typeof o&&o.length>0?a1(m):["    (No stack trace)"],{message:p,stack:"SyntaxError"==m.name?o:ay(o)}}function af(m,q,u){if("undefined"!=typeof console){var p;if(ad.isObject(m)){var s=m.stack;p=q+aK(s,m)}else{p=q+String(m)}"function"==typeof aB?aB(p,u):("function"==typeof console.log||"object"==typeof console.log)&&console.log(p)}}function aM(p,s,v,q){var u=!1;try{"function"==typeof s&&(u=!0,"rejectionHandled"===p?s(q):s(v,q))}catch(m){ar.throwLater(m)}"unhandledRejection"===p?aE(p,v,q)||u||af(v,"Unhandled rejection "):aE(p,q)}function ai(m){var q;if("function"==typeof m){q="[function "+(m.name||"anonymous")+"]"}else{q=m&&"function"==typeof m.toString?m.toString():ad.toString(m);var u=/\[object [a-zA-Z0-9$_]+\]/;if(u.test(q)){try{var p=JSON.stringify(m);q=p}catch(s){}}0===q.length&&(q="(empty array)")}return"(<"+ah(q)+">, no stack trace)"}function ah(m){var n=41;return m.length<n?m:m.substr(0,n-3)+"..."}function ak(){return"function"==typeof aF}function al(m){var n=m.match(aD);return n?{fileName:n[1],line:parseInt(n[2],10)}:void 0}function aC(z,w){if(ak()){for(var q,m,p=(z.stack||"").split("\n"),v=(w.stack||"").split("\n"),y=-1,A=-1,x=0;x<p.length;++x){var u=al(p[x]);if(u){q=u.fileName,y=u.line;break}}for(var x=0;x<v.length;++x){var u=al(v[x]);if(u){m=u.fileName,A=u.line;break}}0>y||0>A||!q||!m||q!==m||y>=A||(av=function(n){if(aw.test(n)){return !0}var o=al(n);return o&&o.fileName===q&&y<=o.line&&o.line<=A?!0:!1})}}function au(m){this._parent=m,this._promisesCreated=0;var n=this._length=1+(void 0===m?0:m._length);aF(this,au),n>32&&this.uncycle()}var am,ao,aB,ae,ar=a7._async,az=j("./errors").Warning,ad=j("./util"),aj=j("./es5"),aS=ad.canAttachTrace,aw=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,an=/\((?:timers\.js):\d+:\d+\)/,ac=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,aJ=null,aK=null,ab=!1,ap=!(0==ad.env("BLUEBIRD_DEBUG")||!ad.env("BLUEBIRD_DEBUG")&&"development"!==ad.env("NODE_ENV")),aq=!(0==ad.env("BLUEBIRD_WARNINGS")||!ap&&!ad.env("BLUEBIRD_WARNINGS")),aa=!(0==ad.env("BLUEBIRD_LONG_STACK_TRACES")||!ap&&!ad.env("BLUEBIRD_LONG_STACK_TRACES")),t=0!=ad.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(aq||!!ad.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){function m(){for(var n=0;n<o.length;++n){o[n]._notifyUnhandledRejection()}p()}function p(){o.length=0}var o=[];ae=function(n){o.push(n),setTimeout(m,1)},aj.defineProperty(a7,"_unhandledRejectionCheck",{value:m}),aj.defineProperty(a7,"_unhandledRejectionClear",{value:p})}(),a7.prototype.suppressUnhandledRejections=function(){var m=this._target();m._bitField=-1048577&m._bitField|524288},a7.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),ae(this))},a7.prototype._notifyUnhandledRejectionIsHandled=function(){aM("rejectionHandled",am,void 0,this)},a7.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},a7.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},a7.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var m=this._settledValue();this._setUnhandledRejectionIsNotified(),aM("unhandledRejection",ao,m,this)}},a7.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},a7.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},a7.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},a7.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},a7.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},a7.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},a7.prototype._warn=function(m,o,p){return ba(m,o,p||this)},a7.onPossiblyUnhandledRejection=function(m){var o=a7._getContext();ao=ad.contextBind(o,m)},a7.onUnhandledRejectionHandled=function(m){var o=a7._getContext();am=ad.contextBind(o,m)};var a5=function(){};a7.longStackTraces=function(){if(ar.haveItemsQueued()&&!aI.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}if(!aI.longStackTraces&&ak()){var m=a7.prototype._captureStackTrace,n=a7.prototype._attachExtraTrace,p=a7.prototype._dereferenceTrace;aI.longStackTraces=!0,a5=function(){if(ar.haveItemsQueued()&&!aI.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}a7.prototype._captureStackTrace=m,a7.prototype._attachExtraTrace=n,a7.prototype._dereferenceTrace=p,aW.deactivateLongStackTraces(),aI.longStackTraces=!1},a7.prototype._captureStackTrace=bc,a7.prototype._attachExtraTrace=aO,a7.prototype._dereferenceTrace=aL,aW.activateLongStackTraces()}},a7.hasLongStackTraces=function(){return aI.longStackTraces&&ak()};var aT={unhandledrejection:{before:function(){var m=ad.global.onunhandledrejection;return ad.global.onunhandledrejection=null,m},after:function(m){ad.global.onunhandledrejection=m}},rejectionhandled:{before:function(){var m=ad.global.onrejectionhandled;return ad.global.onrejectionhandled=null,m},after:function(m){ad.global.onrejectionhandled=m}}},a0=function(){var m=function(q,r){if(!q){return !ad.global.dispatchEvent(r)}var s;try{return s=q.before(),!ad.global.dispatchEvent(r)}finally{q.after(s)}};try{if("function"==typeof CustomEvent){var o=new CustomEvent("CustomEvent");return ad.global.dispatchEvent(o),function(s,v){s=s.toLowerCase();var q={detail:v,cancelable:!0},u=new CustomEvent(s,q);return aj.defineProperty(u,"promise",{value:v.promise}),aj.defineProperty(u,"reason",{value:v.reason}),m(aT[s],u)}}if("function"==typeof Event){var o=new Event("CustomEvent");return ad.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=new Event(s,{cancelable:!0});return q.detail=u,aj.defineProperty(q,"promise",{value:u.promise}),aj.defineProperty(q,"reason",{value:u.reason}),m(aT[s],q)}}var o=document.createEvent("CustomEvent");return o.initCustomEvent("testingtheevent",!1,!0,{}),ad.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=document.createEvent("CustomEvent");return q.initCustomEvent(s,!1,!0,u),m(aT[s],q)}}catch(p){}return function(){return !1}}(),aH=function(){return ad.isNode?function(){return process.emit.apply(process,arguments)}:ad.global?function(m){var o="on"+m.toLowerCase(),p=ad.global[o];return p?(p.apply(ad.global,[].slice.call(arguments,1)),!0):!1}:function(){return !1}}(),aG={promiseCreated:a2,promiseFulfilled:a2,promiseRejected:a2,promiseResolved:a2,promiseCancelled:a2,promiseChained:function(m,o,p){return{promise:o,child:p}},warning:function(m,n){return{warning:n}},unhandledRejection:function(m,o,p){return{reason:o,promise:p}},rejectionHandled:a2},aE=function(m){var p=!1;try{p=aH.apply(null,arguments)}catch(q){ar.throwLater(q),p=!0}var o=!1;try{o=a0(m,aG[m].apply(null,arguments))}catch(q){ar.throwLater(q),o=!0}return o||p};a7.config=function(o){if(o=Object(o),"longStackTraces" in o&&(o.longStackTraces?a7.longStackTraces():!o.longStackTraces&&a7.hasLongStackTraces()&&a5()),"warnings" in o){var q=o.warnings;aI.warnings=!!q,t=aI.warnings,ad.isObject(q)&&"wForgottenReturn" in q&&(t=!!q.wForgottenReturn)}if("cancellation" in o&&o.cancellation&&!aI.cancellation){if(ar.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use")}a7.prototype._clearCancellationData=aU,a7.prototype._propagateFrom=a6,a7.prototype._onCancel=aY,a7.prototype._setOnCancel=aP,a7.prototype._attachCancellationCallback=a9,a7.prototype._execute=aQ,ag=a6,aI.cancellation=!0}if("monitoring" in o&&(o.monitoring&&!aI.monitoring?(aI.monitoring=!0,a7.prototype._fireEvent=aE):!o.monitoring&&aI.monitoring&&(aI.monitoring=!1,a7.prototype._fireEvent=bb)),"asyncHooks" in o&&ad.nodeSupportsAsyncResource){var m=aI.asyncHooks,p=!!o.asyncHooks;m!==p&&(aI.asyncHooks=p,p?aR():aV())}return a7},a7.prototype._fireEvent=bb,a7.prototype._execute=function(m,p,q){try{m(p,q)}catch(o){return o}},a7.prototype._onCancel=function(){},a7.prototype._setOnCancel=function(m){},a7.prototype._attachCancellationCallback=function(m){},a7.prototype._captureStackTrace=function(){},a7.prototype._attachExtraTrace=function(){},a7.prototype._dereferenceTrace=function(){},a7.prototype._clearCancellationData=function(){},a7.prototype._propagateFrom=function(m,n){};var ag=a3,av=function(){return !1},aD=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;ad.inherits(au,Error),aW.CapturedTrace=au,au.prototype.uncycle=function(){var B=this._length;if(!(2>B)){for(var x=[],q={},m=0,p=this;void 0!==p;++m){x.push(p),p=p._parent}B=this._length=m;for(var m=B-1;m>=0;--m){var w=x[m].stack;void 0===q[w]&&(q[w]=m)}for(var m=0;B>m;++m){var z=x[m].stack,C=q[z];if(void 0!==C&&C!==m){C>0&&(x[C-1]._parent=void 0,x[C-1]._length=1),x[m]._parent=void 0,x[m]._length=1;var y=m>0?x[m-1]:this;B-1>C?(y._parent=x[C+1],y._parent.uncycle(),y._length=y._parent._length+1):(y._parent=void 0,y._length=1);for(var v=y._length+1,A=m-2;A>=0;--A){x[A]._length=v,v++}return}}}},au.prototype.attachExtraTrace=function(m){if(!m.__stackCleaned__){this.uncycle();for(var q=ax(m),u=q.message,p=[q.stack],s=this;void 0!==s;){p.push(ay(s.stack.split("\n"))),s=s._parent}aZ(p),aN(p),ad.notEnumerableProp(m,"stack",aA(u,p)),ad.notEnumerableProp(m,"__stackCleaned__",!0)}};var aF=function(){var p=/^\s*at\s*/,s=function(n,o){return"string"==typeof n?n:void 0!==o.name&&void 0!==o.message?o.toString():ai(o)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,aJ=p,aK=s;var v=Error.captureStackTrace;return av=function(n){return aw.test(n)},function(n,o){Error.stackTraceLimit+=6,v(n,o),Error.stackTraceLimit-=6}}var q=new Error;if("string"==typeof q.stack&&q.stack.split("\n")[0].indexOf("stackDetection@")>=0){return aJ=/@/,aK=s,ab=!0,function(n){n.stack=(new Error).stack}}var u;try{throw new Error}catch(m){u="stack" in m}return"stack" in q||!u||"number"!=typeof Error.stackTraceLimit?(aK=function(n,o){return"string"==typeof n?n:"object"!=typeof o&&"function"!=typeof o||void 0===o.name||void 0===o.message?ai(o):o.toString()},null):(aJ=p,aK=s,function(n){Error.stackTraceLimit+=6;try{throw new Error}catch(o){n.stack=o.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(aB=function(m){console.warn(m)},ad.isNode&&process.stderr.isTTY?aB=function(m,o){var p=o?"[33m":"[31m";console.warn(p+m+"[0m\n")}:ad.isNode||"string"!=typeof(new Error).stack||(aB=function(m,n){console.warn("%c"+m,n?"color: darkorange":"color: red")}));var aI={warnings:aq,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return aa&&a7.longStackTraces(),{asyncHooks:function(){return aI.asyncHooks},longStackTraces:function(){return aI.longStackTraces},warnings:function(){return aI.warnings},cancellation:function(){return aI.cancellation},monitoring:function(){return aI.monitoring},propagateFromFunction:function(){return ag},boundValueFunction:function(){return a8},checkForgottenReturns:a4,setBounds:aC,warn:ba,deprecated:aX,CapturedTrace:au,fireDomEvent:a0,fireGlobalEvent:aH}}},{"./errors":9,"./es5":10,"./util":21}],8:[function(j,k,l){k.exports=function(m){function o(){return this.value}function p(){throw this.reason}m.prototype["return"]=m.prototype.thenReturn=function(q){return q instanceof m&&q.suppressUnhandledRejections(),this._then(o,void 0,void 0,{value:q},void 0)},m.prototype["throw"]=m.prototype.thenThrow=function(n){return this._then(p,void 0,void 0,{reason:n},void 0)},m.prototype.catchThrow=function(n){if(arguments.length<=1){return this._then(void 0,p,void 0,{reason:n},void 0)}var s=arguments[1],q=function(){throw s};return this.caught(n,q)},m.prototype.catchReturn=function(t){if(arguments.length<=1){return t instanceof m&&t.suppressUnhandledRejections(),this._then(void 0,o,void 0,{value:t},void 0)}var q=arguments[1];q instanceof m&&q.suppressUnhandledRejections();var s=function(){return q};return this.caught(t,s)}}},{}],9:[function(w,J,C){function z(l,m){function o(n){return this instanceof o?(A(this,"message","string"==typeof n?n:m),A(this,"name",l),void (Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new o(n)}return q(o,Error),o}function B(l){return this instanceof B?(A(this,"name","OperationalError"),A(this,"message",l),this.cause=l,this.isOperational=!0,void (l instanceof Error?(A(this,"message",l.message),A(this,"stack",l.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new B(l)}var F,N,x=w("./es5"),L=x.freeze,E=w("./util"),q=E.inherits,A=E.notEnumerableProp,I=z("Warning","warning"),G=z("CancellationError","cancellation error"),K=z("TimeoutError","timeout error"),O=z("AggregateError","aggregate error");try{F=TypeError,N=RangeError}catch(k){F=z("TypeError","type error"),N=z("RangeError","range error")}for(var j="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),H=0;H<j.length;++H){"function"==typeof Array.prototype[j[H]]&&(O.prototype[j[H]]=Array.prototype[j[H]])}x.defineProperty(O.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),O.prototype.isOperational=!0;var D=0;O.prototype.toString=function(){var m=Array(4*D+1).join(" "),s="\n"+m+"AggregateError of:\n";D++,m=Array(4*D+1).join(" ");for(var v=0;v<this.length;++v){for(var p=this[v]===this?"[Circular AggregateError]":this[v]+"",u=p.split("\n"),l=0;l<u.length;++l){u[l]=m+u[l]}p=u.join("\n"),s+=p+"\n"}return D--,s},q(B,Error);var M=Error.__BluebirdErrorTypes__;M||(M=L({CancellationError:G,TimeoutError:K,OperationalError:B,RejectionError:B,AggregateError:O}),x.defineProperty(Error,"__BluebirdErrorTypes__",{value:M,writable:!1,enumerable:!1,configurable:!1})),J.exports={Error:Error,TypeError:F,RangeError:N,CancellationError:M.CancellationError,OperationalError:M.OperationalError,TimeoutError:M.TimeoutError,AggregateError:M.AggregateError,Warning:I}},{"./es5":10,"./util":21}],10:[function(C,y,q){var j=function(){return void 0===this}();if(j){y.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:j,propertyIsWritable:function(l,o){var p=Object.getOwnPropertyDescriptor(l,o);return !(p&&!p.writable&&!p.set)}}}else{var m={}.hasOwnProperty,w={}.toString,A={}.constructor.prototype,D=function(l){var o=[];for(var p in l){m.call(l,p)&&o.push(p)}return o},z=function(l,n){return{value:l[n]}},v=function(l,o,p){return l[o]=p.value,l},B=function(l){return l},k=function(l){try{return Object(l).constructor.prototype}catch(n){return A}},x=function(l){try{return"[object Array]"===w.call(l)}catch(n){return !1}};y.exports={isArray:x,keys:D,names:D,defineProperty:v,getDescriptor:z,freeze:B,getPrototypeOf:k,isES5:j,propertyIsWritable:function(){return !0}}}},{}],11:[function(j,k,l){k.exports=function(A,v,m){function t(o,p,r){this.promise=o,this.type=p,this.handler=r,this.called=!1,this.cancelPromise=null}function x(n){this.finallyHandler=n}function C(n,o){return null!=n.cancelPromise?(arguments.length>1?n.cancelPromise._reject(o):n.cancelPromise._cancel(),n.cancelPromise=null,!0):!1}function E(){return w.call(this,this.promise._target()._settledValue())}function B(n){return C(this,n)?void 0:(z.e=n,z)}function w(r){var G=this.promise,n=this.handler;if(!this.called){this.called=!0;var p=this.isFinallyHandler()?n.call(G._boundValue()):n.call(G._boundValue(),r);if(p===m){return p}if(void 0!==p){G._setReturnedNonUndefined();var s=v(p,G);if(s instanceof A){if(null!=this.cancelPromise){if(s._isCancelled()){var F=new q("late cancellation observer");return G._attachExtraTrace(F),z.e=F,z}s.isPending()&&s._attachCancellationCallback(new x(this))}return s._then(E,B,void 0,this,void 0)}}}return G.isRejected()?(C(this),z.e=r,z):(C(this),r)}var D=j("./util"),q=A.CancellationError,z=D.errorObj,y=j("./catch_filter")(m);return t.prototype.isFinallyHandler=function(){return 0===this.type},x.prototype._resultCancelled=function(){C(this.finallyHandler)},A.prototype._passThrough=function(o,s,u,p){return"function"!=typeof o?this.then():this._then(u,p,void 0,new t(this,s,o),void 0)},A.prototype.lastly=A.prototype["finally"]=function(n){return this._passThrough(n,0,w,w)},A.prototype.tap=function(n){return this._passThrough(n,1,w)},A.prototype.tapCatch=function(F){var J=arguments.length;if(1===J){return this._passThrough(F,1,void 0,w)}var H,I=new Array(J-1),u=0;for(H=0;J-1>H;++H){var p=arguments[H];if(!D.isObject(p)){return A.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+D.classString(p)))}I[u++]=p}I.length=u;var G=arguments[H];return this._passThrough(y(I,G,this),1,void 0,w)},t}},{"./catch_filter":5,"./util":21}],12:[function(j,k,l){k.exports=function(s,u,q,t,p){var m=j("./util");m.canEvaluate,m.tryCatch,m.errorObj;s.join=function(){var n,w=arguments.length-1;if(w>0&&"function"==typeof arguments[w]){n=arguments[w];var v}var x=[].slice.call(arguments);n&&x.pop();var v=new u(x).promise();return void 0!==n?v.spread(n):v}}},{"./util":21}],13:[function(j,k,l){k.exports=function(u,w,t,v,p){var m=j("./util"),q=m.tryCatch;u.method=function(n){if("function"!=typeof n){throw new u.TypeError("expecting a function but got "+m.classString(n))}return function(){var x=new u(w);x._captureStackTrace(),x._pushContext();var y=q(n).apply(this,arguments),s=x._popContext();return p.checkForgottenReturns(y,s,"Promise.method",x),x._resolveFromSyncValue(y),x}},u.attempt=u["try"]=function(s){if("function"!=typeof s){return v("expecting a function but got "+m.classString(s))}var x=new u(w);x._captureStackTrace(),x._pushContext();var z;if(arguments.length>1){p.deprecated("calling Promise.try with more than 1 argument");var n=arguments[1],o=arguments[2];z=m.isArray(n)?q(s).apply(o,n):q(s).call(o,n)}else{z=q(s)()}var y=x._popContext();return p.checkForgottenReturns(z,y,"Promise.try",x),x._resolveFromSyncValue(z),x},u.prototype._resolveFromSyncValue=function(n){n===m.errorObj?this._rejectCallback(n.e,!1):this._resolveCallback(n,!0)}}},{"./util":21}],14:[function(B,x,q){function j(l){return l instanceof Error&&A.getPrototypeOf(l)===Error.prototype}function m(p){var r;if(j(p)){r=new v(p),r.name=p.name,r.message=p.message,r.stack=p.stack;for(var u=A.keys(p),s=0;s<u.length;++s){var l=u[s];k.test(l)||(r[l]=p[l])}return r}return z.markAsOriginatingFromRejection(p),p}function w(l,n){return function(t,s){if(null!==l){if(t){var p=m(C(t));l._attachExtraTrace(p),l._reject(p)}else{if(n){var o=[].slice.call(arguments,1);l._fulfill(o)}else{l._fulfill(s)}}l=null}}}var z=B("./util"),C=z.maybeWrapAsError,y=B("./errors"),v=y.OperationalError,A=B("./es5"),k=/^(?:name|message|stack|cause)$/;x.exports=w},{"./errors":9,"./es5":10,"./util":21}],15:[function(j,k,l){k.exports=function(){function ai(){}function af(m,n){if(null==m||m.constructor!==ah){throw new am("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}if("function"!=typeof n){throw new am("expecting a function but got "+aq.classString(n))}}function ah(m){m!==t&&af(this,m),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(m),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function an(m){this.promise._resolveCallback(m)}function av(m){this.promise._rejectCallback(m,!1)}function ae(m){var n=new ah(t);n._fulfillmentHandler0=m,n._rejectionHandler0=m,n._promise0=m,n._receiver0=m}var at=function(){return new am("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},ak=function(){return new ah.PromiseInspection(this._target())},ad=function(m){return ah.reject(new am(m))},ag={},aq=j("./util");aq.setReflectHandler(ak);var ao=function(){var m=process.domain;return void 0===m?null:m},ar=function(){return null},aw=function(){return{domain:ao(),async:null}},ac=aq.isNode&&aq.nodeSupportsAsyncResource?j("async_hooks").AsyncResource:null,Z=function(){return{domain:ao(),async:new ac("Bluebird::Promise")}},ap=aq.isNode?aw:ar;aq.notEnumerableProp(ah,"_getContext",ap);var aj=function(){ap=Z,aq.notEnumerableProp(ah,"_getContext",Z)},au=function(){ap=aw,aq.notEnumerableProp(ah,"_getContext",aw)},W=j("./es5"),ab=j("./async"),al=new ab;W.defineProperty(ah,"_async",{value:al});var V=j("./errors"),am=ah.TypeError=V.TypeError;ah.RangeError=V.RangeError;var Q=ah.CancellationError=V.CancellationError;ah.TimeoutError=V.TimeoutError,ah.OperationalError=V.OperationalError,ah.RejectionError=V.OperationalError,ah.AggregateError=V.AggregateError;var t=function(){},aa={},D={},z=j("./thenables")(ah,t),G=j("./promise_array")(ah,t,z,ad,ai),I=j("./context")(ah),Y=(I.create,j("./debuggability")(ah,I,aj,au)),M=(Y.CapturedTrace,j("./finally")(ah,z,D)),J=j("./catch_filter")(D),K=j("./nodeback"),X=aq.errorObj,q=aq.tryCatch;return ah.prototype.toString=function(){return"[object Promise]"},ah.prototype.caught=ah.prototype["catch"]=function(p){var u=arguments.length;if(u>1){var w,s=new Array(u-1),v=0;for(w=0;u-1>w;++w){var m=arguments[w];if(!aq.isObject(m)){return ad("Catch statement predicate: expecting an object but got "+aq.classString(m))}s[v++]=m}if(s.length=v,p=arguments[w],"function"!=typeof p){throw new am("The last argument to .catch() must be a function, got "+aq.toString(p))}return this.then(void 0,J(s,p,this))}return this.then(void 0,p)},ah.prototype.reflect=function(){return this._then(ak,ak,void 0,this,void 0)},ah.prototype.then=function(m,o){if(Y.warnings()&&arguments.length>0&&"function"!=typeof m&&"function"!=typeof o){var p=".then() only accepts functions but was passed: "+aq.classString(m);arguments.length>1&&(p+=", "+aq.classString(o)),this._warn(p)}return this._then(m,o,void 0,void 0,void 0)},ah.prototype.done=function(m,o){var p=this._then(m,o,void 0,void 0,void 0);p._setIsFinal()},ah.prototype.spread=function(m){return"function"!=typeof m?ad("expecting a function but got "+aq.classString(m)):this.all()._then(m,void 0,void 0,aa,void 0)},ah.prototype.toJSON=function(){var m={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(m.fulfillmentValue=this.value(),m.isFulfilled=!0):this.isRejected()&&(m.rejectionReason=this.reason(),m.isRejected=!0),m},ah.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new G(this).promise()},ah.prototype.error=function(m){return this.caught(aq.originatesFromRejection,m)},ah.getNewLibraryCopy=k.exports,ah.is=function(m){return m instanceof ah},ah.fromNode=ah.fromCallback=function(m){var p=new ah(t);p._captureStackTrace();var s=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,o=q(m)(K(p,s));return o===X&&p._rejectCallback(o.e,!0),p._isFateSealed()||p._setAsyncGuaranteed(),p},ah.all=function(m){return new G(m).promise()},ah.cast=function(m){var n=z(m);return n instanceof ah||(n=new ah(t),n._captureStackTrace(),n._setFulfilled(),n._rejectionHandler0=m),n},ah.resolve=ah.fulfilled=ah.cast,ah.reject=ah.rejected=function(m){var n=new ah(t);return n._captureStackTrace(),n._rejectCallback(m,!0),n},ah.setScheduler=function(m){if("function"!=typeof m){throw new am("expecting a function but got "+aq.classString(m))}return al.setScheduler(m)},ah.prototype._then=function(H,A,v,m,x){var E=void 0!==x,L=E?x:new ah(t),C=this._target(),w=C._bitField;E||(L._propagateFrom(this,3),L._captureStackTrace(),void 0===m&&0!==(2097152&this._bitField)&&(m=0!==(50397184&w)?this._boundValue():C===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,L));var F=ap();if(0!==(50397184&w)){var o,y,B=C._settlePromiseCtx;0!==(33554432&w)?(y=C._rejectionHandler0,o=H):0!==(16777216&w)?(y=C._fulfillmentHandler0,o=A,C._unsetRejectionIsUnhandled()):(B=C._settlePromiseLateCancellationObserver,y=new Q("late cancellation observer"),C._attachExtraTrace(y),o=A),al.invoke(B,C,{handler:aq.contextBind(F,o),promise:L,receiver:m,value:y})}else{C._addCallbacks(H,A,L,m,F)}return L},ah.prototype._length=function(){return 65535&this._bitField},ah.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},ah.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},ah.prototype._setLength=function(m){this._bitField=-65536&this._bitField|65535&m},ah.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},ah.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},ah.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},ah.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},ah.prototype._isFinal=function(){return(4194304&this._bitField)>0},ah.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},ah.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},ah.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},ah.prototype._setAsyncGuaranteed=function(){if(!al.hasCustomScheduler()){var m=this._bitField;this._bitField=m|(536870912&m)>>2^134217728}},ah.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},ah.prototype._receiverAt=function(m){var n=0===m?this._receiver0:this[4*m-4+3];return n===ag?void 0:void 0===n&&this._isBound()?this._boundValue():n},ah.prototype._promiseAt=function(m){return this[4*m-4+2]},ah.prototype._fulfillmentHandlerAt=function(m){return this[4*m-4+0]},ah.prototype._rejectionHandlerAt=function(m){return this[4*m-4+1]},ah.prototype._boundValue=function(){},ah.prototype._migrateCallback0=function(m){var s=(m._bitField,m._fulfillmentHandler0),v=m._rejectionHandler0,p=m._promise0,u=m._receiverAt(0);void 0===u&&(u=ag),this._addCallbacks(s,v,p,u,null)},ah.prototype._migrateCallbackAt=function(p,u){var w=p._fulfillmentHandlerAt(u),s=p._rejectionHandlerAt(u),v=p._promiseAt(u),m=p._receiverAt(u);void 0===m&&(m=ag),this._addCallbacks(w,s,v,m,null)},ah.prototype._addCallbacks=function(s,v,x,u,w){var p=this._length();if(p>=65531&&(p=0,this._setLength(0)),0===p){this._promise0=x,this._receiver0=u,"function"==typeof s&&(this._fulfillmentHandler0=aq.contextBind(w,s)),"function"==typeof v&&(this._rejectionHandler0=aq.contextBind(w,v))}else{var m=4*p-4;this[m+2]=x,this[m+3]=u,"function"==typeof s&&(this[m+0]=aq.contextBind(w,s)),"function"==typeof v&&(this[m+1]=aq.contextBind(w,v))}return this._setLength(p+1),p},ah.prototype._proxy=function(m,n){this._addCallbacks(void 0,void 0,n,m,null)},ah.prototype._resolveCallback=function(u,x){if(0===(117506048&this._bitField)){if(u===this){return this._rejectCallback(at(),!1)}var y=z(u,this);if(!(y instanceof ah)){return this._fulfill(u)}x&&this._propagateFrom(y,2);var w=y._target();if(w===this){return void this._reject(at())}var p=w._bitField;if(0===(50397184&p)){var o=this._length();o>0&&w._migrateCallback0(this);for(var v=1;o>v;++v){w._migrateCallbackAt(this,v)}this._setFollowing(),this._setLength(0),this._setFollowee(y)}else{if(0!==(33554432&p)){this._fulfill(w._value())}else{if(0!==(16777216&p)){this._reject(w._reason())}else{var m=new Q("late cancellation observer");w._attachExtraTrace(m),this._reject(m)}}}}},ah.prototype._rejectCallback=function(p,u,w){var s=aq.ensureErrorObject(p),v=s===p;if(!v&&!w&&Y.warnings()){var m="a promise was rejected with a non-error: "+aq.classString(p);this._warn(m,!0)}this._attachExtraTrace(s,u?v:!1),this._reject(p)},ah.prototype._resolveFromExecutor=function(m){if(m!==t){var p=this;this._captureStackTrace(),this._pushContext();var s=!0,o=this._execute(m,function(n){p._resolveCallback(n)},function(n){p._rejectCallback(n,s)});s=!1,this._popContext(),void 0!==o&&p._rejectCallback(o,!0)}},ah.prototype._settlePromiseFromHandler=function(s,v,x,u){var w=u._bitField;if(0===(65536&w)){u._pushContext();var p;v===aa?x&&"number"==typeof x.length?p=q(s).apply(this._boundValue(),x):(p=X,p.e=new am("cannot .spread() a non-array: "+aq.classString(x))):p=q(s).call(v,x);var m=u._popContext();w=u._bitField,0===(65536&w)&&(p===D?u._reject(x):p===X?u._rejectCallback(p.e,!1):(Y.checkForgottenReturns(p,m,"",u,this),u._resolveCallback(p)))}},ah.prototype._target=function(){for(var m=this;m._isFollowing();){m=m._followee()}return m},ah.prototype._followee=function(){return this._rejectionHandler0},ah.prototype._setFollowee=function(m){this._rejectionHandler0=m},ah.prototype._settlePromise=function(o,v,u,n){var m=o instanceof ah,p=this._bitField,w=0!==(134217728&p);0!==(65536&p)?(m&&o._invokeInternalOnCancel(),u instanceof M&&u.isFinallyHandler()?(u.cancelPromise=o,q(v).call(u,n)===X&&o._reject(X.e)):v===ak?o._fulfill(ak.call(u)):u instanceof ai?u._promiseCancelled(o):m||o instanceof G?o._cancel():u.cancel()):"function"==typeof v?m?(w&&o._setAsyncGuaranteed(),this._settlePromiseFromHandler(v,u,n,o)):v.call(u,n,o):u instanceof ai?u._isResolved()||(0!==(33554432&p)?u._promiseFulfilled(n,o):u._promiseRejected(n,o)):m&&(w&&o._setAsyncGuaranteed(),0!==(33554432&p)?o._fulfill(n):o._reject(n))},ah.prototype._settlePromiseLateCancellationObserver=function(o){var s=o.handler,u=o.promise,p=o.receiver,m=o.value;"function"==typeof s?u instanceof ah?this._settlePromiseFromHandler(s,p,m,u):s.call(p,m,u):u instanceof ah&&u._reject(m)},ah.prototype._settlePromiseCtx=function(m){this._settlePromise(m.promise,m.handler,m.receiver,m.value)},ah.prototype._settlePromise0=function(m,s,v){var p=this._promise0,u=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(p,m,u,s)},ah.prototype._clearCallbackDataAtIndex=function(m){var n=4*m-4;this[n+2]=this[n+3]=this[n+0]=this[n+1]=void 0},ah.prototype._fulfill=function(m){var o=this._bitField;if(!((117506048&o)>>>16)){if(m===this){var p=at();return this._attachExtraTrace(p),this._reject(p)}this._setFulfilled(),this._rejectionHandler0=m,(65535&o)>0&&(0!==(134217728&o)?this._settlePromises():al.settlePromises(this),this._dereferenceTrace())}},ah.prototype._reject=function(m){var n=this._bitField;if(!((117506048&n)>>>16)){return this._setRejected(),this._fulfillmentHandler0=m,this._isFinal()?al.fatalError(m,aq.isNode):void ((65535&n)>0?al.settlePromises(this):this._ensurePossibleRejectionHandled())}},ah.prototype._fulfillPromises=function(p,u){for(var w=1;p>w;w++){var s=this._fulfillmentHandlerAt(w),v=this._promiseAt(w),m=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(v,s,m,u)}},ah.prototype._rejectPromises=function(p,u){for(var w=1;p>w;w++){var s=this._rejectionHandlerAt(w),v=this._promiseAt(w),m=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(v,s,m,u)}},ah.prototype._settlePromises=function(){var m=this._bitField,p=65535&m;if(p>0){if(0!==(16842752&m)){var s=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,s,m),this._rejectPromises(p,s)}else{var o=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,o,m),this._fulfillPromises(p,o)}this._setLength(0)}this._clearCancellationData()},ah.prototype._settledValue=function(){var m=this._bitField;return 0!==(33554432&m)?this._rejectionHandler0:0!==(16777216&m)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&W.defineProperty(ah.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),ah.defer=ah.pending=function(){Y.deprecated("Promise.defer","new Promise");var m=new ah(t);return{promise:m,resolve:an,reject:av}},aq.notEnumerableProp(ah,"_makeSelfResolutionError",at),j("./method")(ah,t,z,ad,Y),j("./bind")(ah,t,z,Y),j("./cancel")(ah,G,ad,Y),j("./direct_resolve")(ah),j("./synchronous_inspection")(ah),j("./join")(ah,G,z,t,al),ah.Promise=ah,ah.version="3.7.2",aq.toFastProperties(ah),aq.toFastProperties(ah.prototype),ae({a:1}),ae({b:2}),ae({c:3}),ae(1),ae(function(){}),ae(void 0),ae(!1),ae(new ah(t)),Y.setBounds(ab.firstLineError,aq.lastLineError),ah}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21,async_hooks:void 0}],16:[function(j,k,l){k.exports=function(v,q,m,p,u){function x(n){switch(n){case -2:return[];case -3:return{};case -6:return new Map}}function y(n){var o=this._promise=new v(q);n instanceof v&&(o._propagateFrom(n,3),n.suppressUnhandledRejections()),o._setOnCancel(this),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var w=j("./util");w.isArray;return w.inherits(y,u),y.prototype.length=function(){return this._length},y.prototype.promise=function(){return this._promise},y.prototype._init=function t(z,B){var r=m(this._values,this._promise);if(r instanceof v){r=r._target();var A=r._bitField;if(this._values=r,0===(50397184&A)){return this._promise._setAsyncGuaranteed(),r._then(t,this._reject,void 0,this,B)}if(0===(33554432&A)){return 0!==(16777216&A)?this._reject(r._reason()):this._cancel()}r=r._value()}if(r=w.asArray(r),null===r){var o=p("expecting an array or an iterable object but got "+w.classString(r)).reason();return void this._promise._rejectCallback(o,!1)}return 0===r.length?void (-5===B?this._resolveEmptyArray():this._resolve(x(B))):void this._iterate(r)},y.prototype._iterate=function(A){var E=this.getActualLength(A.length);this._length=E,this._values=this.shouldCopyValues()?new Array(E):this._values;for(var C=this._promise,z=!1,r=null,B=0;E>B;++B){var D=m(A[B],C);D instanceof v?(D=D._target(),r=D._bitField):r=null,z?null!==r&&D.suppressUnhandledRejections():null!==r?0===(50397184&r)?(D._proxy(this,B),this._values[B]=D):z=0!==(33554432&r)?this._promiseFulfilled(D._value(),B):0!==(16777216&r)?this._promiseRejected(D._reason(),B):this._promiseCancelled(B):z=this._promiseFulfilled(D,B)}z||C._setAsyncGuaranteed()},y.prototype._isResolved=function(){return null===this._values},y.prototype._resolve=function(n){this._values=null,this._promise._fulfill(n)},y.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},y.prototype._reject=function(n){this._values=null,this._promise._rejectCallback(n,!1)},y.prototype._promiseFulfilled=function(o,r){this._values[r]=o;var s=++this._totalResolved;return s>=this._length?(this._resolve(this._values),!0):!1},y.prototype._promiseCancelled=function(){return this._cancel(),!0},y.prototype._promiseRejected=function(n){return this._totalResolved++,this._reject(n),!0},y.prototype._resultCancelled=function(){if(!this._isResolved()){var o=this._values;if(this._cancel(),o instanceof v){o.cancel()}else{for(var r=0;r<o.length;++r){o[r] instanceof v&&o[r].cancel()}}}},y.prototype.shouldCopyValues=function(){return !0},y.prototype.getActualLength=function(n){return n},y}},{"./util":21}],17:[function(j,l,p){function k(s,v,x,u,w){for(var q=0;w>q;++q){x[q+u]=s[q+v],s[q+v]=void 0}}function m(n){this._capacity=n,this._length=0,this._front=0}m.prototype._willBeOverCapacity=function(n){return this._capacity<n},m.prototype._pushOne=function(o){var q=this.length();this._checkCapacity(q+1);var r=this._front+q&this._capacity-1;this[r]=o,this._length=q+1},m.prototype.push=function(s,v,x){var u=this.length()+3;if(this._willBeOverCapacity(u)){return this._pushOne(s),this._pushOne(v),void this._pushOne(x)}var w=this._front+u-3;this._checkCapacity(u);var q=this._capacity-1;this[w+0&q]=s,this[w+1&q]=v,this[w+2&q]=x,this._length=u},m.prototype.shift=function(){var n=this._front,o=this[n];return this[n]=void 0,this._front=n+1&this._capacity-1,this._length--,o},m.prototype.length=function(){return this._length},m.prototype._checkCapacity=function(n){this._capacity<n&&this._resizeTo(this._capacity<<1)},m.prototype._resizeTo=function(r){var s=this._capacity;this._capacity=r;var v=this._front,u=this._length,q=v+u&s-1;k(this,0,this,s,q)},l.exports=m},{}],18:[function(x,u,m){var j,k=x("./util"),q=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},w=k.getNativePromise();if(k.isNode&&"undefined"==typeof MutationObserver){var y=global.setImmediate,v=process.nextTick;j=k.isRecentNode?function(l){y.call(global,l)}:function(l){v.call(process,l)}}else{if("function"==typeof w&&"function"==typeof w.resolve){var p=w.resolve();j=function(l){p.then(l)}}else{j="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList" in document.documentElement?function(){var s=document.createElement("div"),A={attributes:!0},C=!1,z=document.createElement("div"),B=new MutationObserver(function(){s.classList.toggle("foo"),C=!1});B.observe(z,A);var l=function(){C||(C=!0,z.classList.toggle("foo"))};return function(t){var o=new MutationObserver(function(){o.disconnect(),t()});o.observe(s,A),l()}}():"undefined"!=typeof setImmediate?function(l){setImmediate(l)}:"undefined"!=typeof setTimeout?function(l){setTimeout(l,0)}:q}}u.exports=j},{"./util":21}],19:[function(j,k,l){k.exports=function(q){function w(n){void 0!==n?(n=n._target(),this._bitField=n._bitField,this._settledValueField=n._isFateSealed()?n._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}w.prototype._settledValue=function(){return this._settledValueField};var y=w.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},v=w.prototype.error=w.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},x=w.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},p=w.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},m=w.prototype.isPending=function(){return 0===(50397184&this._bitField)},u=w.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};w.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},q.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},q.prototype._isCancelled=function(){return this._target().__isCancelled()},q.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},q.prototype.isPending=function(){return m.call(this._target())},q.prototype.isRejected=function(){return p.call(this._target())},q.prototype.isFulfilled=function(){return x.call(this._target())},q.prototype.isResolved=function(){return u.call(this._target())},q.prototype.value=function(){return y.call(this._target())},q.prototype.reason=function(){var n=this._target();return n._unsetRejectionIsUnhandled(),v.call(n)},q.prototype._value=function(){return this._settledValue()},q.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},q.PromiseInspection=w}},{}],20:[function(j,k,l){k.exports=function(y,v){function m(n,p){if(B(n)){if(n instanceof y){return n}var s=x(n);if(s===w){p&&p._pushContext();var u=y.reject(s.e);return p&&p._popContext(),u}if("function"==typeof s){if(A(n)){var u=new y(v);return n._then(u._fulfill,u._reject,void 0,u,null),u}return C(n,s,p)}}return n}function t(n){return n.then}function x(n){try{return t(n)}catch(o){return w.e=o,w}}function A(n){try{return q.call(n,"_promise0")}catch(o){return !1}}function C(J,n,E){function F(o){K&&(K._resolveCallback(o),K=null)}function H(o){K&&(K._rejectCallback(o,D,!0),K=null)}var K=new y(v),I=K;E&&E._pushContext(),K._captureStackTrace(),E&&E._popContext();var D=!0,G=z.tryCatch(n).call(J,F,H);return D=!1,K&&G===w&&(K._rejectCallback(G.e,!0,!0),K=null),I}var z=j("./util"),w=z.errorObj,B=z.isObject,q={}.hasOwnProperty;return m}},{"./util":21}],21:[function(an,aC,at){function ap(){try{var j=K;return K=null,j.apply(this,arguments)}catch(k){return aj.e=k,aj}}function ar(j){return K=j,ap}function ay(j){return null==j||j===!0||j===!1||"string"==typeof j||"number"==typeof j}function aG(j){return"function"==typeof j||"object"==typeof j&&null!==j}function ao(j){return ay(j)?new Error(al(j)):j}function aE(j,l){var p,k=j.length,m=new Array(k+1);for(p=0;k>p;++p){m[p]=j[p]}return m[p]=l,m}function av(j,l,m){if(!ac.isES5){return{}.hasOwnProperty.call(j,l)?j[l]:void 0}var k=Object.getOwnPropertyDescriptor(j,l);return null!=k?null==k.get&&null==k.set?k.value:m:void 0}function am(j,l,m){if(ay(j)){return j}var k={value:m,configurable:!0,enumerable:!1,writable:!0};return ac.defineProperty(j,l,k),j}function aq(j){throw j}function aB(k){try{if("function"==typeof k){var m=ac.names(k.prototype),s=ac.isES5&&m.length>1,l=m.length>0&&!(1===m.length&&"constructor"===m[0]),p=ah.test(k+"")&&ac.names(k).length>0;if(s||l||p){return !0}}return !1}catch(j){return !1}}function az(j){function l(){}function m(){return typeof k.foo}l.prototype=j;var k=new l;return m(),m(),j}function aD(j){return ab.test(j)}function aH(j,l,p){for(var k=new Array(j),m=0;j>m;++m){k[m]=l+m+p}return k}function al(j){try{return j+""}catch(k){return"[no string representation]"}}function ai(j){return j instanceof Error||null!==j&&"object"==typeof j&&"string"==typeof j.message&&"string"==typeof j.name}function aA(j){try{am(j,"isOperational",!0)}catch(k){}}function au(j){return null==j?!1:j instanceof Error.__BluebirdErrorTypes__.OperationalError||j.isOperational===!0}function aF(j){return ai(j)&&ac.propertyIsWritable(j,"stack")}function af(j){return{}.toString.call(j)}function ak(l,p,u){for(var m=ac.names(l),s=0;s<m.length;++s){var k=m[s];if(u(k)){try{ac.defineProperty(p,k,ac.getDescriptor(l,k))}catch(j){}}}}function aw(j){return aa?process.env[j]:void 0}function ad(){if("function"==typeof Promise){try{var j=new Promise(function(){});if("[object Promise]"===af(j)){return Promise}}catch(k){}}}function ax(j,l){if(null===j||"function"!=typeof l||l===ae){return l}null!==j.domain&&(l=j.domain.bind(l));var m=j.async;if(null!==m){var k=l;l=function(){var n=new Array(2).concat([].slice.call(arguments));return n[0]=k,n[1]=this,m.runInAsyncScope.apply(m,n)}}return l}var ac=an("./es5"),G="undefined"==typeof navigator,aj={e:{}},K,J="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,W=function(j,l){function m(){this.constructor=j,this.constructor$=l;for(var o in l.prototype){k.call(l.prototype,o)&&"$"!==o.charAt(o.length-1)&&(this[o+"$"]=l.prototype[o])}}var k={}.hasOwnProperty;return m.prototype=l.prototype,j.prototype=new m,j.prototype},X=function(){var j=[Array.prototype,Object.prototype,Function.prototype],l=function(o){for(var p=0;p<j.length;++p){if(j[p]===o){return !0}}return !1};if(ac.isES5){var m=Object.getOwnPropertyNames;return function(v){for(var x=[],y=Object.create(null);null!=v&&!l(v);){var u;try{u=m(v)}catch(p){return x}for(var w=0;w<u.length;++w){var A=u[w];if(!y[A]){y[A]=!0;var n=Object.getOwnPropertyDescriptor(v,A);null!=n&&null==n.get&&null==n.set&&x.push(A)}}v=ac.getPrototypeOf(v)}return x}}var k={}.hasOwnProperty;return function(t){if(l(t)){return[]}var s=[];j:for(var r in t){if(k.call(t,r)){s.push(r)}else{for(var p=0;p<j.length;++p){if(k.call(j[p],r)){continue j}}s.push(r)}}return s}}(),ah=/this\s*\.\s*\S+\s*=/,ab=/^[a-z$_][a-z$_0-9]*$/i,Y=function(){return"stack" in new Error?function(j){return aF(j)?j:new Error(al(j))}:function(j){if(aF(j)){return j}try{throw new Error(al(j))}catch(k){return k}}}(),Z=function(j){return ac.isArray(j)?j:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var ag="function"==typeof Array.from?function(j){return Array.from(j)}:function(j){for(var l,m=[],k=j[Symbol.iterator]();!(l=k.next()).done;){m.push(l.value)}return m};Z=function(j){return ac.isArray(j)?j:null!=j&&"function"==typeof j[Symbol.iterator]?ag(j):null}}var z="undefined"!=typeof process&&"[object process]"===af(process).toLowerCase(),aa="undefined"!=typeof process&&"undefined"!=typeof process.env,ae,q={setReflectHandler:function(j){ae=j},isClass:aB,isIdentifier:aD,inheritedDataKeys:X,getDataPropertyOrDefault:av,thrower:aq,isArray:ac.isArray,asArray:Z,notEnumerableProp:am,isPrimitive:ay,isObject:aG,isError:ai,canEvaluate:G,errorObj:aj,tryCatch:ar,inherits:W,withAppended:aE,maybeWrapAsError:ao,toFastProperties:az,filledRange:aH,toString:al,canAttachTrace:aF,ensureErrorObject:Y,originatesFromRejection:au,markAsOriginatingFromRejection:aA,classString:af,copyDescriptors:ak,isNode:z,hasEnvVariables:aa,env:aw,global:J,getNativePromise:ad,contextBind:ax};q.isRecentNode=q.isNode&&function(){var j;return process.versions&&process.versions.node?j=process.versions.node.split(".").map(Number):process.version&&(j=process.version.split(".").map(Number)),0===j[0]&&j[1]>10||j[0]>0}(),q.nodeSupportsAsyncResource=q.isNode&&function(){var k=!1;try{var l=an("async_hooks").AsyncResource;k="function"==typeof l.prototype.runInAsyncScope}catch(j){k=!1}return k}(),q.isNode&&q.toFastProperties(process);try{throw new Error}catch(M){q.lastLineError=M}aC.exports=q},{"./es5":10,async_hooks:void 0}]},{},[3])(3)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);e.Promise=Promise;if(!e.nativePromise){e.nativePromise=e.Promise}})(Dynamsoft);(function(b){var a=20200717;if(b._navInfo_ver){if(b.isNumber(b._navInfo_ver)&&b._navInfo_ver>=a){return}}b._navInfo_ver=a;b.getNavInfoSync=function(){var o=!1,k=!0,n=b.win,q=b.doc,d=q.location.protocol,m=(d==="https:"),j=(d!=="https:"&&d!=="http:"),e=false,g=false,r=true,l=true,f=false,i=0,p=0,c=n.JSON;b.getNavInfo();if("userAgentData" in navigator){f=navigator.userAgentData.mobile}else{var h=Dynamsoft.navInfo;e=h.bIE;g=h.bEdge;l=h.bGecko;f=h.bMobile||h.bPad||h.bChromeOS;if(e){i=h.strBrowserVersion;p=h.IEMode}r=h.bHTML5Edition}return{host:n,bSSL:m,bFileSystem:j,bIE:e,bEdge:g,bGecko:l,bMobile:f,IEVersion:i,IEMode:p,bHTML5Edition:r,nodejs:o}};b.getNavInfoByUserAgent=function(N,L){var O="",aa=!1,F=!0,T=b.win,j=b.doc,ag=j&&j.documentElement,V,S=N.toLowerCase(),D=L.toLowerCase(),W=(/cros/).test(S),w=(/android/g).test(S),Y=(/iphone/g).test(S)||(/iphone/g).test(D),k=(/macintosh/).test(S),x=(/ipad/g).test(S)||((k||(D=="macintel"))&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1),p=(/ucweb|ucbrowser/g).test(S),J=!p&&(/nexus/g).test(S)&&(/version\/[\d.]+.*safari\//g).test(S),ae=(/playbook/g).test(S),Q=(/hp-tablet/g).test(S),C=(/blackberry|bb10/g).test(S),q=(/symbian/g).test(S),E=(/windows phone/g).test(S);var s=ae||x||Q,U=Y||J||C||q||E||w,c=!U&&!s&&!W,P=c&&(/win32|win64|windows/).test(D),n=P&&(/win64|x64/).test(S),H=c&&(/mac68k|macppc|macintosh|macintel/).test(S),ad=c&&(/linux/).test(D),o=(D=="win64")||(/wow64|x86_64|win64|x64/).test(S),m=(/wow64/g).test(S),A=S.indexOf("msie "),I=S.indexOf("trident"),G=S.indexOf("rv:"),v=aa,r=(/opera|opr/g).test(S),K=(/360se/g).test(S),R=(/maxthon/g).test(S),y=(/tencenttraveler|qqbrowser/g).test(S),M=(/the world/g).test(S),X=(/metasr/g).test(S),h=(/avant/g).test(S),B=(/firefox|fxios/g).test(S),t=!B&&(/edge\/|edga\/|edgios\/|edg\//g).test(S),f=!(C||ae||p||r||t)&&(/chrome|crios/g).test(S),e=P&&!B&&!t&&!f&&(A!=-1||I!=-1||G!=-1),l="",d=0,u=(/gecko/g).test(S),g=U||s,Z=O,z=aa,ac=T.JSON;if((H||Y||x||P||C||ae||J)&&!p&&!r&&!t&&!e&&!B){V=S.match(/version\/([\d.]+).*safari\//);if(V){if(C||ae||J){}else{v=F;f=aa}Z=V[1]}}if(t){var af=S.indexOf("edge/");if(af>-1){af+=5}else{af=S.indexOf("edg/");if(af>-1){af+=4}else{af=S.indexOf("edga/");if(af>-1){af+=5}else{af=S.indexOf("edgios/");if(af>-1){af+=7}}}}if(af>-1){Z=S.slice(af);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}g=F}else{if(B){V=S.indexOf("firefox/");g=F;if(V>-1){V=S.slice(V+8);var ab=V.indexOf(" ");if(ab>-1){V=V.slice(0,ab)}Z=V;ab=V.indexOf(".");if(ab>-1){V=Z.slice(0,ab)}if(V<27){g=aa}}else{if(Y||x){V=S.indexOf("fxios/");if(V>-1){V=S.slice(V+6);V=V.slice(0,V.indexOf(" "));Z=V}}}}else{if(e){if(A!=-1){V=S.slice(A+5);V=V.slice(0,V.indexOf(";"));l=V}else{if(G!=-1){V=S.slice(G+3);V=V.slice(0,V.indexOf(";"));V=V.slice(0,V.indexOf(")"));l=V}else{if(I!=-1){V=S.slice(I+7);V=V.slice(0,V.indexOf(";"));l=V}}}if(l===""||l>8){g=F}Z=V}else{if(v){V=Z.indexOf(".");g=F;if(V>-1){V=Z.slice(0,V);if(V<7){g=aa}}}else{if(p){V=S.indexOf("ucweb");if(V>-1){Z=S.slice(V+5)}else{V=S.indexOf("ucbrowser/");if(V>-1){Z=S.slice(V+10);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}}g=F}else{if(r){V=S.indexOf("version/");if(V>-1){Z=S.slice(V+8)}else{V=S.indexOf("opr/");if(V>-1){Z=S.slice(V+4)}}g=F}else{if(q){V=S.indexOf("browserng/");if(V>-1){Z=S.slice(V+10)}g=F}else{if(E){V=S.indexOf("iemobile/");if(V>-1){Z=S.slice(V+9)}g=F}else{if(f){var i=S.indexOf("chrome/");if(i>-1){Z=S.slice(i+7);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}else{i=S.indexOf("crios/");if(i>-1){Z=S.slice(i+6);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}}g=F;V=Z.indexOf(".");if(V>-1){V=Z.slice(0,V);if(V<27){g=aa}}}}}}}}}}}if(t||e){if(j.documentMode){d=j.documentMode}else{d=5;if(j.compatMode){if(j.compatMode=="CSS1Compat"){d=7}}}}if(ag&&ag.querySelector&&(!e||e&&(Z>8))){z=F}if(e&&Z<9){ac=null}return{bWin:P,bMac:H,bLinux:ad,bMobile:U,bPad:s,bChromeOS:W,bAndroid:w,biPhone:Y,biPad:x,bWin64:n,bWOW64:m,bOSx64:o,bIE:e,bEdge:t,bChrome:f,bFirefox:B,bSafari:v,bOpera:r,bNexus:J,bUC:p,b360SE:K,bMaxthon:R,bTencentTraveler:y,bTheWorld:M,bMetaSr:X,bAvant:h,bGecko:u,bHTML5Edition:g,strBrowserVersion:Z,IEMode:d,bQuerySelectorSupported:z,nativeJson:ac,scrollBarWidth:aa}};b.getNavInfoByUAData=function(d){var c=function(k){var f=navigator.userAgentData,h=f.mobile,j,o,g=k.platform.toLowerCase(),m=k.platformVersion,i=k.architecture.toLowerCase(),e=false,l=(g.indexOf("mac")>=0);if("brands" in f&&b.isArray(f.brands)){j=f.brands[0].brand.toLowerCase();o=f.brands[0].version}else{if("uaList" in f&&b.isArray(f.uaList)){j=f.uaList[0].brand.toLowerCase();o=f.uaList[0].version}}if(l){var n=m.split("_");if(n.length>0&&n[0]>=15){e=true}}else{if(i.indexOf("win64")>=0||i.indexOf("x86_64")>=0||i.indexOf("x64")>=0){e=true}}return{bWin:(g=="windows"),bMac:l,bLinux:(g=="linux"),bAndroid:false,bMobile:h,bPad:false,bChromeOS:false,bOSx64:e,bIE:false,bEdge:false,bChrome:true,bFirefox:false,bSafari:false,bOpera:false,bGecko:true,bHTML5Edition:true,strBrowserVersion:o,IEMode:false,bQuerySelectorSupported:true,nativeJson:true,scrollBarWidth:false}};if(d){return Promise.resolve(function(){return c(d)})}return navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture"]).then(c)};b.asyncGetNavInfo=function(){if(Dynamsoft.navInfo){return Promise.resolve(Dynamsoft.navInfo)}if("userAgentData" in navigator){return b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d;return d})}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Promise.resolve(Dynamsoft.navInfo)}};b.getNavInfo=function(){if(Dynamsoft.navInfo){return Dynamsoft.navInfo}if("userAgentData" in navigator){b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d});return false}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Dynamsoft.navInfo}};Dynamsoft.navInfoSync=b.getNavInfoSync()})(Dynamsoft.Lib);(function(a,h){var g=a.Lib,b=a.navInfoSync,c=20200521;if(g._ls_ver){if(g.isNumber(g._ls_ver)&&g._ls_ver>=c){return}}g._ls_ver=c;var i=false,f=false,j;if((b.bEdge&&b.bFileSystem)||(b.bIE&&b.IEVersion<8)){}else{try{f=window.localStorage;i=f?true:false}catch(d){f=false}}g.LS={isSupportLS:function(){return i},item:function(k,l,e){var m=null;if(this.isSupportLS()){if(l){f.setItem(k,l);m=l}else{m=f.getItem(k)}if(m===null){return e}return m}else{return e}},removeItem:function(e){if(this.isSupportLS()){f.removeItem(e)}else{return false}return true}}})(Dynamsoft);(function(lib,nil){var _utilities_ver=20200708;if(lib._utilities_ver){if(lib._utilities_ver>=_utilities_ver){return}}lib._utilities_ver=_utilities_ver;var AP=Array.prototype,win=lib.win,doc=lib.doc,navInfoSync=Dynamsoft.navInfoSync,EMPTY_STR="",FALSE=!1,TRUE=!0,mix=lib.mix;var RE_TRIM=/^[\s\xa0]+|[\s\xa0]+$/g,indexOf=AP.indexOf,lastIndexOf=AP.lastIndexOf,filter=AP.filter,every=AP.every,some=AP.some,map=AP.map;var logger=lib.getLogger(),location=win.location,bDomReady=0,callbacks=[],POLL_RETIRES=500,POLL_INTERVAL=40,RE_ID_STR=/^#?([\w-]+)$/,RE_NOT_WHITESPACE=/\S/,standardEventModel=!!(doc&&doc.addEventListener),DOM_READY_EVENT="DOMContentLoaded",READY_STATE_CHANGE_EVENT="readystatechange",LOAD_EVENT="load",COMPLETE="complete",addEventListener=standardEventModel?function(el,type,fn){el.addEventListener(type,fn,false)}:function(el,type,fn){el.attachEvent("on"+type,fn)},removeEventListener=standardEventModel?function(el,type,fn){el.removeEventListener(type,fn,false)}:function(el,type,fn){el.detachEvent("on"+type,fn)};lib.mix(lib,{isWindow:function(obj){return obj!=null&&obj==obj.window},globalEval:function(data){if(data&&RE_NOT_WHITESPACE.test(data)){if(win.execScript){win.execScript(data)}else{(function(data){win.eval.call(win,data)})(data)}}},domReady:function(fn){if(bDomReady){try{fn(lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}else{callbacks.push(fn)}return this}});lib.ready=lib.domReady;function fireReady(){for(var i=0;i<callbacks.length;i++){try{callbacks[i](lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}}lib.checkDomReady=function(){if(!bDomReady){bDomReady=1;lib.asyncGetNavInfo().then(function(navInfo){if(doc&&!navInfoSync.nodejs){removeEventListener(win,LOAD_EVENT,lib.checkDomReady)}fireReady()})}};function bindReady(){if(!doc||doc.readyState===COMPLETE){lib.checkDomReady();return}addEventListener(win,LOAD_EVENT,lib.checkDomReady);if(standardEventModel){var fnDomReady=function(){removeEventListener(doc,DOM_READY_EVENT,fnDomReady);lib.checkDomReady()};addEventListener(doc,DOM_READY_EVENT,fnDomReady)}else{var stateChange=function(){if(doc.readyState===COMPLETE){removeEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);lib.checkDomReady()}};addEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);var notframe,docElem=doc&&doc.documentElement,doScroll=docElem&&docElem.doScroll;try{notframe=(win.frameElement===null)}catch(e){notframe=false}if(doScroll&&notframe){var readyScroll=function(){try{doScroll("left");setTimeout(lib.checkDomReady,30)}catch(ex){setTimeout(readyScroll,POLL_INTERVAL)}};readyScroll()}}}bindReady();if(Dynamsoft.navInfoSync.bIE){try{doc.execCommand("BackgroundImageCache",false,true)}catch(e){}}})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._domUtil_ver){if(d._domUtil_ver>=c){return}}d._domUtil_ver=c;var b="",a="none";d.mix(d,{get:function(e){return d.doc.getElementById(e)},hide:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=a}},show:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=b}},toggle:function(f){var e=d.isString(f)?d.get(f):f;if(e){if(e.style.display===a){e.style.display=b}else{e.style.display=a}}},empty:function(e){if(!e){return}while(e.firstChild){e.removeChild(e.firstChild)}}})})(Dynamsoft.Lib);(function(a){var c=a.Lib;var b=20200521;if(c._color_ver){if(c.isNumber(c._color_ver)&&c._color_ver>=b){return}}c._color_ver=b;c.colorStrToInt=function(h){var d="0x",f,e;if(/^(rgb|RGB)/.test(h)){var g=h.replace(/[^\d,.]/g,"").split(",");for(e=0;e<3;++e){f=Number(g[e]).toString(16);if(f.length==1){f="0"+f}d+=f}if(g.length==4){f=Math.round(Number(g[e])*255).toString(16);if(f.length==1){f="0"+f}d+=f}else{d+="ff"}}else{if(h=="transparent"){d+="00000000"}else{if(/^#[0-9a-fA-f]{6}$/.test(h)){d+=h.replace(/#/,"")+"ff"}else{if(/^#[0-9a-fA-f]{3}$/.test(h)){for(e=0;e<3;++e){d+=h[e]+h[e]}d+="ff"}else{d="-1"}}}}return Number(d)};c.IntToColorStr=function(d){if(d>4294967295||d<0){return null}var e;if(!Dynamsoft.navInfoSync.bHTML5Edition){if(d%256==0){e="transparent"}else{e=Math.floor(d/256).toString(16);while(e.length!=6){e="0"+e}e="#"+e}}else{e="rgba("+Math.floor(d/16777216)+","+Math.floor(d/65536)%256+","+Math.floor(d/256)%256+","+(d%256)/255+")"}return e}})(Dynamsoft);(function(b,a){var d=b.Lib,c=20200716;if(d._ajax_ver){if(d.isNumber(d._ajax_ver)&&d._ajax_ver>=c){return}}d._ajax_ver=c;d.asyncGetNavInfo().then(function(h){var s=h.bIE&&(parseInt(h.strBrowserVersion)<=9),u=h.bIE&&(parseInt(h.strBrowserVersion)<=10),p=d.win,n=d.each,m=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,A=1,H=2,g=3,K=200,f=204,l=300,w=304,r=404,j=1223,x=500,C="open error: ",z="send error: ",k=new d.Uri(location.href),G=k&&m.test(k.getScheme()),I=false,o=function(){try{return new p.XMLHttpRequest()}catch(M){}},B=function(){try{var M=false;n(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(O){try{return(M=new p.ActiveXObject(O))}catch(P){d.error("new xhr error: "+P.message)}});return M}catch(N){}},v=(!G&&p.XMLHttpRequest)?("withCredentials" in (o()||[])):false,E=p.ActiveXObject?function(M){if(s){return B()}if(!v&&M&&I){return new I()}return !G&&o()||B()}:o,t=function(M){return I&&(M instanceof I)},q=/^(?:GET|HEAD)$/,e=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,L={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},D=a,F;if(self&&self.fetch){F=self.fetch}else{F=p.fetch}if(u){D=d.noop}function J(){}d.mix(J.prototype,{url:false,onSuccess:false,onError:false,onComplete:false,method:"GET",async:true,xhrFields:false,mimeType:false,username:false,password:false,data:false,dataType:"text",headers:false,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:false,afterSend:false,timeout:0,cache:true,crossDomain:false,retry:0,setRequestHeader:function(N,O){var M=this;M.headers[N]=O;return M},getAllResponseHeaders:function(){var M=this;return M.state===H?M.responseHeadersString:null},getNativeXhr:function(){var M=this;return M.nativeXhr},getResponseHeader:function(O){var N,M=this,P;O=O.toLowerCase();if(M.state===H){if(!(P=M.responseHeaders)){P=M.responseHeaders={};while((N=e.exec(M.responseHeadersString))){P[N[1].toLowerCase()]=N[2]}}N=P[O]}return N===undefined?null:N},overrideMimeType:function(N){var M=this;if(!M.state){M.mimeType=N}return M},abort:function(N){var M=this;N=N||"abort";M.state=g;M.status=0;M.statusText=N;if(M.nativeXhr){M.nativeXhr.abort()}M._callback();return M},_ioReady:function(N,Q){var O=this,M=false;if(O.state===H||O.state===g){return}if(O.state===A){O.state=H}O.readyState=4;if(N>=K&&N<l||N===w){if(N===w){Q="not modified";M=true}else{Q="success";M=true}}else{if(N<0){N=0}}try{if(N>=K){O.handleResponseData()}}catch(P){d.error(P.stack||P,"error");Q=P.message||"parser error"}if(N<K||!M){if(O.retry>0){O.retry=O.retry-1;setTimeout(function(){O.sendInternal()},200);return}}O.status=N;O.statusText=Q;O._callback(M)},_callback:function(M){var N=this,O=N.timeoutTimer;if(O){clearTimeout(O);N.timeoutTimer=0}n([M?N.onSuccess:N.onError,N.onComplete],function(P){if(d.isFunction(P)){P.apply(N.context,[N.responseData,N.statusText,N])}});N.responseData=null},handleResponseData:function(){var T=this,U,S=T.dataType,R=T.nativeXhr;if(S==="blob"||S==="arraybuffer"){if(s){var Q,O;if("responseBody" in R){Q=R.responseBody;O=dsVbsBinGetLength(Q);U=(new VBArray(dsVbsBinGetBytes(Q,0,O))).toArray()}else{var M;U=[];Q=R.responseText;O=Q.length;for(M=0;M<O;++M){U.push(Q.charCodeAt(M)&255)}}Q=null}else{if(!!p.Blob){U=R.response}else{if("responseBody" in R){U=R.responseBody}else{U=R.responseText}}}}else{if(S=="json"){if(R.responseType&&R.responseType.toLowerCase()=="json"){U=R.response}else{U=R.responseText?(((p.JSON&&p.JSON.parse)?p.JSON.parse:d.parse)(R.responseText)):{}}}else{if(S==="user-defined"){U=R.response!==undefined?R.response:R.responseText}else{T.responseText=U=R.responseText||"";try{var N=R.responseXML;if(N&&N.documentElement){T.responseXML=N}}catch(P){}}}}T.responseData=U},sendInternal:function(M){var T=this,ac,X,N,O,V,Y,W,ab,P,U,ad,R;ac=T._setup(M);N=ac.method;if(d.isString(N)){N=N.toUpperCase()}if(N=="POST"){Y=ac.contentType}else{Y=false}O=ac.url;V=ac.dataType;P=ac.mimeType;if(!d.isString(O)){return}T.nativeXhr=W=E(ac.crossDomain);if(!W){return}try{T.state=A;if(ac.username){W.open(N,O,ac.async,ac.username,ac.password)}else{W.open(N,O,ac.async)}if((ac.async||h.bIE)&&V&&V!="user-defined"&&("responseType" in W)){try{W.responseType=V}catch(aa){}}}catch(Z){if(T.state<2){d.error(Z.stack||Z,"error");T._ioReady(-1,C+(d.isNumber(Z.number)?"("+Z.number+")":"")+(Z.message||""))}else{d.error(Z)}return}ab=ac.xhrFields||{};if("withCredentials" in ab){if(!v){delete ab.withCredentials}}n(ab,function(ag,ae){try{W[ae]=ag}catch(af){d.error(af)}});if(P&&W.overrideMimeType){W.overrideMimeType(P)}U=ac.headers||{};var Q=U["X-Requested-With"];if(Q===false){delete U["X-Requested-With"]}if("setRequestHeader" in W){if(Y){W.setRequestHeader("Content-Type",ac.contentType)}W.setRequestHeader("Accept",V&&L[V]?L[V]+(V==="*"?"":", */*; q=0.01"):L["*"]);n(U,function(af,ae){W.setRequestHeader(ae,af)})}if(!ac.cache){W.setRequestHeader("If-Modified-Since","0");W.setRequestHeader("Cache-Control","no-cache")}ad=!q.test(ac.method);R=ad&&ac.data||null;if(ad&&s){R=ac.data}if(ac.async&&ac.timeout>0){if(ac.timeout<300){ac.timeout=300}T.timeoutTimer=setTimeout(function(){T.abort("timeout")},ac.timeout)}try{T.state=A;if(d.isFunction(T.beforeSend)){var S=T.beforeSend(W,T);if(S===false){T.abort("cancel");return}}W.send(R);R=null;ac.data=null;if(d.isFunction(T.afterSend)){T.afterSend(T)}}catch(aa){if(T.state<2){d.error(aa.stack||aa,"error");T._ioReady(-1,z+(aa.message||""))}else{d.error(aa)}}if(!ac.async||W.readyState===4){T._xhrCallback()}else{if(t(W)){W.onload=function(){W.readyState=4;W.status=K;T._xhrCallback()};W.onerror=function(){W.readyState=4;W.status=x;T._xhrCallback()}}else{W.onreadystatechange=function(){T._xhrCallback()}}}},_xhrCallback:function(N,S){var O=this,P=O.nativeXhr;try{if(P.readyState===4||S){if(t(P)){P.onerror=D;P.onload=D}else{P.onreadystatechange=D}if(S){if(P.readyState!==4){P.abort()}}else{if(!t(P)){O.responseHeadersString=P.getAllResponseHeaders()}var M=P.status,R;try{R=P.statusText}catch(Q){d.error("xhr statusText error: ");d.error(Q);R=""}O._ioReady(M,R)}}}catch(Q){d.error(Q.stack||Q,"error");P.onreadystatechange=D;if(!S){O._ioReady(-1,Q.message||"process error")}}},_setup:function(Q){var N=this,M,P,S,O,R;if(Q){N.context=Q.context;delete Q.context;if(Q instanceof J){Q=Q.config}N.config=Q;O=Q.url;if(d.startsWith(O,"http://")||d.startsWith(O,"https://")){R=new d.Uri(O)}else{if(d.startsWith(O,"//")){Q.url=O="http:"+O}R=k.resolve(O)}if(!Q.dataType){M="text"}else{M=Q.dataType.toLowerCase()}Q.dataType=M;if(!Q.method){Q.method="GET"}else{Q.method=Q.method.toUpperCase()}if(!("crossDomain" in Q)){Q.crossDomain=!R.isSameOriginAs(k)}S=Q.headers;for(P in S){if(d.isUndefined(S[P])){delete S[P]}}d.mix(N,Q)}N.state=A;return N}});function i(N){if(!N||!d.isString(N.url)){d.log("the url is error.");return}var M=new J();M.sendInternal(N);return M}d.mix(d,{ajax:i,io:{get:function(N,O,P,M){return i({method:"GET",url:N,onSuccess:O,onError:P,dataType:M})},post:function(N,P,O,Q,M){return i({method:"POST",data:P,url:N,onSuccess:O,onError:Q,dataType:M})},put:function(N,P,O,Q,M){return i({method:"PUT",data:P,url:N,onSuccess:O,onError:Q,dataType:M})}}});if(h.bChrome||h.bFirefox||F){d.fetch=function(P,O){var M="text";if(O){if(O&&O.dataType){M=O.dataType}}var N,Q;N=F(P,O);if(Promise!=d.nativePromise){Q=Promise;Promise=d.nativePromise;N=N.then(function(R){Promise=Q;if(R.ok){return R}else{throw {httpCode:R.status,errorString:R.statusText}}})}if(M=="blob"){N=N.then(function(R){return R.blob()})}else{if(M=="json"){N=N.then(function(R){return R.json()})}else{if(M=="arraybuffer"){N=N.then(function(R){return R.arrayBuffer()})}else{N=N.then(function(R){return R.text()})}}}return N}}else{if(s){d.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join(""))}var y;if(Promise!=d.nativePromise){y=Promise;Promise=d.nativePromise}d.fetch=function(N,M){return new Promise(function(S,Q){var P=function(W,U,V){if(y){Promise=y}S(W)},T=function(W,U,V){if(y){Promise=y}Q({httpCode:V.status,errorString:U})},O={url:N,onSuccess:P,onError:T,dataType:"text"},R=false;if(M){if(M.method){O.method=M.method}if(M.body){O.data=M.body}if(M.headers){n(M.headers,function(V,U){if(U.toLowerCase()=="content-type"){R=true}O.headers[U]=V})}if(M.dataType){O.dataType=M.dataType}}if(R){O.contentType=false}if(O.dataType=="blob"&&s){O.mimeType="text/plain; charset=x-user-defined"}d.ajax(O)})}}})})(Dynamsoft);(function(c){var b=20200521;if(c._customEvt_ver){if(c.isNumber(c._customEvt_ver)&&c._customEvt_ver>=b){return}}c._customEvt_ver=b;var a={fire:function(f){var d=this,e;d.exec=d.exec||{};f=f.toLowerCase();e=Array.prototype.slice.call(arguments,1);c.each(d.exec[f]||[],function(i){var h=i.f,g=i.c||d;try{h.apply(g,e)}catch(j){c.log(j)}})},on:function(g,f,d){var e=this;e.exec=e.exec||{};g=g.toLowerCase();e.exec[g]=e.exec[g]||[];e.exec[g].push({f:f,c:d})},off:function(j,h,k){var f=this,e=f.exec;if(!e){return}if(!j){f.exec=null;return}j=j.toLowerCase();if(!h){e[j]=null;return}var d=e[j]||[];for(var g=d.length-1;g>=0;g--){if(d[g]===h){d.splice(g,1)}}}};c.obj={customEvent:a}})(Dynamsoft.Lib);(function(b){var g=b.Lib,e=!1,c=!0,f=g.win.document,d;var a=20200521;if(g._evtBase_ver){if(g.isNumber(g._evtBase_ver)&&g._evtBase_ver>=a){return}}g._evtBase_ver=a;d=function(h){return(Dynamsoft.navInfoSync.bGecko&&"mousewheel"===h)?"DOMMouseScroll":h};g.mix(g,{addEventListener:f.addEventListener?function(i,k,j){var h=d(k);if(i){i.addEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.attachEvent("on"+h,j)}},removeEventListener:f.removeEventListener?function(i,k,j){var h=d(k);if(i){i.removeEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.detachEvent("on"+h,j)}},stopPropagation:function(h){var i=h||window.event;if(i.preventDefault){i.preventDefault()}if(i.stopPropagation){i.stopPropagation()}i.returnValue=false;i.cancelBubble=true},fireEvent:function(h,i){var j;if(f.createEvent){j=f.createEvent("HTMLEvents");j.initEvent(h,c,c);if(i.dispatchEvent){i.dispatchEvent(j)}}else{if(f.createEventObject){j=f.createEventObject();j.bubbles=c;j.cancelable=c;i.fireEvent(h,j)}else{j=new Event(h);if(i.dispatchEvent){i.dispatchEvent(j)}}}}})})(Dynamsoft);(function(f,b){var e=20200716;if(f._loadbase64_ver){if(f._loadbase64_ver>=e){return}}f._loadbase64_ver=e;var d={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};f.base64={UTF16ToUTF8:function(n){var l=[],h=n.length,j,g;for(var k=0;k<h;k++){var m=n.charCodeAt(k);if(m>0&&m<=127){l.push(n.charAt(k))}else{if(m>=128&&m<=2047){j=192|((m>>6)&31);g=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g))}else{if(m>=2048&&m<=65535){j=224|((m>>12)&15);g=128|((m>>6)&63);var o=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g),String.fromCharCode(o))}else{if(m>=65536&&m<=2097151){}else{if(m>=2097152&&m<=67108863){}else{}}}}}}return l.join("")},UTF8ToUTF16:function(m){var l=[],k=m.length,j,p,o,g,q,n,h;for(j=0;j<k;j++){g=m.charCodeAt(j);if(((g>>7)&255)==0){l.push(m.charAt(j))}else{if(((g>>5)&255)==6){q=m.charCodeAt(++j);p=(g&31)<<6;o=q&63;h=p|o;l.push(String.fromCharCode(h))}else{if(((g>>4)&255)==14){q=m.charCodeAt(++j);n=m.charCodeAt(++j);p=(g<<4)|((q>>2)&15);o=((q&3)<<6)|(n&63);h=((p&255)<<8)|o;l.push(String.fromCharCode(h))}else{if(((g>>3)&255)==30){}else{if(((g>>2)&255)==62){}else{}}}}}}return l.join("")},encode:function(o){var n=this.UTF16ToUTF8(o),j=[],l=0,g=n.length,m,k,h;while(l<g){m=n.charCodeAt(l++)&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n.charCodeAt(l++);if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n.charCodeAt(l++);j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},encodeArray:function(n){var j=[],l=0,g=n.length,m,k,h;while(l<g){m=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n[l++]&255;j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},decode:function(p){var n=this,k=[],m=0,o=p.length,l,j,h,g;while(m<o){do{l=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&l==-1);if(l==-1){break}do{j=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&j==-1);if(j==-1){break}k.push(String.fromCharCode((l<<2)|((j&48)>>4)));do{h=p.charCodeAt(m++)&255;if(h==61){return n.UTF8ToUTF16(k.join(""))}h=d.decodeChars[h]}while(m<o&&h==-1);if(h==-1){break}k.push(String.fromCharCode(((j&15)<<4)|((h&60)>>2)));do{g=p.charCodeAt(m++)&255;if(g==61){return n.UTF8ToUTF16(k.join(""))}g=d.decodeChars[g]}while(m<o&&g==-1);if(g==-1){break}k.push(String.fromCharCode(((h&3)<<6)|g))}return n.UTF8ToUTF16(k.join(""))}};f.utf8={fromUTF16:function(k){var h=[],j=0,g=k.length,l;while(j<g){l=k.charCodeAt(j);if((l>=1)&&(l<=127)){h.push(k.charAt(j))}else{if(l>2047){h.push(String.fromCharCode(224|((l>>12)&15)));h.push(String.fromCharCode(128|((l>>6)&63)));h.push(String.fromCharCode(128|((l>>0)&63)))}else{h.push(String.fromCharCode(192|((l>>6)&31)));h.push(String.fromCharCode(128|((l>>0)&63)))}}j++}return h.join("")},toUTF16:function(m){var h=[],k=0,g=m.length,n,l,j;while(k<g){n=m.charCodeAt(k++);switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:h.push(m.charAt(k-1));break;case 12:case 13:l=m.charCodeAt(k++);h.push(String.fromCharCode(((n&31)<<6)|(l&63)));break;case 14:l=m.charCodeAt(k++);j=m.charCodeAt(k++);h.push(String.fromCharCode(((n&15)<<12)|((l&63)<<6)|((j&63)<<0)));break}}return h.join("")}};var c=typeof exports!="undefined"?exports:typeof self!="undefined"?self:$.global;function a(g){this.message=g}a.prototype=new Error();a.prototype.name="InvalidCharacterError";f.btoa=c.btoa?(function(g){return c.btoa(g)}):(function(j){var m=String(j);for(var l,h,g=0,k=d.encodeChars,i="";m.charAt(g|0)||(k="=",g%1);i+=k.charAt(63&l>>8-g%1*8)){h=m.charCodeAt(g+=3/4);if(h>255){throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.")}l=l<<8|h}return i});f.atob=c.atob?(function(g){return c.atob(g)}):(function(j){var m=String(j).replace(/[=]+$/,"");if(m.length%4==1){throw new a("'atob' failed: The string to be decoded is not correctly encoded.")}for(var l=0,k,h,g=0,i="";h=m.charAt(g++);~h&&(k=l%4?k*64+h:h,l++%4)?i+=String.fromCharCode(255&k>>(-2*l&6)):0){h=d.encodeChars.indexOf(h)}return i})})(Dynamsoft.Lib);(function(h){var f=20200721;if(h._loadjs_ver){if(h._loadjs_ver>=f){return}}h._loadjs_ver=f;var b="",d=!0,g=h.doc,a=g&&g.documentElement,c=g.getElementsByTagName("head")[0]||a,e=g.createElement("script").readyState?function(j,k){var i=j.onreadystatechange;j.onreadystatechange=function(){var l=j.readyState;if(l==="loaded"||l==="complete"){j.onreadystatechange=null;if(i){i()}k.call(this,true)}else{if(l==="loading"){}else{k.call(this,false)}}}}:function(j,k){var i=!1;j.addEventListener("load",k,i);j.addEventListener("error",k,i)};h.getScript=function(j,l,m){var k,i;if(!h.isFunction(m)){m=function(){}}if(!h.isString(j)||j==b){m();return}k=g.createElement("script");i=["",j].join(b);k.src=i;if(l){k.async=d}k.charset="utf-8";e(k,m);c.insertBefore(k,c.firstChild);return k};h.getScripts=function(k,j,m){if(!h.isArray(k)){m();return}var l=k.length,i=function(n){if(n){l--}else{m()}if(l<=0){m("ok")}};h.each(k,function(n){h.getScript(n,j,i)})};h.getCss=function(i,l){var j,k=l;if(!h.isFunction(k)){k=!1}if(!h.isString(i)||i==b){if(k){k()}return}j=g.createElement("link");j.href=i;j.rel="stylesheet";j.async=d;if(k){e(j,k)}c.insertBefore(j,c.firstChild);return j};h.getAllCss=function(l,k){if(!h.isArray(l)){k();return}var j=l.length,i=function(m){if(m){j--}else{k()}if(j<=0){k("ok")}};h.each(l,function(m){h.getCss(m,i)})};h.addScript=function(i){var k,j;j=i.body;if(!h.isString(j)||j==b){return}k=g.createElement("script");k.charset="utf-8";if(Dynamsoft.navInfoSync.bIE){k.text=j}else{k.appendChild(g.createTextNode(j))}if(i.language){k.language=i.language}else{k.language="javascript"}if(i.type){k.type=i.type}else{k.type="text/javascript"}c.insertBefore(k,c.firstChild)};h.addJS=function(i){h.addScript({body:i})};h.addVBS=function(i){h.addScript({body:i,language:"vbscript",type:"text/vbscript"})}})(Dynamsoft.Lib);(function(a){var c=a.Lib,b=20200521;if(c._asyncQueue_ver){if(c.isNumber(c._asyncQueue_ver)&&c._asyncQueue_ver>=b){return}}c._asyncQueue_ver=b;var d={queue:[],doNextStarted:false,timer:false,pushToDo:function(g,f,e){d.queue.push({obj:g,method:f,args:e})},doNext:function(){if(!d.doNextStarted){clearTimeout(d.timer);d.timer=false;return}if(d.queue.length==0){d.timer=setTimeout(d.doNext,500);return}var h=d.queue[0],j=h.obj,k=h.method,f=h.args;d.queue.splice(0,1);if(c.isFunction(j[k])){if(f.length>2){var g=f[f.length-2],e=f[f.length-1];f[f.length-2]=function(){try{g.apply(j,arguments)}catch(l){}d.timer=setTimeout(d.doNext,0)};f[f.length-1]=function(){try{e.apply(j,arguments)}catch(l){}d.timer=setTimeout(d.doNext,0)}}try{j[k].apply(j,f)}catch(i){}return}else{c.log("not invoke a function: "+k);d.timer=setTimeout(d.doNext,0)}},start:function(){if(!d.doNextStarted){d.doNextStarted=true;d.timer=setTimeout(d.doNext,0)}},stop:function(){clearTimeout(d.timer);d.doNextStarted=false;d.queue=[]}};c.asyncQueue=d})(Dynamsoft);(function(f){var d=20200521;if(f._sprintf_ver){if(f._sprintf_ver>=d){return}}f._sprintf_ver=d;var e,i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function g(m,l){if("_".repeat){return m.repeat(l)}var k=0,j=[];for(;k<l;k++){j.push(m)}return j.join("")}function c(s,r){var w=1,u=s.length,x,l="",p,n,q,m,t,v,o,j;for(p=0;p<u;p++){if(typeof s[p]==="string"){l+=s[p]}else{if(typeof s[p]==="object"){q=s[p];if(q.keys){x=r[w];for(n=0;n<q.keys.length;n++){if(x==undefined){throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',q.keys[n],q.keys[n-1]))}x=x[q.keys[n]]}}else{if(q.param_no){x=r[q.param_no]}else{x=r[w++]}}if(i.not_type.test(q.type)&&i.not_primitive.test(q.type)&&x instanceof Function){x=x()}if(i.numeric_arg.test(q.type)&&(typeof x!=="number"&&isNaN(x))){throw new TypeError(e("[sprintf] expecting number but found %T",x))}if(i.number.test(q.type)){o=x>=0}switch(q.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,q.width?parseInt(q.width):0);break;case"e":x=q.precision?parseFloat(x).toExponential(q.precision):parseFloat(x).toExponential();break;case"f":x=q.precision?parseFloat(x).toFixed(q.precision):parseFloat(x);break;case"g":x=q.precision?String(Number(x.toPrecision(q.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x);x=(q.precision?x.substring(0,q.precision):x);break;case"t":x=String(!!x);x=(q.precision?x.substring(0,q.precision):x);break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase();x=(q.precision?x.substring(0,q.precision):x);break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf();x=(q.precision?x.substring(0,q.precision):x);break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase();break}if(i.json.test(q.type)){l+=x}else{if(i.number.test(q.type)&&(!o||q.sign)){j=o?"+":"-";x=x.toString().replace(i.sign,"")}else{j=""}t=q.pad_char?q.pad_char==="0"?"0":q.pad_char.charAt(1):" ";v=q.width-(j+x).length;m=q.width?(v>0?g(t,v):""):"";l+=q.align?j+x+m:(t==="0"?j+m+x:m+j+x)}}}}return l}var h=Object.create?Object.create(null):{};function a(j){if(h[j]){return h[j]}var m=j,n,p=[],o=0;while(m){if((n=i.text.exec(m))!==null){p.push(n[0])}else{if((n=i.modulo.exec(m))!==null){p.push("%")}else{if((n=i.placeholder.exec(m))!==null){if(n[2]){o|=1;var q=[],l=n[2],k=[];if((k=i.key.exec(l))!==null){q.push(k[1]);while((l=l.substring(k[0].length))!==""){if((k=i.key_access.exec(l))!==null){q.push(k[1])}else{if((k=i.index_access.exec(l))!==null){q.push(k[1])}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}n[2]=q}else{o|=2}if(o===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}p.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}else{throw new SyntaxError("[sprintf] unexpected placeholder")}}}m=m.substring(n[0].length)}h[j]=p;return p}e=function(j){return c(a(j),arguments)};function b(k,j){return e.apply(null,[k].concat(j||[]))}f.sprintf=e;f.vsprintf=b})(Dynamsoft.Lib);(function(f,i){var c=Dynamsoft.managerEnv,k=f.LS,h=Dynamsoft.navInfoSync.host,d,a,g=20200522,j=function(){if(Dynamsoft.dcp){var l=Dynamsoft.dcp.dcpJSVer;if(f.isNumber(l)){return l>=g}}return false};if(!c){Dynamsoft.managerEnv={};c=Dynamsoft.managerEnv}c.resourcesPath=c.resourcesPath||"Resources";c.IfUpdateService=c.IfUpdateService?true:false;if(j()){j=i;g=i;return}a={dcpStatus:0,bConnected:false,connectedResult:"",curPortIndex:0,bConnectNumLimited:true,IMAXCONNECTCOUNT:3,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}};var b=[],e=0;Dynamsoft.dcp=d={host:"127.0.0.1",ports:[[18625,18626]],win64Port:[18627,18628],ifCheck64bitServiceFirst:false,dcpJSVer:g,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],DWASMVer14:[14,3,1,"0115"],managerVersion:[16,0,0,"0428"],managerVersionMac:[16,0,0,"0428"],managerVersionLinux:[16,0,0,"0428"],serviceVersion:[1,5,3,"0107"],serviceVersionMac:[1,5,3,"0107"],serviceVersionLinux:[1,5,3,"0107"],detect:a,strSID:"",bEnhancedMode:false,b64bit:false,onReadys:[],getManagerVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.managerVersionMac}else{if(l.bLinux){return d.managerVersionLinux}}}return d.managerVersion},getServiceVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.serviceVersionMac}else{if(l.bLinux){return d.serviceVersionLinux}}}return d.serviceVersion},versionInfo:function(p,l){var o=0,n=function(t){if(f.isArray(t)&&t.length>0&&t[0]){a.curPort=d.ports[o%d.ports.length];var w=t[0];if(f.isString(w)&&d._compareVersion(w.split(","),d.oldDWASMVer)){var v=f.isString(t[1])&&t[1].toLowerCase(),u="",s=false,q=false;if(t.length>4){u=f.isString(t[2])?t[2]:"";s=f.isString(t[3])&&(t[3]==="true");q=f.isString(t[4])&&(t[4]==="64")}d.strSID=u;d.bEnhancedMode=s;d.b64bit=q;a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.Connected;d._sendStatusEvent(false,w);if(f.isFunction(p)){setTimeout(function(){p(u,s)},0)}return true}}return false},m=function(r,s,q){++o;a.curPortIndex=o%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&o>=a.IMAXCONNECTCOUNT){setTimeout(function(){p(r,s,q)},0);return true}return false};a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,l,n,m)},_checkOldManagerVersion:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,i,m,l)},_checkManagerVersion:function(l,n,m){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",false,l,n,m)},_checkService:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingServiceVer;this._postBase("DSVersion",false,i,m,l)},_checkUpdateFile:function(m,l){this._postBase("CheckUpdateFile",false,i,m,l)},_updateService:function(m,l){this._postBase("UpdateService",false,i,m,l)},_postBase:function(n,r,o,t,s){var q,l;if(r){q=d.oldDWASMVerStr}else{q="dwasm2_"+d._getModuleVer()}l={id:"1",method:n,version:q,parameter:[]};if(o){if(f.startsWith(o,"http://")||f.startsWith(o,"https://")){if(Dynamsoft.managerEnv.ifCheckRemoteProductKey){var p=this,m=o;f.ajax({method:"GET",url:m,onSuccess:function(u){l.productKey=u;p._postBaseV2(n,r,l,t,s)},onError:s});return true}}else{l.productKey=o}}this._postBaseV2(n,r,l,t,s);return true},_postBaseV2:function(r,w,m,A,z){var x,B,t,u=f.stringify(m);if(!f.isFunction(A)||!f.isFunction(z)){return}if(d.detect.bConnected&&r=="VersionInfo"){A(d.detect.connectedResult);return}B=function(D,E,C){s--;if(s==0){if(z(D,E,C)){return}}};t=function(D,F,C){var E=d._getJSON(D);if(E&&"result" in E){s=-1;if(d.detect.bConnected){return}d.detect.bConnected=true;d.detect.connectedResult=E.result;d.detect.dcpStatus=d.detect.EnumDCP_DetectStatus.Connected;d.detect.curPort=d.ports[C.index];d.ports=[d.detect.curPort];d.detect.curPortIndex=0;if(k.isSupportLS()){k.item("DCP_port",d.detect.curPort[1])}if(A(E.result)){return}}B(D,F,C)};var p,s=d.ports.length;if(s>1&&k.isSupportLS()){var n=k.item("DCP_port");if(f.isString(n)&&n!==""){for(p=1;p<s;p++){var l=d.ports[p],y,v;y=l[0];v=l[1];if(v==n){d.ports[p][0]=d.ports[0][0];d.ports[p][1]=d.ports[0][1];d.ports[0][0]=y;d.ports[0][1]=v}break}}}if(d.detect.bConnected){s=1}b=[];d.detect.bConnected=false;for(p=0;p<s;p++){var o=[d._getPreUrl(p),w?"dcp/":d._getModuleName(),w?d.oldDWASMVerStr:d._getModuleVer(),"/",r,"?type=1&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");b.push({method:"POST",url:o,timeout:200,data:u,onSuccess:t,onError:B})}for(p=0;p<s;p++){var q=f.ajax(b[p]);q.index=p}},loadZip:function(m,q,p,r){var o,n=q,l=p;if(n===100){n=0;l=function(s){if(f.isString(s)){s=s.replace('"result" : [ 0,','"result" : [ 100,')}p(s)}}if(Dynamsoft.managerEnv.IfUpdateService){o=[d._getPreUrl(a.curPortIndex),d._getModuleName(),d._getModuleVer(),"/LoadZipFromBytes?type=",n,"&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}else{o=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}f.ajax({method:"POST",url:o,async:true,data:m,onSuccess:l,onError:r})},oldLoadZip:function(m,l,o,p){var n=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");f.ajax({method:"POST",url:n,async:true,data:m,onSuccess:o,onError:p})},_getPreUrl:function(o){var l,m;if(Dynamsoft.navInfoSync.bSSL){m="https://";l=d.ports[o][1]}else{m="http://";l=d.ports[o][0]}return[m,d.host,":",l,"/"].join("")},_getJSON:function(l){return l?f.parse(l):!1},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return d.getManagerVersion().join("")},_compareVersion:function(m,l){if(f.isArray(m)&&m.length==4&&f.isArray(l)&&l.length>=4){return m[0]>l[0]||m[0]==l[0]&&m[1]>l[1]||m[0]==l[0]&&m[1]==l[1]&&m[2]>l[2]||m[0]==l[0]&&m[1]==l[1]&&m[2]==l[2]&&parseInt(m[3])>=parseInt(l[3])}else{if(f.isArray(m)&&m.length==1&&f.isArray(l)&&l.length>=1){return parseInt(m[0])>=parseInt(l[0])}}return false},_getDSUpdateZipUrl:function(){var m=Dynamsoft.Lib.getNavInfo(),n,l,o="";n="Win";if(m.bMac){n="Mac"}else{if(m.bLinux){n="Linux"}}if(Dynamsoft.navInfoSync.bFileSystem){l=""}else{l="?t="+f.now()}if(m.bWin&&d.b64bit){o="_x64"}return[Dynamsoft.managerEnv.resourcesPath,"/dist/serviceupdate/",n,"DSUpdate_",d.getManagerVersion().join("."),o,".zip",l].join("")},getPorts:function(l,p,o){var n="GetPorts",q="dwasm2_"+d._getModuleVer(),m={id:"1",method:n,version:q,parameter:[l]};this._postBaseV2(n,false,m,p,o)},checkDcpForUpdate:function(q,l,s,t,o,n,D,v){var r=false,F=true,B=3,m=0,y=function(J){if(!(f.isArray(J)&&J.length>0&&J[0])){return false}var K=J[0].split(",");var I=false;if(J.length>4){I=f.isString(J[4])&&(J[4]==="64")}d.b64bit=I;if(!Dynamsoft.managerEnv.IfUpdateService){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{if(d._compareVersion(K,d.oldDWASMVer)){var H=d._getDSUpdateZipUrl();r=true;var M=function(N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadedZip;d._sendStatusEvent();var O=0;d.oldLoadZip(N,O,function(){setTimeout(function(){d._checkManagerVersion(v,u,p)},5000)},L)},L=function(O,P,N){d._funUpdateFailed(o,n,O,N.status);setTimeout(D,0)},G=function(O,Q,N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(o){o()}var R=N.status,P;if(R==200){P=O}else{P="The update package can't be downloaded. The error code is "+R+"."}if(n){n(true,P)}d._sendStatusEvent(true,P);setTimeout(D,0)};if(s){s()}if(t){t()}a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.ajax({method:"GET",url:H,async:true,dataType:"blob",onSuccess:M,onError:G})}else{if(F){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;if(s){s()}if(q){q()}d._sendStatusEvent();F=false}}}return true},x=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;d._sendStatusEvent()}else{setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},u=function(G){if(!(f.isArray(G)&&G.length>0&&G[0])){return false}var H=G[0].split(",");if(d._compareVersion(H,d.getManagerVersion())){if(Dynamsoft.managerEnv.IfUpdateService){if(r){setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}return true}return false},p=function(I,J,H){var G=1000;if(B<3){G=500}B--;if(B<0){d._funShowUpgradeDialogWhenUpdateFailed(o,n);setTimeout(D,0)}else{setTimeout(function(){d._checkManagerVersion(v,u,p)},G)}return true},E=function(H){if(!(f.isArray(H)&&H.length>0&&H[0])){if(s){s()}return false}var G=H[0].split(",");if(d._compareVersion(G,d.getServiceVersion())){a.bConnected=true;if(o){o()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,H[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}return true},w=function(H,I,G){d._funUpdateFailed(o,n,H,G.status);setTimeout(D,0);return true};var A=false,C=function(I){if(!(f.isArray(I)&&I.length>0&&I[0])){return false}var L=I[0];if(f.isString(L)&&d._compareVersion(L.split(","),d.oldDWASMVer)){var K=f.isString(I[1])&&I[1].toLowerCase(),J="",H=false,G=false;if(I.length>4){A=true;J=f.isString(I[2])?I[2]:"";H=f.isString(I[3])&&(I[3]==="true");G=f.isString(I[4])&&(I[4]==="64")}d.strSID=J;d.bEnhancedMode=H;d.b64bit=G;a.curPort=d.ports[m%d.ports.length];if(!Dynamsoft.managerEnv.IfUpdateService){a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{m=0;a.curPortIndex=0;if(F){if(s){s()}if(q){q()}F=false}setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},z=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(F){if(s){s()}if(q){q(G,H)}F=false}if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){m=0;a.curPortIndex=0;setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}else{setTimeout(function(){d._checkManagerVersion(v,C,z)},1000)}return true};if(l){l()}d._checkManagerVersion(v,C,z)},_checkUpdateZip:function(p,w,o,x,q){var r=function(B,C,A){var D=-1;if(A){D=A.status}if(D==0){setTimeout(function(){d._checkService(v,s)},5000);return true}var z=d._getDSUpdateZipUrl();a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.ajax({method:"GET",url:z,async:true,dataType:"blob",onSuccess:l,onError:u});return true},u=function(A,C,z){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(w){w()}var D=z.status,B;if(D==200){B=A}else{B="The update package can't be downloaded. The error code is "+D+"."}if(o){o(true,B)}d._sendStatusEvent(true,B);setTimeout(x,0);return true},t=function(A){if(!(f.isArray(A)&&A.length>1)){return false}if(A[1]==true){a.dcpStatus=a.EnumDCP_DetectStatus.VerifiedZip;d._sendStatusEvent();a.dcpStatus=a.EnumDCP_DetectStatus.UpdatingService;d._sendStatusEvent();setTimeout(function(){d._checkService(v,s)},5000)}else{var z=0;if("exception" in A){z=A.exception}if(z==-2373){d._funUpdateFailed(w,o,A,200);setTimeout(x,0);return true}setTimeout(r,0)}return true},l=function(z){var A=1;Dynamsoft.dcp.loadZip(z,A,function(B){var D,C;try{if(f.isString(B)){C=f.parse(B.replace(/\0/g,""));if("result" in C){D=C.result}}}catch(E){}if(f.isArray(D)&&D.length>2&&D[2]==true){setTimeout(function(){d._checkService(v,s)},5000);return}d._funUpdateFailed(w,o,B,200);setTimeout(x,0)},n)},n=function(A,B,z){var C=-1;if(z){C=z.status}if(C==0){setTimeout(function(){d._checkService(v,s)},5000)}else{d._funUpdateFailed(w,o,A,z.status);setTimeout(x,0)}return true},y=function(z){if(!(f.isArray(z)&&z.length>0)){return false}if(z[0]==true){setTimeout(function(){d._checkService(v,s)},5000)}else{d._funUpdateFailed(w,o,z,200);setTimeout(x,0)}return true},m=3,v=function(A){if(!(f.isArray(A)&&A.length>0&&A[0])){return false}var z=A[0].split(",");if(d._compareVersion(z,d.getServiceVersion())){a.bConnected=true;if(w){w()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,A[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(x,0);return true}return false},s=function(A,B){var z=1000;if(m<3){z=500}m--;if(m<0){d._funShowUpgradeDialogWhenUpdateFailed(w,o);setTimeout(x,0);return true}setTimeout(function(){d._checkService(v,s)},z);return true};if(p){p()}a.dcpStatus=a.EnumDCP_DetectStatus.VerifyingZip;d._sendStatusEvent();d._checkUpdateFile(t,r)},_getStatusString:function(p,o){var m,l,n="";if(p==a.EnumDCP_DetectStatus.Init){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.Connected){if(o){n=o}return"Getting manager version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.DownloadingZip){return"Downloading the update package"}else{if(p==a.EnumDCP_DetectStatus.DownloadedZip){return"Update package downloaded"}else{if(p==a.EnumDCP_DetectStatus.DownloadFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"Update package failed to download"+m+l}else{if(p==a.EnumDCP_DetectStatus.CheckingManagerVer){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.CheckingServiceVer){return"Getting service version"}else{if(p==a.EnumDCP_DetectStatus.NotInstalled){return"Dynamsoft Service Not Installed"}else{if(p==a.EnumDCP_DetectStatus.UpdateSkipped){return"Update skipped"}else{if(p==a.EnumDCP_DetectStatus.CheckedService){if(o){n=o}return"Getting service version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.VerifyingZip){return"Verifying the update package"}else{if(p==a.EnumDCP_DetectStatus.VerifiedZip){return"Update package verified"}else{if(p==a.EnumDCP_DetectStatus.UpdatingService){return"Updating the service"}else{if(p==a.EnumDCP_DetectStatus.UpdateSucceed){return"Update succeeded"}else{if(p==a.EnumDCP_DetectStatus.UpdateFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"The update failed"+m+l}}}}}}}}}}}}}}}return""},_sendStatusEvent:function(m,n){var l=m?true:false;if(f.isFunction(h.OnGetServiceUpdateStatus)){h.OnGetServiceUpdateStatus(l,a.dcpStatus,d._getStatusString(a.dcpStatus,n))}},_getErr:function(m){var n,l="";try{if(f.isString(m)){n=m.replace(/\0/g,"");n=f.parse(n)}else{if(m){n=m}}if("description" in n){l=n.description}}catch(o){}return l},_funShowUpgradeDialogWhenUpdateFailed:function(m,l){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}if(l){l()}d._sendStatusEvent(true);return true},_funUpdateFailed:function(m,l,n,q){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}var o,p;if(q==200){o="The update failed.";p=d._getStatusString(a.dcpStatus,d._getErr(n))}else{o="The update failed. The error code is "+q;p=o}if(l){l(true,o)}d._sendStatusEvent(true,p);return true},getDSPath:function(l,n){var p=Dynamsoft.managerEnv.resourcesPath,o=n;if(Dynamsoft.Lib.isString(p)&&p.length>0){if(p[p.length-1]!="/"){p=p+"/"}}else{p="Resources/"}if(!o){var m=Dynamsoft.Lib.getNavInfo();if(m.bMac){o=".pkg"}else{if(m.bLinux){o=".deb"}else{o=".msi"}}}return[p,"dist/DynamsoftServiceSetup",o].join("")},getLinuxHTML5DebPath:function(){return Dynamsoft.dcp.getDSPath(false,".deb")},getLinuxHTML5RpmPath:function(){return Dynamsoft.dcp.getDSPath(false,".rpm")}};j=i;g=i;c=i;f.domReady(function(){if(d.onReadys.length>0){f.each(d.onReadys,function(l){if(f.isFunction(l)){l()}})}});Dynamsoft.Ready=function(l){return f.asyncGetNavInfo().then(function(){try{l(f)}catch(m){f.log(m.stack||m,"error");throw m}})}})(Dynamsoft.Lib);(function(b){var f=b.Lib,e=f.doc;var d=20200521;if(f._evt_ver){if(f.isNumber(f._evt_ver)&&f._evt_ver>=d){return}}f._evt_ver=d;f.Events={registedClass:[],registedObjs:[]};var c=function(g){var i=g||window.event;var h=true;f.each(f.Events.registedObjs,function(j){f.each(f.Events.registedClass,function(k){if(j instanceof k){if(j.bFocus&&j.handlerKeyDown){h=j.handlerKeyDown(i);if(!h){return false}}}})});return h};f.ready(function(){f.addEventListener(e.documentElement,"keydown",c)});f.mix(f,{getWheelDelta:function(g){g=g||window.event;var j,i=g.wheelDelta,h=g.detail;if(i){j=i/120}if(h){j=-(h%3===0?h/3:h)}return j}});var a={LEFT:0,MIDDLE:1,RIGHT:2};f.EnumMouseButton=a;f.detectButton=function(g){var h=g||window.event;if(h.which==null){return(h.button<2)?a.LEFT:((h.button==4)?a.MIDDLE:a.RIGHT)}else{return(h.which<2)?a.LEFT:((h.which==2)?a.MIDDLE:a.RIGHT)}}})(Dynamsoft);(function(b){var a=20200521;if(b._ui_eventWhich_ver){if(b.isNumber(b._ui_eventWhich_ver)&&b._ui_eventWhich_ver>=a){return}}b._ui_eventWhich_ver=a;b.switchEvent=function(c){c=c||window.event;if(c.which==null){c.which=(c.button<2)?1:((c.button==4)?2:3)}else{c.which=(c.which<2)?1:((c.which==2)?2:3)}return c}})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._ui_style_ver){if(b.isNumber(b._ui_style_ver)&&b._ui_style_ver>=a){return}}b._ui_style_ver=a;b.currentStyle=function(f,g){var e=b.win,d=e.doc,c;if(f.currentStyle){return f.currentStyle[g]}else{if(e.getComputedStyle){c=g.replace(/([A-Z])/g,"-$1");c=g.toLowerCase();return d.defaultView.getComputedStyle(f,null)[g]}}return null}})(Dynamsoft.Lib);(function(f,h){var m=Array.prototype,i=!0,t=!1,l=f.Lib,b=f.navInfoSync,o=l.isString,v=l.each,s=m.slice,n=" ",p=(b.bIE&&b.IEMode<10),r=/[\n\t\r\.]/g;var d=20200521;if(l._ui_nodelist_ver){if(l.isNumber(l._ui_nodelist_ver)&&l._ui_nodelist_ver>=d){return}}l._ui_nodelist_ver=d;function w(z,A,y){var x=this;if(!(x instanceof w)){return new w(z,A,y)}if(!z){return x}if(typeof z==="string"){l.error("Err 4001.");return x}if(l.isArray(z)||z.isNodeList){Array.prototype.push.apply(x,l.makeArray(z));return x}x[0]=z;x.length=1;return x}w.prototype={isNodeList:true,length:0,item:function(y){var x=this;if(l.isNumber(y)){if(y>=x.length){return null}else{return new w(x[y])}}else{return new w(y)}},slice:function(){return new w(s.apply(this,arguments))},getDOMNodes:function(){return s.call(this)},each:function(z,y){var x=this;v(x,function(B,A){B=new w(B);return z.call(y||B,B,A,x)});return x},getEL:function(){var x=this;return(x.length>0)?x[0]:h},all:function(x){var z,y=this;if(y.length>0){z=l.all(x,y)}else{z=new w()}return z},one:function(x){var y=this,A=y.all(x),z=A.length?A.slice(0,1):A;return z}};function j(x){return o(x)&&(x=l.trim(x))&&x.length>=3&&l.startsWith(x,"<")&&l.endsWith(x,">")}function g(x){return(n+x+n).replace(r,n)}function u(x){return(x).replace(r,"")}function a(B){var y=B.innerHTML;if(!document.all){return y}var A=/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/ig;var z=/"'([^'"]*)'"/ig;y=y.replace(A,'$1="$2"').replace(z,'"$1"');var x=y.replace(/<(\/?)(\w+)([^>]*)>/g,function(D,C,F,E){if(C){return"</"+F.toLowerCase()+">"}return("<"+F.toLowerCase()+E+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(M,H,N,L,K,J,G,I){if(K){return'="'+K+'"'+J}return M})});return x.replace(/<\/?([^>]+)>/g,function(C){return C})}var q=function(B,D){var A=B.className,x,y=D.length,C,z,E;if(A){x=g(A);C=A;z=0;for(;z<y;z++){E=u(D[z]);if(x.indexOf(n+E+n)<0){C+=n+E}}C=l.trim(C)}else{C=D.join(" ")}B.className=C},k=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;while(A.indexOf(C)>=0){A=A.replace(C,n)}}B.className=l.trim(A)}},c=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;if(A.indexOf(C)<0){return t}}return i}return t};l.mix(w.prototype,{before:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.insertBefore(A,z.childNodes[0])})}},append:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.appendChild(A)})}},html:function(y){var x=this.getEL();if(x){if(l.isUndef(y)){return a(x)}x.innerHTML="";v(l.parseHTML(y),function(z){x.appendChild(z)})}},attr:function(z,x){var y=this.getEL();if(y){if(l.isUndef(x)){if(z==="readonly"){return y.readOnly?"readonly":""}if(z==="style"||!p){y=y.attributes[z];if(y){y=y.value}}else{y=y[z]}return y}if(z=="class"){y.className=x}else{y[z]=x}}},style:function(z,x){var y=this.getEL();if(y){return l.style(y,z,x)}},css:function(x){v(this,function(y){v(x,function(z,A){l.style(y,A,z)})})},addClass:function(x){var y=this.getEL();if(y){q(y,x.split(n))}},removeClass:function(x){var y=this.getEL();if(y){k(y,x.split(n))}},hasClass:function(x){var y=this.getEL();if(y){return c(y,x.split(n))}},parent:function(){var x=this.getEL();if(x){x=x.parentNode}return new w(x)},remove:function(){var x=this.getEL();if(x){x.parentNode.removeChild(x)}},offset:function(){var x=this.getEL();return l.DOM.getElDimensions(x,i)}});function e(x,z){var y=z;if(y&&y.isNodeList){y=y.getEL()}if(o(x)){if(j(x)){l.err("Err 4002.")}return new w(l.sizzle(x,y))}if(x.isNodeList){return x}return new w(x)}l.mix(l,{all:e,one:function(x,y){var z=e(x,y);return z.length?z.slice(0,1):z},isNodeList:function(x){return x instanceof w}});l.ready(function(){l.all=e})})(Dynamsoft);(function(e){var d=e.win,c=e.doc,b=isNaN;var a=20200521;if(e._dom_ver){if(e.isNumber(e._dom_ver)&&e._dom_ver>=a){return}}e._dom_ver=a;e.DOM={getOffset:function(p,j,l){p=p||d.event;var g=l||p.target,o=0,n=0,k=0,m=0,f,i,h=false;while(g&&!b(g.offsetLeft)&&!b(g.offsetTop)){i=g.scrollLeft;f=g.scrollTop;if(g.tagName==="BODY"){if(h){i=0;f=0}else{i=i|c.documentElement.scrollLeft;f=f|c.documentElement.scrollTop}}else{if(g.style.position==="fixed"){h=true}}o+=g.offsetLeft-i;n+=g.offsetTop-f;g=g.offsetParent}if(j){k=j.Left;m=j.Top}o=p.clientX-o-k;n=p.clientY-n-m;return{x:o,y:n}},getElDimensions:function(g,i){var f,h;if(!g){return{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}f=g.style.display;g.style.display="";h=i?{offsetTop:g.offsetTop,offsetLeft:g.offsetLeft,offsetWidth:g.offsetWidth,offsetHeight:g.offsetHeight}:{clientTop:g.clientTop,clientLeft:g.clientLeft,clientWidth:g.clientWidth?g.clientWidth:(parseInt(g.style.width)?parseInt(g.style.width):0),clientHeight:g.clientHeight?g.clientHeight:(parseInt(g.style.height)?parseInt(g.style.height):0)};g.style.display=f;return h}};e.getElDimensions=e.DOM.getElDimensions})(Dynamsoft.Lib);(function(g,h){var i=20200521,k=g.Lib,q;if(k._dialog_ver){if(k.isNumber(k._dialog_ver)&&k._dialog_ver>=i){return}}k._dialog_ver=i;q="data:image/gif;base64,R0lGODlhzAETAPf/AK/a/sfn/qnW/aLV/bPb/pnP/KnZ/9Ds/6jZ/8/s/6fY/57S/aTW/qHU/s3r/5XM/Mbn/sLk/bzh/Mrp/rje/K3b/6/d/6va/7nh/szq/8vq/8rp/8Xn/7Tf/8np/7Le/6rZ/6za/8Pm/6bX/sjp/7fe/J/T/bPe/6ra/7/k/5vQ/Lbg/sLm/8zr/7ri/rHd/77k/5rP/KjY/6zb/8Tm/rrg/Mjo/8bo/87r/8Tn/8bn/8Dl/6XW/s3q/8Ll/qPV/r/j/rfg/sXm/sfo/6LV/rbe/MLl/7Lc/bXf/s7s/67d/73j/5jO/Mrq/7zi/rrh/pfN/Ljh/rvh/MDj/ZbN/LTd/KjY/rnf/Kza/r7i/aLU/qHU/cjo/rvg/KXV/Ljf/bni/sDk/6fX/8np/sPl/qrY/cfo/sXn/qnY/sHj/bHb/pbM/KTV/b/j/arZ/rPf/6fX/rPe/aHS/LXe/M/r/8Hk/bjg/r7j/7Da/Z7S/KvZ/a7Z/b3j/pnO/Lvh/qvb/6fV/abW/p/S/LXg/sno/rTe/ZzR/L3i/cDk/rbf/rng/qHT/Lvi/qvZ/sHk/qvY/bvg/bzj/63a/qTU/LLd/p3R/ZzR/bDe/7Te/77j/rDZ/bXd/szq/sHl/6DU/rzh/a7b/prQ/b3i/sro/pjN/J/R/JXM+7bf/ZvQ/bbd/KjX/K3b/ZTM/K3d/6rY/rDb/pvP/JTL+53R/K3Y/aXX/rPc/bXd/K7b/7rg/cno/7jf/KfY/qna/6DT/aDU/aTV/sbm/rnf/Z7T/afX/aPU/KrX/JrQ/Lzj/sTm/7Hd/rbe/aTW/aXW/J3Q/KbV/KbW/bzi/6rX/ZrO/K/Z/anZ/r3h/b/l/7Lb/rfh/qjX/qvX/bvj/qbW/KzZ/bvi/73k/7ff/rHa/qLT/KDS/K7Y/bXe/bHa/cTl/anY/bbd+6LU/aXW/bfg/bjg/aTV/Lrf/LPd/p/T/MTl/q/b/anX/JXN/MPm/qnY/77i/q/Y/ZfO/LPc+7Tc/ZnO+63Y/AAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjAwMjY2NzMzQTQyMTFFODlFMUQ4ODdDOEJCNjY0RkEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjAwMjY2NzQzQTQyMTFFODlFMUQ4ODdDOEJCNjY0RkEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMDAyNjY3MTNBNDIxMUU4OUUxRDg4N0M4QkI2NjRGQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMDAyNjY3MjNBNDIxMUU4OUUxRDg4N0M4QkI2NjRGQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwABOcErJq1Qp0q9euXrn+DCvWJ9msYMmmDbv269izbbfGLdvzrIS5aN+q1cuWr1uzcP3KFUyXp128dwnn3cmECRQK6fYVK6CwQKUFmBdE2MyZc+bPnzuLBk1adGfSoE17Rp1Z9WbWrV3Dxuw6wmzNsmfXvr1bd27YvYH/Zh2c+HDUxZEfL708dfPQz2Or5t28kqVQBa5EppywQIPv4CGI/x8/Hrx58+TTn1+fnvz68+3Lvw8fH8J8+vHvf69vXz9//Q385199AAp4n4HzIfieguwROGB+D7ZXoIMHUpighQti2CCE55mwACoFUGALdzYxYOKJDEyg4oorouiiiSzG+KKLMbI4I4o1tngjjDlOsCOPOf6YYo9C9ujjj0YWSSSSS+6YJJNBQlmjklE62eSNT1pZJZZXzpgll1t62SUDRHiyQChQpEPiQQWMIIYCcMbpwJx00hnnnXfWqSeefOpZJ594+mknoHIK6gChhQqKKJyGHrpoo4sqAOmjhkY6KaKXEpopoJv2WSmlioLqp6WfYlqqpqdymqqnoSogxghkmv9gCROsrGlQAQrIgMCuvCKQwK/AAtvrsLsGayyxwxobLLK9Kisss8U6mwC00TpLra/SXivttNRuq2223YILrbfhWluust+aO664zJK7rrrtsousu/HCOy+4MigAawOVMPGArQUVIIMBBBdc8AEIJ5ywwQwTrPDDDTP8sMIRGzzxwhU7fPEBGWt8cccGbMxxxyKDXDLJG5ucMsofszyxyi1nfLLMK9Mcc8Uz41yzzjdHnLPPK8sgBgMNLFDAv5Uh4DLES1PcNMY2v/w0wjBLHTXTVzudNdQ8W9011l9rHTbXQPfc8M9n71y212uD3bbYb5OdttkSp4yAAkQbjXR3dFT57fbcbAP+d910W6y24HAjLjfhgTM+uOGFH3y444lTvjjkjWP+uOSRe5w55597vrnolWteOugPC5330QATVAAO3L6L7rnH0r6s7c/KXrvut/Oee72z+/5rusEDv7vxvSP/+732Eksv88VDf7z0yVO/vPPyYt98ssrSgcO+/e5t0yE9OGpqq6iir6r6rI4q6p7v/xn/oOe7Xz/898ufP/3p298//v/TXwD5tz7/FRCABxRgAgnYPgQ2UIEP7AEnJkAEWTGhHq1z3VQ2yMEOevCDIAyhCEdIwhIqpSYoTKEKV8jCFrrwhTCMoQxnSMMa2vCGOMyhDncYw4AAACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrOrxo8C1K4USsB6IHTuWyh6vXUssIst2DSC0XEsIYMtWDlyueOiSjXGXQhG9ZavcBQv4gdnBawG7HTy3sN27eQvzvfu3MBXBcAkDPpw5sd7FmRsDfgw3MuDJcCtvxoxWs17OrT3TBd1atF7SaE3rRY1W9WvWXl3ThR1c9lhWsUwVUFjgARQmTFRckUC9uoQugnwaO2K9ehdmPmNo/+tOXQq58F7IU6/yM496CTV+SlePXTt38t/DjydvHv179j65p158Ps2HX3Y9bUcfeD2Jp15/DaanHoA9CUgegT0Z2F19Cd63IYM8OcjfeRH+1957GPKkoXUc8qQgfiDeBB0UDyyX0E2hWFLJAiZkEcGPQEYwxTILFGmkkSZ8ESSQaehx5JPChLPkj3UQ8OSTZUz5Iy5XHjmAlkJ2iaSPUw4pJo9KTtnkmVFqWeWZC2SpJZdnfqnlFHD2eCeRYiap5Zpitjnlm2fKOSWdYtpZZp5kLmlmn2kuCWiXgi5JqJiGLolol4o6yuieZ/qpppNGVmJJKDcxhwqPDbT6gw8QxP8qKwRCoNHqrbj+4MessgqhBq7AEoEJr7KCAyyuWkhCbKyZHIvrCMtCQIMWzroKK7G1VtuArsv6qq2w0RpbbbLRNqsttMtOq+2r3dpaLbfY/lotuMuK6yy5y5pbLbrEqvvutbxm++6u8X47bL3a4kusvs7yy6u/zrKLrbsRExywvK2asAAqNtq0gCdEMCAyA3CcMcHJKE/ABRYjtyzyCECkjDIXhbjcMi12yHwyIX7YPDIPyeg8wRg++DwyNUJPYAYPRpNsss4rNw2z0DQ3jbPQPDcNtNBEN80A0kIv3XTJVLNs9NRQ12z01TpnbfTWOnfdNNg6i2002VCb7TPaMlf/vXbObff8dtBxFz130nb7jHffetvMd8p+M0CEJwt0fFABJoQ8ghgKdA4CCQ6ELroDTVjQ+emoG2DE6KJrEATqsBvgDeuhZ3AH7KjL0AHtDrSQA+6oV8C7AxsgALznoNNe+vEKqM6768zLzrvtzOvOu+/MKyA878Uz/znvyx/vPO3Qiz877dQfbz3t2DO/Pe3dH/+98qaLvzr5r5s//e3q787+7+4bXvyANz/WhQ9442Od68QwAsmZwHIGKUADGDACBcgAARhEwB88kIAOejABLbhEBkeIwQuI4IMedEAUSDhCFEQChR3EQQpYmEEDDAKGCUjCDWiYQSXgMAEaQAEP/zXIQRiGcIgmxKEKh+hCHMpwiDbEoQ6HiAAf4jCIQ9wgDo/IwyTCcIk8bCIMn8jDKMJwikO0IgyxyEMtGlGEXTzhF1cYxheOcYZlvOEZd5jGH7KRhm5EIRdp6EUUOsAOCmhgAyBYkAL8gAFikIEBJknJGWzgAJjM5AEccAJKenKSIUCGJjOJAwx80pMX4MMoMUmHHZySkiBYwSoPkIAhvJKSFpjlATJwgVsawJKz5KQvQznLUvoylbNspS9jOcta+tIAuZwlL30JzFUK85bEXKUxb4nMVSrzlsxcpTN9Gc1VTvOW1RzlNV+ZzVFu85XdHOU3XxnOUY7zluUc5Tlfmf9OTa7zlO3UJA7sIAYGLJI5ZKggAl5ZgUuusgedxKYIgvmEY6pSm64EpyzFaUty6nKfp2zoLCE6zIlas6LcvKg7M0rPjdqzo/j8aC9vKdKHRpSdJlUnSuGpUoGy9JT11OQ9X5lPTYL0kzUdJUklSlGLFvOnnwxqJod6yqJm8qieTKoml4rTWbbADgZlJEEKAIEz3EOSDHWoPm8K0Jz6c6enjKdPl+lSocKUqLrUQAh8qdWrsvWTIXBrJh0A10/KlZRQ9aRUMUnVT1oVk3rlq1qN+ldPBrapKX0qXZt516rmda80naxfS4pZnmpWo5x95mMPENnQSrOylLysPDdQjoOr3igYozADCIY4AxJc8QNZZMEWwcDEbSjRGkPkhR5RiEYeqhGFTbgAb327RuC2UbhGJG4YjftF5PJQuVLko3N/GN3p/ja4wy3ucZO73A82l4bP/WB5edjb8143vdtd73fb68H3sjC+HpwvDetbXfR6kA444EQA0CHWsU7lwRCOsIQnTOEKW/jCGM6wUmrC4Q57+MMgDrGIR0ziEpv4xChOsYpXzOIWu/jFJQ4IACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrKCYo8C1K4Uich6IHTuWyiSvXUvsIcv2QR+0XefEaDsWShm4FEoAoit2TSm8FKrwFUvqCF6wg83iVTvYLWC5g+0u3svXL2DBgwsfDstXMVzGg9/ihcxX8mfKdC3jxcxXM1zEnc9+Xhv68dzSd08PVg2XNV3XaGHT9YwW9ANWsUwVUFjgARQmTFSkkkC9uoQaXnyqUGW9upQjPw1J/+lOvYYg7ZrIX3/kMwYx9RKu/JSuHrt27uS/hx9P3jz6+uz15B588mk3XX/Z9bSdevr5JF595ymYXn8B8jSgegUqeGB39imIX3cN9vRgfxHypMKEHFa404XkZWjihtZ1aOKH1ukHHRQPLJfQTaFYUskCW0ASwZBERtCGHgskqaSSJqxSJJF1fLHklECm8eSQWbBBpZK9bHJlBFOosaWSw3wZwSFjJhnkl0em2eSXUaZZ5ZdZptnll2HKWeaXaKa55pVtjvnmlXH6aeWVdY5555V5prnnlX2O+eeTgW456JOFSnrok4luueiTjY756JORbjlpkZVSeWmRUVZiSSg3Mf+HygImNGArD0BAoOuuENDwiq3ABvsDJbzy6kSwyDYQiBDF6koGGskC+4sdzUIgRCLR2qpFI9VC4AMR2TaAa7W+hjtst8eGu2y1z4Y7bbXXhrttt9+GO26z5WZ7brXpZrtus+1m+26z8WY7b7X1ZntvsflGu2+z/Ub7b7EBRztwsQVHe3CzCUe7MK8NJ/twsX6YsAAqOtq0gCdEMOAyA1b4MMHMNE8QQBwv5+zyCKfUTPMYiOissxtm+DzzGVgI/fIuThg9ARdPKO0yD6A4PQENI0gNs8xG36w1z04DrTUDRDuNtNZMOw211lRbjbXWMTvttdRgGy221mUbfbbUaRv/vbbUbTv9ttRxd40z3T3bHTTeReudNN9N+x014FULnjXhXPs8t9J1+0yIKJ4skPJBBZjQ8ghiKKB6CDk44PrrDngQhOq0124ABrC/3gILtfeuQAVN5O46CS/4TvsFKQjvgAZLGK+6DB8o78AQIDivAOvKy2797crvbv3vwQtPvPXIK8+89dBLT7312AuvvfPcC++99cArP77z5Qt/vvPpK7++8+3L3fuMF7/czc959RNf8fCXPP01j3/R81/1ANg6980OfriDXQ84MQZRmGB0BilAAxgwAgXIAAEoREArOJCAFrowARqIQgpniEIUuOCFLkxCDmhIQwtoAIct9MAH/3iYwhnsAIgJaAEMiIhCA3QAiQkgwQWYqEIWAjGGVLQhEnVIRQT4EIlCpKIRkahEKjoRilKk4gqRiEUmahGIXKTiF4EYRiaOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGIr6xhXTAAScI4QcQFqQAPGCAGGRggFKa0gI6OIAqV3mADGDAlLAs5QVcwMpVJoADsYzlCzJQS1Vu4AS5NGUFdtDLAzggBcEsJQiQUMwD5KICyTQAKovpymjOspi3jKYBdlnMX0ZzmMU8ZjSX2cxnRnOavaxmMq/Zy2xGk5u99GYywdlLcSaTnMU0ZzLRWf9LdQaTnbV0ZzLhWUt5BpOetbRnMPHZS30Gk5+s9GcuAXoAOvRgAhDwJEEKAAQrKAABD01lOl+ZzBDQsp24jOYHNNDNDnwzDOFE5j2ZWUwbQHOfIu0nSYNpUmymNJkrbelLYzpOmvbSpufMaUR3msueolSbQY2nS+cJ03rKdKFGrSVScUpNpsbSqQH9aTCjWtCpHrSqCb1qLhmq1ZuGtKvRBGsCHIBRjQ6kABAgAwhI+VAOFFMDXoUlWFkp0LGytJceMGsuK4BWVip0rVll5Vb7+tfAmnKwthRrLsnKysQO1apFbeZkc2kBv/YSsHE9aVihethaepaqRJ2paN1KWtPJ1hK1JVUtYTUbS86u8rVnjS1WZ3tO27IStzw9qUXrypxgjMIeIZBjDpDYBAxQ8QJg2KIIuvgBD/DxDWJMARkbycRHAvEGFZAuda3LROxql7veBSIJwGtH8TKyi+bFIXrVC8TqXje7cNwuFbv73fCOF79Q3C8TLTDd/rKXiO4NMHwLXN8DUzG/L1QwERm83v9mkhOjCIZd7zqVEpv4xChOsYpXzOIWu/jFSqmJjGdM4xrb+MY4zrGOd8zjHvv4x0AOspCHTOQi7zggACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrPTlo8C1K4Uizh6IHTt2TTOvXqvEIMsWigC0XEs8Ysu2jy24FOaMozuWiji8FI7wHctkGl6wgx+YBaw2sVu8chM/sItXb2K/gAUnLnw47ODFeBsPfgw3cmLKcC0PxoxX82DOcBF/Pht67ei3peeevpt67+q/rSXDRiubL2ivJUrU6meqgMICD6AwYWKoloTr2CXUKOYzxqLs2XXl//GpYhb4613w/JR15byEK17Ic3MvocjP6u63d//uXjx58+elt15758EnH332+YTfefr15B19/vVUnnsC+sSeewZKOJ97Cfa0IHgN8vRgf+NJCCB4FfZ0YYHxaYjgfdYxyJ2D/GUnRRdzxOBcQjeFYkklC2zxRQREFhlBG3gsoOSSTD5jpJHVsMHklL5c8ySRaSgz5ZQ/HHJlBFmUseWSJnTzZQSfjLmkkF8iqaaSTn4Z5ZtVfpnlmwt0+WWYb5Z5Zppvsnmlm2/GeeWcatZ55Z1v6nkln2r6+SWgagr6JKFqGvokomMq+iSjajr6JKRjSnolpWNaaiSmY2oaQR1TZP9Rwo42obKACQ3kGogTEPTqKwQ0YJLrsMRq4cqvvzqCBrHM8pAIsr0C8wSzzGbjCLQQ+IAHtcP+oAa2EADxA7e68gptsOQ2YCy4yqbrLLbSptuAtdhqm6634Iqb7q7Yokvuuti2S+670MabLr3Q2ksuvtjqSy6/5wr777EBLzvwswVPe/C1CW+78LcNj/uwucj6yy3A0Z5zJK0HFbCAJ0QwIDMDbgAxwc04T2CGIjP3PLMkY+SMMw1Y+NyzFRgIfTMhmRjdcyM0KD3BGXE4LfMIhUg9ARlwWE2zzUrv7DUDQEtNtNdIS8302FBLTbXXWGvNtdc1Sy2212UrfbbVaSv/vbbXbSv9ttVxSz231XWHzTPeQetdNN9J+9004FELXjXhWRveNeJgC3231XmPEoAQEbBsUAEmxDyCGAq0XoERDsQuuwMbQNP67bgr8EEGs8t+wwu5435BJL3HnkEnweNuwQ3FO0DCCsm3bkAQzTuQAwrRK/B687Vnrzvvxf+e/fDNH+/98s0/n/301V+f/fbFd5/97s2LHz35xZufPfrFqx89+81zX/Tg1zv5RY9+4QPe/YiXP+Ttj3n9g97/qBdA7A0QdvGz3fwy0ANOTCAA5zBdQQrQAAaMQAEyQIAKEaAEFiTghTBMQAaWsMIarrADDoghDIfwARvWcAbf0OEL/3HAAh/W8BIkEGICPIANI6oQBVFQYgI4MAMnstCFQpyhFRGAQyXy0IpAVCIRt4hEJTLRilCUIhWt2EIlatGKXRTiF50YRiGO0YplFOIZnZhGJa7RiW3MIg3hmEM59pCOQbRjEfGYRD02kY9R9GMVAYlFHb7RiR3oAQ44MQpgiJAgBeABA8QgAwOY8pQvEMEBVsnKA/TgDqeM5SmR4IBWstIGHZBlLCsAA1uuMgEs0GUsT2ADXx5gAxgQpikvgAFjHkAHFVCmAVJpzFdK0wC0NCYupclLYwLzmsQ0JjKlyUxnQlOa1PSlNaWZTV9uU5nd9OU3pRlOX45TmeU05jmVmf9OW65Tme205TuFGU9bzlOZ9bTlPYWZT1/uU5j9bOU/hYkEDk4AAp8cSAGcgAYFIACiqlTnEq65gh5oM5fw7KU8g0nPYtozmcpEQTONyYFboDOk/hypNEt6Um6q1KAsRahLFQpTYcrUmTW9aTV1qkyeuhOlBP1pKw8qzIS2cqG6PCpNbcpPnEqUqcJ0qkChqsuCTjWoVR3qVYua1Zn6MqldXeo1B7GBi2ZUIAWAACJCUEqQGtMBYNXlCjJgzCGQVZZmbaURQCDNDqiVlViVJQqegFQLKNWXgCUpYX1pWJ86c7GNfewqIxvLyVb2srbM7E43a8vOpvSzjFWmY8XJVsnhUpamlo0rZgMry8EW9rC7lKpiYyvM2b5UmqbFLWpbqVphyuAEvbrrPwoQjFEgogJWtEAlY9iCY2xxBRpQ4g3eAEYYSHEHKLDiG25gxihY0QBgkKIIlJDd7cKwu98NrxDHW97zpteJ623ve+OrxPnWV4n4tSJ4xUteOppXiehVL3v16F4nwle+9HWidhHsXQXrV4f8dbB/JSxgCxNYiAbWsH1fmGAbykABI0iGMqQ73anY+MY4zrGOd8zjHvv4x0BWSk2GTOQiG/nISE6ykpfM5CY7+clQjrKUp0zlKluZyQEBACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrKCYo8C1K4Uich6IHTuWyiSvXUvsIcv2QR+0XefEaDsWShm4FEoAoit2TSm8FKrwFUvqCF6wg83iVTvYLWC5g+0u3svXL2DBgwsfDstXMVzGg9/ihcxX8mfKdC3jxcxXM1zEnc9+Xhv68dzSd08PVg2XNV3XaGHT9YwW9ANWsUwVUFjgARQmTFSkkkC9uoQaXnyqUGW9upQjPw1J/+lOvYYg7ZrIX3/kMwYx9RKu/JSuHrt27uS/hx9P3jz6+uz15B588mk3XX/Z9bSdevr5JF595ymYXn8B8jSgegUqeGB39imIX3cN9vRgfxHypMKEHFa404XkZWjihtZ1aOKH1ukHHRQPLJfQTaFYUskCW0ASwZBERtCGHgskqaSSJqxSJJF1fLHklECm8eSQWbBBpZK9bHJlBFOosaWSw3wZwSFjJhnkl0em2eSXUaZZ5ZdZptnll2HKWeaXaKa55pVtjvnmlXH6aeWVdY5555V5prnnlX2O+eeTgW456JOFSnrok4luueiTjY756JORbjlpkZVSeWmRUVZiSSg3Mf+HygImNGArD0BAoOuuENDwiq3ABvsDJbzy6kSwyDYQiBDF6koGGskC+4sdzUIgRCLR2qpFI9VC4AMR2TaAa7W+hjtst8eGu2y1z4Y7bbXXhrttt9+GO26z5WZ7brXpZrtus+1m+26z8WY7b7X1ZntvsflGu2+z/Ub7b7EBRztwsQVHe3CzCUe7MK8NJ/twsX6YsAAqOtq0gCdEMOAyA1b4MMHMNE8QQBwv5+zyCKfUTPMYiOissxtm+DzzGVgI/fIuThg9ARdPKO0yD6A4PQENI0gNs8xG36w1z04DrTUDRDuNtNZMOw211lRbjbXWMTvttdRgGy221mUbfbbUaRv/vbbUbTv9ttRxd40z3T3bHTTeReudNN9N+x014FULnjXhXPs8t9J1+0yIKJ4skPJBBZjQ8ghiKKB6CDk44PrrDngQhOq0124ABrC/3gILtfeuQAVN5O46CS/4TvsFKQjvgAZLGK+6DB8o78AQIDivAOvKy2797crvbv3vwQtPvPXIK8+89dBLT7312AuvvfPcC++99cArP77z5Qt/vvPpK7++8+3L3fuMF7/czc959RNf8fCXPP01j3/R81/1ANg6980OfriDXQ84MQZRmGB0BilAAxgwAgXIAAEoREArOJCAFrowARqIQgpniEIUuOCFLkxCDmhIQwtoAIct9MAH/3iYwhnsAIgJaAEMiIhCA3QAiQkgwQWYqEIWAjGGVLQhEnVIRQT4EIlCpKIRkahEKjoRilKk4gqRiEUmahGIXKTiF4EYRiaOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGIr6xhXTAAScI4QcQFqQAPGCAGGRggFKa0gI6OIAqV3mADGDAlLAs5QVcwMpVJoADsYzlCzJQS1Vu4AS5NGUFdtDLAzggBcEsJQiQUMwD5KICyTQAKovpymjOspi3jKYBdlnMX0ZzmMU8ZjSX2cxnRnOavaxmMq/Zy2xGk5u99GYywdlLcSaTnMU0ZzLRWf9LdQaTnbV0ZzLhWUt5BpOetbRnMPHZS30Gk5+s9GcuAXoAOvRgAhDwJEEKAAQrKAABD01lOl+ZzBDQsp24jOYHNNDNDnwzDOFE5j2ZWUwbQHOfIu0nSYNpUmymNJkrbelLYzpOmvbSpufMaUR3msueolSbQY2nS+cJ03rKdKFGrSVScUpNpsbSqQH9aTCjWtCpHrSqCb1qLhmq1ZuGtKvRBGsCHIBRjQ6kABAgAwhI+VAOFFMDXoUlWFkp0LGytJceMGsuK4BWVip0rVll5Vb7+tfAmnKwthRrLsnKysQO1apFbeZkc2kBv/YSsHE9aVihethaepaqRJ2paN1KWtPJ1hK1JVUtYTUbS86u8rVnjS1WZ3tO27IStzw9qUXrypxgjMIeIZBjDpDYBAxQ8QJg2KIIuvgBD/DxDWJMARkbycRHAvEGFZAuda3LROxql7veBSIJwGtH8TKyi+bFIXrVC8TqXje7cNwuFbv73fCOF79Q3C8TLTDd/rKXiO4NMHwLXN8DUzG/L1QwERm83v9mkhOjCIZd7zqVEpv4xChOsYpXzOIWu/jFSqmJjGdM4xrb+MY4zrGOd8zjHvv4x0AOspCHTOQi7zggACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrJjMosC1K4Ui0R6IHUtW2hGvXedMIsv2ASy0XauUajsWihy4XOFJoyuWFCC8JczxFdtnK1ywgx+Yxas28Vu8cgfbxUtB72C/gAUPLowX8eDFcBsPfgw3Mt/JeC3zxQw3cGLOh8N+Pht67WjKpumihquaLmu0rjcbRuuZ7+ISyNP5K6CwwAMoTJjIwiOhunUJNTT9zFPkuvV39H7G/+vivboudz5VeClfvUSe9NHYS7H1czr77Nu7lwcvnnz58+mtx5578MlHn0/2lYefT9yxx59P47EHYE/qsScBgRTGV9589VGnoHYM6ufdgz1F+B96FApYHoY8qaChdxwi6KF3C/bUoBRd1EABcwndFIollSygTjkRFGlkBFNsssCSTDbJBiRHGpnFPE1WucA6U0RZ5CfoWMmkCWVouSUbXi7pCx5iRoCLMGUKSaSWSba5wJNiTiknlmJy2SaYaX5CZplnprlmm0OKGWebdGppZ5t4aqlnmXzm+aeXgYo5aJmFwqkkolAqSiWjWTraJaRhStpmpVpe6mWmUR5a5pN1TP+RhQQ82oTKAiY0oCscikDg668QCKGIrsQW24AVQAD7KxlxGGusK/Io66sjADhLLBEASOsrEFZYqysPhWgLgSg/eNsAr9oKa+6xyUrL7LrQakutudiKy6254IpLrrnoSquuuchq+6658Uo7r7f1anuvt/lqu6+3/Sr7r7cBu9sswdEaXC3C2SrcLcPhOlwuxL36OyzA+JwTQRu1HlTAAp4QwcDMDLghygQ45zwBF07Q7DPNWPigc84QsPPzz6BAMDTONFByNM20wLM0zmRg8fTMVrQz9QSIwHF1zTcvzfPXDAQ9ddFkJz11019HvXXVX2e9dddf2zz12F+bvTTaX6v/vTTbV7s9NdxXyz013VfbLXbPeQu9t9F9K/2304FLPbjVhWt9uNeJhz003ldfAIQQEbRsUAEmyDyCGAq0XkEYDsQuuwMZpND67bgr8IIIs8vugQu5534CCb3HfgMSwd8uwwrFx57DC8m3fgEjzTtgxAXRK/B687Vnrzvvxf/u/fDNH5/98tU/n/301V+f/fbFd5/97s2Lnz35xZsfPfrNqx89+81zX/Tg1zv5RY9+4QPe/YiXP+Ttj3n9g97/qBdA7A0QdvGzXfLEMAJJpMx0BSlAAxgwAgXIAAEoRIASOpGAFrowAUnYQQpnmMIPcOCFLtQAI2hIw0F4AIctJMEK/3g4wygkAYgJ4MAHiIjCP0QCiQkQQQWYqEIWAjGGVESADZGowyz6EIlCzKIRkahEKjoRilKk4gqRiEUqbhGIXaTiF4EYRiqOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGGspAASPAwidASJACBIIBYpCBAUZJSgsY4QCoTOUBEhAGEJDylaM8gQ5UmcoMOAGWsFzBBmiJSg8EAZevxAAOeHkAHZwAmKMMwR2IeQAR3AKZBjAlMVnpSmTKkpi2hKYBdElMX2pTmMQ0JjSVyUxnQlOavKQmNK/Jy2xCk5u89CY0wclLcSKTnMQ0JzLRSf9LdVpzlu285Tt3Gc9fznOY9TzmPZeZz2fu85TpbCUuZSAGBriCkwMpAAbcoAAEAJOftEzBBdYJUFr2gBHaDAJBaSlPZLoAobS0JzDxyUsWWOCcEOWlSElKzJOmdKWqbCkwXxpOhc6UoTW96UOZudN/9hSl0FRpNw3qUpiqUqa4pCktbYpTpo7Uqbz0aVSBmkqh4pKoCR0nUreq1I/mNKRfJSUCFMCABmBUIAUYVwhE6VZmwiCuuOxASVXpAKgiMwgemKo2qRfODkDzAjBgphHaikuQqvKv0BQsMQub0sQWdLEOaOxjI0vMyXaVmJhFpmZ5ydmoepalVAUmY+vpWGTkQlaylIWlZVOZWmCulpatPexrgxpbXM42prUF5m1Lm9tX7haVvTUARet6138UIBijyEQkiagEFkBxCRcQJBIdAIYsroAESPRAIpnoggyQsZFE5AUMoNgJJajRu0gEr3iBSF7zoheI6s1ie99LRfnS175+xC8Q9cvEN+Kwv1Q8b3rXS8QBM7LA80Vife/73fA2eJAPLm+E/4vDAFPRwjjMY3wzDMQNJ7jDKLzkCBhggupadyo4zrGOd8zjHvv4x0AOspCVUpMiG/nISE6ykpfM5CY7+clQjrKUp0zlKlv5ylh2ckAAACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrPTlo8C1K4Uizh6IHTt2TTOvXqvEIMsWigC0XEs8Ysu2jy24FOaMozuWiji8FI7wHctkGl6wgx+YBaw2sVu8chM/sItXb2K/gAUnLnw47ODFeBsPfgw3cmLKcC0PxoxX82DOcBF/Pht67ei3peeevpt67+q/rSXDRiubL2ivJUrU6meqgMICD6AwYWKoloTr2CXUKOYzxqLs2XXl//GpYhb4613w/JR15byEK17Ic3MvocjP6u63d//uXjx58+elt15758EnH332+YTfefr15B19/vVUnnsC+sSeewZKOJ97Cfa0IHgN8vRgf+NJCCB4FfZ0YYHxaYjgfdYxyJ2D/GUnRRdzxOBcQjeFYkklC2zxRQREFhlBG3gsoOSSTD5jpJHVsMHklL5c8ySRaSgz5ZQ/HHJlBFmUseWSJnTzZQSfjLmkkF8iqaaSTn4Z5ZtVfpnlmwt0+WWYb5Z5Zppvsnmlm2/GeeWcatZ55Z1v6nkln2r6+SWgagr6JKFqGvokomMq+iSjajr6JKRjSnolpWNaaiSmY2oaQR1TZP9Rwo42obKACQ3kGogTEPTqKwQ0YJLrsMRq4cqvvzqCBrHM8pAIsr0C8wSzzGbjCLQQ+IAHtcP+oAa2EADxA7e68gptsOQ2YCy4yqbrLLbSptuAtdhqm6634Iqb7q7Yokvuuti2S+670MabLr3Q2ksuvtjqSy6/5wr777EBLzvwswVPe/C1CW+78LcNj/uwucj6yy3A0Z5zJK0HFbCAJ0QwIDMDbgAxwc04T2CGIjP3PLMkY+SMMw1Y+NyzFRgIfTMhmRjdcyM0KD3BGXE4LfMIhUg9ARlwWE2zzUrv7DUDQEtNtNdIS8302FBLTbXXWGvNtdc1Sy2212UrfbbVaSv/vbbXbSv9ttVxSz231XWHzTPeQetdNN9J+9004FELXjXhWRveNeJgC3231XmPEoAQEbBsUAEmxDyCGAq0XoERDsQuuwMbQNP67bgr8EEGs8t+wwu5435BJL3HnkEnweNuwQ3FO0DCCsm3bkAQzTuQAwrRK/B687Vnrzvvxf+e/fDNH+/98s0/n/301V+f/fbFd5/97s2LHz35xZufPfrFqx89+81zX/Tg1zv5RY9+4QPe/YiXP+Ttj3n9g97/qBdA7A0QdvGz3fwy0ANOTCAA5zBdQQrQAAaMQAEyQIAKEaAEFiTghTBMQAaWsMIarrADDoghDIfwARvWcAbf0OEL/3HAAh/W8BIkEGICPIANI6oQBVFQYgI4MAMnstCFQpyhFRGAQyXy0IpAVCIRt4hEJTLRilCUIhWt2EIlatGKXRTiF50YRiGO0YplFOIZnZhGJa7RiW3MIg3hmEM59pCOQbRjEfGYRD02kY9R9GMVAYlFHb7RiR3oAQ44MQpgiJAgBeABA8QgAwOY8pQvEMEBVsnKA/TgDqeM5SmR4IBWstIGHZBlLCsAA1uuMgEs0GUsT2ADXx5gAxgQpikvgAFjHkAHFVCmAVJpzFdK0wC0NCYupclLYwLzmsQ0JjKlyUxnQlOa1PSlNaWZTV9uU5nd9OU3pRlOX45TmeU05jmVmf9OW65Tme205TuFGU9bzlOZ9bTlPYWZT1/uU5j9bOU/hYkEDk4AAp8cSAGcgAYFIACiqlTnEq65gh5oM5fw7KU8g0nPYtozmcpEQTONyYFboDOk/hypNEt6Um6q1KAsRahLFQpTYcrUmTW9aTV1qkyeuhOlBP1pKw8qzIS2cqG6PCpNbcpPnEqUqcJ0qkChqsuCTjWoVR3qVYua1Zn6MqldXeo1B7GBi2ZUIAWAACJCUEqQGtMBYNXlCjJgzCGQVZZmbaURQCDNDqiVlViVJQqegFQLKNWXgCUpYX1pWJ86c7GNfewqIxvLyVb2srbM7E43a8vOpvSzjFWmY8XJVsnhUpamlo0rZgMry8EW9rC7lKpiYyvM2b5UmqbFLWpbqVphyuAEvbrrPwoQjFEgogJWtEAlY9iCY2xxBRpQ4g3eAEYYSHEHKLDiG25gxihY0QBgkKIIlJDd7cKwu98NrxDHW97zpteJ623ve+OrxPnWV4n4tSJ4xUteOppXiehVL3v16F4nwle+9HWidhHsXQXrV4f8dbB/JSxgCxNYiAbWsH1fmGAbykABI0iGMqQ73anY+MY4zrGOd8zjHvv4x0BWSk2GTOQiG/nISE6ykpfM5CY7+clQjrKUp0zlKluZyQEBACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrKCYo8C1K4Uich6IHTuWyiSvXUvsIcv2QR+0XefEaDsWShm4FEoAoit2TSm8FKrwFUvqCF6wg83iVTvYLWC5g+0u3svXL2DBgwsfDstXMVzGg9/ihcxX8mfKdC3jxcxXM1zEnc9+Xhv68dzSd08PVg2XNV3XaGHT9YwW9ANWsUwVUFjgARQmTFSkkkC9uoQaXnyqUGW9upQjPw1J/+lOvYYg7ZrIX3/kMwYx9RKu/JSuHrt27uS/hx9P3jz6+uz15B588mk3XX/Z9bSdevr5JF595ymYXn8B8jSgegUqeGB39imIX3cN9vRgfxHypMKEHFa404XkZWjihtZ1aOKH1ukHHRQPLJfQTaFYUskCW0ASwZBERtCGHgskqaSSJqxSJJF1fLHklECm8eSQWbBBpZK9bHJlBFOosaWSw3wZwSFjJhnkl0em2eSXUaZZ5ZdZptnll2HKWeaXaKa55pVtjvnmlXH6aeWVdY5555V5prnnlX2O+eeTgW456JOFSnrok4luueiTjY756JORbjlpkZVSeWmRUVZiSSg3Mf+HygImNGArD0BAoOuuENDwiq3ABvsDJbzy6kSwyDYQiBDF6koGGskC+4sdzUIgRCLR2qpFI9VC4AMR2TaAa7W+hjtst8eGu2y1z4Y7bbXXhrttt9+GO26z5WZ7brXpZrtus+1m+26z8WY7b7X1ZntvsflGu2+z/Ub7b7EBRztwsQVHe3CzCUe7MK8NJ/twsX6YsAAqOtq0gCdEMOAyA1b4MMHMNE8QQBwv5+zyCKfUTPMYiOissxtm+DzzGVgI/fIuThg9ARdPKO0yD6A4PQENI0gNs8xG36w1z04DrTUDRDuNtNZMOw211lRbjbXWMTvttdRgGy221mUbfbbUaRv/vbbUbTv9ttRxd40z3T3bHTTeReudNN9N+x014FULnjXhXPs8t9J1+0yIKJ4skPJBBZjQ8ghiKKB6CDk44PrrDngQhOq0124ABrC/3gILtfeuQAVN5O46CS/4TvsFKQjvgAZLGK+6DB8o78AQIDivAOvKy2797crvbv3vwQtPvPXIK8+89dBLT7312AuvvfPcC++99cArP77z5Qt/vvPpK7++8+3L3fuMF7/czc959RNf8fCXPP01j3/R81/1ANg6980OfriDXQ84MQZRmGB0BilAAxgwAgXIAAEoREArOJCAFrowARqIQgpniEIUuOCFLkxCDmhIQwtoAIct9MAH/3iYwhnsAIgJaAEMiIhCA3QAiQkgwQWYqEIWAjGGVLQhEnVIRQT4EIlCpKIRkahEKjoRilKk4gqRiEUmahGIXKTiF4EYRiaOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGIr6xhXTAAScI4QcQFqQAPGCAGGRggFKa0gI6OIAqV3mADGDAlLAs5QVcwMpVJoADsYzlCzJQS1Vu4AS5NGUFdtDLAzggBcEsJQiQUMwD5KICyTQAKovpymjOspi3jKYBdlnMX0ZzmMU8ZjSX2cxnRnOavaxmMq/Zy2xGk5u99GYywdlLcSaTnMU0ZzLRWf9LdQaTnbV0ZzLhWUt5BpOetbRnMPHZS30Gk5+s9GcuAXoAOvRgAhDwJEEKAAQrKAABD01lOl+ZzBDQsp24jOYHNNDNDnwzDOFE5j2ZWUwbQHOfIu0nSYNpUmymNJkrbelLYzpOmvbSpufMaUR3msueolSbQY2nS+cJ03rKdKFGrSVScUpNpsbSqQH9aTCjWtCpHrSqCb1qLhmq1ZuGtKvRBGsCHIBRjQ6kABAgAwhI+VAOFFMDXoUlWFkp0LGytJceMGsuK4BWVip0rVll5Vb7+tfAmnKwthRrLsnKysQO1apFbeZkc2kBv/YSsHE9aVihethaepaqRJ2paN1KWtPJ1hK1JVUtYTUbS86u8rVnjS1WZ3tO27IStzw9qUXrypxgjMIeIZBjDpDYBAxQ8QJg2KIIuvgBD/DxDWJMARkbycRHAvEGFZAuda3LROxql7veBSIJwGtH8TKyi+bFIXrVC8TqXje7cNwuFbv73fCOF79Q3C8TLTDd/rKXiO4NMHwLXN8DUzG/L1QwERm83v9mkhOjCIZd7zqVEpv4xChOsYpXzOIWu/jFSqmJjGdM4xrb+MY4zrGOd8zjHvv4x0AOspCHTOQi7zggACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrOrxo8C1K4USsB6IHTuWyh6vXUssIst2DSC0XEsIYMtWDlyueOiSjXGXQhG9ZavcBQv4gdnBawG7HTy3sN27eQvzvfu3MBXBcAkDPpw5sd7FmRsDfgw3MuDJcCtvxoxWs17OrT3TBd1atF7SaE3rRY1W9WvWXl3ThR1c9lhWsUwVUFjgARQmTFRckUC9uoQugnwaO2K9ehdmPmNo/+tOXQq58F7IU6/yM496CTV+SlePXTt38t/DjydvHv179j65p158Ps2HX3Y9bUcfeD2Jp15/DaanHoA9CUgegT0Z2F19Cd63IYM8OcjfeRH+1957GPKkoXUc8qQgfiDeBB0UDyyX0E2hWFLJAiZkEcGPQEYwxTILFGmkkSZ8ESSQaehx5JPChLPkj3UQ8OSTZUz5Iy5XHjmAlkJ2iaSPUw4pJo9KTtnkmVFqWeWZC2SpJZdnfqnlFHD2eCeRYiap5Zpitjnlm2fKOSWdYtpZZp5kLmlmn2kuCWiXgi5JqJiGLolol4o6yuieZ/qpppNGVmJJKDcxhwqPDbT6gw8QxP8qKwRCoNHqrbj+4MessgqhBq7AEoEJr7KCAyyuWkhCbKyZHIvrCMtCQIMWzroKK7G1VtuArsv6qq2w0RpbbbLRNqsttMtOq+2r3dpaLbfY/lotuMuK6yy5y5pbLbrEqvvutbxm++6u8X47bL3a4kusvs7yy6u/zrKLrbsRExywvK2asAAqNtq0gCdEMCAyA3CcMcHJKE/ABRYjtyzyCECkjDIXhbjcMi12yHwyIX7YPDIPyeg8wRg++DwyNUJPYAYPRpNsss4rNw2z0DQ3jbPQPDcNtNBEN80A0kIv3XTJVLNs9NRQ12z01TpnbfTWOnfdNNg6i2002VCb7TPaMlf/vXbObff8dtBxFz130nb7jHffetvMd8p+M0CEJwt0fFABJoQ8ghgKdA4CCQ6ELroDTVjQ+emoG2DE6KJrEATqsBvgDeuhZ3AH7KjL0AHtDrSQA+6oV8C7AxsgALznoNNe+vEKqM6768zLzrvtzOvOu+/MKyA878Uz/znvyx/vPO3Qiz877dQfbz3t2DO/Pe3dH/+98qaLvzr5r5s//e3q787+7+4bXvyANz/WhQ9442Od68QwAsmZwHIGKUADGDACBcgAARhEwB88kIAOejABLbhEBkeIwQuI4IMedEAUSDhCFEQChR3EQQpYmEEDDAKGCUjCDWiYQSXgMAEaQAEP/zXIQRiGcIgmxKEKh+hCHMpwiDbEoQ6HiAAf4jCIQ9wgDo/IwyTCcIk8bCIMn8jDKMJwikO0IgyxyEMtGlGEXTzhF1cYxheOcYZlvOEZd5jGH7KRhm5EIRdp6EUUOsAOCmhgAyBYkAL8gAFikIEBJknJGWzgAJjM5AEccAJKenKSIUCGJjOJAwx80pMX4MMoMUmHHZySkiBYwSoPkIAhvJKSFpjlATJwgVsawJKz5KQvQznLUvoylbNspS9jOcta+tIAuZwlL30JzFUK85bEXKUxb4nMVSrzlsxcpTN9Gc1VTvOW1RzlNV+ZzVFu85XdHOU3XxnOUY7zluUc5Tlfmf9OTa7zlO3UJA7sIAYGLJI5ZKggAl5ZgUuusgedxKYIgvmEY6pSm64EpyzFaUty6nKfp2zoLCE6zIlas6LcvKg7M0rPjdqzo/j8aC9vKdKHRpSdJlUnSuGpUoGy9JT11OQ9X5lPTYL0kzUdJUklSlGLFvOnnwxqJod6yqJm8qieTKoml4rTWbbADgZlJEEKAIEz3EOSDHWoPm8K0Jz6c6enjKdPl+lSocKUqLrUQAh8qdWrsvWTIXBrJh0A10/KlZRQ9aRUMUnVT1oVk3rlq1qN+ldPBrapKX0qXZt516rmda80naxfS4pZnmpWo5x95mMPENnQSrOylLysPDdQjoOr3igYozADCIY4AxJc8QNZZMEWwcDEbSjRGkPkhR5RiEYeqhGFTbgAb327RuC2UbhGJG4YjftF5PJQuVLko3N/GN3p/ja4wy3ucZO73A82l4bP/WB5edjb8143vdtd73fb68H3sjC+HpwvDetbXfR6kA444EQA0CHWsU7lwRCOsIQnTOEKW/jCGM6wUmrC4Q57+MMgDrGIR0ziEpv4xChOsYpXzOIWu/jFJQ4IACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrB6UoMC1K9cHYMOKfeC17NizZb2eHZu261qxbb++BRuXwly6ce+SzXu3rl6/ffnOBTxY8FvChw2vRbxYMVrHbCHDlRyW8eO2ekuUSOevgMICD6AwYVJAgunTp4GiXq16deqfrl/7jG26dWzbrnGzhk1bN2rfsnvSlgC8Nu/bx3Mn3z279/Lfz4PzHF6ceHTjPZl0qUHBc8KboSxV/1qwIIL58+fJq19PHr179vDdo4fPXn56+urtm8efXz//9v79p18E/5UXIH8DFpiggAfityCCDdL3oIMRxldhfReuN6GEGfZnn4IdVmJJFsR9hsoCJjSgYgMQtOiiiyvGGOOLNMpoI40v2igjjjDquCKPLfr4I5BCqggkBEWySGSRRybZJJNLCvmklFH6OKWVVep4pZZZ3tjljl/OGOaQPDo5pgkLtOGdTQt4QgQDcMI5wZx00hnnnXfWqSeefOpZJ594+mknoHEKOiehhRqKqJyKLmroBIsy8GikkzraKKKVYnopoZlyuimgnYL6aZ+jBlpqnqcmKiilpxLhyQJrHv9UgAlvjiCGArgq4MCuvPKa66+/9iossMQK2yuxwBrrK7K5Krsrs806Cy2uzjowra7STlvttdtqmy203YL7LbPhkjsusuWie26x6ybbbrDvRqsst+eKMQIDRJgQq0EFNMDACArIgMDAAydg8MEHE6ywwgg3vPDDDSP88MIRJzwxwRUbfDHGGW9ccMceZ5yAxwiITLLJIYO8Mcorq3wxyy+7PDHMM8sMsc0U48ywzhxXfLLLMihwbwP7FtQvA2LIYMDSTBtwwNNQQ9301EtHbTXVU1sdNdZNay0111V7fQDYYXtNttNiny322GSvrXbabcMNtttxm1231m/bPbfcXNP/vbfeffONtd+BAz443zKIwQDRn0HAgAIIFI733VdTvrXlX/89ueaVc36555lL3rnon5Me+uGGU0046pub/nTerbM+uuyl03666oLjnnrWciOgwOJFE1QABBMkDfrrmCN/PNvLwz677rFD/zzvu3edO/XRYz+99dUzvbr0tYN/u/bhkz8+99mjv73316tfvvtfJw78Z8GMwgnkLfucsv75R/wz/zEDYM0EeDMC5syAO0Ngz/y3Pwb2z2ENhOADJRZBCk7QYhfUWAUxGEAHdlCCH7RgCA8WtHvpqypTSaEKV8jCFrrwhTCMoQxnqJSa2PCGOMyhDnfIwx768IdADKIQDYdIxCIa8YhITOIPAwIAOw==";var f=k.win,y=k.doc,j=!0,p=!1,s,d,n=500000,a=1000;function b(z){var C,B,A;C=y.body.scrollTop||y.documentElement.scrollTop;if(f.innerHeight){A=f.innerHeight}else{A=y.documentElement.clientHeight}B=C+(A-z.offsetHeight)/2;z.style.top=B+"px";z._dlgInfo.isTopOverridden=j}function o(z,B){for(var A=0;A<z.length;++A){if(z[A]==B){return j}}return p}function t(C){for(var D=0;D<y.styleSheets.length;++D){var I=y.styleSheets[D],F=p,A=p,H,J;try{F=I.cssRules;A=y.querySelectorAll}catch(E){}if(F&&A){for(var B=0;B<F.length;++B){H=F[B];J=p;try{J=A(H.selectorText)}catch(E){}if(J&&o(J,C)){var z=H.style.getPropertyValue("top"),G=H.style.getPropertyValue("bottom");if((z&&z!="auto")||(G&&G!="auto")){return j}}}}}return p}function u(A){var z=p;if(f.getComputedStyle){z=f.getComputedStyle(A)}else{if(A.currentStyle){z=A.currentStyle}}if(z&&z.position!="absolute"){return p}if((A.style.top!="auto"&&A.style.top!="")||(A.style.bottom!="auto"&&A.style.bottom!="")){return p}return !t(A)}function w(A){var z=y.createEvent("MouseEvents");z.initMouseEvent(A.type,A.bubbles,A.cancelable,f,A.detail,A.screenX,A.screenY,A.clientX,A.clientY,A.ctrlKey,A.altKey,A.shiftKey,A.metaKey,A.button,A.relatedTarget);return z}function c(z){y.body.dispatchEvent(w(z))}function x(){s=y.createElement("div");d=s.style;d.position="fixed";d.display="block";d.left=d.top=d.margin=d.padding=0;d.backgroundColor="#000";d.filter="alpha(opacity=30)";d.opacity=d.MozOpacity=0.3;d.zIndex=n;d.width=d.height="100%";if(y.createEvent){k.addEventListener(s,"click",c)}}function l(){if(s===h){x()}if(!y.body.contains(s)){y.body.appendChild(s)}}function v(){if(s!==h){k.removeEventListener(s,"click",c);y.body.removeChild(s);s=h}}var e={pendingDialogStack:[],_updateStacking:function(C){var E=this,z,B,A,D;B=E.pendingDialogStack;if(B.length==0){v();return}if(C!=true){l()}D=n;k.each(B,function(F){D++;F._dlgInfo.mask.style.zIndex=D++;F.style.zIndex=D})},pushDialog:function(A,C){var D=this,z,B=A.getBoundingClientRect();if(D.pendingDialogStack.length>=a){k.error("Too many modal dialogs.");return}z=y.createElement("div");z.className="dynamsoft-backdrop";if(C==true){z.style.left=(B.x|B.left)+"px";z.style.top=(B.y|B.top)+"px";z.style.width=B.width+"px";z.style.height=B.height+"px"}if(y.createEvent){k.addEventListener(z,"click",function(E){if(A.dispatchEvent){var F=w(E);A.dispatchEvent(F)}})}A.parentNode.insertBefore(z,A.nextSibling);A._dlgInfo.mask=z;D.pendingDialogStack.push(A);D._updateStacking(C)},removeDialog:function(B){var C=this,A,z;A=k.isArray(C.pendingDialogStack)?k.indexOf(B,C.pendingDialogStack):-1;if(A==-1){return}C.pendingDialogStack.splice(A,1);z=B._dlgInfo.mask;z.parentNode.removeChild(z);B._dlgInfo.mask=null;C._updateStacking()}};function m(B,A){var C=this,z;if(C.open){k.error("showDialog called on open dialog.");return}C.open=j;C.removeAttribute("closed");C.setAttribute("open","open");if(u(C)){b(C)}if(B){C._dlgInfo.modal=j;e.pushDialog(C,A)}}function r(z){var A=this;if(!A.open){k.error("closeDialog called on closed dialog.")}A.open=p;A.removeAttribute("open");A.setAttribute("closed","closed");if(typeof z!="undefined"){A.returnValue=z}if(A._dlgInfo.isTopOverridden){A.style.top="auto"}if(A._dlgInfo.modal){e.removeDialog(A)}return A.returnValue}k.dialog={setup:function(z,A){z.show=m.bind(z,p,A);z.showModal=m.bind(z,j,A);z.close=r.bind(z);z._dlgInfo={}}};k.mask={container:false,bConfined:false,dlgMask:false,preOnresize:false,preOnscroll:false};k.showMask=function(){if(k.mask.dlgMask){return}var B=k.mask.bConfined,A=k.mask.container,z;if(A){z=A.getBoundingClientRect();var G=A.firstChild;while(G){if(k.isFunction(G.getBoundingClientRect)){z=G.getBoundingClientRect();break}G=G.nextSibling}}var E=document.createElement("div"),D="460px",C="300px";E.className="dynamsoft-dialog-wrap";if(!window.onresize){k.mask.preOnresize=false}else{k.mask.preOnresize=window.onresize}if(!window.onscroll){k.mask.preOnscroll=false}else{k.mask.preOnscroll=window.onscroll}if(B&&z){window.onresize=window.onscroll=function(){z=A.getBoundingClientRect();var H=A.firstChild;while(H){if(k.isFunction(H.getBoundingClientRect)){z=H.getBoundingClientRect();break}H=H.nextSibling}E.style.left=(z.x|z.left)+"px";E.style.top=(z.y|z.top)+"px";E.style.width=z.width+"px";if(z.width<470){D=(z.width-10)+"px"}E.style.height=C=z.height+"px";if(k.mask.dlgMask){k.mask.dlgMask.close();k.mask.dlgMask.showModal()}};window.onscroll()}var F=['<div style="margin:0 auto; width:',D,";line-height:",C,'"><img src="',q,'" style="margin:0 auto; width:',D,'" /></div>'].join("");E.innerHTML=F;document.body.appendChild(E);k.mask.dlgMask=E;k.dialog.setup(k.mask.dlgMask,B);k.mask.dlgMask.showModal()};k.hideMask=function(){var z=k.mask.dlgMask;if(z){z.close();document.body.removeChild(z);k.mask.dlgMask=false}if(!k.mask.preOnresize){window.onresize=null}else{window.onresize=k.mask.preOnresize}k.mask.preOnresize=false;if(!k.mask.preOnscroll){window.onscroll=null}else{window.onscroll=k.mask.preOnscroll}k.mask.preOnscroll=false}})(Dynamsoft);(function(t){var w=20200521;if(t._sizzle_ver){if(t.isNumber(t._sizzle_ver)&&t._sizzle_ver>=w){return}}t._sizzle_ver=w;var aq,g=RegExp,ae,ab,d,k,u,al,Y,U,s,v,o,p,ao=!0,f,M,b,S,am="dws_"+1*new Date(),an=window.document,K=0,y=0,ai,aj,G,z,A=function(i,e){if(i===e){s=true}return 0},I=[],V=I.pop,aa=I.push,ak=I.push,F=I.slice,H=function(ax,aw){var av=0,e=ax.length;for(;av<e;av++){if(ax[av]===aw){return av}}return -1},ag="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Q="[\\x20\\t\\r\\n\\f]",C="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ad=["\\[",Q,"*(",C,")(?:",Q,"*([*^$|!~]?=)",Q,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(",C,"))|)",Q,"*\\]"].join(""),E=new g(Q+"+","g"),ah=new g(["^",Q,"+|((?:^|[^\\\\])(?:\\\\.)*)",Q,"+$"].join(""),"g"),m=new g(["^",Q,"*,",Q,"*"].join("")),X=new g(["^",Q,"*([>+~]|",Q,")",Q,"*"].join("")),h=new g("^"+C+"$"),W={ID:new g("^#("+C+")"),CLASS:new g("^\\.("+C+")"),TAG:new g("^("+C+"|[*])"),ATTR:new g("^"+ad),needsContext:new g(["^",Q,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(",Q,"*((?:-\\d)?\\d*)",Q,"*\\)|)(?=[^-]|$)"].join(""),"i")},L=/^[^{]+\{\s*\[native \w/,ac=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,c=/^(?:#([\w-]+)|(\w+)|\.([\w-]+)) .*$/,R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,l=function(i,e){if(e){if(i==="\0"){return"\uFFFD"}return i.slice(0,-1)+"\\"+i.charCodeAt(i.length-1).toString(16)+" "}return"\\"+i},q=function(){v()};function au(){var i=[];function e(av,aw){if(i.push(av+" ")>ab.cacheLength){delete e[i.shift()]}return(e[av+" "]=aw)}return e}function a(ax){var aw=0,av=ax.length,e="";for(;aw<av;aw++){e+=ax[aw].value}return e}ai=au();aj=au();G=au();z=au();try{ak.apply((I=F.call(an.childNodes)),an.childNodes);var r=I[an.childNodes.length].nodeType}catch(at){ak={apply:I.length?function(i,e){aa.apply(i,F.call(e))}:function(ax,aw){var e=ax.length,av=0;while((ax[e++]=aw[av++])){}ax.length=e-1}}}function af(aB,av,aE,aH){var az,aF,ay,e,aG,ax,aC,aw=av&&av.ownerDocument,aD=av?av.nodeType:9;aE=aE||[];if(typeof aB!=="string"||!aB||aD!==1&&aD!==9&&aD!==11){return aE}if(!aH){if((av?av.ownerDocument||av:an)!==o){v(av)}av=av||o;if(aD!==11){if((aG=ac.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){aE.push(ay);return aE}}else{return aE}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){aE.push(ay);return aE}}}else{if(aG[2]){ak.apply(aE,av.getElementsByTagName(aB));return aE}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));return aE}}}}else{if((aG=c.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){av=ay}}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){av=ay}}az="#"+az+" "}else{if((az=aG[2])){ak.apply(aE,av.getElementsByTagName(aB));av=aE[0];az=az+" "}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));av=aE[0];az=az+" "}}}aB=aB.replace(az,"")}}}if(ae.qsa&&!z[aB+" "]&&(!f||!f.test(aB))){if(aD!==1){aw=av;aC=aB}else{if(av.nodeName.toLowerCase()!=="object"){if((e=av.getAttribute("id"))){e=e.replace(R,l)}else{av.setAttribute("id",(e=am))}ax=k(aB);aF=ax.length;while(aF--){ax[aF]="#"+e+" "+a(ax[aF])}aC=ax.join(",");aw=av}}if(aC){try{ak.apply(aE,aw.querySelectorAll(aC));return aE}catch(aA){z(aB,!0)}finally{if(e===am){av.removeAttribute("id")}}}}}return al(aB.replace(ah,"$1"),av,aE,aH)}function ap(e){e[am]=true;return e}function Z(av){var i=o.createElement("fieldset");try{return !!av(i)}catch(aw){return false}finally{if(i.parentNode){i.parentNode.removeChild(i)}i=null}}function B(e,i){}function j(i,e){var aw=e&&i,av=aw&&i.nodeType===1&&e.nodeType===1&&i.sourceIndex-e.sourceIndex;if(av){return av}if(aw){while((aw=aw.nextSibling)){if(aw===e){return -1}}}return i?1:-1}function T(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}ae=af.support={};v=af.setDocument=function(av){var e,i,aw=av?av.ownerDocument||av:an;if(aw===o||aw.nodeType!==9||!aw.documentElement){return o}o=aw;p=o.documentElement;if(an!==o&&(i=o.defaultView)&&i.top!==i){if(i.addEventListener){i.addEventListener("unload",q,false)}else{if(i.attachEvent){i.attachEvent("onunload",q)}}}ae.attributes=Z(function(ax){ax.className="i";return !ax.getAttribute("className")});ae.getElementsByTagName=Z(function(ax){ax.appendChild(o.createComment(""));return !ax.getElementsByTagName("*").length});ae.getElementsByClassName=L.test(o.getElementsByClassName);ae.getById=Z(function(ax){p.appendChild(ax).id=am;return !o.getElementsByName||!o.getElementsByName(am).length});if(ae.getById){ab.filter.ID=function(ay){var ax=ay;return function(az){return az.getAttribute("id")===ax}}}else{ab.filter.ID=function(ay){var ax=new g(["^",ay,"$"].join(""),"g");return function(aA){var az=typeof aA.getAttributeNode!=="undefined"&&aA.getAttributeNode("id");return az&&ax.test(az.value)}}}ab.find.TAG=ae.getElementsByTagName?function(ax,ay){if(typeof ay.getElementsByTagName!=="undefined"){return ay.getElementsByTagName(ax)}else{if(ae.qsa){return ay.querySelectorAll(ax)}}}:function(ax,aB){var aC,aA=[],az=0,ay=aB.getElementsByTagName(ax);if(ax==="*"){while((aC=ay[az++])){if(aC.nodeType===1){aA.push(aC)}}return aA}return ay};ab.find.CLASS=ae.getElementsByClassName&&function(ay,ax){if(typeof ax.getElementsByClassName!=="undefined"){return ax.getElementsByClassName(ay)}};M=[];f=[];if((ae.qsa=L.test(o.querySelectorAll))){Z(function(ax){p.appendChild(ax).innerHTML="<a id='"+am+"'></a><select id='"+am+"-\r\\' msallowcapture=''><option selected=''></option></select>";if(ax.querySelectorAll("[msallowcapture^='']").length){f.push("[*^$]="+Q+"*(?:''|\"\")")}if(!ax.querySelectorAll("[selected]").length){f.push("\\["+Q+"*(?:value|"+ag+")")}if(!ax.querySelectorAll("[id~="+am+"-]").length){f.push("~=")}if(!ax.querySelectorAll(":checked").length){f.push(":checked")}if(!ax.querySelectorAll("a#"+am+"+*").length){f.push(".#.+[+~]")}});Z(function(ay){ay.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ax=o.createElement("input");ax.setAttribute("type","hidden");ay.appendChild(ax).setAttribute("name","D");if(ay.querySelectorAll("[name=d]").length){f.push("name"+Q+"*[*^$|!~]?=")}if(ay.querySelectorAll(":enabled").length!==2){f.push(":enabled",":disabled")}p.appendChild(ay).disabled=true;if(ay.querySelectorAll(":disabled").length!==2){f.push(":enabled",":disabled")}ay.querySelectorAll("*,:x");f.push(",.*:")})}if((ae.matchesSelector=L.test((b=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)))){Z(function(ax){ae.disconnectedMatch=b.call(ax,"*");b.call(ax,"[s!='']:x")})}f=f.length&&new g(f.join("|"));M=M.length&&new g(M.join("|"));e=L.test(p.compareDocumentPosition);S=e||L.test(p.contains)?function(ay,ax){var aA=ay.nodeType===9?ay.documentElement:ay,az=ax&&ax.parentNode;return ay===az||!!(az&&az.nodeType===1&&(aA.contains?aA.contains(az):ay.compareDocumentPosition&&ay.compareDocumentPosition(az)&16))}:function(ay,ax){if(ax){while((ax=ax.parentNode)){if(ax===ay){return true}}}return false};A=e?function(ay,ax){if(ay===ax){s=true;return 0}var az=!ay.compareDocumentPosition-!ax.compareDocumentPosition;if(az){return az}az=(ay.ownerDocument||ay)===(ax.ownerDocument||ax)?ay.compareDocumentPosition(ax):1;if(az&1||(!ae.sortDetached&&ax.compareDocumentPosition(ay)===az)){if(ay===o||ay.ownerDocument===an&&S(an,ay)){return -1}if(ax===o||ax.ownerDocument===an&&S(an,ax)){return 1}return U?(H(U,ay)-H(U,ax)):0}return az&4?-1:1}:function(ay,ax){if(ay===ax){s=true;return 0}var aE,aB=0,aD=ay.parentNode,aA=ax.parentNode,az=[ay],aC=[ax];if(!aD||!aA){return ay===o?-1:ax===o?1:aD?-1:aA?1:U?(H(U,ay)-H(U,ax)):0}else{if(aD===aA){return j(ay,ax)}}aE=ay;while((aE=aE.parentNode)){az.unshift(aE)}aE=ax;while((aE=aE.parentNode)){aC.unshift(aE)}while(az[aB]===aC[aB]){aB++}return aB?j(az[aB],aC[aB]):az[aB]===an?-1:aC[aB]===an?1:0};return o};af.matches=function(i,e){return af(i,null,null,e)};af.matchesSelector=function(av,ax){if((av.ownerDocument||av)!==o){v(av)}if(ae.matchesSelector&&!z[ax+" "]&&(!M||!M.test(ax))&&(!f||!f.test(ax))){try{var i=b.call(av,ax);if(i||ae.disconnectedMatch||av.document&&av.document.nodeType!==11){return i}}catch(aw){z(ax,!0)}}return af(ax,o,null,[av]).length>0};af.contains=function(e,i){if((e.ownerDocument||e)!==o){v(e)}return S(e,i)};af.escape=function(e){return(e+"").replace(R,l)};af.error=function(e){throw new Error("Syntax error: "+e)};af.uniqueSort=function(aw){var ax,ay=[],e=0,av=0;s=!ae.detectDuplicates;U=!ae.sortStable&&aw.slice(0);aw.sort(A);if(s){while((ax=aw[av++])){if(ax===aw[av]){e=ay.push(av)}}while(e--){aw.splice(ay[e],1)}}U=null;return aw};d=af.getText=function(ay){var ax,av="",aw=0,e=ay.nodeType;if(!e){while((ax=ay[aw++])){av+=d(ax)}}else{if(e===1||e===9||e===11){if(typeof ay.textContent==="string"){return ay.textContent}else{for(ay=ay.firstChild;ay;ay=ay.nextSibling){av+=d(ay)}}}else{if(e===3||e===4){return ay.nodeValue}}}return av};ab=af.selectors={cacheLength:50,match:W,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[3]=(e[3]||e[4]||e[5]||"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)}},filter:{TAG:function(i){var e=i.toLowerCase();return i==="*"?function(){return true}:function(av){return av.nodeName&&av.nodeName.toLowerCase()===e}},CLASS:function(e){var i=ai[e+" "];return i||(i=new g("(^|"+Q+")"+e+"("+Q+"|$)"))&&ai(e,function(av){return i.test(typeof av.className==="string"&&av.className||typeof av.getAttribute!=="undefined"&&av.getAttribute("class")||"")})},ATTR:function(av,i,e){return function(ax){var aw=af.attr(ax,av);if(aw==null){return i==="!="}if(!i){return true}aw+="";return i==="="?aw===e:i==="!="?aw!==e:i==="^="?e&&aw.indexOf(e)===0:i==="*="?e&&aw.indexOf(e)>-1:i==="$="?e&&aw.slice(-e.length)===e:i==="~="?(" "+aw.replace(E," ")+" ").indexOf(e)>-1:i==="|="?aw===e||aw.slice(0,e.length+1)===e+"-":false}}}};function D(){}D.prototype=ab.filters=ab.pseudos;ab.setFilters=new D();k=af.tokenize=function(ax,aC){var i,ay,aA=[],aB,az,av,e,aw=aj[ax+" "];if(aw){return aC?0:aw.slice(0)}az=ax;av=[];e=ab.preFilter;while(az){if(!i||(ay=m.exec(az))){if(ay){az=az.slice(ay[0].length)||az}av.push((aA=[]))}i=false;if((ay=X.exec(az))){i=ay.shift();aA.push({value:i,type:ay[0].replace(ah," ")});az=az.slice(i.length)}for(aB in ab.filter){if((ay=W[aB].exec(az))&&(!e[aB]||(ay=e[aB](ay)))){i=ay.shift();aA.push({value:i,type:aB,matches:ay});az=az.slice(i.length)}}if(!i){break}}return aC?az.length:az?af.error(ax):aj(ax,av).slice(0)};function O(az,ax,ay){var e=ax.dir,aw=ax.next,av=aw||e,aA=ay&&av==="parentNode",i=y++;return ax.first?function(aD,aC,aB){while((aD=aD[e])){if(aD.nodeType===1||aA){return az(aD,aC,aB)}}return false}:function(aG,aE,aD){var aH,aB,aF,aC=[K,i];if(aD){while((aG=aG[e])){if(aG.nodeType===1||aA){if(az(aG,aE,aD)){return true}}}}else{while((aG=aG[e])){if(aG.nodeType===1||aA){aF=aG[am]||(aG[am]={});aB=aF[aG.uniqueID]||(aF[aG.uniqueID]={});if(aw&&aw===aG.nodeName.toLowerCase()){aG=aG[e]||aG}else{if((aH=aB[av])&&aH[0]===K&&aH[1]===i){return(aC[2]=aH[2])}else{aB[av]=aC;if((aC[2]=az(aG,aE,aD))){return true}}}}}}return false}}function x(e){return e.length>1?function(ay,ax,av){var aw=e.length;while(aw--){if(!e[aw](ay,ax,av)){return false}}return true}:e[0]}function J(av,ay,ax){var aw=0,e=ay.length;for(;aw<e;aw++){af(av,ay[aw],ax)}return ax}function N(e,av,aw,ax,aA){var ay,aD=[],az=0,aB=e.length,aC=av!=null;for(;az<aB;az++){if((ay=e[az])){if(!aw||aw(ay,ax,aA)){aD.push(ay);if(aC){av.push(az)}}}}return aD}function ar(av,i,ax,aw,ay,e){if(aw&&!aw[am]){aw=ar(aw)}if(ay&&!ay[am]){ay=ar(ay,e)}return ap(function(aJ,aG,aB,aI){var aL,aH,aD,aC=[],aK=[],aA=aG.length,az=aJ||J(i||"*",aB.nodeType?[aB]:aB,[]),aE=av&&(aJ||!i)?N(az,aC,av,aB,aI):az,aF=ax?ay||(aJ?av:aA||aw)?[]:aG:aE;if(ax){ax(aE,aF,aB,aI)}if(aw){aL=N(aF,aK);aw(aL,[],aB,aI);aH=aL.length;while(aH--){if((aD=aL[aH])){aF[aK[aH]]=!(aE[aK[aH]]=aD)}}}if(aJ){if(ay||av){if(ay){aL=[];aH=aF.length;while(aH--){if((aD=aF[aH])){aL.push((aE[aH]=aD))}}ay(null,(aF=[]),aL,aI)}aH=aF.length;while(aH--){if((aD=aF[aH])&&(aL=ay?H(aJ,aD):aC[aH])>-1){aJ[aL]=!(aG[aL]=aD)}}}}else{aF=N(aF===aG?aF.splice(aA,aF.length):aF);if(ay){ay(null,aG,aF,aI)}else{ak.apply(aG,aF)}}})}function P(aA){var av,ay,aw,az=aA.length,aD=ab.relative[aA[0].type],aE=aD||ab.relative[" "],ax=aD?1:0,aB=O(function(i){return i===av},aE,true),aC=O(function(i){return H(av,i)>-1},aE,true),e=[function(aH,aG,aF){var i=(!aD&&(aF||aG!==Y))||((av=aG).nodeType?aB(aH,aG,aF):aC(aH,aG,aF));av=null;return i}];for(;ax<az;ax++){if((ay=ab.relative[aA[ax].type])){e=[O(x(e),ay)]}else{ay=ab.filter[aA[ax].type].apply(null,aA[ax].matches);if(ay[am]){aw=++ax;for(;aw<az;aw++){if(ab.relative[aA[aw].type]){break}}return ar(ax>1&&x(e),ax>1&&a(aA.slice(0,ax-1).concat({value:aA[ax-2].type===" "?"*":""})).replace(ah,"$1"),ay,ax<aw&&P(aA.slice(ax,aw)),aw<az&&P((aA=aA.slice(aw))),aw<az&&a(aA))}e.push(ay)}}return x(e)}function n(aw,av){var e=av.length>0,ax=aw.length>0,i=function(aH,aB,aG,aF,aK){var aC,aD,aI,aM=0,aE="0",ay=aH&&[],aN=[],aL=Y,aA=aH||ax&&ab.find.TAG("*",aK),az=(K+=aL==null?1:Math.random()||0.1),aJ=aA.length;if(aK){Y=aB===o||aB||aK}for(;aE!==aJ&&(aC=aA[aE])!=null;aE++){if(ax&&aC){aD=0;if(!aB&&aC.ownerDocument!==o){v(aC);aG=!ao}while((aI=aw[aD++])){if(aI(aC,aB||o,aG)){aF.push(aC);break}}if(aK){K=az}}if(e){if((aC=!aI&&aC)){aM--}if(aH){ay.push(aC)}}}aM+=aE;if(e&&aE!==aM){aD=0;while((aI=av[aD++])){aI(ay,aN,aB,aG)}if(aH){if(aM>0){while(aE--){if(!(ay[aE]||aN[aE])){aN[aE]=V.call(aF)}}}aN=N(aN)}ak.apply(aF,aN);if(aK&&!aH&&aN.length>0&&(aM+av.length)>1){af.uniqueSort(aF)}}if(aK){K=az;Y=aL}return ay};return e?ap(i):i}u=af.compile=function(e,aw){var ax,av=[],az=[],ay=G[e+" "];if(!ay){if(!aw){aw=k(e)}ax=aw.length;while(ax--){ay=P(aw[ax]);if(ay[am]){av.push(ay)}else{az.push(ay)}}ay=G(e,n(az,av));ay.selector=e}return ay};al=af.select=function(e,az,ay,av){var ax,aA=typeof e==="function"&&e,aw=!av&&k((e=aA.selector||e));ay=ay||[];(aA||u(e,aw))(av,az,!ao,ay,!az||az);return ay};ae.sortStable=am.split("").sort(A).join("")===am;ae.detectDuplicates=!!s;v();ae.sortDetached=Z(function(e){return e.compareDocumentPosition(o.createElement("fieldset"))&1});if(!Z(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){B("type|href|height|width",function(i,e){return i.getAttribute(e,e.toLowerCase()==="type"?1:2)})}if(!ae.attributes||!Z(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){B("value",function(i,e){if(i.nodeName.toLowerCase()==="input"){return i.defaultValue}})}if(!Z(function(e){return e.getAttribute("disabled")==null})){B(ag,function(i,e){var av;return i[e]===true?e.toLowerCase():(av=i.getAttributeNode(e))&&av.specified?av.value:null})}t.support=ae;t.sizzle=af})(Dynamsoft.Lib);(function(j){var aa=Array.prototype,t=aa.slice,f=j.doc,U=j.each,d=f.documentElement;var y=20200521;if(j._ui_nodelistExt_ver){if(j.isNumber(j._ui_nodelistExt_ver)&&j._ui_nodelistExt_ver>=y){return}}j._ui_nodelistExt_ver=y;var M=j.support,Q=j.sizzle;var b,S,T,I,r,k,K=f.createElement("div"),Y=f.createElement("div");function p(){var ad,ac;d.appendChild(K);Y.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";b=T=k=false;S=r=true;if(window.getComputedStyle){ac=window.getComputedStyle(Y);b=(ac||{}).top!=="1%";k=(ac||{}).marginLeft==="2px";T=(ac||{width:"4px"}).width==="4px";Y.style.marginRight="50%";S=(ac||{marginRight:"4px"}).marginRight==="4px";ad=Y.appendChild(document.createElement("div"));ad.style.cssText=Y.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";ad.style.marginRight=ad.style.width="0";Y.style.width="1px";r=!parseFloat((window.getComputedStyle(ad)||{}).marginRight);Y.removeChild(ad)}Y.style.display="none";I=Y.getClientRects().length===0;if(I){Y.style.display="";Y.innerHTML="<table><tr><td></td><td>t</td></tr></table>";Y.childNodes[0].style.borderCollapse="separate";ad=Y.getElementsByTagName("td");ad[0].style.cssText="margin:0;border:0;padding:0;display:none";I=ad[0].offsetHeight===0;if(I){ad[0].style.display="";ad[1].style.display="none";I=ad[0].offsetHeight===0}}d.removeChild(K)}if(!Y.style){return}Y.style.cssText="float:left;opacity:.5";M.opacity=Y.style.opacity==="0.5";M.cssFloat=!!Y.style.cssFloat;Y.style.backgroundClip="content-box";Y.cloneNode(true).style.backgroundClip="";M.clearCloneStyle=Y.style.backgroundClip==="content-box";K=document.createElement("div");K.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";Y.innerHTML="";K.appendChild(Y);M.boxSizing=Y.style.boxSizing===""||Y.style.MozBoxSizing===""||Y.style.WebkitBoxSizing==="";j.mix(M,{reliableHiddenOffsets:function(){if(b==null){p()}return I},boxSizingReliable:function(){if(b==null){p()}return T},pixelMarginRight:function(){if(b==null){p()}return S},pixelPosition:function(){if(b==null){p()}return b},reliableMarginRight:function(){if(b==null){p()}return r},reliableMarginLeft:function(){if(b==null){p()}return k}});var i,g,x=(/^margin/),q=/^(top|right|bottom|left)$/,Z=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source,J=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),o=new RegExp("^("+Z+")(.*)$","i");if(window.getComputedStyle){i=function(ae){var ad,ac;ad=j.isFunction(ae.getEL)?ae.getEL():ae;ac=ad.ownerDocument.defaultView;if(!ac||!ac.opener){ac=window}return ac.getComputedStyle(ad)};g=function(aj,ad,ai){var ag,af,ah,ac,ae=aj.style;ai=ai||i(aj);ac=ai?ai.getPropertyValue(ad)||ai[ad]:undefined;if((ac===""||ac===undefined)&&!Q.contains(aj.ownerDocument,aj)){ac=j.style(aj,ad)}if(ai){if(!M.pixelMarginRight()&&J.test(ac)&&x.test(ad)){ag=ae.width;af=ae.minWidth;ah=ae.maxWidth;ae.minWidth=ae.maxWidth=ae.width=ac;ac=ai.width;ae.width=ag;ae.minWidth=af;ae.maxWidth=ah}}return ac===undefined?ac:ac+""}}else{if(d.currentStyle){i=function(ac){return ac.currentStyle};g=function(ai,af,ah){var aj,ad,ac,ae,ag=ai.style;ah=ah||i(ai);ae=ah?ah[af]:undefined;if(ae==null&&ag&&ag[af]){ae=ag[af]}if(J.test(ae)&&!q.test(af)){aj=ag.left;ad=ai.runtimeStyle;ac=ad&&ad.left;if(ac){ad.left=ai.currentStyle.left}ag.left=af==="fontSize"?"1em":ae;ae=ag.pixelLeft+"px";ag.left=aj;if(ac){ad.left=ac}}return ae===undefined?ae:ae+""||"auto"}}}var e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,n=(/<([\w:-]+)/),c=(/^\s+/),u=/<|&#?\w+;/,E=/<tbody/i,G=/^-ms-/,z=/-([\da-z])/gi,A=/^(none|table(?!-c[ea]).+)/,O=(/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/),L={position:"absolute",visibility:"hidden",display:"block"},D={letterSpacing:"0",fontWeight:"400"},a=["Top","Right","Bottom","Left"];var R={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:M.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};var C,X=["Webkit","O","Moz","ms"],H="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";var V=document.createElement("div");if(!V.style){return}C=V.style;M.cssFloat=!!V.style.cssFloat;var B=function(ac,ad){return ad.toUpperCase()};var v={type:j.type,cssHooks:{},htmlPrefilter:function(ac){return ac.replace(e,"<$1></$2>")},nodeName:function(ad,ac){return ad.nodeName&&ad.nodeName.toLowerCase()===ac.toLowerCase()},merge:function(ag,ae){var ac=+ae.length,ad=0,af=ag.length;while(ad<ac){ag[af++]=ae[ad++]}if(ac!==ac){while(ae[ad]!==undefined){ag[af++]=ae[ad++]}}ag.length=af;return ag},camelCase:function(ac){return ac.replace(G,"ms-").replace(z,B)},cssProps:{"float":M.cssFloat?"cssFloat":"styleFloat"},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true}};function N(ac){if(ac in C){return ac}var ae=ac.charAt(0).toUpperCase()+ac.slice(1),ad=X.length;while(ad--){ac=X[ad]+ae;if(ac in C){return ac}}}function m(af,ac){var ad,ag,ae=0,ah=typeof af.getElementsByTagName!=="undefined"?af.getElementsByTagName(ac||"*"):typeof af.querySelectorAll!=="undefined"?af.querySelectorAll(ac||"*"):undefined;if(!ah){ah=[];for(ad=af.childNodes||af;(ag=ad[ae])!=null;ae++){if(!ac||v.nodeName(ag,ac)){ah.push(ag)}else{v.merge(ah,m(ag,ac))}}}return ac===undefined||ac&&v.nodeName(af,ac)?v.merge([af],ah):ah}function W(ae){var ad=H.split("|"),ac=ae.createDocumentFragment();if(ac.createElement){while(ad.length){ac.createElement(ad.pop())}}return ac}function h(ad,af){var ak,ah,aj,am,ao,an,ae,ai=ad.length,ag=W(af),ac=[],al=0;for(;al<ai;al++){ah=ad[al];if(ah||ah===0){if(j.type(ah)==="object"){v.merge(ac,ah.nodeType?[ah]:ah)}else{if(!u.test(ah)){ac.push(af.createTextNode(ah))}else{am=am||ag.appendChild(af.createElement("div"));ao=(n.exec(ah)||["",""])[1].toLowerCase();ae=R[ao]||R._default;am.innerHTML=ae[1]+v.htmlPrefilter(ah)+ae[2];ak=ae[0];while(ak--){am=am.lastChild}if(!M.leadingWhitespace&&c.test(ah)){ac.push(af.createTextNode(c.exec(ah)[0]))}if(!M.tbody){ah=ao==="table"&&!E.test(ah)?am.firstChild:ae[1]==="<table>"&&!E.test(ah)?am:0;ak=ah&&ah.childNodes.length;while(ak--){if(v.nodeName((an=ah.childNodes[ak]),"tbody")&&!an.childNodes.length){ah.removeChild(an)}}}v.merge(ac,am.childNodes);am.textContent="";while(am.firstChild){am.removeChild(am.firstChild)}am=ag.lastChild}}}}if(am){ag.removeChild(am)}al=0;while((ah=ac[al++])){if(ah.tagName!=="SCRIPT"){aj=Q.contains(ah.ownerDocument,ah);ag.appendChild(ah)}}am=null;return ag}var F=function(ah,ag,ai,af){var ae,ad,ac={};U(ag,function(ak,aj){ac[aj]=ah.style[aj];ah.style[aj]=ag[aj]});ae=ai.apply(ah,af||[]);U(ag,function(ak,aj){ah.style[aj]=ac[aj]});return ae};function s(ag,ad,ac,ai,af){var ae=ac===(ai?"border":"content")?4:ad==="width"?1:0,ah=0;for(;ae<4;ae+=2){if(ac==="margin"){ah+=j.css(ag,ac+a[ae],true,af)}if(ai){if(ac==="content"){ah-=j.css(ag,"padding"+a[ae],true,af)}if(ac!=="margin"){ah-=j.css(ag,"border"+a[ae]+"Width",true,af)}}else{ah+=j.css(ag,"padding"+a[ae],true,af);if(ac!=="padding"){ah+=j.css(ag,"border"+a[ae]+"Width",true,af)}}}return ah}function ab(ag,ad,ac){var af=true,ah=ad==="width"?ag.offsetWidth:ag.offsetHeight,ae=i(ag),ai=M.boxSizing&&j.css(ag,"boxSizing",false,ae)==="border-box";if(ah<=0||ah==null){ah=g(ag,ad,ae);if(ah<0||ah==null){ah=ag.style[ad]}if(J.test(ah)){return ah}af=ai&&(M.boxSizingReliable()||ah===ag.style[ad]);ah=parseFloat(ah)||0}return(ah+s(ag,ad,ac||(ai?"border":"content"),af,ae))}function P(ac){var ad=new RegExp("^(?:([+-])=|)("+Z+")([a-z%]*)$","i");return ad.exec(ac)}function w(ac,ae,af){var ad=o.exec(ae);return ad?Math.max(0,ad[1]-(af||0))+(ad[2]||"px"):ae}function l(ad,ac,ag,al){var am,ae=1,ai=20,ak=al?function(){return al.cur()}:function(){return j.css(ad,ac,"")},ah=ak(),aj=ag&&ag[3]||(v.cssNumber[ac]?"":"px"),af=(v.cssNumber[ac]||aj!=="px"&&+ah)&&P(j.css(ad,ac));if(af&&af[3]!==aj){aj=aj||af[3];ag=ag||[];af=+ah||1;do{ae=ae||".5";af=af/ae;j.style(ad,ac,af+aj)}while(ae!==(ae=ak()/ah)&&ae!==1&&--ai)}if(ag){af=+af||+ah||0;am=ag[1]?af+(ag[1]+1)*ag[2]:+ag[2];if(al){al.unit=aj;al.start=af;al.end=am}}return am}U(["height","width"],function(ac,ad){v.cssHooks[ac]={get:function(ag,af,ae){if(af){return A.test(j.css(ag,"display"))&&ag.offsetWidth===0?F(ag,L,function(){return ab(ag,ac,ae)}):ab(ag,ac,ae)}},set:function(ag,ah,ae){var af=ae&&i(ag);return w(ag,ah,ae?s(ag,ac,ae,M.boxSizing&&j.css(ag,"boxSizing",false,af)==="border-box",af):0)}}});j.style=function(ae,ad,aj,af){if(!ae||ae.nodeType===3||ae.nodeType===8||!ae.style){return}var ah,ai,ak,ag=v.camelCase(ad),ac=ae.style;ad=v.cssProps[ag]||(v.cssProps[ag]=N(ag)||ag);ak=v.cssHooks[ad]||v.cssHooks[ag];if(aj!==undefined){ai=typeof aj;if(ai==="string"&&(ah=P(aj))&&ah[1]){aj=l(ae,ad,ah);ai="number"}if(aj==null||aj!==aj){return}if(ai==="number"){aj+=ah&&ah[3]||(v.cssNumber[ag]?"":"px")}if(!M.clearCloneStyle&&aj===""&&ad.indexOf("background")===0){ac[ad]="inherit"}if(!ak||!("set" in ak)||(aj=ak.set(ae,aj,af))!==undefined){ac[ad]=aj}}else{if(ak&&"get" in ak&&(ah=ak.get(ae,false,af))!==undefined){return ah}return ac[ad]+""}};j.css=function(ai,ag,ad,ah){var af,aj,ac,ae=v.camelCase(ag);ag=v.cssProps[ae]||(v.cssProps[ae]=N(ae)||ae);ac=v.cssHooks[ag]||v.cssHooks[ae];if(ac&&"get" in ac){aj=ac.get(ai,true,ad)}if(aj===undefined){aj=g(ai,ag,ah)}if(aj==="normal"&&ag in D){aj=D[ag]}if(ad===""||ad){af=parseFloat(aj);return ad===true||isFinite(af)?af||0:aj}return aj};j.parseHTML=function(ae,ad){if(!ae||typeof ae!=="string"){return[]}if(typeof ad==="boolean"){ad=false}ad=ad||document;var ac=O.exec(ae);if(ac){return[ad.createElement(ac[1])]}ac=h([ae],ad);return v.merge([],ac.childNodes)}})(Dynamsoft.Lib);Dynamsoft.Ready(function(h,i){var b="",f="[bio]: ",c=!0,g=!1;var e=h.win,j=e&&e.FormData;function a(l){var k=this;k.__attrs={};h.mix(k.__attrs,{action:b,data:{},bChunkedSendData:c,blockSize:0,ajaxConfig:{value:{},type:"post",processData:g,cache:g,dataType:"text",async:c,contentType:g,retry:0,headers:{"X-Requested-With":g}},ajax:b,formData:b,CORS:g,bOnlyEmptyIsOK:c});h.mix(k.__attrs,l);k._setWithCredentials()}h.mix(a,{event:{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"},status:{SUCCESS:"success",ERROR:"error"}});h.mix(a.prototype,h.obj.customEvent);h.mix(a.prototype,{get:function(l){var k=this;if(l in k.__attrs){return k.__attrs[l]}return""},set:function(m,l){var k=this;if(m in k.__attrs){k.__attrs[m]=l}},_setWithCredentials:function(){var k=this;var m=k.get("CORS");var l=k.get("ajaxConfig");h.mix(l,{xhrFields:{withCredentials:false}});return l},uploadToServer:function(n){var k=this,m=k.get("blockSize"),l;if(m>0&&n&&n.size>0){l=k._chunkedUpload(n)}else{l=k._fullUpload(n)}return l},uploadFilesToServer:function(k){return this._fullUploadFiles(k)},_fullUpload:function(o){var k=this,m=k.get("ajaxConfig"),l=true,n=function(s){var r="";if(s){if(s&&h.isArray(s)&&s.length>1){r=s[0]}else{if(h.isString(s)){r=s}}}r=k._processResponse(r);k.fire(a.event.SUCCESS,r)},q=function(v,s,u){var r,t;l=false;if(v&&h.isArray(v)&&v.length>2){r=v[1];t=v[2]}else{r=s;t=u}k._errorHandler(t,r,o)};k._setFormData();if(o&&o.size>0){k._addFileData(o);if(!h.isString(o.name)||o.name==""){k.name=o.fileName}else{k.name=o.name}}h.mix(m,{data:k.get("formData"),url:k.get("action"),beforeSend:function(t,s,r){t.upload.addEventListener("progress",function(u){k.fire(a.event.PROGRESS,{loaded:u.loaded,total:u.total,name:k.name})},false)}});h.mix(m,{method:"POST",onSuccess:n,onError:q});var p=h.ajax(m);k.set("formData",null);if(m.async){k.set("ajax",p);return true}else{k.set("ajax",false);return l}},_fullUploadFiles:function(q){var k=this,m=k.get("ajaxConfig"),l=true,o=[],n=function(t){var s="";o=[];if(t){if(t&&h.isArray(t)&&t.length>1){s=t[0]}else{if(h.isString(t)){s=t}}}s=k._processResponse(s);k.fire(a.event.SUCCESS,s)},r=function(w,t,v){var s,u;l=false;o=[];if(w&&h.isArray(w)&&w.length>2){s=w[1];u=w[2]}else{s=t;u=v}k._errorHandler(u,s,q)};k._setFormData();h.each(q,function(s){if(s&&s.size>0){k._addFileData(s);if(!h.isString(s.name)||s.name==""){o.push(s.fileName)}else{o.push(s.name)}}else{o.push("")}});h.mix(m,{data:k.get("formData"),url:k.get("action"),beforeSend:function(u,t,s){u.upload.addEventListener("progress",function(v){k.fire(a.event.PROGRESS,{loaded:v.loaded,total:v.total,name:""})},false)}});h.mix(m,{method:"POST",onSuccess:n,onError:r});k.name="";var p=h.ajax(m);k.set("formData",null);if(m.async){k.set("ajax",p);return true}else{k.set("ajax",false);return l}},_chunkedUpload:function(m){var s=this;var q=s.get("ajaxConfig"),o=function(v){var u="";if(v){if(v&&h.isArray(v)&&v.length>1){u=v[0]}else{if(h.isString(v)){u=v}}}u=s._processResponse(u);s.fire(a.event.SUCCESS,u)},l=function(y,v,x){var u,w;if(y&&h.isArray(y)&&y.length>2){u=y[1];w=y[2]}else{u=v;w=x}s._errorHandler(w,u,m)};h.mix(q,{url:s.get("action")});var t=m.size;var n=0;var k=s.get("blockSize")||t;var p=m.slice||m.webkitSlice||m.mozSlice;function r(w){var v=p.call(m,n,n+k,m.type);var x=v.size,u=m.name;s._setContentRange(n,x,t);s._setFormData();if(w){s.set("data",[])}if(!h.isString(u)||u==""){u=m.fileName}v.name=u;s.name=u;s._addFileData(v);h.mix(q,{data:s.get("formData")});h.mix(q,{method:"POST",onSuccess:function(A,y,z){n=s._getUploadedBytes(z)||n+x;s.fire(a.event.PROGRESS,{loaded:n,total:t,name:s.name});if(n<t){r(false)}else{o(A)}},onError:l});h.ajax(q);s.set("formData",null)}r(true)},abort:function(){var k=this,l=k.get("ajax");if(!h.isObject(l)){h.log(f+"abort(), the value of io invalid!");return k}l.abort();k.set("ajax",false);return k},_setFormData:function(){var k=this,l=k.get("data"),n;if(!j){h.log(f+"the browser does not support ajax.");return}if(l instanceof j){k.set("formData",l)}else{n=new j();try{h.each(l,function(p,o){n.append(o,p)});k.set("formData",n)}catch(m){h.log(f+"something error when reset FormData.")}}},setRequestHeader:function(m,n){var k=this;var l=k.get("ajaxConfig");l.headers[m]=n;k.set("ajaxConfig",l);return n},_addFileData:function(m){if(!h.isObject(m)){h.log(f+"_addFileData(), file parameter invalid!");return false}var l=this;var n=l.get("formData");var o=m.name,k=m.remoteFilename;if(!k){k="RemoteFile"}n.append(k,m,o);l.set("formData",n);return n},_errorHandler:function(p,o,q){var n=this,m=a.status.ERROR,l=n.name,k={status:m,msg:o,response:false,name:l};if(p){k.httpStatus=p.status;k.response=p.responseText}n.fire(m,k)},_getUploadedBytes:function(m){var k=m.getResponseHeader("Range");var n=k&&k.split("-");var l=n&&n.length>1&&parseInt(n[1],10);return l&&l+1},_setContentRange:function(n,q,m){var p="bytes "+n+"-"+(n+q-1)+"/"+m;var k=this;var l=k.get("ajaxConfig");var o=l.headers;o["Content-Range"]=p;return p},_processResponse:function(p){var t=this,v,l,k,r=false,m=t.name,n=a.status.SUCCESS,s=a.event.ERROR;h.log("Response from server: "+p);if(!t.get("bOnlyEmptyIsOK")){return{status:n,msg:false,json:false,response:p,name:m}}if(h.isUndefined(p)||p===""){v={status:n,msg:false,json:false,response:"",name:m}}else{if(h.isString(p)){try{for(l=0;l<p.length;l++){if(l>10){break}k=p[l];if(k=="{"){r=true;break}else{if(k==" "||k=="\r"||k=="\n"||k=="\t"){}else{break}}}if(r){var q=h.parse(p);if(q.status==1){v={status:n,msg:false,json:q,response:p,name:m}}else{v={status:s,msg:false,json:q,response:p,name:m}}}}catch(o){r=false;h.log(o)}if(!r){var u=String(p);u=u.replace(/( |\t|\r|\n)/g,"");if(u==""){v={status:n,msg:false,json:false,response:p,name:m}}else{v={status:s,msg:false,json:false,response:p,name:m}}}}else{v={status:n,msg:false,json:false,response:"",name:m}}}return v}});function d(l){var k=this;k.__attrs={};h.mix(k.__attrs,{action:b,retry:0,timeout:0,CORS:g,async:c,dataType:"text",fileStatus:b,uploadType:g,data:{},bOnlyEmptyIsOK:c});h.mix(k.__attrs,l);k._init()}h.mix(d,{event:{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}});h.mix(d.prototype,h.obj.customEvent);h.mix(d.prototype,{get:function(l){var k=this;if(l in k.__attrs){return k.__attrs[l]}return""},set:function(m,l){var k=this;if(m in k.__attrs){k.__attrs[m]=l}},upload:function(k){var l=this,o=l.get("uploadType");if(k){if(h.isArray(k)){var n=k;return o.uploadFilesToServer(n)}else{if(h.isObject(k)){var m=k;if(!m.size){m.size=0}else{if(!m.id){m.id=h.guid("file-")}if(m.size){m.textSize=l._convertByteSize(m.size)}}return o.uploadToServer(m)}}}return o.uploadToServer(k)},abort:function(){var k=this,l=k.get("uploadType");l.abort();return true},setRequestHeader:function(l,n){var k=this,m=k.get("uploadType");m.setRequestHeader(l,n)},_convertByteSize:function(k){var l=-1;do{k=k/1024;l++}while(k>99&&l<4);return Math.max(k,0.1).toFixed(1)+["KB","MB","GB","TB"][l]},_init:function(){var k=this;var n={action:k.get("action"),data:k.get("data"),CORS:k.get("CORS"),bOnlyEmptyIsOK:k.get("bOnlyEmptyIsOK")},m=new a(n);var l=m.get("ajaxConfig");if(l){l.dataType=k.get("dataType");l.async=k.get("async");l.retry=k.get("retry")}m.on(a.event.SUCCESS,k._uploadCompleteHandler,k);m.on(a.event.ERROR,k._uploadCompleteHandler,k);m.on(a.event.PROGRESS,k._uploadProgressHandler,k);k.set("uploadType",m);return m},_uploadProgressHandler:function(l){var k=this;k.fire(d.event.PROGRESS,l)},_uploadCompleteHandler:function(o){var l=this,k=o.status,n=o.msg,m=l.get("file");h.mix(o,{file:m});if(k==="success"){l.fire(d.event.SUCCESS,o)}else{if(n===false){}else{if(n==="abort"){h.mix(o,{canceled:true})}else{if(n==="timeout"){h.mix(o,{timeout:true})}}}l.fire(d.event.ERROR,o)}}});h.BIO=d});(function(a){a.DWT={defaultEnv:{JSVersion:"16,1,0,0728",ServerVersionInfo:"16,1,0,0728",ServerLinuxVersionInfo:"16,1,0,0728",ServerMacVersionInfo:"16,1,0,0728",ActiveXVersion:"16,1,0,0728",PluginVersion:"11,1,0,0",PdfVersion:"11.0.0.0428",ProductName:"Dynamic Web TWAIN 16.1",Containers:[],ContainerMap:{},DynamicContainers:[],DynamicDWTMap:{},Trial:false,ResourcesPath:"Resources",Debug:false,IfUpdateService:false,AutoLoad:true,OnWebTwainReady:false,UseDefaultInstallUI:true,OnWebTwainNotFound:false,OnWebTwainOldPluginNotAllowed:false,OnWebTwainNeedUpgrade:false,OnWebTwainNeedUpgradeWebJavascript:false,OnWebTwainInitMessage:false,IfUseViewer:true,ViewerJSIntegerited:true,ActiveXIntegerited:true,ActiveXInstallWithCAB:false,IfUseActiveXForIE10Plus:false,IfCheck64bitServiceFirst:false,IfDownload64bitService:false,IfInstallDWTModuleWithZIP:false,IfUseEmbeddedDownloadNoticeForActiveX:false,IfCheckDCP:false,IfCheckDWT:true,IfDisableDefaultSettings:false,OnWebTwainWillInit:false,IfAddMD5InUploadHeader:false,IfConfineMaskWithinTheViewer:false,CustomizableDisplayInfo:{errorMessages:{ERR_MODULE_NOT_INSTALLED:"Error: The Dynamic Web TWAIN module is not installed.",ERR_BROWSER_NOT_SUPPORT:"Error: This browser is currently not supported.",ERR_CreateID_MustNotInContainers:"Error: Duplicate ContainerId detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_NotContainer:"Error: The ID of the DIV for creating the new DWT object is invalid.",ERR_DWT_NOT_DOWNLOADED:"Error: Failed to download the Dynamic Web TWAIN module.",limitReachedForZoomIn:"Error: You have reached the limit for zooming in",limitReachedForZoomOut:"Error: You have reached the limit for zooming out",insufficientParas:"Error: Not enough parameters.",invalidAngle:"Error: The angle you entered is invalid.",invalidIndex:"Error: The index you entered is invalid.",invalidHeightOrWidth:"Error: The height or width you entered is invalid.",imageNotChanged:"Error: You have not changed the current image."},generalMessages:{checkingDWTVersion:"Checking WebTwain version ...",updatingDService:"Dynamsoft Service is updating ...",downloadingDWTModule:"Downloading the Dynamic Web TWAIN module.",refreshNeeded:"Please REFRESH your browser.",downloadNeeded:"Please download and install the Dynamic Web TWAIN.",DWTmoduleLoaded:"The Dynamic Web TWAIN module is loaded."},customProgressText:{upload:"Uploading...",download:"Downloading...",load:"Loading...",decode:"Decoding...",decodeTIFF:"Decoding tiff...",decodePDF:"Decoding pdf...",encode:"Encoding...",encodeTIFF:"Encoding tiff...",encodePDF:"Encoding pdf...",canvasLoading:"Loading ..."},buttons:{titles:{previous:"Previous Image",next:"Next Image",print:"Print Image",scan:"Acquire new Images",load:"Load local Images",rotateleft:"Rotate Left",rotate:"Rotate",rotateright:"Rotate Right",deskew:"Deskew",crop:"Crop Selected Area",erase:"Erase Selected Area",changeimagesize:"Change Image Size",flip:"Flip Image",mirror:"Mirror Image",zoomin:"Zoom In",originalsize:"Show Original Size",zoomout:"Zoom Out",stretch:"Stretch Mode",fit:"Fit Window",fitw:"Fit Horizontally",fith:"Fit Vertically",hand:"Hand Mode",rectselect:"Select Mode",zoom:"Click to Zoom In",restore:"Restore Orginal Image",save:"Save Changes",close:"Close the Editor",removeall:"Remove All Images",removeselected:"Remove All Selected Images"},bShowAllButtons:true,visibility:{scan:true,load:true,print:true,removeall:true,removeselected:true,rotateleft:true,rotate:true,rotateright:true,deskew:true,crop:true,erase:true,changeimagesize:true,flip:true,mirror:true,zoomin:true,originalsize:true,zoomout:true,stretch:true,fit:true,fitw:true,fith:true,hand:true,rectselect:true,zoom:true}},dialogText:{dlgRotateAnyAngle:["Angle :","Interpolation:","Keep size","  OK  ","Cancel"],dlgChangeImageSize:["New Height :","New Width :","Interpolation method:","  OK  ","Cancel"],saveChangedImage:["You have changed the image. Do you want to keep the change(s)?","  Yes  ","  No  "],selectSource:["Select Source:","Select","Cancel","There is no source available!"]}}}};a.MSG={Loading:"Loading...",LoadingTiff:"Loading tiff...",LoadingPdf:"Loading pdf...",Encoding:"Encoding...",ConvertingToBlob:"Converting to blob...",ConvertingToBase64:"Converting to base64...",SavingPdf:"Saving pdf...",SavingTiff:"Saving tiff...",Downloading:"Downloading...",Uploading:"Uploading...",Wasm_Initializing:"Initializing...",Init_LookingLicense:"Looking for license...",Init_LoadingViewerJs:"Loading the viewer script...",Init_AllJsLoaded:"All scripts loaded.",Init_FireBeforeInitEvt:"OnWebTwainWillInit triggered.",Init_InitActiveX:"Initializing the ActiveX...",Init_InitH5:"Initializing...",Init_InitWasm:"Initializing WebAssembly mode...",Init_DownloadingWasm:"Downloading WebAssembly code...",Init_CompilingWasm:"Compiling WebAssembly code...",Init_InitDynamsoftService:"Initializing the Service mode...",Init_CheckDWT:"Looking for the service module...",Init_CheckDWTVersion:"Checking the service module...",Init_CreatingDWT:"Creating a WebTwain instance...",Init_ConfiguringDWT:"Configuring the WebTwain instance...",Init_SetLicenseForDWT:"Activating the WebTwain instance...",Init_GetLicenseInfoForDWT:"Decoding the license...",Init_CheckingLicense:"Checking the license...",Err_BrowserNotSupportWasm:"It looks like your browser doesn't support the WebAssembly technology which is required to use the library."}})(Dynamsoft);var OnWebTwainNotFoundOnWindowsCallback=OnWebTwainNotFoundOnWindowsCallback||false,OnWebTwainNotFoundOnMacCallback=OnWebTwainNotFoundOnMacCallback||false,OnWebTwainNotFoundOnLinuxCallback=OnWebTwainNotFoundOnLinuxCallback||false,OnWebTwainOldPluginNotAllowedCallback=OnWebTwainOldPluginNotAllowedCallback||false,OnWebTwainNeedUpgradeCallback=OnWebTwainNeedUpgradeCallback||false,OnWebTwainPreExecuteCallback=OnWebTwainPreExecuteCallback||false,OnWebTwainPostExecuteCallback=OnWebTwainPostExecuteCallback||false,OnWebTwainShowUpdatingDialog=OnWebTwainShowUpdatingDialog||false,OnWebTwainCloseUpdatingDialog=OnWebTwainCloseUpdatingDialog||false,OnRemoteWebTwainNotFoundCallback=OnRemoteWebTwainNotFoundCallback||false,OnRemoteWebTwainNeedUpgradeCallback=OnRemoteWebTwainNeedUpgradeCallback||false,OnWebTWAINDllDownloadSuccessful=OnWebTWAINDllDownloadSuccessful||false,OnWebTWAINDllDownloadFailure=OnWebTWAINDllDownloadFailure||false,OnWebTWAINModuleDownloadManually=OnWebTWAINModuleDownloadManually||false,Dynamsoft_ChangeConfig=Dynamsoft_ChangeConfig||false,Dynamsoft_OnLoad=Dynamsoft_OnLoad||false,Dynamsoft_OnNotReady=Dynamsoft_OnNotReady||false,Dynamsoft_OnReady=Dynamsoft_OnReady||false;(function(b){var c={},a=Dynamsoft.dcp;b.mix(c,Dynamsoft.DWT.defaultEnv);b.mix(c,Dynamsoft.WebTwainEnv);c.RegisterEvent=function(d,e){if((d==="OnWebTwainReady"||!Dynamsoft.WebTwainEnv.UseDefaultInstallUI)&&b.isFunction(e)){Dynamsoft.WebTwainEnv[d]=e}else{if((d==="OnWebTwainInitMessage")&&b.isFunction(e)){Dynamsoft.WebTwainEnv[d]=e}}return true};Dynamsoft.WebTwainEnv=c;a.onReadys.push(function(){a.ifCheck64bitServiceFirst=Dynamsoft.WebTwainEnv.IfCheck64bitServiceFirst})})(Dynamsoft.Lib);(function(o){var k=!0,q=!1,u=document.location.protocol,e=location.hostname,a=Dynamsoft.navInfoSync,p=a.bSSL,j=a.bHTML5Edition,c=q,h=q,w=q,t=0,g=location.pathname,f=0,b,l;b={config:{debug:q,devMode:q,usingMainMode:q,bDiscardBlankImage:q,msg:[],msgPrefix:'<span style="color:#cE5E04"><b>',msgSuffix:"</b></span><br />"},detect:{ssl:p,dcpStatus:0,dcpCallbackType:0,arySTwains:[],arySTwainsByIP:[],aryReconnectSTwains:[],bFirst:k,bOK:q,__dialog:q,scriptLoaded:q,wasmScriptLoaded:q,cssLoaded:q,viewerScriptLoaded:q,bNoControlEvent:q,bNeedUpgradeEvent:q,StartWSTimeoutId:q,StartWSByIPTimeoutId:q,bPromptJSOrServerOutdated:q,detectType:p?1:(u==="http:"||e==="")?0:-1,tryTimes:0,ports:[{port:18623,ssl:k},{port:18622,ssl:q}],win64Ports:[{port:18621,ssl:k},{port:18620,ssl:q}],cUrlIndex:0,urls:[],onNoControl:q,needUpgrade:q,onNotAllowedForChrome:q,OnDetectNext:q,OnCreatWS:q},page:{bUnload:q,OnUnload:q},tmp:{IfAllowLocalCache:k,EmptyFunction:function(){}}};b.appendMessage=function(x){if(typeof(x)==="string"){b.config.msg.push(x)}else{if(Object.prototype.toString.call(x)==="[object Array]"){Dynamsoft.Lib.each(x,function(y){b.appendMessage(y)})}}};b.appendRichMessage=function(x){b.appendMessage([b.config.msgPrefix,x,b.config.msgSuffix])};b.clearMessage=function(){var x=Dynamsoft.navInfoSync;if(x.bIE&&x.IEVersion==8){b.config.msg.splice(0,b.config.msg.length)}else{b.config.msg.splice(0)}return k};b.getRealPath=function(x){if(x===undefined){return""}if(b.env.pathType==1){return b.env.basePath+x}return b.env.basePath+x.replace(new RegExp("/","g"),"\\\\")};b.getHex=function(y){var x;x=Number(y).toString(16).toUpperCase();if(x.length==1){x=["0",x].join("")}return x};b.getColor=function(z){var y,x,B,A;A=z>>16;B=(z&65280)>>8;x=z&255;y=["#",b.getHex(A),b.getHex(B),b.getHex(x)].join("");return y};b.RGB2BGR=function(y){var B,x,A,z;z=y>>16;A=(y&65280);x=y&255;B=(x<<16)|A|z;return B};b.BGR2RGB=b.RGB2BGR;b.isLocalIP=function(x){return x&&(x==="127.0.0.1"||x==="localhost"||x==="local.dynamsoft.com")};var n=navigator,i=n.userAgent.toLowerCase(),d=n.platform.toLowerCase(),s=!a.bMobile&&(/win32|win64|windows/).test(d),v=s&&(/win64|x64/).test(i),m="",r="";if(i.indexOf("mac os x")>-1){m=i.match(/mac os x [\d._]*/gi);m=(m+"").replace(/[^0-9|_.]/ig,"").replace(/_/ig,".")}if(i.indexOf("cpu os")>-1){r=i.match(/cpu os [\d._]*/gi);r=(r+"").replace(/[^0-9|_.]/ig,"").replace(/_/ig,".")}if(i.indexOf("cpu iphone os")>-1){r=i.match(/cpu os [\d._]*/gi);r=(r+"").replace(/[^0-9|_.]/ig,"").replace(/_/ig,".")}if(e===""){if(s&&g.lastIndexOf("\\")>1){g=g.substring(1,g.lastIndexOf("\\")).replace(/%20/g," ")}else{f=1;g=g.substring(1,g.lastIndexOf("/")).replace(/%20/g," ")}}else{f=1;g=g.substring(0,g.lastIndexOf("/"))}if(a.bIE){t=a.IEVersion;if(t===""||t>8){if(t>=10&&Dynamsoft.WebTwainEnv.IfUseActiveXForIE10Plus==false){j=k}else{j=q;w=k}}else{h=k}}else{if(!j){c=k}}b.env={bIE:a.bIE,bEdge:a.bEdge,bWin64:v,osVersion:r,macOSX:m,bFileSystem:a.bFileSystem,bMobile:a.bMobile,strIEVersion:a.IEVersion,basePath:g,pathType:f,isDesktopViewer:function(){return Dynamsoft.navInfo.bWin||Dynamsoft.navInfo.bLinux||Dynamsoft.navInfo.bMac},isPadViewer:function(){return Dynamsoft.navInfo.bPad||Dynamsoft.navInfo.bChromeOS},isMobileViewer:function(){return Dynamsoft.navInfo.bMobile}};b.product={name:"Dynamic Web TWAIN",bHTML5Edition:j,bPluginEdition:c||w,bActiveXEdition:h,host:Dynamsoft.dcp.host,wsProtocol:"dwt_command",_iImageCaptureDriverType:3,_iBrokerProcessType:1,getChromeEditionPath:Dynamsoft.dcp.getDSPath,getPKGPath:function(){var x="/dist/mac/DynamicWebTWAINMacEdition.pkg";return Dynamsoft.WebTwainEnv.ResourcesPath+x},getMSIPath:function(){var x="/dist/win/DynamicWebTWAINPlugIn.msi";return Dynamsoft.WebTwainEnv.ResourcesPath+x},getActiveXCABx86Path:function(){var x="/dist/win/ActiveX/DynamicWebTWAIN.cab";return Dynamsoft.WebTwainEnv.ResourcesPath+x},getActiveXCABx64Path:function(){var x="/dist/win/ActiveX/DynamicWebTWAINx64.cab";return Dynamsoft.WebTwainEnv.ResourcesPath+x},strMIMEType:"Application/DynamicWebTwain-Plugin",strFullClassID:"E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758",scripts:{},bChromeEdition:j};o.mix(o,b);o.Addon_Events=[];o.Addon_Sendback_Events=[]})(Dynamsoft.Lib);Dynamsoft.Ready(function(m,g){var h=!0,r=!1,d=m.getNavInfo(),a=Dynamsoft.navInfoSync,w=navigator.userAgent.toLowerCase(),v=document.location.protocol,e=location.hostname,p=a.bSSL,s=d.bMac,z=d.bLinux,u=d.bWin,j=d.bOSx64,k=d.bSafari,l=d.bFirefox,n=d.bEdge,q=d.bChrome,t=d.bIE,y=parseFloat(d.strBrowserVersion),o=r,f=0,c,i;var b={getServerVersionInfo:function(B){var A=Dynamsoft.WebTwainEnv.ServerVersionInfo;if(d.bWin||d.bWin64){}else{if(d.bMac){A=Dynamsoft.WebTwainEnv.ServerMacVersionInfo}else{if(d.bLinux){A=Dynamsoft.WebTwainEnv.ServerLinuxVersionInfo}else{}}}if(B){return A}return m.replaceAll(A,",","")},getDWTPrefix:function(){var A=Dynamsoft.WebTwainEnv;if(A.CustomMode===true){return"dwtc_"}return"dwt_"}};m.mix(m.product,b);var x={bChrome:q,bFirefox:l,bSafari:k,bWin:u,bWin64:(w.indexOf("win64")!=-1||w.indexOf("x64")!=-1),bMac:s,bLinux:z,isX64:j,iPluginLength:(d.bIE||d.bEdge)?0:navigator.plugins.length,strChromeVersion:d.bChrome?y:"",strFirefoxVersion:d.bFirefox?y:""};m.mix(m.env,x)});Dynamsoft.Ready(function(f,b){var e=f.getNavInfo(),d=!0,h=!1,a=!1,c={ActiveX:0,Plugin:1,HTML5:2,WinMacLinux:3,Barcode1D:4,Barcode2D:5,BarcodeWriter:6,OCR:7,Webcam:8,PDFRasterizer:9,OCRPro:10,QR:50,PDF417:51,DataMatrix:52},g={WinMacLinux:1,Barcode1D:2,Barcode2D:3,OCR:4,Webcam:6,PDFRasterizer:9};f.License={checkProductKey:function(M,D,J,t){var p,r=Dynamsoft.WebTwainEnv,A=t,y;p=M.__licenseInfo;if(!f.isString(r.ProductKey)||r.ProductKey==""||r.ProductKey=="******"||!p||!f.isArray(p.Detail)||(p.Detail.length==0)){f.Errors.LicenseEmptyOrInvalid(M);f.License.ShowInvalidLicense("",true);return h}var K=0,j=0,I=[],k=[],w=h,N=h,z=h,E=h,m=h,q=h,C,H,B,n;if(!this.isBindDomainOK(p.Domain)){f.Errors.LicenseBadDomain(M);if(A){f.License.promptLicenseErr(M)}return h}if(p.Detail.length>0){B=p.Detail[0];if(B.Trial=="FALSE"){y=false}else{y=true}}for(H=1;H<p.Detail.length;H++){B=p.Detail[H];if(B.Trial=="FALSE"&&y||B.Trial=="TRUE"&&!y){f.Errors.LicenseTrialFullMixed(M);if(A){f.License.promptLicenseErr(M)}return h}}if(D.Core){for(H=0;H<p.Detail.length;H++){B=p.Detail[H];n=this.getEnumLicenseType(B.EnumLicenseType);if(n.Core){var L=this.getLicenseType(B.LicenseType);if(f.product.bHTML5Edition){if(L.ActiveX&&!L.Html5){continue}k.push(B)}else{if(!L.ActiveX&&L.Html5){continue}k.push(B)}}}}else{k=p.Detail}for(H=0;H<k.length;H++){var u=d;B=k[H];n=this.getEnumLicenseType(B.EnumLicenseType);if(D.Core||this.isAllowLicenseType(n,D)){C=B.ExpireDate.replace(/-/g,"/");var O=(B.Trial!="FALSE");if(!this.isExpiredOrFuture(C,O)){if(n.Core&&parseInt(B.Version)>=15||!n.Core){if(D.Wasm){var G=false;if(D.Core&&n.Core){G=true}else{if(D.PDFRasterizer&&n.PDFRasterizer){G=true}else{if(D.Webcam&&n.Webcam){G=true}else{}}}if(G){if(B.OS.toLowerCase().indexOf("wasm")>-1){if(this.isBrowserOK(B.Browser)||J){K++;u=h}else{N=d}}else{if(D.PDFRasterizer){m=d}else{if(D.Webcam){q=d}else{E=d}}}}}else{if(this.isOSOK(B.OS)){if(this.isBrowserOK(B.Browser)||J){K++;u=h}else{N=d}}else{w=d}}}else{z=d}}else{I.push(C)}if(u){j++}}}if(K>0){return d}if(j==0){this.setNoAllowedLicenseTypeError(M,D);if(A){f.License.promptLicenseErr(M)}return h}if(I.length>0){var v=0,s=100000000000000000000,F="",l=(new Date()).getTime(),x;C="";for(H=0;H<I.length;H++){x=this.parseDateFromString(I[H]);if(x.getTime()<l&&x.getTime()>v){v=x.getTime();C=I[H]}else{if(x.getTime()>l&&x.getTime()<s){s=x.getTime();F=I[H]}}}if(C!=""){x=this.parseDateFromString(C);C=this.getLicenseDateString(x);f.Errors.LicenseExpired(M,C);A=false;f.License.ShowInvalidLicense(C,y)}else{if(F!=""){x=this.parseDateFromString(F);F=this.getLicenseDateString(x);f.Errors.LicenseIsFuture(M,F)}else{f.Errors.LicenseExpired(M,"");A=false;f.License.ShowInvalidLicense()}}if(A){f.License.promptLicenseErr(M)}return h}if(z){f.Errors.LicenseLower(M);if(A){f.License.promptLicenseErr(M)}return h}if(N){if(e.bEdge){f.Errors.LicenseNoEdge(M)}else{if(e.bChrome){f.Errors.LicenseNoChrome(M)}else{if(e.bFirefox){f.Errors.LicenseNoFirefox(M)}else{if(e.bIE){f.Errors.LicenseNoIE(M)}else{if(e.bSafari){f.Errors.LicenseNoSafari(M)}else{f.Errors.LicenseNotSupportBorwser(M)}}}}}if(A){f.License.promptLicenseErr(M)}return h}if(w){if(e.bWin||e.bWin64){f.Errors.LicenseNotSupportWindows(M)}else{if(e.bMac){f.Errors.LicenseNotSupportMAC(M)}else{if(e.bLinux){f.Errors.LicenseNotSupportLinux(M)}else{f.Errors.LicenseNotSupportOS(M)}}}if(A){f.License.promptLicenseErr(M)}return h}if(E){f.Errors.LicenseNotSupportWasm(M);if(A){f.License.promptLicenseErr(M)}return h}if(m){f.Errors.LicenseNotSupportPdfRWasm(M);if(A){f.License.promptLicenseErr(M)}return h}if(q){f.Errors.LicenseNotSupportWasmWasm(M);if(A){f.License.promptLicenseErr(M)}return h}f.Errors.LicenseEmptyOrInvalid(M);if(A){this.promptLicenseErr(M)}return h},promptLicenseErr:function(j){if(j.ErrorCode<0){var i=['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',j.ErrorString,"</div>",'<div style="padding-top:35px"></div>'];Dynamsoft.WebTwainEnv.ShowDialog(365,0,i.join(""))}},ShowInvalidLicense:function(k,l){if(f.detect.needUpgrade){return}var i=[],j="is not valid";if(k&&k!=""){if(k.indexOf("on")==-1){j="has expired on "+k}else{j="has expired "+k}}i.push('<div style="padding:30px;border:1px solid #CCCCCC;background:#FFFFFF">');i.push("You are seeing this dialog because the <strong>ProductKey</strong> ");i.push(j);if(l){i.push(". Please follow the steps below <br />");i.push("<ol><li>Request a <strong>Dynamic Web TWAIN</strong> trial license <strong><a class='dynamsoft-major-color' href='https://www.dynamsoft.com/CustomerPortal/Portal/TrialLicense.aspx?product=dwt' target='_blank'>here</a></strong></li>");i.push("<li>Refer to this <strong><a class='dynamsoft-major-color' href='https://developer.dynamsoft.com/?page_id=18633' target='_blank'>article</a></strong> to update the ProductKey</li>");i.push("<li>Do a <strong>hard refresh</strong> or clear cache in your browser to make sure the new ProductKey is used</li>");i.push("<li>If the issue persists, please contact us at <a class='dynamsoft-major-color' href='mailto:support@dynamsoft.com'>support@dynamsoft.com</a></li>")}else{i.push(".<br />")}i.push("</div>");f.ShowLicenseDialog(i.join(""),{width:680,height:0,bClose:false,seconds:100})},isBindDomainOK:function(p){if(f.isUndefined(p)||p==null||p==""||p=="*"||p=="*.*"){return d}var s=location.hostname,j=h;if(s==""){return d}var t=s.toLowerCase().split("."),k=t.length,n=p.toLowerCase().split(";");for(var o=0;o<n.length;o++){var m=n[o];if(m=="*.*"){j=d;break}var r=m.split("."),u=r.length;if(u>0&&u-1<=k){var q=d;for(var l=u-1;l>0;l--){if(r[l].indexOf("*")>-1){j=d;break}if(l+k-u>=0){if(t[l+k-u]!=r[l]){q=h;break}}else{if(r[l]!="*"){q=h;break}}}if(q){if(r[0]=="*"||k>=u&&t[k-u]==r[0]){j=d;break}}}}return j},isExpiredOrFuture:function(j,m){if(j==""){return h}if(!m){var i=j.length;if(i>2&&j[i-2]=="/"&&j[i-1]=="0"){return h}}var l=this.parseDateFromString(j),k=(new Date()).getTime(),n=k+(60*24*3600000);if(l.getTime()<k){return d}else{if(m&&(l.getTime()>n)){return d}}return h},isOSOK:function(i){if(i==""||i=="0"){return d}i=i.toLowerCase();if(i.indexOf("windows")>-1&&(e.bWin||e.bWin64)){return d}else{if(i.indexOf("mac")>-1&&e.bMac){return d}else{if(i.indexOf("linux")>-1&&e.bLinux){return d}else{if(i.indexOf("mobile")>-1&&f.env.bMobile){return d}}}}return h},isBrowserOK:function(k){if(f.isString(k)){if(k==""||k=="0"){return d}k=k.toLowerCase();var i=k.split(";"),j=h;f.each(i,function(l){if(f.trim(l)=="chrome"&&(e.bChrome||e.bSafari)){j=d}else{if(f.trim(l)=="ie"&&(e.bIE||e.bEdge)){j=d}else{if(f.trim(l)=="firefox"&&e.bFirefox){j=d}}}});return j}return h},parseDateFromString:function(j){var k,i=j;i=i.replace(/-/g,"/");k=Date.parse(i);if(isNaN(k)){k=0}return new Date(k)},getEnumLicenseType:function(m){var j=h,q=h,o=h,l=h,r=h,p=h,n=h,k=h,i=h;if(f.isString(m)){f.each(m.split(";"),function(t){var s=t*1;if(s==c.HTML5||s==c.WinMacLinux||s==c.ActiveX||s==c.Plugin){j=d}else{if(s==c.Barcode1D){q=d}else{if(s==c.QR){o=d}else{if(s==c.PDF417){l=d}else{if(s==c.DataMatrix){r=d}else{if(s==c.OCR){p=d}else{if(s==c.Webcam){n=d}else{if(s==c.PDFRasterizer){k=d}else{if(s==c.OCRPro){i=d}}}}}}}}}})}return{Core:j,PDFRasterizer:k,Webcam:n,barcode1D:q,QR:o,PDF417:l,DataMatrix:r,OCR:p,OCRPro:i}},getLicenseType:function(m){var n=h,r=h,k=h,p=h,l=h,s=h,q=h,o=h,j=h,i=h;if(m&&m!=""){m=m.toLowerCase();if(m=="html5;activex;oldie"){k=d}else{if(m=="html5"||m=="win=(aph) or mac=(ph) or linux(h)"){n=d}else{if(m=="html5;activex"){n=d;k=d}else{if(m=="1d barcode reader"){r=d}else{if(m=="2d barcode reader(qrcode)"){p=d}else{if(m=="2d barcode reader(pdf417)"){l=d}else{if(m=="2d barcode reader(data matrix)"){s=d}else{if(m=="ocr"){q=d}else{if(m=="webcam"){o=d}else{if(m=="pdf rasterizer"){j=d}else{if(m=="proocr"){i=d}}}}}}}}}}}}return{Html5:n,PDFRasterizer:j,Webcam:o,barcode1D:r,QR:p,PDF417:l,DataMatrix:s,OCR:q,OCRPro:i,ActiveX:k}},isAllowLicenseType:function(i,j){if(j.Core){return i.Core}else{if(j.PDFRasterizer){return i.PDFRasterizer}else{if(j.Webcam){return i.Webcam}else{if(j.barcode1D){return i.barcode1D}else{if(j.QR){return i.QR}else{if(j.PDF417){return i.PDF417}else{if(j.DataMatrix){return i.DataMatrix}else{if(j.OCR){return i.OCR}else{if(j.OCRPro){return i.OCRPro}}}}}}}}}return i.Core},setNoAllowedLicenseTypeError:function(j,i){if(i.Core){if(i.Wasm){f.Errors.LicenseNotSupportWasm(j)}else{f.Errors.LicenseNoCore(j)}}else{if(i.PDFRasterizer){if(i.Wasm){f.Errors.LicenseNotSupportPdfRWasm(j)}else{f.Errors.LicenseNoPDF(j)}}else{if(i.Webcam){if(i.Wasm){f.Errors.LicenseNotSupportWebcamWasm(j)}else{f.Errors.LicenseNoWebcam(j)}}else{if(i.barcode1D){f.Errors.LicenseNo1D(j)}else{if(i.QR){f.Errors.LicenseNo2DQR(j)}else{if(i.PDF417){f.Errors.LicenseNo2DPDF417(j)}else{if(i.DataMatrix){f.Errors.LicenseNo2DDataMatrix(j)}else{if(i.OCR){f.Errors.LicenseNoOCR(j)}else{if(i.OCRPro){f.Errors.LicenseNoOCRPro(j)}else{f.Errors.LicenseEmptyOrInvalid(j)}}}}}}}}}},getLicenseDateString:function(i){var k=i.getFullYear(),j,m,l;j=i.getMonth()+1;if(j>=10){m=""+j}else{m="0"+j}if(i.getDate()>=10){l=""+i.getDate()}else{l="0"+i.getDate()}return[m,"/",l,"/",k].join("")},hasPDFRProductKey:function(i){if(i._isMobileMode()){if(!f.License.checkProductKey(i,{PDFRasterizer:true,Wasm:true},true)){i._resetErr();return false}}else{if(!f.License.checkProductKey(i,{PDFRasterizer:true},true)){i._resetErr();return false}}return true},checkPDFProductKeyWhenNeeds:function(k,l){if(l==EnumDWT_ImageType.IT_PDF||l==EnumDWT_ImageType.IT_MULTIPAGE_PDF){var i=1,j;if(f.product.bHTML5Edition){if(k.__addon&&k.__addon.PDF){j=k.__addon.PDF.GetConvertMode()}}else{if(k.Addon&&k.Addon.PDF){j=k.Addon.PDF.GetConvertMode()}}if(j==i){if(f.isFunction(k._isMobileMode)&&k._isMobileMode()){return this.checkProductKey(k,{PDFRasterizer:true,Wasm:true},true)}else{return this.checkProductKey(k,{PDFRasterizer:true},true)}}}return d}}});Dynamsoft.Ready(function(c,a){var b=!0,d=!1,e={Errors:{FilePathSyntaxIncorrect:function(f){f._errorCode=-3123;f._errorString="The filename, directory name, or volume label syntax is incorrect."}},checkFilePath:function(g,f){if(!c.isString(f)||f.length==0){c.Errors.InvalidFile(g);return d}if(c.startsWith(f,"http://")||c.startsWith(f,"https://")||c.startsWith(f,"ftp://")){c.File.Errors.FilePathSyntaxIncorrect(g);return d}return b}};e.checkFolder=e.checkFilePath;c.File=e});(function(a,b){a.install={_divInstallBody:"dwt-InstallBody",_divDWTNonInstallContainerID:"dwt-NonInstallContainerID",_divDWTemessageContainer:"",_dlgInstall:false};a.install._strDynamsoftWithClose=['<div class="dynamsoft-dwt-dlg-header">','<div class="dynamsoft-dialog-close"></div>',"</div>"].join("");a.install._strDynamsoftWithoutClose=['<div style="height:40px;"></div>'].join("");a.install._strNonInstallDIV=['<div style="text-align:center;" id="',a.install._divDWTNonInstallContainerID,'"></div>'].join("");b.CloseDialog=function(){var e=a.install._dlgInstall;if(e){var d=a.all(".dynamsoft-dialog-close");a.each(d,function(f,g){a.removeEventListener(f,"click",DCP_DWT_OnClickCloseInstall)});if(e.open){e.close()}if(a.install._dlgFromImageEditor){if(a.one(".D_ImageUIEditor")[0]){var c=a.one(".D_ImageUIEditor")[0].parentNode;c.removeChild(e)}else{document.body.removeChild(e)}}else{document.body.removeChild(e)}a.install._dlgInstall=false}};b.ShowDialog=function(h,k,l,c,i){var f=a.install,o;if(!a.get("dynamsoft_waiting")){var d=document.createElement("div");d.className="dynamsoft-dialog-wrap";d.style.width="100%";o=['<div id="dynamsoft_waiting" style="border:0;position:relative;z-index:9999;background:transparent;margin:0 auto">','<iframe frameborder="0" marginheight="0" marginwidth="0" scrolling="no" src="javascript:\'\'"',' style="width:100%;height:100%;border:0;background:transparent;position:absolute;left:0;top:0;z-index:-1">',"</iframe>",'<div class="dynamsoft-dialog dynamsoft-dialog2" style="border:1px solid #CCCCCC;">','<div id="',f._divInstallBody,'"></div></div></div>'];d.innerHTML=o.join("");if(c){if(a.one(".D_ImageUIEditor")[0]){var e=a.one(".D_ImageUIEditor")[0].parentNode;e.appendChild(d)}else{document.body.appendChild(d)}}else{document.body.appendChild(d)}f._dlgFromImageEditor=c;f._dlgInstall=d;a.dialog.setup(f._dlgInstall)}if(l===false){return}var j=Dynamsoft.Lib.one(".dynamsoft-dialog");if(j&&j.getEL()){j[0].style.width=h+"px";if(k&&k>0){j[0].style.height=k+"px"}}if(c){a.get(f._divInstallBody).innerHTML=['<div class="dynamsoft-dwt-dialog-body">',l,"</div>"].join("")}else{var m=(i?f._strDynamsoftWithoutClose:f._strDynamsoftWithClose);a.get(f._divInstallBody).innerHTML=['<div class="dynamsoft-dwt-dialog-body">',m,l,"</div>"].join("")}var n=a.get("dynamsoft_waiting");n.style.width=h;if(f._dlgInstall.open){f._dlgInstall.close()}f._dlgInstall.showModal();var g=a.all(".dynamsoft-dialog-close");a.each(g,function(p,q){a.addEventListener(p,"click",DCP_DWT_OnClickCloseInstall)})};b.OnWebTwainPreExecute=function(){Dynamsoft.Lib.detect.OnWebTwainPreExecute(Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer)};b.OnWebTwainPostExecute=function(){Dynamsoft.Lib.detect.OnWebTwainPostExecute()}})(Dynamsoft.Lib,Dynamsoft.WebTwainEnv);var DCP_DWT_OnClickCloseInstall=function(a){var d=Dynamsoft.Lib,f=d.install._dlgInstall;Dynamsoft.WebTwainEnv.CloseDialog();var c=d.get(d.install._divDWTNonInstallContainerID);if(c){c.parentNode.removeChild(c)}if(a&&d.isString(a)){d.show(a)}else{var b,e;e=Dynamsoft.WebTwainEnv.Containers;if(e){for(b=0;b<e.length;b++){d.show(e[b].ContainerId)}}e=Dynamsoft.WebTwainEnv.DynamicContainers;if(e){for(b=0;b<e.length;b++){d.show(e[b])}}e=null}if(d.install._divDWTemessageContainer!=""){d.show(d.install._divDWTemessageContainer)}};(function(b){var a=b.win;a.DCP_DWT_OnClickCloseInstall=DCP_DWT_OnClickCloseInstall;b.detect.showMask=function(){if(!Dynamsoft.WebTwainEnv.ScanDirectly){if(b.isFunction(a.OnWebTwainPreExecuteCallback)){a.OnWebTwainPreExecuteCallback()}else{b.detect.OnWebTwainPreExecute(Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer)}}};b.detect.OnWebTwainPreExecute=function(f){var e=f,c,d;if(Dynamsoft.WebTwainEnv.Containers.length>0){d=Dynamsoft.Lib.get(Dynamsoft.WebTwainEnv.Containers[0].ContainerId)}if(d){c=d.getBoundingClientRect();if(d.firstChild&&d.firstChild.getBoundingClientRect){c=d.firstChild.getBoundingClientRect()}}if(c==undefined||Dynamsoft.WebTwainEnv.Containers.length>1||(Dynamsoft.WebTwainEnv.Containers.length==1&&(c.width==0||c.height==0))){e=false}b.mask.bConfined=e;b.mask.container=d;b.showMask()};b.detect.hideMask=function(){if(!Dynamsoft.WebTwainEnv.ScanDirectly){if(b.isFunction(a.OnWebTwainPostExecuteCallback)){a.OnWebTwainPostExecuteCallback()}else{b.detect.OnWebTwainPostExecute()}}};b.detect.OnWebTwainPostExecute=b.hideMask})(Dynamsoft.Lib);(function(a){a.install._dlgLicense=false;a._gb_xkz_dhk=function(){var c=a.install._dlgLicense;if(c){var b=a.one(".dynamsoft-dialog-close",c);if(b.getEL()){a.removeEventListener(b.getEL(),"click",a._gb_xkz_dhk)}if(c.open){c.close()}document.body.removeChild(c);a.install._dlgLicense=false}};a._zdgb_xkz_dhk=function(){var c=a.install._dlgLicense;if(c){var d=a.one(".dynamsoft-dialog-closeTimer",c);if(d.getEL()){var b=parseInt(d.getEL().style.width);b-=1;if(b<=0){a._gb_xkz_dhk()}else{d.getEL().style.width=b+"%";setTimeout(a._zdgb_xkz_dhk,100)}}}};a.ShowLicenseDialog=function(j,i){var f=a.install,r,h="dynamsoft-dialog-license",l="ds-dwt-ui-dlg-license-wrap",g,m,q,o,b,n;if(i){g=i.width;m=i.height;q=i.seconds;o=i.bClose}if(!g){g=600}if(!m){m="100%"}if(!q){q=10}if(a.one("."+h).length==0){var d=document.createElement("div"),c=document.createElement("div"),e=document.createElement("iframe");d.className=h;d.style.width="100%";d.style.position="absolute";c.className=l;c.innerHTML=j;c.style.margin="auto";c.style.backgroundColor="white";c.style.zIndex="9999";c.style.position="relative";c.style.border="0";e.frameborder="0";e.marginheight="0";e.marginwidth="0";e.scrolling="no";e.style.border="0";e.style.backgroundColor="transparent";e.style.position="absolute";e.style.left=0;e.style.top=0;e.style.width="100%";e.style.height="100%";e.style.margin="auto";e.style.zIndex=-1;e.src='javascript:""';c.appendChild(e);if(o){b=document.createElement("div");b.className="dynamsoft-dialog-close";c.insertBefore(b,c.firstChild);n=document.createElement("div");n.className="dynamsoft-dialog-closeTimer";n.style.width="100%";n.style.height="2px";n.style.marginTop="-2px";n.style.backgroundColor="#fe8e14";c.insertBefore(n,c.firstChild)}d.appendChild(c);document.body.appendChild(d);f._dlgLicense=d;a.dialog.setup(f._dlgLicense)}var k=a.one("."+l);if(k&&k.getEL()){k[0].style.width=g+"px";if(a.isNumber(m)&&m>0){k[0].style.height=m+"px"}else{k[0].style.height="100%"}}if(f._dlgLicense.open){f._dlgLicense.close()}f._dlgLicense.showModal();if(o){b=a.one(".dynamsoft-dialog-close",f._dlgLicense);if(b.getEL()){a.addEventListener(b.getEL(),"click",a._gb_xkz_dhk);setTimeout(a._zdgb_xkz_dhk,100)}}};a.openLoadingMsg=function(){if(!a.product.bHTML5Edition){return}var c=Dynamsoft.WebTwainEnv.UseLocalService;if(a.isUndefined(c)&&!a.env.bMobile||c==true){return}var e,d,f;if(!a.dlgLoading){f=[];f.push('<dialog class="dynamsoft-loadingMsg" closed="closed" style="top:30%"><div style="margin:45px 0 25px 65px"><span class="loading-dwt"></span></div><h3 class="dynamsoft-loadingMsg-msg"> </h3>');f.push('<p class="dynamsoft-loadingMsg-desc"> </p>');f.push("</dialog>");d=a.one(".dynamsoft-loadingMsg");if(d&&d.getEL()){d.remove()}var b=a.parseHTML(f.join(""));if(b&&b.length>0){document.body.appendChild(b[0])}d=a.one(".dynamsoft-loadingMsg");if(d&&d.getEL()){a.dlgLoading=d[0];a.dialog.setup(a.dlgLoading)}}a.dlgLoading.showModal();a.dlgLoadingShowStatus=true};a.showLoadingMsg=function(g,f,e){if(a.dlgLoadingShowStatus==false){return}var b=a.one(".dynamsoft-loadingMsg"),c=a.one(".dynamsoft-loadingMsg-msg"),d=a.one(".dynamsoft-loadingMsg-desc");if(c&&c.getEL()){c.html(f)}if(d&&d.getEL()){d.html(e)}};a.closeLoadingMsg=function(b){a.log("closeLoadingMsg:"+b);if(a.dlgLoadingShowStatus==true){if(a.dlgLoading){a.dlgLoading.close()}a.dlgLoadingShowStatus=false}}})(Dynamsoft.Lib);(function(a){a.domReady(function(){var d=document.createElement("style"),c='dialog{position:absolute;left:0;right:0;top:30%;margin:auto;padding:30px 35px;border:1px solid #ccc;border-radius:6px;box-shadow:0 1px 5px rgba(0,0,0,.05);background:white;color:black;width:-moz-fit-content;display:none;-webkit-box-sizing:content-box;box-sizing:content-box}dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-dwt-dialogProgress{width:300px}.dynamsoft-finalMessage{margin:0 0 15px 0;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-desc{margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.dynamsoft-status{color:#555;font:14px/22px Arial,sans-serif;margin-bottom:5px}.dynamsoft-progressBar{-webkit-appearance:none;width:300px;margin-bottom:20px;height:14px}.dynamsoft-progressBar,.dynamsoft-progressBar::-webkit-progress-bar{background-color:#e7e7e7;border-radius:7px}.dynamsoft-progressBar::-webkit-progress-value,.dynamsoft-progressBar::-moz-progress-bar{background-color:#50a8e1;border-radius:7px}.dynamsoft-loadingMsg{padding:6px;position:absolute;left:0;right:0;top:30%;width:240px;height:240px;margin:auto;border:1px solid #ccc;border-radius:6px;box-shadow:0 1px 5px rgba(0,0,0,.05);background:white;color:black;width:-moz-fit-content;display:none;-webkit-box-sizing:content-box;box-sizing:content-box}dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-loadingMsg-msg{margin:0 0 15px 25px;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-loadingMsg-desc{text-align:center;margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.loading-dwt{display:inline-block;width:100px;height:100px;background:url("data:image/gif;base64,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")}';d.type="text/css";try{d.appendChild(document.createTextNode(c))}catch(b){d.styleSheet.cssText=c}document.body.appendChild(d)})})(Dynamsoft.Lib);Dynamsoft.Ready(function(b){a.Orientation={Horizontal:0,Vertical:1};a.Direction={LeftToRight:0,RightToLeft:1,TopToBottom:0,BottomToTop:1};a.CreationType={Replace:0,AppendChild:1};a.AnimationStyle={None:0,Static:1,StaticFull:2,Custom:3,CustomFull:4,Flickering1:10,Flickering2:11,Flickering3:12,LeftToRight1:20,LeftToRight2:21,RightToLeft1:22,RightToLeft2:23,TwoWay:24};function a(g,d){var h=this,e=0,f;if(b.isString(g)){f=document.getElementById(g)}else{f=g}h.isLoaded=false;h.displayType=0;h.progress=0;h.progressPosition=0;h.borderWidth={left:0,right:0,top:0,bottom:0};h.orientation=(d.orientation||a.Orientation.Horizontal);h.direction=(d.direction||a.Direction.LeftToRight);h.creationType=(d.creationType||a.CreationType.Replace);h.value=0;h.initialValue=(d.value||0);h.minValue=(d.minValue||0);h.maxValue=(d.maxValue||100);h.showLabel=(typeof d.showLabel=="undefined"?true:d.showLabel);h.labelText=(d.labelText||"");h.width=(d.width||300);h.height=(d.height||20);h.borderRadius=(d.borderRadius||10);if(h.orientation==a.Orientation.Horizontal&&h.borderRadius>h.height/2){h.borderRadius=Math.round(h.height/2)}if(h.orientation==a.Orientation.Vertical&&h.borderRadius>h.width/2){h.borderRadius=Math.round(h.width/2)}h.backColor=(d.backColor||"");h.color=(d.color||"#50a8e1");h.animationStyle=0;h.animationInterval=(d.animationInterval||100);var c=["parent","background","wrapper","left","middle","right","horizontalText","verticalText","marker"];h.extraClassName={};for(e=0;e<c.length;e++){if(!d.extraClassName){h.extraClassName[c[e]]=""}else{if(typeof d.extraClassName=="string"){h.extraClassName[c[e]]=d.extraClassName}else{h.extraClassName[c[e]]=(d.extraClassName[c[e]]||"")}}}h.onLoad=(d.onLoad||null);h.onValueChanged=(d.onValueChanged||null);h.onAnimate=(d.onAnimate||null);if(h.creationType==a.CreationType.Replace){h.parentElement=f}else{h.parentElement=document.createElement("DIV");f.appendChild(h.parentElement)}h.finishLoading()}a.prototype.finishLoading=function(){var h=this,e="",g;h.wrapperElement=null;h.backgroundElement=null;h.valueElement=null;h.leftElement=null;h.middleElement=null;h.rightElement=null;h.backgroundElement=document.createElement("DIV");h.backgroundElement.className="progressbar_background"+(h.extraClassName.background?" ":"")+h.extraClassName.background;h.backgroundElement.style.cssText=h.backgroundElement.style.cssText+a._createBorderRadiusCss(h.borderRadius);h.parentElement.appendChild(h.backgroundElement);var d=["border-radius","border-bottom-right-radius","-moz-border-radius-bottomright","-webkit-border-bottom-right-radius","-khtml-border-radius-bottomright","-khtml-border-bottom-right-radius"];var f=0,c="";for(f=0;f<d.length;f++){c=a._elementCurrentStyle(h.backgroundElement,d[f]);if(c||typeof c=="string"){break}}if(c!=""&&a._parseInt(c)!=h.borderRadius){h.borderRadius=a._parseInt(c)}if((h.orientation==a.Orientation.Horizontal)||(h.orientation==a.Orientation.Vertical)){h.displayType=0}else{h.displayType=1}h.parentElement.className=(h.parentElement.className!=""?" ":"")+"progressbar_parent dynamsoft-progressBar"+(h.extraClassName.parent?" ":"")+h.extraClassName.parent;if(h.displayType==0){g=h.wrapperElement=document.createElement("DIV");g.style.border="1px solid #A0A0A0";g.style.cssFloat="left";g.style.display="inline-block";g.style.width=h.width+"px";g.style.height=h.height+"px";g.style.left="0px";g.style.top=(-h.height)+"px";g.style.backgroundColor=h.backColor;g.style.backgroundRepeat="no-repeat";g.style.position="relative";g.style.cssText=g.style.cssText+a._createBorderRadiusCss(h.borderRadius);h.parentElement.appendChild(g);h.borderWidth={left:a._parseInt(a._elementCurrentStyle(g,"border-left-width")),right:a._parseInt(a._elementCurrentStyle(g,"border-right-width")),top:a._parseInt(a._elementCurrentStyle(g,"border-top-width")),bottom:a._parseInt(a._elementCurrentStyle(g,"border-bottom-width"))}}else{if(h.displayType==1){if(h.orientation==a.Orientation.Horizontal){if(h.borderRadius>h.width/2){h.borderRadius=h.width}}else{if(h.orientation==a.Orientation.Vertical){if(h.borderRadius>h.height/2){h.borderRadius=h.height}}}h.valueElement=document.createElement("DIV");h.valueElement.className="";h.leftElement=document.createElement("DIV");h.middleElement=document.createElement("DIV");h.rightElement=document.createElement("DIV");h.leftElement.style.border="1px solid #A0A0A0";h.leftElement.style.cssFloat="left";h.leftElement.style.display="inline-block";h.leftElement.style.backgroundColor=h.backColor;h.leftElement.style.backgroundRepeat="no-repeat";h.leftElement.style.position="relative";h.rightElement.style.border="1px solid #A0A0A0";h.rightElement.style.cssFloat="left";h.rightElement.style.display="inline-block";h.rightElement.style.backgroundColor=h.backColor;h.rightElement.style.backgroundRepeat="no-repeat";h.rightElement.style.position="relative";h.middleElement.style.border="1px solid #A0A0A0";h.middleElement.style.cssFloat="left";h.middleElement.style.display="inline-block";h.middleElement.style.overflow="hidden";h.middleElement.style.position="relative";h.valueElement.style.backgroundColor=h.backColor;h.valueElement.style.position="relative";if(h.orientation==a.Orientation.Horizontal){h.leftElement.style.width=h.borderRadius+"px";h.leftElement.style.height=h.height+"px";h.leftElement.style.top=-h.height+"px";h.leftElement.style.left="0px";h.leftElement.style.borderRight="none";h.leftElement.style.cssText=h.leftElement.style.cssText+a._createBorderRadiusCss(h.borderRadius,0,0,h.borderRadius);h.rightElement.style.width=h.borderRadius+"px";h.rightElement.style.height=h.height+"px";h.rightElement.style.top=-h.height+"px";h.rightElement.style.borderLeft="none";h.rightElement.style.cssText=h.rightElement.style.cssText+a._createBorderRadiusCss(0,h.borderRadius,h.borderRadius,0);h.middleElement.style.width=(h.width-(h.borderRadius*2))+"px";h.middleElement.style.height=h.height+"px";h.middleElement.style.top=-h.height+"px";h.middleElement.style.borderLeft="none";h.middleElement.style.borderRight="none";h.valueElement.style.width="0px";h.valueElement.style.height=h.height+"px"}else{if(h.orientation==a.Orientation.Vertical){h.leftElement.style.width=h.width+"px";h.leftElement.style.height=h.borderRadius+"px";h.leftElement.style.top=(-h.height)+"px";h.leftElement.style.left="0px";h.leftElement.style.borderBottom="none";h.leftElement.style.cssText=h.leftElement.style.cssText+a._createBorderRadiusCss(h.borderRadius,h.borderRadius,0,0);h.rightElement.style.width=h.width+"px";h.rightElement.style.height=h.borderRadius+"px";h.rightElement.style.top=(-h.height)+"px";h.rightElement.style.left="0px";h.rightElement.style.borderTop="none";h.rightElement.style.cssText=h.rightElement.style.cssText+a._createBorderRadiusCss(0,0,h.borderRadius,h.borderRadius);h.middleElement.style.width=h.width+"px";h.middleElement.style.height=h.height-h.borderRadius*2+"px";h.middleElement.style.top=(-h.height)+"px";h.middleElement.style.left="0px";h.middleElement.style.borderTop="none";h.middleElement.style.borderBottom="none";h.valueElement.style.width=h.width+"px";h.valueElement.style.height="0px"}}h.middleElement.appendChild(h.valueElement);h.parentElement.appendChild(h.leftElement);h.parentElement.appendChild(h.middleElement);h.parentElement.appendChild(h.rightElement);if(h.orientation==a.Orientation.Horizontal){h.borderWidth={left:a._parseInt(a._elementCurrentStyle(h.leftElement,"border-left-width")),right:a._parseInt(a._elementCurrentStyle(h.rightElement,"border-right-width")),top:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-top-width")),bottom:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-bottom-width"))}}else{if(h.orientation==a.Orientation.Vertical){h.borderWidth={left:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-left-width")),right:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-right-width")),top:a._parseInt(a._elementCurrentStyle(h.leftElement,"border-top-width")),bottom:a._parseInt(a._elementCurrentStyle(h.rightElement,"border-bottom-width"))}}}}}h.parentElement.style.width=(h.width+h.borderWidth.left+h.borderWidth.right)+"px";h.parentElement.style.height=(h.height+h.borderWidth.top+h.borderWidth.bottom)+"px";h.backgroundElement.style.cssFloat="left";h.backgroundElement.style.display="inline-block";h.backgroundElement.style.width=(h.width+h.borderWidth.left+h.borderWidth.right)+"px";h.backgroundElement.style.height=h.height+"px";h.backgroundElement.style.backgroundColor="#FFFFFF";h.backgroundElement.style.position="relative";if(h.displayType==0){h.backgroundElement.style.width=(h.width+h.borderWidth.left+h.borderWidth.right)+"px"}h.backgroundElement.style.top=h.borderWidth.top+"px";h.markerElement=document.createElement("DIV");h.markerElement.style.display="inline-block";h.markerElement.style.zoom="1.0";h.markerElement.style.width=h.width+"px";h.markerElement.style.height=h.height+"px";h.markerElement.style.top=(-h.height*2-h.borderWidth.top)+"px";h.markerElement.style.left=h.borderWidth.left+"px";h.markerElement.style.backgroundColor=h.color;h.markerElement.style.lineHeight=(h.height)+"px";h.markerElement.style.position="relative";h.parentElement.appendChild(h.markerElement);h.isLoaded=true;h.setValue(h.initialValue);if(h.onLoad!=null){h.onLoad()}};a.prototype.setValue=function(e){var i=this;if(e!==null&&e<i.minValue){e=i.minValue}if(e!==null&&e>i.maxValue){e=i.maxValue}if(e===null){}else{i.value=e}if(i.isLoaded){var d=0,h;if(i.orientation==a.Orientation.Horizontal){d=(i.value/i.maxValue)*i.width;i.progressPosition=d;if(i.displayType==0){if(i.direction==a.Direction.LeftToRight){}else{}}else{if(i.displayType==1){if(i.direction==a.Direction.LeftToRight){if(d<=i.borderRadius){i.valueElement.style.width="0px"}else{if(d>=i.width-i.borderRadius){i.valueElement.style.width=i.middleElement.style.width}else{i.valueElement.style.width=(d-i.borderRadius)+"px"}}}else{if(d<=i.borderRadius){i.valueElement.style.width="0px"}else{if(d>=i.width-i.borderRadius){i.valueElement.style.left="0px";i.valueElement.style.width=i.middleElement.style.width}else{i.valueElement.style.left=(i.width-d-i.borderRadius)+"px";i.valueElement.style.width=(d-i.borderRadius)+"px"}}}}}if(d>0){if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.width=d+"px"}else{i.markerElement.style.width=i.width+"px"}i.markerElement.style.visibility="visible"}else{i.markerElement.style.width=i.width+"px";if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.visibility="hidden"}}if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){if(i.direction==a.Direction.LeftToRight){i.markerElement.style.left=i.borderWidth.left+"px"}else{i.markerElement.style.left=(i.width-d+i.borderWidth.left)+"px"}}else{i.markerElement.style.left=i.borderWidth.left+"px"}var l=(-i.height*2-i.height-i.borderWidth.top);var n=(-i.height*2-i.borderWidth.top);if(d==0||i.width==d){i.markerElement.style.top=n+"px";i.markerElement.style.height=i.height+"px";i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius)}else{if(d<i.borderRadius){var m=i.height-2.25*(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-d,2)));var j=n+(i.height/2)-(m/2);var c=l-2*(n-j);i.markerElement.style.top=j+"px";i.markerElement.style.height=m+"px";if(i.direction==a.Direction.LeftToRight){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,0,0,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,i.borderRadius,i.borderRadius,0)}}else{if(i.width-d<i.borderRadius){h=((i.borderRadius-(i.width-d))*2+(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-(i.width-d),2))))/3;if(i.direction==a.Direction.LeftToRight){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,h,h,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(h,i.borderRadius,i.borderRadius,h)}}else{i.markerElement.style.top=n+"px";i.markerElement.style.height=i.height+"px";if(i.direction==a.Direction.LeftToRight){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,0,0,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,i.borderRadius,i.borderRadius,0)}}}}}else{if(i.orientation==a.Orientation.Vertical){d=(i.value/i.maxValue)*i.height;i.progressPosition=d;if(i.displayType==0){if(i.direction==a.Direction.TopToBottom){}else{}}else{if(i.displayType==1){if(i.direction==a.Direction.TopToBottom){if(d<=i.borderRadius){i.valueElement.style.height="0px"}else{if(d>=i.height-i.borderRadius){i.valueElement.style.height=i.middleElement.style.height}else{i.valueElement.style.height=(d-i.borderRadius)+"px"}}}else{if(d<=i.borderRadius){i.valueElement.style.height="0px"}else{if(d>=i.height-i.borderRadius){i.valueElement.style.top="0px";i.valueElement.style.height=i.middleElement.style.height}else{i.valueElement.style.top=(i.height-d-i.borderRadius)+"px";i.valueElement.style.height=(d+i.borderRadius*2)+"px"}}}}}if(d>0){if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.height=d+"px"}else{i.markerElement.style.height=i.height+"px";i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius)}i.markerElement.style.visibility="visible"}else{i.markerElement.style.height=0+"px";if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.visibility="hidden"}}var g=i.borderWidth.left,k=i.borderWidth.left;if(d==0||i.height==d){i.markerElement.style.left=k+"px";i.markerElement.style.width=i.width+"px";i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius)}else{if(d<i.borderRadius){var f=2.5*d;if(f>i.width){f=i.width}var o=k+(i.width/2)-(f/2);i.markerElement.style.left=o+"px";i.markerElement.style.width=f+"px";if(i.direction==a.Direction.BottomToTop){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,0,i.borderRadius,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,i.borderRadius,0,0)}}else{if(i.height-d<i.borderRadius){h=((i.borderRadius-(i.height-d))*2+(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-(i.height-d),2))))/3;if(i.direction==a.Direction.BottomToTop){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(h,h,i.borderRadius,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,i.borderRadius,h,h)}}else{i.markerElement.style.left=k+"px";i.markerElement.style.width=i.width+"px";if(i.direction==a.Direction.BottomToTop){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,0,i.borderRadius,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,i.borderRadius,0,0)}}}}if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){if(i.direction==a.Direction.TopToBottom){i.markerElement.style.top=(-i.height*2-i.borderWidth.top)+"px"}else{i.markerElement.style.top=(-i.height-d-i.borderWidth.top)+"px"}}else{i.markerElement.style.top=(-i.height*2-i.borderWidth.top)+"px"}}}i.progress=(i.value/i.maxValue)}if(i.onValueChanged!=null){i.onValueChanged()}};a._elementCurrentStyle=function(f,e){if(f.currentStyle){var d=0,c="",g=false;for(d=0;d<e.length;d++){if(e[d].toString()!="-"){c+=(g?e[d].toString().toUpperCase():e[d].toString());g=false}else{g=true}}e=c;return f.currentStyle[e]}else{return getComputedStyle(f,null).getPropertyValue(e)}};a._parseInt=function(d){var c=parseInt(d);if(isNaN(c)){c=0}return c};a._createBorderRadiusCss=function(c,e,d,f){if(c!=null&&e==null&&d==null&&f==null){return"; -moz-border-radius: "+c+"px; -ms-border-radius: "+c+"px; -o-border-radius: "+c+"px; -webkit-border-radius: "+c+"px; -khtml-border-radius: "+c+"px; border-radius: "+c+"px;"}else{c=(c||0);e=(e||0);d=(d||0);f=(f||0);return"; -moz-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -ms-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -o-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -webkit-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -khtml-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; border-radius: "+c+"px "+e+"px "+d+"px "+f+"px;"}};b.ProgressBar=a});(function(c){var d=[c,Dynamsoft],b=0;for(;b<2;b++){var a=d[b];a.EnumDWT_PixelType={TWPT_BW:0,TWPT_GRAY:1,TWPT_RGB:2,TWPT_PALLETE:3,TWPT_CMY:4,TWPT_CMYK:5,TWPT_YUV:6,TWPT_YUVK:7,TWPT_CIEXYZ:8,TWPT_LAB:9,TWPT_SRGB:10,TWPT_SCRGB:11,TWPT_INFRARED:16};a.EnumDWT_BorderStyle={TWBS_NONE:0,TWBS_SINGLEFLAT:1,TWBS_SINGLE3D:2};a.EnumDWT_MessageType={TWQC_GET:1,TWQC_SET:2,TWQC_GETDEFAULT:4,TWQC_GETCURRENT:8,TWQC_RESET:16};a.EnumDWT_Cap={CAP_NONE:0,CAP_XFERCOUNT:1,ICAP_COMPRESSION:256,ICAP_PIXELTYPE:257,ICAP_UNITS:258,ICAP_XFERMECH:259,CAP_AUTHOR:4096,CAP_CAPTION:4097,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_TIMEDATE:4100,CAP_SUPPORTEDCAPS:4101,CAP_EXTENDEDCAPS:4102,CAP_AUTOFEED:4103,CAP_CLEARPAGE:4104,CAP_FEEDPAGE:4105,CAP_REWINDPAGE:4106,CAP_INDICATORS:4107,CAP_SUPPORTEDCAPSEXT:4108,CAP_PAPERDETECTABLE:4109,CAP_UICONTROLLABLE:4110,CAP_DEVICEONLINE:4111,CAP_AUTOSCAN:4112,CAP_THUMBNAILSENABLED:4113,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_CUSTOMDSDATA:4117,CAP_ENDORSER:4118,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTOMATICCAPTURE:4122,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_CLEARBUFFERS:4125,CAP_MAXBATCHBUFFERS:4126,CAP_DEVICETIMEDATE:4127,CAP_POWERSUPPLY:4128,CAP_CAMERAPREVIEWUI:4129,CAP_SERIALNUMBER:4132,CAP_PRINTER:4134,CAP_PRINTERENABLED:4135,CAP_PRINTERINDEX:4136,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSUFFIX:4139,CAP_LANGUAGE:4140,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERORDER:4142,CAP_REACQUIREALLOWED:4144,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERASIDE:4148,CAP_SEGMENTED:4149,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_MICRENABLED:4152,CAP_FEEDERPREP:4153,CAP_FEEDERPOCKET:4154,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_CUSTOMINTERFACEGUID:4156,ICAP_AUTOBRIGHT:4352,ICAP_BRIGHTNESS:4353,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_IMAGEFILEFORMAT:4364,ICAP_LAMPSTATE:4365,ICAP_LIGHTSOURCE:4366,ICAP_ORIENTATION:4368,ICAP_PHYSICALWIDTH:4369,ICAP_PHYSICALHEIGHT:4370,ICAP_SHADOW:4371,ICAP_FRAMES:4372,ICAP_XNATIVERESOLUTION:4374,ICAP_YNATIVERESOLUTION:4375,ICAP_XRESOLUTION:4376,ICAP_YRESOLUTION:4377,ICAP_MAXFRAMES:4378,ICAP_TILES:4379,ICAP_BITORDER:4380,ICAP_CCITTKFACTOR:4381,ICAP_LIGHTPATH:4382,ICAP_PIXELFLAVOR:4383,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_XSCALING:4388,ICAP_YSCALING:4389,ICAP_BITORDERCODES:4390,ICAP_PIXELFLAVORCODES:4391,ICAP_JPEGPIXELTYPE:4392,ICAP_TIMEFILL:4394,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_EXTIMAGEINFO:4399,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_FLIPROTATION:4406,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODETIMEOUT:4413,ICAP_ZOOMFACTOR:4414,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODETIMEOUT:4421,ICAP_FLASHUSED2:4422,ICAP_IMAGEFILTER:4423,ICAP_NOISEFILTER:4424,ICAP_OVERSCAN:4425,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICROTATE:4434,ICAP_JPEGQUALITY:4435,ICAP_FEEDERTYPE:4436,ICAP_ICCPROFILE:4437,ICAP_AUTOSIZE:4438,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_SUPPORTEDEXTIMAGEINFO:4446};a.EnumDWT_CapType={TWON_NONE:0,TWON_ARRAY:3,TWON_ENUMERATION:4,TWON_ONEVALUE:5,TWON_RANGE:6};a.EnumDWT_TransferMode={TWSX_NATIVE:0,TWSX_FILE:1,TWSX_MEMORY:2};a.EnumDWT_FileFormat={TWFF_TIFF:0,TWFF_PICT:1,TWFF_BMP:2,TWFF_XBM:3,TWFF_JFIF:4,TWFF_FPX:5,TWFF_TIFFMULTI:6,TWFF_PNG:7,TWFF_SPIFF:8,TWFF_EXIF:9,TWFF_PDF:10,TWFF_JP2:11,TWFF_JPN:12,TWFF_JPX:13,TWFF_DEJAVU:14,TWFF_PDFA:15,TWFF_PDFA2:16};a.EnumDWT_TIFFCompressionType={TIFF_AUTO:0,TIFF_NONE:1,TIFF_RLE:2,TIFF_FAX3:3,TIFF_T4:3,TIFF_FAX4:4,TIFF_T6:4,TIFF_LZW:5,TIFF_JPEG:7,TIFF_PACKBITS:32773};a.EnumDWT_InterpolationMethod={IM_NEARESTNEIGHBOUR:1,IM_BILINEAR:2,IM_BICUBIC:3,IM_BESTQUALITY:5};a.EnumDWT_ImageType={IT_BMP:0,IT_JPG:1,IT_TIF:2,IT_PNG:3,IT_PDF:4,IT_ALL:5,IT_MULTIPAGE_PDF:7,IT_MULTIPAGE_TIF:8};a.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX4:2,PDF_LZW:3,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7};a.EnumDWT_ShowMode={SW_ACTIVE:0,SW_MAX:1,SW_MIN:2,SW_CLOSE:3,SW_IFLIVE:4};a.EnumDWT_CapValueType={TWTY_INT8:0,TWTY_INT16:1,TWTY_INT32:2,TWTY_UINT8:3,TWTY_UINT16:4,TWTY_int:5,TWTY_BOOL:6,TWTY_FIX32:7,TWTY_FRAME:8,TWTY_STR32:9,TWTY_STR64:10,TWTY_STR128:11,TWTY_STR255:12};a.EnumDWT_UnitType={TWUN_INCHES:0,TWUN_CENTIMETERS:1,TWUN_PICAS:2,TWUN_POINTS:3,TWUN_TWIPS:4,TWUN_PIXELS:5,TWUN_MILLIMETERS:6};a.EnumDWT_DUPLEX={TWDX_NONE:0,TWDX_1PASSDUPLEX:1,TWDX_2PASSDUPLEX:2};a.EnumDWT_CapLanguage={TWLG_DAN:0,TWLG_DUT:1,TWLG_ENG:2,TWLG_FCF:3,TWLG_FIN:4,TWLG_FRN:5,TWLG_GER:6,TWLG_ICE:7,TWLG_ITN:8,TWLG_NOR:9,TWLG_POR:10,TWLG_SPA:11,TWLG_SWE:12,TWLG_USA:13,TWLG_USERLOCALE:-1,TWLG_AFRIKAANS:14,TWLG_ALBANIA:15,TWLG_ARABIC:16,TWLG_ARABIC_ALGERIA:17,TWLG_ARABIC_BAHRAIN:18,TWLG_ARABIC_EGYPT:19,TWLG_ARABIC_IRAQ:20,TWLG_ARABIC_JORDAN:21,TWLG_ARABIC_KUWAIT:22,TWLG_ARABIC_LEBANON:23,TWLG_ARABIC_LIBYA:24,TWLG_ARABIC_MOROCCO:25,TWLG_ARABIC_OMAN:26,TWLG_ARABIC_QATAR:27,TWLG_ARABIC_SAUDIARABIA:28,TWLG_ARABIC_SYRIA:29,TWLG_ARABIC_TUNISIA:30,TWLG_ARABIC_UAE:31,TWLG_ARABIC_YEMEN:32,TWLG_BASQUE:33,TWLG_BYELORUSSIAN:34,TWLG_BULGARIAN:35,TWLG_CATALAN:36,TWLG_CHINESE:37,TWLG_CHINESE_HONGKONG:38,TWLG_CHINESE_PRC:39,TWLG_CHINESE_SINGAPORE:40,TWLG_CHINESE_SIMPLIFIED:41,TWLG_CHINESE_TAIWAN:42,TWLG_CHINESE_TRADITIONAL:43,TWLG_CROATIA:44,TWLG_CZECH:45,TWLG_DANISH:0,TWLG_DUTCH:1,TWLG_DUTCH_BELGIAN:46,TWLG_ENGLISH:2,TWLG_ENGLISH_AUSTRALIAN:47,TWLG_ENGLISH_CANADIAN:48,TWLG_ENGLISH_IRELAND:49,TWLG_ENGLISH_NEWZEALAND:50,TWLG_ENGLISH_SOUTHAFRICA:51,TWLG_ENGLISH_UK:52,TWLG_ENGLISH_USA:13,TWLG_ESTONIAN:53,TWLG_FAEROESE:54,TWLG_FARSI:55,TWLG_FINNISH:4,TWLG_FRENCH:5,TWLG_FRENCH_BELGIAN:56,TWLG_FRENCH_CANADIAN:3,TWLG_FRENCH_LUXEMBOURG:57,TWLG_FRENCH_SWISS:58,TWLG_GERMAN:6,TWLG_GERMAN_AUSTRIAN:59,TWLG_GERMAN_LUXEMBOURG:60,TWLG_GERMAN_LIECHTENSTEIN:61,TWLG_GERMAN_SWISS:62,TWLG_GREEK:63,TWLG_HEBREW:64,TWLG_HUNGARIAN:65,TWLG_ICELANDIC:7,TWLG_INDONESIAN:66,TWLG_ITALIAN:8,TWLG_ITALIAN_SWISS:67,TWLG_JAPANESE:68,TWLG_KOREAN:69,TWLG_KOREAN_JOHAB:70,TWLG_LATVIAN:71,TWLG_LITHUANIAN:72,TWLG_NORWEGIAN:9,TWLG_NORWEGIAN_BOKMAL:73,TWLG_NORWEGIAN_NYNORSK:74,TWLG_POLISH:75,TWLG_PORTUGUESE:10,TWLG_PORTUGUESE_BRAZIL:76,TWLG_ROMANIAN:77,TWLG_RUSSIAN:78,TWLG_SERBIAN_LATIN:79,TWLG_SLOVAK:80,TWLG_SLOVENIAN:81,TWLG_SPANISH:11,TWLG_SPANISH_MEXICAN:82,TWLG_SPANISH_MODERN:83,TWLG_SWEDISH:12,TWLG_THAI:84,TWLG_TURKISH:85,TWLG_UKRANIAN:86,TWLG_ASSAMESE:87,TWLG_BENGALI:88,TWLG_BIHARI:89,TWLG_BODO:90,TWLG_DOGRI:91,TWLG_GUJARATI:92,TWLG_HARYANVI:93,TWLG_HINDI:94,TWLG_KANNADA:95,TWLG_KASHMIRI:96,TWLG_MALAYALAM:97,TWLG_MARATHI:98,TWLG_MARWARI:99,TWLG_MEGHALAYAN:100,TWLG_MIZO:101,TWLG_NAGA:102,TWLG_ORISSI:103,TWLG_PUNJABI:104,TWLG_PUSHTU:105,TWLG_SERBIAN_CYRILLIC:106,TWLG_SIKKIMI:107,TWLG_SWEDISH_FINLAND:108,TWLG_TAMIL:109,TWLG_TELUGU:110,TWLG_TRIPURI:111,TWLG_URDU:112,TWLG_VIETNAMESE:113};a.EnumDWT_CapSupportedSizes={TWSS_NONE:0,TWSS_A4LETTER:1,TWSS_B5LETTER:2,TWSS_USLETTER:3,TWSS_USLEGAL:4,TWSS_A5:5,TWSS_B4:6,TWSS_B6:7,TWSS_USLEDGER:9,TWSS_USEXECUTIVE:10,TWSS_A3:11,TWSS_B3:12,TWSS_A6:13,TWSS_C4:14,TWSS_C5:15,TWSS_C6:16,TWSS_4A0:17,TWSS_2A0:18,TWSS_A0:19,TWSS_A1:20,TWSS_A2:21,TWSS_A4:1,TWSS_A7:22,TWSS_A8:23,TWSS_A9:24,TWSS_A10:25,TWSS_ISOB0:26,TWSS_ISOB1:27,TWSS_ISOB2:28,TWSS_ISOB3:12,TWSS_ISOB4:6,TWSS_ISOB5:29,TWSS_ISOB6:7,TWSS_ISOB7:30,TWSS_ISOB8:31,TWSS_ISOB9:32,TWSS_ISOB10:33,TWSS_JISB0:34,TWSS_JISB1:35,TWSS_JISB2:36,TWSS_JISB3:37,TWSS_JISB4:38,TWSS_JISB5:2,TWSS_JISB6:39,TWSS_JISB7:40,TWSS_JISB8:41,TWSS_JISB9:42,TWSS_JISB10:43,TWSS_C0:44,TWSS_C1:45,TWSS_C2:46,TWSS_C3:47,TWSS_C7:48,TWSS_C8:49,TWSS_C9:50,TWSS_C10:51,TWSS_USSTATEMENT:52,TWSS_BUSINESSCARD:53,TWSS_MAXSIZE:54};a.EnumDWT_CapFeederAlignment={TWFA_NONE:0,TWFA_LEFT:1,TWFA_CENTER:2,TWFA_RIGHT:3};a.EnumDWT_CapFeederOrder={TWFO_FIRSTPAGEFIRST:0,TWFO_LASTPAGEFIRST:1};a.EnumDWT_CapPrinter={TWPR_IMPRINTERTOPBEFORE:0,TWPR_IMPRINTERTOPAFTER:1,TWPR_IMPRINTERBOTTOMBEFORE:2,TWPR_IMPRINTERBOTTOMAFTER:3,TWPR_ENDORSERTOPBEFORE:4,TWPR_ENDORSERTOPAFTER:5,TWPR_ENDORSERBOTTOMBEFORE:6,TWPR_ENDORSERBOTTOMAFTER:7};a.EnumDWT_CapPrinterMode={TWPM_SINGLESTRING:0,TWPM_MULTISTRING:1,TWPM_COMPOUNDSTRING:2};a.EnumDWT_CapBitdepthReduction={TWBR_THRESHOLD:0,TWBR_HALFTONE:1,TWBR_CUSTHALFTONE:2,TWBR_DIFFUSION:3};a.EnumDWT_CapBitOrder={TWBO_LSBFIRST:0,TWBO_MSBFIRST:1};a.EnumDWT_CapFilterType={TWFT_RED:0,TWFT_GREEN:1,TWFT_BLUE:2,TWFT_NONE:3,TWFT_WHITE:4,TWFT_CYAN:5,TWFT_MAGENTA:6,TWFT_YELLOW:7,TWFT_BLACK:8};a.EnumDWT_CapFlash={TWFL_NONE:0,TWFL_OFF:1,TWFL_ON:2,TWFL_AUTO:3,TWFL_REDEYE:4};a.EnumDWT_CapFlipRotation={TWFR_BOOK:0,TWFR_FANFOLD:1};a.EnumDWT_CapImageFilter={TWIF_NONE:0,TWIF_AUTO:1,TWIF_LOWPASS:2,TWIF_BANDPASS:3,TWIF_HIGHPASS:4,TWIF_TEXT:3,TWIF_FINELINE:4};a.EnumDWT_CapLightPath={TWLP_REFLECTIVE:0,TWLP_TRANSMISSIVE:1};a.EnumDWT_CapLightSource={TWLS_RED:0,TWLS_GREEN:1,TWLS_BLUE:2,TWLS_NONE:3,TWLS_WHITE:4,TWLS_UV:5,TWLS_IR:6};a.EnumDWT_MagType={TWMD_MICR:0,TWMD_RAW:1,TWMD_INVALID:2};a.EnumDWT_CapNoiseFilter={TWNF_NONE:0,TWNF_AUTO:1,TWNF_LONEPIXEL:2,TWNF_MAJORITYRULE:3};a.EnumDWT_CapORientation={TWOR_ROT0:0,TWOR_ROT90:1,TWOR_ROT180:2,TWOR_ROT270:3,TWOR_PORTRAIT:0,TWOR_LANDSCAPE:3,TWOR_AUTO:4,TWOR_AUTOTEXT:5,TWOR_AUTOPICTURE:6};a.EnumDWT_CapOverscan={TWOV_NONE:0,TWOV_AUTO:1,TWOV_TOPBOTTOM:2,TWOV_LEFTRIGHT:3,TWOV_ALL:4};a.EnumDWT_CapPixelFlavor={TWPF_CHOCOLATE:0,TWPF_VANILLA:1};a.EnumDWT_CapPlanarChunky={TWPC_CHUNKY:0,TWPC_PLANAR:1};a.EnumDWT_DataSourceStatus={TWDSS_CLOSED:0,TWDSS_OPENED:1,TWDSS_ENABLED:2,TWDSS_ACQUIRING:3};a.EnumDWT_FitWindowType={enumFitWindow:0,enumFitWindowHeight:1,enumFitWindowWidth:2};a.EnumDWT_PlatformType={enumWindow:0,enumMac:1,enumLinux:2};a.EnumDWT_UploadDataFormat={Binary:0,Base64:1};a.EnumDWT_MouseShape={Default:0,Hand:1,Crosshair:2,Zoom:3,NWResize:4,EResize:5,NResize:6,Resize:7,Move:8};a.EnumDWT_Language={English:0,French:1,Arabic:2,Spanish:3,Portuguese:4,German:5,Italian:6,Russian:7,Chinese:8};a.EnumDWT_InitMsg={Info:1,Error:2,NotInstalledError:3,DownloadError:4,DownloadNotRestartError:5};a.EnumDWT_Driver={TWAIN:0,ICA:3,SANE:3,TWAIN_AND_ICA:4,TWAIN_AND_TWAIN64:4,TWAIN64:5};a.EnumDWT_CompressionType={TWCP_NONE:0,TWCP_PACKBITS:1,TWCP_GROUP31D:2,TWCP_GROUP31DEOL:3,TWCP_GROUP32D:4,TWCP_GROUP4:5,TWCP_JPEG:6,TWCP_LZW:7,TWCP_JBIG:8,TWCP_PNG:9,TWCP_RLE4:10,TWCP_RLE8:11,TWCP_BITFIELDS:12,TWCP_ZIP:13,TWCP_JPEG2000:14}}})(window);var EnumDWT_Error={ModuleNotExists:-2371};(function(){function a(b){if(Dynamsoft.Lib.isString(b)){return b}var c;if("errorMessage" in b){c=b.errorMessage}if("message" in b){c=b.message}if(!Dynamsoft.Lib.isString(c)){c=""}if("errorCode" in b&&c.indexOf("(")==-1){c+="("+b.errorCode+")"}if("code" in b&&c.indexOf("(")==-1){c+="("+b.code+")"}return c}Dynamsoft.Lib.Errors={OutOfRange:function(b){b._errorCode=-1010;b._errorString="Data parameter out of supported range."},InvalidIndex:function(b){b._errorCode=-1033;b._errorString="Invalid index."},InvalidValue:function(b){b._errorCode=-1034;b._errorString="Invalid value."},NoImage:function(b){b._errorCode=-1035;b._errorString="There is no image."},UnrecognizedExt:function(b){b._errorCode=-1110;b._errorString="Unrecognized file extension."},SourceHasNothingToCapture:function(b){b._errorCode=-1029;b._errorString="Source has nothing to capture."},Server_Restarted:function(b){b._errorCode=-2208;b._errorString="The connection with the local Dynamsoft Service encountered a problem and has been reset."},HTML5NotSupport:function(b){b._errorCode=-2209;b._errorString="The HTML5 edition does not support this method or property."},NoUINotSupport:function(b){b._errorCode=-2210;b._errorString="You are calling a UI-related method on a UI-less WebTwain instance."},HttpServerCannotEmpty:function(b){b._errorCode=-2300;b._errorString="Http upload error: the HTTP Server name/ip cannot be empty."},NetworkError:function(b){b._errorCode=-2301;b._errorString="Network error."},InvalidResultFormat:function(b){b._errorCode=-2302;b._errorString="The result format is invalid."},UploadError:function(e,d,c,b){if(d){e._errorCode=-2303;e._errorString="Upload cancelled."}else{e._errorCode=-2003;if(b&&b>0){e._errorString="HTTP process error: "+b+"."}else{e._errorString="HTTP process error."}if(c){e._errorString+=" "+c}}},HttpDownloadUrlError:function(b){b._errorCode=-2304;b._errorString="Http download error: the url is invalid."},HttpDownloadError:function(e,d,c,b){if(d){e._errorCode=-2305;e._errorString="User cancelled the operation."}else{e._errorCode=-2003;if(b&&b>0){e._errorString="HTTP process error: "+b+"."}else{e._errorString="HTTP process error."}if(c){e._errorString+=" "+c}}},UploadFileCannotEmpty:function(b){b._errorCode=-2306;b._errorString="Upload Error: the upload file cannot be empty."},InvalidWidthOrHeight:function(b){b._errorCode=-2307;b._errorString="The width or height you entered is invalid."},Server_Invalid:function(b){if(b._errorCode==0){b._errorCode=-2308;b._errorString="The local Dynamsoft Service has been stopped."}},InvalidLocalFilename:function(c,b){c._errorCode=-2309;c._errorString="The LocalFile is empty in the name "+b+" Function."},BarCode_InvalidIndex:function(c,b){c._errorCode=-2310;c._errorString="The index is out of range."},BarCode_InvalidRemoteFilename:function(b){b._errorCode=-2311;b._errorString="The RemoteFile field is empty in the Barcode Download Function."},ImageFileLengthCannotZero:function(b){b._errorCode=-2312;b._errorString="The file length is empty."},UploadExceededMaxSize:function(b){b._errorCode=-2313;b._errorString="The size of the images you are about to upload has exceeded the limit."},ParameterCannotEmpty:function(b){b._errorCode=-2314;b._errorString="The parameter cannot be empty."},Webcam_InvalidIndex:function(c,b){c._errorCode=-2315;c._errorString="The index is out of range."},Webcam_InvalidRemoteFilename:function(b){b._errorCode=-2316;b._errorString="The RemoteFile field is empty in the Webcam Download Function."},Pdf_InvalidRemoteFilename:function(b){b._errorCode=-2317;b._errorString="The RemoteFile field is empty in the Pdf Download Function."},InvalidDestination:function(b){b._errorCode=-2318;b._errorString="Invalid destination file."},InvalidSourceFile:function(b){b._errorCode=-2319;b._errorString="Invalid source file."},InvalidFile:function(b){b._errorCode=-2320;b._errorString="Invalid file."},hasLicenseError:function(b){return(b._errorCode>=-2348&&b._errorCode<=-2325)},OCR_InvalidIndex:function(c,b){c._errorCode=-2321;c._errorString="The index is out of range."},OCR_InvalidLeftOrTopOrRightOrBottom:function(b){b._errorCode=-2322;b._errorString="The left or top or right or bottom you entered is invalid."},OCR_InvalidOutputFormat:function(b){b._errorCode=-2323;b._errorString="The OCR output format is not supported."},OCR_InvalidPageSetMode:function(b){b._errorCode=-2324;b._errorString="The OCR page set mode is not supported."},LicenseEmptyOrInvalid:function(b){b._errorCode=-2325;b._errorString="The current product key is empty or invalid."},LicenseExpired:function(c,b){c._errorCode=-2326;var d="";if(b&&b!=""){if(b.indexOf("on")==-1){d=" on "+b}}c._errorString="The current product key has expired"+d+", please contact the site administrator."},LicenseNoChrome:function(b){b._errorCode=-2327;b._errorString="The current product key does not support Chrome, please contact the site administrator."},LicenseNoFirefox:function(b){b._errorCode=-2328;b._errorString="The current product key does not support Firefox, please contact the site administrator."},LicenseNoIE:function(b){b._errorCode=-2329;b._errorString="The current product key does not support IE, please contact the site administrator."},LicenseNoEdge:function(b){b._errorCode=-2330;b._errorString="The current product key does not support Edge, please contact the site administrator."},LicenseNoSafari:function(b){b._errorCode=-2392;b._errorString="The current product key does not support Safari, please contact the site administrator."},LicenseNoCore:function(b){b._errorCode=-2333;b._errorString="The current product key is missing the core license, please contact the site administrator."},LicenseNo1D:function(b){b._errorCode=-2334;b._errorString="The current product key does not include a license for reading 1D barcode, please contact the site administrator."},LicenseNo2DQR:function(b){b._errorCode=-2335;b._errorString="The current product key does not include a license for reading QRcode barcode, please contact the site administrator."},LicenseNo2DPDF417:function(b){b._errorCode=-2336;b._errorString="The current product key does not include a license for reading PDF417 barcode, please contact the site administrator."},LicenseNo2DDataMatrix:function(b){b._errorCode=-2337;b._errorString="The current product key does not include a license for reading DataMatrix barcode, please contact the site administrator."},LicenseNoWebcam:function(b){b._errorCode=-2338;b._errorString="The current product key does not support Webcam, please contact the site administrator."},LicenseNoPDF:function(b){b._errorCode=-2339;b._errorString="The current product key does not support pdf rasterizer, please contact the site administrator."},LicenseNoOCR:function(b){b._errorCode=-2340;b._errorString="The current product key does not support OCR, please contact the site administrator."},LicenseNoOCRPro:function(b){b._errorCode=-2341;b._errorString="The current product key does not support OCR pro, please contact the site administrator."},LicenseBadDomain:function(b){b._errorCode=-2342;b._errorString="The domain of your current site does not match the domain bound in the current product key, please contact the site administrator."},LicenseNotSupportBorwser:function(b){b._errorCode=-2343;b._errorString="The current product key does not support your browser, please contact the site administrator."},LicenseNotSupportWindows:function(b){b._errorCode=-2344;b._errorString="The current product key does not support Windows OS, please contact the site administrator."},LicenseNotSupportMAC:function(b){b._errorCode=-2345;b._errorString="The current product key does not support MAC OS, please contact the site administrator."},LicenseNotSupportLinux:function(b){b._errorCode=-2346;b._errorString="The current product key does not support Linux OS, please contact the site administrator."},LicenseNotSupportOS:function(b){b._errorCode=-2347;b._errorString="The current product key does not support your OS, please contact the site administrator."},LicenseLower:function(b){b._errorCode=-2348;b._errorString="The current product key is invalid because it's generated with the licenses of a different major version."},BarcodeLicenseEmpty:function(b){b._errorCode=-2349;b._errorString="The current product key does not include a license for reading barcode, please contact the site administrator."},IndicesCannotEmpty:function(b){b._errorCode=-2350;b._errorString="The indices cannot be empty."},UploadIndexMoreThanOne:function(b){b._errorCode=-2351;b._errorString="You cannot upload more than one image when the format is BMP, JPG or PNG"},IndicesOutOfRange:function(b){b._errorCode=-2352;b._errorString="The indices are out of range."},HttpHeaderNotAllowed:function(b){b._errorCode=-2353;b._errorString="The header name being used is a protected keyword and is not allowed."},HttpHeaderIsEmpty:function(b){b._errorCode=-2354;b._errorString="The header name cannot be empty."},HttpHeaderIsNull:function(b){b._errorCode=-2355;b._errorString="The header name cannot be null."},HttpHeaderIsUndefined:function(b){b._errorCode=-2356;b._errorString="The header name cannot be undefined."},HttpHeaderIsInvalid:function(b){b._errorCode=-2357;b._errorString="The header name you entered is invalid."},IndicesNotArray:function(b){b._errorCode=-2358;b._errorString="The type of the parameter indices must be an Array."},IndexOutOfRange:function(b){b._errorCode=-2359;b._errorString="The index is out of range."},IndexNullOrUndefined:function(b){b._errorCode=-2360;b._errorString="The index is null or undefined."},ConvertBase64IndexMoreThanOne:function(b){b._errorCode=-2361;b._errorString="You cannot convert more than one image to base64 string when the format is BMP, JPG or PNG."},InvalidImageType:function(b){b._errorCode=-2362;b._errorString="The image type is not supported."},InvalidDataFormat:function(b){b._errorCode=-2363;b._errorString="The data format is not supported."},InvalidUploadInSegments:function(b){b._errorCode=-2364;b._errorString="Please use a Boolean value for the parameter bUploadInSegments."},InvalidUrl:function(b){b._errorCode=-2365;b._errorString="The url is invalid."},ConvertBase64Failed:function(b){b._errorCode=-2366;b._errorString="Converting images to a base64 string failed."},InvalidSegmentUploadThreshold:function(b){b._errorCode=-2367;b._errorString="Invalid value for the parameter segmentUploadThreshold."},InvalidModuleSize:function(b){b._errorCode=-2368;b._errorString="Invalid value for the parameter moduleSize."},LicenseNotSupportWasm:function(b){b._errorCode=-2369;b._errorString="The current product key does not support Wasm, please contact the site administrator."},LicenseNotSupportPdfRWasm:function(b){b._errorCode=-2370;b._errorString="The current product key does not support Pdf Rasterizer Wasm, please contact the site administrator."},MustUpgradeService:function(b){b._errorCode=-2207;b._errorString="The Dynamsoft Service installed on your computer is outdated and no longer works with the JavaScript code on the website."},WebTwainModuleDownloadFailure:function(b){b._errorCode=-2369;b._errorString="The module for Dynamic Web TWAIN has failed to download."},LicenseIsFuture:function(c,b){c._errorCode=-2370;c._errorString="The current product key is invalid, please contact the site administrator."},WebTwainModuleNotExist:function(b){b._errorCode=EnumDWT_Error.ModuleNotExists;b._errorString="Dynamic Web TWAIN scanner module is not installed and it is also missing on the server, please contact the site administrator."},ConvertBinaryIndexMoreThanOne:function(b){b._errorCode=-2372;b._errorString="You cannot convert more than one image to binary when the format is BMP, JPG or PNG."},Overlay_InvalidLeftOrTopOrRightOrBottom:function(b){b._errorCode=-2375;b._errorString="The left or top or right or bottom you entered is invalid."},GenerateURL_InvalidRetFromServer:function(b){b._errorCode=-2376;b._errorString="The generate url failed."},ImageCaptureDriverTypeError:function(b){b._errorCode=-2377;b._errorString="Failed to set Image Capture Driver Type."},InvalidTiffTagError:function(b){b._errorCode=-2378;b._errorString="Invalid value for the tiff tag code."},OCR_InvalidRemoteFilename:function(b){b._errorCode=-2379;b._errorString="The RemoteFile field is empty in the OCR Download Function."},Uploader_ModuleError:function(b){b._errorCode=-2380;b._errorString="Please make sure the Uploader Module has been installed."},ScanUploader_InvalidScanSetup:function(b){b._errorCode=-2381;b._errorString="scanSetup is invalid."},ScanUploader_InvalidTransferMode:function(b){b._errorCode=-2382;b._errorString="Scanner setup error: Invalid Transfer Mode."},ScanUploader_InvalidFileXfer:function(b){b._errorCode=-2383;b._errorString="Scanner setup error: fileXfer is invalid."},ScanUploader_InvalidFileXferFilename:function(b){b._errorCode=-2384;b._errorString="Scanner setup error: Invalid fileName in fileXfer."},ScanUploader_InvalidFileXferFileFormat:function(b){b._errorCode=-2385;b._errorString="Scanner setup error: Invalid fileFormat in fileXfer."},ScanUploader_InvalidHttpParams:function(b){b._errorCode=-2386;b._errorString="Output setup error: Invalid httpParams in outputSetup."},ScanUploader_InvalidHttpType:function(b){b._errorCode=-2387;b._errorString="Output setup error: Invalid type in outputSetup."},ScanUploader_InvalidHttpUrl:function(b){b._errorCode=-2388;b._errorString="Output setup error: Invalid url in outputSetup.httpParams."},ScanUploader_InvalidHttpFilename:function(b){b._errorCode=-2389;b._errorString="Output setup error: Invalid fileName in outputSetup.httpParams."},ScanUploader_InvalidOutputFormat:function(b){b._errorCode=-2390;b._errorString="Output setup error: Invalid format in outputSetup."},InvalidImageID:function(b){b._errorCode=-1034;b._errorString="Invalid image ID."},InvalidEventName:function(b){b._errorCode=-2391;b._errorString="Invalid event name."},ConvertBlobIsEmpty:function(b){b._errorCode=-2393;b._errorString="Failed to convert the data to blob."},InvalidTagName:function(b){b._errorCode=-2394;b._errorString="Invalid tag name."},MobileNotSupport:function(c,b){c._errorCode=-2400;c._errorString=b+" doesn't work under current settings."},LoadImageFailed:function(c,b){c._errorCode=-2401;c._errorString="Failed to load image: "+a(b)},RotateFailed:function(c,b){c._errorCode=-2402;c._errorString="Failed to rotate image: "+a(b)},FlipFailed:function(c,b){c._errorCode=-2403;c._errorString="Failed to flip image: "+a(b)},MirrorFailed:function(c,b){c._errorCode=-2404;c._errorString="Failed to mirror image: "+a(b)},EraseFailed:function(c,b){c._errorCode=-2405;c._errorString="Failed to erase image: "+a(b)},InvertFailed:function(c,b){c._errorCode=-2406;c._errorString="Failed to invert image: "+a(b)},SaveImageFailed:function(c,b){c._errorCode=-2407;c._errorString="Failed to save image: "+a(b)},ChangeImageSizeFailed:function(c,b){c._errorCode=-2408;c._errorString="Failed to change image size: "+a(b)},CropFailed:function(c,b){c._errorCode=-2409;c._errorString="Failed to crop image: "+a(b)},SkewAngleFailed:function(c,b){c._errorCode=-2410;c._errorString="Failed to skew angle: "+a(b)},ConvertToGrayScaleFailed:function(c,b){c._errorCode=-2411;c._errorString="Failed to convert to gray scale: "+a(b)},ConvertToBWScaleFailed:function(c,b){c._errorCode=-2412;c._errorString="Failed to convert to black and white scale: "+a(b)},SetDPIFailed:function(c,b){c._errorCode=-2413;c._errorString="Failed to set dpi: "+a(b)},SetImageWidthFailed:function(c,b){c._errorCode=-2414;c._errorString="Failed to set image width: "+a(b)},GetLicenseInfoFailed:function(c,b){c._errorCode=-2415;c._errorString="Failed to get license info: "+a(b)},InvalidParameter:function(b){b._errorCode=-2416;b._errorString="Invalid parameter type."},MobileServer_InvalidLeftOrTopOrRightOrBottom:function(b){b._errorCode=-2417;b._errorString="The left or top or right or bottom you entered is invalid."},MobileServer_InvalidWidth:function(b){b._errorCode=-2418;b._errorString="The width you entered is invalid."},MobileServer_InvalidHeight:function(b){b._errorCode=-2419;b._errorString="The height you entered is invalid."},MobileServer_InvalidXResolution:function(b){b._errorCode=-2420;b._errorString="The x resolution you entered is invalid."},MobileServer_InvalidYResolution:function(b){b._errorCode=-2421;b._errorString="The y resolution you entered is invalid."},MobileServer_InvalidImage:function(b){b._errorCode=-2422;b._errorString="The image source is invalid."},MobileServer_InvalidIndex:function(b){b._errorCode=-2423;b._errorString="The index is invalid."},GetMD5Failed:function(c,b){c._errorCode=-2424;c._errorString="Failed to get MD5: "+a(b)},ConvertFromBase64Failed:function(b){b._errorCode=-2425;b._errorString="Converting image from a base64 string failed."},LicenseTrialFullMixed:function(b){b._errorCode=-2426;b._errorString="You have used a full license with a trial license which is not permitted. Please check and update Dynamsoft.WebTwainEnv.ProductKey."},BarcodeReaderError:function(c,b){c._errorCode=-2427;c._errorString=b},TiffTagCountExceedError:function(b){b._errorCode=-2428;b._errorString="Tiff tag count has exceeded the limit."},SelectSourceMustAsync:function(b){b._errorCode=-2429;b._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when ImageCaptureDriverType is set to TWAIN_AND_ICA or TWAIN_AND_TWAIN64."},HttpLicenseInvalid:function(b){b._errorCode=-2430;b._errorString="The current product key is invalid."},LicenseNotSupportWasmWasm:function(b){b._errorCode=-2431;b._errorString="The current product key does not support Webcam Wasm, please contact the site administrator."},InvalidParameterInCallback:function(b){b._errorCode=-2432;b._errorString="Invalid parameter."},ActiveXNotSupport:function(b){b._errorCode=-2433;b._errorString="The ActiveX edition does not support this method or property."},DetectCallbackErr:function(b){b._errorCode=-2434},PerspectiveCallback:function(b){b._errorCode=-2435},webtwain_id_not_string:function(){return'Error: The "WebTwainId" is not a string.'},container_id_not_string:function(){return'Error: The argument you passed to the parameter "conatinerId" is not a string.'},container_id_not_exist:function(b){return'Error: The element specified by the id "'+b+"\" doesn't exist."},WebviewerError:function(d,c,b){if(b){d._errorCode=b}else{d._errorCode=-2500}d._errorString=c},ClearErrorInfo:function(b){b._errorCode=0;b._errorString=""},__last:false}})();Dynamsoft.Ready(function(a){a.LS={isSupportLS:function(){var c=Dynamsoft.navInfoSync,b=false;if(c.bEdge&&c.bFileSystem){}else{try{b=(window.localStorage)?true:false}catch(d){}}return b},item:function(c,d,b){var e=null;if(this.isSupportLS()){if(d){localStorage.setItem(c,d);e=d}else{e=localStorage.getItem(c)}if(e===null){return b}return e}else{return b}},removeItem:function(b){if(this.isSupportLS()){localStorage.removeItem(b)}else{return false}return true}}});Dynamsoft.Ready(function(c,h){c.html5=c.html5||{};if(!c.product.bHTML5Edition){return}var i=1,k,f=!1,e=!0,b=0,g=1,a=1,d=2,j=Dynamsoft.WebTwainEnv;k=c.html5.Funs={notSupportProperty:function(l){},notSupportMethod:function(l){},getRandom:function(){var m=new Date().getTime()%10000,l=[],o;for(var n=0;n<5;n++){o=Math.floor(Math.random()*10);if(n==0&&o==0){n=-1;continue}l.push(o)}if(m<10){l.push("000")}else{if(m<100){l.push("00")}else{if(m<1000){l.push("0")}}}l.push(m);return l.join("")},generateCmdId:function(){i++;return i},cformat:function(t,o){if(c.isString(t)){var s=t.indexOf("<%"),r,p,n,m,l;if(s==-1){return t}p=t.substring(0,s);r=t.indexOf(">",p);if(s+2<r){n=t.substring(s+1,r)}else{return t}m=t.substring(r+1);try{l=c.sprintf(n,o)}catch(q){l=""}return[p,l,m].join("")}return""},sendData:function(m,x,r,v){var w,q,n,o,l,u,p,s;if(!v){try{m.send(x)}catch(t){c.log(t)}return f}o=new ArrayBuffer(12);q=r&&r.size?r.size:0;s=new Blob([x]);w=s.size;n=w+q;l=new DataView(o);for(p=0;p<8;p++){if(n){l.setUint8(p,n%256);n=parseInt(n/256)}else{break}}for(p=0;p<4;p++){if(w){l.setUint8(8+p,w%256);w=parseInt(w/256)}else{break}}u=new Blob([o,s]);m.send(u);if(q>0){m.send(r)}o=null;s=null;u=null;return e},__pushElement:function(m,l){if(c.isString(l)){m.push('"');m.push(l);m.push('"')}else{if(c.isArray(l)){var n=e;m.push("[");c.each(l,function(o){if(n){n=f}else{m.push(",")}k.__pushElement(m,o)});m.push("]")}else{if(l===undefined){m.push('""')}else{m.push(l)}}}},makeParams:function(){var m=arguments;if(m===undefined||m.length===0){return undefined}else{var l=[],o,n;if(m.length===1){o=m[0];l.push("[");k.__pushElement(l,o);l.push("]")}else{if(m.length===2){o=m[0];n=m[1];l.push("[");k.__pushElement(l,o);l.push(",");k.__pushElement(l,n);l.push("]")}else{k.__pushElement(l,Array.prototype.slice.call(m))}}return l.join("")}},getJson:function(s,n,t,l){var r=[];r.push("{");r.push('"id":"');r.push(s.clientId);r.push('"');if(l){r.push(',"cmdId":"');r.push(l);r.push('"')}r.push(',"method":"');r.push(n);r.push('"');r.push(',"module":"dwt","version":"');var q=Dynamsoft.WebTwainEnv,o=[c.product.getDWTPrefix(),c.product.getServerVersionInfo()].join("");r.push(o);r.push('"');if(t!==undefined&&t!==null){r.push(',"parameter":');r.push(t)}r.push("}");return r.join("")},refreshImageAfterInvokeFun:function(l,n,m){return(m==1)},loadHttpBlob:function(r,y,q,s,z,l,x,n){var p="loadHttpBlob",A,u,w=f;A=function(G,D,F){var C,E;if(G&&c.isArray(G)&&G.length>2){C=G[1];E=G[2]}else{C=D;E=F}if(E.state==2&&E.status==0){if(E.statusText==="abort"){var m=e;c.Errors.HttpDownloadError(r,m)}else{c.Errors.HttpDownloadUrlError(r)}}else{c.Errors.HttpDownloadError(r,f,C,E.status)}if(c.isFunction(l)){l()}};u={method:y,url:q,async:s,onSuccess:z,onError:A,headers:f,onComplete:function(){c.bio=f}};if(n){u.headers=n}if(r.HTTPUserName!=""){u.username=r.HTTPUserName;u.password=r.HTTPPassword}if(s){u.dataType="blob";if(c.isFunction(x)){u.beforeSend=function(m){m.addEventListener("progress",function(C){delete (C.totalSize);delete (C.position);x(C)},f)}}w=e}else{if(Dynamsoft.navInfoSync.bIE){u.dataType="arraybuffer";u.onSuccess=function(F,E,D){var G,C,m;G=F||D.responseData;if(G){m=new Uint8Array(G)}r._errorCode=0;r._errorString="";z(m);m=null;w=e}}else{u.contentType="text/plain; charset=x-user-defined";u.mimeType="text/plain; charset=x-user-defined";u.onSuccess=function(G,F,E){var H,C,m;H=E.responseText;C=H.length;m=new Uint8Array(C);for(var D=0;D<C;D++){m[D]=H.charCodeAt(D)}r._errorCode=0;r._errorString="";z(m);m=null;w=e}}if(u.headers){c.mix(u.headers,{"X-Requested-With":f})}else{u.headers={"X-Requested-With":f}}}if(y=="post"){var t=r.httpFormFields,o;if(t){try{o=new FormData();c.each(t,function(C,m){if(C instanceof Blob){var D=C.name;o.append(m,C,D)}else{o.append(m,C)}});c.mix(u,{data:o,processData:f,contentType:f})}catch(v){}}}var B=c.ajax(u);if(s){c.bio=B}return w},combineUrl:function(p,m,o){var l=[],n=m;if(n===undefined||o===undefined){return f}if(!c.isString(n)){n=String(m)}if(n.indexOf("http://")==0){n=n.replace("http://","");l.push("http://")}else{if(n.indexOf("https://")==0){n=n.replace("https://","");l.push("https://")}else{if(n.indexOf("//")==0){n=n.replace("//","")}if(p.IfSSL){l.push("https://")}else{l.push("http://")}}}l.push(n);if(n.indexOf(":")<0){if(p.HTTPPort==""){p.HTTPPort=c.detect.ssl?443:80}if((!c.detect.ssl&&p.HTTPPort!=80)||(c.detect.ssl&&p.HTTPPort!=443)){l.push(":");l.push(p.HTTPPort)}}if(o.indexOf("/")!==0){l.push("/")}l.push(o);return l.join("")},httpPostUpload:function(A,p,s,z,w,u,x,r,B,m,C,l){if(!s||s.size<=0){c.Errors.UploadFileCannotEmpty(A);if(c.isFunction(l)){l()}return f}var o=A.MaxUploadImageSize,y=s.size,t=s.type,q,D;if(y>o&&o!=-1){c.Errors.UploadExceededMaxSize(A);if(c.isFunction(l)){l()}return f}if(t===""||t&&t!=A.HttpContentTypeFieldValue){var v=s.slice||s.webkitSlice||s.mozSlice,n=s.name;if(!c.isString(n)||n==""){n=s.fileName}q=v.call(s,0,y,A.HttpContentTypeFieldValue);q.name=n}else{q=s}s=null;q.remoteFilename=A.__remoteFilename;D=this.httpUploadByBIO(A,p,q,w,z,u,x,r,B,m,C,l);q=null;return D},httpPostUploadFiles:function(D,p,r,C,y,w,z,s,E,F,l){var o=D.MaxUploadImageSize,q=0,A;if(!r||!c.isArray(r)||r.length<=0){c.Errors.UploadFileCannotEmpty(D);if(c.isFunction(l)){l()}return f}for(A=0;A<r.length;A++){var u=r[A];if(!u||u.size<=0){c.Errors.UploadFileCannotEmpty(D);if(c.isFunction(l)){l()}return f}var B=u.size,v=u.type,G;q+=B;if(v===""||v&&v!=D.HttpContentTypeFieldValue){var x=u.slice||u.webkitSlice||u.mozSlice,n=u.name,t=x.call(u,0,B,D.HttpContentTypeFieldValue);if(!c.isString(n)||n==""){n=u.fileName}t.name=this.cformat(n,A+1);r[A]=t}r[A].remoteFilename=this.cformat(D.__remoteFilename,A+1);u=null}if(q>o&&o!=-1){c.Errors.UploadExceededMaxSize(D);if(c.isFunction(l)){l()}return f}var m=false;G=this.httpUploadByBIO(D,p,r,y,C,w,z,s,E,m,F,l);for(A=0;A<r.length;A++){r[A]=null}r=null;return G},httpPostUploadString:function(r,l,t,q,x,m,s,n,z,u,A){var y,p,v,w;if(t==""){c.Errors.UploadFileCannotEmpty(r);if(c.isFunction(A)){A()}return f}p=r.MaxUploadImageSize;v=t.length;if(v>p&&p!=-1){c.Errors.UploadExceededMaxSize(r);if(c.isFunction(A)){A()}return f}y=new Blob([t],{type:"text/plain"});y.name=q;var o=false;w=this.httpUploadByBIO(r,l,y,x,e,m,s,n,z,o,u,A);y=null;return w},httpUploadByBIO:function(s,m,l,x,w,n,t,o,z,q,v,A){var B,r,y,p;y=s.httpFormFields;p=new FormData();c.each(y,function(D,C){if(D instanceof Blob){var E=D.name;p.append(C,D,E)}else{p.append(C,D)}});c.bio=new c.BIO({action:m,data:p,async:w,retry:o,bOnlyEmptyIsOK:z});B=c.bio.get("uploadType");if(B){r=B.get("ajaxConfig");if(r&&r.headers&&n){c.mix(r.headers,n)}if(x>=0){B.set("blockSize",x)}if(s.__withCredentials){c.mix(r.xhrFields,{withCredentials:true})}}s.__HTTPPostResponseString=f;c.bio.on(c.BIO.event.SUCCESS,function(F){c.bio=f;if(F&&c.isString(F.response)){s.__HTTPPostResponseString=F.response}else{s.__HTTPPostResponseString=""}if(c.isFunction(s.__OnHttpUploadStatus)){var D=F.name,E=200,C;C={fileName:D,percentage:100,statusCode:E,responseString:s.__HTTPPostResponseString};s.__OnHttpUploadStatus(C)}if(c.isFunction(v)){v(s.__HTTPPostResponseString)}});c.bio.on(c.BIO.event.ERROR,function(I){var G=(I&&I.canceled),J=(I&&I.timeout),E=f,H=0;c.bio=f;if(I&&c.isString(I.response)){s.__HTTPPostResponseString=I.response}else{s.__HTTPPostResponseString=""}if(!G){if(I&&I.msg){E=I.msg}if(I&&I.httpStatus){H=I.httpStatus}}c.Errors.UploadError(s,G,E,H);if(c.isFunction(s.__OnHttpUploadStatus)){var D=I.name,F=H,C;C={fileName:D,percentage:100,statusCode:F,responseString:s.__HTTPPostResponseString};s.__OnHttpUploadStatus(C)}if(c.isFunction(A)){A(s.__HTTPPostResponseString)}});if(t||c.isFunction(s.__OnHttpUploadStatus)){c.bio.on(c.BIO.event.PROGRESS,function(F){delete (F.totalSize);delete (F.position);var G=(F.total===0)?100:Math.round(F.loaded*100/F.total),H=[F.loaded," / ",F.total].join("");if(c.isFunction(s.__OnHttpUploadStatus)){var D=F.name,E=0,C;if(G>99){G=99}C={fileName:D,percentage:G,statusCode:E,responseString:""};s.__OnHttpUploadStatus(C)}if(t){s._OnPercentDone([0,G,"","http",F.name])}});if(t){s._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"])}if(c.isFunction(s.__OnHttpUploadStatus)){var u="";if(c.isArray(l)&&l.length>0){}else{if(l&&l.name&&l.name!=""){u=l.name}else{if(l&&l.fileName){u=l.fileName}}}s.__OnHttpUploadStatus({fileName:u,percentage:0,statusCode:0,responseString:""})}}if(q&&q.bCancel){q.st=2;if(c.isFunction(A)){A(false)}return false}return c.bio.upload(l)},httpPutImage:function(o,l,n,p,t,m,r){var s=e,q={method:"PUT",url:l,hasContent:e,processData:f,async:p,data:n,onSuccess:t,onError:function(){s=f;if(c.isFunction(m)){m()}},onComplete:function(){c.bio=f},beforeSend:function(u){if(c.isFunction(r)){u.upload.addEventListener("progress",function(v){delete (v.totalSize);delete (v.position);r(v)},f)}}};if(o.HTTPUserName!=""){q.username=o.HTTPUserName;q.password=o.HTTPPassword}if(!p){c.mix(q,{headers:{"X-Requested-With":f}})}c.bio=c.ajax(q);return s},dialog:f,dialogRef:0,showMask:function(n){var l=this;c.log("showMask:"+n+"--"+l.dialogRef);if(l.dialogRef==0){c.detect.showMask()}l.dialogRef++},hideMask:function(n){var l=this;c.log("hideMask:"+n+"--"+l.dialogRef);if(l.dialogRef>1){l.dialogRef--}else{if(l.dialogRef<=1){c.detect.hideMask();l.dialog=f;l.dialogRef=0}}},setBtnCancelVisibleForProgress:function(n,m){var l=this;if((c.cancelFrome==0&&n.__IfShowProgressBar==e)||(c.cancelFrome!=0&&n.__IfShowCancelDialogWhenImageTransfer==e)){c.setBtnCancelVisibleForProgress(m)}},EVENTS:["OnPostAllTransfers","OnPostTransfer","OnPostLoad","OnPreTransfer","OnPreAllTransfers","OnResult","OnTransferCancelled","OnTransferError","OnSourceUIClose","OnBitmapChanged","OnGetFilePath","OnPercentDone","OnPostTransferAsync","OnPreAllTransfersAsync"],SEND_BACK_EVENTS:["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnGetFilePath","OnPostLoad"],handleEvent:function(o,m){var q=this,n=m.result[0],l=o._objWS,p=f;c.each(k.EVENTS,function(t,s){if(m.event===t){var r=["_",t].join("");p=e;if(c.isFunction(o[r])){o[r](m.result,m)}return f}});if(p){c.log("handled event:"+m.event);c.each(k.SEND_BACK_EVENTS,function(s,r){if(k.isServerInvalid(o)){return f}if(m.event===s){c.log("sendback event:"+m.event);k.sendData(l,k.getJson(o,m.event,k.makeParams(n),0),f,e);return f}})}else{c.each(c.Addon_Events,function(t,s){if(m.event===t){var r=["_",t].join("");p=e;if(c.isFunction(o[r])){o[r](m.result)}return f}});if(p){c.log("handled addon event:"+m.event);c.each(c.Addon_Sendback_Events,function(s,r){if(k.isServerInvalid(o)){return f}if(m.event===s){c.log("sendback addon event:"+m.event);k.sendData(l,k.getJson(o,m.event,k.makeParams(n),0),f,e);return f}})}}return p},getImageType:function(m){if(m===undefined){return -1}var l=m.length;if(l<4){return -1}var n=m.lastIndexOf(".");if(n===-1){return -1}var o=m.slice(n).toLowerCase();if(o===".bmp"||o===".dib"){return EnumDWT_ImageType.IT_BMP}if(o===".jpg"||o===".jpe"||o===".jpeg"||o===".jfif"){return EnumDWT_ImageType.IT_JPG}if(o===".tif"||o===".tiff"){return EnumDWT_ImageType.IT_TIF}if(o===".png"){return EnumDWT_ImageType.IT_PNG}if(o===".pdf"){return EnumDWT_ImageType.IT_PDF}return -1},addImageFileExt:function(m,l){var n;var o=m.substring(m.lastIndexOf(".")).toLowerCase();if(o==".bmp"||o==".dib"||o==".jpg"||o==".jpe"||o==".jpeg"||o==".jfif"||o==".tif"||o==".tiff"||o==".png"||o==".pdf"){return m}if(l==EnumDWT_ImageType.IT_BMP){n=[m,".bmp"].join("")}else{if(l==EnumDWT_ImageType.IT_JPG){n=[m,".jpg"].join("")}else{if(l==EnumDWT_ImageType.IT_PNG){n=[m,".png"].join("")}else{if(l==EnumDWT_ImageType.IT_TIF){n=[m,".tif"].join("")}else{if(l==EnumDWT_ImageType.IT_PDF){n=[m,".pdf"].join("")}}}}}return n},autoDiscardBlankImage:function(o,l){if(c.config.bDiscardBlankImage){var m=o._ImgManager.getCurrentImageIndex();if(o.IsBlankImage(m)){o.RemoveImage(m)}var n=["Blank Discard (",l,"): ",o.ErrorString].join("");if(c.isFunction(o.__OnPrintMsg)){o.__OnPrintMsg(n)}}},replaceLocalFilename:function(l){var m;if(l===undefined){return""}l=String(l);m=l.replace(/\\/g,"\\\\");if(Dynamsoft.navInfoSync.bFileSystem){m=decodeURI(m)}return m},GetImageInfo:function(m,n){var l=m._ImgManager.convertClientIndexToServerId(n);if(l==-1){c.Errors.IndexOutOfRange(m);return false}return m._innerFun("GetImageInfo",k.makeParams(l))},isServerInvalid:function(m){var o=m,l,n;l=!o.bReady||o._objWS===null;n=o.__bMustUpgradeService;if(l){c.Errors.Server_Invalid(o)}else{if(n){c.Errors.MustUpgradeService(o)}}return l||n||o._errorCode==-2208},isHttpServerInvalid:function(m){var o=m,l,n;l=!o.bReady||o.httpUrl===null;n=o.__bMustUpgradeService;if(l){c.Errors.Server_Invalid(o)}else{if(n){c.Errors.MustUpgradeService(o)}}return l||n||o._errorCode==-2208},getBlobTypeByImageType:function(m){var l="application/octet-stream";switch(m){case 0:l="image/bmp";break;case 1:l="image/jpeg";break;case 2:l="image/tiff";break;case 3:l="image/png";break;case 4:l="application/pdf";break}return l},DEF:function(n,l,q,o){var p;if(q!==b&&q!==g){p=q}else{p={};if(q){if(o==a){p.set=function(m){var r=m*1;if(!c.isNumber(r)||isNaN(r)){c.Errors.InvalidValue(n);return f}n._resetErr();return n._innerFun(l,k.makeParams(r))}}else{if(o==d){p.set=function(m){if(!c.isBoolean(m)){c.Errors.InvalidValue(n);return f}n._resetErr();return n._innerFun(l,k.makeParams(m))}}else{p.set=function(m){if(!c.isString(m)){c.Errors.InvalidValue(n);return f}n._resetErr();return n._innerFun(l,k.makeParams(m))}}}}}if(!p.get){p.get=function(){n._resetErr();return n._innerFun(l)}}if(!(l in n)){Object.defineProperty(n,l,p)}},_DEF_NOT_SUPPORT_MOBILE_A:function(l,o,n){var m={get:function(){return l._mobileNotSupport(o)}};if(n===g||c.isUndef(n)){m.set=m.get}if(!(o in l)){Object.defineProperty(l,o,m)}},DEF_NOT_SUPPORT_MOBILE:function(m,l,n){if(c.isArray(l)){c.each(l,function(o){k._DEF_NOT_SUPPORT_MOBILE_A(m,o,n)})}else{k._DEF_NOT_SUPPORT_MOBILE_A(m,l,n)}},callbacks:[],pushCallback:function(l,q,n){var p={method:l,callback:q,ticks:n};k.callbacks(p)},RemoveNonPrintableChar:function(l){if(c.isString(l)){return l.replace(/[^\x20-\x7E]/g,"")}else{return l}},refreshUIRef:0}});Dynamsoft.Ready(function(e,b){var a=Dynamsoft;if(!e.product.bHTML5Edition){return}var g=e.html5.Funs,d=g.DEF;function f(h){var i=h;d(i,"width",{get:function(){return this._parent._width},set:function(j){this.SetSize(j,false)}});d(i,"height",{get:function(){return this._parent._height},set:function(j){this.SetSize(false,j)}})}function c(j,i,m){var o=j,l=false,n=false,k;if(o._bNoUI){return false}if(e.isString(i)){if(i.length>0){if(i.charAt(i.length-1)==="%"){l=i}}}if(!l&&i){k=parseInt(i);if(k){l=k+"px"}}if(e.isString(m)){if(m.length>0){if(m.charAt(m.length-1)==="%"){n=m}}}if(!n&&m){k=parseInt(m);if(k){n=k+"px"}}if(l){o._width=l}if(n){o._height=n}return g.changeImageUISize(o,l,n)}e.html5.STwainStyle=function(i){var h=this;h._parent=i;f(h)};e.html5.STwainStyle.prototype.SetSize=function(i,j){c(this._parent,i,j)}});Dynamsoft.Ready(function(d,c){if(!d.product.bHTML5Edition){return}function b(){}var a=239514000;b.prototype.convertServerIdToGuid=function(f){var g=this,e;e=1*f+a;return e};b.prototype.convertGuidToServerId=function(f){var g=this,e;e=1*f-a;return e};d.Index=d.Index||{};d.Index.ImageIndexManager=b});Dynamsoft.Ready(function(a,g){var b=Dynamsoft;if(!a.product.bHTML5Edition){return}var i=a.html5.Funs,e=Dynamsoft.dcp,f=!1,d=!0;a.html5.STwain=function(j){var k=this,l=j||{},n=l.bNoUI,m=l.bLocalService;k.config=l;k.clientId=i.getRandom();k._id=l.id;k._containerID=l.containerID;k._bNoUI=n?d:f;k._bLocalService=m?d:f;k._customIP=f;k._ssl=a.detect.ssl;if(l.customIP){k._customIP=d;k._host=l.host}else{k._host=a.product.host}if(l.customIP||e.bEnhancedMode){k._port=l.port}k.bReady=f;k.httpFormFields={};k._objWS=null;k.__wsRetry=0;k.curCommand=[];k.__OnInternetTransferPercentage=l.onInternetTransferPercentage||"";k.__OnInternetTransferPercentageEx=l.onInternetTransferPercentageEx||"";k.__OnReady=l.onReady||null;k.__OnWSReconnect=l.onWSReconnect||null;k.__OnWSClose=l.onWSClose||null;k.__OnWSMessage=l.onWSMessage||null;k.__OnWSError=l.onWSError||null;k.__OnPercentDone=l.onPercentDone||"";k.__OnPrintMsg=l.onPrintMsg||"";k.__OnResult=l.onResult||"";k.HTTPPassword=l.HTTPPassword||"";k.HTTPPort=l.HTTPPort||(a.detect.ssl?443:80);k.HTTPUserName=l.HTTPUserName||"";k.__HTTPPostResponseString="";k.__strHttpContentTypeFieldValue="application/octet-stream";k.__IfShowProgressBar=d;k.__IfShowCancelDialogWhenImageTransfer=d;k._errorCode=0;k._errorString="";k.__bLoadingImage=f;k.__backgroundColor=f;k.__addon={};k.__remoteFilename="RemoteFile";k.__sourceName=[];k.__defaultSourceName="";k.__sourceCount=0;k.__icaSourceCount=-1;k.__serverId="";k.__bConnecting=f;k.__bTrial=f;k.__licenseInfo=f;k.__httpHeaderMap=f;k.__bForceClose=f;if(k._bLocalService){k.__strProductName=""}else{k.__strProductName=Dynamsoft.WebTwainEnv.ProductName}k.__versionInfo=Dynamsoft.WebTwainEnv.JSVersion;k.__bMustUpgradeService=f;k.__withCredentials=f;k._moduleSize=1024*1024;if(Dynamsoft.dcp.b64bit){k._segementUploadThreshold=4*1024*1024*1024}else{k._segementUploadThreshold=500*1024*1024}k._driverType=EnumDWT_Driver.TWAIN;k.__IfAppendImage=d;k.__maxImagesInBuffer=32767;k.__maxUploadImageSize=-1;k.__insertingIndex=-1;k.objImageIndexManager=new a.Index.ImageIndexManager(k.__maxImagesInBuffer);k._bServerPercentDone=d;k._aryBitmapCache=[];k._aryTiffTag=[];k._tiffCompressionType=EnumDWT_TIFFCompressionType.TIFF_AUTO;k._jpgQuality=80;k._pdfConvertMode=3;k._pdfRealConvertMode=3;k._pdfResolution=200;k._pdfPassword="";k._ifSSL=Dynamsoft.navInfoSync.bSSL;k._bRegistedLoad=false;k._logLevel=0;k._scaleDownThreshold=0;k._pdfWriteSetting={};h(k,l)};var c=a.html5.STwain.prototype;c.getInstance=function(){return this};c._isMobileMode=function(){return !this._bLocalService};c._isPC=function(){var j=Dynamsoft.navInfo;return j.bWin||j.bMac||j.bLinux};c._resetErr=function(){this._errorCode=0;this._errorString=""};c._isNoUI=function(){var j=this;return j._bNoUI};c._mobileNotSupport=function(l,j){var k=this;a.Errors.MobileNotSupport(k,l);if(a.isFunction(j)){j(k.ErrorCode,k.ErrorString)}return false};c._mobileNotSupportAsync=function(k){var j=this;a.Errors.MobileNotSupport(j,k);return a.Promise.reject({code:j.ErrorCode,message:j.ErrorString})};c._nouiNotSupport=function(l,j){var k=this;a.Errors.NoUINotSupport(k,l);if(a.isFunction(j)){j(k.ErrorCode,k.ErrorString)}return false};c._OnReady=function(r){var q=this;a.detect.starting=false;a.detect.bOK=true;q.bReady=true;q.__wsRetry=0;if(q._bLocalService){var k,p,j=q._objWS;if(q._customIP){p={host:q._host,ssl:q._ssl,port:q._port}}else{p=a.detect.urls[a.detect.cUrlIndex];p.host=a.product.host}k=a.getHttpUrl(p);if(j===null){return}j.onopen=null;q.httpUrl=k;j.onmessage=function(u){var s=u.data,B,x;if(typeof(s)==="object"){s=null;u=null;return}if(q.__OnWSMessage){q.__OnWSMessage(s)}var t=s.replace(/\0/g,"");if(t.indexOf("Exception:")>=0||t.indexOf("Error")==0){var A=s;B=q.curCommand.pop()||{};x=false;a.log(A+"@"+B.cmd);if(B.fFun){x=B.fFun(A)}if(!x&&a.isFunction(q.__OnPrintMsg)){q.__OnPrintMsg(A)}return}try{t=a.parse(t)}catch(v){a.log(s)}if(t.event){i.handleEvent(q,t);return}if(t.cmdId){var z=q.curCommand.length,w,o=-1;for(w=z-1;w>=0;w--){if(q.curCommand[w].cmdId==t.cmdId){o=w;B=q.curCommand.splice(o,1)[0];break}}if(o<0){return}}else{B=q.curCommand.pop()||{}}if(t.exception!==undefined&&t.description!==undefined){q._errorCode=t.exception;q._errorString=t.description}else{if(t.method!="StartScan"&&t.method!="GetAddOnVersion"){q._errorCode=0;q._errorString=""}}if(t.method=="ReadBarcode"||t.method=="OCRRecognize"||(t.request&&t.request.method=="OCRProRecognize")){if(B.sFun){B.sFun(t)}return}else{if(t.method=="ActiveUI"||t.method=="VersionInfo"||t.method=="ConvertToBase64"||t.method=="SaveSelectedImagesToBase64Binary"||t.method=="ConvertToBlob"){if(B.sFun&&t.result.length>0){B.sFun(t.result);return}}else{if(t.method=="ShowFileDialog"||t.method=="SplitTiff"||t.method=="SplitPDF"||t.method=="EncodeAsBase64"){if(B.sFun){B.sFun(t.result);return}}else{if(t.method=="SetCapabilities"){if("exception" in t&&t.exception!="0"){if(t.result.errorCode&&t.result.errorString){q._errorCode=t.result.errorCode;q._errorString=t.result.errorString}else{q._errorCode=t.exception;q._errorString=t.description}if(B.fFun){B.fFun(t.result)}t=null;return}else{if(B.sFun){B.sFun(t.result)}t=null;return}}}}}if(t.result&&t.result.length&&t.result[0]=="1"){if(B.sFun){B.sFun()}}else{if(t.exception){x=false;if(B.fFun){x=B.fFun(q._errorString)}if(!x&&t.exception&&t.exception<0&&t.exception!=-2115){if(a.isFunction(q.__OnPrintMsg)){q.__OnPrintMsg(q._errorString)}}}else{if(t.method=="LoadImage"||t.method=="LoadImageEx"||t.method=="LoadImageFromBytes"||t.method=="LoadImageFromBase64Binary"||t.method=="LoadDibFromClipboard"||t.method=="FTPDownload"||t.method=="FTPDownloadEx"){if(B.sFun){B.sFun(t.result)}t=null;return}var y=["result:"];if(B.fFun){B.fFun(i.__pushElement(y,t.result))}}}t=null};j.onclose=function(){q.bReady=false;q.__wsRetry=0;a.Errors.Server_Invalid(q);if(!q.__bForceClose&&!a.page.bUnload&&!a.detect.starting){a.detect.aryReconnectSTwains.push(q);setTimeout(a._reconnect,1000);a.detect.starting=true}if(q.__OnWSClose){q.__OnWSClose()}i.hideMask(true);a.detect.bOK=false;q.__bForceClose=false};j.onerror=function(o){q.bReady=false;q.__wsRetry=0;a.Errors.Server_Invalid(q);a.detect.bOK=false;if(!a.page.bUnload&&!a.detect.starting){a.detect.aryReconnectSTwains.push(q);setTimeout(a._reconnect,1000);a.detect.starting=true}if(o){a.log("websocket error: "+o)}if(q.__OnWSError){q.__OnWSError()}i.hideMask(true)};if(r){if(q._ImgManager){q._ImgManager.clear()}q.clientId=i.getRandom();q._ImgManager.OnReady();q._innerActiveUI(function(t){var u=q.__serverId,o,v;if(t&&t.length>=3){o=t[1];v=t[2];q.__strProductName=v}else{if(t&&t.length>=2){o=t[1]}else{a.log("ActiveUI return parameters error.")}}if(v){v=v.toLowerCase()}q.__serverId=o;a.closeProgress("Reconnect");q.SetProductKeyAsync(Dynamsoft.WebTwainEnv.ProductKey);if(u!=o){a.Errors.Server_Restarted(q);if(a.isFunction(q.__OnWSReconnect)){var s;s=a.getWSUrl(q._host,q._port,q._ssl);q.__OnWSReconnect(s,k)}}else{q._resetErr()}});return}if(q._host==="127.0.0.1"||q._host==="localhost"){a.LS.item("DWT_port",p.port);a.LS.item("DWT_ssl",p.ssl?"true":"false")}}a.attachProperty(q);a.html5.ui.init(q,q.config);a.html5.ui.addMethods(q);a.attachPropertyUI(q);q._ImgManager.OnReady();if(!q._bNoUI){q.SetViewMode(1,1)}if(q._bLocalService){q._innerActiveUI(function(u){var s,x,w=false;if(u&&u.length>=3){s=u[1];x=u[2];q.__strProductName=x}else{if(u&&u.length>=2){s=u[1];w=true}else{w=true;a.log("ActiveUI return parameters error.")}}a.attachAddon(q);if(x){x=x.toLowerCase()}q.__serverId=s;q.__bMustUpgradeService=w;if(!w){var o=true;a.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_SetLicenseForDWT);var t,v=Dynamsoft.WebTwainEnv.ProductKey;if(v==""||v=="******"){t=a.Promise.resolve(0)}else{t=q.SetProductKeyAsync(v)}t=t.then(function(){a.closeLoadingMsg();if(a.isFunction(q.__OnReady)){q.__OnReady(q)}if(a.License.checkProductKey(q,{Core:true})||a.License.checkProductKey(q,{Webcam:true},true)){return q._setConvertModeAsync(q._pdfConvertMode)["catch"](function(){})}else{a.License.checkProductKey(q,{Core:true},false,true)}},function(){a.closeLoadingMsg();if(a.License.checkProductKey(q,{Core:true})||a.License.checkProductKey(q,{Webcam:true},true)){}else{a.License.checkProductKey(q,{Core:true},false,true)}})}else{if(a.isFunction(q.__OnReady)){q.__OnReady(q)}}})}else{var l=true;a.attachAddon(q);q.__serverId=1;q.__bMustUpgradeService=false;a.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_SetLicenseForDWT);var m,n=Dynamsoft.WebTwainEnv.ProductKey;if(n==""||n=="******"){m=a.Promise.resolve(0)}else{m=q.SetProductKeyAsync(n)}m.then(function(){a.closeLoadingMsg();if(q.ErrorCode<0){a.License.promptLicenseErr(q);return}if(a.isFunction(q.__OnReady)){q.__OnReady(q)}if(a.License.checkProductKey(q,{Core:true})||a.License.checkProductKey(q,{Webcam:true},true)){if(a.License.checkProductKey(q,{Core:true,Wasm:true},true,true)){if(Dynamsoft.WasmEnv){Dynamsoft.WasmEnv.setLoglevel(q._logLevel)}q._setConvertMode(q._pdfConvertMode)}}else{a.License.checkProductKey(q,{Core:true},false,true)}},function(){a.closeLoadingMsg();if(a.License.checkProductKey(q,{Core:true})||a.License.checkProductKey(q,{Webcam:true},true)){}else{a.License.checkProductKey(q,{Core:true},false,true)}})}};c.__unload=function(){var k=this,j;if(k._ImgManager){k._ImgManager.clear()}if(k.bReady){j=k._objWS;if(j){k.__bForceClose=true;j.close();k.curCommand.splice(0);delete k._objWS}k.bReady=false}if(k.__addon){if(k.__addon.Camera&&k.__addon.Camera.getStatus()!=""){k.__addon.Camera.closeSource()["catch"](function(){})}}if(!k._bNoUI){a.html5.ui.unLoad(k)}};function h(k,l){var j=l||{};k.__OnAfterOperate=j.onAfterOperate||"";k.__OnBeforeOperate=j.onBeforeOperate||"";k.__OnOperateStatus=j.onOperateStatus||"";k.__OnBitmapChanged=j.onBitmapChanged||"";k.__OnGetFilePath=j.onGetFilePath||"";k.__OnPreAllTransfers=j.onPreAllTransfers||"";k.__OnPreTransfer=j.onPreTransfer||"";k.__OnPostLoad=j.onPostLoad||"";k.__OnPostTransfer=j.onPostTransfer||"";k.__OnPostAllTransfers=j.onPostAllTransfers||"";k.__OnSourceUIClose=j.onSourceUIClose||"";k.__OnTransferCancelled=j.onTransferCancelled||"";k.__OnTransferError=j.onTransferError||"";k.__OnInternetTransferPercentage=j.onInternetTransferPercentage||"";k.__OnInternetTransferPercentageEx=j.onInternetTransferPercentageEx||""}});Dynamsoft.Ready(function(x,m){var l=Dynamsoft;if(!x.product.bHTML5Edition){return}var i=Dynamsoft.WebTwainEnv,d=Dynamsoft.navInfo,g=x.each,y=x.html5.STwain,w=y.prototype;var e={Auto:0,G3:1,G4:2,LZW:3,ZIP:4,JPEG:5};x.MobileFuns={makeParams:function(){return arguments},_innerSaveLocal:function(J,K,N){var L=window,M=Dynamsoft.navInfo,Q=L.requestFileSystem||L.webkitRequestFileSystem||L.mozRequestFileSystem;if((M.biPad||M.biPhone)&&!Q){if(M.bSafari&&parseFloat(M.strBrowserVersion)<13||!M.bSafari){var O=window.open(J,"","",false);setTimeout(function(){O.document.title=K},100);return true}}var R=document.createElementNS("http://www.w3.org/1999/xhtml","a");R.href=J;R.download=K;R.target="_blank";document.body.appendChild(R);if(M.bEdge){R.click()}else{var P=document.createEvent("MouseEvents");P.initMouseEvent("click",true,false);R.dispatchEvent(P)}document.body.removeChild(R);return true},saveLocal:function(J,L,K){if(x.isString(J)&&(J.indexOf("blob:http://")>-1)){x.MobileFuns._innerSaveLocal(J,L,K)}else{if(J instanceof Blob){x.MobileFuns._innerSaveLocal(URL.createObjectURL(J),L,K)}else{if(J instanceof ArrayBuffer){x.MobileFuns._innerSaveLocal(URL.createObjectURL(new Blob([J])),L,K)}else{x.MobileFuns._innerSaveLocal(J,L,K)}}}},dataURLtoBlob:function(L){var J=L.split(","),N=J[0].match(/:(.*?);/)[1],K,P,M;try{K=atob(J[1])}catch(O){K="";return false}P=K.length;M=new Uint8Array(P);while(P--){M[P]=K.charCodeAt(P)}return new Blob([M],{type:N})},appendTiffPage:function(L,Q,R,J){var O=L,N=Q,M=R.context.bShowPercentProgress,P=O._aryTiffTag.length;if(P>0){R.context.tagIndex=0;if(P>32){P=32}for(var K=0;K<P;K++){N=N.then(function(U){var S=R.context.tagIndex;var T=O._aryTiffTag[S];return R.addTag(T.tag,T.content,T.isBinary)});N=N.then(function(){var S=R.context.tagIndex;R.context.tagIndex=S+1})}}N=N.then(function(){var S=R.context.aryIndex;var T=R.context.cIndex;R.context.revokeUrl=false;return O._ImgManager.getWebViewer().GetImageData(O._ImgManager.getUidByIndex(S[T]))});if(O._scaleDownThreshold<=0){}else{N=N.then(function(T){var S=T&&T.metaData?T.metaData:{};return Dynamsoft.ImageProcWrapper.resize(T.originalData,S.imageWidth,S.imageHeight,O._scaleDownThreshold)});N=N.then(function(S){R.context.revokeUrl=S.imageData;return{originalData:S.imageData}})}N=N.then(function(U){var T=Dynamsoft.EnumDWT_ImageType.IT_ALL,S=R.context.tiffFormat;return R.appendImage(U.originalData,T,S,O._jpgQuality)});N=N.then(function(S){if(R.context.revokeUrl){x.MobileFuns.revoke(R.context.revokeUrl)}R.context.revokeUrl=false;return S});if(M){N=N.then(function(){var T=R.context.aryIndex;var W=T.length;var V=R.context.cIndex;var U=(V+1);var S=(100*U)/(1*W);O._OnPercentDone([0,S,U+"/"+W,""])})}N=N.then(function(){var S=R.context.cIndex;R.context.cIndex=(S+1);return(S+1)});return N},isPDF:function(K){var J=K;if(K instanceof ArrayBuffer){J=new Uint8Array(K.slice(0,4))}if(J instanceof Uint8Array){if(J[0]==37&&J[1]==80&&J[2]==68&&J[3]==70){return true}}return false},isTIFF:function(K){var J=K;if(K instanceof ArrayBuffer){J=new Uint8Array(K.slice(0,4))}if(J instanceof Uint8Array){if(J[0]==73&&J[1]==73&&J[2]==42&&J[3]==0||J[0]==77&&J[1]==77&&J[2]==0&&J[3]==42){return true}}return false},unloadWasm:function(){if(j){j.terminate();j=null}if(x.detect.wasmScriptLoaded&&Dynamsoft.WasmEnv){return Dynamsoft.WasmEnv.unload()}return x.Promise.resolve()},loadCallback:function(M){if(M&&M.customData){var T=M.customData,O=M.fPdfReader,X=M.imgCore,J=T.src,S=T.imgType,P=T.index,U=T.password,L=T.resolution,R=T.convertMode,K=false,Q,N=Dynamsoft.EnumDWT_ImageType;if(S==N.IT_PDF){if(!O){O=q();K=true}Q=function(Y){O.close();if(K){O.terminate()}};return O.open(J,U).then(function(Y){return O.readPage(P,L,R,Dynamsoft.EnumDWT_ImageType.IT_JPG,false,false)},Q).then(function(Y){O.close();if(K){O.terminate()}return Y.imageData},Q)}else{if(S==N.IT_TIF){if(!X){X=A();K=true}var W=0;Q=function(Y){if(K){X.terminate()}};return X.openTiff(J).then(function(Y){return X.readTiff(P,Dynamsoft.EnumDWT_ImageType.IT_JPG,false)}).then(function(Y){if(K){X.terminate()}return Y.imageData},Q)}else{if(S==N.IT_PNG||S==N.IT_JPG||S==N.IT_BMP){if(!X){X=A()}K=true;var V=T.quality;Q=function(Y){if(K){X.terminate()}};return X.readImage(J,Dynamsoft.EnumDWT_ImageType.IT_JPG,V,false).then(function(Y){if(K){X.terminate()}return Y.imageData},Q)}}}}else{}return x.Promise.resolve()},convertOutputType:function(J){return J},isBlobUrl:function(J){return x.isString(J)&&(J.indexOf("blob:http://")>-1)},revoke:function(J){if(x.MobileFuns.isBlobUrl(J)){return(window.URL||window.webkitURL).revokeObjectURL(J)}return true}};w._innerSendToMobile=function(O,M,K,J,L){var N=this;if(O=="GetLicenseInfo"){x.showMask();return E(N,M).then(function(P){x.hideMask();if(x.isFunction(J)){J(P)}},function(P){x.hideMask();x.Errors.GetLicenseInfoFailed(N,P);if(L){L(N._errorCode,N._errorString)}})}if(!x.License.checkProductKey(N,{Core:true,Wasm:true},true)){if(L){L(N._errorCode,N._errorString)}return false}if(O=="SaveImage"){F(N,M).then(function(Q){var P=Q.blobUrl;if(J){J(P,Q.type)}setTimeout(function(){x.MobileFuns.revoke(P)},1000)},function(){if(x.isFunction(L)){L(N._errorCode,N._errorString)}})}else{N._innerSendToMobileV2(O,M).then(J,function(){if(x.isFunction(L)){L(N._errorCode,N._errorString)}})}return true};w._innerSendToMobileV2=function(L,J){var K=this;if(L=="GetLicenseInfo"){return E(K,J)}if(!x.License.checkProductKey(K,{Core:true,Wasm:true},true)){return x.Promise.reject({code:K._errorCode,message:K._errorString})}if(L=="LoadImageFromBinary"){return D(K,J)}else{if(L=="RotateEx"){return t(K,J)}else{if(L=="Flip"){return v(K,J)}else{if(L=="Mirror"){return u(K,J)}else{if(L=="Invert"){return r(K,J)}else{if(L=="SaveImage"){return F(K,J)}else{if(L=="Crop"){return s(K,J)}else{if(L=="Erase"){return h(K,J)}else{if(L=="ChangeImageSize"){return C(K,J)}else{if(L=="GetSkewAngle"){return B(K,J)}else{if(L=="ConvertToGrayScale"){return n(K,J)}else{if(L=="ConvertToBWScale"){return I(K,J)}else{if(L=="SetDPI"){return G(K,J)}else{if(L=="SetImageWidth"){return f(K,J)}else{if(L=="IsTextBasedPDF"){return p(K,J)}else{if(L=="GetMD5"){return k(K,J)}}}}}}}}}}}}}}}}return x.Promise.reject({code:-1000,message:"invalid method: "+L})};var o=0,j=null;var A=function(){return new Dynamsoft.Imagecore(i.ProductKey,1)},H=function(){return new Dynamsoft.ImageProc(i.ProductKey,1)},q=function(){return new Dynamsoft.PdfReader(i.ProductKey,1)},c=function(){return new Dynamsoft.PdfWriter(i.ProductKey,1)},b=function(){if(!j){j=new Dynamsoft.ImageProc(i.ProductKey,1)}return j},p=function(P,K){var N=K[0],Q,J,L,R,M=Dynamsoft.EnumDWT_ImageType;if(N instanceof FileList){Q=N[0]}else{if(N instanceof Blob){Q=N}else{if(N instanceof ArrayBuffer||N instanceof Uint8Array){Q=new Blob([N]);if(x.MobileFuns.isPDF(N)){R=M.IT_PDF}else{if(x.MobileFuns.isTIFF(N)){R=M.IT_TIF}else{R=M.IT_PNG}}}}}if(Q.type){if(Q.type=="application/pdf"){R=M.IT_PDF}}if(R==M.IT_PDF){var O=q();x.showMask();return O.open(Q,P._pdfPassword).then(function(S){x.hideMask();O.close();setTimeout(function(){O.terminate()},30);return S.isTextBased},function(S){x.hideMask();x.Errors.LoadImageFailed(P,S);O.close();setTimeout(function(){O.terminate()},30);throw {code:P._errorCode,message:P._errorString}})}else{x.Errors.LoadImageFailed(P,"not pdf.");return x.Promise.reject({code:P._errorCode,message:P._errorString})}},D=function(R,L){var P=L[0],S,J,M,W,V=false,N=0,O=Dynamsoft.EnumDWT_ImageType;if(P instanceof FileList){S=P[0]}else{if(P instanceof Blob){S=P}else{if(P instanceof ArrayBuffer||P instanceof Uint8Array){S=new Blob([P]);if(x.MobileFuns.isPDF(P)){W=O.IT_PDF}else{if(x.MobileFuns.isTIFF(P)){W=O.IT_TIF}else{W=O.IT_PNG}}}else{S=P}}}if(x.isUndefined(S)){x.Errors.InvalidSourceFile(R);return x.Promise.reject({code:R._errorCode,message:R._errorString})}if(S.type){if(S.type=="application/pdf"){W=O.IT_PDF}else{if(S.type=="image/png"){W=O.IT_PNG}else{if(S.type=="image/jpeg"){W=O.IT_JPG}else{if(S.type=="image/bmp"){W=O.IT_BMP}else{if(S.type=="image/tiff"){W=O.IT_TIF}}}}}}J="";M=S.name;if(W==O.IT_JPG||W==O.IT_PNG||W==O.IT_BMP){var U=R._jpgQuality;V=A();x.showMask();return V.readImage(S,O.IT_JPG,U,false).then(function(X){var Z={src:X.imageData,imgType:X.imageType,dataType:"url"};if(X){var Y={};Y.imageWidth=X.imageWidth;Y.imageHeight=X.imageHeight;Y.imageBitDepth=X.imageBitDepth;Y.imageXResolution=X.imageXResolution;Y.imageYResolution=X.imageYResolution;Z.metaData=Y}o++;R._OnBitmapChanged(["10",""+o,1,R._ImgManager.getCurrentImageIndex(),R._ImgManager.count(),Z]);x.hideMask();if(x.isFunction(R.__OnPostLoad)){R.__OnPostLoad(J,M,W)}setTimeout(function(){V.terminate()},30)},function(X){x.Errors.LoadImageFailed(R,X);x.hideMask();setTimeout(function(){V.terminate()},30);throw {code:R._errorCode,message:R._errorString}})}else{if(W==O.IT_PDF){var Q=q();Q.context={};x.showProgress(R);R._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingPdf,""]);return Q.open(S,R._pdfPassword).then(function(Z){var Y=Z.PdfCount;R._OnPercentDone([0,0,"0/"+Y,""]);var X=x.Promise.resolve(0);Q.context.cIndex=0;Q.context.pdfCount=Y;for(N=0;N<Y;N++){X=X.then(function(){var aa=Q.context.cIndex;return Q.readPage(aa,R._pdfResolution,R._pdfRealConvertMode,Dynamsoft.EnumDWT_ImageType.IT_JPG,false,false)});X=X.then(function(ab){var ad=Q.context.cIndex,ah=Q.context.pdfCount,ac=(ad+1),aa=(100*ac)/(1*ah),ae={};R._OnPercentDone([0,aa,ac+"/"+ah,""]);if(x.isArray(ab.imageInfos)&&ab.imageInfos.length>0){var ag=ab.imageInfos[0];ae.imageWidth=ag.imageWidth;ae.imageHeight=ag.imageHeight;ae.imageBitDepth=ag.imageBitDepth;ae.imageXResolution=ag.imageXResolution;ae.imageYResolution=ag.imageYResolution}o++;var af={src:ab.imageData,dataType:"url",imgType:Dynamsoft.EnumDWT_ImageType.IT_PDF,index:ab.pageIndex,metaData:ae,imageId:o};R._OnBitmapChanged(["10",""+o,1,R._ImgManager.getCurrentImageIndex(),R._ImgManager.count(),af]);Q.context.cIndex=(ad+1)})}return X.then(function(){x.closeProgress();Q.close();setTimeout(function(){Q.terminate()},30);if(x.isFunction(R.__OnPostLoad)){R.__OnPostLoad(J,M,W)}},function(aa){x.closeProgress();Q.close();setTimeout(function(){Q.terminate()},30);x.Errors.LoadImageFailed(R,aa);throw {code:R._errorCode,message:R._errorString}})},function(X){x.closeProgress();Q.close();setTimeout(function(){Q.terminate()},30);x.Errors.LoadImageFailed(R,X);throw {code:R._errorCode,message:R._errorString}})}else{if(W==O.IT_TIF){var T=0;V=A();x.showProgress(R);R._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingTiff,""]);var K=V.openTiff(S);return K.then(function(Y){var X=Y.pageCount,ab=Y.imageInfos;var aa=x.Promise.resolve(0);R._OnPercentDone([0,0,"0/"+X,""]);for(var Z=0;Z<X;Z++){aa=aa.then(function(ac){return V.readTiff(ac,Dynamsoft.EnumDWT_ImageType.IT_JPG,false).then(function(ae){var af=(ac+1);var ad=(100*af)/(1*X);R._OnPercentDone([0,ad,af+"/"+X,""]);o++;var ag={src:ae.imageData,dataType:"url",imgType:Dynamsoft.EnumDWT_ImageType.IT_TIF,index:ac,metaData:ab[ac],imageId:o};R._OnBitmapChanged(["10",""+o,1,R._ImgManager.getCurrentImageIndex(),R._ImgManager.count(),ag]);return(ac+1)})})}return aa.then(function(){x.closeProgress();V.closeTiff();setTimeout(function(){V.terminate()},30);if(x.isFunction(R.__OnPostLoad)){R.__OnPostLoad(J,M,W)}},function(ac){x.closeProgress();V.closeTiff();setTimeout(function(){V.terminate()},30);x.Errors.LoadImageFailed(R,ac);throw {code:R._errorCode,message:R._errorString}})},function(X){x.closeProgress();V.closeTiff();setTimeout(function(){V.terminate()},30);x.Errors.LoadImageFailed(R,X);throw {code:R._errorCode,message:R._errorString}})}else{x.Errors.LoadImageFailed(R,"invalid image type.");return x.Promise.reject({code:R._errorCode,message:R._errorString})}}}},z=function(R,L){var P=L[0],S,J,M,W,V=false,N=0,O=Dynamsoft.EnumDWT_ImageType;if(P instanceof FileList){S=P[0]}else{if(P instanceof Blob){S=P}else{if(P instanceof ArrayBuffer||P instanceof Uint8Array){S=new Blob([P]);if(x.MobileFuns.isPDF(P)){W=O.IT_PDF}else{if(x.MobileFuns.isTIFF(P)){W=O.IT_TIF}else{W=O.IT_PNG}}}else{S=P}}}if(x.isUndefined(S)){x.Errors.InvalidSourceFile(R);return x.Promise.reject({code:R._errorCode,message:R._errorString})}if(S.type){if(S.type=="application/pdf"){W=O.IT_PDF}else{if(S.type=="image/png"){W=O.IT_PNG}else{if(S.type=="image/jpeg"){W=O.IT_JPG}else{if(S.type=="image/bmp"){W=O.IT_BMP}else{if(S.type=="image/tiff"){W=O.IT_TIF}}}}}}J="";M=S.name;R._registLoadCallback(x.MobileFuns.loadCallback);if(W==O.IT_JPG||W==O.IT_PNG||W==O.IT_BMP){var U=R._jpgQuality;V=A();x.showMask();return V.readImageInfo(S).then(function(X){var Y={src:S,srcId:Date.now(),dataType:"bin",imgType:W,quality:U,metaData:X};o++;R._OnBitmapChanged(["10",""+o,1,R._ImgManager.getCurrentImageIndex(),R._ImgManager.count(),Y]);x.hideMask();if(x.isFunction(R.__OnPostLoad)){R.__OnPostLoad(J,M,W)}setTimeout(function(){V.terminate()},30)},function(X){x.Errors.LoadImageFailed(R,X);x.hideMask();setTimeout(function(){V.terminate()},30);throw {code:R._errorCode,message:R._errorString}})}else{if(W==O.IT_PDF){var Q=q();Q.context={};x.showProgress(R);R._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingPdf,""]);return Q.open(S,R._pdfPassword).then(function(aa){var Z=aa.PdfCount;R._OnPercentDone([0,0,"0/"+Z,""]);var Y={index:0,aryUpdateImageData:[],pdfCount:Z},X=x.Promise.resolve(Y);for(N=0;N<Z;N++){X=X.then(function(ab){return Q.readPage(ab.index,R._pdfResolution,R._pdfRealConvertMode,Dynamsoft.EnumDWT_ImageType.IT_JPG,true,false).then(function(ae){var af=(ab.index+1),ad=ab.PdfCount,ac=(100*af)/(1*ad),ag={};R._OnPercentDone([0,ac,af+"/"+ad,""]);if(x.isArray(ae.imageInfos)&&ae.imageInfos.length>0){var ah=ae.imageInfos[0];ag.imageWidth=ah.imageWidth;ag.imageHeight=ah.imageHeight;ag.imageBitDepth=ah.imageBitDepth;ag.imageXResolution=ah.imageXResolution;ag.imageYResolution=ah.imageYResolution}o++;ab.index=ab.index+1;ab.aryUpdateImageData.push({src:S,srcId:Date.now(),dataType:"bin",imgType:Dynamsoft.EnumDWT_ImageType.IT_PDF,index:ae.pageIndex,password:R._pdfPassword,quality:U,metaData:ag,resolution:R._pdfResolution,convertMode:R._pdfRealConvertMode,outPutType:ae.imageType,imageId:o});return ab})})}X=X.then(function(ab){Q.close();Q.context.closed=true;setTimeout(function(){Q.terminate()},30);ab.index=0;return ab});for(N=0;N<Z;N++){X=X.then(function(ac){var ab=ac.aryUpdateImageData[ac.index];R._OnBitmapChanged(["10",""+ab.imageId,1,R._ImgManager.getCurrentImageIndex(),R._ImgManager.count(),ab]);ac.index=ac.index+1;return ac})}return X.then(function(){if(x.isFunction(R.__OnPostLoad)){R.__OnPostLoad(J,M,W)}x.closeProgress()},function(ab){x.Errors.LoadImageFailed(R,ab);x.closeProgress();if(!Q.context.closed){Q.close();setTimeout(function(){Q.terminate()},30)}throw {code:R._errorCode,message:R._errorString}})},function(X){x.Errors.LoadImageFailed(R,X);x.closeProgress();if(!Q.context.closed){Q.close();setTimeout(function(){Q.terminate()},30)}throw {code:R._errorCode,message:R._errorString}})}else{if(W==O.IT_TIF){var T=0;V=A();V.context={};x.showProgress(R);R._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingTiff,""]);var K=V.openTiff(S);return K.then(function(Y){var X=Y.pageCount,aa=Y.imageInfos;var Z=x.Promise.resolve({index:0,aryUpdateImageData:[]});R._OnPercentDone([0,0,"0/"+X,""]);for(N=0;N<X;N++){Z=Z.then(function(ac){var ad=(ac.index+1);var ab=(100*ad)/(1*X);R._OnPercentDone([0,ab,ad+"/"+X,""]);o++;ac.aryUpdateImageData.push({src:S,srcId:Date.now(),dataType:"bin",imgType:Dynamsoft.EnumDWT_ImageType.IT_TIF,index:ac.index,metaData:aa[ac.index],imageId:o});ac.index=ac.index+1;return ac})}Z=Z.then(function(ab){V.closeTiff();V.context.closed=true;setTimeout(function(){V.terminate()},30);ab.index=0;return ab});for(N=0;N<X;N++){Z=Z.then(function(ac){var ab=ac.aryUpdateImageData[ac.index];R._OnBitmapChanged(["10",""+ab.imageId,1,R._ImgManager.getCurrentImageIndex(),R._ImgManager.count(),ab]);ac.index=ac.index+1;return ac})}return Z.then(function(){if(x.isFunction(R.__OnPostLoad)){R.__OnPostLoad(J,M,W)}x.closeProgress()},function(ab){x.Errors.LoadImageFailed(R,ab);x.closeProgress();if(!V.context.closed){V.closeTiff();V.context.closed=true;setTimeout(function(){V.terminate()},30)}throw {code:R._errorCode,message:R._errorString}})},function(X){x.Errors.LoadImageFailed(R,X);x.closeProgress();if(!V.context.closed){V.closeTiff();V.context.closed=true;setTimeout(function(){V.terminate()},30)}throw {code:R._errorCode,message:R._errorString}})}else{x.Errors.LoadImageFailed(R,"invalid image type.");return x.Promise.reject({code:R._errorCode,message:R._errorString})}}}},t=function(P,N){var Q=N[0],O=N[1],M=N[2],R=N[3],J=N[4];if(x.isUndefined(O)){O=0}if(x.isUndefined(M)){M=true}if(x.isUndefined(R)||R<1||R>3){R=3}if(x.isUndefined(J)){J="FFFFFF"}while(O<0){O+=360}x.showMask();var L=H(),K=P._ImgManager.convertClientIndexToServerId(Q);L.context={};return P._ImgManager.getWebViewer().GetImageData(P._ImgManager.getUidByIndex(Q)).then(function(S){L.context.metaData=S&&S.metaData?S.metaData:{};return L.initImage(S.originalData)}).then(function(){return L.rotate(O,J,M,R)}).then(function(){return L.getImage()}).then(function(S){if("width" in S){S.imageWidth=S.width}if("height" in S){S.imageHeight=S.height}var T={src:S.imageData,imgType:x.MobileFuns.convertOutputType(S.imageType),dataType:"url",metaData:{imageWidth:S.imageWidth,imageHeight:S.imageHeight}};P._OnBitmapChanged(["10",""+K,4,P._ImgManager.getCurrentImageIndex(),P._ImgManager.count(),T]);x.hideMask();setTimeout(function(){L.terminate()},30)},function(S){x.Errors.RotateFailed(P,S);x.hideMask();setTimeout(function(){L.terminate()},30);throw {code:P._errorCode,message:P._errorString}})},a=function(N,J,M){var L=H(),K=N._ImgManager.convertClientIndexToServerId(J);L.context={};x.showMask();return N._ImgManager.getWebViewer().GetImageData(N._ImgManager.getUidByIndex(J)).then(function(O){L.context.metaData=O&&O.metaData?O.metaData:{};return L.initImage(O.originalData)}).then(function(){return L.flip(M)}).then(function(){return L.getImage()}).then(function(O){var P={src:O.imageData,imgType:x.MobileFuns.convertOutputType(O.imageType),dataType:"url"};N._OnBitmapChanged(["10",""+K,4,N._ImgManager.getCurrentImageIndex(),N._ImgManager.count(),P])}).then(function(){x.hideMask();setTimeout(function(){L.terminate()},30)},function(O){x.hideMask();if(M==-1){x.Errors.MirrorFailed(N,O)}else{x.Errors.FlipFailed(N,O)}setTimeout(function(){L.terminate()},30);throw {code:N._errorCode,message:N._errorString}})},u=function(M,L){var J=L[0];var K=-1;return a(M,J,K)},v=function(M,L){var J=L[0];var K=1;return a(M,J,K)},r=function(N,M){var J=M[0];var L=H(),K=N._ImgManager.convertClientIndexToServerId(J);L.context={};x.showMask();return N._ImgManager.getWebViewer().GetImageData(N._ImgManager.getUidByIndex(J)).then(function(O){L.context.metaData=O&&O.metaData?O.metaData:{};return L.initImage(O.originalData)}).then(function(){return L.invert()}).then(function(){return L.getImage()}).then(function(O){var P={src:O.imageData,imgType:x.MobileFuns.convertOutputType(O.imageType),dataType:"url"};N._OnBitmapChanged(["10",""+K,4,N._ImgManager.getCurrentImageIndex(),N._ImgManager.count(),P])}).then(function(){x.hideMask();setTimeout(function(){L.terminate()},30)},function(O){x.hideMask();x.Errors.InvertFailed(N,O);setTimeout(function(){L.terminate()},30);throw {code:N._errorCode,message:N._errorString}})},s=function(O,N){var P=N[0],L=N[1],Q=N[2],R=N[3],J=N[4];if(!x.isNumber(L)||!x.isNumber(Q)||!x.isNumber(R)||!x.isNumber(J)){x.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(O);return x.Promise.reject({code:O._errorCode,message:O._errorString})}var M=H(),K=O._ImgManager.convertClientIndexToServerId(P);M.context={};x.showMask();return O._ImgManager.getWebViewer().GetImageData(O._ImgManager.getUidByIndex(P)).then(function(S){M.context.metaData=S&&S.metaData?S.metaData:{};return M.initImage(S.originalData)}).then(function(){return M.crop(L,Q,R,J)}).then(function(){return M.getImage()}).then(function(S){var T={src:S.imageData,imgType:x.MobileFuns.convertOutputType(S.imageType),dataType:"url",metaData:{imageData:S.imageData,imageWidth:S.imageWidth,imageHeight:S.imageHeight}};O._OnBitmapChanged(["10",""+K,4,O._ImgManager.getCurrentImageIndex(),O._ImgManager.count(),T])}).then(function(){x.hideMask();setTimeout(function(){M.terminate()},30)},function(S){x.hideMask();x.Errors.CropFailed(O,S);setTimeout(function(){M.terminate()},30);throw {code:O._errorCode,message:O._errorString}})},h=function(P,O){var Q=O[0],N=O[1],R=O[2],S=O[3],J=O[4],K=O[5];if(!x.isNumber(N)||!x.isNumber(R)||!x.isNumber(S)||!x.isNumber(J)){x.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(P);return x.Promise.reject({code:P._errorCode,message:P._errorString})}if(x.isUndefined(K)){K="FFFFFF"}var M=H(),L=P._ImgManager.convertClientIndexToServerId(Q);M.context={};x.showMask();return P._ImgManager.getWebViewer().GetImageData(P._ImgManager.getUidByIndex(Q)).then(function(T){M.context.metaData=T&&T.metaData?T.metaData:{};return M.initImage(T.originalData)}).then(function(){return M.erase(N,R,S,J,K)}).then(function(){return M.getImage()}).then(function(T){var U={src:T.imageData,imgType:x.MobileFuns.convertOutputType(T.imageType),dataType:"url",metaData:{imageData:T.imageData,imageWidth:T.imageWidth,imageHeight:T.imageHeight}};P._OnBitmapChanged(["10",""+L,4,P._ImgManager.getCurrentImageIndex(),P._ImgManager.count(),U])}).then(function(){x.hideMask();setTimeout(function(){M.terminate()},30)},function(T){x.hideMask();x.Errors.EraseFailed(P,T);setTimeout(function(){M.terminate()},30);throw {code:P._errorCode,message:P._errorString}})},C=function(Q,P){var J=P[0],N=P[1],M=P[2],O=P[3];if(!x.isNumber(N)){x.Errors.MobileServer_InvalidWidth(Q);return x.Promise.reject({code:Q._errorCode,message:Q._errorString})}if(!x.isNumber(M)){x.Errors.MobileServer_InvalidHeight(Q);return x.Promise.reject({code:Q._errorCode,message:Q._errorString})}if(x.isUndefined(O)){O=5}var L=H(),K=Q._ImgManager.convertClientIndexToServerId(J);L.context={};x.showMask();return Q._ImgManager.getWebViewer().GetImageData(Q._ImgManager.getUidByIndex(J)).then(function(R){L.context.metaData=R&&R.metaData?R.metaData:{};return L.initImage(R.originalData)}).then(function(){return L.resize(N,M,O)}).then(function(){return L.getImage()}).then(function(R){var S={src:R.imageData,imgType:x.MobileFuns.convertOutputType(R.imageType),dataType:"url",metaData:{imageData:R.imageData,imageWidth:R.imageWidth,imageHeight:R.imageHeight}};Q._OnBitmapChanged(["10",""+K,4,Q._ImgManager.getCurrentImageIndex(),Q._ImgManager.count(),S])}).then(function(){x.hideMask();setTimeout(function(){L.terminate()},30)},function(R){x.hideMask();x.Errors.ChangeImageSizeFailed(Q,R);setTimeout(function(){L.terminate()},30);throw {code:Q._errorCode,message:Q._errorString}})},B=function(N,M){var J=M[0];var L=H(),K=N._ImgManager.convertClientIndexToServerId(J);L.context={};x.showMask();return N._ImgManager.getWebViewer().GetImageData(N._ImgManager.getUidByIndex(J)).then(function(O){L.context.metaData=O&&O.metaData?O.metaData:{};return L.initImage(O.originalData)}).then(function(){return L.getSkewAngle()}).then(function(O){L.context.angle=O;return L.getImage()}).then(function(O){var P={src:O.imageData,imgType:x.MobileFuns.convertOutputType(O.imageType),dataType:"url",metaData:{imageData:O.imageData,imageWidth:O.imageWidth,imageHeight:O.imageHeight}};N._OnBitmapChanged(["10",""+K,4,N._ImgManager.getCurrentImageIndex(),N._ImgManager.count(),P])}).then(function(){var O=L.context.angle;x.hideMask();delete L.context;setTimeout(function(){L.terminate()},30);return O},function(O){x.hideMask();x.Errors.SkewAngleFailed(N,O);setTimeout(function(){L.terminate()},30);throw {code:N._errorCode,message:N._errorString}})},n=function(N,M){var J=M[0];var L=H(),K=N._ImgManager.convertClientIndexToServerId(J);L.context={};x.showMask();return N._ImgManager.getWebViewer().GetImageData(N._ImgManager.getUidByIndex(J)).then(function(O){L.context.metaData=O&&O.metaData?O.metaData:{};return L.initImage(O.originalData)}).then(function(){return L.toGrayscale(0,25)}).then(function(){return L.getImage()}).then(function(O){var P={src:O.imageData,imgType:x.MobileFuns.convertOutputType(O.imageType),dataType:"url",metaData:{imageData:O.imageData,imageWidth:O.imageWidth,imageHeight:O.imageHeight,imageBitDepth:8}};N._OnBitmapChanged(["10",""+K,4,N._ImgManager.getCurrentImageIndex(),N._ImgManager.count(),P])}).then(function(){x.hideMask();setTimeout(function(){L.terminate()},30)},function(O){x.hideMask();x.Errors.ConvertToGrayScaleFailed(N,O);setTimeout(function(){L.terminate()},30);throw {code:N._errorCode,message:N._errorString}})},I=function(N,M){var J=M[0];var L=H(),K=N._ImgManager.convertClientIndexToServerId(J);L.context={};x.showMask();return N._ImgManager.getWebViewer().GetImageData(N._ImgManager.getUidByIndex(J)).then(function(O){L.context.metaData=O&&O.metaData?O.metaData:{};return L.initImage(O.originalData)}).then(function(){return L.toBinary(28,25,10)}).then(function(){return L.getImage()}).then(function(O){var P={src:O.imageData,imgType:x.MobileFuns.convertOutputType(O.imageType),dataType:"url",metaData:{imageData:O.imageData,imageWidth:O.imageWidth,imageHeight:O.imageHeight,imageBitDepth:1}};N._OnBitmapChanged(["10",""+K,4,N._ImgManager.getCurrentImageIndex(),N._ImgManager.count(),P])}).then(function(){x.hideMask();setTimeout(function(){L.terminate()},30)},function(O){x.hideMask();x.Errors.ConvertToBWScaleFailed(N,O);setTimeout(function(){L.terminate()},30);throw {code:N._errorCode,message:N._errorString}})},G=function(O,N){var P=N[0],Q=N[1],M=N[2],S=N[3],L=N[4];if(!x.isNumber(Q)){x.Errors.MobileServer_InvalidXResolution(O);return x.Promise.reject({code:O._errorCode,message:O._errorString})}if(!x.isNumber(M)){x.Errors.MobileServer_InvalidYResolution(O);return x.Promise.reject({code:O._errorCode,message:O._errorString})}if(x.isUndefined(L)){L=Dynamsoft.EnumDWT_InterpolationMethod.IM_BICUBIC}var K=H(),J=O._ImgManager.convertClientIndexToServerId(P),T,U,R;K.context={};T=O._ImgManager._UIView.GetMetaDataByIndex(P);U=T.imageXResolution;R=T.imageYResolution;x.showMask();return O._ImgManager.getWebViewer().GetImageData(O._ImgManager.getUidByIndex(P)).then(function(V){K.context.metaData=V&&V.metaData?V.metaData:{};return K.initImage(V.originalData)}).then(function(){return K.setDPI(U,R,Q,M,S,L)}).then(function(){return K.getImage()}).then(function(V){var W={src:V.imageData,imgType:x.MobileFuns.convertOutputType(V.imageType),dataType:"url",metaData:{imageData:V.imageData,imageWidth:V.imageWidth,imageHeight:V.imageHeight,imageXResolution:Q,imageYResolution:M}};O._OnBitmapChanged(["10",""+J,4,O._ImgManager.getCurrentImageIndex(),O._ImgManager.count(),W])}).then(function(){x.hideMask();setTimeout(function(){K.terminate()},30)},function(V){x.hideMask();x.Errors.SetDPIFailed(O,V);setTimeout(function(){K.terminate()},30);throw {code:O._errorCode,message:O._errorString}})},f=function(O,N){var K=N[0],J=N[1];if(!x.isNumber(J)){x.Errors.MobileServer_InvalidWidth(O);return x.Promise.reject({code:O._errorCode,message:O._errorString})}var M=H(),L=O._ImgManager.convertClientIndexToServerId(K);M.context={};x.showMask();return O._ImgManager.getWebViewer().GetImageData(O._ImgManager.getUidByIndex(K)).then(function(P){M.context.metaData=P&&P.metaData?P.metaData:{};return M.initImage(P.originalData)}).then(function(){return M.setImageWidth(J)}).then(function(){return M.getImage()}).then(function(P){var Q={src:P.imageData,imgType:x.MobileFuns.convertOutputType(P.imageType),dataType:"url",metaData:{imageData:P.imageData,imageWidth:P.imageWidth,imageHeight:P.imageHeight}};O._OnBitmapChanged(["10",""+L,4,O._ImgManager.getCurrentImageIndex(),O._ImgManager.count(),Q])}).then(function(){x.hideMask();setTimeout(function(){M.terminate()},30)},function(P){x.hideMask();x.Errors.SetImageWidthFailed(O,P);setTimeout(function(){M.terminate()},30);throw {code:O._errorCode,message:O._errorString}})},F=function(Z,af){var ai=af[0],L=af[1],ah=af[2],ae=af[3],U=af[4],O,X,W,S=false,Y=false,aa=Dynamsoft.EnumDWT_ImageType;if(x.isUndefined(ai)){x.Errors.MobileServer_InvalidImage(Z);return x.Promise.reject({code:Z._errorCode,message:Z._errorString})}if(!x.isArray(L)){x.Errors.MobileServer_InvalidIndex(Z);return x.Promise.reject({code:Z._errorCode,message:Z._errorString})}if(x.isUndefined(ah)){ah="jpg"}if(!x.isString(ai)||ai==""){ai="img."+ah}if(ah=="png"||ah=="jpg"||ah=="bmp"){var ag=Z._ImgManager.convertClientIndexToServerId(T),Q,T=L[0],ad=Z._jpgQuality;if(ae==1){x.showMask()}if(ah=="png"){Q=aa.IT_PNG}else{if(ah=="bmp"){Q=aa.IT_BMP}else{Q=aa.IT_JPG}}var K=Z._ImgManager.getWebViewer().GetImageData(Z._ImgManager.getUidByIndex(T));Y=A();Y.context={};Y.context.bSaveAsBinary=U;if(Z._scaleDownThreshold<=0){K=K.then(function(aj){var ak=Y.context.bSaveAsBinary;return Y.saveImage(aj.originalData,Q,ad,false,ak)})}else{K=K.then(function(ak){var aj=ak&&ak.metaData?ak.metaData:{};return Dynamsoft.ImageProcWrapper.resize(ak.originalData,aj.imageWidth,aj.imageHeight,Z._scaleDownThreshold)});K=K.then(function(aj){var ak=Y.context.bSaveAsBinary;Y.context.revokeUrl=aj.imageData;return Y.saveImage(aj.imageData,Q,ad,false,ak)});K=K.then(function(aj){x.MobileFuns.revoke(Y.context.revokeUrl);Y.context.revokeUrl=false;return aj})}return K.then(function(aj){if(ae==1){x.hideMask()}if(Y){setTimeout(function(){Y.terminate()},30)}if(S){setTimeout(function(){S.terminate()},30)}return{blobUrl:aj.imageData,type:ah}},function(aj){if(ae==1){x.hideMask()}x.Errors.SaveImageFailed(Z,aj);if(Y){setTimeout(function(){Y.terminate()},30)}if(S){setTimeout(function(){S.terminate()},30)}throw {code:Z._errorCode,message:Z._errorString}})}else{if(ah=="pdf"){var R=c(),ac,V=L.length;R.context={};if(ae){x.showProgress(Z);if(ae==2){Z._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBlob,""])}else{if(ae==3){Z._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBase64,""])}else{if(ae==4){Z._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,""])}else{Z._OnPercentDone([0,-1,Dynamsoft.MSG.SavingPdf,""])}}}}var J=R.initPdfSetting(Z._pdfWriteSetting);if(Z._scaleDownThreshold>0){S=H();S.context={}}R.context.cIndex=0;R.context.aryIndex=L;R.context.bSaveAsBinary=U;for(ac=0;ac<V;ac++){J=J.then(function(){var ak=R.context.cIndex,aj=R.context.aryIndex;return Z._ImgManager.getWebViewer().GetImageData(Z._ImgManager.getUidByIndex(aj[ak]))});if(Z._scaleDownThreshold<=0){J=J.then(function(aj){return R.appendPage(aj.originalData)})}else{J=J.then(function(ak){var aj=ak&&ak.metaData?ak.metaData:{};return Dynamsoft.ImageProcWrapper.resize(ak.originalData,aj.imageWidth,aj.imageHeight,Z._scaleDownThreshold)});J=J.then(function(aj){R.context.revokeUrl=aj.imageData;return R.appendPage(aj.imageData)});J=J.then(function(aj){if(R.context.revokeUrl){x.MobileFuns.revoke(R.context.revokeUrl)}R.context.revokeUrl=false;return aj})}J=J.then(function(){var am=R.context.cIndex,ak=R.context.aryIndex,an=ak.length;if(ae){var al=(am+1);var aj=(100*al)/(1*an);Z._OnPercentDone([0,aj,al+"/"+an,""])}R.context.cIndex=(am+1)})}return J.then(function(){var aj=R.context.bSaveAsBinary;return R.writePdf(aj)}).then(function(aj){if(ae){x.closeProgress()}setTimeout(function(){R.terminate()},30);if(S){setTimeout(function(){S.terminate()},30)}return{blobUrl:aj.pdfData,type:"pdf"}},function(aj){if(ae){x.closeProgress()}x.Errors.SaveImageFailed(Z,aj);setTimeout(function(){R.terminate()},30);if(S){setTimeout(function(){S.terminate()},30)}throw {code:Z._errorCode,message:Z._errorString}})}else{if(ah=="tiff"){var M,P=L.length;Y=A();Y.context={};Y.context.bSaveAsBinary=U;if(Z._scaleDownThreshold>0){S=H();S.context={}}if(ae){Y.context.bShowPercentProgress=true;x.showProgress(Z);if(ae==2){Z._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBlob,""])}else{if(ae==3){Z._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBase64,""])}else{if(ae==4){Z._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,""])}else{Z._OnPercentDone([0,-1,Dynamsoft.MSG.SavingTiff,""])}}}}var ab=Y.createTiff(),N=Dynamsoft.EnumDWT_TIFFCompressionType;Y.context.cIndex=0;M=e.Auto;if(Z._tiffCompressionType==N.TIFF_AUTO){M=e.Auto}else{if(Z._tiffCompressionType==N.TIFF_FAX3||Z._tiffCompressionType==N.TIFF_T4){M=e.G3}else{if(Z._tiffCompressionType==N.TIFF_FAX4||Z._tiffCompressionType==N.TIFF_T6){M=e.G4}else{if(Z._tiffCompressionType==N.TIFF_LZW){M=e.LZW}else{if(Z._tiffCompressionType==N.TIFF_JPEG){M=e.JPEG}else{if(Z._tiffCompressionType==N.TIFF_PACKBITS){M=e.ZIP}}}}}}Y.context.tiffFormat=M;Y.context.aryIndex=L;for(ac=0;ac<P;ac++){ab=x.MobileFuns.appendTiffPage(Z,ab,Y,S)}ab=ab.then(function(){var aj=Y.context.bSaveAsBinary;return Y.getTiff(aj)});return ab=ab.then(function(ak){var aj=Y.context.bShowPercentProgress;if(aj){x.closeProgress()}Y.closeTiff();setTimeout(function(){Y.terminate()},30);if(S){setTimeout(function(){S.terminate()},30)}return{blobUrl:ak.imageData,type:"tiff"}},function(ak){var aj=Y.context.bShowPercentProgress;if(aj){x.closeProgress()}x.Errors.SaveImageFailed(Z,ak);Y.closeTiff();setTimeout(function(){Y.terminate()},30);if(S){setTimeout(function(){S.terminate()},30)}throw {code:Z._errorCode,message:Z._errorString}})}else{x.Errors.InvalidImageType(Z);return x.Promise.reject({code:Z._errorCode,message:Z._errorString})}}}},E=function(L,K){var J;if(K.length>0){J=K[0]}else{J=i.ProductKey}return Dynamsoft.WasmEnv.getLicenseInfo(J).then(function(M){if(!M||!M.Detail){x.Errors.LicenseEmptyOrInvalid(L);throw {code:L._errorCode,message:L._errorString}}else{return M}},function(M){x.Errors.GetLicenseInfoFailed(L,M);throw {code:L._errorCode,message:L._errorString}})},k=function(N,L){var K=M,M=L[0];if(M instanceof FileList){K=M[0]}else{if(M instanceof ArrayBuffer||M instanceof Uint8Array){K=new Blob([M])}else{}}var J=A();return J.getMD5(K).then(function(O){setTimeout(function(){J.terminate()},30);return O},function(O){x.Errors.GetMD5Failed(N,O);setTimeout(function(){J.terminate()},30);throw {code:N._errorCode,message:N._errorString}})};w._areaDetectCallback=function(M,L,J){var K=b();x.openLoadingMsg();x.showLoadingMsg(-1,"",Dynamsoft.MSG.Wasm_Initializing);return K.ready().then(function(){x.closeLoadingMsg();return K.initImage(M,true,L,J)}).then(function(){return K.detectDocument()}).then(function(N){return N.cornerPoints},function(O){x.closeLoadingMsg();var N={_errorString:O};x.Errors.DetectCallbackErr(N);throw {code:N._errorCode,message:N._errorString}})};w._saveImageCallback=function(J){var M=this,K=J,L;if(K instanceof Blob||K instanceof ArrayBuffer){L=x.Promise.resolve(K)}else{if(x.isString(J)){L=x.fetch(J,{mode:"cors",dataType:"blob"})}else{x.Errors.InvalidSourceFile(M);return x.Promise.reject({code:M._errorCode,message:M._errorString})}}return L.then(function(N){return new x.Promise(function(P,O){M.LoadImageFromBinary(N,P,O)})})};w._perspectiveCallback=function(O,M,L,J){var K=b();if(!x.isArray(M)||M.length!=8){var N={};x.Errors.InvalidParameterInCallback(N);return x.Promise.reject({code:N._errorCode,message:N._errorString})}x.openLoadingMsg();x.showLoadingMsg(-1,"",Dynamsoft.MSG.Wasm_Initializing);return K.ready().then(function(){x.closeLoadingMsg();return K.initImage(O,true,L,J)}).then(function(){return K.perspective(M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7])}).then(function(){return K.getImage(85,true,true)}).then(function(P){return P.imageData},function(Q){x.closeLoadingMsg();var P={_errorString:Q};x.Errors.PerspectiveCallback(P);throw {code:P._errorCode,message:P._errorString}})};w._checkWebcamWasmLicense=function(){var J=this;if(!x.License.checkProductKey(J,{Webcam:true},true)){return{code:J._errorCode,message:J._errorString}}if(!x.License.checkProductKey(J,{Webcam:true,Wasm:true},true)){return{code:J._errorCode,message:J._errorString}}return{errorCode:0}}});Dynamsoft.Ready(function(m,h){var f=Dynamsoft;if(!m.product.bHTML5Edition){return}var d=Dynamsoft.navInfo,c=m.html5.Funs,i=!0,p=!1,e=0,a=1,k=1,q=2,n=c.DEF,j=c.DEF_NOT_SUPPORT_MOBILE,s=c.RemoveNonPrintableChar,b=function(v,t,u){if(u==q){m.each(t,function(x,w){n(v,x,{get:function(){v._resetErr();return i},set:function(y){v._resetErr();return i}})})}},r=function(u,t){m.each(t,function(x,w){n(u,x,a,q)})},o=function(u,t){m.each(t,function(x,w){n(u,x,a,k)})},l=function(u,t){m.each(t,function(x,w){n(u,x,e)})},g=function(u,t){m.each(t,function(x,w){n(u,x,a)})};m.DynamicLoadAddonFuns=[];m.attachAddon=function(t){m.each(m.DynamicLoadAddonFuns,function(u){if(m.isFunction(u)){u(t)}})};m.attachProperty=function(t){var z=t;n(z,"ErrorCode",{get:function(){return z._errorCode}});n(z,"ErrorString",{get:function(){if(z._errorCode==-2207){if(z.__bMustUpgradeService){m.Errors.MustUpgradeService(z)}}if(z._errorCode!=0){return z._errorString}return"Successful."}});n(z,"ProductKey",{get:function(){z._resetErr();return Dynamsoft.WebTwainEnv.ProductKey},set:function(A){if(!m.isString(A)){m.Errors.InvalidValue(z);return p}z._resetErr();return z._setProductKey(A,false)}});n(z,"ProductName",{get:function(){z._resetErr();return z.__strProductName},set:function(A){if(!m.isString(A)){m.Errors.InvalidValue(z);return p}z._resetErr();z.__strProductName=A;return i}});n(z,"VersionInfo",{get:function(){z._resetErr();return z.__versionInfo}});if(z._isMobileMode()){j(z,"DefaultSourceName",e)}else{n(z,"DefaultSourceName",{get:function(){z._resetErr();return z.__defaultSourceName}})}if(z._isMobileMode()){j(z,["ImageCaptureDriverType","IfShowCancelDialogWhenImageTransfer"])}else{n(z,"IfShowCancelDialogWhenImageTransfer",{get:function(){z._resetErr();return z.__IfShowCancelDialogWhenImageTransfer},set:function(A){if(!m.isBoolean(A)){m.Errors.InvalidValue(z);return p}z._resetErr();return(z.__IfShowCancelDialogWhenImageTransfer=A)}});n(z,"ImageCaptureDriverType",{get:function(){z._resetErr();return z._driverType},set:function(A){var D=z._driverType;z._resetErr();if(A!==""){var C=A*1;if(C<Dynamsoft.EnumDWT_Driver.TWAIN||C>Dynamsoft.EnumDWT_Driver.TWAIN64){m.Errors.ImageCaptureDriverTypeError(z);return p}if(d.bWin){if(C===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(Dynamsoft.dcp.b64bit){z._driverType=C;z.__icaSourceCount=-1;return i}}else{if(C!=Dynamsoft.EnumDWT_Driver.TWAIN&&C!=Dynamsoft.EnumDWT_Driver.TWAIN64){m.Errors.ImageCaptureDriverTypeError(z);return p}}if(Dynamsoft.dcp.b64bit){z._driverType=C}else{C=Dynamsoft.EnumDWT_Driver.TWAIN;z._driverType=C}}else{if(d.bLinux){C=Dynamsoft.EnumDWT_Driver.SANE;z._driverType=C;if(C===Dynamsoft.EnumDWT_Driver.SANE){return i}else{m.Errors.ImageCaptureDriverTypeError(z);return p}}else{if(d.bMac){if(C===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA){z._driverType=C;z.__icaSourceCount=-1;return i}else{if(C!=Dynamsoft.EnumDWT_Driver.ICA&&C!=Dynamsoft.EnumDWT_Driver.TWAIN&&C!=Dynamsoft.EnumDWT_Driver.TWAIN64){m.Errors.ImageCaptureDriverTypeError(z);return p}}z._driverType=C}}}z.__icaSourceCount=0;z.CloseSourceManager();var B=z._innerFun("ImageCaptureDriverType",c.makeParams(C));z.OpenSourceManager();return B}m.Errors.ImageCaptureDriverTypeError(z);return p}})}if(z._isMobileMode()){j(z,"SourceCount",e)}else{n(z,"SourceCount",{get:function(){var K,I,H,A,F,G,N=[];var B,E,M,D,L="";z._resetErr();z._resetSources();z.__icaSourceCount=0;if(d.bMac&&(z._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA)){I=[];z.CloseSourceManager();z._innerFun("ImageCaptureDriverType",c.makeParams(Dynamsoft.EnumDWT_Driver.ICA));z.OpenSourceManager();if(z._errorCode!=0&&z._errorCode!=-3032){return 0}var J=z._innerFunRaw("GetSourceNames");if(z._errorCode!=0){return 0}if(J!=""){B=JSON.parse(s(J[0]))}else{B=[]}for(G=0;G<B.length;G++){A=B[G].ProductName;if(m.isString(A)){A=m.trim(A);if(A!==""){if(B[G].IsDefaultSource==="true"){H=A}if(B[G].DriverType==="ICA"){N.push("ICA-"+A)}else{N.push(A)}I.push(B[G])}}}if(H===undefined&&B.length>0){A=B[0].ProductName;if(m.isString(A)){A=m.trim(A);if(A!==""){if(B[0].DriverType==="ICA"){H="ICA-"+A}else{H=A}}}}z.CloseSourceManager();z._innerFun("ImageCaptureDriverType",c.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN));z.OpenSourceManager();if(z._errorCode!=0&&z._errorCode!=-3032){return 0}D=z._innerFunRaw("GetSourceNames");if(z._errorCode!=0){return 0}if(D!=""){M=JSON.parse(s(D[0]))}else{M=[]}for(G=0;G<M.length;G++){A=M[G].ProductName;if(m.isString(A)){A=m.trim(A);if(A!==""){if(M[G].IsDefaultSource==="true"){H=A}if(M[G].DriverType==="ICA"){N.push("ICA-"+A)}else{N.push(A)}I.push(M[G])}}}if(H===undefined&&M.length>0){A=M[0].ProductName;if(m.isString(A)){A=m.trim(A);if(A!==""){if(M[0].DriverType==="ICA"){H="ICA-"+A}else{H=A}}}}K=I.length;z.__defaultSourceName=H;z.__icaSourceCount=B.length;z.__sourceCount=K;z.__sourceName=N;z.__sourceDetails=I}else{if(d.bWin&&Dynamsoft.dcp.b64bit&&(z._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64)){I=[];z.CloseSourceManager();z._innerFun("ImageCaptureDriverType",c.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN));z.OpenSourceManager();if(z._errorCode!=0&&z._errorCode!=-3032){return 0}D=z._innerFunRaw("GetSourceNames");if(z._errorCode!=0){return 0}if(D!=""){M=JSON.parse(s(D[0]))}else{M=[]}for(G=0;G<M.length;G++){A=M[G].ProductName;if(m.isString(A)){A=m.trim(A);if(A!==""){if(M[G].IsDefaultSource==="true"){H=A}N.push(A);I.push(M[G])}}}if(H===undefined&&M.length>0){A=M[0].ProductName;if(m.isString(A)){A=m.trim(A);if(A!==""){H=A}}}if(Dynamsoft.dcp.b64bit){z.CloseSourceManager();z._innerFun("ImageCaptureDriverType",c.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN64));z.OpenSourceManager();if(z._errorCode!=0&&z._errorCode!=-3032){return 0}var C=z._innerFunRaw("GetSourceNames");if(z._errorCode!=0){return 0}if(C!=""){E=JSON.parse(s(C[0]))}else{E=[]}for(G=0;G<E.length;G++){A=E[G].ProductName;if(m.isString(A)){A=m.trim(A);if(A!==""){if(E[G].IsDefaultSource==="true"){H=A}if(E[G].DriverType==="TWAIN(64Bit)"){N.push("Twain64-"+A)}else{N.push(A)}I.push(E[G])}}}if(H===undefined&&E.length>0){A=E[0].ProductName;if(m.isString(A)){A=m.trim(A);if(A!==""){if(E[0].DriverType==="TWAIN(64Bit)"){H="Twain64-"+A}else{H=A}}}}}else{E=[]}K=I.length;z.__defaultSourceName=H;z.__icaSourceCount=M.length;z.__sourceCount=K;z.__sourceName=N;z.__sourceDetails=I}else{I=z._innerFunRaw("GetSourceNames");if(z._errorCode!=0){return 0}if(I!=""){F=JSON.parse(s(I[0]))}z.__defaultSourceName="";if(F&&F.length>=1){for(G=0;G<F.length;G++){A=F[G].ProductName;if(m.isString(A)){A=m.trim(A);if(A!==""){if(F[G].IsDefaultSource==="true"){H=A}N.push(A)}}}if(m.isString(H)){z.__defaultSourceName=H}else{A=F[0].ProductName;if(m.isString(A)){A=m.trim(A);if(A!==""){if(F[0].DriverType==="ICA"){z.__defaultSourceName="ICA-"+A}else{z.__defaultSourceName=A}}}}}else{F=[];N=[]}K=F.length;z.__sourceCount=K;if(z._driverType===Dynamsoft.EnumDWT_Driver.ICA&&d.bMac){if(K>0){m.each(N,function(Q,P){if(m.isString(Q)){var O=m.trim(Q);if(O!==""){N[P]="ICA-"+O}}});if(z.__defaultSourceName!==""){z.__defaultSourceName="ICA-"+z.__defaultSourceName}}}z.__sourceName=N;z.__sourceDetails=F}}if(K<=0){I=[];N=[];z.__sourceName=[];z.__sourceDetails=[];z.__defaultSourceName="";z.__sourceCount=0;return 0}return K}})}n(z,"HowManyImagesInBuffer",{get:function(){return z._ImgManager.count()}});n(z,"HTTPPostResponseString",{get:function(){z._resetErr();if(z.__HTTPPostResponseString){return z.__HTTPPostResponseString}else{return""}}});if(z._isMobileMode()){j(z,["FTPPort","IfShowProgressBar","IfAppendImage"])}else{n(z,"FTPPort",{get:function(){z._resetErr();return z._innerFun("FTPPort")},set:function(A){z._resetErr();if(A!==""){var B=A*1;return z._innerFun("FTPPort",c.makeParams(B))}}});n(z,"IfShowProgressBar",{get:function(){z._resetErr();return z.__IfShowProgressBar},set:function(A){if(!m.isBoolean(A)){m.Errors.InvalidValue(z);return p}z._resetErr();return(z.__IfShowProgressBar=A)}});n(z,"IfAppendImage",{get:function(){z._resetErr();return z.__IfAppendImage},set:function(A){if(!m.isBoolean(A)){m.Errors.InvalidValue(z);return p}z._resetErr();return(z.__IfAppendImage=A)}})}if(z._isMobileMode()){n(z,"JPEGQuality",{get:function(){z._resetErr();return z._jpgQuality},set:function(A){var B=A*1;if(B>=100){B=100}else{if(B<0){B=0}}z._resetErr();z._jpgQuality=B;return true}})}else{n(z,"JPEGQuality",{get:function(){z._resetErr();return z._innerFun("JPEGQuality")},set:function(A){var B=A*1;if(B>=100){B=100}else{if(B<0){B=0}}z._resetErr();return z._innerFun("JPEGQuality",c.makeParams(B))}})}if(z._isMobileMode()){n(z,"TIFFCompressionType",{get:function(){z._resetErr();return z._tiffCompressionType},set:function(A){z._resetErr();z._tiffCompressionType=A;return true}})}else{n(z,"TIFFCompressionType",a,k)}if(z._isMobileMode()){n(z,"BufferMemoryLimit",{get:function(){return 0},set:function(A){return false}})}else{n(z,"BufferMemoryLimit",a,k)}if(z._isMobileMode()){n(z,"LogLevel",{get:function(){z._resetErr();return z._logLevel},set:function(A){z._resetErr();var B=A*1;if(B>=14){B=14}else{if(B<0){B=0}}if(Dynamsoft.WasmEnv){Dynamsoft.WasmEnv.setLoglevel(z._logLevel)}z._logLevel=B;return true}})}else{n(z,"LogLevel",a,k)}n(z,"HttpContentTypeFieldValue",{get:function(){z._resetErr();return z.__strHttpContentTypeFieldValue},set:function(A){z._resetErr();z.__strHttpContentTypeFieldValue=A;return A}});n(z,"BrokerProcessType",{get:function(){z._resetErr();return 1},set:function(A){z._resetErr();return true}});n(z,"BorderStyle",{get:function(){z._resetErr();return 0},set:function(A){z._resetErr();return false}});n(z,"HttpFieldNameOfUploadedImage",{get:function(){z._resetErr();return z.__remoteFilename},set:function(A){z._resetErr();return(z.__remoteFilename=A)}});n(z,"style",{get:function(){return z.__style}});n(z,"Addon",{get:function(){return z.__addon}});n(z,"HTTPRequestswithCredentials",{get:function(){z._resetErr();return z.__withCredentials},set:function(A){z._resetErr();return(z.__withCredentials=A)}});n(z,"ScaleDownThreshold",{get:function(){z._resetErr();return z._scaleDownThreshold},set:function(A){z._resetErr();return(z._scaleDownThreshold=A)}});n(z,"CurrentImageIndexInBuffer",{get:function(){return z._ImgManager.getCurrentImageIndex()},set:function(A){var B=A*1;z._resetErr();if(B>=0&&B<z._ImgManager.count()){z._ImgManager.Go(B);if(!z._bNoUI){c.__innerRefreshFromUIView(z,z._ImgManager.getCurrentImageIndex())}}return true}});n(z,"SelectedImagesCount",{get:function(){z._resetErr();if(z._ImgManager.count()<=0){return 0}if(z._ImgManager.GetSelectedImageCount()==0){return 1}return z._ImgManager.GetSelectedImageCount()},set:function(B){var C,A=B*1;z._resetErr();if(z._ImgManager.count()<=0){A=0}else{if(A<1){A=1}}z._ImgManager.SetSelectedImageCount(A);return z._ImgManager.GetSelectedImageCount()}});n(z,"SelectedImagesIndices",{get:function(){z._resetErr();if(z._ImgManager.count()<=0){return[]}return z._ImgManager.getSelectedClientIndexArray()}});n(z,"MaxImagesInBuffer",{get:function(){z._resetErr();return z.__maxImagesInBuffer},set:function(B){var A=B*1;z._resetErr();if(A>0&&A<32768){z.__maxImagesInBuffer=A}else{m.Errors.OutOfRange(z)}return z.__maxImagesInBuffer}});n(z,"MaxUploadImageSize",{get:function(){z._resetErr();return z.__maxUploadImageSize},set:function(B){var A=B*1;z._resetErr();z.__maxUploadImageSize=A;if(z._isMobileMode()){}else{z._innerFun("MaxUploadImageSize",c.makeParams(A))}return z.__maxUploadImageSize}});if(z._isMobileMode()){n(z,"IfSSL",{get:function(){return z._ifSSL},set:function(A){z._ifSSL=A;return true}})}else{n(z,"IfSSL",a,q)}if(z._isMobileMode()){n(z,"IfAllowLocalCache",{get:function(){return false},set:function(A){return false}})}else{n(z,"IfAllowLocalCache",a,q)}n(z,"UseLocalService",{get:function(){return !z._isMobileMode()}});n(z,"PDFCompressionType",{get:function(){z._resetErr();if(z._isMobileMode()){return z._mobileNotSupport("PDFCompressionType")}return z._innerFun("PDFCompressionType")},set:function(A){var B=A*1;if(B==EnumDWT_PDFCompressionType.PDF_FAX3){B=EnumDWT_PDFCompressionType.PDF_FAX4}z._resetErr();if(z._isMobileMode()){return z._mobileNotSupport("PDFCompressionType")}return z._innerFun("PDFCompressionType",c.makeParams(B))}});z._getPdfDllname=function(){var A;if(d.bMac){if(Dynamsoft.dcp.b64bit){A="libDynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dylib"}else{A="libDynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dylib"}}else{if(d.bLinux){A="libDynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".so"}else{if(Dynamsoft.dcp.b64bit){A="DynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}else{A="DynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}}}return A};z._setConvertModeInner=function(C){if(!m.License.checkProductKey(z,{Core:true})){return false}var E=C*1,B=1,D=2,A=3;z._resetErr();if(isNaN(E)){m.Errors.ParameterCannotEmpty(z);return false}if(E!=B&&E!=D&&E!=A){m.Errors.InvalidValue(z);return false}z._pdfConvertMode=E;if(E==D||m.License.hasPDFRProductKey(z)){z._pdfRealConvertMode=E}else{z._pdfRealConvertMode=D}return true};z._setConvertMode=function(E){var C=1,F=2,B=3,D=z._setConvertModeInner(E);if(!D){return false}if(!z._isMobileMode()){var A=z._getPdfDllname();z._innerFun("SetPDFConvertMode",c.makeParams(z._pdfRealConvertMode,A))}if((z._pdfRealConvertMode==F)&&(z._pdfConvertMode==C)){m.Errors.LicenseNoPDF(z);return false}return true};z._setConvertModeAsync=function(F){var C=1,G=2,B=3,E=z._setConvertModeInner(F),D=m.Promise.resolve(true);if(!E){return m.Promise.reject({code:z._errorCode,message:z._errorString})}if(!z._isMobileMode()){var A=z._getPdfDllname();return z._innerFunV2("SetPDFConvertMode",c.makeParams(z._pdfRealConvertMode,A)).then(function(){if((z._pdfRealConvertMode==G)&&(z._pdfConvertMode==C)){m.Errors.LicenseNoPDF(z);throw {code:z._errorCode,message:z._errorString}}return true})}if((z._pdfRealConvertMode==G)&&(z._pdfConvertMode==C)){m.Errors.LicenseNoPDF(z);return m.Promise.reject({code:z._errorCode,message:z._errorString})}return m.Promise.resolve(true)};z._setProductKey=function(E,A,B,H){var D=true,G=E,F=Dynamsoft.WebTwainEnv,I=function(J){if(!J){z.__licenseInfo=false}var K=true;if(!H){K=m.License.checkProductKey(z,{Core:true})}if(m.isFunction(B)){B()}return K};z._resetErr();if(!m.isString(G)||G=="******"){G=""}F.ProductKey=G;if(G==""){D=false;I()}else{if(z._isMobileMode()){m.showProgressMsg(-1,"",Dynamsoft.MSG.Init_GetLicenseInfoForDWT);z.GetLicenseInfo(function(J){if(Dynamsoft.WasmEnv){Dynamsoft.WasmEnv.setLoglevel(z._logLevel)}z._setConvertMode(z._pdfConvertMode);z._resetErr();I(true)},I);return true}var C=function(J){z._innerFunRaw("ProductKey",c.makeParams(J),A,false,false,function(L){var K=false;if(m.isArray(L)){K=L[0]}else{K=L}if(m.isArray(L)){if(L.length>=3&&L[1]==="1"&&m.isFunction(m.ShowLicenseDialog)){m.ShowLicenseDialog(L[2],{width:510,height:272,bClose:true,seconds:10})}}if(!A){D=K}m.showProgressMsg(-1,"",Dynamsoft.MSG.Init_GetLicenseInfoForDWT);z.GetLicenseInfo(function(){z._setConvertMode(z._pdfConvertMode);I(true)},I)},function(){if(!A){D=false}I()})};if(m.startsWith(G,"http://")||m.startsWith(G,"https://")){m.ajax({method:"GET",url:G,onSuccess:function(J){C(J)}})}else{C(G)}}return D};g(z,["ProxyServer"]);var u=["CapValueString","CapDescription","FTPPassword","FTPUserName","Manufacturer","ProductFamily","PDFAuthor","PDFCreationDate","PDFCreator","PDFKeywords","PDFModifiedDate","PDFProducer","PDFSubject","PDFTitle","PDFVersion"];if(z._isMobileMode()){j(z,u)}else{g(z,u)}l(z,["ImageBitsPerPixel","ImageLength","ImageWidth","ImageXResolution","ImageYResolution"]);var y=["BlankImageCurrentStdDev","CapDefaultIndex","CapDefaultValue","DataSourceStatus","Duplex","PendingXfers","ImageLayoutDocumentNumber","ImageLayoutFrameBottom","ImageLayoutFrameLeft","ImageLayoutFrameNumber","ImageLayoutFrameRight","ImageLayoutFrameTop","ImageLayoutPageNumber","ImagePixelType","MagData","MagType","IfFeederLoaded","IfPaperDetectable","IfUIControllable"];if(z._isMobileMode()){j(z,y,e)}else{l(z,y)}r(z,["AllowPluginAuthentication","IfModalUI","IfScanInNewThread","_AutoCropMethod"]);var w=["CurrentSourceName","IfDisableSourceAfterAcquire","IfDuplexEnabled","IfFeederEnabled","IfShowFileDialog","IfShowUI","IfPASVMode","IfAutoBright","IfAutoDiscardBlankpages","IfAutoFeed","IfAutomaticBorderDetection","IfAutomaticDeskew","IfAutoScan","IfShowIndicator","IfUseTwainDSM","IfTiffMultiPage"];if(z._isMobileMode()){j(z,w)}else{r(z,w)}o(z,["MaxInternetTransferThreads"]);var v=["BlankImageMaxStdDev","BlankImageThreshold","BitDepth","Brightness","PageSize","PixelType","Resolution","Capability","CapCurrentIndex","CapCurrentValue","CapMaxValue","CapMinValue","CapNumItems","CapStepSize","CapType","CapValue","CapValueType","Contrast","PixelFlavor","TransferMode","Unit","XferCount"];if(z._isMobileMode()){j(z,v)}else{o(z,v)}b(z,["AsyncMode","EnableInteractiveZoom","IfThrowException","ImageEditorIfEnableEnumerator","ImageEditorIfReadonly","ImageEditorIfModal","ImageEditorWindowTitle","IfShowPrintUI","VScrollBar"],q);var x=["IfOpenImageWithGDIPlus"];if(z._isMobileMode()){j(z,x)}else{b(z,x)}};if(!m.attachPropertyUI){m.attachPropertyUI=function(){}}});Dynamsoft.Ready(function(c,b){var a=Dynamsoft;if(!c.product.bHTML5Edition){return}var d=Dynamsoft.navInfoSync,f=c.html5.STwain,e=f.prototype,g=c.html5.Funs;e.__innerLoadImage=function(h,n,l,k,j,i){var o=this;if(!c.License.checkProductKey(o,{Core:true})){if(c.isFunction(i)){i(o._errorCode,o._errorString)}return false}if(!c.License.checkPDFProductKeyWhenNeeds(o,l)){if(c.isFunction(i)){i(o._errorCode,o._errorString)}return false}if(c.isFunction(j)){return o.__innerAcquireImage(h,n,k,j,i)}else{return o.__innerLoadImageFun(h,n)}};e.__innerLoadImageFun=function(h,j){var l=this,i;if(g.isHttpServerInvalid(l)){return false}i=l._innerFunRaw(h,j,false,false,false);if(c.isArray(i)){if(i.length===0){return false}else{if(i.length===1){var k=i[0];if(k<=0){return false}}}l._OnBitmapChanged(["0",i.join(","),1,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()]);i=true}return i};e.__innerAcquireImage=function(i,o,l,k,j){var q=this,h=(i=="LoadImage"||i=="LoadImageEx"||i=="GenerateURLForUploadData");var n=function(m){q.__bLoadingImage=false;var p=q._ImgManager.getCurrentImageIndex();if(p>=0){q.OnRefreshUI(p)}if(c.isFunction(j)){j(q.ErrorCode,q.ErrorString)}if(h){Dynamsoft.Lib.closeProgress(i)}else{g.hideMask(i)}if(m){Dynamsoft.Lib.log(m)}return false};if(g.isServerInvalid(q)){n();return false}if(h){Dynamsoft.Lib.showProgress(q,i,false)}else{g.showMask(i)}q._innerSend(i,o,true,function(){q.__bLoadingImage=false;if(h){Dynamsoft.Lib.closeProgress(i);if(!q._bNoUI){var m=q._ImgManager.getCurrentImageIndex();if(m>=0){q.OnRefreshUI(m)}}}else{g.hideMask(i)}if(c.isFunction(k)){k()}},n);return true};e.__innerSaveImage=function(h,j,i,l){var k=this;k._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding]);return k.__innerProgressFunction(h,j,false,i,l)};e.__innerFTPDownloadDirectly=function(h,k,j,i,n){var l=this;if(!c.License.checkProductKey(l,{Core:true})){if(c.isFunction(n)){n(l._errorCode,l._errorString)}return false}if(!c.License.checkPDFProductKeyWhenNeeds(l,j)){if(c.isFunction(n)){n(l._errorCode,l._errorString)}return false}c.cancelFrome=4;return l.__innerProgressFunction(h,k,true,i,n)};e.__innerFTPDownload=function(h,n,l,k,q){var o=this,j;if(!c.License.checkProductKey(o,{Core:true})){if(c.isFunction(q)){q(o._errorCode,o._errorString)}return false}if(!c.License.checkPDFProductKeyWhenNeeds(o,l)){if(c.isFunction(q)){q(o._errorCode,o._errorString)}return false}c.cancelFrome=4;if(c.isFunction(q)){return o.__innerProgressFunction(h,n,true,function(){var m=o._ImgManager.getCurrentImageIndex();if(m>=0){o.OnRefreshUI(m)}if(c.isFunction(k)){k()}},q)}else{j=o.__innerLoadImageFun(h,n);var i=o._ImgManager.getCurrentImageIndex();if(i>=0){o.OnRefreshUI(i)}return j}};e.__innerFTPUpload=function(h,j,i,k){Dynamsoft.Lib.cancelFrome=3;return this.__innerProgressFunction(h,j,true,i,k)};e.__innerProgressFunction=function(h,l,i,j,o){var n=this;if(!c.isFunction(o)){return this._innerFun(h,l)}var k=function(m){if(c.isFunction(o)){o(n.ErrorCode,n.ErrorString)}Dynamsoft.Lib.closeProgress(h);if(m){Dynamsoft.Lib.log(m)}return true};Dynamsoft.Lib.showProgress(n,h,i);return this._innerSend(h,l,true,function(){Dynamsoft.Lib.closeProgress(h);if(c.isFunction(j)){j()}},k)};e.__innerGetBarcodeResultAsyncFunction=function(i){var h=Dynamsoft.Lib.NewBarcodeResult();if(i){h._errorCode=i.exception;h._errorString=i.description;h._resultlist=i.result;h._Count=i.result.length}return h};e.__innerGetOCRResultAsyncFunction=function(i){var h=Dynamsoft.Lib.NewOCRResult(this);if(i){h._errorCode=i.exception;h._errorString=i.description;h._resultlist=i.result}return h};e._innerSendCmd=function(h,i){var j=this;if(g.isHttpServerInvalid(j)){return false}j._innerFunRaw(h,i,true,false,true)};e._innerFun=function(h,j){var k=this,i;if(g.isHttpServerInvalid(k)){return false}i=k._innerFunRaw(h,j,false,false,false);if(Dynamsoft.Lib.isArray(i)){return i[0]}return i};e._innerFunRawV2=function(h,l,k){var n=this,j,i="fa/";if(g.isHttpServerInvalid(n)){return c.Promise.reject({code:n._errorCode,message:n._errorString})}n._resetErr();j={method:"post",body:g.getJson(n,h,l,0),dataType:k};return c.fetch([n.httpUrl,i,h,"?",g.getRandom()].join(""),j).then(function(m){var o=false;try{if(c.isString(m)){o=c.parse(m)}else{o=m}}catch(p){}if(o){if(o instanceof Blob||o instanceof ArrayBuffer){return o}if(o.exception!==undefined&&o.description!==undefined){n._errorCode=o.exception;n._errorString=o.description}else{n._resetErr();return o}}else{Dynamsoft.Lib.Errors.InvalidResultFormat(n)}throw {code:n._errorCode,message:n._errorString}},function(m){Dynamsoft.Lib.Errors.NetworkError(n);if(m){n._errorString=[n._errorString," ",m.errorString," (",m.httpCode,")"].join("")}throw {code:n._errorCode,message:n._errorString}})};e._innerFunV2=function(h,i){var j=this;if(g.isHttpServerInvalid(j)){return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunRawV2(h,i,"text").then(function(k){if(k&&Dynamsoft.Lib.isArray(k.result)&&k.result.length>0){return k.result[0]}return k})};e._innerFunRaw=function(k,j,t,l,u,v,i){var r=this,h,w,q,o="f/",s,n=false;if(g.isHttpServerInvalid(r)){return false}r._resetErr();if(t){n=true;o="fa/"}h=[r.httpUrl,o,k,"?",g.getRandom()].join("");w=g.getJson(r,k,j,0);q={method:"POST",url:h,data:w,async:n,onSuccess:function(x,p,m){var y=false;try{if(c.isString(x)&&m.getResponseHeader("content-type")==="text/json"){y=c.parse(x)}else{y=x}}catch(z){}if(y){if(y.exception!==undefined&&y.description!==undefined){r._errorCode=y.exception;r._errorString=y.description}else{r._resetErr()}if(u){s=y}else{s=y.result}}else{Dynamsoft.Lib.Errors.InvalidResultFormat(r);s=""}if(c.isFunction(v)){v(s)}},onError:function(){Dynamsoft.Lib.Errors.NetworkError(r);s="";if(c.isFunction(i)){i()}}};if(!n&&l){if(d.bIE){q.dataType="arraybuffer";q.onSuccess=function(D,F,y){var p,A,E=false;if(y.responseHeadersString){var x=y.responseHeadersString;if(x.indexOf("text/json")!=-1){E=true}}p=y.responseData;r._resetErr();s=false;if(p){A=new Uint8Array(p);if(E){p=String.fromCharCode.apply(null,A)}else{s=new Blob([A],{type:r.__strHttpContentTypeFieldValue})}}if(!p||E){var C,B,m=false;if(E){C=p}else{C=y.responseText}B=C.length;if(B>0){if(C.charAt(0)=="{"){try{m=c.parse(C);E=true}catch(z){Dynamsoft.Lib.log(C)}}if(E){if(m.exception!==undefined&&m.description!==undefined){r._errorCode=m.exception;r._errorString=m.description;s=false}else{s=true}}else{A=new Uint8Array(C);s=new Blob([A],{type:r.__strHttpContentTypeFieldValue})}}}}}else{if(!n){q.contentType="text/plain; charset=x-user-defined";q.mimeType="text/plain; charset=x-user-defined"}q.onSuccess=function(C,E,p){var A,x,B;A=p.responseText;x=A.length;r._resetErr();if(x>0){var D=false,m;if(A.charAt(0)=="{"){try{m=c.parse(A);D=true}catch(y){Dynamsoft.Lib.log(A)}}if(D){if(m.exception!==undefined&&m.description!==undefined){r._errorCode=m.exception;r._errorString=m.description;s=false}else{s=true}}else{B=new Uint8Array(x);for(var z=0;z<x;z++){B[z]=A.charCodeAt(z)}s=new Blob([B],{type:r.__strHttpContentTypeFieldValue})}}else{s=""}}}}else{if(n&&l){q.dataType="blob";q.onSuccess=function(m,y,x){if(x.responseHeadersString.indexOf("image/png")>=0){r._resetErr();if(c.isFunction(v)){v(m)}}else{var p=new FileReader();p.onload=function(){var A=p.result,z;try{z=c.parse(A);if(z.exception!==undefined&&z.description!==undefined){r._errorCode=z.exception;r._errorString=z.description;if(c.isFunction(i)){i()}}else{if(c.isFunction(v)){v(z.result)}}}catch(B){Dynamsoft.Lib.log(A);if(c.isFunction(v)){v(A)}}};p.readAsText(m)}}}}if(!n){c.mix(q,{headers:{"X-Requested-With":false}})}if(d.bFileSystem){q.crossDomain=false}c.ajax(q);if(n){return true}return s};e._innerSend=function(l,i,o,r,v){var s=this,j=s._objWS,x=false,q=false,h=false,k=true;if(l=="ActiveUI"){k=false}else{h=g.isServerInvalid(s)}if(h){if(c.isFunction(v)){v()}return true}if(c.isFunction(r)){q=r}if(c.isFunction(v)){x=v}var z=g.generateCmdId(),u;if(l=="SaveSelectedImagesToBytes"||l=="ConvertToBlob"){var y=g.getJson(s,l,i,z),t=true,n=true,w=true;s._innerFunRaw(l,y,t,n,w,q,x);u=true}else{s.curCommand.push({cmd:l,cmdId:z,sFun:q,fFun:x});u=g.sendData(j,g.getJson(s,l,i,z),false,k)}return u};e.__innerConvertToBlob=function(v,j,o,q,t,u,i,r){var s=this;if(s._isMobileMode()){return s.__innerConvertToBlobByMobile(v,j,o,t,u,i,r)}var n=o,m=true,l=",";if(!c.isString(n)||n==""){n="";l=""}var h=["[",v,',"',j.join(","),'"',l,n,"]"].join("");if(q){return s._innerFunRaw("ConvertToBlob",h,true,m,true,function(p){if(c.isFunction(u)){u(p,r)}},i)}else{var k=s._innerFunRaw("ConvertToBlob",h,false,m,false);if(s.ErrorCode==0){return u(k,r)}else{i();return false}}};e.__innerConvertToBlobByMobile=function(t,k,n,r,s,j,o){var p=this,m=function(i,u){fetch(i,{mode:"cors"}).then(function(v){return v.arrayBuffer()}).then(function(v){var x="image/"+u;if(u=="pdf"){x="application/pdf"}var w=new Blob([v],{type:x});if(c.isFunction(s)){s(w,o)}})["catch"](function(v){if(c.isFunction(j)){j(v)}})},h=[],q,l;if(t==EnumDWT_ImageType.IT_BMP){q="bmp";return p._mobileNotSupport("Convert to bmp",j)}else{if(t==EnumDWT_ImageType.IT_JPG){q="jpg"}else{if(t==EnumDWT_ImageType.IT_PNG){q="png"}else{if(t==EnumDWT_ImageType.IT_TIF){q="tiff"}else{if(t==EnumDWT_ImageType.IT_PDF){q="pdf"}else{q="png"}}}}}for(l=0;l<k.length;l++){h.push(p._ImgManager.convertServerIdToClientIndex(k[l]))}return p._innerSendToMobile("SaveImage",Dynamsoft.Lib.MobileFuns.makeParams("",h,q,r,false),0,m,j)};e.__innerConvertToBase64ByMobile=function(k,r,p,q,j){var n=this,m=function(i,s){fetch(i,{mode:"cors"}).then(function(t){return t.arrayBuffer()}).then(function(t){var u=new FileReader();u.onload=function(x){var y=x.target.result,w=c.isString(y)?y.split(","):[];if(w.length>=2){y=w[1]}if(c.isFunction(q)){q({result:[y,y.length,this.md5]})}};var v="image/"+s;if(s=="pdf"){v="application/pdf"}n._innerSendToMobile("GetMD5",Dynamsoft.Lib.MobileFuns.makeParams(t),0,function(w){u.md5=w;u.readAsDataURL(new Blob([t],{type:v}))},j)},function(t){if(c.isFunction(j)){j(t)}})},h=[],o,l;if(r==EnumDWT_ImageType.IT_BMP){o="bmp";return n._mobileNotSupport("Convert to bmp",j)}else{if(r==EnumDWT_ImageType.IT_JPG){o="jpg"}else{if(r==EnumDWT_ImageType.IT_PNG){o="png"}else{if(r==EnumDWT_ImageType.IT_TIF){o="tiff"}else{if(r==EnumDWT_ImageType.IT_PDF){o="pdf"}else{o="png"}}}}}for(l=0;l<k.length;l++){h.push(n._ImgManager.convertServerIdToClientIndex(k[l]))}return n._innerSendToMobile("SaveImage",Dynamsoft.Lib.MobileFuns.makeParams("",h,o,p,false),0,m,j)};e.__SaveLocalFileToBytes=function(j,h,m,l,o){var n=this,k=true;if(h){n._innerFunRaw("SaveSelectedImagesToBytes",g.makeParams(0,0,j,m),h,k,true,l,o);return true}else{var i=n._innerFunRaw("SaveSelectedImagesToBytes",g.makeParams(0,0,j,m),h,k,false);if(n.ErrorCode==0){return l(i)}else{o();return false}}};e.__LoadImageFromBytes=function(B,i,z,A,o,q,l,s){var x=this,w="LoadImageFromBytes",r=i||3,u=B.size||B.length,k=B.name||"unknown",v,y=g.isServerInvalid(x),n=true,j=0;if(!isNaN(l)&&l>=0&&!isNaN(s)&&s>0){}else{l=0;s=0}j=x.__GetLoadEventsNum();v=["[",u,",",0,",",r,',"',z,'",',l,",",s,",",j,"]"].join("");var h=function(){Dynamsoft.Lib.closeProgress(w);x.__bLoadingImage=false;if(n){var m=x._ImgManager.getCurrentImageIndex();if(m>=0){x.OnRefreshUI(m)}}if(c.isFunction(q)){q(x._errorCode,x._errorString,k)}return false};if(y){n=false;return h()}if(!c.License.checkProductKey(x,{Core:true})&&!c.License.checkProductKey(x,{Webcam:true},true)){n=false;return h()}if(!c.License.checkPDFProductKeyWhenNeeds(x,i)){n=false;return h()}if(u===0){Dynamsoft.Lib.Errors.ImageFileLengthCannotZero(x);n=false;return h()}g.setBtnCancelVisibleForProgress(x,false);return this._innerSendBlob(w,v,B,A,function(){if(l+u==s||s<=0||isNaN(s)){Dynamsoft.Lib.closeProgress(w)}x.__bLoadingImage=false;if(!x._bNoUI){var m=x._ImgManager.getCurrentImageIndex();if(A&&m>=0){x.OnRefreshUI(m)}}if(c.isFunction(o)){setTimeout(function(){o(k)},30)}return true},h)};e._innerSendBlob=function(k,i,v,q,o,u){var s=this,j=s._objWS,n=false,w=false;if(g.isServerInvalid(s)){if(c.isFunction(u)){u()}return false}n=function(m){if(c.isArray(m)&&m.length>0&&m[0]>0){s._OnBitmapChanged(["0",m.join(","),1,s._ImgManager.getCurrentImageIndex(),s._ImgManager.count()])}if(c.isFunction(o)){o()}};if(c.isFunction(u)){w=u}if(q){var x=g.generateCmdId();s.curCommand.push({cmd:k,cmdId:x,sFun:n,fFun:w});g.sendData(j,g.getJson(s,k,i,x),v,true)}else{var t,h,y,r,l="f/";if(g.isHttpServerInvalid(s)){return false}s._resetErr();h=[s.httpUrl,l,k,"?",g.getRandom()].join("");y=g.getJson(s,k,i,0);y+="\r\n\r\n";y+=Dynamsoft.Lib.base64.encodeArray(v);r={method:"post",url:h,processData:false,data:y,async:false,onSuccess:function(z,p,m){var A=false;try{if(c.isString(z)&&m.getResponseHeader("content-type")==="text/json"){A=c.parse(z)}else{A=z}}catch(B){}if(A!==undefined&&A!==null){if(A.exception!==undefined&&A.description!==undefined){s._errorCode=A.exception;s._errorString=A.description}else{s._resetErr()}t=A.result}else{Dynamsoft.Lib.Errors.InvalidResultFormat(s);t=""}},onError:function(){Dynamsoft.Lib.Errors.NetworkError(s);t=""}};c.mix(r,{headers:{"X-Requested-With":false}});if(d.bFileSystem){r.crossDomain=false}c.ajax(r);if(s._errorCode==0){if(c.isFunction(n)){n(t)}}else{if(c.isFunction(w)){w()}}return t}};e._innerActiveUI=function(i,h){this._innerSend("ActiveUI",g.makeParams(Dynamsoft.Lib.env.WSVersion,Dynamsoft.Lib.env.WSSession,1),false,i,h)}});Dynamsoft.Ready(function(a,f){var b=Dynamsoft;if(!a.product.bHTML5Edition){return}var e=Dynamsoft.navInfo,j=a.html5.STwain,c=j.prototype,h=a.html5.Funs,i=h.RemoveNonPrintableChar,g=Dynamsoft.WebTwainEnv,d=["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnPostTransferAsync"];c.LoadDibFromClipboard=function(n,l){var o=this;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("LoadDibFromClipboard",l)}var m=-1,k=0;k=o.__GetLoadEventsNum();return o.__innerLoadImage("LoadDibFromClipboard",h.makeParams(k),m,true,n,l)};c.LoadImage=function(p,o,k){var q=this;q._resetErr();if(q._isMobileMode()){return q._mobileNotSupport("LoadImage",k)}var r=h.replaceLocalFilename(p),n=a.html5.Funs.getImageType(r),m=0,s,l;if(o&&a.isFunction(o)){s=function(){o()}}if(k&&a.isFunction(k)){l=function(){k(q.ErrorCode,q.ErrorString)}}m=q.__GetLoadEventsNum();return q.__innerLoadImage("LoadImage",h.makeParams(r,m),n,true,s,l)};c.LoadImageEx=function(o,p,n,k){var q=this;q._resetErr();if(q._isMobileMode()){var s=a.one(".d-loadImage");if(s.length==0){var v=document.createElement("input");v.setAttribute("type","file");v.style="position:absolute;top:-2px;left:-2px;width:1px;height:1px;";v.className="d-loadImage";if(p==Dynamsoft.EnumDWT_ImageType.IT_BMP){v.setAttribute("accept","image/bmp")}else{if(p==Dynamsoft.EnumDWT_ImageType.IT_JPG){v.setAttribute("accept","image/jpeg")}else{if(p==Dynamsoft.EnumDWT_ImageType.IT_TIF){v.setAttribute("accept","image/tiff")}else{if(p==Dynamsoft.EnumDWT_ImageType.IT_PNG){v.setAttribute("accept","image/png")}else{if(p==Dynamsoft.EnumDWT_ImageType.IT_PDF){v.setAttribute("accept",".pdf")}else{if(a.env.bMobile){v.setAttribute("accept","image/jpeg,image/png,image/tiff")}else{v.setAttribute("accept","image/*,.pdf")}}}}}}v.onchange=function(){if(v.files.length>0){q.LoadImageFromBinary(v.files,n,k)}};document.body.appendChild(v);v.click()}else{if(p==Dynamsoft.EnumDWT_ImageType.IT_BMP){s[0].setAttribute("accept","image/bmp")}else{if(p==Dynamsoft.EnumDWT_ImageType.IT_JPG){s[0].setAttribute("accept","image/jpeg")}else{if(p==Dynamsoft.EnumDWT_ImageType.IT_TIF){s[0].setAttribute("accept","image/tiff")}else{if(p==Dynamsoft.EnumDWT_ImageType.IT_PNG){s[0].setAttribute("accept","image/png")}else{if(p==Dynamsoft.EnumDWT_ImageType.IT_PDF){s[0].setAttribute("accept",".pdf")}else{if(a.env.bMobile){s[0].setAttribute("accept","image/jpeg,image/png,image/tiff")}else{s[0].setAttribute("accept","image/*,.pdf")}}}}}}s[0].value="";s[0].click()}return true}var r=h.replaceLocalFilename(o),t=p,m=0,u,l;if(n&&a.isFunction(n)){u=function(){n()}}if(k&&a.isFunction(k)){l=function(){k(q.ErrorCode,q.ErrorString)}}if(t==EnumDWT_ImageType.IT_ALL){t=-1}m=q.__GetLoadEventsNum();return q.__innerLoadImage("LoadImageEx",h.makeParams(r,t,m),t,true,u,l)};c.EnableSource=function(l,m,k){var n=this;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("EnableSource",k)}return n.AcquireImage(l,m,k)};c.AcquireImage=function(s,r,q){var n=this,p=null,k=null,t,o;n._resetErr();if(a.isUndefined(q)&&(a.isFunction(s)&&a.isFunction(r)||a.isFunction(s)&&a.isUndefined(r)||a.isFunction(s)&&r==null||s==null&&a.isFunction(r))){o={};if(a.isFunction(s)){p=s}if(a.isFunction(r)){k=r}}else{if(a.isUndefined(s)||s==null){o={}}else{o=s}if(a.isFunction(r)){p=function(){r(o)}}if(a.isFunction(q)){k=function(){q(o,n._errorCode,n._errorString)}}}if(!a.License.checkProductKey(n,{Core:true})){if(a.isFunction(k)){k(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){return n._mobileNotSupport("AcquireImage",k)}if(h.isServerInvalid(n)){if(a.isFunction(k)){k(n.ErrorCode,n.ErrorString)}return false}var m=0;for(var l=0;l<d.length;l++){var u=["__",d[l]].join("");if(a.isFunction(n[u])){m=m|(1<<l)}}o.EnableEvents=m;t=["[",a.stringify(o),"]"].join("");return n.__innerAcquireImage("AcquireImage",t,false,p,k)};c._startScan=function(s,r,q){var n=this,p=null,k=null,t,o;if(a.isUndefined(s)||s==null){o={}}else{o=s}if(a.isFunction(r)){p=function(){r(o)}}if(a.isFunction(q)){k=function(w,v){q(w,v,o)}}if(h.isServerInvalid(n)){if(a.isFunction(k)){k(n._errorCode,n._errorString)}return false}if(!a.License.checkProductKey(n,{Core:true})){if(a.isFunction(k)){k(n._errorCode,n._errorString)}return false}var m=0;for(var l=0;l<d.length;l++){var u=["__",d[l]].join("");if(a.isFunction(n[u])){m=m|(1<<l)}}o.EnableEvents=m;t=["[",a.stringify(o),"]"].join("");return n.__innerAcquireImage("StartScan",t,false,p,k)};c.CancelAllPendingTransfers=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("CancelAllPendingTransfers")}return this._innerFun("CancelAllPendingTransfers")};c.CloseSource=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("CloseSource")}return k._innerFun("CloseSource")};c.CloseSourceManager=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("CloseSourceManager")}return k._innerFun("CloseSourceManager")};c.CloseSourceAsync=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupportAsync("CloseSource")}return k._innerFunV2("CloseSource")};c.CloseSourceManagerAsync=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupportAsync("CloseSourceManager")}return k._innerFunV2("CloseSourceManager")};c.DisableSource=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("DisableSource")}return k._innerFun("DisableSource")};c.FeedPage=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("FeedPage")}return k._innerFun("FeedPage")};c.GetDeviceType=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("GetDeviceType")}return k._innerFun("GetDeviceType")};c.GetSourceNameItems=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("GetSourceNameItems")}if(l.__sourceCount<0){l.SourceCount=0}if(k<l.__sourceCount&&k>=0){return l.__sourceName[k]}else{return""}};c.SourceNameItems=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("SourceNameItems")}return l.GetSourceNameItems(k)};c.GetSourceNames=function(k){var m=this,l=m.SourceCount;if(l<=0){l=0}if(k){return m.__sourceDetails}else{return m.__sourceName}};c._resetSources=function(){var k=this;k.__defaultSourceName="";k.__sourceCount=0;k.__icaSourceCount=-1;k.__sourceName=[];k.__sourceDetails=[]};c.getSourceCount=function(){var l=this,k;l._resetErr();l._resetSources();a.showMask();if(e.bMac&&(l._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA)){k=l.CloseSourceManagerAsync().then(function(){return l._innerFunV2("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.ICA))}).then(function(){return l.OpenSourceManagerAsync()}).then(function(){if(l._errorCode!=0&&l._errorCode!=-3032){throw 0}return l._innerFunV2("GetSourceNames")}).then(function(n){if(l._errorCode!=0){throw 0}var m=[];if(n!=""){m=JSON.parse(i(n))}return m}).then(function(p){var m,o,n;for(n=0;n<p.length;n++){o=p[n];m=o.ProductName;if(a.isString(m)){m=a.trim(m);if(m!==""){if(o.DriverType==="ICA"){m="ICA-"+m}if(o.IsDefaultSource==="true"){l.__defaultSourceName=m}l.__sourceName.push(m);l.__sourceDetails.push(o)}}}l.__icaSourceCount=l.__sourceDetails.length}).then(function(){return l.CloseSourceManagerAsync()}).then(function(){return l._innerFunV2("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN))}).then(function(){return l.OpenSourceManagerAsync()}).then(function(){if(l._errorCode!=0&&l._errorCode!=-3032){throw 0}return l._innerFunV2("GetSourceNames")}).then(function(n){if(l._errorCode!=0){throw 0}var m=[];if(n!=""){m=JSON.parse(i(n))}return m}).then(function(p){var m,o,n;for(n=0;n<p.length;n++){o=p[n];m=o.ProductName;if(a.isString(m)){m=a.trim(m);if(m!==""){if(o.DriverType==="ICA"){m="ICA-"+m}if(o.IsDefaultSource==="true"){l.__defaultSourceName=m}l.__sourceName.push(m);l.__sourceDetails.push(o)}}}}).then(function(){var m=l.__sourceDetails.length;l.__sourceCount=m;if(l.__defaultSourceName===""&&l.__sourceName.length>0){l.__defaultSourceName=l.__sourceName[0]}a.hideMask();return m},function(){l._resetSources();l.__icaSourceCount=0;a.hideMask();return 0})}else{if(e.bWin&&Dynamsoft.dcp.b64bit&&(l._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64)){k=l.CloseSourceManagerAsync().then(function(){return l._innerFunV2("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN))}).then(function(){return l.OpenSourceManagerAsync()}).then(function(){if(l._errorCode!=0&&l._errorCode!=-3032){throw 0}return l._innerFunV2("GetSourceNames")}).then(function(n){if(l._errorCode!=0){throw 0}var m=[];if(n!=""){m=JSON.parse(i(n))}return m}).then(function(p){var m,o,n;for(n=0;n<p.length;n++){o=p[n];m=o.ProductName;if(a.isString(m)){m=a.trim(m);if(m!==""){if(o.IsDefaultSource==="true"){l.__defaultSourceName=m}l.__sourceName.push(m);l.__sourceDetails.push(o)}}}l.__icaSourceCount=l.__sourceDetails.length});if(Dynamsoft.dcp.b64bit){k=k.then(function(){return l.CloseSourceManagerAsync()}).then(function(){return l._innerFunV2("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN64))}).then(function(){return l.OpenSourceManagerAsync()}).then(function(){if(l._errorCode!=0&&l._errorCode!=-3032){throw 0}return l._innerFunV2("GetSourceNames")}).then(function(n){if(l._errorCode!=0){throw 0}var m=[];if(n!=""){m=JSON.parse(i(n))}return m}).then(function(m){var n,p,o;for(o=0;o<m.length;o++){p=m[o];n=p.ProductName;if(a.isString(n)){n=a.trim(n);if(n!==""){if(p.DriverType==="TWAIN(64Bit)"){n="Twain64-"+n}if(p.IsDefaultSource==="true"){l.__defaultSourceName=n}l.__sourceName.push(n);l.__sourceDetails.push(p)}}}})}k=k.then(function(){var m=l.__sourceDetails.length;l.__sourceCount=m;if(l.__defaultSourceName===""&&l.__sourceName.length>0){l.__defaultSourceName=l.__sourceName[0]}a.hideMask();return m},function(){l._resetSources();l.__icaSourceCount=0;a.hideMask();return 0})}else{k=l._innerFunV2("GetSourceNames").then(function(n){if(l._errorCode!=0){return 0}var m=[];if(n!=""){m=JSON.parse(i(n))}return m}).then(function(p){var m,o,n;for(n=0;n<p.length;n++){o=p[n];m=o.ProductName;if(a.isString(m)){m=a.trim(m);if(m!==""){if(o.DriverType==="ICA"){m="ICA-"+m}if(o.IsDefaultSource==="true"){l.__defaultSourceName=m}l.__sourceName.push(m);l.__sourceDetails.push(o)}}}}).then(function(){var m=l.__sourceDetails.length;l.__sourceCount=m;if(l.__defaultSourceName===""&&l.__sourceName.length>0){l.__defaultSourceName=l.__sourceName[0]}l.__icaSourceCount=0;a.hideMask();return m},function(){l._resetSources();l.__icaSourceCount=0;a.hideMask();return 0})}}return k};c.GetSourceNamesAsync=function(k){var m=this,l;if(m._isMobileMode()){return m._mobileNotSupportAsync("GetSourceNames")}l=m.getSourceCount();if(k){return l.then(function(n){return m.__sourceDetails})}else{return l.then(function(n){return m.__sourceName})}};c.GetSourceType=function(l){var n=this,m=l*1,k=0;if(e.bMac&&n._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA){if(n.__icaSourceCount==-1){k=n.SourceCount;if(k<=0){k=0}}if(m>=n.__icaSourceCount){m-=n.__icaSourceCount;n.CloseSourceManager();n._innerFun("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN));n.OpenSourceManager()}else{n.CloseSourceManager();n._innerFun("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.ICA));n.OpenSourceManager()}}else{if(e.bWin&&Dynamsoft.dcp.b64bit&&n._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(n.__icaSourceCount==-1){k=n.SourceCount;if(k<=0){k=0}}if(m>=n.__icaSourceCount){m-=n.__icaSourceCount;n.CloseSourceManager();n._innerFun("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN64));n.OpenSourceManager()}else{n.CloseSourceManager();n._innerFun("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN));n.OpenSourceManager()}}}return n._innerFun("GetSourceType",h.makeParams(m))};c.OpenSource=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("OpenSource")}return k._innerFun("OpenSource")};c.OpenSourceManager=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("OpenSourceManager")}return k._innerFun("OpenSourceManager")};c.OpenSourceAsync=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupportAsync("OpenSource")}return k._innerFunV2("OpenSource")};c.OpenSourceManagerAsync=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupportAsync("OpenSourceManager")}return k._innerFunV2("OpenSourceManager")};c.ResetImageLayout=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("ResetImageLayout")}return k._innerFun("ResetImageLayout")};c.RewindPage=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("RewindPage")}return k._innerFun("RewindPage")};c.SelectSource=function(k,l){var m=this;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("SelectSource",l)}if(a.isUndefined(k)){if(m._driverType==Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64){a.Errors.SelectSourceMustAsync(m);return false}return m._innerFun("SelectSource")}else{m.SelectSourceAsync().then(k,function(){if(a.isFunction(l)){l(m.ErrorCode,m.ErrorString)}});return true}};c.SelectSourceAsync=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupportAsync("SelectSource")}if(k){return l._innerFunV2("SelectSource",h.makeParams(k))}return l.getSourceCount().then(function(n){var p;if(n<=0){var r=g.CustomizableDisplayInfo.dialogText.selectSource[3];alert(r);return a.Promise.reject(r)}if(!a.dialog.selectsourcedlg){var o=document.createElement("dialog"),t,m=-1;o.className="dynamsoft-dialog-selectsource";o.style.top="20%";if(e.bIE||e.bEdge){o.style.width="300px"}o.setAttribute("closed","closed");t=[];t.push('<ul id="dynamsoft-dialog-selectsource-sourcelist-ul">');for(p=0;p<l.__sourceCount;p++){var s="";if((l.__defaultSourceName==""&&p==0)||l.__defaultSourceName==l.__sourceName[p]){s='class="dynamsoft-dialog-selectsource-sourcelist-li-selected"';m=p}t.push("<li "+s+' onclick="window.dialog_selectsource_li_click(this);" sourceindex='+p+">"+l.__sourceName[p]+"</li>")}t.push("</ul>");t=t.join("");var q=["<p>",g.CustomizableDisplayInfo.dialogText.selectSource[0],"</p>",'<div id="dynamsoft-dialog-selectsource-sourcelist">',t,"</div>",'<div id="dynamsoft-dialog-selectsource-buttons"><input type="button" value="',g.CustomizableDisplayInfo.dialogText.selectSource[1],'" onclick="window.dialog_selectsource_select()">','<input type="button" value="',g.CustomizableDisplayInfo.dialogText.selectSource[2],'" onclick="window.dialog_selectsource_cancel()"></div>'].join("");o.innerHTML=q;a.dialog.selectsourcedlg=o;document.body.appendChild(a.dialog.selectsourcedlg);a.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",m.toString());a.dialog.setup(a.dialog.selectsourcedlg)}a.dialog.selectsourcedlg.showModal();window.dialog_selectsource_li_click=function(x){var v=x.attributes.sourceindex.value,u=x.parentElement.children;for(var w=0;w<u.length;w++){u[w].className=""}x.className="dynamsoft-dialog-selectsource-sourcelist-li-selected";a.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",v)};return new a.Promise(function(v,u){window.dialog_selectsource_select=function(){var w=parseInt(Dynamsoft.Lib.get("dynamsoft-dialog-selectsource-sourcelist-ul").attributes.selectedSourceIndex.value);l.SelectSourceByIndexAsync(w).then(function(){a.dialog.selectsourcedlg.close();document.body.removeChild(a.dialog.selectsourcedlg);a.dialog.selectsourcedlg=false;v(w)})};window.dialog_selectsource_cancel=function(){a.dialog.selectsourcedlg.close();document.body.removeChild(a.dialog.selectsourcedlg);a.dialog.selectsourcedlg=false;u({code:-1032,message:"User cancelled the operation."})}})})};c.SelectSourceByIndex=function(l){var n=this,m=l*1,k=0;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("SelectSourceByIndex")}if(e.bMac&&n._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA){if(n.__icaSourceCount==-1){k=n.SourceCount;if(k<=0){k=0}}if(m>=n.__icaSourceCount){m-=n.__icaSourceCount;n.CloseSourceManager();n._innerFun("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN));n.OpenSourceManager()}else{n.CloseSourceManager();n._innerFun("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.ICA));n.OpenSourceManager()}}else{if(e.bWin&&Dynamsoft.dcp.b64bit&&n._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(n.__icaSourceCount==-1){k=n.SourceCount;if(k<=0){k=0}}if(m>=n.__icaSourceCount){m-=n.__icaSourceCount;n.CloseSourceManager();n._innerFun("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN64));n.OpenSourceManager()}else{n.CloseSourceManager();n._innerFun("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN));n.OpenSourceManager()}}}return n._innerFun("SelectSourceByIndex",h.makeParams(m))};c._resetImageCaptureDriverType=function(l){var n=this,m,k=l;if(e.bMac&&n._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA){if(n.__icaSourceCount==-1){m=n.getSourceCount()}else{m=a.Promise.resolve(n.__sourceCount)}m=m.then(function(){return n.CloseSourceManagerAsync()});if(l>=n.__icaSourceCount){k-=n.__icaSourceCount;m=m.then(function(){return n._innerFunV2("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN))})}else{m=m.then(function(){return n._innerFunV2("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.ICA))})}m=m.then(function(){return n.OpenSourceManagerAsync()})}else{if(e.bWin&&Dynamsoft.dcp.b64bit&&n._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(n.__icaSourceCount==-1){m=n.getSourceCount()}else{m=a.Promise.resolve(n.__sourceCount)}m=m.then(function(){return n.CloseSourceManagerAsync()});if(l>=n.__icaSourceCount){k-=n.__icaSourceCount;m=m.then(function(){return n._innerFunV2("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN64))})}else{m=m.then(function(){return n._innerFunV2("ImageCaptureDriverType",h.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN))})}m=m.then(function(){return n.OpenSourceManagerAsync()})}else{m=a.Promise.resolve(0)}}return m.then(function(){return k})};c.GetSourceTypeAsync=function(k){var m=this,l=k*1;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupportAsync("GetSourceType")}return m._resetImageCaptureDriverType(l).then(function(n){return m._innerFunV2("GetSourceType",h.makeParams(n))})};c.SelectSourceByIndexAsync=function(k){var m=this,l=k*1;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupportAsync("SelectSourceByIndex")}return m._resetImageCaptureDriverType(l).then(function(n){return m._innerFunV2("SelectSourceByIndex",h.makeParams(n))})};c.SetFileXferInfo=function(l,n){var o=this;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("SetFileXferInfo")}var k,m;if(Dynamsoft.navInfoSync.bFileSystem){k=l.replace(/<%/g,"<%25")}else{k=l}m=h.replaceLocalFilename(k);return o._innerFun("SetFileXferInfo",h.makeParams(m,n))};c.SetImageLayout=function(n,m,l,k){var o=this;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("SetImageLayout")}return o._innerFun("SetImageLayout",h.makeParams(n,m,l,k))};c.CapGet=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("CapGet")}return this._innerFun("CapGet")};c.CapGetCurrent=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("CapGetCurrent")}return this._innerFun("CapGetCurrent")};c.CapGetDefault=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("CapGetDefault")}return this._innerFun("CapGetDefault")};c.CapGetFrameBottom=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("CapGetFrameBottom")}return this._innerFun("CapGetFrameBottom",h.makeParams(k))};c.CapGetFrameLeft=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("CapGetFrameLeft")}return this._innerFun("CapGetFrameLeft",h.makeParams(k))};c.CapGetFrameRight=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("CapGetFrameRight")}return this._innerFun("CapGetFrameRight",h.makeParams(k))};c.CapGetFrameTop=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("CapGetFrameTop")}return this._innerFun("CapGetFrameTop",h.makeParams(k))};c.CapGetHelp=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("CapGetHelp")}return this._innerFun("CapGetHelp")};c.CapGetLabel=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("CapGetLabel")}return this._innerFun("CapGetLabel")};c.CapGetLabels=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("CapGetLabels")}return this._innerFun("CapGetLabels")};c.CapIfSupported=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("CapIfSupported")}return this._innerFun("CapIfSupported",h.makeParams(k))};c.CapReset=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("CapReset")}return this._innerFun("CapReset")};c.CapSet=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("CapSet")}return this._innerFun("CapSet")};c.CapSetFrame=function(m,o,n,l,k){var p=this;p._resetErr();if(p._isMobileMode()){return p._mobileNotSupport("CapSetFrame")}return this._innerFun("CapSetFrame",h.makeParams(m,o,n,l,k))};c.GetCapItems=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("GetCapItems")}return this._innerFun("GetCapItems",h.makeParams(k))};c.GetCapItemsString=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("GetCapItemsString")}return this._innerFun("GetCapItemsString",h.makeParams(k))};c.SetCapItems=function(l,k){var m=this;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("SetCapItems")}return this._innerFun("SetCapItems",h.makeParams(l,k))};c.SetCapItemsString=function(l,k){var m=this;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("SetCapItemsString")}return this._innerFun("SetCapItemsString",h.makeParams(l,k))};c.GenerateURLForUploadData=function(v,s,u,t,o){var q=this,k=[];if(s==EnumDWT_ImageType.IT_BMP||s==EnumDWT_ImageType.IT_JPG||s==EnumDWT_ImageType.IT_PNG){if(!a.isArray(v)){a.Errors.IndicesNotArray(q);if(a.isFunction(t)){t(q.ErrorCode,q.ErrorString,"",v,s)}return""}if(v.length>1){a.Errors.UploadIndexMoreThanOne(q);if(a.isFunction(t)){t(q.ErrorCode,q.ErrorString,"",v,s)}return""}if(!q._checkIndices(v)){t(q.ErrorCode,q.ErrorString,"",v,s);return false}var p=q._ImgManager.convertClientIndexToServerId(v[0]);if(p!=-1){k.push(p)}}else{if(s==EnumDWT_ImageType.IT_TIF||s==EnumDWT_ImageType.IT_PDF){var m,n;if(a.isArray(v)){if(!q._checkIndices(v)){t(q.ErrorCode,q.ErrorString,"",v,s);return false}m=v}else{if(v==-1){m=[];for(n=0;n<q._ImgManager.count();n++){m.push(n)}}else{a.Errors.IndicesNotArray(q);if(a.isFunction(t)){t(q.ErrorCode,q.ErrorString,q.__HTTPPostResponseString,v,s)}return""}}a.each(m,function(x){var w=q._ImgManager.convertClientIndexToServerId(x);if(w!=-1){k.push(w)}})}else{if(!a.isArray(v)){a.Errors.IndicesNotArray(q)}else{a.Errors.InvalidImageType(q)}if(a.isFunction(t)){t(q.ErrorCode,q.ErrorString,q.__HTTPPostResponseString,v,s)}return""}}if(a.isFunction(u)&&a.isFunction(t)){var r=function(x,w){u(x,w,s)},l=function(w){t(q.ErrorCode,q.ErrorString,q.__HTTPPostResponseString,w,s)};q._asyncGenerateURLForUploadData(k,s,o,u,l);return true}else{return this._syncGenerateURLForUploadData(k,s,o)}};c._syncGenerateURLForUploadData=function(m,w,r){var u=this,v,q=false,t=Dynamsoft.dcp.managerVersion.join(""),s=r,n=",";if(!a.isString(s)||s==""){s="";n=""}var l=["[",'"dcp","dwasm_'+t,'",',w,',"',m.join(","),'"',n,s,"]"].join("");v=this._innerFunRaw("GenerateURLForUploadData",l,false,false,true);if(v&&a.isArray(v.result)&&v.result.length>1){var x=v.result[0],k=v.result[1];if(x==true){q=["dcp://dwasm_",t,"/file/",k].join("")}}var o=[];if(a.isArray(m)){a.each(m,function(p){var y=u._ImgManager.convertServerIdToClientIndex(p);if(y>-1){o.push(y)}})}if(q==false){a.Errors.GenerateURL_InvalidRetFromServer(u);return""}return q};c._asyncGenerateURLForUploadData=function(l,t,s,y,x){var u=this,w=t,n=function(){if(a.isFunction(x)){var p=[];if(a.isArray(l)){a.each(l,function(z){var A=u._ImgManager.convertServerIdToClientIndex(z);if(A>-1){p.push(A)}})}x(p)}return""},v,m=",";if(w==EnumDWT_ImageType.IT_BMP||w==EnumDWT_ImageType.IT_JPG||w==EnumDWT_ImageType.IT_PNG){if(l.length>1){a.Errors.UploadIndexMoreThanOne(u);n();return""}}else{if(w==EnumDWT_ImageType.IT_TIF||w==EnumDWT_ImageType.IT_PDF){}else{a.Errors.InvalidImageType(u);n();return""}}var o=false,r=Dynamsoft.dcp.managerVersion.join(""),q=s;if(!a.isString(q)||q==""){q="";m=""}var k=["[",'"dcp","dwasm_'+r,'",',w,',"',l.join(","),'"',m,q,"]"].join("");return this._innerFunRaw("GenerateURLForUploadData",k,true,false,true,function(z){if(z&&a.isArray(z.result)&&z.result.length>0){var p=z.result[0];if(p==true&&z.result.length>1){var A=z.result[1];o=["dcp://dwasm_",r,"/file/",A].join("")}else{if(z.exception!==undefined&&z.description!==undefined){u._errorCode=z.exception;u._errorString=z.description}else{a.Errors.GenerateURL_InvalidRetFromServer(u)}}}else{a.Errors.GenerateURL_InvalidRetFromServer(u)}if(o==false){n();return""}if(a.isFunction(y)){var B=[];if(a.isArray(l)){a.each(l,function(C){var D=u._ImgManager.convertServerIdToClientIndex(C);if(D>-1){B.push(D)}})}y(o,B,t)}return o},n)}});Dynamsoft.Ready(function(c,b){var a=Dynamsoft;if(!c.product.bHTML5Edition){return}var e=c.html5.STwain,d=e.prototype,f=c.html5.Funs;d.AddText=function(r,p,o,q,k,s,g,h){var n=this;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("AddText")}var m=parseInt(r);if(isNaN(m)||m<0||m>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return false}var j=c.RGB2BGR(k),i=c.RGB2BGR(s),l=n._ImgManager.convertClientIndexToServerId(m);if(l==-1){c.Errors.IndexOutOfRange(n);return false}return n._innerFun("AddText",f.makeParams(l,p,o,q,j,i,g,h))};d.CreateTextFont=function(i,u,o,n,q,r,j,s,g,p,k,m,t,h){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("CreateTextFont")}return this._innerFun("CreateTextFont",f.makeParams(i,u,o,n,q,r,j,s,g,p,k,m,t,h))};d.CopyToClipboard=function(i){var j=this;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("CopyToClipboard")}var h=parseInt(i);if(isNaN(h)||h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return false}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return false}return j._innerFun("CopyToClipboard",f.makeParams(g))};d.CopyToClipboardAsync=function(i){var j=this;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupportAsync("CopyToClipboard")}var h=parseInt(i);if(isNaN(h)||h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("CopyToClipboard",f.makeParams(g))};d._asyncErase=function(u,k,q,t,h,s,l){var o=this,p=function(){f.refreshImageAfterInvokeFun(o,u);if(c.isFunction(s)){setTimeout(s,30)}},j=function(){if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}};var n=parseInt(u),g,m;var i=o.__BackgroundFillColor;if(c.isUndef(i)){i="FFFFFF"}else{if(c.isNumber(i)){i=i.toString(16)}else{if(c.isString(i)){i=i.replace("#","")}}}return o._innerSendToMobile("Erase",Dynamsoft.Lib.MobileFuns.makeParams(n,k,q,t,h,i),0,p,j)};d.Erase=function(s,i,n,q,h,p,o){var m=this;m._resetErr();var l=parseInt(s),g,k;if(isNaN(l)||l<0||l>=m._ImgManager.count()){c.Errors.IndexOutOfRange(m);if(c.isFunction(o)){o(m.ErrorCode,m.ErrorString)}return false}if(m._isMobileMode()){return m._asyncErase(l,i,n,q,h,p,o)}var j=m._ImgManager.convertClientIndexToServerId(l);if(j==-1){c.Errors.IndexOutOfRange(m);if(c.isFunction(o)){o(m.ErrorCode,m.ErrorString)}return false}m.SetSelectedImageArea(s,0,0,0,0);g=m._innerFun("Erase",f.makeParams(j,i,n,q,h));k=(g==1);if(k){if(c.isFunction(p)){p()}}else{if(c.isFunction(o)){o(m.ErrorCode,m.ErrorString)}}return k};d.GetImageBitDepth=function(j){var k=this;k._resetErr();var i=parseInt(j);if(isNaN(i)||i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.imageBitDepth}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageBitDepth",f.makeParams(h))};d.GetImageWidth=function(j){var k=this;k._resetErr();var i=parseInt(j);if(isNaN(i)||i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.imageWidth}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageWidth",f.makeParams(h))};d.GetImageHeight=function(j){var k=this;k._resetErr();var i=parseInt(j);if(isNaN(i)||i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.imageHeight}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageHeight",f.makeParams(h))};d.GetImageSize=function(j,i,k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("GetImageSize")}var h=parseInt(j);if(isNaN(h)||h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return false}return l._innerFun("GetImageSize",f.makeParams(g,i,k))};d.GetImageSizeWithSpecifiedType=function(i,j){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("GetImageSizeWithSpecifiedType")}var h=parseInt(i);if(isNaN(h)||h<0||h>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}var g=k._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageSizeWithSpecifiedType",f.makeParams(g,j))};d.GetImageXResolution=function(j){var k=this;k._resetErr();var i=parseInt(j);if(isNaN(i)||i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.imageXResolution}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageXResolution",f.makeParams(h))};d.GetImageYResolution=function(j){var k=this;k._resetErr();var i=parseInt(j);if(isNaN(i)||i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.imageYResolution}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageYResolution",f.makeParams(h))};d.GetSelectedImageIndex=function(h){var i=this;i._resetErr();if(h>=0){var g=i._ImgManager.getSelectedClientIndexArray();return g[h]}return -1};d.SelectAllImages=function(){var k=this,g=k.HowManyImagesInBuffer,j,h=[];k._resetErr();for(j=0;j<g;j++){h.push(j)}k._ImgManager.SetSelectedClientIndexArray(h);return h};d.SelectImages=function(g){var h=this;h._resetErr();return h._ImgManager.SetSelectedClientIndexArray(g)};d.SetSelectedImageIndex=function(i,g){var j=this;j._resetErr();var h=j._ImgManager.GetSelectedImageCount();if(i<h&&i>=0){return j._ImgManager.SetSelectedImageIndex(i,g)}else{c.Errors.InvalidIndex(j);return false}};d._asyncGetSkewAngle=function(o,n,i){var k=this,m=function(p){f.refreshImageAfterInvokeFun(k,o);if(c.isFunction(n)){setTimeout(function(){n(p)},30)}},h=function(){if(c.isFunction(i)){i(k.ErrorCode,k.ErrorString)}};var l=parseInt(o),g,j;return k._innerSendToMobile("GetSkewAngle",Dynamsoft.Lib.MobileFuns.makeParams(l),0,m,h)};d.GetSkewAngle=function(k,j,i){var n=this,l,m;n._resetErr();var h=parseInt(k);if(isNaN(h)||h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){return n._asyncGetSkewAngle(h,j,i)}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("GetSkewAngle",f.makeParams(g));if(n.ErrorCode==0){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j(l)}else{return l}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return true};d.GetSkewAngleEx=function(k,m,l,j,g){var n=this;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("GetSkewAngleEx")}var i=parseInt(k);if(isNaN(i)||i<0||i>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return false}var h=n._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(n);return false}return n._innerFun("GetSkewAngleEx",f.makeParams(h,m,l,j,g))};d.IsBlankImageEx=function(o,h,m,n,g,i){var k=this,l=parseInt(o);if(isNaN(l)||l<0||l>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}var j=k._ImgManager.convertClientIndexToServerId(l);if(j==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("IsBlankImageEx",f.makeParams(j,h,m,n,g,i))};d.MirrorAsync=function(i){var j=this;j._resetErr();var h=parseInt(i);if(isNaN(h)||h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._innerSendToMobileV2("Mirror",Dynamsoft.Lib.MobileFuns.makeParams(h)).then(function(){f.refreshImageAfterInvokeFun(j,h)})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("Mirror",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h)}else{throw {code:j._errorCode,message:j._errorString}}})};d.Mirror=function(k,j,i){var n=this;n._resetErr();var h=parseInt(k);if(isNaN(h)||h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._innerSendToMobileV2("Mirror",Dynamsoft.Lib.MobileFuns.makeParams(h)).then(function(){f.refreshImageAfterInvokeFun(n,h);if(j){j()}},function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}var l=n._innerFun("Mirror",f.makeParams(g)),m;m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.RemoveAllImages=function(){var n=this,o=!0,k=n._isMobileMode();n._resetErr();var q=n._ImgManager.GetCurrentTag();if(q==""||q=="All"){if(k){n._OnBitmapChanged(["10","-1",3,-1,0])}else{o=n._innerFun("RemoveAllImages");if(o||n._errorCode==-1033){n._OnBitmapChanged(["0","-1",3,-1,0])}}}else{var j,p=function(){},g=function(){},h=[],r="0";if(k){r="10"}var m=n.HowManyImagesInBuffer;for(j=m-1;j>=0;j--){var l=n._ImgManager.convertClientIndexToServerId(j);if(l>-1){if(k){h.push(l)}else{var o=n._innerFunRaw("RemoveImage",f.makeParams(l),true,false,true,p,g);if(o||n._errorCode==-1033){h.push(l)}}}}n._OnBitmapChanged([r,h.join(","),3,n._ImgManager.getCurrentImageIndex(),n._ImgManager.count()])}return o};d.RemoveImage=function(j){var k=this;k._resetErr();var i=parseInt(j),h=true;if(isNaN(i)||i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}var g=k._ImgManager.convertClientIndexToServerId(i);if(g==-1){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){k._OnBitmapChanged(["10",""+g,3,k._ImgManager.getCurrentImageIndex(),k._ImgManager.count()])}else{h=k._innerFun("RemoveImage",f.makeParams(g));if(h||k._errorCode==-1033){k._OnBitmapChanged(["0",""+g,3,k._ImgManager.getCurrentImageIndex(),k._ImgManager.count()])}}return h};d.RemoveAllImagesAsync=function(){var l=this,n=!0;l._resetErr();var o=l._ImgManager.GetCurrentTag();if(o==""||o=="All"){if(l._isMobileMode()){l._OnBitmapChanged(["10","-1",3,-1,0]);return c.Promise.resolve(true)}else{return l._innerFunV2("RemoveAllImages").then(function(i){if(i||l._errorCode==-1033){l._OnBitmapChanged(["0","-1",3,-1,0]);return true}return false})}}else{var h,g=[],p,m=l.HowManyImagesInBuffer;for(h=0;h<m;h++){var j=l._ImgManager.convertClientIndexToServerId(h);if(j>-1){g.push(j)}}if(l._isMobileMode()){p=c.Promise.resolve(g.join(","))}else{var k=[];p=c.Promise.resolve(0);for(h=0;h<g.length;h++){p=p.then(function(i){return l._innerFunRawV2("RemoveImage",f.makeParams(g[i])).then(function(q){if(q||l._errorCode==-1033){k.push(g[i])}return i++})})}p=p.then(function(){return k.join(",")})}return p.then(function(i){var q="0";if(l._isMobileMode()){q="10"}if(i!=""){l._OnBitmapChanged([q,i,3,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()])}})}};d.RemoveImageAsync=function(i){var j=this;j._resetErr();var h=parseInt(i);if(isNaN(h)||h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){j._OnBitmapChanged(["10",""+g,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()]);return c.Promise.resolve(true)}else{return j._innerFunV2("RemoveImage",f.makeParams(g)).then(function(k){if(k||j._errorCode==-1033){j._OnBitmapChanged(["0",""+g,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()]);return true}return false})}};d._removeImageById=function(h,i,k){var j=this,g=function(){j._OnBitmapChanged(["0",""+h,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()]);if(c.isFunction(i)){i()}};return j._innerFunRaw("RemoveImage",f.makeParams(h),true,false,true,g,k)};d._asyncRotateEx=function(k,i,j,g){var m=this,h=parseInt(k),l=m.__BackgroundFillColor;if(c.isUndef(l)){l="FFFFFF"}else{if(c.isNumber(l)){l="0x"+l.toString(16)}else{if(c.isString(l)){l=l.replace("#","")}}}return m._innerSendToMobileV2("RotateEx",Dynamsoft.Lib.MobileFuns.makeParams(h,i,j,g,l)).then(function(){f.refreshImageAfterInvokeFun(m,k)})};d.Rotate=function(p,i,h,o,n){var l=this;l._resetErr();var m=parseInt(p),g,k;if(isNaN(m)||m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){l._asyncRotateEx(m,i,h,-1).then(o,function(){if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}});return true}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}g=l._innerFun("Rotate",f.makeParams(j,i,h));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m);if(c.isFunction(o)){o()}}else{if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}}return k};d.RotateEx=function(q,i,h,p,o,n){var l=this;l._resetErr();var m=parseInt(q),g,k;if(isNaN(m)||m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){l._asyncRotateEx(m,i,h,p).then(o,function(){if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}});return true}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}g=l._innerFun("RotateEx",f.makeParams(j,i,h,p));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m);if(c.isFunction(o)){o()}}else{if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}}return k};d.RotateLeft=function(k,j,i){var n=this;n._resetErr();var h=parseInt(k),l,m;if(isNaN(h)||h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncRotateEx(h,-90,true,-1).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("RotateLeft",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.RotateRight=function(k,j,i){var n=this;n._resetErr();var h=parseInt(k),l,m;if(isNaN(h)||h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncRotateEx(h,90,true,-1).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("RotateRight",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.RotateAsync=function(k,i,j){var l=this;l._resetErr();var h=parseInt(k);if(isNaN(h)||h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(l._isMobileMode()){return l._asyncRotateEx(h,i,j,-1)}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("Rotate",f.makeParams(g,i,j)).then(function(m){if(m==1){f.refreshImageAfterInvokeFun(l,h)}else{throw {code:l._errorCode,message:l._errorString}}})};d.RotateExAsync=function(l,j,k,g){var m=this;m._resetErr();var i=parseInt(l);if(isNaN(i)||i<0||i>=m._ImgManager.count()){c.Errors.IndexOutOfRange(m);return c.Promise.reject({code:m._errorCode,message:m._errorString})}if(m._isMobileMode()){return m._asyncRotateEx(i,j,k,g)}var h=m._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(m);return c.Promise.reject({code:m._errorCode,message:m._errorString})}return m._innerFunV2("RotateEx",f.makeParams(h,j,k,g)).then(function(n){if(n==1){f.refreshImageAfterInvokeFun(m,i)}else{throw {code:m._errorCode,message:m._errorString}}})};d.RotateLeftAsync=function(i){var j=this;j._resetErr();var h=parseInt(i);if(isNaN(h)||h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._asyncRotateEx(h,-90,true,-1)}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("RotateLeft",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h)}else{throw {code:j._errorCode,message:j._errorString}}})};d.RotateRightAsync=function(i){var j=this;j._resetErr();var h=parseInt(i);if(isNaN(h)||h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._asyncRotateEx(h,90,true,-1)}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("RotateRight",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h)}else{throw {code:j._errorCode,message:j._errorString}}})};d._asyncChangeImageSize=function(p,i,n,o){var k=this;var l=parseInt(p),h=parseInt(i),m=parseInt(n),g,j;return k._innerSendToMobileV2("ChangeImageSize",Dynamsoft.Lib.MobileFuns.makeParams(l,h,m,o)).then(function(){f.refreshImageAfterInvokeFun(k,p)})};d.ChangeImageSize=function(t,h,o,s,q,n){var l=this,m=parseInt(t),p=1*h,k=1*o,g,j;l._resetErr();if(isNaN(m)||m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(p<=0||k<=0){c.Errors.InvalidWidthOrHeight(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){l._asyncChangeImageSize(m,h,o,s).then(q,function(){if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}});return true}var i=l._ImgManager.convertClientIndexToServerId(m);if(i==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}g=l._innerFun("ChangeImageSize",f.makeParams(i,p,k,s));j=(g==1);if(j){f.refreshImageAfterInvokeFun(l,m);if(c.isFunction(q)){q()}}else{if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}}return j};d.ChangeImageSizeAsync=function(o,g,l,n){var i=this,j=parseInt(o),m=1*g,k=1*l;i._resetErr();if(isNaN(j)||j<0||j>=i._ImgManager.count()){c.Errors.IndexOutOfRange(i);return c.Promise.reject({code:i._errorCode,message:i._errorString})}if(m<=0||k<=0){c.Errors.InvalidWidthOrHeight(i);return c.Promise.reject({code:i._errorCode,message:i._errorString})}if(i._isMobileMode()){return i._asyncChangeImageSize(j,g,l,n)}var h=i._ImgManager.convertClientIndexToServerId(j);if(h==-1){c.Errors.IndexOutOfRange(i);return c.Promise.reject({code:i._errorCode,message:i._errorString})}return i._innerFunV2("ChangeImageSize",f.makeParams(h,m,k,n)).then(function(p){if(p==1){f.refreshImageAfterInvokeFun(i,j)}else{throw {code:i._errorCode,message:i._errorString}}})};d._asyncFlip=function(h){var i=this;var g=parseInt(h);return i._innerSendToMobileV2("Flip",Dynamsoft.Lib.MobileFuns.makeParams(g)).then(function(){f.refreshImageAfterInvokeFun(i,h)})};d.Flip=function(k,j,i){var n=this;n._resetErr();var h=parseInt(k),l,m;if(isNaN(h)||h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncFlip(h).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("Flip",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.FlipAsync=function(i){var j=this;j._resetErr();var h=parseInt(i);if(isNaN(h)||h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._asyncFlip(h)}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("Flip",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h)}else{throw {code:j._errorCode,message:j._errorString}}})};d._asyncCrop=function(j,l,k,i,g){var m=this;var h=parseInt(j);return m._innerSendToMobileV2("Crop",Dynamsoft.Lib.MobileFuns.makeParams(h,l,k,i,g)).then(function(){f.refreshImageAfterInvokeFun(m,j);var o,n;o=m.ErrorCode;n=m.ErrorString;m.SetSelectedImageArea(j,0,0,0,0);m._errorCode=o;m._errorString=n})};d.Crop=function(u,j,p,t,h,s,q){var o=this;o._resetErr();var n=parseInt(u),g,m;if(isNaN(n)||n<0||n>=o._ImgManager.count()){c.Errors.IndexOutOfRange(o);if(c.isFunction(q)){q(o.ErrorCode,o.ErrorString)}return false}if(o._isMobileMode()){o._asyncCrop(n,j,p,t,h).then(s,function(){if(c.isFunction(q)){q(o.ErrorCode,o.ErrorString)}});return true}var l=o._ImgManager.convertClientIndexToServerId(n);if(l==-1){c.Errors.IndexOutOfRange(o);if(c.isFunction(q)){q(o.ErrorCode,o.ErrorString)}return false}g=o._innerFun("Crop",f.makeParams(l,j,p,t,h));m=(g==1);var k,i;k=o.ErrorCode;i=o.ErrorString;o.SetSelectedImageArea(u,0,0,0,0);o._errorCode=k;o._errorString=i;if(m){f.refreshImageAfterInvokeFun(o,n);if(c.isFunction(s)){s()}}else{if(c.isFunction(q)){q(k,i)}}return m};d.CropAsync=function(k,m,l,j,g){var n=this;n._resetErr();var i=parseInt(k);if(isNaN(i)||i<0||i>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}if(n._isMobileMode()){return n._asyncCrop(i,m,l,j,g)}var h=n._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}return n._innerFunV2("Crop",f.makeParams(h,m,l,j,g)).then(function(q){var p,o;p=n.ErrorCode;o=n.ErrorString;n.SetSelectedImageArea(k,0,0,0,0);n._errorCode=p;n._errorString=o;if(q==1){f.refreshImageAfterInvokeFun(n,i)}else{throw {code:n._errorCode,message:n._errorString}}return true})};d.CropToClipboard=function(p,i,n,o,h){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("CropToClipboard")}var m=parseInt(p),g,k;if(isNaN(m)||m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);return false}g=l._innerFun("CropToClipboard",f.makeParams(j,i,n,o,h));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m)}return k};d.CutFrameToClipboard=function(p,i,n,o,h){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("CutFrameToClipboard")}var m=parseInt(p),g,k;if(isNaN(m)||m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);return false}g=l._innerFun("CutFrameToClipboard",f.makeParams(j,i,n,o,h));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m)}return k};d.CutToClipboard=function(i){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("CutToClipboard")}var h=parseInt(i),j,k;if(isNaN(h)||h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return false}j=l._innerFun("CutToClipboard",f.makeParams(g));k=(j==1);if(k){l._OnBitmapChanged(["0",""+g,3,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()])}return k};d.CutFrameToClipboardAsync=function(p,i,n,o,h){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupportAsync("CutFrameToClipboard")}var m=parseInt(p),g,k;if(isNaN(m)||m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("CutFrameToClipboard",f.makeParams(j,i,n,o,h)).then(function(q){var s=(q==1);if(s){f.refreshImageAfterInvokeFun(l,m)}else{throw {code:l._errorCode,message:l._errorString}}return s})};d.CropToClipboardAsync=function(k,m,l,j,g){var n=this;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupportAsync("CropToClipboard")}var i=parseInt(k);if(isNaN(i)||i<0||i>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}var h=n._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}return n._innerFunV2("CropToClipboard",f.makeParams(h,m,l,j,g)).then(function(o){var p=(o==1);if(p){f.refreshImageAfterInvokeFun(n,i)}else{throw {code:n._errorCode,message:n._errorString}}return p})};d.CutToClipboardAsync=function(i){var j=this;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupportAsync("CutToClipboard")}var h=parseInt(i);if(isNaN(h)||h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("CutToClipboard",f.makeParams(g)).then(function(k){var l=(k==1);if(l){j._OnBitmapChanged(["0",""+g,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()])}else{throw {code:j._errorCode,message:j._errorString}}return l})};d._asyncSetDPI=function(u,m,p,j,r,t,s,l){var o=this,q=function(){f.refreshImageAfterInvokeFun(o,u);if(c.isFunction(s)){setTimeout(s,30)}},i=function(){if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}};var n=parseInt(u),k=parseInt(p),h=parseInt(j),g=parseInt(t);if(isNaN(k)||k<=0||isNaN(h)||h<=0||isNaN(g)||g<0){c.Errors.InvalidParameter(o);if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}return false}return o._innerSendToMobile("SetDPI",Dynamsoft.Lib.MobileFuns.makeParams(n,k,h,r,g),0,q,i)};d.SetDPI=function(s,m,h,n,q,p,o){var l=this,g,k;l._resetErr();var j=parseInt(s);if(isNaN(j)||j<0||j>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(o)){o(l.ErrorCode,l.ErrorString)}return false}var i=l._ImgManager.convertClientIndexToServerId(j);if(i==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(o)){o(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){return l._asyncSetDPI(j,i,m,h,n,q,p,o)}g=l._innerFun("SetDPI",f.makeParams(i,m,h,n,q));k=(g==1);if(k){if(c.isFunction(p)){p()}}else{if(c.isFunction(o)){o(l.ErrorCode,l.ErrorString)}}return k};d.MoveImage=function(k,j){var l=this;l._resetErr();var i=parseInt(k),g=parseInt(j),h;if(isNaN(i)||i<0||i>=l._ImgManager.count()||isNaN(g)||g<0||g>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}return l._ImgManager.MoveImage(i,g)};d.SwitchImage=function(k,j){var l=this;l._resetErr();var i=parseInt(k),g=parseInt(j),h;if(isNaN(i)||i<0||i>=l._ImgManager.count()||isNaN(g)||g<0||g>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}return l._ImgManager.SwitchImage(i,g)};d.CloseWorkingProcess=function(){var g=this;g._resetErr();if(g._isMobileMode()){return g._mobileNotSupport("CloseWorkingProcess")}return g._innerFun("CloseWorkerProcess")};d.RemoveAllSelectedImages=function(){var m=this,g=m._isMobileMode();m._resetErr();var h=true,j=m._ImgManager.getCurrentImageIndex(),k=m._ImgManager.getSelectedClientIndexArray(),l=[];if(c.isArray(k)){c.each(k,function(n){var o=m._ImgManager.convertClientIndexToServerId(n);if(o!=-1){l.push(o)}})}if(l.length==0&&j>=0){var i=m._ImgManager.convertClientIndexToServerId(j);l.push(i)}if(!g){h=m._innerFun("RemoveAllSelectedImages",f.makeParams(l.join(",")))}if(h){if(!g){m._HowManyImagesInBuffer=m._innerFun("HowManyImagesInBuffer")}c.each(l,function(n){var o="0";if(m._isMobileMode()){o="10"}m._OnBitmapChanged([o,""+n,3,m._ImgManager.getCurrentImageIndex(),m._ImgManager.count()])})}return h};d.RemoveAllSelectedImagesAsync=function(){var n=this,g=n._isMobileMode();n._resetErr();var h=true,j=n._ImgManager.getCurrentImageIndex(),l=n._ImgManager.getSelectedClientIndexArray(),m=[],k;if(c.isArray(l)){c.each(l,function(o){var p=n._ImgManager.convertClientIndexToServerId(o);if(p!=-1){m.push(p)}})}if(m.length==0&&j>=0){var i=n._ImgManager.convertClientIndexToServerId(j);m.push(i)}if(g){k=c.Promise.resolve(true)}else{k=n._innerFunV2("RemoveAllSelectedImages",f.makeParams(m.join(","))).then(function(o){return o&&n._innerFunV2("HowManyImagesInBuffer").then(function(p){n._HowManyImagesInBuffer=p;return true})})}k=k.then(function(o){if(o){c.each(m,function(p){var q="0";if(n._isMobileMode()){q="10"}n._OnBitmapChanged([q,""+p,3,n._ImgManager.getCurrentImageIndex(),n._ImgManager.count()])})}});return k};d.TagImages=function(j,i){var k=this;k._resetErr();var h=!0,g=k._ImgManager.getView().GetWebViewer().mydvs.totalImageCount;k._resetErr();if(!c.isArray(j)){c.Errors.IndicesNotArray(k);return false}if(!c.isString(i)||i==""){c.Errors.InvalidTagName(k);return false}c.each(j,function(l){if(isNaN(l)||l<0||l>=g){c.Errors.IndexOutOfRange(k);h=!1;return h}});if(!h){return h}return k._ImgManager.AddImageTag(j,i)};d.ClearImageTags=function(g){var h=this;h._resetErr();if(g==-1||g>=h.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(h);return false}return h._ImgManager.RemoveImageTag(g)};d.SetDefaultTag=function(g){var h=this;h._resetErr();return h._ImgManager.SetDefaultTag(g)};d.FilterImagesByTag=function(g,i,h){var j=this;j._resetErr();return j._ImgManager.ShowImagesByFilter(g,i,h)};d._asyncInvert=function(h){var i=this;var g=parseInt(h);return i._innerSendToMobileV2("Invert",Dynamsoft.Lib.MobileFuns.makeParams(g)).then(function(){f.refreshImageAfterInvokeFun(i,h)})};d.Invert=function(k,j,i){var n=this,h=parseInt(k),l,m;n._resetErr();if(isNaN(h)||h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncInvert(h).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("Invert",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.InvertAsync=function(i){var l=this,h=parseInt(i),j,k;l._resetErr();if(isNaN(h)||h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(l._isMobileMode()){return l._asyncInvert(h)}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("Invert",f.makeParams(g)).then(function(m){var n=(m==1);if(n){f.refreshImageAfterInvokeFun(l,h)}else{throw {code:l._errorCode,message:l._errorString}}return n})};d._registLoadCallback=function(h){var g=this;g._resetErr();return g._ImgManager.RegistLoadCallback(h)};d.GetImageBitDepthAsync=function(j){var k=this;k._resetErr();var i=parseInt(j);if(isNaN(i)||i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.imageBitDepth)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageBitDepth",f.makeParams(h))};d.GetImageWidthAsync=function(j){var k=this;k._resetErr();var i=parseInt(j);if(isNaN(i)||i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.imageWidth)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageWidth",f.makeParams(h))};d.GetImageHeightAsync=function(j){var k=this;k._resetErr();var i=parseInt(j);if(isNaN(i)||i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.imageHeight)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageHeight",f.makeParams(h))};d.GetImageSizeAsync=function(j,i,k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupportAsync("GetImageSize")}var h=parseInt(j);if(isNaN(h)||h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("GetImageSize",f.makeParams(g,i,k))};d.GetImageSizeWithSpecifiedTypeAsync=function(i,j){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupportAsync("GetImageSizeWithSpecifiedType")}var h=parseInt(i);if(isNaN(h)||h<0||h>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}var g=k._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageSizeWithSpecifiedType",f.makeParams(g,j))};d.GetImageXResolutionAsync=function(j){var k=this;k._resetErr();var i=parseInt(j);if(isNaN(i)||i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.imageXResolution)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageXResolution",f.makeParams(h))};d.GetImageYResolutionAsync=function(j){var k=this;k._resetErr();var i=parseInt(j);if(isNaN(i)||i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.imageYResolution)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageYResolution",f.makeParams(h))}});Dynamsoft.Ready(function(m,h){var g=Dynamsoft,r="";if(!m.product.bHTML5Edition){return}var j=m,o=m.html5.STwain,l=o.prototype,p=!1,i=!0,d=m.html5.Funs,c=function(v,u){if(v._ImgManager.count()==0){m.Errors.NoImage(v);if(m.isFunction(u)){u(v.ErrorCode,v.ErrorString)}return false}return true},a=function(v,w,u){if(!c(v,u)){return false}if(isNaN(w)||!m.isNumber(w)||w<0||w>=v._ImgManager.count()){m.Errors.IndexOutOfRange(v);if(m.isFunction(u)){u(v.ErrorCode,v.ErrorString)}return false}return true},s=function(y,x,u,w){if(y._ImgManager.count()==0){m.Errors.NoImage(y);if(m.isFunction(w)){w(x)}return false}if(m.isNumber(x)){if(isNaN(x)||x<-2||x>=y._ImgManager.count()){m.Errors.IndexOutOfRange(y);if(m.isFunction(w)){w(x)}return false}}else{if(m.isArray(x)){var v;for(v=0;v<x.length;v++){var z=x[v];if(isNaN(z)||!m.isNumber(z)||z<0||z>=y._ImgManager.count()){m.Errors.IndicesOutOfRange(y);if(m.isFunction(w)){w(x)}return false}}}else{m.Errors.IndexOutOfRange(y);if(m.isFunction(w)){w(x)}return false}}if(u==EnumDWT_ImageType.IT_BMP||u==EnumDWT_ImageType.IT_JPG||u==EnumDWT_ImageType.IT_PNG){if(x==-1&&y._ImgManager.count()>1||m.isArray(x)&&x.length>1){m.Errors.UploadIndexMoreThanOne(y);if(m.isFunction(w)){w(x)}}}else{if(u==EnumDWT_ImageType.IT_TIF||u==EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(y);if(m.isFunction(w)){w(x)}return false}}return true},f=function(x){var y=[],v,u,w;if(x._ImgManager.count()<=0){return y}u=x._ImgManager.getCurrentImageIndex();if(u>=0){v=x._ImgManager.convertClientIndexToServerId(u)}w=x._ImgManager.getSelectedClientIndexArray();if(m.isArray(w)){m.each(w,function(z){var A=x._ImgManager.convertClientIndexToServerId(z);if(A!=-1){y.push(A)}})}if(v!=-1&&y.length==0){y.push(v)}return y},k=function(w){if(w._ImgManager.count()<=0){return[]}var v=w._ImgManager.getSelectedClientIndexArray();if(m.isArray(v)){if(v.length==0){var u=w._ImgManager.getCurrentImageIndex();if(u>=0){v.push(u)}}return v}return[]},e=function(x,v){var w=x._ImgManager.GetAllServerIdList();for(var u=0;u<w.length;u++){v.push(w[u])}},q=function(z,v,u,y,x){try{z(v,u,y,x)}catch(w){}},t=function(x,w,u){try{x(w.ErrorCode,w.ErrorString,u)}catch(v){}},b=function(A,x,v,u,z,y){try{A(x.ErrorCode,x.ErrorString,v,u,z,y)}catch(w){}};l._asyncSaveImage=function(x,u,B,F,w){var A=this,C=function(H){var I=x;if(!j.isString(I)||I==""){I="img"+j.getRandom()+"."+B}else{I=j.replaceAll(I,"\\\\","_");I=j.replaceAll(I,":","_")}j.MobileFuns.saveLocal(H,I,B);d.refreshImageAfterInvokeFun(A,u);if(m.isFunction(F)){setTimeout(F,30)}},v=function(){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}};var z=window,y=Dynamsoft.navInfo,D=1,E=true,G=z.requestFileSystem||z.webkitRequestFileSystem||z.mozRequestFileSystem;if((y.biPad||y.biPhone)&&!G){if(y.bSafari&&parseFloat(y.strBrowserVersion)<13||!y.bSafari){E=false}}return A._innerSendToMobile("SaveImage",Dynamsoft.Lib.MobileFuns.makeParams(x,u,B,D,E),0,C,v)};l.SaveAllAsMultiPageTIFF=function(v,A,y){var B=this;B._resetErr();if(!m.License.checkProductKey(B,{Core:true})&&!m.License.checkProductKey(B,{Webcam:true},true)){if(m.isFunction(y)){y(B.ErrorCode,B.ErrorString)}return false}if(!c(B,y)){return false}if(B._isMobileMode()){var u=[],w=0;for(;w<B.HowManyImagesInBuffer;w++){u.push(w)}return B._asyncSaveImage(v,u,"tiff",A,y)}var x=[],z=d.replaceLocalFilename(v);if(!z||z==""){m.Errors.InvalidFile(B);if(m.isFunction(y)){t(y,B)}return false}e(B,x);return B.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",d.makeParams(z,x.join(",")),A,y)};l.SaveAllAsPDF=function(v,A,y){var B=this;B._resetErr();if(!m.License.checkProductKey(B,{Core:true})&&!m.License.checkProductKey(B,{Webcam:true},true)){if(m.isFunction(y)){y(B.ErrorCode,B.ErrorString)}return false}if(!c(B,y)){return false}if(B._isMobileMode()){var u=[],w=0;for(;w<B.HowManyImagesInBuffer;w++){u.push(w)}return B._asyncSaveImage(v,u,"pdf",A,y)}var x=[],z=d.replaceLocalFilename(v);if(!z||z==""){m.Errors.InvalidFile(B);if(m.isFunction(y)){t(y,B)}return false}e(B,x);return B.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",d.makeParams(z,x.join(",")),A,y)};l.SaveAsBMP=function(v,x,z,w){var A=this;A._resetErr();if(A._isMobileMode()){return A._mobileNotSupport("SaveAsBMP",w)}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}var y=d.replaceLocalFilename(v),u;if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}if(!a(A,x,w)){return false}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsBMP",d.makeParams(y,u),z,w)};l.SaveAsJPEG=function(v,x,z,w){var A=this;A._resetErr();if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}if(A._isMobileMode()){return A._asyncSaveImage(v,[x],"jpg",z,w)}var y=d.replaceLocalFilename(v),u;if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsJPEG",d.makeParams(y,u),z,w)};l.SaveAsPDF=function(v,x,z,w){var A=this;A._resetErr();if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}if(A._isMobileMode()){return A._asyncSaveImage(v,[x],"pdf",z,w)}var y=d.replaceLocalFilename(v),u;if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsPDF",d.makeParams(y,u),z,w)};l.SaveAsPNG=function(v,x,z,w){var A=this;A._resetErr();if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}if(A._isMobileMode()){return A._asyncSaveImage(v,[x],"png",z,w)}var y=d.replaceLocalFilename(v),u;if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsPNG",d.makeParams(y,u),z,w)};l.SaveAsTIFF=function(v,x,z,w){var A=this;A._resetErr();if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}if(A._isMobileMode()){return A._asyncSaveImage(v,[x],"tiff",z,w)}var y=d.replaceLocalFilename(v),u;if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsTIFF",d.makeParams(y,u),z,w)};l.SaveAsGIF=function(v,x,z,w){var A=this;A._resetErr();if(A._isMobileMode()){m.Errors.HTML5NotSupport(A);if(m.isFunction(w)){t(w,A)}return p}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}var y=d.replaceLocalFilename(v),u;if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}if(!a(A,x,w)){return false}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsGIF",d.makeParams(y,u),z,w)};l.SaveSelectedImagesAsMultiPagePDF=function(v,z,x){var A=this;A._resetErr();if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(x)){x(A.ErrorCode,A.ErrorString)}return false}if(A._isMobileMode()){var u=k(A);return A._asyncSaveImage(v,u,"pdf",z,x)}var y=d.replaceLocalFilename(v),w=f(A);if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(x)){t(x,A)}return false}return A.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",d.makeParams(y,w.join(",")),z,x)};l.SaveSelectedImagesAsMultiPageTIFF=function(v,z,x){var A=this;A._resetErr();if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(x)){x(A.ErrorCode,A.ErrorString)}return false}if(A._isMobileMode()){var u=k(A);return A._asyncSaveImage(v,u,"tiff",z,x)}var y=d.replaceLocalFilename(v),w=f(A);if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(x)){t(x,A)}return false}return A.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",d.makeParams(y,w.join(",")),z,x)};l.SaveSelectedImagesToBase64Binary=function(w,v){var x=this;x._resetErr();if(!m.License.checkProductKey(x,{Core:true})&&!m.License.checkProductKey(x,{Webcam:true},true)){if(m.isFunction(v)){v(x.ErrorCode,x.ErrorString)}return false}if(x._isMobileMode()){return x._mobileNotSupport("SaveSelectedImagesToBase64Binary",v)}var u=f(x);if(m.isFunction(w)){return x._innerSend("SaveSelectedImagesToBase64Binary",d.makeParams(u.join(",")),true,w,v)}return x._innerFun("SaveSelectedImagesToBase64Binary",d.makeParams(u.join(",")))};l.ShowFileDialog=function(y,v,D,C,B,u,x,E){var A=this;A._resetErr();if(A._isMobileMode()){return A._mobileNotSupport("ShowFileDialog")}var z=d.replaceLocalFilename(B),w=0;w=A.__GetLoadEventsNum();return A._innerSend("ShowFileDialog",d.makeParams(y,v,D,C,z,u,x,E,w),true)};l.FTPDownload=function(z,x,w,u){var y=this;y._resetErr();if(y._isMobileMode()){return y._mobileNotSupport("FTPDownload",u)}var v=m.html5.Funs.getImageType(x);return y.__innerFTPDownload("FTPDownload",d.makeParams(z,x),v,w,u)};l.FTPDownloadEx=function(z,x,v,w,u){var y=this;y._resetErr();if(y._isMobileMode()){return y._mobileNotSupport("FTPDownloadEx",u)}return y.__innerFTPDownload("FTPDownloadEx",d.makeParams(z,x,v),v,w,u)};l.FTPUpload=function(A,w,y,x,v){var z=this;z._resetErr();if(z._isMobileMode()){return z._mobileNotSupport("FTPUpload",v)}var u=z._ImgManager.convertClientIndexToServerId(w);if(!a(z,w,v)){return false}if(u==-1){m.Errors.IndexOutOfRange(z);if(m.isFunction(v)){t(v,z)}return false}return z.__innerFTPUpload("FTPUpload",d.makeParams(A,u,y),x,v)};l.FTPUploadEx=function(B,w,z,x,y,v){var A=this;A._resetErr();if(A._isMobileMode()){return A._mobileNotSupport("FTPUploadEx",v)}var u;if(!a(A,w,v)){return false}u=A._ImgManager.convertClientIndexToServerId(w);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(v)){t(v,A)}return false}return A.__innerFTPUpload("FTPUploadEx",d.makeParams(B,u,z,x),y,v)};l.FTPUploadAllAsMultiPageTIFF=function(z,x,w,v){var y=this;y._resetErr();if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAllAsMultiPageTIFF",v)}var u=[];e(y,u);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",d.makeParams(z,x,u.join(",")),w,v)};l.FTPUploadAllAsPDF=function(z,x,w,v){var y=this;y._resetErr();if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAllAsPDF",v)}var u=[];e(y,u);return y.__innerFTPUpload("FTPUploadAsMultiPagePDF",d.makeParams(z,x,u.join(",")),w,v)};l.FTPUploadAsMultiPagePDF=function(z,x,w,v){var y=this;y._resetErr();if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAsMultiPagePDF",v)}var u=f(y);return y.__innerFTPUpload("FTPUploadAsMultiPagePDF",d.makeParams(z,x,u.join(",")),w,v)};l.FTPUploadAsMultiPageTIFF=function(z,x,w,v){var y=this;y._resetErr();if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAsMultiPageTIFF",v)}var u=f(y);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",d.makeParams(z,x,u.join(",")),w,v)};l.HTTPDownload=function(w,v,y,u){var z=this;z._resetErr();var x=d.getImageType(v);return z.HTTPDownloadThroughGet(w,v,x,y,u)};o.prototype.HTTPDownloadEx=function(w,v,x,y,u){var z=this;z._resetErr();if(z._isMobileMode()){return z._mobileNotSupport("HTTPDownloadEx",u)}return z.HTTPDownloadThroughGet(w,v,x,y,u)};l.HTTPDownloadDirectly=function(H,u,A,G,y){var C=this;C._resetErr();if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(y)){y(C.ErrorCode,C.ErrorString)}return false}if(C._isMobileMode()){return C._mobileNotSupport("HTTPDownloadDirectly",y)}var v=n.GetHttpHeadersAndClear(C),x=d.combineUrl(C,H,u),w,E,B;if(x===false){m.Errors.ParameterCannotEmpty(C);return false}if(!A||A==""){m.Errors.InvalidLocalFilename(C,"HTTPDownloadDirectly");if(m.isFunction(y)){t(y,C)}return false}w=m.html5.Funs.getImageType(A);if(d.isServerInvalid(C)){if(m.isFunction(y)){t(y,C)}return false}if(!m.License.checkPDFProductKeyWhenNeeds(C,w)){if(m.isFunction(y)){y(C._errorCode,C._errorString)}return false}m.cancelFrome=2;B=d.replaceLocalFilename(A);E="get";m.showProgress(C,"HTTPDownloadDirectly",true);var F=function(I){var J=(I.total===0)?100:Math.round(I.loaded*100/I.total),K=[I.loaded," / ",I.total].join("");C._OnPercentDone([0,J,"","http"])},z=true;C._OnPercentDone([0,-1,Dynamsoft.MSG.Downloading,"http"]);if(!m.isFunction(G)){z=false}var D=d.loadHttpBlob(C,E,x,z,function(I){C._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);var J=3;return C.__LoadImageFromBytes(I,J,B,z,G,y)},function(){m.closeProgress("HTTPDownloadDirectly");if(m.isFunction(y)){t(y,C)}return false},F,v);return D};l.HTTPUploadThroughPostDirectly=function(D,A,u,z,C,y){var B=this;B._resetErr();if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostDirectly",y)}var x=d.combineUrl(B,D,u),E=function(){if(m.isFunction(y)){t(y,B,B.__HTTPPostResponseString)}};B.__HTTPPostResponseString="";if(D===""){m.Errors.HttpServerCannotEmpty(B);E();return false}var v=0,w=false;return B._innerUploadDirectly(x,A,z,true,false,v,true,w,C,E)};l._innerUploadDirectly=function(y,E,A,B,D,v,I,x,J,z){var G=this,u=n.GetHttpHeadersAndClear(G),w="HTTPUploadThroughPostDirectly",C=true,F,H;if(y===false||y===""){m.Errors.ParameterCannotEmpty(G);if(m.isFunction(z)){z(G.ErrorCode,G.ErrorString)}return false}if(!m.isFunction(J)){C=false}if(!m.License.checkProductKey(G,{Core:true})){if(m.isFunction(z)){z(G.ErrorCode,G.ErrorString)}return false}m.cancelFrome=1;var K=function(){m.needShowTwiceShowDialog=false;if(B){m.closeProgress(w)}if(m.isFunction(z)){z(G.ErrorCode,G.ErrorString)}return false};m.needShowTwiceShowDialog=true;if(B){m.showProgress(G,w,false)}F=d.replaceLocalFilename(E);if(!F||F==""){m.Errors.InvalidFile(G);K();return false}if(x&&x.bCancel){x.st=2;return K()}H=G.__SaveLocalFileToBytes(F,C,D,function(L){m.needShowTwiceShowDialog=false;if(x&&x.bCancel){x.st=2;return K()}if(L&&(m.dlgRef>0||G.__IfShowCancelDialogWhenImageTransfer==false||C==false||B===false)){if(L instanceof File){L.fileName=A}else{L.name=A}d.setBtnCancelVisibleForProgress(G,true);return d.httpPostUpload(G,y,L,C,0,u,true,v,I,x,function(M){if(B){m.closeProgress(w)}if(m.isFunction(J)){q(J,M)}},K)}else{K();return false}},K);return H};l._innerUploadFilesDirectly=function(B,w,H,G,v,A,K,z,M){var F=this,C=n.GetHttpHeadersAndClear(F),E="HTTPUploadThroughPostDirectly",J=true,x=[],L;if(B===false||B===""){m.Errors.ParameterCannotEmpty(F);if(m.isFunction(M)){M(F.ErrorCode,F.ErrorString,w)}return false}if(!m.isFunction(z)){J=false}if(!m.License.checkProductKey(F,{Core:true})){if(m.isFunction(M)){M(F.ErrorCode,F.ErrorString,w)}return false}m.cancelFrome=1;var u=function(){m.needShowTwiceShowDialog=false;if(G){m.closeProgress(E)}if(m.isFunction(M)){M(w)}return false};m.needShowTwiceShowDialog=true;if(G){m.showProgress(F,E,false)}m.each(w,function(N){var O=d.replaceLocalFilename(N);if(!O||O==""){m.Errors.InvalidFile(F);u();return false}x.push(O)});var y=[],I=x.length,D=0;m.each(x,function(N,O){L=F.__SaveLocalFileToBytes(N,J,v,function(Q){m.needShowTwiceShowDialog=false;if(Q&&(m.dlgRef>0||F.__IfShowCancelDialogWhenImageTransfer==false||J==false||G===false)){var P=d.cformat(H,O+1);if(Q instanceof File){Q.fileName=P}else{Q.name=P}y[O]=Q;D++;if(D==I){d.setBtnCancelVisibleForProgress(F,true);return d.httpPostUploadFiles(F,B,y,J,0,C,G,A,K,function(R){if(G){m.closeProgress(E)}if(m.isFunction(z)){q(z,R)}},function(){if(G){m.closeProgress(E)}if(m.isFunction(u)){u()}})}}else{if(G){m.closeProgress(E)}if(m.isFunction(u)){u()}return false}},function(){if(G){m.closeProgress(E)}if(m.isFunction(u)){u()}})});return L};l.HTTPUploadThroughPost=function(E,F,w,y,z,u,A){var B=this;B._resetErr();if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPost",u)}var D=d.getImageType(y),v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}if(!s(B,F,D,x)){return false}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.HTTPUploadThroughPostEx=function(E,F,w,y,D,z,u,A){var B=this;B._resetErr();if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostEx",u)}var v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}if(!s(B,F,D,x)){return false}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.innerHTTPUploadPost=function(x,S,L,Q,C,A,J,D){var G=this,F="HTTPUploadThroughPostEx",B=d.combineUrl(G,x,L),K=true,R=false,y="",H=0,v=[],N=function(T){if(m.isFunction(J)){J(T)}return false},O,I,P=false;G.__HTTPPostResponseString="";if(m.isNumber(S)){if(S<-2){m.Errors.IndexOutOfRange(G);return N(S)}}else{if(m.isArray(S)){}else{m.Errors.IndexOutOfRange(G);return N(S)}}if(!m.isString(Q)||Q==""){m.Errors.UploadFileCannotEmpty(G);return N()}if(m.isUndefined(C)){m.Errors.InvalidImageType(G);return N(S)}if(C==EnumDWT_ImageType.IT_BMP||C==EnumDWT_ImageType.IT_JPG||C==EnumDWT_ImageType.IT_PNG){if(S==-1&&G._ImgManager.count()>1||m.isArray(S)&&S.length>1){m.Errors.UploadIndexMoreThanOne(G);return N(S)}if(m.isArray(S)){v.push(S[0])}else{if(S==-1){v.push(0)}else{v.push(S)}}}else{if(C==EnumDWT_ImageType.IT_TIF||C==EnumDWT_ImageType.IT_PDF){if(S==-1){if(G._ImgManager.count()==0){m.Errors.NoImage(G);return N()}for(I=0;I<G._ImgManager.count();I++){v.push(I)}}else{if(S==-2){v=G._ImgManager.getSelectedClientIndexArray()}else{if(m.isArray(S)){for(I=0;I<S.length;I++){v.push(S[I])}}else{v.push(S)}}}}else{m.Errors.InvalidImageType(G);return N(S)}}if(G._isMobileMode()){K=true}else{if(!m.isFunction(A)){K=false}}if(x===""){m.Errors.HttpServerCannotEmpty(G);return N(v)}if(m.isUndefined(B)||B===""){m.Errors.ParameterCannotEmpty(G);return N(v)}else{if(!m.isString(B)){m.Errors.InvalidUrl(G);return N(v)}}if((B.indexOf("http://")!=0)&&(B.indexOf("https://")!=0)){if(m.detect.ssl){B="https://"+B}else{B="http://"+B}}if(!G._isMobileMode()){if(d.isServerInvalid(G)){return N(v)}}if(!G._checkIndices(v)&&v!=-1){return N(v)}var w=[];if(m.isArray(v)){m.each(v,function(U){var T=G._ImgManager.convertClientIndexToServerId(U);if(T!=-1){w.push(T)}})}G._resetErr();if(K){O={bOnlyUploadForm:p,method:"HTTPUploadThroughPostEx",_this:G,url:B,serverIds:w,enumImageType:C,saveSetup:P,fileName:Q,retry:0,bOnlyEmptyIsOK:true,objUploadFileStatus:false,dataFormat:EnumDWT_UploadDataFormat.Binary,asyncSuccessFunc:A,asyncFailureFunc:N};m._asyncUploadCmd(O);return true}else{m.cancelFrome=1;var u=function(){m.needShowTwiceShowDialog=false;m.closeProgress(F);N(v);return false};m.needShowTwiceShowDialog=true;m.showProgress(G,F,false);var z=Dynamsoft.WebTwainEnv;var E=n.GetHttpHeadersAndClear(G);var M=4;if(z.IfAddMD5InUploadHeader){E["dwt-md5"]=y}G._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);G.__innerConvertToBlob(C,w,P,K,M,function(V,W){m.needShowTwiceShowDialog=false;if(V&&(m.dlgRef>0||G.__IfShowCancelDialogWhenImageTransfer==false||K==false)){var U=G.MaxUploadImageSize,T=V.size;if(T>U&&U!=-1){m.Errors.UploadExceededMaxSize(G);return u()}if(V instanceof File){V.fileName=Q}else{V.name=Q}d.setBtnCancelVisibleForProgress(G,true);var Y=0,X=false;return d.httpPostUpload(G,B,V,K,0,E,true,Y,true,X,function(Z){m.closeProgress(F);R=true;return true},u)}else{return u()}},u);return R}};l._checkIndices=function(x){var y=this,u,v;if(!m.isArray(x)){m.Errors.IndicesNotArray(y);return false}if(x.length==0){m.Errors.IndicesCannotEmpty(y);return false}u=y._ImgManager.count();for(v=0;v<x.length;v++){var w=x[v];if(m.isUndefined(w)||w===null){m.Errors.IndexNullOrUndefined(y);return false}w=parseInt(w);if(isNaN(w)){m.Errors.InvalidIndex(y);return false}if(w<0||w>=u){m.Errors.IndicesOutOfRange(y);return false}}return true};l.SetUploadSegment=function(u,v){var w=this;w._resetErr();if(w._isMobileMode()){return w._mobileNotSupport("SetUploadSegment")}if(!m.isNumber(u)||u<0){m.Errors.InvalidSegmentUploadThreshold(w);return false}if(!m.isNumber(v)||(v<=0)){m.Errors.InvalidModuleSize(w);return false}w._segementUploadThreshold=u*1024*1024;w._moduleSize=v*1024;return true};l.HTTPUpload=function(w,H,F,G,z,A,u){var E=this;E._resetErr();var y,I,D,v=arguments;if(arguments.length<=3){if(m.isFunction(H)){I=function(){H(E.__HTTPPostResponseString,w,v)}}else{I=false}D=function(){if(m.isFunction(F)){b(F,E,E.__HTTPPostResponseString,w,v)}};y={bOnlyUploadForm:i,_this:E,url:w,asyncSuccessFunc:I,asyncFailureFunc:D}}else{var C,x=[],B=false;if(m.isFunction(z)){C="RemoteFile";I=function(K,J){z(E.__HTTPPostResponseString,J,v)};D=function(J){if(m.isFunction(A)){b(A,E,E.__HTTPPostResponseString,J,v)}}}else{if(m.isString(z)){C=z}else{C="RemoteFile"}if(m.isFunction(A)){I=function(K,J){q(A,E.__HTTPPostResponseString,J,v)}}else{I=false}D=function(J){if(m.isFunction(u)){b(u,E,E.__HTTPPostResponseString,J,v)}}}if(!E._checkIndices(H)){D(H);return false}if(m.isArray(H)){m.each(H,function(K){var J=E._ImgManager.convertClientIndexToServerId(K);if(J!=-1){x.push(J)}})}if(x.length==0){m.Errors.InvalidIndex(E);D(H);return false}if(m.isUndefined(F)){m.Errors.InvalidImageType(E);D(H);return false}if(F==EnumDWT_ImageType.IT_BMP||F==EnumDWT_ImageType.IT_JPG||F==EnumDWT_ImageType.IT_PNG){if(x.length>1){m.Errors.UploadIndexMoreThanOne(E);D(H);return false}}else{if(F==EnumDWT_ImageType.IT_TIF||F==EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(E);D(H);return false}}if(m.isUndefined(G)||(G!=EnumDWT_UploadDataFormat.Binary&&G!=EnumDWT_UploadDataFormat.Base64)){m.Errors.InvalidDataFormat(E);D(H);return false}y={bOnlyUploadForm:p,method:"HTTPUpload",_this:E,url:w,serverIds:x,enumImageType:F,saveSetup:B,dataFormat:G,fileName:C,retry:0,bOnlyEmptyIsOK:true,objUploadFileStatus:false,asyncSuccessFunc:I,asyncFailureFunc:D}}E._resetErr();m._asyncUploadCmd(y);return true};l._innerHTTPUpload=function(z,x,D,V,X,W,B,R,v,A,M){var K=this,E=parseInt(D),O=parseInt(V),w=X,H="HTTPUpload",C=z,N=true,Y=false,J=K._moduleSize,S=K._segementUploadThreshold,L,Q,y="",F,G;K.__HTTPPostResponseString="";if(m.isUndefined(D)){m.Errors.InvalidImageType(K);if(m.isFunction(M)){M()}return false}m.cancelFrome=1;var U,u=function(){m.needShowTwiceShowDialog=false;m.closeProgress(H);if(m.isFunction(M)){M()}return false};G=function(Z){var aa=(Z.total===0)?100:Math.round(Z.loaded*100/Z.total),ab=[Z.loaded," / ",Z.total].join("");K._OnPercentDone([0,aa,"","http",w])};w=d.addImageFileExt(w,E);m.needShowTwiceShowDialog=true;m.showProgress(K,H,false);if(!K._isMobileMode()){if(d.isServerInvalid(K)){return u()}}if(O==EnumDWT_UploadDataFormat.Binary){var I=0;var P=4;if(v&&v.bCancel){v.st=2;return u()}K._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);Y=K.__innerConvertToBlob(E,x,W,true,P,function(ab,ac){U=function(){m.needShowTwiceShowDialog=false;m.closeProgress(H);if(m.isFunction(A)){q(A,ab)}return true};if(v&&v.bCancel){v.st=2;return u()}if(!ab||ab.size<=0){m.Errors.UploadFileCannotEmpty(K);return u()}var aa=K.MaxUploadImageSize,Z=ab.size;if(Z>aa&&aa!=-1){m.Errors.UploadExceededMaxSize(K);return u()}if(K._errorCode!=0){return u()}if(S>0&&ab.size>S){var af=0,ae=n.GetHttpHeadersAndClear(K),ad=Dynamsoft.WebTwainEnv;if(ad.IfAddMD5InUploadHeader){ae["dwt-md5"]=y}K._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",w]);Y=n.UploadBinary(K,C,E,ab,w,ae,af,J,G,B,R,v,U,u)}else{Y=K.__innnerHTTPUploadBinaryFull(C,y,ab,E,w,B,R,v,U,u)}},u)}else{if(O==EnumDWT_UploadDataFormat.Base64){var T=4;Y=K._convertToBase64ByServerIds(x,E,W,T,function(ac){if(!ac||ac.getLength()<=0){m.Errors.UploadFileCannotEmpty(K);return u()}U=function(){m.needShowTwiceShowDialog=false;m.closeProgress(H);if(m.isFunction(A)){q(A,ac)}return true};if(S>0&&ac.getLength()>S){var ad=0,ab=n.GetHttpHeadersAndClear(K),aa=Dynamsoft.WebTwainEnv;y=ac.getMD5();if(aa.IfAddMD5InUploadHeader){ab["dwt-md5"]=y}K._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"]);n.UploadBase64(K,C,E,ac,w,ab,ad,J,G,U,u)}else{var Z;y=ac.getMD5();Z=ac.getData(0,ac.getLength());if(!Z||Z==""){m.Errors.UploadFileCannotEmpty(K);return u()}K.__innnerHTTPUploadBase64Full(C,y,Z,E,w,B,R,U,u)}},u)}}return Y};l._innerFormFieldHTTPUpload=function(v,B,u){var D=this,x,z="HTTPUpload",A=v,C=true,E=false;D.__HTTPPostResponseString="";x=function(){m.needShowTwiceShowDialog=false;m.closeProgress(z);if(m.isFunction(u)){t(u,D,D.__HTTPPostResponseString)}return false};if(m.isUndefined(A)||A===""){m.Errors.ParameterCannotEmpty(D);return x()}else{if(!m.isString(A)){m.Errors.InvalidUrl(D);return x()}}if((A.indexOf("http://")!=0)&&(A.indexOf("https://")!=0)){if(m.detect.ssl){A="https://"+A}else{A="http://"+A}}D.__HTTPPostResponseString="";m.cancelFrome=1;m.showProgress(D,z,false);m.needShowTwiceShowDialog=true;var w=n.GetHttpHeadersAndClear(D);D._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"]);var y=false;E=d.httpUploadByBIO(D,A,p,0,true,w,true,0,true,y,function(F){m.needShowTwiceShowDialog=false;m.closeProgress(z);if(m.isFunction(B)){q(B,F)}},x);return E};var n={UploadBinary:function(L,D,E,z,w,F,y,K,H,C,M,v,x,u){var B,A,I="HttpUpload",J=z.size;B=J-y;if(B>0){if(B>=K){B-=K;A=K}else{A=B;B=0}var G=z.slice(y,y+A);if(!G){m.Errors.UploadFileCannotEmpty(L);return u()}if(m.dlgRef>0||L.__IfShowCancelDialogWhenImageTransfer==false){G.name=w;d.setBtnCancelVisibleForProgress(L,true);F["Content-Range"]=["bytes ",y,"-",y+G.size-1,"/",J].join("");H({total:J,loaded:y});d.httpPostUpload(L,D,G,true,0,F,false,C,M,v,function(N){if(B==0){m.needShowTwiceShowDialog=false;H({total:J,loaded:J});if(m.isFunction(x)){q(x,N)}}else{y+=A;setTimeout(function(){m.cancelFrome=1;n.UploadBinary(L,D,E,z,w,F,y,K,H,C,M,v,x,u)},100)}},u);return true}else{m.Errors.UploadError(L,true);return u()}}else{m.needShowTwiceShowDialog=false;m.closeProgress(I);if(m.isFunction(x)){x("")}}return true},UploadBase64:function(C,y,E,K,z,u,A,D,F,B,I){var w=K.getLength(),x="HttpUpload",H,v,J=0;H=w-A;if(H>0){if(H>=D){H-=D;v=D}else{v=H;H=0}var G=K.getData(A,D);if(!G||G==""){m.Errors.UploadFileCannotEmpty(C);return I()}if(m.dlgRef>0||C.__IfShowCancelDialogWhenImageTransfer==false){d.setBtnCancelVisibleForProgress(C,true);u["Content-Range"]=["bytes ",A,"-",A+v-1,"/",w].join("");F({total:w,loaded:A});d.httpPostUploadString(C,y,G,z,0,u,false,0,true,function(L){if(H==0){m.needShowTwiceShowDialog=false;F({total:w,loaded:w});if(m.isFunction(B)){q(B,L)}}else{A+=v;setTimeout(function(){m.cancelFrome=1;n.UploadBase64(C,y,E,K,z,u,A,D,F,B,I)},100)}},I);return true}else{m.Errors.UploadError(C,true);return I()}}else{m.needShowTwiceShowDialog=false;m.closeProgress(x);if(m.isFunction(B)){B("")}}return true},GetHttpHeadersAndClear:function(v){var u=v.__httpHeaderMap;v.__httpHeaderMap={};if(!u){u={}}return u}};l.__innnerHTTPUploadBinaryFull=function(z,x,C,F,P,D,O,v,A,u){var K=this,H=n.GetHttpHeadersAndClear(K),I="HTTPUpload",w=P,E=z,M=true,Q=false,J=0,L,N,G;var B=0,y=Dynamsoft.WebTwainEnv;if(y.IfAddMD5InUploadHeader){H["dwt-md5"]=x}if(m.dlgRef>0||K.__IfShowCancelDialogWhenImageTransfer==false){if(C instanceof File){C.fileName=w}else{C.name=w}d.setBtnCancelVisibleForProgress(K,true);return d.httpPostUpload(K,E,C,M,J,H,true,D,O,v,function(R){if(m.isFunction(A)){q(A,R)}},u)}else{m.Errors.UploadError(K,true);return u()}return Q};l.__innnerHTTPUploadBase64Full=function(y,w,A,D,N,B,M,z,u){var I=this,F=n.GetHttpHeadersAndClear(I),G="HTTPUpload",v=N,C=y,K=true,O=false,H=0,J,L,E,x=Dynamsoft.WebTwainEnv;if(m.dlgRef>0||I.__IfShowCancelDialogWhenImageTransfer==false){if(x.IfAddMD5InUploadHeader){if(F){F["dwt-md5"]=w}}d.setBtnCancelVisibleForProgress(I,true);return d.httpPostUploadString(I,C,A,v,0,F,true,B,M,function(P){if(m.isFunction(z)){q(z,P)}},u)}else{m.Errors.UploadError(I,true);return u()}return O};l.ConvertToBase64=function(H,G,A,u){var C=this;C._resetErr();var w=[],v=arguments,y=parseInt(G),x="ConvertToBase64",D,B=false;if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(u)){u(C.ErrorCode,C.ErrorString)}return false}if(!C._isMobileMode()){if(d.isServerInvalid(C)){if(m.isFunction(u)){b(u,C,H,G,v)}return false}}if(!C._checkIndices(H)){if(m.isFunction(u)){b(u,C,H,G,v)}return false}if(y==EnumDWT_ImageType.IT_BMP||y==EnumDWT_ImageType.IT_JPG||y==EnumDWT_ImageType.IT_PNG){if(H.length>1){m.Errors.ConvertBase64IndexMoreThanOne(C);if(m.isFunction(u)){b(u,C,H,G,v)}return false}}else{if(y==EnumDWT_ImageType.IT_TIF||y==EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(C);if(m.isFunction(u)){b(u,C,H,G,v)}return false}}if(m.isArray(H)){m.each(H,function(J){var I=C._ImgManager.convertClientIndexToServerId(J);if(I!=-1){w.push(I)}})}var E=function(J){var I=[];if(m.isArray(w)){m.each(w,function(K){var L=C._ImgManager.convertServerIdToClientIndex(K);if(L>-1){I.push(L)}})}if(m.isFunction(A)){q(A,J,I,G,v)}return false};var z=function(){var I=[];if(m.isArray(w)){m.each(w,function(J){var K=C._ImgManager.convertServerIdToClientIndex(J);if(K>-1){I.push(K)}})}if(m.isFunction(u)){b(u,C,I,G,v)}return false};var F=3;return C._convertToBase64ByServerIds(w,y,B,F,E,z)};l._convertToBase64ByServerIds=function(w,G,C,F,z,u){var D=this,x="ConvertToBase64",E,B=C;m.showProgress(D,x,false);var H=function(){m.closeProgress(x);if(m.isFunction(u)){u()}return false},A=function(L){var J=0,N="",M="",O=L&&L.result,K=[],I;if(m.isArray(w)){m.each(w,function(P){var Q=D._ImgManager.convertServerIdToClientIndex(P);if(Q>-1){K.push(Q)}})}if(D.ErrorCode!=0){H();return}if(O&&m.isArray(O)&&O.length==3){M=O[0];J=O[1];N=O[2];I=new m.html5.Base64Result(D,J,N,M);m.closeProgress(x);if(m.isFunction(z)){q(z,I)}}else{m.Errors.ConvertBase64Failed(D);H()}};if(D._isMobileMode()){if(G==EnumDWT_ImageType.IT_BMP){m.closeProgress(x);return D._mobileNotSupport("Convert to bmp",u)}return D.__innerConvertToBase64ByMobile(w,G,F,A,H)}if(!m.isString(B)||B==""){B="{}"}var v=["[",G,',"',w.join(","),'",',B,",1]"].join("");var y=false;return D._innerFunRaw(x,v,true,y,true,A,H)};l.ClearAllHTTPFormField=function(){var u=this;u._resetErr();u.httpFormFields={};return true};l.SetHTTPFormField=function(y,u,w){var x=this;x._resetErr();var v=y;if(!m.isString(v)){v=""+v}if(u instanceof Blob){u.name=w}x.httpFormFields[v]=u;return true};l.HTTPUploadAllThroughPostAsMultiPageTIFF=function(E,w,y,z,u,A){var B=this;B._resetErr();if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadAllThroughPostAsMultiPageTIFF",u)}var F=-1,D=2,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.HTTPUploadThroughPostAsMultiPageTIFF=function(F,w,y,z,u,A){var B=this;B._resetErr();if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostAsMultiPageTIFF",u)}var D=-2,E=2,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(F,D,w,y,E,C,x,A)};l.HTTPUploadAllThroughPostAsPDF=function(E,w,y,z,u,A){var B=this;B._resetErr();if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadAllThroughPostAsPDF",u)}var F=-1,D=4,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.HTTPUploadThroughPostAsMultiPagePDF=function(F,w,y,z,u,A){var B=this;B._resetErr();if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostAsMultiPagePDF",u)}var D=-2,E=4,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(F,D,w,y,E,C,x,A)};l.HTTPDownloadThroughPost=function(H,v,y,G,z,B){var C=this,w=n.GetHttpHeadersAndClear(C),u=arguments,x=d.combineUrl(C,H,v),E,D;if(x===p){m.Errors.ParameterCannotEmpty(C);return p}if(d.isServerInvalid(C)){if(m.isFunction(z)){t(z,C,u)}return p}if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(z)){t(z,C,u)}return p}if(!m.License.checkPDFProductKeyWhenNeeds(C,y)){if(m.isFunction(z)){t(z,C,u)}return p}m.cancelFrome=2;m.showProgress(C,"HttpDownloadThroughPost",i);E="post";var F=function(I){var J=(I.total===0)?100:Math.round(I.loaded*100/I.total),K=[I.loaded," / ",I.total].join("");C._OnPercentDone([0,J,"","http"])},A=i;C._OnPercentDone([0,-1,Dynamsoft.MSG.Downloading,"http"]);if(!m.isFunction(G)){A=p}D=d.loadHttpBlob(C,E,x,A,function(I){C._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);var K="",J=y;if(J<-1||J>5){J=-1}C.__LoadImageFromBytes(I,J,K,A,G,z)},function(){m.closeProgress("HttpDownloadThroughPost");if(m.isFunction(z)){t(z,C,u)}},F,w);return D};l.HTTPDownloadThroughGet=function(F,u,w,E,y){var A=this,v=n.GetHttpHeadersAndClear(A),x=d.combineUrl(A,F,u),C,B;if(x===p){m.Errors.ParameterCannotEmpty(A);if(m.isFunction(y)){t(y,A)}return p}if(!A._isMobileMode()){if(d.isServerInvalid(A)){if(m.isFunction(y)){t(y,A)}return p}if(!m.License.checkProductKey(A,{Core:true})){if(m.isFunction(y)){t(y,A)}return p}if(!m.License.checkPDFProductKeyWhenNeeds(A,w)){if(m.isFunction(y)){t(y,A)}return p}}else{if(!m.License.checkProductKey(A,{Core:true})){if(m.isFunction(y)){t(y,A)}return p}}m.cancelFrome=2;C="get";m.showProgress(A,"HTTPDownloadThroughGet",i);var D=function(G){var H=(G.total===0)?100:Math.round(G.loaded*100/G.total),I=[G.loaded," / ",G.total].join("");A._OnPercentDone([0,H,"","http"])},z=i;A._OnPercentDone([0,-1,Dynamsoft.MSG.Downloading,"http"]);if(!m.isFunction(E)){z=p}if(A._isMobileMode()){B=d.loadHttpBlob(A,C,x,z,function(G){A._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);A.LoadImageFromBinary(G,function(){Dynamsoft.Lib.closeProgress("");if(m.isFunction(E)){E()}},function(){m.closeProgress("HTTPDownloadThroughGet");if(m.isFunction(y)){t(y,A)}})},function(){m.closeProgress("HTTPDownloadThroughGet");if(m.isFunction(y)){t(y,A)}},D,v)}else{B=d.loadHttpBlob(A,C,x,z,function(G){A._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);var I="",H=w;if(H<-1||H>5){H=-1}A.__LoadImageFromBytes(G,H,I,z,E,y)},function(){m.closeProgress("HTTPDownloadThroughGet");if(m.isFunction(y)){t(y,A)}},D,v)}return B};l.HTTPUploadThroughPut=function(x,w,u,z,v){var y=d.getImageType(u);return this.HTTPUploadThroughPutEx(x,w,u,y,z,v)};l.HTTPUploadThroughPutEx=function(y,O,v,D,B,N){var H=this,E=n.GetHttpHeadersAndClear(H),G="HTTPUploadThroughPutEx",C=d.combineUrl(H,y,v),J=true,z="",w=[],M=false;if(C===false){m.Errors.ParameterCannotEmpty(H);if(m.isFunction(N)){b(N,H,"",[O],v,D)}return false}if(!m.isFunction(B)){J=false}m.cancelFrome=1;var u=function(){m.needShowTwiceShowDialog=false;m.closeProgress(G);if(m.isFunction(N)){b(N,H,H.__HTTPPostResponseString,w,v,D)}return false},F;m.needShowTwiceShowDialog=true;m.showProgress(H,G,false);switch(O){case -1:for(var I=0;I<H._ImgManager.count();I++){w.push(I)}break;case -2:w=H._ImgManager.getSelectedClientIndexArray();break;default:w.push(O);if(O>=0){}else{m.Errors.IndexOutOfRange(H);return u()}break}if(y===""){m.Errors.HttpServerCannotEmpty(H);return u()}var x=[];if(m.isArray(w)){m.each(w,function(Q){var P=H._ImgManager.convertClientIndexToServerId(Q);if(P!=-1){x.push(P)}})}var A=Dynamsoft.WebTwainEnv;if(A.IfAddMD5InUploadHeader){if(z){E["dwt-md5"]=z}}var L=false;var K=4;H._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);M=H.__innerConvertToBlob(D,x,L,J,K,function(R,S){m.needShowTwiceShowDialog=false;if(R&&(m.dlgRef>0||H.__IfShowCancelDialogWhenImageTransfer==false||J==false)){var Q=H.MaxUploadImageSize,P=R.size;if(P>Q&&Q!=-1){m.Errors.UploadExceededMaxSize(H);return u()}F=function(T){var U=(T.total===0)?100:Math.round(T.loaded*100/T.total),V=[T.loaded," / ",T.total].join("");H._OnPercentDone([0,U,"","http"])};H._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"]);d.setBtnCancelVisibleForProgress(H,true);return d.httpPutImage(H,C,R,J,function(T){H.__HTTPPostResponseString=T;m.closeProgress(G);if(m.isFunction(B)){var U=[];if(m.isArray(x)){m.each(x,function(V){var W=H._ImgManager.convertServerIdToClientIndex(V);if(W>-1){U.push(W)}})}q(B,H.__HTTPPostResponseString,U,v,D)}return true},u,F)}else{m.closeProgress(G);return false}},u);return M};l.HTTPUploadAllThroughPutAsMultiPageTIFF=function(x,u,z,w){var A=this,v=-1,y=2;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.HTTPUploadThroughPutAsMultiPageTIFF=function(x,u,z,w){var A=this,v=-2,y=2;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.HTTPUploadAllThroughPutAsPDF=function(x,u,z,w){var A=this,v=-1,y=4;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.HTTPUploadThroughPutAsMultiPagePDF=function(x,u,z,w){var A=this,v=-2,y=4;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.GetSelectedImagesSize=function(v){var w=this;w._resetErr();if(w._isMobileMode()){return w._mobileNotSupport("GetSelectedImagesSize")}var u=f(w);return w._innerFun("GetSelectedImagesSize",d.makeParams(v,u.join(",")))};l.SetHTTPHeader=function(x,z){var A=this;A._resetErr();var u,w,v,y=x;if(!A.__httpHeaderMap){A.__httpHeaderMap={}}if(!y||!m.isString(y)){if(m.isUndefined(y)){m.Errors.HttpHeaderIsUndefined(A)}else{if(y===""){m.Errors.HttpHeaderIsEmpty(A)}else{if(y===null){m.Errors.HttpHeaderIsNull(A)}else{m.Errors.HttpHeaderIsInvalid(A)}}}return false}w=["if-modified-since","if-none-match","if-range","range","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via","dwt-md5"];y=y.toLowerCase();for(v=0;v<w.length;v++){if(w[v]==y){m.Errors.HttpHeaderNotAllowed(A);return false}}if(m.isUndefined(z)||z===null||z===""){if(x in A.__httpHeaderMap){delete A.__httpHeaderMap[x]}return true}if(m.isNumber(z)){z=""+z}A.__httpHeaderMap[x]=z;return true};m.html5.Base64Result=function(u,x,w,v){var y=this;y._stwain=u;y._md5=w;y._length=x;y._content=v};m.html5.Base64Result.prototype.getLength=function(){return this._length};m.html5.Base64Result.prototype.getMD5=function(){return this._md5};m.html5.Base64Result.prototype.getData=function(x,v){var y=this,u=v,w=-1;if(!m.isNumber(x)||!m.isNumber(v)){return""}if(x<0||v<=0){return""}if(x+u>y._length){u=y._length-x}return y._content.substr(x,u)};l._ConvertToBlob=function(w,G,A,z,u){var C=this,x="ConvertToBlob",B=true,E=false,v=arguments,D="";if(!m.isFunction(z)){B=false}m.cancelFrome=0;m.showProgress(C,x,false);var H=function(){m.needShowTwiceShowDialog=false;m.closeProgress(x);if(m.isFunction(u)){var I=[];if(m.isArray(w)){m.each(w,function(J){var K=C._ImgManager.convertServerIdToClientIndex(J);if(K>-1){I.push(K)}})}b(u,C,I,G,v)}return false};var y,F=2;E=C.__innerConvertToBlob(G,w,A,B,F,function(L,M){if(!L||L.size<=0){m.Errors.ConvertBlobIsEmpty(C);return H()}var J=C.MaxUploadImageSize,I=L.size;if(I>J&&J!=-1){m.Errors.UploadExceededMaxSize(C);return H()}m.needShowTwiceShowDialog=false;m.closeProgress(x);if(m.isFunction(z)){var K=[];if(m.isArray(w)){m.each(w,function(N){var O=C._ImgManager.convertServerIdToClientIndex(N);if(O>-1){K.push(O)}})}if(L instanceof Blob){y=d.getBlobTypeByImageType(G);q(z,L.slice(0,L.size,y),K,v)}else{q(z,L,K,v)}}if(B){return true}else{y=d.getBlobTypeByImageType(G);return L.slice(0,L.size,y)}},H);return E};l.ConvertToBlob=function(F,y,z,u,B){var C=this;C._resetErr();var E=parseInt(y),v=arguments,D=function(G,H){if(m.isFunction(z)){q(z,G,H,y,v)}return true},x=function(G){if(m.isFunction(u)){b(u,C,G,y,v)}return false},A=false;if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(u)){u(C.ErrorCode,C.ErrorString)}return false}if(!C._isMobileMode()){if(d.isServerInvalid(C)){return x(F)}}if(!C._checkIndices(F)){return x(F)}if(E==EnumDWT_ImageType.IT_BMP||E==EnumDWT_ImageType.IT_JPG||E==EnumDWT_ImageType.IT_PNG){if(F.length>1){m.Errors.ConvertBinaryIndexMoreThanOne(C);return x(F)}}else{if(E==EnumDWT_ImageType.IT_TIF||E==EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(C);return x(F)}}var w=[];if(m.isArray(F)){m.each(F,function(H){var G=C._ImgManager.convertClientIndexToServerId(H);if(G!=-1){w.push(G)}})}if(!m.isFunction(z)){return C._ConvertToBlob(w,E,A)}C._ConvertToBlob(w,E,A,D,x);return true};m._asyncUploadCmd=function(y){var E=y._this,B=y.bOnlyUploadForm,w=y.url,C=y.asyncSuccessFunc,v=y.asyncFailureFunc;if(B){E._innerFormFieldHTTPUpload(w,function(){if(m.isFunction(C)){try{C()}catch(J){}}},function(){if(m.isFunction(v)){try{v()}catch(J){}}})}else{var x=y.serverIds,F=y.enumImageType,H=y.dataFormat,A=y.fileName,D=y.saveSetup,u=y.retry,G=y.bOnlyEmptyIsOK,z=y.objUploadFileStatus,I=function(){if(m.isFunction(v)){var J=[];if(m.isArray(x)){m.each(x,function(L){var M=E._ImgManager.convertServerIdToClientIndex(L);if(M>-1){J.push(M)}})}try{v(J)}catch(K){}}return false};if(m.isNumber(u)&&u>0){}else{u=0}if(E._errorCode!=0){return I()}return E._innerHTTPUpload(w,x,F,H,A,D,u,G,z,function(K){if(m.isFunction(C)){var J=[];if(m.isArray(x)){m.each(x,function(M){var N=E._ImgManager.convertServerIdToClientIndex(M);if(N>-1){J.push(N)}})}try{q(C,K,J)}catch(L){}}return true},I)}};l._asyncUploadFilesCmd=function(y,w,E,N,U,J,C,T,A,O){var I=this,F=parseInt(E),G="HTTPUpload",D=y,P=true,V=false,K,R,x="",B=[];I.__HTTPPostResponseString="";m.cancelFrome=1;var u=function(){I._bServerPercentDone=true;m.needShowTwiceShowDialog=false;if(J){m.closeProgress(G)}B=null;if(m.isFunction(O)){var W=[];if(m.isArray(w)){m.each(w,function(Y){var Z=I._ImgManager.convertServerIdToClientIndex(Y);if(Z>-1){W.push(Z)}})}try{O(W)}catch(X){}}return false};m.needShowTwiceShowDialog=true;if(J){m.showProgress(I,G,false)}if(d.isServerInvalid(I)){return u()}var H=0,z=function(X){I._bServerPercentDone=true;m.needShowTwiceShowDialog=false;if(J){m.closeProgress(G)}B=null;if(m.isFunction(A)){var W=[];if(m.isArray(w)){m.each(w,function(Y){var Z=I._ImgManager.convertServerIdToClientIndex(Y);if(Z>-1){W.push(Z)}})}q(A,X,W)}};var M=w.length,L=0,v=0,Q=4,S="";I._bServerPercentDone=false;I._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);m.each(w,function(X,W){V=I.__innerConvertToBlob(F,[X],U,true,Q,function(ab,ac){if(!ab||ab.size<=0){m.Errors.UploadFileCannotEmpty(I);return u()}var ad=I.MaxUploadImageSize,ag=ab.size;if(ag>ad&&ad!=-1){m.Errors.UploadExceededMaxSize(I);return u()}var af=d.cformat(N,W+1);v=((L+1)/M)*100;S=[(L+1),"/",M].join("");I._OnPercentDone([0,v,S,"http",af]);var Z=ac[0],Y=ac[1];ab.name=af;B.push(ab);L++;if(L>=M){var aa=n.GetHttpHeadersAndClear(I),ae=true,ah=0;V=d.httpPostUploadFiles(I,D,B,ae,ah,aa,J,C,T,function(ai){z(ai)},u)}},u,[X,W])});return V}});Dynamsoft.Ready(function(e,f){var a=Dynamsoft;var c=a.navInfo,d=e.html5,j=d.STwain,i=d.Funs,b,h=Dynamsoft.WebTwainEnv,g={upload:"Uploading...",download:"Downloading...",load:"Loading...",decode:"Decoding...",decodeTIFF:"Decoding tiff...",decodePDF:"Decoding pdf...",encodeTIFF:"Encoding tiff...",encodePDF:"Encoding pdf...",encode:"Encoding..."};if(!e.product.bHTML5Edition){return}b=j.prototype;b.RegisterEvent=function(k,n){var m=this;m._resetErr();var l=["__",k].join("");m[l]=n;return true};b.onEvent=function(k,l){this.RegisterEvent(k,l)};b.on=function(k,l){this.RegisterEvent(k,l)};b.OnRefreshUI=function(o,n,p,l){var q=this,k="On RefreshUI";if(!q._bNoUI){if(p){q._ImgManager.refresh(o,q._ImgManager.count(),true,l)}if(Dynamsoft.Lib.isFunction(q.__OnRefreshUI)){q.__OnRefreshUI(q._ImgManager.getCurrentImageIndex(),q._ImgManager.count())}}return true};b._OnBitmapChanged=function(B){var A=this,v=(B[0]=="10"),s=(B[0]=="0")||v,k=B[1].split(","),x=B[2],l=B[3],D=A.__maxImagesInBuffer,z="OnBitmapChanged:",n=1,w=2,t=3,o=4,u=5,p={};if(v){if(B.length>5){p=B[5]}}else{if(B.length>5){p.imageWidth=B[5]}if(B.length>6){p.imageHeight=B[6]}if(B.length>7){p.imageBitDepth=B[7]}if(B.length>8){p.imageXResolution=B[8]}if(B.length>9){p.imageYResolution=B[9]}}e.log(z+B);if((x==w)||(x==n&&!A.__IfAppendImage)){e.each(k,function(F){var E=parseInt(F),G=A._ImgManager.getCurrentImageIndex();if(isNaN(E)||E<0){return true}if(s){A._aryBitmapCache.push(E)}else{var m=0;for(;m<A._aryBitmapCache.length;m++){if(A._aryBitmapCache[m]==E){A._aryBitmapCache.splice(m,1);return true}}}if(A._ImgManager.exists(E)){return true}if(A.__insertingIndex>-1){G=A.__insertingIndex}if(G==-1){G=0}A._ImgManager.insertBefore(G,D,E,p);if(A.__insertingIndex>-1){A.__insertingIndex=A.__insertingIndex+1}});if(e.isFunction(A.__OnRefreshUI)){A.__OnRefreshUI(A._ImgManager.getCurrentImageIndex(),A._ImgManager.count())}}else{if(x==n&&A.__IfAppendImage){e.each(k,function(F){var E=parseInt(F);if(isNaN(E)||E<0){return true}if(s){A._aryBitmapCache.push(E)}else{var m=0;for(;m<A._aryBitmapCache.length;m++){if(A._aryBitmapCache[m]==E){A._aryBitmapCache.splice(m,1);return true}}}if(A._ImgManager.exists(E)){return true}A._ImgManager.append(D,E,p)});if(e.isFunction(A.__OnRefreshUI)){A.__OnRefreshUI(A._ImgManager.getCurrentImageIndex(),A._ImgManager.count())}}else{if(x==t&&s){var C=false;if(k.length==1&&k[0]==-1){C=true}else{if(k.length==1&&A._ImgManager.count()<=1){C=A._ImgManager.convertClientIndexToServerId(0)==k[0]}}if(C){A._ImgManager.clear()}else{e.each(k,function(F,E){var m=parseInt(F);if(isNaN(m)||m<0){return true}A._ImgManager.removeByServerId(m)})}if(e.isFunction(A.__OnRefreshUI)){A.__OnRefreshUI(A._ImgManager.getCurrentImageIndex(),A._ImgManager.count())}}else{if(x==o){e.each(k,function(G,F){var m=parseInt(G);if(isNaN(m)||m<0){return true}if(m>=0&&!A.__bLoadingImage){if(!A._bNoUI){if(A._ImgManager.bImageJustChangedInEditor==false){A._ImgManager.bImageChangedInViewer=true}else{A._ImgManager.bImageJustChangedInEditor=false;A._ImgManager.bImageChangedInViewer=false}}var E=A._ImgManager.convertServerIdToClientIndex(m);if(E>-1){A.OnRefreshUI(E,A._ImgManager.count(),true,p)}}})}else{if(x==u){if(l>=0&&!A.__bLoadingImage){if(A.__IfAppendImage==false&&A._ImgManager._UIView.bSingleMode==true){A.OnRefreshUI(l,A._ImgManager.count(),true,p)}A._ImgManager.refresh(l,A._ImgManager.count(),false,p)}}}}}}if(e.isFunction(A.__OnBitmapChanged)){if(!v&&s){return true}var r=[];e.each(k,function(E){var m=parseInt(E),F;if(isNaN(m)||m<0){return true}F=A._ImgManager.convertServerIdToClientIndex(m);if(F>-1){r.push(F)}});var y=A._ImgManager.getCurrentImageIndex(),q=x;if(x==n){if(A.__IfAppendImage){q=n}else{q=w}}A.__OnBitmapChanged(r,q,y,A._ImgManager.count())}};b._OnPostLoad=function(r,k){var o=this,n,t,q,l,s,m;if(k!==undefined&&k.exception!==undefined&&k.description!==undefined){o._errorCode=k.exception;o._errorString=k.description}e.log("OnPostLoad Results:");l=r[1].split(",");t=e.base64.decode(l[0]);s=e.base64.decode(l[1]);e.log(t);e.log(s);e.log(l[2]);i.autoDiscardBlankImage(o,"On PostLoad");m=o._ImgManager.getCurrentImageIndex();if(m>=0){o.OnRefreshUI(m)}if(e.isFunction(o.__OnPostLoad)){o.__OnPostLoad(t,s,l[2])}};b._OnPostTransfer=function(k){var l=this;e.log("On PostTransfer Results:"+k);i.autoDiscardBlankImage(l,"On PostTransfer");if(e.isFunction(l.__OnPostTransfer)){l.__OnPostTransfer()}};b._OnPostTransferAsync=function(k){var p=this;e.log("On PostTransfer Async Results:"+k);if(e.isFunction(p.__OnPostTransferAsync)){var n;if(k&&k.length>=2){try{var m=String(k[1]),l=m.replace(/\\/g,"\\\\");n=e.parse(l);if(n.imageId){n.imageId=p.objImageIndexManager.convertServerIdToGuid(n.imageId)}}catch(o){e.log(k)}}if(!n){n={imageId:-1}}p.__OnPostTransferAsync(n)}};b._OnPreAllTransfersAsync=function(l){var n=this;if(e.isFunction(n.__OnPreAllTransfersAsync)){var m={event:"beforeAcquire",result:{}};try{if(e.isArray(l)&&l.length>1){m=e.parse(l[1])}}catch(k){}setTimeout(function(){n.__OnPreAllTransfersAsync(m)},10)}};b._OnPostAllTransfers=function(l){var n=this,k,m;if(l.length>=2&&n._errorCode==0){n._errorCode=l[1];n._errorString=l[2]}e.log("On PostAllTransfers Results:"+l);n.__bLoadingImage=false;if(e.isFunction(n.__OnPostAllTransfers)){n.__OnPostAllTransfers()}};b._OnResult=function(k){var m=this,l=k[1];if(e.isFunction(m.__OnResult)){m.__OnResult(l)}};b._OnTransferCancelled=function(k){var n=this,l=n._ImgManager.getCurrentImageIndex(),m=n._ImgManager.count();n.__bLoadingImage=false;if(e.isFunction(n.__OnTransferCancelled)){n.__OnTransferCancelled()}};b._OnTransferError=function(k){var l=this;if(e.isFunction(l.__OnTransferError)){l.__OnTransferError()}};b._OnSourceUIClose=function(k){var l=this;if(e.isFunction(l.__OnSourceUIClose)){l.__OnSourceUIClose()}};b._OnPreTransfer=function(k){var l=this;if(e.isFunction(l.__OnPreTransfer)){l.__OnPreTransfer()}};b._OnPreAllTransfers=function(k){var l=this;if(e.isFunction(l.__OnPreAllTransfers)){l.__OnPreAllTransfers()}};b._OnPercentDone=function(u){var t=this,k=false,q,o=Dynamsoft.Lib,C=false,l,F=0,E,B,A,z;if(o.isArray(u)&&u.length>2){l=u[0];F=u[1];E=u[2];if(u.length>3){B=u[3]}if(u.length>4){A=u[4]}if(u.length>5){z=u[5]}q=F;if(F<0){q=0}else{if(F>100){q=100}}q=Math.floor(q);if(o.cancelFrome==1||o.cancelFrome==2||o.cancelFrome==5){C=A}}if(!t._bServerPercentDone){if(l!=0){return}}if(F>0||F==0){if(o.cancelFrome==1||o.cancelFrome==2){if(B=="http"){k=true}}if(o.cancelFrome==3||o.cancelFrome==4){if(A=="ftp"){k=true}}}if((o.cancelFrome==0&&t.__IfShowProgressBar==true)||(o.cancelFrome!=0&&t.__IfShowCancelDialogWhenImageTransfer==true)){var v=o.one(".dynamsoft-progressBar"),s=o.one(".dynamsoft-status"),y=o.one(".dynamsoft-finalMessage"),w=o.one(".dynamsoft-desc"),x;if(o.cancelFrome==3||o.cancelFrome==4){var n=B;if(n==0){i.setBtnCancelVisibleForProgress(t,false)}else{if(n==1){i.setBtnCancelVisibleForProgress(t,true)}}}if(F<0){o.progressMessage=E;x=o.progressMessage}else{if(E!=""&&E!="1/1"){x=o.progressMessage+"("+E+")"}else{x=o.progressMessage}}if(y&&y.getEL()){var p="",D="";if(x.indexOf(" ...")){x=x.replace(" ...","...")}if(x.indexOf("(")!=-1){p=x.substr(0,x.indexOf("("));D=x.substr(x.indexOf("("))}else{p=x}o.each(g,function(G,m){if(G.indexOf(p)!=-1){x=h.CustomizableDisplayInfo.customProgressText[m]+D}});if(x==""){x="&nbsp;"}y.html(x)}if(C!=false){if(C==""||o.isUndef(C)){C="&nbsp;"}else{if(o.isString(C)&&C.length>30){C=C.substring(0,30)+"..."}}w.html(C)}else{w.html("&nbsp;")}if(q||q===0){if(s&&s.getEL()){s.html(q+"%")}if(v&&v.getEL()){if(c.bIE){if(v[0].objProgressBar){v[0].objProgressBar.setValue(q)}else{v[0].value=q}}else{if(c.bEdge){v[0].style.display="";v[0].value=q}else{v[0].value=q}}}}if(q&&(q>=100||o.dlgRef<=0)){setTimeout(function(){if(v&&v.getEL()){if(c.bIE){if(v[0].objProgressBar){v[0].objProgressBar.setValue(0)}else{v[0].value=0}}else{if(c.bEdge){v[0].style.display="none";v[0].value=0}else{v[0].value=0}}}},1000);if(o.dlgRef<=0){var r="OnPercentDone";o.closeProgress(r)}}}if(k==true){if(o.isFunction(t.__OnInternetTransferPercentage)){t.__OnInternetTransferPercentage(q,false)}if(o.isFunction(t.__OnInternetTransferPercentageEx)){t.__OnInternetTransferPercentageEx(q,false)}}if(o.isFunction(t.__OnPercentDone)){t.__OnPercentDone()}};b._OnGetFilePath=function(l){var r=this,m,o,q,n,k;q=l[1].split(",");e.log("On GetFilePath Results:"+l);n=e.base64.decode(q[3]);k=e.base64.decode(q[4]);if(q[2]=="-1032"){q[2]="-1";n=k=""}if(e.isFunction(r.__OnGetFilePath)){r.__OnGetFilePath(q[0]*1,q[1]*1,q[2]*1,n,k)}};b.checkErrorString=function(){var m=this,l=m.ErrorCode;if(l===-2115){return true}if(l===-2003){var k=window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");k.document.writeln(m.__HTTPPostResponseString)}return(l===0)};b.__GetLoadEventsNum=function(){var l=this,k=0;if(e.isFunction(l.__OnPostLoad)){k=k|1}if(e.isFunction(l.__OnGetFilePath)){k=k|2}return k}});Dynamsoft.Ready(function(a,g){var b=Dynamsoft;if(!a.product.bHTML5Edition){return}var j=a.html5.STwain,c=j.prototype,f=a,i=a.html5.Funs,h=Dynamsoft.WebTwainEnv,e=!1,d=!0;c.SetCookie=function(k){this._cookie=k;document.cookie=k;return d};c.LoadImageFromBase64Binary=function(r,w,x,o){var u=this;u._resetErr();var n=e,l="LoadImageFromBase64Binary",t=w,v,q=0;if((a.isUndef(w)||w==5)&&a.isString(r)){if(r.indexOf("data:image/bmp")!=-1){t=0}else{if(r.indexOf("data:image/jpeg")!=-1){t=1}else{if(r.indexOf("data:image/tif")!=-1){t=2}else{if(r.indexOf("data:image/png")!=-1){t=3}else{if(r.indexOf("data:application/pdf")!=-1){t=4}}}}}}if(t<-1||t>5){t=-1}if(!a.License.checkProductKey(u,{Core:true})){if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString)}return e}if(!a.License.checkPDFProductKeyWhenNeeds(u,t)){if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString)}return e}if(u._isMobileMode()){a.cancelFrome=2;a.showProgress(u,l,d);u.__bLoadingImage=d;var p=r;if(f.isString(r)){if(r.indexOf("blob:")>=0||r.indexOf("data:")>=0){}else{var s;if(w==EnumDWT_ImageType.IT_PNG){s="data:image/png;base64,"}else{if(w==EnumDWT_ImageType.IT_JPG){s="data:image/jpeg;base64,"}else{if(w==EnumDWT_ImageType.IT_TIF){s="data:image/tif;base64,"}else{if(w==EnumDWT_ImageType.IT_PDF){s="data:application/pdf;base64,"}else{if(w==EnumDWT_ImageType.IT_BMP){s="data:image/bmp;base64,"}else{s="data:application/octet-stream;base64,"}}}}}r=[s,r].join("")}if(r.indexOf("data:")>=0){p=f.MobileFuns.dataURLtoBlob(r);if(p==false){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;a.Errors.ConvertFromBase64Failed(u);if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,w)}return false}}}else{if(r instanceof ArrayBuffer){var k="image/png";if(w==EnumDWT_ImageType.IT_PNG){k="image/png"}else{if(w==EnumDWT_ImageType.IT_JPG){k="image/jpeg"}else{if(w==EnumDWT_ImageType.IT_TIF){k="image/tiff"}else{if(w==EnumDWT_ImageType.IT_PDF){k="application/pdf"}else{if(w==EnumDWT_ImageType.IT_BMP){k="image/bmp"}}}}}p=new Blob([r],{type:k})}else{}}v=u._innerSendToMobile("LoadImageFromBinary",f.MobileFuns.makeParams(p),0,function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(!u._bNoUI){var m=u._ImgManager.getCurrentImageIndex();if(m>=0){u.OnRefreshUI(m)}}if(x){x(r,w)}return true},function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,w)}});return true}if(a.isFunction(x)){n=d}if(a.isString(r)){if(r.indexOf("base64,")!=-1){r=r.substr(r.indexOf("base64,")+7)}}q=u.__GetLoadEventsNum();if(n){if(i.isServerInvalid(u)){if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,w)}return e}a.cancelFrome=2;a.showProgress(u,l,d);u.__bLoadingImage=d;v=u._innerSend(l,i.makeParams(r,t,q),d,function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(!u._bNoUI){var m=u._ImgManager.getCurrentImageIndex();if(m>=0){u.OnRefreshUI(m)}}if(x){x(r,w)}return true},function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,w)}})}else{v=u.__innerLoadImageFun(l,i.makeParams(r,t,q))}return v};c.SaveSelectedImagesToBytes=function(l,k){a.Errors.HTML5NotSupport(this);return e};c.LoadImageFromBytes=function(m,k,l){a.Errors.HTML5NotSupport(this);return e};c.UnregisterEvent=function(k,n){var m=this;m._resetErr();var l=["__",k].join("");m[l]=null;return d};c.SetCancel=function(l,k){var m=this;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("SetCancel",k)}return this._innerSend("SetCancel",null,d,l,k)};c._asyncSetImageWidth=function(o,p,k,n){var r=this,m=function(){i.refreshImageAfterInvokeFun(r,o);if(a.isFunction(k)){setTimeout(k,30)}},q=function(){if(a.isFunction(n)){n(r.ErrorCode,r.ErrorString)}};var l=parseInt(o);return r._innerSendToMobile("SetImageWidth",f.MobileFuns.makeParams(l,p),0,m,q)};c.SetImageWidth=function(q,l,t,s){var n=this,k,o;n._resetErr();var p=parseInt(q);if(isNaN(p)||p<0||p>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}return false}if(a.isUndefined(l)){a.Errors.InvalidParameter(n);if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){return n._asyncSetImageWidth(p,l,t,s)}var m=n._ImgManager.convertClientIndexToServerId(p);if(m==-1){a.Errors.IndexOutOfRange(n);if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}return false}k=n._innerFun("SetImageWidth",i.makeParams(m,l));o=(k==1);if(o){if(a.isFunction(t)){t()}}else{if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}}return o};c.HTTPDownloadStreamThroughPost=function(l,k){a.Errors.HTML5NotSupport(this);return e};c.HTTPUploadStreamThroughPost=function(n,m,k,o,l){a.Errors.HTML5NotSupport(this);return e};c.HTTPUploadThroughPutDirectly=function(n,l,k,o,m){a.Errors.HTML5NotSupport(this);return false};c.SetCustomDSDataEx=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("SetCustomDSDataEx")}return this._innerFun("SetCustomDSDataEx",i.makeParams(k))};c.SetCustomDSData=function(k){var m=this;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("SetCustomDSData")}var l=i.replaceLocalFilename(k);return this._innerFun("SetCustomDSData",i.makeParams(l))};c.GetCustomDSDataEx=function(){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("GetCustomDSDataEx")}return k._innerFun("GetCustomDSDataEx")};c.GetCustomDSData=function(k){var m=this;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("GetCustomDSData")}var l=i.replaceLocalFilename(k);return m._innerFun("GetCustomDSData",i.makeParams(l))};c._asyncConvertToBW=function(o,k,n){var q=this,m=function(){i.refreshImageAfterInvokeFun(q,o);if(a.isFunction(k)){k()}},p=function(){if(a.isFunction(n)){n(q.ErrorCode,q.ErrorString)}};var l=parseInt(o);return q._innerSendToMobile("ConvertToBWScale",f.MobileFuns.makeParams(l),0,m,p)};c.ConvertToBW=function(o,k,n){var p=this;p._resetErr();if(!a.License.checkProductKey(p,{Core:true})){if(a.isFunction(n)){n(p.ErrorCode,p.ErrorString)}return false}var m=parseInt(o);if(isNaN(m)||m<0||m>=p._ImgManager.count()){a.Errors.IndexOutOfRange(p);if(a.isFunction(n)){n(p.ErrorCode,p.ErrorString)}return false}if(p._isMobileMode()){return p._asyncConvertToBW(m,k,n)}var l=p.ChangeBitDepth(o,1,true);if(l){if(a.isFunction(k)){k()}}else{if(a.isFunction(n)){n(p.ErrorCode,p.ErrorString)}}return l};c.LoadImageFromBinary=function(s,r,l){var o=this,k;if(!a.License.checkProductKey(o,{Core:true})){if(a.isFunction(l)){l(o.ErrorCode,o.ErrorString)}return false}if(!s||s==""){a.Errors.ParameterCannotEmpty(o);if(a.isFunction(l)){l(o.ErrorCode,o.ErrorString)}return false}if(s instanceof FileList){return o.LoadImageFromBinary(s[0],r,l)}if(window.ReadableStream&&s instanceof ReadableStream){k=new Response(s)}else{if(window.Response&&s instanceof Response){k=s}}if(o._bLocalService){if(k){k.arrayBuffer().then(function(z){var w=new Blob([z]);var y="",x=-1,v=true;o.__LoadImageFromBytes(w,x,y,v,r,l)})}else{var q=s;if(q instanceof ArrayBuffer||q instanceof Uint8Array){q=new Blob([s])}var p="",u=-1,n=true,m=Dynamsoft.EnumDWT_ImageType;if(a.isString(q.type)){if(q.type=="application/pdf"){u=m.IT_PDF}else{if(q.type=="image/png"){u=m.IT_PNG}else{if(q.type=="image/jpeg"){u=m.IT_JPG}else{if(q.type=="image/bmp"){u=m.IT_BMP}else{if(q.type=="image/tiff"){u=m.IT_TIF}}}}}}o.__LoadImageFromBytes(q,u,p,n,r,l)}}else{if(k){k.arrayBuffer().then(function(t){o._innerSendToMobile("LoadImageFromBinary",f.MobileFuns.makeParams(t),0,r,l)})}else{o._innerSendToMobile("LoadImageFromBinary",f.MobileFuns.makeParams(s),0,r,l)}}return true};c.EnableSourceUI=function(k,m){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("EnableSourceUI",m)}return l._innerSend("EnableSourceUI",null,true,k,m)};c.getCapabilities=function(k,m){var l=this;if(l._bLocalService){return l._innerFunRaw("GetCapabilities",null,true,false,false,function(n){var p;n[0]=f.replaceAll(n[0],"\\\\","\\\\");try{p=JSON.parse(n[0])}catch(o){l._errorCode=-2302;l._errorString=o;if(f.isFunction(m)){m(l.ErrorCode,l.ErrorString)}return}if(p.errorCode==0){if(f.isFunction(k)){k(p.response)}}else{l._errorCode=p.errorCode;l._errorString=p.errorString;if(f.isFunction(m)){m(l.ErrorCode,l.ErrorString)}}},m)}else{return l._mobileNotSupport("GetCapabilities",m)}return true};c.setCapabilities=function(l,n,p){var o=this;if(o._bLocalService){if(a.isObject(l)&&!a.isArray(l)){var k=["[",a.stringify(l),"]"].join(""),m=function(q){if(a.isFunction(n)){n(q)}};return o._innerSend("SetCapabilities",k,0,m,p)}else{a.Errors.InvalidParameter(o);if(a.isFunction(p)){p(o.ErrorCode,o.ErrorString)}return false}}else{return o._mobileNotSupport("SetCapabilities",p)}return true};c.BindViewer=function(k,m){var n=this,l=false;if(n.config.containerID!=k){n.config.containerID=k;n.config.ifBindViewer=true;a.html5.ui.init(n,n.config)}l=n._ImgManager.BindView(k,m);n._bNoUI=false;n.config.ifBindViewer=false;return l};c.UnbindViewer=function(){var k=this;k._bNoUI=true;k.config.containerID="";return k._ImgManager.UnbindView()};c.UpdateViewer=function(k){var l=this;return l._ImgManager.UpdateView(k)};c.GetIfShowVideoContainer=function(){var k=this;return k._ImgManager.GetIfShowVideoContainer()};c.ShowVideoContainer=function(k){var l=this;if(k){l._bNoUI=true}else{l._bNoUI=false}return l._ImgManager.ShowVideoContainer(k)};c.UpdateVideoContainer=function(k){var l=this;return l._ImgManager.UpdateVideoContainer(k)};c.ChangeBitDepth=function(n,m,p){var o=this,l;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("ChangeBitDepth")}l=parseInt(n);if(isNaN(l)||l<0||l>=o._ImgManager.count()){a.Errors.IndexOutOfRange(o);return false}var k=o._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(o);return false}return o._innerFun("ChangeBitDepth",i.makeParams(k,m,p))};c._asyncConvertToGrayScale=function(t,s,m){var o=this,q=function(){i.refreshImageAfterInvokeFun(o,t);if(a.isFunction(s)){setTimeout(s,30)}},l=function(){if(a.isFunction(m)){m(o.ErrorCode,o.ErrorString)}};if(!a.License.checkProductKey(o,{Core:true})){l();return false}var p=parseInt(t),k,n;return o._innerSendToMobile("ConvertToGrayScale",f.MobileFuns.makeParams(p),0,q,l)};c.ConvertToGrayScale=function(p,n,m){var s=this,o,q;s._resetErr();var l=parseInt(p);if(isNaN(l)||l<0||l>=s._ImgManager.count()){a.Errors.IndexOutOfRange(s);if(a.isFunction(m)){m(s.ErrorCode,s.ErrorString)}return false}if(s._isMobileMode()){return s._asyncConvertToGrayScale(l,n,m)}var k=s._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(s);if(a.isFunction(m)){m(s.ErrorCode,s.ErrorString)}return false}o=s._innerFun("ConvertToGrayScale",i.makeParams(k));q=(o==1);if(q){i.refreshImageAfterInvokeFun(s,l);if(a.isFunction(n)){n()}}else{if(a.isFunction(m)){m(s.ErrorCode,s.ErrorString)}}return q};c.ClearTiffCustomTag=function(){var k=this;k._resetErr();k._aryTiffTag.splice(0,k._aryTiffTag.length);if(k._isMobileMode()){return true}return k._innerFun("ClearTiffCustomTag")};c.SetTiffCustomTag=function(k,m,r){var p=this;p._resetErr();var o=a.replaceAll(m,'"','\\"'),t=k*1;if(t<=0||t>2147483647){a.Errors.InvalidTiffTagError(p);return false}var n=0,s,l=false,q=p._aryTiffTag.length;for(n=0;n<q;n++){s=p._aryTiffTag[n];if(s.tag==t){s.Content=m;s.isBinary=!r;l=true}}if(!l&&q>=32){a.Errors.TiffTagCountExceedError(p);return false}if(p._isMobileMode()){if(l){return true}p._aryTiffTag.push({tag:k,content:m,isBinary:!r});return true}return p._innerFun("SetTiffCustomTag",i.makeParams(t,o,r))};c.IsBlankImage=function(m){var n=this,l=parseInt(m);if(isNaN(l)||l<0||l>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);return false}var k=n._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(n);return false}return n._innerFun("IsBlankImage",i.makeParams(k,e))};c.IsBlankImageExpress=function(m){var n=this;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("IsBlankImageExpress")}var l=parseInt(m);if(isNaN(l)||l<0||l>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);return false}var k=n._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(n);return false}return n._innerFun("IsBlankImage",i.makeParams(k,d))};c.SetOpenSourceTimeout=function(k){var l=this;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("SetOpenSourceTimeout")}return l._innerFun("SetOpenSourceTimeout",i.makeParams(k))};c.GetImageURL=function(s,l,k,w,r){var q=this;q._resetErr();if(q._isMobileMode()){return q._mobileNotSupport("GetImageURL")}var t=s,u=parseInt(l),o=parseInt(k),v,m,n;if(w){v="";m="dwt://"}else{v=q.httpUrl;m="dwt/"}n=[v,m,a.product.getDWTPrefix(),a.product.getServerVersionInfo(),"/img?id=",q.clientId];if(a.isUndefined(t)||t===null){a.Errors.IndexNullOrUndefined(q);return""}if(!r){t=parseInt(t);if(isNaN(t)){a.Errors.InvalidIndex(q);return""}if(t<-1||t>=q._ImgManager.count()){a.Errors.IndexOutOfRange(q);return""}var p=q._ImgManager.convertClientIndexToServerId(t);if(p==-1){return""}n.push("&index=");n.push(p);if(u>0&&o>0){n.push("&width=");n.push(u);n.push("&height=");n.push(o)}}else{n.push("&index=-1&width=-1&height=-1&webcam=");n.push(r)}n.push("&t=");n.push(new Date().getTime());return n.join("")};c.GetImagePartURL=function(l,m,n){var o=this;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("GetImagePartURL")}var k=parseInt(l);if(isNaN(k)||k<0||k>=o._ImgManager.count()){a.Errors.IndexOutOfRange(o);return""}return this.GetImageURL(k,m,n,!0)};c.SetLanguage=function(l){var k=this;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("SetLanguage")}return k._innerFun("SetLanguageForSecurity",i.makeParams(l))};c._wasmGetLicenseInfo=function(m,l){var n=this,k=function(o){if(o){if(!o.exception){n.__licenseInfo=o;if(m){m(n.__licenseInfo)}}else{if(l){l(o.exception)}}}else{if(l){l()}}};return n._innerSendToMobile("GetLicenseInfo",f.MobileFuns.makeParams(),0,k,l)};c.GetLicenseInfo=function(m,l){var n=this,k;if(!n.__licenseInfo){if(n._isMobileMode()){return n._wasmGetLicenseInfo(m,l)}if(i.isHttpServerInvalid(n)){return e}n._innerFunRaw("GetLicenseInfo",null,d,e,d,function(o){if(o){if(!o.exception){n.__licenseInfo=o;if(m){m(n.__licenseInfo)}}else{if(l){l(o.exception)}}}else{if(l){l()}}},l)}return d};c.IndexToImageID=function(m){var n=this;n._resetErr();var l=parseInt(m);if(isNaN(l)||l<0||l>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);return -1}var k=n._ImgManager.convertClientIndexToServerId(l);return n.objImageIndexManager.convertServerIdToGuid(k)};c.ImageIDToIndex=function(m){var n=this,l,k;n._resetErr();l=n.objImageIndexManager.convertGuidToServerId(m);if(l>0){k=n._ImgManager.convertServerIdToClientIndex(l)}if(k==-1){a.Errors.InvalidImageID(n)}return k};c._setProductKeyV2=function(k){var o=this,n=k;o._resetErr();if(i.isHttpServerInvalid(o)){return a.Promise.reject({code:o._errorCode,message:o._errorString})}if(!a.isString(n)||n=="******"){a.Errors.LicenseEmptyOrInvalid(o);return a.Promise.reject({code:o._errorCode,message:o._errorString})}var m,l=Dynamsoft.WebTwainEnv.ProductKey;if(a.startsWith(n,"http://")||a.startsWith(n,"https://")){m=a.fetch(n,{method:"get"})}else{m=a.Promise.resolve(n)}m=m.then(function(p){return o._innerFunRawV2("ProductKey",i.makeParams(p))},function(q){a.Errors.HttpLicenseInvalid(o);var p;if(q){p=[o._errorString," Http info: ",q.errorString," (",q.httpCode,")"].join("")}else{p=o._errorString}Dynamsoft.WebTwainEnv.ProductKey=l;throw {code:o._errorCode,message:p}});m=m.then(function(p){if(p){if(p.exception!==undefined&&p.description!==undefined){o._errorCode=p.exception;o._errorString=p.description;Dynamsoft.WebTwainEnv.ProductKey=l;m.context=null;throw {code:o._errorCode,message:o._errorString}}Dynamsoft.WebTwainEnv.ProductKey=m.context.productKey;m.context=null;return o._innerFunRawV2("GetLicenseInfo")}else{a.Errors.LicenseEmptyOrInvalid(o);Dynamsoft.WebTwainEnv.ProductKey=l;m.context=null;throw {code:o._errorCode,message:o._errorString}}});m.context={productKey:n};return m};c.SetProductKeyAsync=function(k){var m=this;m._resetErr();if(a.isUndefined(k)){a.Errors.LicenseEmptyOrInvalid(m);return a.Promise.reject({code:m._errorCode,message:m._errorString})}var l;if(m._isMobileMode()){l=m._innerSendToMobileV2("GetLicenseInfo",f.MobileFuns.makeParams(k))}else{l=m._setProductKeyV2(k)}return l.then(function(n){var o=n;if(!o||o.message){a.Errors.LicenseEmptyOrInvalid(m);if(o&&o.message){m._errorString=o.message}throw {code:m._errorCode,message:m._errorString}}Dynamsoft.WebTwainEnv.ProductKey=k;m.__licenseInfo=o;return o})};c.GetVersionInfoAsync=function(){return this._innerFunV2("VersionInfo")}});Dynamsoft.Ready(function(a,h){var c=Dynamsoft;if(!a.product.bHTML5Edition){return}var g=Dynamsoft.navInfo,b=a.html5.Funs2={getImageUrl:function(n,p,m,q,r){var o=[n];if(a.isNumber(p)&&p<0){return""}if(p!==undefined&&p!==null){o.push("&index=");o.push(p)}o.push("&width=");o.push(m);o.push("&height=");o.push(q);o.push("&ticks=");if(r){o.push(r)}else{o.push(Date.now())}return o.join("")},getUrlByAct:function(n,p,m){var o=[n];if(p!==undefined&&p!==null){o.push("&index=");o.push(p)}if(m){o.push("&act=");o.push(m)}o.push("&ticks=");o.push(Date.now());return o.join("")},output:function(n,m){if(Dynamsoft.WebTwainEnv.Debug){a.log(m)}},print:function(w){var m,C=850,t=1120,B=0;var r=0,n=0,A="";if(a.product.bHTML5Edition){if(g.bIE){t=1160}if(g.bFirefox){t=1150}}for(B=0;B<w.length;B++){var q=t;var v=w[B];var y=v.Width;var o=v.Height;var s=v.Url;if(y<=0){y=C}if(o<=0){o=q}var x=C/y,u=q/o;if(x<u){q=parseInt(o*x)}else{if(x>u){C=parseInt(y*u)}}r+=y;n+=o;A=A+'<div style="width:850px;height:'+t+'px"><img id="D_img'+B+'" src="'+s+'" style="position:relative;left:0px;top:0px;width: '+C+"px;height: "+q+'px" /></div>'}var E,z=["alwaysRaised=yes,z-look=yes,top=0,left=0,toolbar=no,menubar=no,location=no,status=no,width=",r,",height=",n].join(""),D=window.open("about:blank","_blank",z);m='<html><body id="D_img">'+A+"</body></html>";if(D){D.document.write(m);D.document.close();D.focus();E=D.document.getElementById("D_img");if(E){E.onload=function(){D.print();a.log("print image...ok")}}else{a.log("cannot find image")}}}};var k=a.DOM,i=Dynamsoft.WebTwainEnv,j={getServerImageUrlPrefix:function(p){var n=p.httpUrl,m=false,o=[n,"dwt/",a.product.getDWTPrefix(),a.product.getServerVersionInfo(),"/img?id=",p.clientId];return o.join("")},output:function(m){if(Dynamsoft.WebTwainEnv.Debug){a.log(m)}}};function d(n,o){var p=this,m=-1;p._stwain=n;p.__SelectionImageBorderColor=8233678;p.__BackgroundColor=16777215;p.__BackgroundFillColor=16777215;p.__Ratio=0;p.bImageJustChangedInEditor=false;p.bImageChangedInViewer=false;p._Init(n,o)}var e=d.prototype;e._Init=function(m,n){var o=this;if(!m._ifBindViewer){n.mapModelImageControl={}}else{n.mapModelImageControl=o.getView().mapModelImageControl}n.onTopImageInTheViewChanged=function(p){if(Dynamsoft.Lib.isFunction(m.__OnTopImageInTheViewChanged)){m.__OnTopImageInTheViewChanged(p.index,p.bByScrollBar)}};n.onGetImageInfo=function(r){var p=-1,q=-1;p=o.GetImageWidth(r);return{width:p,height:q}};if(!o._UIView){o._UIView=new a.UI.ImageUIView(o,n)}else{o._UIView._Init(n)}};e.getUidByIndex=function(m){var n=this;return n.getWebViewer().GetUidByIndex(m)};e.getIndexByUid=function(m){var n=this;return n.getWebViewer().GetIndexByUid(m)};e.getCurrentImageIndex=function(){var m=this;return m.getWebViewer().GetCurrentIndex()};e.convertServerIdToClientIndex=function(n){var q=this,m=-1,p,o;o=q._UIView.GetDataImageControl(n);if(o){p=o.uuid}if(p){m=q.getWebViewer().GetIndexByUid(p)}return m};e.convertClientIndexToServerId=function(m){var o=this;var n=o.getWebViewer().GetCustomDataByIndex(m);if(n){return n.imageId}else{return -1}};e.getWebViewer=function(){var m=this;return m.getView()._WebViewer};e.getTwain=function(){var m=this;return m._stwain};e.getView=function(){var m=this;return m._UIView};e.OnReady=function(){var n=this,m=n.getView();m.BaseUrl=j.getServerImageUrlPrefix(n._stwain);return true};e.count=function(){var n=this,m=n.getView();return m.GetWebViewer().GetHowManyImagesInBuffer()};e.clear=function(){var n=this,m=n.getView();m.RemoveAllImages();if(m.GetWebViewer().bShowImageEdit){m.GetWebViewer().updateMode()}return true};e.unshift=function(p,o,m){var r=this,n=r.getView(),q;q=0;return r._updateUIAfterAdd(q,o,m)};e.append=function(n,p,r){var q=this,v=q.getView(),u,m,t,s;m=v.GetWebViewer().GetHowManyImagesInBuffer();t=v.GetWebViewer().GetCurrentIndex();for(var o=m-1;o>=n;o--){s=q.convertClientIndexToServerId(o);v.RemoveImage(o,s)}if(m<n){u=m;return q._updateUIAfterAdd(u,p,r,true)}else{if(t>=m-1){u=0}else{u=t+1}s=q.convertClientIndexToServerId(u);v.RemoveImage(u,s);if(u==n-1){return q._updateUIAfterAdd(u,p,r,true)}else{return q._updateUIAfterAdd(u,p,r,false)}}};e.exists=function(n){var o=this,m=o.getView();return m.exists(n)};e.insertBefore=function(p,r,o,m){var t=this,n=t.getView(),s=1*p,q;if(s<0||s>r){s=-1}q=n.GetWebViewer().GetHowManyImagesInBuffer();if(s>=q){s=q}return t._updateUIAfterAdd(s,o,m,false)};e.insert=function(p,r,o,m){var t=this,n=t.getView(),s=1*p,q;if(s<0||s>r){s=-1}q=n.GetWebViewer().GetHowManyImagesInBuffer();if(s>=q){s=q}return t._updateUIAfterAdd(s,o,m,false)};e._updateUIAfterAdd=function(r,p,m,q){var s=this,o=s.getView();if(p<0){return false}var n=o.AddImage(r,p,m,q);if(o.GetWebViewer().bShowImageEdit){o.GetWebViewer().updateMode()}return n};e.removeByServerId=function(n){var p=this,m=p.getView(),o;return p.remove(n)};e.remove=function(o){var q=this,n=q.getView();var p=q.convertServerIdToClientIndex(o);var m=n.RemoveImage(p,o);if(n.GetWebViewer().bShowImageEdit){n.GetWebViewer().updateMode()}return m};e.MoveImage=function(o,n){var p=this,m=p.getView();return m.MoveImage(o,n)};e.SwitchImage=function(o,n){var p=this,m=p.getView();return m.SwitchImage(o,n)};e.GetImageHeight=function(n){var q=this,r=n*1,s,u,t,o,p;u=q.getView();s=q.count();if(r<0||r>s){return 0}if(q._stwain._isMobileMode()){var m=u.GetMetaDataByIndex(r);return m.imageHeight}p=q.convertClientIndexToServerId(r);t=u.GetDataImageControl(p);if(t&&t.imageHeight){o=t.imageHeight}else{o=q._stwain.GetImageHeight(r)}return o};e.GetImageWidth=function(o){var q=this,r=o*1,s,u,t,n,p;u=q.getView();s=q.count();if(r<0||r>s){return 0}if(q._stwain._isMobileMode()){var m=u.GetMetaDataByIndex(r);return m.imageWidth}p=q.convertClientIndexToServerId(r);t=u.GetDataImageControl(p);if(t&&t.imageWidth){n=t.imageWidth}else{n=q._stwain.GetImageWidth(r)}return n};e.get=function(p){var r=this,q=parseInt(p),m,n,o;n=r.getView();m=r.count();if(q<0||q>m){return false}o=r.convertClientIndexToServerId(q);return n.GetDataImageControl(o)};e.refresh=function(n,o,m,q){var p=this,s=n*1,r;if(m){var t,v,u;v=p.getView();t=p.count();if(s<0||s>t){return false}r=p.convertClientIndexToServerId(s);v.SetDataImageControl(s,r,q)}return true};e.Go=function(o){var p=this,n=p.getView();var m=n.Go(o);return m};e.__Next=function(){var o=this,n=o.getView();var m=n.__Next();if(n.GetWebViewer().bShowImageEdit){n.GetWebViewer().updateMode()}return m};e.__Previous=function(){var o=this,n=o.getView();var m=n.__Previous();if(n.GetWebViewer().bShowImageEdit){n.GetWebViewer().updateMode()}return m};e.SetSelectedClientIndexArray=function(n){var o=this,m=o.getView();return m.SetSelectedindexes(n)};e.getSelectedClientIndexArray=function(){var n=this,m=n.getView();return m.GetSelectedindexes()};e.GetSelectedImageCount=function(){var n=this,m=n.getView();return m.GetSelectedImageCount()};e.SetSelectedImageCount=function(n){var o=this,m=o.getView();return m.SetSelectedImageCount(n)};e.SetSelectedImageIndex=function(o,n){var p=this,m=p.getView();return m.SetSelectedImageIndex(o,n)};e.GetZoom=function(){var n=this,m=n.getView();return m.GetZoom()};e.SetZoom=function(n){var o=this,m=o.getView();return m.SetZoom(n)};e.__GetPrintUrl=function(q,p,o){var r=this,m,n=r.getView();m=n.GetDataImageControl(p);if(m.imageWidth<=0){m.imageWidth=r.GetImageWidth(o)}if(m.imageHeight<=0){m.imageHeight=r.GetImageHeight(o)}return new a.UI.PrintUrl(q,m.imageWidth,m.imageHeight)};e.__GetPrintUrlforMobile=function(r,t,s){var q=this,o,n,u=q.getView();if(r==t){b.print(s);return true}var p=q.convertClientIndexToServerId(r);if(p!=-1){var m=q.getWebViewer().GetUidByIndex(r);q.getWebViewer().GetImageData(m).then(function(v){if(v.originalData instanceof ArrayBuffer){o=URL.createObjectURL(new Blob([v.originalData]))}else{o=v.originalData}n=q.__GetPrintUrl(o,p,r);s.push(n);q.__GetPrintUrlforMobile(r+1,t,s)})}};e.Print=function(){var s=this,m=s.getView();if(s.count()<=0){return}var p,o,n,q,r=[];if(s._stwain._isMobileMode()){s.__GetPrintUrlforMobile(0,s.count(),r)}else{for(p=0;p<s.count();p++){n=s.convertClientIndexToServerId(p);if(n!=-1){o=b.getImageUrl(m.BaseUrl,n,-1,-1);q=s.__GetPrintUrl(o,n,p);r.push(q)}}b.print(r)}return true};e._isNoUI=function(){var m=this;return m._stwain._bNoUI};e.ChangeSize=function(n,o){var p=this,m=p.getView();return m.ChangeImageViewSize(n,o)};e.SetViewMode=function(o,n){var p=this,m;if(p._isNoUI()){return p._nouiNotSupport("SetViewMode")}m=p.getView();return m.SetViewMode(o,n)};e.ShowImageEditorEx=function(A,w,q,p,t,n,v,z){var u=this;if(u._isNoUI()){return u._nouiNotSupport("ShowImageEditorEx")}switch(t){case 0:break;case 1:break;case 2:break;case 3:if(u.getWebViewer().bShowImageEdit){u.getWebViewer().OnClose();return true}break;case 4:break}var r,D,C=document,o,m,B,E;E=u.getView();if(u.getTwain()._containerID==v){n=false;j.output("warning: cannot use the same DIV for the main viewer and the editor viewer.")}for(var s=0;s<Dynamsoft.WebTwainEnv.DynamicContainers.length;s++){if(Dynamsoft.WebTwainEnv.DynamicContainers[s]==v){n=false;j.output("warning: cannot use an DIV which is already consumed by the method CreateDWTObject.");break}}if(n&&v){m=C.getElementById(v);if(m&&m.nodeName=="DIV"){m=v}else{if(m&&m.nodeName!="DIV"){j.output("warning: cannot create the editor viewer in a non-DIV element.")}n=false;m=C.createElement("div");C.body.appendChild(m);document.body.insertBefore(m,document.body.firstElementChild)}}else{m=C.createElement("div");C.body.appendChild(m);document.body.insertBefore(m,document.body.firstElementChild)}E.GetWebViewer().ShowImageEditor(m,n,q,p)};e.SetSelectionRectAspectRatio=function(o){var r=this,p=o,m,q,n;r.__Ratio=p;if(r._isNoUI()){return true}n=r.getView();return n.SetSelectionRectAspectRatio(p)};e.GetSelectionRectAspectRatio=function(){return this.__Ratio};e.GetSelectionImageBorderColor=function(){return this.__SelectionImageBorderColor};e.SetSelectionImageBorderColor=function(n){var p=this,o=n,m;if(p._isNoUI()){return true}m=p.getView();p.__SelectionImageBorderColor=o;if(Dynamsoft.Lib.isNumber(o)){o=Dynamsoft.Lib.getColor(o)}return m.SetSelectionImageBorderColor(o)};e.GetBackgroundColor=function(){return this.__BackgroundColor};e.SetBackgroundColor=function(o,r){var s=this,p=o,m,q,n;s.__BackgroundColor=p;if(s._isNoUI()){return true}n=s.getView();if(Dynamsoft.Lib.isNumber(p)){p=Dynamsoft.Lib.getColor(p)}m=a.one("#"+s._stwain._containerID);if(m){q=a.one(".dynamsoft-dwt-container-box",m);if(q){q.style("background-color",p)}}if(r){return n.SetBackgroundColor(p,true)}else{return n.SetBackgroundColor(p)}};e.GetAllowMultiSelect=function(){var n=this,m=n.getView();if(n._isNoUI()){return false}return m.GetAllowMultiSelect()};e.SetAllowMultiSelect=function(n){var o=this,m=o.getView();if(o._isNoUI()){return true}return m.SetAllowMultiSelect(n)};e.GetFitWindowType=function(){var n=this,m=n.getView();if(n._isNoUI()){return 0}return m.GetFitWindowType()};e.SetFitWindowType=function(n){var o=this,m=o.getView();if(o._isNoUI()){return true}return m.SetFitWindowType(n)};e.GetIfFitWindow=function(){var n=this,m=n.getView();if(n._isNoUI()){return true}return m.GetIfFitWindow()};e.SetIfFitWindow=function(n){var o=this,m=o.getView();if(o._isNoUI()){return true}return m.SetIfFitWindow(n)};e.GetImageMargin=function(){var n=this,m=n.getView();if(n._isNoUI()){return 0}return m.GetImageMargin()};e.SetImageMargin=function(n){var o=this,m=o.getView();if(o._isNoUI()){return true}return m.SetImageMargin(n)};e.GetMouseShape=function(){var n=this,m=n.getView();if(n._isNoUI()){return 0}return m.GetMouseShape()};e.SetMouseShape=function(n){var o=this,m=o.getView();if(o._isNoUI()){return true}return m.SetMouseShape(n)};e.GetShowPageNumber=function(){var n=this,m=n.getView();if(n._isNoUI()){return false}return m.GetShowPageNumber()};e.SetShowPageNumber=function(n){var o=this,m=o.getView();if(o._isNoUI()){return true}return m.SetShowPageNumber(n)};e.GetIfAutoScroll=function(){var n=this,m=n.getView();if(n._isNoUI()){return false}return m.GetIfAutoScroll()};e.SetIfAutoScroll=function(n){var o=this,m=o.getView();if(o._isNoUI()){return true}return m.SetIfAutoScroll(n)};e.OverlayRectangle=function(u,n,q,s,m,o,r){var p=this;if(p._isNoUI()){return true}var t=p.getView();return t.OverlayRectangle(u,n,q,s,m,o,r)};e.SetSelectedImageArea=function(p,r,q,o,n){var s=this,m=s.getView();if(p!=m.GetWebViewer().GetCurrentIndex()){return false}if(s._isNoUI()){return true}return m.SetSelectedImageArea(r,q,o,n)};e.ShowImagesByFilter=function(n,p,o){var q=this,m=q.getView();return m.FilterImagesByTag(n,p,o)};e.GetServerIdListByTag=function(n){var o=this,m=o.getView();return m.GetServerIdListByTag(n)};e.GetAllServerIdList=function(){var o=this,m=o.getView();var n=o.GetCurrentTag();return m.GetServerIdListByTag(n)};e.RemoveImageTag=function(n){var o=this,m=o.getView();return m.RemoveImageTag(n)};e.SetDefaultTag=function(n){var o=this,m=o.getView();return m.SetDefaultTag(n)};e.AddImageTag=function(o,n){var p=this,m=p.getView();return m.AddImageTag(o,n)};e.GetCurrentTag=function(){var n=this,m=n.getView();return m.GetCurrentTag()};e.BindView=function(m,p){var r=this,n=r.getView(),q=m,o;if(a.isDOMInBody(q)){o=q;if(!o.id||o.id==""){o.id=["dwt_",a.getRandom()].join("")}q=o.id}return n.BindView(q,p)};e.UnbindView=function(){var n=this,m=n.getView();return m.UnbindView()};e.UpdateView=function(n){var o=this,m=o.getView();return m.UpdateView(n)};e.GetIfShowVideoContainer=function(){var n=this,m=n.getView();return m.GetIfShowVideoContainer()};e.ShowVideoContainer=function(n){var o=this,m=o.getView();return m.ShowVideoContainer(n)};e.UpdateVideoContainer=function(n){var o=this,m=o.getView();return m.UpdateVideoContainer(n)};e.GetImageData=function(o){var p=this,m=p.getView();var n=p.convertServerIdToClientIndex(o);if(n>=0){return m.GetImageData(p.getUidByIndex(n))}return NaN};e.Rotate=function(n,o){var p=this,m=p.getView();return m.Rotate(n,o)};e.Mirror=function(n){var o=this,m=o.getView();return m.Mirror(n)};e.Flip=function(n){var o=this,m=o.getView();return m.Flip(n)};e.Crop=function(o,r,q,p,n){var s=this,m=s.getView();return m.Crop(o,r,q,p,n)};e.RegistLoadCallback=function(o){var n=this,m=n.getView();return m.RegistLoadCallback(o)};function f(){var m=this;m.bIsDirty=false;m.imageWidth=0;m.imageHeight=0;m.iImageControlWidth=0;m.iImageControlHeight=0;m.imageUrl="";m.minImageUrl="";m.uuid=-1;m.serverId=-1;m.aryOverlayRectangleData=[];m.ticks=Date.now()}f.prototype.Clear=function(){var m=this;m.imageUrl="";m.minImageUrl="";m.serverId=-1;m.aryOverlayRectangleData=[]};function l(n,m,o){var p=this;p.Url=n;p.Width=m;p.Height=o}a.UI=a.UI||{};a.UI.ImageManager=d;a.UI.ModelImageControl=f;a.UI.PrintUrl=l});Dynamsoft.Ready(function(d,b){var a=Dynamsoft;if(!d.product.bHTML5Edition){return}var g=d.html5.STwain,h=d.html5.Funs,e=Dynamsoft.WebTwainEnv;var f={TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14};var c=function(j,l){if(d.isUndef(j)||d.isUndef(l)||null==j||null==l){return}for(var k in l){if(j.hasOwnProperty(k)){if(typeof(j[k])==="object"){c(j[k],l[k])}}else{j[k]=l[k]}}return j};g.prototype.checkStartScanParams=function(i,j){var k=this;if(!i){d.Errors.ScanUploader_InvalidScanSetup(k);return false}if((!d.isUndefined(j.transferMode))&&i.transferMode!=0&&i.transferMode!=1&&i.transferMode!=2){d.Errors.ScanUploader_InvalidTransferMode(k);return false}if(i.transferMode==EnumDWT_TransferMode.TWSX_FILE){if(!i.fileXfer){d.Errors.ScanUploader_InvalidFileXfer(k);return false}if(!d.isString(i.fileXfer.fileName)||i.fileXfer.fileName==""){d.Errors.ScanUploader_InvalidFileXferFilename(k);return false}if(!d.isNumber(i.fileXfer.fileFormat)||i.fileXfer.fileFormat<0||i.fileXfer.fileFormat>16){d.Errors.ScanUploader_InvalidFileXferFileFormat(k);return false}}if(j){if(!d.isString(j.type)||j.type==""){d.Errors.ScanUploader_InvalidHttpType(k);return false}if(!j.httpParams){d.Errors.ScanUploader_InvalidHttpParams(k);return false}if(i.transferMode!=EnumDWT_TransferMode.TWSX_FILE&&d.isUndefined(j.format)){d.Errors.ScanUploader_InvalidOutputFormat(k);return false}if(!d.isString(j.httpParams.url)||j.httpParams.url==""){d.Errors.ScanUploader_InvalidHttpUrl(k);return false}if(!d.isString(j.httpParams.fileName)||j.httpParams.fileName==""){d.Errors.ScanUploader_InvalidHttpFilename(k);return false}}return true};g.prototype.startScan=function(K){var m=this;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("startScan")}var H=false,P=false,p=true,A=true,B=true,V=false,T=K.onFinally,S=[],x=[],l=0,o=1,y=[],R,s,u,q={type:"http",format:EnumDWT_ImageType.IT_PDF,reTries:3,useUploader:false,singlePost:true,showProgressBar:true,removeAfterOutput:true,httpParams:{url:"",headers:{},formFields:{},remoteName:"RemoteFile",fileName:""}},z=d.clone(K),t=K;u=z.funcScanStatus;delete z.funcScanStatus;if(d.isFunction(u)){z.bfuncScanStatus=true}else{z.bfuncScanStatus=false}if(z.outputSetup){var I={pdfSetup:{},tiffSetup:{}};c(z.outputSetup,q);s=z.outputSetup;delete z.outputSetup;if(s.pdfSetup){if(s.format==EnumDWT_ImageType.IT_MULTIPAGE_PDF||s.format==EnumDWT_ImageType.IT_PDF){d.mix(I.pdfSetup,s.pdfSetup)}}if(s.tiffSetup){if(s.format==EnumDWT_ImageType.IT_MULTIPAGE_TIF||s.format==EnumDWT_ImageType.IT_TIF){d.mix(I.tiffSetup,s.tiffSetup)}}if(s.format==EnumDWT_ImageType.IT_MULTIPAGE_PDF||s.format==EnumDWT_ImageType.IT_MULTIPAGE_TIF){s.singlePost=true}if(d.isNumber(s.httpParams.threads)){o=s.httpParams.threads}H=d.stringify(I);P=m.checkStartScanParams(z,s)}else{s=q;s.type="";P=m.checkStartScanParams(z,false)}if(!P){return new d.Promise(function(Z,Y){if(p){var X={code:m.ErrorCode,message:m.ErrorString,response:""};Y(X);p=false}})}if(s.funcHttpUploadStatus){V=s.funcHttpUploadStatus}var M=m.HttpFieldNameOfUploadedImage,k=m.MaxUploadImageSize,C=m.IfShowProgressBar,j=m.__IfShowCancelDialogWhenImageTransfer,v=m.__OnPostTransferAsync,D=m.__OnPostAllTransfers,E=m.__OnHttpUploadStatus,W=m.__insertingIndex,N=m.__IfAppendImage,w=false,F=s.showProgressBar,r=function(Y){var X=true;d.each(y,function(aa,Z){if(aa.st==-1){X=false}});if(!X){setTimeout(function(){r(Y)},200);return}U(Y)},U=function(X){X.__OnPostTransferAsync=v;X.__OnPostAllTransfers=D;X.__OnHttpUploadStatus=E;X.HttpFieldNameOfUploadedImage=M;X.__maxUploadImageSize=k;X.IfShowProgressBar=C;X.__IfShowCancelDialogWhenImageTransfer=j;X.__insertingIndex=W;X.__IfAppendImage=N;X.httpFormFields={};X.__OnCancel=false;if(Dynamsoft.FileUploader){Dynamsoft.FileUploader.nextLoopTime=600}},L=function(Z,Y,X){if(!A){setTimeout(function(){L(Z,Y,X)},200);return}Y(X);r(Z)},Q=function(Y,X){w=true;if(p){p=false;if(!A){m._innerSendCmd("CancelAllPendingTransfers")}L(m,Y,X)}},i=function(ac,ad,aa,ab){if(d.isFunction(V)){var Y=ad,Z=0,X;if(d.isNumber(ab)&&ab>0){Z=ab}X={fileName:Y,percentage:aa,statusCode:Z,responseString:ac.__HTTPPostResponseString};setTimeout(function(){V(X)},10)}};m.__OnCancel=false;m._resetErr();m.__HTTPPostResponseString="";m.IfShowProgressBar=F;m.__IfShowCancelDialogWhenImageTransfer=F;if(d.isNumber(z.insertingIndex)&&z.insertingIndex>-1){m.__insertingIndex=z.insertingIndex;m.__IfAppendImage=false}if(d.isFunction(V)){m.__OnHttpUploadStatus=V}else{m.__OnHttpUploadStatus=false}if(s.useUploader){if(!Dynamsoft.FileUploader){var J=new d.Promise(function(Z,Y){d.Errors.Uploader_ModuleError(m);var X={code:m.ErrorCode,message:m.ErrorString,response:""};A=true;Q(Y,X)});return J}}R=s.reTries;if(s.useUploader){var G=s.httpParams.url;if(!d.startsWith(G,"http://")&&!d.startsWith(G,"https://")){var O=window.location.href,n=O.lastIndexOf("/");O=O.substring(0,n+1);s.httpParams.url=O+G}}else{d.each(s.httpParams.headers,function(X,Y){m.SetHTTPHeader(Y,X)});d.each(s.httpParams.formFields,function(X,Y){m.SetHTTPFormField(Y,X)})}if(s.httpParams.remoteName!==""){m.HttpFieldNameOfUploadedImage=s.httpParams.remoteName}var J=new d.Promise(function(Y,X){if(s.useUploader){Dynamsoft.FileUploader.Init(0,function(Z){Y({uploadManager:Z})},function(aa,Z){m._errorCode=aa;m._errorString=Z;var ab={code:aa,message:Z,response:m.__HTTPPostResponseString};A=true;Q(X,ab)})}else{Y({})}});m._resetErr();return J.then(function(X){return new d.Promise(function(aa,Z){var ab=function(){var ac=false;if(z.transferMode==EnumDWT_TransferMode.TWSX_FILE){ac=(l==x.length)}else{ac=(l==S.length)}if(ac){d.closeProgress("Scan Upload");w=true;aa(t);U(m)}else{setTimeout(ab,100)}};if(u&&d.isFunction(u)){m.__OnPreAllTransfersAsync=function(ac){u(ac)}}m.RegisterEvent("OnPostTransferAsync",function(ax){var ak,ap=s.httpParams.url,am=m.objImageIndexManager.convertGuidToServerId(ax.imageId),ao=s.singlePost,ar=z.transferMode==EnumDWT_TransferMode.TWSX_FILE,ad=s.removeAfterOutput,ac=0,ai,at;if(B){A=false;B=false}if(ar){ac=x.length;x.push(ax.path)}else{ac=S.length;S.push(am)}if(u&&d.isFunction(u)){var aq={event:"postTransfer",bScanCompleted:false,result:{currentPageNum:ac+1}};setTimeout(function(){u(aq)},10)}if(w){return false}if(s.type=="http"){ai=h.cformat(s.httpParams.fileName,ac+1);at=h.cformat(s.httpParams.remoteName,ac+1);if(!ao&&s.type=="http"){var aj,au;if(d.isNumber(s.httpParams.maxSizeLimit)){m.__maxUploadImageSize=s.httpParams.maxSizeLimit}if(s.useUploader){if(F){Dynamsoft.FileUploader.nextLoopTime=300;d.showProgress(m,"Scan Upload",true)}aj=function(az,ay){m.__HTTPPostResponseString=ay;i(m,az._fileName,100,200);m._OnPercentDone([0,100,"","http",az._fileName]);if(F){d.closeProgress("Scan Upload")}if(!ar&&s.removeAfterOutput){setTimeout(function(){var aA=m._ImgManager.convertServerIdToClientIndex(am);if(aA>-1){m._removeImageById(am,function(){l++},function(){l++})}else{l++}},100)}else{l++}return true};var al,ah,ae=X.uploadManager;al=function(){if(F){var aA=0,ay;if(ar){aA=x.length}else{aA=S.length}for(ay=0;ay<aA;ay++){d.closeProgress("Scan Upload")}}if(!ar&&s.removeAfterOutput){setTimeout(function(){var aB=m._ImgManager.convertServerIdToClientIndex(am);if(aB>-1){m._removeImageById(am)}},100)}ae.CancelAllUpload();var az={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};Q(Z,az);return false};au=function(aC,ay,aB,az){var aA=303;if(ay==f.TRANS_SERVICE_ERROR_404){aA=404}else{if(ay==f.TRANS_SERVICE_ERROR_500){aA=500}else{if(ay==f.TRANS_SERVICE_ERROR_503){aA=503}}}m._errorCode=ay;m._errorString=aB;m.__HTTPPostResponseString=az;i(m,ai,100,aA);al()};m.__OnCancel=function(){au(null,-1032,"User cancelled the operation.","")};ah=function(){m.__HTTPPostResponseString="";i(m,ai,100,303);al()};if(ar){var an=ae.CreateJob(),af=an.FormField;d.each(s.httpParams.headers,function(ay,az){an.HttpHeader[az]=ay});d.each(s.httpParams.formFields,function(ay,az){af.Add(az,ay)});an.ServerUrl=ap;an.bDeleteFile=ad;an.reTries=R;if(d.isNumber(s.httpParams.maxSizeLimit)){an.maxSizeLimit=s.httpParams.maxSizeLimit}an._fileName=ai;an.SourceValue.Add(ax.path,ai,at);an.ImageType=z.fileXfer.fileFormat;an.ThreadNum=o;an.OnRunSuccess=aj;an.OnRunFailure=au;if(F||d.isFunction(V)){an.OnUploadTransferPercentage=function(ay,az){if(az>0&&az<=100){if(az==100){az=99}if(F){m._OnPercentDone([0,az,"","http",ay._fileName])}if(d.isFunction(V)){i(m,ay._fileName,az,0)}}};d.cancelFrome=5;if(F){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",ai])}i(m,ai,0,0)}ae.Run(an)}else{ak=s.format;if(ak==EnumDWT_ImageType.IT_MULTIPAGE_PDF){ak=EnumDWT_ImageType.IT_PDF}else{if(ak==EnumDWT_ImageType.IT_MULTIPAGE_TIF){ak=EnumDWT_ImageType.IT_TIF}}if(F){d.cancelFrome=5;m._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http",ai])}m._asyncGenerateURLForUploadData([am],ak,H,function(aA){var az=ae.CreateJob(),ay=az.FormField;d.each(s.httpParams.headers,function(aB,aC){az.HttpHeader[aC]=aB});d.each(s.httpParams.formFields,function(aB,aC){ay.Add(aC,aB)});az.ServerUrl=ap;az.bDeleteFile=ad;az.reTries=R;if(d.isNumber(s.httpParams.maxSizeLimit)){az.maxSizeLimit=s.httpParams.maxSizeLimit}az._fileName=ai;az.SourceValue.Add(aA,ai,at);az.ImageType=ak;az.ThreadNum=o;az.OnRunSuccess=aj;az.OnRunFailure=au;if(F||d.isFunction(V)){az.OnUploadTransferPercentage=function(aB,aC){if(aC>0&&aC<=100){if(aC==100){aC=99}if(F){m._OnPercentDone([0,aC,"","http",aB._fileName])}if(d.isFunction(V)){i(m,aB._fileName,aC,0)}}};d.cancelFrome=5;if(F){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",ai])}i(m,ai,0,0)}ae.Run(az)},ah)}}else{var ag={id:am,st:-1,bCancel:false};y.push(ag);if(ac==0){d.showProgress(m,"Scan Upload",true)}if(ar){aj=function(ay){ag.st=0;if(!ar&&s.removeAfterOutput){setTimeout(function(){var az=m._ImgManager.convertServerIdToClientIndex(am);if(az>-1){m._removeImageById(am,function(){l++},function(){l++})}else{l++}},100)}else{l++}return true};au=function(){if(!ar&&s.removeAfterOutput){setTimeout(function(){var az=m._ImgManager.convertServerIdToClientIndex(am);if(az>-1){m._removeImageById(am)}},100)}var ay={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};d.closeProgress("Scan Upload");if(ag.st==2){return false}ag.st=1;d.each(y,function(aA,az){if(aA.st==-1){aA.bCancel=true}});Q(Z,ay);return false};m._innerUploadDirectly(ap,ax.path,ai,F,ad,R,false,ag,aj,au)}else{aj=function(az,ay){ag.st=0;if(!ar&&s.removeAfterOutput){setTimeout(function(){var aA=m._ImgManager.convertServerIdToClientIndex(am);if(aA>-1){m._removeImageById(am,function(){l++},function(){l++})}else{l++}},100)}else{l++}return true};au=function(az){if(!ar&&s.removeAfterOutput){setTimeout(function(){var aA=m._ImgManager.convertServerIdToClientIndex(am);if(aA>-1){m._removeImageById(am)}},100)}var ay={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};d.closeProgress("Scan Upload");if(ag.st==2){return false}ag.st=1;d.each(y,function(aB,aA){if(aB.st==-1){aB.bCancel=true}});Q(Z,ay);return false};ak=s.format;if(d.isUndefined(ak)){var av=m._ImgManager.convertServerIdToClientIndex(am);d.Errors.InvalidImageType(m);au([av]);return false}if(ak==EnumDWT_ImageType.IT_MULTIPAGE_PDF){ak=EnumDWT_ImageType.IT_PDF}else{if(ak==EnumDWT_ImageType.IT_MULTIPAGE_TIF){ak=EnumDWT_ImageType.IT_TIF}}var aw={bOnlyUploadForm:false,method:"startScan",_this:m,url:ap,serverIds:[am],enumImageType:ak,saveSetup:H,fileName:ai,dataFormat:EnumDWT_UploadDataFormat.Binary,retry:R,bOnlyEmptyIsOK:false,objUploadFileStatus:ag,asyncSuccessFunc:aj,asyncFailureFunc:au};d._asyncUploadCmd(aw)}}}else{if(!ao&&s.type=="ftp"){}}}});m.__OnPostAllTransfers=function(){var an,aC=EnumDWT_UploadDataFormat.Binary,aq=s.httpParams.url,ap=s.singlePost,au=z.transferMode==EnumDWT_TransferMode.TWSX_FILE,ae=s.removeAfterOutput;if(u&&d.isFunction(u)){var ad,at;if(au){ad=x.length}else{ad=S.length}at={event:"postTransfer",bScanCompleted:true,result:{currentPageNum:ad}};setTimeout(function(){u(at)},10)}if(ad==0){d.Errors.SourceHasNothingToCapture(m);setTimeout(function(){A=true;if(T&&d.isFunction(T)){T()}var aD={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};Q(Z,aD)},1000);return}if(ad>0&&m.ErrorCode==-1029){m._errorCode=0}else{if(m.ErrorCode!=0){A=true;if(T&&d.isFunction(T)){T()}var ar={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};Q(Z,ar);return}}if(s.type=="http"){if(ap&&s.type=="http"){var al,az,aw,ac=S,ak=[];if(d.isNumber(s.httpParams.maxSizeLimit)){m.__maxUploadImageSize=s.httpParams.maxSizeLimit}if(s.useUploader){var af=X.uploadManager,ao=af.CreateJob(),ag=ao.FormField;if(F){Dynamsoft.FileUploader.nextLoopTime=300;d.showProgress(m,"Scan Upload",true)}al=function(aF,aD){var aE=aF._fileName;if(!aE){aE=""}m._bServerPercentDone=true;m.__HTTPPostResponseString=aD;i(m,aE,100,200);m._OnPercentDone([0,100,"","http"]);if(F){d.closeProgress("Scan Upload")}if(!au&&s.removeAfterOutput){setTimeout(function(){l=0;d.each(ac,function(aG){var aH=m._ImgManager.convertServerIdToClientIndex(aG);if(aH>-1){m._removeImageById(aG,function(){l++},function(){l++})}else{l++}});setTimeout(ab,100)},100)}else{w=true;aa(t);U(m)}return true};var am,aj;am=function(){m._OnPercentDone([0,100,"","http"]);if(F){d.closeProgress("Scan Upload")}m._bServerPercentDone=true;var aD={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};Q(Z,aD);if(!au&&s.removeAfterOutput){setTimeout(function(){d.each(ac,function(aE){var aF=m._ImgManager.convertServerIdToClientIndex(aE);if(aF>-1){m._removeImageById(aE)}})},100)}return false};az=function(aH,aD,aG,aE){var aF=303;if(aD==f.TRANS_SERVICE_ERROR_404){aF=404}else{if(aD==f.TRANS_SERVICE_ERROR_500){aF=500}else{if(aD==f.TRANS_SERVICE_ERROR_503){aF=503}}}m._errorCode=aD;m._errorString=aG;m.__HTTPPostResponseString=aE;i(m,"",100,aF);am()};m.__OnCancel=function(){az(null,-1032,"User cancelled the operation.","")};aj=function(){m.__HTTPPostResponseString="";i(m,"",100,303);am()};if(au){d.each(s.httpParams.headers,function(aD,aE){ao.HttpHeader[aE]=aD});d.each(s.httpParams.formFields,function(aD,aE){ag.Add(aE,aD)});ao.ServerUrl=aq;ao.bDeleteFile=ae;ao.reTries=R;if(d.isNumber(s.httpParams.maxSizeLimit)){ao.maxSizeLimit=s.httpParams.maxSizeLimit}d.each(x,function(aG,aE){var aD=h.cformat(s.httpParams.fileName,aE+1),aF=h.cformat(s.httpParams.remoteName,aE+1);ao.SourceValue.Add(aG,aD,aF)});ao.ImageType=z.fileXfer.fileFormat;ao.ThreadNum=o;ao.OnRunSuccess=al;ao.OnRunFailure=az;if(F||d.isFunction(V)){ao.OnUploadTransferPercentage=function(aD,aE){if(aE>0&&aE<=100){if(aE==100){aE=99}if(F){m._OnPercentDone([0,aE,"","http"])}if(d.isFunction(V)){if(aE>99){aE=99}i(m,"",aE,0)}}};if(F){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"])}i(m,"",0,0)}af.Run(ao)}else{an=s.format;if(an==EnumDWT_ImageType.IT_MULTIPAGE_PDF||an==EnumDWT_ImageType.IT_MULTIPAGE_TIF){if(an==EnumDWT_ImageType.IT_MULTIPAGE_PDF){an=EnumDWT_ImageType.IT_PDF}else{if(an==EnumDWT_ImageType.IT_MULTIPAGE_TIF){an=EnumDWT_ImageType.IT_TIF}}if(F){m._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"])}m._asyncGenerateURLForUploadData(ac,an,H,function(aF){d.each(s.httpParams.headers,function(aG,aH){ao.HttpHeader[aH]=aG});d.each(s.httpParams.formFields,function(aG,aH){ag.Add(aH,aG)});ao.ServerUrl=aq;ao.bDeleteFile=ae;ao.reTries=R;if(d.isNumber(s.httpParams.maxSizeLimit)){ao.maxSizeLimit=s.httpParams.maxSizeLimit}var aD=h.cformat(s.httpParams.fileName,1),aE=h.cformat(s.httpParams.remoteName,1);ao._fileName=aD;ao.SourceValue.Add(aF,aD,aE);ao.ImageType=an;ao.ThreadNum=o;ao.OnRunSuccess=al;ao.OnRunFailure=az;if(F||d.isFunction(V)){ao.OnUploadTransferPercentage=function(aG,aH){if(aH>0&&aH<=100){if(aH==100){aH=99}if(F){m._OnPercentDone([0,aH,"","http",aD])}if(d.isFunction(V)){i(m,aD,aH,0)}}};d.cancelFrome=5;if(F){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",aD])}}af.Run(ao)},aj)}else{var ay=ac.length,ax=0,ai=0,aB="";if(F){m._bServerPercentDone=false;m._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"])}d.each(ac,function(aG,aE){var aD=h.cformat(s.httpParams.fileName,aE+1),aF=h.cformat(s.httpParams.remoteName,aE+1);m._asyncGenerateURLForUploadData([aG],an,H,function(aH){ai=((ax+1)/ay)*100;aB=[(ax+1),"/",ay].join("");m._OnPercentDone([0,ai,aB,"http"]);ao.SourceValue.Add(aH,aD,aF);ax++;if(ax>=ay){if(F){m._bServerPercentDone=true}d.each(s.httpParams.headers,function(aI,aJ){ao.HttpHeader[aJ]=aI});d.each(s.httpParams.formFields,function(aI,aJ){ag.Add(aJ,aI)});ao.ServerUrl=aq;ao.bDeleteFile=ae;ao.reTries=R;if(d.isNumber(s.httpParams.maxSizeLimit)){ao.maxSizeLimit=s.httpParams.maxSizeLimit}ao.ImageType=an;ao.ThreadNum=o;ao.OnRunSuccess=al;ao.OnRunFailure=az;if(F||d.isFunction(V)){ao.OnUploadTransferPercentage=function(aI,aJ){if(aJ>0&&aJ<=100){if(aJ==100){aJ=99}if(F){m._OnPercentDone([0,aJ,"","http"])}if(d.isFunction(V)){if(aJ>99){aJ=99}i(m,"",aJ,0)}}};if(F){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"])}}af.Run(ao)}},aj)})}}}else{if(au){al=function(aD){m._bServerPercentDone=true;if(!au&&s.removeAfterOutput){setTimeout(function(){l=0;d.each(ac,function(aE){var aF=m._ImgManager.convertServerIdToClientIndex(aE);if(aF>-1){m._removeImageById(aE,function(){l++},function(){l++})}else{l++}});setTimeout(ab,100)},100)}else{w=true;aa(t);U(m)}return true};az=function(aE){m._bServerPercentDone=true;var aD={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};Q(Z,aD);if(!au&&s.removeAfterOutput){setTimeout(function(){d.each(ac,function(aF){var aG=m._ImgManager.convertServerIdToClientIndex(aF);if(aG>-1){m._removeImageById(aF)}})},100)}return false};m._innerUploadFilesDirectly(aq,x,s.httpParams.fileName,F,ae,R,false,al,az)}else{al=function(aE,aD){m._bServerPercentDone=true;if(!au&&s.removeAfterOutput){setTimeout(function(){l=0;d.each(ac,function(aF){var aG=m._ImgManager.convertServerIdToClientIndex(aF);if(aG>-1){m._removeImageById(aF,function(){l++},function(){l++})}else{l++}});setTimeout(ab,100)},100)}else{w=true;aa(t);U(m)}return true};az=function(aE){m._bServerPercentDone=true;var aD={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};Q(Z,aD);if(!au&&s.removeAfterOutput){setTimeout(function(){d.each(ac,function(aF){var aG=m._ImgManager.convertServerIdToClientIndex(aF);if(aG>-1){m._removeImageById(aF)}})},100)}return false};an=s.format;if(an==EnumDWT_ImageType.IT_MULTIPAGE_PDF||an==EnumDWT_ImageType.IT_MULTIPAGE_TIF){if(an==EnumDWT_ImageType.IT_MULTIPAGE_PDF){an=EnumDWT_ImageType.IT_PDF}else{if(an==EnumDWT_ImageType.IT_MULTIPAGE_TIF){an=EnumDWT_ImageType.IT_TIF}}var ah=h.cformat(s.httpParams.fileName,1),av=h.cformat(s.httpParams.remoteName,1);var aA={bOnlyUploadForm:false,method:"startScan",_this:m,url:aq,serverIds:ac,enumImageType:an,saveSetup:H,fileName:ah,dataFormat:aC,retry:R,bOnlyEmptyIsOK:false,objUploadFileStatus:false,asyncSuccessFunc:al,asyncFailureFunc:az};d._asyncUploadCmd(aA)}else{m._asyncUploadFilesCmd(aq,ac,an,s.httpParams.fileName,H,F,R,false,al,az)}}}}if(ap&&s.type=="ftp"){}else{}}A=true;if(T&&d.isFunction(T)){T()}};var Y=function(){if(s.type!="http"){w=true;aa(t);U(m)}else{if(!s.singlePost){setTimeout(ab,100)}}};m._startScan(z,Y,function(af){if(m.ErrorCode==-1029){var ac=z.transferMode==EnumDWT_TransferMode.TWSX_FILE,ae=false;if(ac){ae=x.length>0}else{ae=S.length>0}if(ae){m._errorCode=0;return Y()}}var ad={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};Q(Z,ad)})})})}});Dynamsoft.Ready(function(d,b){var a=Dynamsoft;if(!d.product.bHTML5Edition){return}var e=a.WebTwainEnv,g=d,c=a.navInfo,f=g.each;d.env.WSVersion="12.0.0";d.env.WSSession=new Date().getTime();d.getHttpUrl=function(h){if(h.ssl){return["https://",h.host,":",h.port,"/"].join("")}else{return["http://",h.host,":",h.port,"/"].join("")}};d.getWSUrl=function(j,i,h){if(h){return["wss://",j,":",i].join("")}else{return["ws://",j,":",i].join("")}};d.getWS=function(s,i,k){var q=this,m,r=d.getWSUrl(s,i,k),n=d.product.wsProtocol,l=window.MozWebSocket;if(q.detect.OnCreatWS){q.detect.OnCreatWS(r,n)}if(typeof l!="undefined"){if(n){m=new l(r,n)}else{m=new l(r)}}else{var j=WebSocket;if(c.bEdge){var o=window,h=parent;while(o!=h&&h.WebSocket){j=h.WebSocket;o=h.window;h=h.parent}}if(n){m=new j(r,n)}else{m=new j(r)}}return m};d._init=function(q){var p=Dynamsoft.Lib,m=Dynamsoft.dcp,k=p.LS.item("DWT_port"),i=p.LS.item("DWT_ssl"),h;if(m.bEnhancedMode){return true}p.detect.urls.splice(0);p.detect.cUrlIndex=0;if(!q.bLocalService){return true}if(k!==b&&i!==b){h={port:k,ssl:(i=="true")}}var l=function(r){if(!h){return true}if(r){if(r.port!=h.port||r.ssl!=h.ssl){return true}}return false};var j,n;if(p.detect.detectType===1){if(h!==b&&h.ssl){p.detect.urls.push(h)}f(p.detect.ports,function(r){if(r.ssl){if(l(r)){p.detect.urls.push(r)}}})}else{if(p.detect.detectType===0){if(h!==b&&!h.ssl){p.detect.urls.push(h)}f(p.detect.ports,function(r){if(r.ssl===false){if(l(r)){p.detect.urls.push(r)}}})}else{if(h!==b){p.detect.urls.push(h)}f(p.detect.ports,function(r){if(l(r)){p.detect.urls.push(r)}})}}j=b};d._reconnect=function(){var n=Dynamsoft.Lib,l,j,i,m;if(n.detect.aryReconnectSTwains.length>0){m=n.detect.aryReconnectSTwains[0]}if(!m||m.__bConnecting){return}m.__bConnecting=true;l=m._host;i=m._ssl;j=m._port;try{var h=n.getWS(l,j,i);h.onopen=function(){if(h.readyState==1){m._objWS=h;if(!m.bReady){m._OnReady(true)}m.__bConnecting=false;d.detect.hideMask();n.detect.bOK=true}else{if(h.readyState==0){setTimeout(h.onopen,100)}else{m.__bConnecting=false}}};h.onclose=function(){h.onopen=null;m.__bConnecting=false;if(!m.bReady){m.__wsRetry++;if(m.__wsRetry<5){setTimeout(d._reconnect,1000)}else{d.closeProgress("Reconnect");d.Errors.Server_Restarted(m)}}else{d.closeProgress("Reconnect");d.detect.hideMask()}}}catch(k){d.log(k);m.__bConnecting=false;if(!m.bReady){m.__wsRetry++;if(m.__wsRetry<5){setTimeout(d._reconnect,1000)}}else{d.detect.hideMask()}}};d.startWS=function(){var j=d.detect,q,l=true;if(!d.product.bHTML5Edition){d.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!");return}if(e.UseLocalService===false||(d.isUndefined(e.UseLocalService)&&d.env.bMobile)){l=false}if(l&&j.tryTimes>5){d.log("Failed more than 5 times.");return}if(j.OnDetectNext){j.OnDetectNext()}if(j.tryTimes==0&&j.cUrlIndex>0&&j.arySTwains.length>0){if(!j.bNoControlEvent){j.hideMask();if(d.isFunction(j.onNoControl)){var p,k,m;p=j.arySTwains[0];k=p._width;m=p._height;if(k<=0){k=270}if(m<=0){m=350}j.onNoControl(p._containerID,k,m,p)}j.bNoControlEvent=true}}if(l&&j.cUrlIndex>=j.urls.length){j.cUrlIndex=0;j.tryTimes++}if(j.arySTwains.length>0){q=j.arySTwains[0]}else{j.hideMask();j.bOK=true;return}if(q._bLocalService==false){q.bReady=true;q._OnReady()}if(q.bReady){j.arySTwains.splice(0,1);if(j.arySTwains.length<=0){j.hideMask();j.bOK=true}else{setTimeout(d.startWS,100)}return}if(!j.bNoControlEvent){j.showMask()}if(q.__bConnecting){return}q.__bConnecting=true;try{var h=j.urls[j.cUrlIndex],n=d.getWS(d.product.host,h.port,h.ssl);d.log(["connecting ... [port:",h.port,"]"].join(""));n.onopen=function(){q.__bConnecting=false;if(n.readyState==1){q._objWS=n;if(!q.bReady){q._port=h.port;q._ssl=h.ssl;q._OnReady()}j.arySTwains.splice(0,1);if(j.arySTwains.length<=0){j.hideMask();j.bOK=true}else{setTimeout(d.startWS,100)}}else{if(n.readyState==0){setTimeout(n.onopen,100)}else{}}};n.onclose=function(){n.onopen=null;q.__bConnecting=false;if(!q.bReady){j.cUrlIndex++;setTimeout(d.startWS,100)}else{j.hideMask()}}}catch(i){d.log(i);q.__bConnecting=false;if(!q.bReady){j.cUrlIndex++;setTimeout(d.startWS,100)}else{j.hideMask()}}};d.startWSByIP=function(){var m=d.detect,n;if(!d.product.bHTML5Edition){d.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!");return}if(m.arySTwainsByIP.length>0){n=m.arySTwainsByIP[0]}else{m.hideMask();m.bOK=true;return}if(n._bLocalService==false){n.bReady=true;n._OnReady()}if(n.bReady){m.arySTwainsByIP.splice(0,1);if(m.arySTwainsByIP.length<=0){m.hideMask();m.bOK=true}else{setTimeout(d.startWSByIP,100)}return}if(!m.bNoControlEvent){m.showMask()}if(n.__bConnecting){return}if(n.__wsRetry>0){if(!m.bNoControlEvent){m.hideMask();if(d.isFunction(m.onNoControl)){var h,l;h=n._width;l=n._height;if(h<=0){h=270}if(l<=0){l=350}m.onNoControl(n._containerID,h,l,n)}m.bNoControlEvent=true}}n.__bConnecting=true;try{var j,i;j=n._port;i=d.getWS(n._host,j,n._ssl);d.log(["connecting ... [port:",j,"]"].join(""));i.onopen=function(){n.__bConnecting=false;if(i.readyState==1){n._objWS=i;if(!n.bReady){n._OnReady()}m.arySTwainsByIP.splice(0,1);if(m.arySTwainsByIP.length<=0){m.hideMask();m.bOK=true}else{setTimeout(d.startWSByIP,100)}}else{if(i.readyState==0){setTimeout(i.onopen,100)}else{}}};i.onclose=function(){i.onopen=null;n.__bConnecting=false;if(!n.bReady){n.__wsRetry++;setTimeout(d.startWSByIP,100)}else{m.hideMask()}}}catch(k){d.log(k);n.__bConnecting=false;if(!n.bReady){n.__wsRetry++;setTimeout(d.startWSByIP,100)}else{m.hideMask()}}};d.html5.closeAll=function(){var p,n,r,m,q,l,k,h=false;d.dlgProgress=false;d.detect.bOK=false;d.detect.bFirst=true;for(p=d.detect.arySTwains.length-1;p>=0;p--){r=d.detect.arySTwains[p];if(!r){continue}q=r._id;m=r._containerID;k=false;for(n=0;n<Dynamsoft.WebTwainEnv.Containers.length;n++){l=Dynamsoft.WebTwainEnv.Containers[n];if(!l){continue}if((q==l.WebTwainId)||(m==l.ContainerId)){k=true;break}}if(k){r.__unload();d.detect.arySTwains.splice(p,1)}if(r._isMobileMode()){h=true}}};d.bio=false;d.progressMessage="";d.dialogShowStatus=false;d.needShowTwiceShowDialog=false;d.dlgProgress=false;d.cancelFrome=0;d.dlgRef=0;d.initProgress=function(){var k,j,m;if(!d.dlgProgress){m=[];m.push('<dialog class="dynamsoft-dwt-dialogProgress" closed="closed" style="top:30%"><h3 class="dynamsoft-finalMessage"> </h3>');m.push('<p class="dynamsoft-desc"> </p><p class="dynamsoft-status">0%</p>');if(c.bIE){m.push('<div class="dynamsoft-progressBar" value="" max="100"></div>')}else{m.push('<progress class="dynamsoft-progressBar" value="" max="100"></progress>')}m.push('<br /><button class="dynamsoft-btnCancel" value="cancel" autofcus >cancel</button></dialog>');j=d.one(".dynamsoft-dwt-dialogProgress");if(j&&j.getEL()){j.remove()}var i=d.parseHTML(m.join(""));if(i&&i.length>0){document.body.appendChild(i[0])}if(c.bIE){var l=d.one(".dynamsoft-progressBar"),h=l&&l.getEL();if(h){h.objProgressBar=new d.ProgressBar(h,{width:300,height:20})}}j=d.one(".dynamsoft-dwt-dialogProgress");if(j&&j.getEL()){d.dlgProgress=j[0];d.dialog.setup(d.dlgProgress)}d.dlgRef=0;d.dialogShowStatus=false;d.cancelFrome=0}};d.setBtnCancelVisibleForProgress=function(h){if(d.dlgRef<=0||(d.dialogShowStatus==false)){return}var j=d.one(".dynamsoft-btnCancel"),i=j&&j.getEL();if(i){if(h){i.style.display=""}else{i.style.display="none"}}};d.showProgressMsg=function(h,i,n){if(d.dlgRef<=0||(d.dialogShowStatus==false)){return}var p=d.one(".dynamsoft-progressBar"),l=d.one(".dynamsoft-status"),j=d.one(".dynamsoft-finalMessage"),q=d.one(".dynamsoft-desc"),o=h;if(h<0){o=0}else{if(h>100){o=100}}o=Math.floor(o);if(j&&j.getEL()){j.html(i)}if(q&&q.getEL()){q.html(n)}if(o||o===0){if(l&&l.getEL()){l.html(o+"%")}if(p&&p.getEL()){if(c.bIE){if(p[0].objProgressBar){p[0].objProgressBar.setValue(o)}else{p[0].value=o}}else{if(c.bEdge){p[0].style.display="";p[0].value=o}else{p[0].value=o}}}}if(o&&(o>=100||d.dlgRef<=0)){setTimeout(function(){if(p&&p.getEL()){if(c.bIE){if(p[0].objProgressBar){p[0].objProgressBar.setValue(0)}else{p[0].value=0}}else{if(c.bEdge){p[0].style.display="none";p[0].value=0}else{p[0].value=0}}}},300);if(d.dlgRef<=0){var k="OnPercentDone";d.closeProgress(k)}}};d.showProgress=function(q,l,j){var p=q;d.log("showProgress:"+l+",bCancel:"+j);if((d.cancelFrome==0&&p.__IfShowProgressBar==true)||(d.cancelFrome!=0&&p.__IfShowCancelDialogWhenImageTransfer==true)){var o=d.one(".dynamsoft-btnCancel"),h=o&&o.getEL();if(h){if(j==false){h.style.display="none"}else{h.style.display=""}}if(d.dialogShowStatus==false){if(d.dlgProgress){d.dlgProgress.showModal()}d.dialogShowStatus=true;var i=d.one(".dynamsoft-finalMessage");var r=d.one(".dynamsoft-progressBar"),k=r&&r.getEL();var n=d.one(".dynamsoft-status");if(i&&i.getEL()){i.html("")}if(n&&n.getEL()){n.html("0%")}if(k){if(c.bIE){if(k.objProgressBar){k.objProgressBar.setValue(0)}else{k.value=0}}else{k.value=0}}}d.dlgRef++}};d.closeProgress=function(h){d.log("closeProgress:"+h);var i=d.one(".dynamsoft-btnCancel");d.dlgRef--;if(d.dlgRef<=0){d.dlgRef=0}if(d.needShowTwiceShowDialog==true&&d.cancelFrome==1){if(i&&i.getEL()){i[0].innerHTML="Cancel"}}else{if(i&&i.getEL()){i[0].innerHTML="Cancel"}if(d.dlgRef==0){if(d.dialogShowStatus==true){if(d.dlgProgress){d.dlgProgress.close()}d.dialogShowStatus=false}d.needShowTwiceShowDialog=false;d.cancelFrome=0}}};d.html5.CreateDWTObject=function(h){var l,j,k;for(j=0;j<d.detect.arySTwains.length;j++){k=d.detect.arySTwains[j];if(k._id==h.id){return false}}l=new d.html5.STwain(h);if(h.customIP){d.detect.arySTwainsByIP.push(l);return l}d.detect.arySTwains.push(l);if(d.detect.bFirst){d._init(h)}d.detect.bFirst=false;return l};e.RemoveAllAuthorizations=function(){var i=d.LS.item("DWT_port"),l=d.LS.item("DWT_ssl"),h="http://",k=d.product.host,j;if(l=="true"){h="https://"}j=[h,k,":",i,"/dwt/",d.product.getDWTPrefix(),d.product.getServerVersionInfo(),"/RemoveAllAuthorizations?t=",d.now()].join("");d.ajax({method:"GET",url:j,async:true});return true}});Dynamsoft.Ready(function(c,j){var e=Dynamsoft;if(!c.product.bPluginEdition&&!c.product.bActiveXEdition){return}var h=Dynamsoft.navInfo;if(!Object.defineProperty){Object.defineProperty=function(s,p,r){var o=s[p],m=function(){return r.get.apply(s,[o])},q=function(t){return(o=r.set.apply(s,[t]))};if(s.__defineGetter__){s.__defineGetter__(p,m);s.__defineSetter__(p,q)}else{var n=function(u){if(event.propertyName==p){s.detachEvent("onpropertychange",n);var t=q(s[p]);s[p]=m;s[p].toString=m;s.attachEvent("onpropertychange",n)}};s[p]=m;s[p].toString=m;s.attachEvent("onpropertychange",n)}}}var f=!0,g=!1,l={isFunction:function(m){return m&&typeof(m)==="function"},isReturnSuccess:function(n){if(n._errorCode===-2115){return f}if(n._errorCode===-2003){var m=window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");m.document.writeln(n.HTTPPostResponseString)}if(n._errorCode==0){return f}return g},setErrorString:function(m){m._errorCode=m.getSWebTwain().ErrorCode;m._errorString=m.getSWebTwain().ErrorString},checkErrorString:function(m){l.setErrorString(m);return l.isReturnSuccess(m)},wrapperRet:function(q,n,m,r,p,o){if(l.checkErrorString(q)){if(l.isFunction(m)){if(p){m(q.getSWebTwain().HTTPPostResponseString)}else{if(o){m(n);return true}else{m()}}}}else{if(l.isFunction(r)){if(p){r(q._errorCode,q._errorString,q.getSWebTwain().HTTPPostResponseString)}else{r(q._errorCode,q._errorString)}}}return n},wrapperPromise:function(n,m){if(m){return c.Promise.resolve(true)}return c.Promise.reject({errorCode:n._errorCode,errorString:n._errorString})},getImageType:function(n){var m=n.length;if(m<4){return -1}var o=n.lastIndexOf(".");if(o===-1){return -1}var p=n.slice(o).toLowerCase();if(p===".bmp"||p===".dib"){return 0}if(p===".jpg"||p===".jpe"||p===".jpeg"||p===".jfif"){return 1}if(p===".tif"||p===".tiff"){return 2}if(p===".png"){return 3}if(p===".pdf"){return 4}if(p===".gif"){return 5}return -1},replaceLocalFilename:function(m){var n=m;if(Dynamsoft.navInfoSync.bFileSystem){n=decodeURI(n)}return n},makeParams:function(){var m=arguments;if(m===undefined||m.length===0){return undefined}else{return m}}};c.checkErrorString=l.checkErrorString;c.wrapperRet=l.wrapperRet;c.setErrorString=l.setErrorString;c.DynamicLoadAddonFuns=[];c.attachAddon=function(p){if(h.bWin){var q=navigator.userAgent.toLowerCase(),m=!h.bOSx64||(q.indexOf("wow64")>=0),r=p.getSWebTwain(),n;if(m){n="DynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}else{n="DynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}try{r.GetAddOnVersion("pdf",n)}catch(o){}}c.each(c.DynamicLoadAddonFuns,function(s){if(c.isFunction(s)){s(p)}})};var b=0,i=1,a=1,d=2;c.attachProperty=function(m){var o=m;var n=function(s,r,p){var q;if(r!==b&&r!==i){q=r}else{q={};if(r){if(p==a){q.set=function(t){t=t*1;if(!c.isNumber(t)||isNaN(t)){c.Errors.InvalidValue(o);return g}o.getSWebTwain()[s]=t;return l.checkErrorString(o)}}else{if(p==d){q.set=function(t){if(!c.isBoolean(t)){c.Errors.InvalidValue(o);return g}o.getSWebTwain()[s]=t;return l.checkErrorString(o)}}else{q.set=function(t){if(!c.isString(t)){c.Errors.InvalidValue(o);return g}o.getSWebTwain()[s]=t;return l.checkErrorString(o)}}}}}if(!q.get){q.get=function(){var t=o.getSWebTwain()[s];o._errorCode=o.getSWebTwain().ErrorCode;o._errorString=o.getSWebTwain().ErrorString;return t}}if(!(s in o)){Object.defineProperty(o,s,q)}};n("ErrorCode",{get:function(p){return o._errorCode}});n("ErrorString",{get:function(p){return o._errorString}});n("LogLevel",i,a);n("Manufacturer",i);n("ProductFamily",i);n("ProductKey",{get:function(){return Dynamsoft.WebTwainEnv.ProductKey},set:function(r){var q=f,p=r,s=Dynamsoft.WebTwainEnv;if(!c.isString(p)||p=="******"){p=""}s.ProductKey=p;o.__licenseInfo=g;if(p==""){q=g;c.License.checkProductKey(o,{Core:f},g,f)}else{if(c.startsWith(p,"http://")||c.startsWith(p,"https://")){c.ajax({method:"GET",url:p,async:false,onSuccess:function(t){o.GetLicenseInfo(t)}});q=l.checkErrorString(o)}else{o.GetLicenseInfo(p);q=l.checkErrorString(o)}}return q}});n("ProductName",i);n("VersionInfo",i);n("BitDepth",i,a);n("Brightness",i,a);n("Contrast",i,a);n("CurrentSourceName",b);n("DataSourceStatus",b);n("DefaultSourceName",b);n("Duplex",b);n("IfAppendImage",i,d);n("IfAutoBright",i,d);n("IfAutoDiscardBlankpages",i,d);n("IfAutoFeed",i,d);n("IfAutomaticBorderDetection",i,d);n("IfAutomaticDeskew",i,d);n("IfAutoScan",i,d);n("IfDisableSourceAfterAcquire",i,d);n("IfDuplexEnabled",i,d);n("IfFeederEnabled",i,d);n("IfModalUI",i,d);n("IfScanInNewThread",i,d);n("IfShowCancelDialogWhenImageTransfer",i,d);n("IfShowUI",i,d);n("IfShowIndicator",i,d);n("IfUseTwainDSM",i,d);n("IfFeederLoaded",b,d);n("IfPaperDetectable",b,d);n("IfUIControllable",b,d);n("ImageBitsPerPixel",b);n("ImageCaptureDriverType",i,a);n("ImageLayoutDocumentNumber",b);n("ImageLayoutFrameBottom",b);n("ImageLayoutFrameLeft",b);n("ImageLayoutFrameNumber",b);n("ImageLayoutFrameRight",b);n("ImageLayoutFrameTop",b);n("ImageLayoutPageNumber",b);n("ImageLength",b);n("ImagePixelType",b);n("ImageWidth",b);n("ImageXResolution",b);n("ImageYResolution",b);n("MagData",b);n("MagType",b);n("PageSize",i,a);n("PendingXfers",b);n("PixelFlavor",i,a);n("PixelType",i,a);n("Resolution",i,a);n("SourceCount",b);n("TransferMode",i,a);n("Unit",i,a);n("XferCount",i,a);n("Capability",i,a);n("CapCurrentIndex",i,a);n("CapCurrentValue",i,a);n("CapDefaultIndex",b);n("CapDefaultValue",b);n("CapDescription",i);n("CapMaxValue",i,a);n("CapMinValue",i,a);n("CapNumItems",i,a);n("CapStepSize",i,a);n("CapType",i,a);n("CapValue",i,a);n("CapValueString",i);n("CapValueType",i,a);n("AllowMultiSelect",i,d);n("BackgroundColor",i,a);n("BackgroundFillColor",i,a);n("BlankImageCurrentStdDev",b);n("BlankImageMaxStdDev",i,a);n("BlankImageThreshold",i,a);n("CurrentImageIndexInBuffer",{set:function(p){if(p!=o.getSWebTwain().CurrentImageIndexInBuffer){o.getSWebTwain().CurrentImageIndexInBuffer=p}return l.checkErrorString(o)}});n("FitWindowType",i,a);n("HowManyImagesInBuffer",b);n("IfFitWindow",i,d);n("ImageMargin",i,a);n("MaxImagesInBuffer",i,a);n("MouseX",b);n("MouseY",b);n("SelectedImagesCount",i,a);n("SelectionImageBorderColor",i);n("Zoom",i,a);n("MouseShape",i,a);n("SelectedImagesIndices",{get:function(){var q=[],p=o.getSWebTwain().SelectedImagesCount;for(var r=0;r<p;r++){q.push(o.getSWebTwain().GetSelectedImageIndex(r))}return q}});n("HTTPPostResponseString",b);n("AsyncMode",i,d);n("FTPPassword",i);n("FTPPort",{set:function(p){if(p!==""){p=p*1;o.getSWebTwain().FTPPort=p;return l.checkErrorString(o)}return g}});n("FTPUserName",i);n("HTTPPort",{set:function(p){if(p!==""){p=p*1;o.getSWebTwain().HTTPPort=p;return l.checkErrorString(o)}else{p=c.detect.ssl?443:80;o.getSWebTwain().HTTPPort=p;return l.checkErrorString(o)}return f}});n("HTTPPassword",i);n("HTTPUserName",i);n("IfPASVMode",i,d);n("IfShowProgressBar",i,d);n("ProxyServer",i);n("IfShowFileDialog",i,d);n("IfTiffMultiPage",i,d);n("PDFAuthor",i);n("PDFCompressionType",i,a);n("PDFCreationDate",i);n("PDFCreator",i);n("PDFKeywords",i);n("PDFModifiedDate",i);n("PDFProducer",i);n("PDFSubject",i);n("PDFTitle",i);n("PDFVersion",i);n("TIFFCompressionType",i,a);n("JPEGQuality",{set:function(p){p=p*1;if(p>=100){p=100}else{if(p<0){p=0}}o.getSWebTwain().JPEGQuality=p;return l.checkErrorString(o)}});n("HttpContentTypeFieldValue",i);n("SelectionRectAspectRatio",i,a);n("IfAllowLocalCache",i,d);n("_AutoCropMethod",i,d);n("BrokerProcessType",i,a);n("BorderStyle",i,a);n("IfShowPrintUI",i,d);n("VScrollBar",i,d);n("EnableInteractiveZoom",i,d);n("ImageEditorIfEnableEnumerator",i,d);n("ImageEditorIfReadonly",i,d);n("ImageEditorIfModal",i,d);n("ImageEditorWindowTitle",i);n("IfSSL",i,d);n("AllowPluginAuthentication",i,d);n("HttpFieldNameOfUploadedImage",i);n("MaxInternetTransferThreads",i,a);n("MaxUploadImageSize",i,a);n("IfOpenImageWithGDIPlus",i,d);n("BufferMemoryLimit",i,a);n("Width",{get:function(){return o.getSWebTwain().style.width},set:function(p){o._ChangeWidth(p);return l.checkErrorString(o)}});n("Height",{get:function(){return o.getSWebTwain().style.height},set:function(p){o._ChangeHeight(p);return l.checkErrorString(o)}});n("IfThrowException",i,d);n("IfAutoScroll",i,d);n("ShowPageNumber",{get:function(){return g},set:function(p){return g}});n("UseLocalService",{get:function(){return false}})};c.attachMethod=function(o){var r=o,m=function(s){if(!c.License.checkProductKey(r,{Core:f})){if(c.isFunction(s)){s(r.ErrorCode,r.ErrorString)}return g}return f},n=function(t,s){if(!c.License.checkPDFProductKeyWhenNeeds(r,t)){if(c.isFunction(s)){s(r.ErrorCode,r.ErrorString)}return g}return f},p=function(t,s){if(t.HowManyImagesInBuffer==0){c.Errors.NoImage(t);if(c.isFunction(s)){s(t.ErrorCode,t.ErrorString)}return false}return true},q=function(t,u,s){if(!p(t,s)){return false}if(isNaN(u)||!c.isNumber(u)||u<0||u>=t.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(t);if(c.isFunction(s)){s(t.ErrorCode,t.ErrorString)}return false}return true};o.RegisterEvent=function(s,u){if(!c.isString(s)){c.Errors.InvalidEventName(r);return false}if(s.toLowerCase()==="onwsmessage"){c.Errors.InvalidEventName(r);return false}if(s.toLowerCase()==="onpostalltransfers"){if(c.isFunction(u)){r.__OnPostAllTransfers=u}return true}var t=["__",s].join("");r[t]=u;r.getSWebTwain().RegisterEvent(s,u);return l.checkErrorString(r)};o.onEvent=function(s,t){return r.RegisterEvent(s,t)};o.on=function(s,t){return r.RegisterEvent(s,t)};o._isMobileMode=function(){return false};o.CancelAllPendingTransfers=function(){r.getSWebTwain().CancelAllPendingTransfers();return l.checkErrorString(r)};o.CloseSource=function(){r.getSWebTwain().CloseSource();return l.checkErrorString(r)};o.CloseSourceManager=function(){r.getSWebTwain().CloseSourceManager();return l.checkErrorString(r)};o.DisableSource=function(){r.getSWebTwain().DisableSource();return l.checkErrorString(r)};o.FeedPage=function(){r.getSWebTwain().FeedPage();return l.checkErrorString(r)};o.GetDeviceType=function(){var s=r.getSWebTwain().GetDeviceType();l.setErrorString(r);return s};o.GetSourceNameItems=function(t){var s=r.getSWebTwain().GetSourceNameItems(t);l.setErrorString(r);return s};o.SourceNameItems=function(t){var s=r.getSWebTwain().GetSourceNameItems(t);l.setErrorString(r);return s};o.GetSourceNames=function(){c.Errors.ActiveXNotSupport(r);return[]};o.GetSourceType=function(t){var s=r.getSWebTwain().GetSourceType(t);l.setErrorString(r);return s};o.OpenSource=function(){r.getSWebTwain().OpenSource();return l.checkErrorString(r)};o.OpenSourceManager=function(){r.getSWebTwain().OpenSourceManager();return l.checkErrorString(r)};o.ResetImageLayout=function(){r.getSWebTwain().ResetImageLayout();return l.checkErrorString(r)};o.RewindPage=function(){r.getSWebTwain().RewindPage();return l.checkErrorString(r)};o.SelectSource=function(s,t){if(c.isUndefined(s)){r.getSWebTwain().SelectSource();return l.checkErrorString(r)}else{r.getSWebTwain().SelectSource();var u=l.checkErrorString(r);if(u){s();return true}else{t();return false}}};o.SelectSourceByIndex=function(s){r.getSWebTwain().SelectSourceByIndex(s);return l.checkErrorString(r)};o.CloseSourceAsync=function(){return l.wrapperPromise(r,r.CloseSource())};o.CloseSourceManagerAsync=function(){return l.wrapperPromise(r,r.CloseSourceManager())};o.GetSourceNamesAsync=function(){return l.wrapperPromise(r,r.GetSourceNames())};o.GetSourceTypeAsync=function(s){return l.wrapperPromise(r,r.GetSourceType(s))};o.OpenSourceAsync=function(){return l.wrapperPromise(r,r.OpenSource())};o.OpenSourceManagerAsync=function(){return l.wrapperPromise(r,r.OpenSourceManager())};o.SelectSourceAsync=function(){return l.wrapperPromise(r,r.SelectSource())};o.SelectSourceByIndexAsync=function(s){return l.wrapperPromise(r,r.SelectSourceByIndex(s))};o.SetFileXferInfo=function(s,u){var t=l.replaceLocalFilename(s);r.getSWebTwain().SetFileXferInfo(t,u);return l.checkErrorString(r)};o.SetImageLayout=function(v,u,t,s){r.getSWebTwain().SetImageLayout(v,u,t,s);return l.checkErrorString(r)};o.CapGet=function(){var s=r.getSWebTwain().CapGet();l.setErrorString(r);return s};o.CapGetCurrent=function(){var s=r.getSWebTwain().CapGetCurrent();l.setErrorString(r);return s};o.CapGetDefault=function(){var s=r.getSWebTwain().CapGetDefault();l.setErrorString(r);return s};o.CapGetFrameBottom=function(t){var s=r.getSWebTwain().CapGetFrameBottom(t);l.setErrorString(r);return s};o.CapGetFrameLeft=function(t){var s=r.getSWebTwain().CapGetFrameLeft(t);l.setErrorString(r);return s};o.CapGetFrameRight=function(t){var s=r.getSWebTwain().CapGetFrameRight(t);l.setErrorString(r);return s};o.CapGetFrameTop=function(t){var s=r.getSWebTwain().CapGetFrameTop(t);l.setErrorString(r);return s};o.CapGetHelp=function(){var s=r.getSWebTwain().CapGetHelp();l.setErrorString(r);return s};o.CapGetLabel=function(){var s=r.getSWebTwain().CapGetLabel();l.setErrorString(r);return s};o.CapGetLabels=function(){var s=r.getSWebTwain().CapGetLabels();l.setErrorString(r);return s};o.CapIfSupported=function(t){var s=r.getSWebTwain().CapIfSupported(t);l.setErrorString(r);return s};o.CapReset=function(){r.getSWebTwain().CapReset();return l.checkErrorString(r)};o.CapSet=function(){r.getSWebTwain().CapSet();return l.checkErrorString(r)};o.CapSetFrame=function(t,w,v,u,s){r.getSWebTwain().CapSetFrame(t,w,v,u,s);return l.checkErrorString(r)};o.GetCapItems=function(t){var s=r.getSWebTwain().GetCapItems(t);l.setErrorString(r);return s};o.GetCapItemsString=function(t){var s=r.getSWebTwain().GetCapItemsString(t);l.setErrorString(r);return s};o.SetCapItems=function(t,s){r.getSWebTwain().SetCapItems(t,s);return l.checkErrorString(r)};o.SetCapItemsString=function(t,s){r.getSWebTwain().SetCapItemsString(t,s);return l.checkErrorString(r)};o.AddText=function(C,z,w,B,s,A,t,u){var v=parseInt(C);if(isNaN(v)||v<0||v>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().AddText(v,z,w,B,s,A,t,u);return l.checkErrorString(r)};o.CreateTextFont=function(u,F,z,y,B,C,v,D,s,A,w,x,E,t){r.getSWebTwain().CreateTextFont(u,F,z,y,B,C,v,D,s,A,w,x,E,t);return l.checkErrorString(r)};o.CopyToClipboard=function(t){var s=parseInt(t);if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().CopyToClipboard(s);return l.checkErrorString(r)};o.Erase=function(A,u,x,z,t,y,v){var w=parseInt(A),s;if(isNaN(w)||w<0||w>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().Erase(w,u,x,z,t);return l.wrapperRet(r,s,y,v)};o.GetImageBitDepth=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageBitDepth(t);l.setErrorString(r);return s};o.GetImageWidth=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageWidth(t);l.setErrorString(r);return s};o.GetImageHeight=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageHeight(t);l.setErrorString(r);return s};o.GetImageSize=function(v,u,w){var t=parseInt(v);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageSize(t,u,w);l.setErrorString(r);return s};o.GetImageSizeWithSpecifiedType=function(u,v){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageSizeWithSpecifiedType(t,v);l.setErrorString(r);return s};o.GetImageXResolution=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageXResolution(t);l.setErrorString(r);return s};o.GetImageYResolution=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageYResolution(t);l.setErrorString(r);return s};o.CopyToClipboardAsync=function(s){return l.wrapperPromise(r,r.CopyToClipboard(s))};o.EraseAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.Erase(u,w,v,t,s))};o.GetImageBitDepthAsync=function(s){return l.wrapperPromise(r,r.GetImageBitDepth(s))};o.GetImageWidthAsync=function(s){return l.wrapperPromise(r,r.GetImageWidth(s))};o.GetImageHeightAsync=function(s){return l.wrapperPromise(r,r.GetImageHeight(s))};o.GetImageSizeAsync=function(t,s,u){return l.wrapperPromise(r,r.GetImageSize(t,s,u))};o.GetImageSizeWithSpecifiedTypeAsync=function(s,t){return l.wrapperPromise(r,r.GetImageSizeWithSpecifiedType(s,t))};o.GetImageXResolutionAsync=function(s){return l.wrapperPromise(r,r.GetImageXResolution(s))};o.GetImageYResolutionAsync=function(s){return l.wrapperPromise(r,r.GetImageYResolution(s))};o.GetSelectedImageIndex=function(t){var s=r.getSWebTwain().GetSelectedImageIndex(t);l.setErrorString(r);return s};o.SetSelectedImageIndex=function(t,s){r.getSWebTwain().SetSelectedImageIndex(t,s);return l.checkErrorString(r)};o.SelectAllImages=function(){var s=r.getSWebTwain().HowManyImagesInBuffer,u,t=[];r.getSWebTwain().SelectedImagesCount=s;for(u=0;u<s;u++){r.getSWebTwain().SetSelectedImageIndex(u,u);t.push(u)}l.checkErrorString(r);return t};o.SelectImages=function(u){var s=u.length;r.getSWebTwain().SelectedImagesCount=s;for(var t=0;t<s;t++){r.getSWebTwain().SetSelectedImageIndex(t,u[t])}return l.checkErrorString(r)};o.GetSelectedImagesSize=function(t){var s=r.getSWebTwain().GetSelectedImagesSize(t);l.setErrorString(r);return s};o.GetSkewAngle=function(v,s,u){var t=parseInt(v),w;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().GetSkewAngle(t);return l.wrapperRet(r,w,s,u,false,true)};o.GetSkewAngleEx=function(A,u,x,z,t,y,v){var w=parseInt(A),s;if(isNaN(w)||w<0||w>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().GetSkewAngleEx(w,u,x,z,t);return l.wrapperRet(r,s,y,v)};o.IsBlankImage=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().IsBlankImage(t);l.setErrorString(r);return s};o.IsBlankImageEx=function(w,y,x,v,s,z){var u=parseInt(w);if(isNaN(u)||u<0||u>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var t=r.getSWebTwain().IsBlankImageEx(u,y,x,v,s,z);l.setErrorString(r);return t};o.Mirror=function(v,s,u){var t=parseInt(v),w;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().Mirror(t);return l.wrapperRet(r,w,s,u)};o.OverlayRectangle=function(w,y,x,u,t,s,v){r.getSWebTwain().OverlayRectangle(w,y,x,u,t,s,v);return l.checkErrorString(r)};o.RemoveAllImages=function(){var s;r.getSWebTwain().RemoveAllImages();s=l.checkErrorString(r);if(s){r.__innerRefreshImage()}return s};o.RemoveAllSelectedImages=function(){var s;r.getSWebTwain().RemoveAllSelectedImages();s=l.checkErrorString(r);if(s){r.__innerRefreshImage()}return s};o.RemoveImage=function(t){var s=parseInt(t);if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().RemoveImage(s);return l.checkErrorString(r)};o.MirrorAsync=function(s){return l.wrapperPromise(r,r.Mirror(s))};o.RemoveAllImagesAsync=function(){return l.wrapperPromise(r,r.RemoveAllImages())};o.RemoveAllSelectedImagesAsync=function(){return l.wrapperPromise(r,r.RemoveAllSelectedImages())};o.RemoveImageAsync=function(s){return l.wrapperPromise(r,r.RemoveImage(s))};o.Rotate=function(x,u,w,s,v){var t=parseInt(x),y,z;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}y=r.getSWebTwain().Rotate(t,u,w);return l.wrapperRet(r,y,s,v)};o.RotateEx=function(A,u,t,z,y,v){var x=parseInt(A),s,w;if(isNaN(x)||x<0||x>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().RotateEx(x,u,t,z);return l.wrapperRet(r,s,y,v)};o.RotateLeft=function(v,s,u){var t=parseInt(v),w,x;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().RotateLeft(t);return l.wrapperRet(r,w,s,u)};o.RotateRight=function(v,s,u){var t=parseInt(v),w,x;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().RotateRight(t);return l.wrapperRet(r,w,s,u)};o.ChangeImageSize=function(A,y,w,z,x,t){var v=parseInt(A),s,u;if(isNaN(v)||v<0||v>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(t)){t(r.ErrorCode,r.ErrorString)}return false}if(y<=0||w<=0){c.Errors.InvalidWidthOrHeight(r);if(c.isFunction(t)){t(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().ChangeImageSize(v,y,w,z);return l.wrapperRet(r,s,x,t)};o.Flip=function(v,s,u){var t=parseInt(v),w,x;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().Flip(t);return l.wrapperRet(r,w,s,u)};o.Crop=function(B,u,y,A,t,z,v){var x=parseInt(B),s,w;if(isNaN(x)||x<0||x>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().Crop(x,u,y,A,t);return l.wrapperRet(r,s,z,v)};o.CropToClipboard=function(v,y,x,u,s){var t=parseInt(v),w,z;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}w=r.getSWebTwain().CropToClipboard(t,y,x,u,s);return l.checkErrorString(r)};o.CutFrameToClipboard=function(v,y,x,u,s){var t=parseInt(v),w,z;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}w=r.getSWebTwain().CutFrameToClipboard(t,y,x,u,s);return l.checkErrorString(r)};o.CutToClipboard=function(t){var s=parseInt(t),u,v;if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}u=r.getSWebTwain().CutToClipboard(s);return l.checkErrorString(r)};o.RotateAsync=function(t,s,u){return l.wrapperPromise(r,r.Rotate(t,s,u))};o.RotateExAsync=function(u,t,v,s){return l.wrapperPromise(r,r.RotateEx(u,t,v,s))};o.RotateLeftAsync=function(s){return l.wrapperPromise(r,r.RotateLeft(s))};o.RotateRightAsync=function(s){return l.wrapperPromise(r,r.RotateRight(s))};o.ChangeImageSizeAsync=function(u,v,s,t){return l.wrapperPromise(r,r.ChangeImageSize(u,v,s,t))};o.FlipAsync=function(s){return l.wrapperPromise(r,r.Flip(s))};o.CropAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.Crop(u,w,v,t,s))};o.CropToClipboardAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.CropToClipboard(u,w,v,t,s))};o.CutFrameToClipboardAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.CutFrameToClipboard(u,w,v,t,s))};o.CutToClipboardAsync=function(s){return l.wrapperPromise(r,r.CutToClipboard(s))};o.InvertAsync=function(s){return l.wrapperPromise(r,r.Invert(s))};o.Invert=function(t){var s=parseInt(t),u,v;if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}c.Errors.ActiveXNotSupport(r);return false};o.SetDPI=function(A,w,t,x,z,y,u){var v=parseInt(A),s;if(isNaN(v)||v<0||v>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().SetDPI(v,w,t,x,z);return l.wrapperRet(r,s,y,u)};o.SetViewMode=function(t,s){r.getSWebTwain().SetViewMode(t,s);return l.checkErrorString(r)};o.GetViewModeH=function(){var s=r.getSWebTwain().GetViewModeH();l.setErrorString(r);return s};o.GetViewModeV=function(){var s=r.getSWebTwain().GetViewModeV();l.setErrorString(r);return s};o.MoveImage=function(v,u){var t=parseInt(v),s=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer||isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().MoveImage(t,s);return l.checkErrorString(r)};o.SwitchImage=function(v,u){var t=parseInt(v),s=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer||isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().SwitchImage(t,s);return l.checkErrorString(r)};o.Print=function(){r.getSWebTwain().Print();return l.checkErrorString(r)};o.checkErrorString=function(){return l.isReturnSuccess(r)};o.FileExists=function(t){var u=l.replaceLocalFilename(t);var s=r.getSWebTwain().FileExists(u);l.setErrorString(r);return s};o.SaveAllAsMultiPageTIFF=function(s,w,u){if(!p(r,u)){return false}var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAllAsMultiPageTIFF(v);return l.wrapperRet(r,t,w,u)};o.SaveAllAsPDF=function(s,w,u){if(!p(r,u)){return false}var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAllAsPDF(v);return l.wrapperRet(r,t,w,u)};o.SaveAsBMP=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsBMP(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsJPEG=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsJPEG(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsPDF=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsPDF(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsPNG=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsPNG(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsTIFF=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsTIFF(w,v);return l.wrapperRet(r,t,x,u)};o.SaveSelectedImagesAsMultiPagePDF=function(s,w,u){var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveSelectedImagesAsMultiPagePDF(v);return l.wrapperRet(r,t,w,u)};o.SaveSelectedImagesAsMultiPageTIFF=function(s,w,u){var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveSelectedImagesAsMultiPageTIFF(v);return l.wrapperRet(r,t,w,u)};o.SaveSelectedImagesToBase64Binary=function(u,t){var s=r.getSWebTwain().SaveSelectedImagesToBase64Binary();return l.wrapperRet(r,s,u,t)};o.ShowFileDialog=function(t,s,z,v,x,y,u,w){r.getSWebTwain().ShowFileDialog(t,s,z,v,x,y,u,w);return l.checkErrorString(r)};o.FTPDownload=function(w,v,u,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPDownload(w,v);return l.wrapperRet(r,s,u,t)};o.FTPDownloadDirectly=function(x,w,s,v,u){if(!m(u)){return false}var t=r.getSWebTwain().FTPDownloadDirectly(x,w,s);return l.wrapperRet(r,t,v,u)};o.FTPDownloadEx=function(x,w,u,v,t){if(!m(t)){return false}if(u<-1||u>5){u=-1}if(!n(u,t)){return g}var s=r.getSWebTwain().FTPDownloadEx(x,w,u);return l.wrapperRet(r,s,v,t)};o.FTPUpload=function(x,u,w,v,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUpload(x,u,w);return l.wrapperRet(r,s,v,t)};o.FTPUploadDirectly=function(x,s,w,v,u){if(!m(u)){return false}var t=r.getSWebTwain().FTPUploadDirectly(x,s,w);return l.wrapperRet(r,t,v,u)};o.FTPUploadEx=function(y,u,x,v,w,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUploadEx(y,u,x,v);return l.wrapperRet(r,s,w,t)};o.FTPUploadAllAsMultiPageTIFF=function(w,v,u,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUploadAllAsMultiPageTIFF(w,v);return l.wrapperRet(r,s,u,t)};o.FTPUploadAllAsPDF=function(w,v,u,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUploadAllAsPDF(w,v);return l.wrapperRet(r,s,u,t)};o.FTPUploadAsMultiPagePDF=function(w,v,u,t){var s=r.getSWebTwain().FTPUploadAsMultiPagePDF(w,v);return l.wrapperRet(r,s,u,t)};o.FTPUploadAsMultiPageTIFF=function(w,v,u,t){var s=r.getSWebTwain().FTPUploadAsMultiPageTIFF(w,v);return l.wrapperRet(r,s,u,t)};o.HTTPDownloadDirectly=function(w,v,s,x,u){if(!m(u)){return false}var t=r.getSWebTwain().HTTPDownloadDirectly(w,v,s);return l.wrapperRet(r,t,x,u)};o.HTTPDownload=function(v,u,x,t){var s,w=l.getImageType(u);return r.HTTPDownloadEx(v,u,w,x,t)};o.HTTPDownloadEx=function(w,v,u,x,t){if(!m(t)){return g}if(u<-1||u>5){u=-1}if(!n(u,t)){return g}var s=r.getSWebTwain().HTTPDownloadEx(w,v,u);return l.wrapperRet(r,s,x,t)};o.HTTPDownloadThroughGet=o.HTTPDownloadEx;o.HTTPUploadThroughPostDirectly=function(w,t,s,y,x,v){if(!m(v)){return false}var u=r.getSWebTwain().HTTPUploadThroughPostDirectly(w,t,s,y);return l.wrapperRet(r,u,x,v,true)};o.HTTPUploadThroughPost=function(w,v,s,y,x,u){if(!c.isNumber(v)||isNaN(v)||v<-2){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}var t=r.getSWebTwain().HTTPUploadThroughPost(w,v,s,y);return l.wrapperRet(r,t,x,u,true)};o.HTTPUploadThroughPostEx=function(w,v,s,z,x,y,u){if(!c.isNumber(v)||isNaN(v)||v<-2){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}var t=r.getSWebTwain().HTTPUploadThroughPostEx(w,v,s,z,x);return l.wrapperRet(r,t,y,u,true)};o.ClearAllHTTPFormField=function(){r.getSWebTwain().ClearAllHTTPFormField();return l.checkErrorString(r)};o.SetHTTPFormField=function(t,s){r.getSWebTwain().SetHTTPFormField(t,s);return l.checkErrorString(r)};o.HTTPUploadAllThroughPostAsMultiPageTIFF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadAllThroughPostAsMultiPageTIFF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadThroughPostAsMultiPageTIFF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadThroughPostAsMultiPageTIFF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadAllThroughPostAsPDF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadAllThroughPostAsPDF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadThroughPostAsMultiPagePDF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadThroughPostAsMultiPagePDF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadThroughPutDirectly=function(w,t,s,x,v){var u;u=r.getSWebTwain().HTTPUploadThroughPutDirectly(w,t,s);return l.wrapperRet(r,u,x,v)};o.HTTPUploadThroughPut=function(v,u,s,x,t){var w=l.getImageType(s);return r.HTTPUploadThroughPutEx(v,u,s,w,x,t)};o.HTTPUploadThroughPutEx=function(w,v,s,x,y,u){var t;t=r.getSWebTwain().HTTPUploadThroughPutEx(w,v,s,x);return l.wrapperRet(r,t,y,u)};o.HTTPUploadAllThroughPutAsMultiPageTIFF=function(v,s,x,u){var t=-1,w=2;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.HTTPUploadThroughPutAsMultiPageTIFF=function(v,s,x,u){var t=-2,w=2;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.HTTPUploadAllThroughPutAsPDF=function(v,s,x,u){var t=-1,w=4;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.HTTPUploadThroughPutAsMultiPagePDF=function(v,s,x,u){var t=-2,w=4;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.ShowImageEditor=function(){r.getSWebTwain().ShowImageEditor();return l.checkErrorString(r)};o.SetCookie=function(s){r.getSWebTwain().SetCookie(s);return l.checkErrorString(r)};o.LoadImageFromBase64Binary=function(s,u){if(!m()){return g}if(u<-1||u>5){u=-1}if(!n(u)){return g}var t=r.getSWebTwain().LoadImageFromBase64Binary(s,u);l.setErrorString(r);return t};o.SaveSelectedImagesToBytes=function(u,s){var t=r.getSWebTwain().SaveSelectedImagesToBytes(u,s);l.setErrorString(r);return t};o.LoadImageFromBytes=function(v,s,u){if(!m()){return g}if(u<-1||u>5){u=-1}if(!n(u)){return g}var t=r.getSWebTwain().LoadImageFromBytes(v,s,u);l.setErrorString(r);return t};o.UnregisterEvent=function(s,t){r.getSWebTwain().UnregisterEvent(s,t);return l.checkErrorString(r)};o.SetImageWidth=function(w,x,s,u){var t=parseInt(w),v;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}v=r.getSWebTwain().SetImageWidth(t,x);return l.wrapperRet(r,v,s,u)};o.HTTPDownloadThroughPost=function(w,v,u,x,t){if(!m(t)){return false}if(u<-1||u>5){u=-1}if(!n(u,t)){return g}var s=r.getSWebTwain().HTTPDownloadThroughPost(w,v,u);return l.wrapperRet(r,s,x,t)};o.SetCustomDSDataEx=function(s){r.getSWebTwain().SetCustomDSDataEx(s);return l.checkErrorString(r)};o.SetCustomDSData=function(s){r.getSWebTwain().SetCustomDSData(s);return l.checkErrorString(r)};o.GetCustomDSDataEx=function(){var s=r.getSWebTwain().GetCustomDSDataEx();l.setErrorString(r);return s};o.GetCustomDSData=function(s){var t=r.getSWebTwain().GetCustomDSData(s);l.setErrorString(r);return t};o.ChangeBitDepth=function(u,t,v){var s=parseInt(u);if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().ChangeBitDepth(s,t,v);return l.checkErrorString(r)};o.ConvertToGrayScale=function(w,s,u){var t=parseInt(w),v;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}v=r.getSWebTwain().ConvertToGrayScale(w);return l.wrapperRet(r,v,s,u)};o.ShowImageEditorEx=function(t,w,s,v,u){r.getSWebTwain().ShowImageEditorEx(t,w,s,v,u);return l.checkErrorString(r)};o.ClearTiffCustomTag=function(){r.getSWebTwain().ClearTiffCustomTag();return l.checkErrorString(r)};o.SetTiffCustomTag=function(u,t,v){var s=u*1;if(s<=0||s>2147483647){Dynamsoft.Lib.Errors.InvalidTiffTagError(r);return false}r.getSWebTwain().SetTiffCustomTag(u,t,v);return l.checkErrorString(r)};o.IsBlankImageExpress=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().IsBlankImageExpress(t);l.setErrorString(r);return s};o._ChangeWidth=function(t){var s=document.getElementById(r._strDWTInnerContainerID),w;if(c.isString(t)){if(t.length>0){if(t.charAt(t.length-1)==="%"){w=t}}}if(!w){var u=parseInt(t);if(u&&u>2){w=(u-2)+"px"}}if(w){r._strWidth=w;r.getSWebTwain().style.width=w;if(s){s.style.width=w}}return f};o._ChangeHeight=function(t){var s=document.getElementById(r._strDWTInnerContainerID),w;if(c.isString(t)){if(t.length>0){if(t.charAt(t.length-1)==="%"){w=t}}}if(!w){var u=parseInt(t);if(u){w=u+"px"}}if(w){r._strHeight=w;r.getSWebTwain().style.height=w;if(s){s.style.height=w}}return f};o.SetSize=function(s,t){var u=this;u._ChangeWidth(s);u._ChangeHeight(t);return f};o.SetSelectedImageArea=function(u,w,v,t,s){r.getSWebTwain().SetSelectedImageArea(u,w,v,t,s);return l.checkErrorString(r)};o.SetVideoRotateMode=function(s){r.getSWebTwain().SetVideoRotateMode(s);return l.checkErrorString(r)};o.SetOpenSourceTimeout=function(s){r.getSWebTwain().SetOpenSourceTimeout(s);return l.checkErrorString(r)};o.SetHTTPHeader=function(s,t){return false};o.GetImageURL=function(s,t,u){return""};o.GetImagePartURL=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return""}var s=r.getSWebTwain().GetDIB(t);l.setErrorString(r);return s};o.GetLicenseInfo=function(s){try{r.getSWebTwain().ProductKey=s;var u=r.getSWebTwain().GetLicenseInfo();if(l.checkErrorString(r)){var v=c.parse(u);if(v&&v.message){c.Errors.LicenseEmptyOrInvalid(r);r._errorString=v.message;v=undefined}r.__licenseInfo=v}else{r.__licenseInfo=undefined}}catch(t){r.__licenseInfo=undefined}return Promise.resolve(r.__licenseInfo)};o.LoadDibFromClipboard=function(u,t){var s;s=r.getSWebTwain().LoadDibFromClipboard();return l.wrapperRet(r,s,u,t)};o.LoadImage=function(s,w,u){if(!m(u)){return false}var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().LoadImage(v);return l.wrapperRet(r,t,w,u)};o.LoadImageEx=function(t,w,y,v){if(!m(v)){return g}if(w<-1||w>5){w=-1}if(!n(w,v)){return g}var x=l.replaceLocalFilename(t),s=w,u;if(s==EnumDWT_ImageType.IT_ALL){s=-1}u=r.getSWebTwain().LoadImageEx(x,s);return l.wrapperRet(r,u,y,v)};o.EnableSource=function(t,u,s){r.AcquireImage(t,u,s);return l.checkErrorString(r)};o.AcquireImage=function(A,z,x){var s=r.getSWebTwain(),y,v=null,w=null,u=null;if(c.isUndefined(x)&&(c.isFunction(A)&&c.isFunction(z)||c.isFunction(A)&&c.isUndefined(z)||c.isFunction(A)&&z==null||A==null&&c.isFunction(z))){v=null;if(c.isFunction(A)){w=A}if(c.isFunction(z)){u=z}}else{if(!c.isUndefined(A)){v=A}if(c.isFunction(z)){w=z}if(c.isFunction(x)){u=x}}if(!m(u)){return false}if(v!==undefined&&v!==null){var t;t=v.SelectSourceByIndex;if(t!=null&&typeof(t)!="undefined"){s.SelectSourceByIndex(t);s.CloseSource();s.OpenSource()}t=v.IfShowUI;if(t!=null&&typeof(t)!="undefined"){s.IfShowUI=t}t=v.PixelType;if(t!=null&&typeof(t)!="undefined"){s.PixelType=t}t=v.Resolution;if(t!=null&&typeof(t)!="undefined"){s.Resolution=t}t=v.IfFeederEnabled;if(t!=null&&typeof(t)!="undefined"){s.IfFeederEnabled=t}t=v.IfDuplexEnabled;if(t!=null&&typeof(t)!="undefined"){s.IfDuplexEnabled=t}t=v.IfDisableSourceAfterAcquire;if(t!=null&&typeof(t)!="undefined"){s.IfDisableSourceAfterAcquire=t}}r.getSWebTwain().RegisterEvent("OnPostAllTransfers",function(){var B=l.checkErrorString(r);if(B){if(c.isFunction(w)){w()}}else{if(c.isFunction(u)){u(r._errorCode,r._errorString)}}if(c.isFunction(r.__OnPostAllTransfers)){r.__OnPostAllTransfers()}});y=s.AcquireImage();return l.checkErrorString(r)};o.GenerateURLForUploadData=function(v,w,u){var s=v,t;if(s==EnumDWT_ImageType.IT_ALL){s=-1}t=true;return l.wrapperRet(r,t,w,u)};o._innerFun=function(s,t,u){var w=r.getSWebTwain(),v=w[s];if(typeof(v)==="function"){return v.apply(w,t)}else{return v}};o.ActiveUI=function(t,s){};o.startScan=function(){return new Promise(function(t,s){})};o.IndexToImageID=function(s){return s};o.ImageIDToIndex=function(s){return s};o.first=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){r.CurrentImageIndexInBuffer=0;r.__innerRefreshImage()}return f};o.previous=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){t=r.CurrentImageIndexInBuffer;if(t>0){r.CurrentImageIndexInBuffer=t-1;r.__innerRefreshImage()}}return f};o.next=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){t=r.CurrentImageIndexInBuffer;if(t>=0&&t<s-1){r.CurrentImageIndexInBuffer=t+1;r.__innerRefreshImage()}}return f};o.last=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){r.CurrentImageIndexInBuffer=s-1;r.__innerRefreshImage()}return f};o.__innerRefreshImage=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){t=r.CurrentImageIndexInBuffer;if(r.__OnRefreshUI){r.__OnRefreshUI(t,s)}}};o._attachEvents=function(){var s=r.getSWebTwain(),t;t=Dynamsoft.Lib.detect.getVersionArray(String(r.VersionInfo));if(t.length<=2||t[0]<9||t[0]==9&&t[1]<=2){return}if(r.__OnPostTransfer!=""){s.RegisterEvent("OnPostTransfer",r.__OnPostTransfer)}if(r.__OnPostAllTransfers!=""){s.RegisterEvent("OnPostAllTransfers",r.__OnPostAllTransfers)}if(r.__OnMouseClick!=""){s.RegisterEvent("OnMouseClick",r.__OnMouseClick)}if(r.__OnPostLoad!=""){s.RegisterEvent("OnPostLoad",r.__OnPostLoad)}if(r.__OnImageAreaSelected!=""){s.RegisterEvent("OnImageAreaSelected",r.__OnImageAreaSelected)}if(r.__OnMouseDoubleClick!=""){s.RegisterEvent("OnMouseDoubleClick",r.__OnMouseDoubleClick)}if(r.__OnMouseRightClick!=""){s.RegisterEvent("OnMouseRightClick",r.__OnMouseRightClick)}if(r.__OnTopImageInTheViewChanged!=""){s.RegisterEvent("OnTopImageInTheViewChanged",r.__OnTopImageInTheViewChanged)}if(r.__OnImageAreaDeSelected!=""){s.RegisterEvent("OnImageAreaDeSelected",r.__OnImageAreaDeSelected)}if(r.__OnGetFilePath!=""){s.RegisterEvent("OnGetFilePath",r.__OnGetFilePath)}if(r.__OnAfterOperate!=""){s.RegisterEvent("OnAfterOperate",r.__OnAfterOperate)}if(r.__OnBeforeOperate!=""){s.RegisterEvent("OnBeforeOperate",r.__OnBeforeOperate)}if(r.__OnOperateStatus!=""){s.RegisterEvent("OnOperateStatus",r.__OnOperateStatus)}if(r.__OnBitmapChanged!=""){s.RegisterEvent("OnBitmapChanged",r.__OnBitmapChanged)}if(r.__OnMouseMove!=""){s.RegisterEvent("OnMouseMove",r.__OnMouseMove)}if(r.__OnPreAllTransfers!=""){s.RegisterEvent("OnPreAllTransfers",r.__OnPreAllTransfers)}if(r.__OnPreTransfer!=""){s.RegisterEvent("OnPreTransfer",r.__OnPreTransfer)}if(r.__OnSourceUIClose!=""){s.RegisterEvent("OnSourceUIClose",r.__OnSourceUIClose)}if(r.__OnTransferCancelled!=""){s.RegisterEvent("OnTransferCancelled",r.__OnTransferCancelled)}if(r.__OnTransferError!=""){s.RegisterEvent("OnTransferError",r.__OnTransferError)}if(r.__OnInternetTransferPercentage!=""){s.RegisterEvent("OnInternetTransferPercentage",r.__OnInternetTransferPercentage)}if(r.__OnInternetTransferPercentageEx!=""){s.RegisterEvent("OnInternetTransferPercentageEx",r.__OnInternetTransferPercentageEx)}}};function k(p){var s=p,r=c.get(s._strDWTNonInstallInnerContainerID),n="",q;if(r.innerHTML!=""){return}if(Dynamsoft.WebTwainEnv.ActiveXInstallWithCAB&&h.bIE){q=["<div style='display: block; border:solid black 1px; text-align:center; width:",s._strWidth,";height:",s._strHeight,"'>","<ul style='padding-top:100px;'>","<li>The Component is not installed</li>","<li>You need to download and install the ActiveX to use this sample.</li>","<li>Please follow the instructions in the information bar.</li>","</ul></div>"].join("")}else{var m=("https:"==location.protocol?"https://":"http://");if(c.product.bHTML5Edition){n=Dynamsoft.dcp.getDSPath()}else{if(h.bIE){n=Dynamsoft.dcp.getDSPath()}else{n=(h.bWin)?c.product.getMSIPath():c.product.getPKGPath()}}q=["<div style='display: block; border:solid black 1px; text-align:center; width:",s._strWidth,";height:",s._strHeight,"'>","<ul style='padding-top:100px;'>","<li>The Component is not installed</li>","<li>You need to download and install to use this sample.</li>","<li>Please click the below link to download it.</li>","<li><a href='",n,"'>Download</a></li>","</ul></div>"].join("")}r.innerHTML=q}c.noControl=function(m){if(Dynamsoft.WebTwainEnv.IfUseEmbeddedDownloadNoticeForActiveX){if(c.isFunction(c.detect.onNoControl)){c.detect.onNoControl(m._containerID,m._strWidth,m._strHeight)}else{var n=c.detect.arySTwains;for(var p=0;p<n.length;p++){var t=n[p];if(!t._vPluginExist){k(t);c.show(t._strDWTNonInstallInnerContainerID);c.hide(t._strDWTInnerContainerID)}}}}else{var s=window,q=c.product,r="";if(c.isFunction(s.OnWebTwainNotFoundOnWindowsCallback)){if(h.bIE){r=Dynamsoft.dcp.getDSPath()}else{if(q.bHTML5Edition){r=Dynamsoft.dcp.getDSPath()}else{r=q.getMSIPath()}}s.OnWebTwainNotFoundOnWindowsCallback(q.name,r,q.bHTML5Edition,h.bIE,h.bSafari,c.detect.ssl,c.env.strIEVersion)}}}});Dynamsoft.Ready(function(d,b){if(!d.product.bActiveXEdition){return}var c=Dynamsoft.navInfo;function a(e){var f=this,g=e||{};f._containerID=g.containerID||"dwtcontrolContainer";f._strWidth=g.width||270;f._strHeight=g.height||350;f._errorCode=0;f._errorString="";f.__licenseInfo=false;if(d.isString(f._strWidth)&&f._strWidth.indexOf("%")>0){}else{f._strWidth=[parseInt(f._strWidth),"px"].join("")}if(d.isString(f._strHeight)&&f._strHeight.indexOf("%")>0){}else{f._strHeight=[parseInt(f._strHeight),"px"].join("")}f._strObjectName=f._containerID+"_Obj";f.__config=g;f.__OnPluginReady=g.onPluginReady;f.__OnPluginNotReady=g.onPluginNotReady;f.Addon={};f._strDWTInnerContainerID=f._containerID+"_CID";f._strDWTNonInstallInnerContainerID=f._containerID+"_NonInstallCID";var h=document.createElement("div");document.body.appendChild(h);f._fakeControl=h;f._createControl()}a.prototype._createControl=function(){var f;var i=this,h=i._strWidth,e=i._strHeight,g;if(d.isString(h)){if(h.indexOf("%")>0){h="100%"}else{h=parseInt(h)+2+"px"}}if(d.isString(e)){if(e.indexOf("%")>0){e="100%"}else{e=parseInt(e)+2+"px"}}if(!Dynamsoft.WebTwainEnv.ActiveXInstallWithCAB){g=['<div id="',i._strDWTInnerContainerID,'" style="width:',h,";height:",e,'">','<object id="',i._strObjectName,'" style="width:',i._strWidth,";height:",i._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',d.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>","</div>"]}else{g=['<div id="',i._strDWTInnerContainerID,'" style="width:',h,";height:",e,'">','<object id="',i._strObjectName,'" style="width:',i._strWidth,";height:",i._strHeight,';border:1px solid #AAAAAA"',' codebase="',(c.bWin64)?d.product.getActiveXCABx64Path():d.product.getActiveXCABx86Path(),"#version=",Dynamsoft.WebTwainEnv.ActiveXVersion,'"',' classid="clsid:',d.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>","</div>"]}g.push('<div id="',i._strDWTNonInstallInnerContainerID,'" style="width: ',h,';display:none"></div>');f=document.getElementById(i._containerID);if(f){f.innerHTML=g.join("")}i._fakeControl._objWebTwain=null;i._fakeControl.getSWebTwain=function(){var j=this;if(j._objWebTwain===null){j._objWebTwain=document.getElementById(i._strObjectName)}return j._objWebTwain}};a.prototype.getInstance=function(){var f=this,e=f._fakeControl.getSWebTwain();if(e){return f._fakeControl}return false};a.prototype._isMobileMode=function(){return false};d.detect._controlDetect=function(){var n=d.detect.arySTwains,h=n[0],k=h&&h._fakeControl&&h._fakeControl.getSWebTwain();if(k){var l=Dynamsoft.WebTwainEnv,j=l.ProductKey;var f=false;if(c.bIE){var e=navigator.userAgent.toLowerCase(),i=!c.bOSx64||(e.indexOf("wow64")>=0),m;if(i){m="DynamicPdfCore_"+l.PdfVersion+".dll"}else{m="DynamicPdfCorex64_"+l.PdfVersion+".dll"}if(k.ErrorCode==0&&""!=k.GetAddOnVersion("pdf",m)){f=true}}else{if(k.ErrorCode==0){f=true}}if(f){clearInterval(d.detect._varSeed);var g=function(r){var p,s,q;for(p=0;p<n.length;p++){s=n[p];q=s._fakeControl.getSWebTwain();d.__innerInitEvents(s._fakeControl,s.__config);s._fakeControl.__OnRefreshUI=s.__config.onRefreshUI||"";d.attachProperty(s._fakeControl);d.attachMethod(s._fakeControl);s._fakeControl._attachEvents();s._fakeControl.GetLicenseInfo(r);d.attachAddon(s._fakeControl);if(d.isFunction(s.__OnPluginReady)){s.__OnPluginReady()}}};if(d.startsWith(j,"http://")||d.startsWith(j,"https://")){d.ajax({method:"GET",url:j,onSuccess:function(o){g(o)}})}else{g(j)}}else{if(!d.detect.bNoControlEvent){d.noControl(h);d.detect.bNoControlEvent=true}if(d.isFunction(k.__OnPluginNotReady)){k.__OnPluginNotReady()}}}else{clearInterval(d.detect._varSeed)}};d.ie={};d.ie.DynamicWebTwain=function(e){var f=new a(e);d.detect.arySTwains.push(f);return f};d.ie.closeAll=function(){var e=d.detect.arySTwains,f,h,g;for(f=0;f<e.length;f++){h=e[f];if(h&&h._fakeControl){g=h._fakeControl.getSWebTwain();if(g&&g.ErrorCode==0){g.RemoveAllImages()}}}d.detect.arySTwains=[]};Dynamsoft.WebTwainEnv.RemoveAllAuthorizations=function(){return false}});Dynamsoft.Ready(function(e,c){var b=Dynamsoft;if(!e.product.bPluginEdition){return}var d=Dynamsoft.navInfo,f=document,h=navigator,g;function a(i){var j=this,k=i||{};j._containerID=k.containerID||"dwtcontrolContainer";j._strWidth=k.width||270;j._strHeight=k.height||350;if(e.isString(j._strWidth)&&j._strWidth.indexOf("%")>0){}else{j._strWidth=[parseInt(j._strWidth),"px"].join("")}if(e.isString(j._strHeight)&&j._strHeight.indexOf("%")>0){}else{j._strHeight=[parseInt(j._strHeight),"px"].join("")}j._strObjectName=j._containerID+"_Obj";e.__innerInitEvents(j,k);j.__OnPluginReady=k.onPluginReady;j.__OnPluginNotReady=k.onPluginNotReady;j.__OnRefreshUI=k.onRefreshUI||"";j._objectWebTwain=null;j._strDWTInnerContainerID=j._containerID+"_CID";j._strDWTNonInstallInnerContainerID=j._containerID+"_NonInstallCID";j._vNotAllowedForChrome=false;j._vPluginExist=false;j.Addon={}}g=a.prototype;g.getSWebTwain=function(){var i=this;return i._objectWebTwain};g._isMobileMode=function(){return false};g.getInstance=function(){var i=this;if(i._objectWebTwain){return i}return false};g._createControl=function(){var n=this,k,m=n._strWidth,j=n._strHeight,l;if(e.isString(m)){if(m.indexOf("%")>0){m="100%"}else{m=parseInt(m)+2+"px"}}if(e.isString(j)){if(j.indexOf("%")>0){j="100%"}else{j=parseInt(j)+2+"px"}}l=['<div id="',n._strDWTInnerContainerID,'" style="width:',m,";height:",j,'">'];if(d.bIE){if(!Dynamsoft.WebTwainEnv.ActiveXInstallWithCAB){l.push('<object id="',n._strObjectName,'" style="width:',n._strWidth,";height:",n._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>")}else{l.push('<object id="',n._strObjectName,'" style="width:',n._strWidth,";height:",n._strHeight,';border:1px solid #AAAAAA"',' codebase="',(d.bWin64)?e.product.getActiveXCABx64Path():e.product.getActiveXCABx86Path(),"#version=",Dynamsoft.WebTwainEnv.ActiveXVersion,'"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>")}}else{var i=n._strWidth;if(e.isString(i)&&i.indexOf("%")==-1){i=(parseInt(i)-2)+"px"}l.push('<embed id="',n._strObjectName,'" style="display: inline; width:',i,";height:",n._strHeight,'" type="',e.product.strMIMEType,'"',' pluginspage="',(d.bWin)?e.product.getMSIPath():e.product.getPKGPath(),'"></embed>')}l.push('</div><div id="',n._strDWTNonInstallInnerContainerID,'" style="width: ',m,';display:none"></div>');k=e.get(n._containerID);if(k){k.innerHTML=l.join("")}n._objectWebTwain=e.get(n._strObjectName)};g._notAllowedForChrome=function(){if(!d.bIE){var i=(h.userAgent.toLowerCase()),j=this;if(i.match(/chrome\/([\d.]+)/)){if(j.__OnNotAllowedForChrome){j.__OnNotAllowedForChrome(j._strDWTInnerContainerID)}else{j._createNonAllowedDivPlugin();e.get(j._strDWTNonInstallInnerContainerID).style.display="inline";e.get(j._strDWTInnerContainerID).style.display="none"}}}};g._createNonAllowedDivPlugin=function(){var p=this,n=e.get(p._strDWTNonInstallInnerContainerID);if(n.innerHTML!=""){return}var k=p._strHeight;if(e.isString(k)&&k.indexOf("%")==-1){k=(parseInt(k)-10)+"px"}var l=['<div style="display: block; border:1px solid black; width:',p._strWidth,";height:",k,'">','<div style="margin: 200px 0 0 0; padding: 5px; font-size: 16px;line-height: 30px; ">',"<div>The Component is not allowed to run on this site.</div>",'<div>Please click <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJeSURBVDhPvZRNSxthEMeX0mNpKS09tP04tdBqobT9WCGJ5kU9pIk5xB4KaoJGmoiNMS+IUiqNB08mjUoUN2vU3WyS9d+ZIbvEZREP0j8Mk5ln5sfs7jxRcM/6f8BKpYKZmRlEIhGUSiUYhjE8uV2eQIal0xmobQ3aeQc/CwWUy+Xh6e3yBM7OzuJMbcPs9cUYzNPeRQLc29tDKpVCOBx2LJ3JQDe66Jo9fI3HEY1GnTOurdVqAnBLgFxwcNBAp3N5w0yTJiTTtA5UVXPy9XpDerwkwOnpaZydtWma/p3s8OgYcZraSwIMhULoXFx6NntZvf4XyWRSAG45QO38wrO51x/Asq7F27nbJMBEIoFm8wiLS0uYm0s6j88QfXUF6ucJXNMe2lAWx+qXD3I+KgHu7OwgEAjI/q2vr2N5eUUaebIWwRovFLTG38AaQtlzLPlP4wKyJcB8Pi83IpfLoVqtYmFh0ZnQ0nU0qHn/uSJ+0G7fiPl8VAL0+/20cyZdsTLm57+hdXIqQAdKE+1T869nCnZfK+I5dsNYAgwGg7i8MhwIG8cbG0Wafo1+X6FPk5VfPUDxqSK+r6oCcEuAU1NT0GhhDQLZVtwsIZvNShFPuDX+FqtPFORfPhS/9X5M8m4JkO/pyakKo0uwof3e/SMF3FQg2PfHCgoEMWlS9nbshgqQt755eIwr3RTYOV+vRlMK1j5OIPlIwY93YxgM39mAIBxzns9HJcDt7W3EYjH5OD6fD5OTk7KbrDo99go12TBbDOV8Peuxh5Zl0Z8ATUdFOjWy55jztt1VArw/Af8A9+n0bhYJ0I4AAAAASUVORK5CYII="/>','at the right end of the address bar and click "<b>Always allow plug-ins</b>". Then refresh/restart the browser.</div>',"</div></div>"].join("");n.innerHTML=l;function m(){e.get(p._strDWTNonInstallInnerContainerID).style.display="none";e.get(p._strDWTInnerContainerID).style.display="inline"}for(var j=0;j<f.links.length;j++){if(f.links[j].className=="DWT_CloseNonAllowedDiv"){f.links[j].onclick=m}}};e.detect._controlDetect=function(){var z=e.detect.arySTwains,s=z[0],v=s&&s._objectWebTwain;if(v){var x=Dynamsoft.WebTwainEnv,u=x.ProductKey;var n=false;if(d.bIE){var l=navigator.userAgent.toLowerCase(),t=!Dynamsoft.navInfo.bOSx64||(l.indexOf("wow64")>=0),y;if(t){y="DynamicPdfCore_"+x.PdfVersion+".dll"}else{y="DynamicPdfCorex64_"+x.PdfVersion+".dll"}if(v.ErrorCode==0&&""!=v.GetAddOnVersion("pdf",y)){n=true}}else{if(v.ErrorCode==0){n=true}}if(n){clearInterval(e.detect._varSeed);var r=function(A){var j,B;for(j=0;j<z.length;j++){B=z[j];e.attachProperty(B);e.attachMethod(B);B._attachEvents();B.GetLicenseInfo(A);e.attachAddon(B);B._objectWebTwain.BrokerProcessType=e.product._iBrokerProcessType;if(!d.bWin){B._objectWebTwain.ImageCaptureDriverType=e.product._iImageCaptureDriverType}if(e.isFunction(B.__OnPluginReady)){B.__OnPluginReady()}}};if(e.startsWith(u,"http://")||e.startsWith(u,"https://")){e.ajax({method:"GET",url:u,onSuccess:function(i){r(i)}})}else{r(u)}}else{var q,m,p,w=h.mimeTypes;if(!d.bIE){var k=true;h.plugins.refresh(false);if(e.env.iPluginLength!=h.plugins.length){for(q=0;q<w.length;q++){if(w[q].type.toLowerCase().indexOf(e.product.strMIMEType.toLowerCase())>-1){location.reload()}}}for(q=0;q<w.length;q++){if(w[q].type.toLowerCase().indexOf(e.product.strMIMEType.toLowerCase())>-1){for(p=0;p<z.length;p++){m=z[p];k=false;m._vPluginExist=true;if(m._vNotAllowedForChrome==false){m._notAllowedForChrome();m._vNotAllowedForChrome=true}}}}if(k&&!e.detect.bNoControlEvent){e.noControl(s);e.detect.bNoControlEvent=true}}else{if(!e.detect.bNoControlEvent){e.noControl(s);e.detect.bNoControlEvent=true}}if(e.isFunction(s.__OnPluginNotReady)){s.__OnPluginNotReady()}}}else{clearInterval(e.detect._varSeed)}};e.plugin={};e.plugin.DynamicWebTwain=function(i){var j=new a(i);j._createControl();e.detect.arySTwains.push(j);return j};e.plugin.closeAll=function(){var j=e.detect.arySTwains,k,m,l;for(k=0;k<j.length;k++){m=j[k];if(m&&m._objectWebTwain){l=m._objectWebTwain;if(l&&l.ErrorCode==0){l.RemoveAllImages()}}}e.detect.arySTwains=[]};Dynamsoft.WebTwainEnv.RemoveAllAuthorizations=function(){return false}});(function(b,J,Q){var M=Dynamsoft.navInfoSync,o=b,V=Dynamsoft.dcp,L=o.win,D=!0,S=!1,d={OK:0,BadVersion:1,Error:2};var y={bConnected:false,versionInfo:function(ah,ac,ag){var af=0,ad=function(an,ak){var aj=[y._getPreUrl(ah,ac),"fa/VersionInfo?ts=",b.now()].join(""),ai,am;ai=[b.product.getDWTPrefix(),b.product.getServerVersionInfo()].join("");am=b.stringify({id:"1",method:"VersionInfo",version:ai,parameter:[]});if(J.OnWebTwainInitMessage){var al=J.CustomizableDisplayInfo.generalMessages.checkingDWTVersion;J.OnWebTwainInitMessage(al,EnumDWT_InitMsg.Info)}b.ajax({method:"POST",url:aj,data:am,onSuccess:an,onError:ak})},ae=function(){y.bConnected=false;if(J.OnWebTwainInitMessage){J.OnWebTwainInitMessage(J.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED,EnumDWT_InitMsg.NotInstalledError)}if(ag){U(ag,d.Error,J.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)}},ab=function(aj){var ai=V._getJSON(aj);if(ai&&"result" in ai){ai=ai.result;if(b.isArray(ai)&&ai.length>0){if(ag){setTimeout(function(){var al=ai[0],am=ai.length>1?ai[1]:"",ak=ai.length>2?ai[2]:0;if(am!==""){if(J.OnWebTwainInitMessage){J.OnWebTwainInitMessage(am,EnumDWT_InitMsg.Error)}if(ag){U(ag,d.Error,J.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)}}else{var an="The WebTwain version is: "+al;if(J.OnWebTwainInitMessage){J.OnWebTwainInitMessage(an,EnumDWT_InitMsg.Info)}if(ak=="64"){Dynamsoft.dcp.b64bit=true}ag(d.OK,ah,ac,al)}},0)}return}}setTimeout(ae,1000)};ad(ab,ae)},_getPreUrl:function(ad,ab){var ac;if(M.bSSL){ac="https://"}else{ac="http://"}return[ac,ad,":",ab,"/"].join("")}};b.DynamicWebTwain=S;var l=L.document,i,m,Z=J.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT,E=J.CustomizableDisplayInfo.errorMessages.ERR_CreateID_MustNotInContainers,p=J.CustomizableDisplayInfo.errorMessages.ERR_CreateID_NotContainer,O=b.each,e="dwt",h=0,G=1,x=2,A=3,U=function(ab,ae,ad,ac){if(b.isFunction(ab)){setTimeout(function(){ab(ae,ad,ac)},10)}};function I(){try{if(typeof WebAssembly==="object"&&typeof WebAssembly.instantiate==="function"){var ab=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(ab instanceof WebAssembly.Module){return new WebAssembly.Instance(ab) instanceof WebAssembly.Instance}}}catch(ac){}return false}b.__innerInitEvents=function(ac,ab){if(ab){O(["onAfterOperate","onBeforeOperate","onOperateStatus","onBitmapChanged","onGetFilePath","onImageAreaDeSelected","onImageAreaSelected","onMouseClick","onMouseDoubleClick","onMouseMove","onMouseRightClick","onPreAllTransfers","onPreTransfer","onPostLoad","onPostTransfer","onPostTransferAsync","onPreAllTransfersAsync","onPostAllTransfers","onSourceUIClose","onTopImageInTheViewChanged","onTransferCancelled","onTransferError","onInternetTransferPercentage","onInternetTransferPercentageEx"],function(ad){ac["__O"+ad.substring(1)]=ab[ad]||""})}};b.replaceControl=function(ac,ab){J.ContainerMap[ac]=ab};i=function(am,ad,aj,ab){var al=b.product,ai=o.getNavInfo(),ac,ah,af;if(ab&&ab._customIP&&(!b.isLocalIP(ab._host))){if(b.isFunction(L.OnRemoteWebTwainNotFoundCallback)){var ae=ab._port;L.OnRemoteWebTwainNotFoundCallback(al.name,ab._host,ae,ab._ssl)}return}if(ai.bMac){if(am){ac=b.one("#"+am);ac.before(b.install._strNonInstallDIV);ah=b.get(b.install._divDWTNonInstallContainerID);if(ah){ah.style.width=ad;ah.style.height=aj}b.show(b.install._divDWTNonInstallContainerID);b.hide(am)}if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(L.OnWebTwainNotFoundOnMacCallback)){af=al.bHTML5Edition?Dynamsoft.dcp.getDSPath():b.product.getPKGPath();L.OnWebTwainNotFoundOnMacCallback(al.name,af,al.bHTML5Edition,ai.bIE,ai.bSafari,b.detect.ssl,b.env.strIEVersion)}}else{if(ai.bLinux){if(am){ac=b.one("#"+am);ac.before(b.install._strNonInstallDIV);ah=b.get(b.install._divDWTNonInstallContainerID);if(ah){ah.style.width=ad;ah.style.height=aj}b.show(b.install._divDWTNonInstallContainerID);b.hide(am)}if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(L.OnWebTwainNotFoundOnLinuxCallback)){var ag,ak;ag=Dynamsoft.dcp.getLinuxHTML5DebPath();ak=Dynamsoft.dcp.getLinuxHTML5RpmPath();L.OnWebTwainNotFoundOnLinuxCallback(al.name,ag,ak,al.bHTML5Edition,ai.bIE,ai.bSafari,b.detect.ssl,b.env.strIEVersion)}}else{if(ai.bChrome||ai.bSafari||ai.bFirefox||ai.bOpera||J.IfUseActiveXForIE10Plus==S||(!J.ActiveXInstallWithCAB&&ai.bIE)){if(am){ac=b.one("#"+am);ac.before(b.install._strNonInstallDIV);ah=b.get(b.install._divDWTNonInstallContainerID);if(ah){ah.style.width=ad;ah.style.height=aj}b.show(b.install._divDWTNonInstallContainerID);b.hide(am)}if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(L.OnWebTwainNotFoundOnWindowsCallback)){af="";if(ai.bIE){af=Dynamsoft.dcp.getDSPath()}else{if(al.bHTML5Edition){af=Dynamsoft.dcp.getDSPath()}else{af=al.getMSIPath()}}L.OnWebTwainNotFoundOnWindowsCallback(al.name,af,al.bHTML5Edition,ai.bIE,ai.bSafari,b.detect.ssl,b.env.strIEVersion)}}}}};m=function(ab){var ac=o.getNavInfo();if(ac.bChrome){b.one("#"+ab).before(b.install._strNonInstallDIV);b.show(b.install._divDWTNonInstallContainerID);b.hide(ab);if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(L.OnWebTwainOldPluginNotAllowedCallback)){L.OnWebTwainOldPluginNotAllowedCallback(b.product.name)}}};b.detect.getVersionArray=function(ab){var ac=ab.toLowerCase().replace(b.product.name.toLowerCase()+" ","");ac=b.replaceAll(ac,"[.]",",");return ac.split(",")};b.detect.isDWTVersionLatest=function(ac){var af=o.getNavInfo();if(b.isUndefined(ac)){return S}var ah=ac.toString().toLowerCase();var ag=b.detect.getVersionArray(ah),ab,ai;if(af.bIE&&(b.product.bPluginEdition||b.product.bActiveXEdition)){ab=J.ActiveXVersion}else{if(b.product.bPluginEdition){ab=J.PluginVersion}else{ab=b.product.getServerVersionInfo(true)}}ab=b.replaceAll(String(ab),"[.]",",");ai=ab.split(",");var ad=ag.length>ai.length?ag.length:ai.length;for(var ae=0;ae<ad;ae++){if(ag[ae]==null){ag[ae]=0}if(ai[ae]==null){ai[ae]=0}if(parseInt(ag[ae])<parseInt(ai[ae])){return S}else{if(parseInt(ag[ae])>parseInt(ai[ae])){return D}}}return D};var P=function(af,ak){var ag=o.getNavInfo();if(b.isFunction(L.OnWebTwainNeedUpgradeCallback)){var ae={},ac,ad;if(ag.bWin){if(ag.bIE){ad=Dynamsoft.dcp.getDSPath()}else{var ai=b.product;if(ai.bHTML5Edition){ad=Dynamsoft.dcp.getDSPath()}else{ad=ai.getMSIPath()}}ac=EnumDWT_PlatformType.enumWindow}else{if(ag.bLinux){var ab,ah;ab=Dynamsoft.dcp.getLinuxHTML5DebPath();ah=Dynamsoft.dcp.getLinuxHTML5RpmPath();ad=ab;ae.deb=ab;ae.rpm=ah;ac=EnumDWT_PlatformType.enumLinux}else{if(b.product.bHTML5Edition){ad=Dynamsoft.dcp.getDSPath()}else{ad=b.product.getPKGPath()}ac=EnumDWT_PlatformType.enumMac}}ae["default"]=ad;var aj=b.one(".dynamsoft-dialog-license");if(aj&&aj.getEL()){aj.getEL().style.display="none"}b.detect.needUpgrade=D;L.OnWebTwainNeedUpgradeCallback(b.product.name,ae,b.product.bHTML5Edition,ac,ag.bIE,ag.bSafari,b.detect.ssl,b.env.strIEVersion,b.detect.bPromptJSOrServerOutdated,af,ak)}},k=function(ab,ad){if(!b.detect.bNeedUpgradeEvent&&!b.detect.isDWTVersionLatest(ad.VersionInfo)){b.detect.bNeedUpgradeEvent=D;if(!J.UseDefaultInstallUI&&b.isFunction(J.OnWebTwainNeedUpgrade)){J.OnWebTwainNeedUpgrade();return}if(ad&&ad._customIP&&(!b.isLocalIP(ad._host))){if(b.isFunction(L.OnRemoteWebTwainNeedUpgradeCallback)){var ac=ad._port;L.OnRemoteWebTwainNeedUpgradeCallback(b.product.name,ad._host,ac,ad._ssl)}return}if(!ad._bNoUI){b.one("#"+ab).before(b.install._strNonInstallDIV);b.show(b.install._divDWTNonInstallContainerID);b.hide(ab);if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}P()}}};var r=function(ab){var ac=ab||{};if(ac.basePath){b.env.basePath=ac.basePath}if(ac.pathType){b.env.pathType=ac.pathType}if(!b.isUndefined(ac.bDiscardBlankImage)){b.config.bDiscardBlankImage=ac.bDiscardBlankImage}if(ac.msgPrefix){b.config.msgPrefix=ac.msgPrefix}if(ac.msgSuffix){b.config.msgSuffix=ac.msgSuffix}if(ac.detectType){b.detect.detectType=ac.detectType}if(ac.tryTimes){b.detect.tryTimes=ac.tryTimes}if(ac.onReady){J.OnWebTwainReady=ac.onReady}if(ac.onNotAllowedForChrome){b.detect.onNotAllowedForChrome=ac.onNotAllowedForChrome}if(ac.onNoControl){b.detect.onNoControl=ac.onNoControl}},H=function(ae){var ab=J.Containers,ai=o.getNavInfo(),af,ad,ah,aj,ag,al=b.Promise.resolve(0);if(ab.length>0){L.DCP_DWT_OnClickCloseInstall();if(!b.isUndefined(ae)){aj=ae._containerID;ag=ae}else{for(ad=0;ad<ab.length;ad++){if(b.product.bHTML5Edition){ah=ab[ad].WebTwainId;if(Y(ah)){ag=J.ContainerMap[ah];if(ag){break}}}else{ah=ab[ad].ContainerId;if(!w(ah)){continue}ag=J.ContainerMap[ah];if(ag){break}}}}if(ag){if(b.product.bHTML5Edition){if(ag._bLocalService){al=ag._innerFunRawV2("LogLevel").then(function(){k(aj,ag)},function(){if(ag.ErrorCode==-2207){if(!J.UseDefaultInstallUI&&b.isFunction(J.OnWebTwainNeedUpgradeWebJavascript)){J.OnWebTwainNeedUpgradeWebJavascript(ag.ErrorString)}else{if(!b.detect.bPromptJSOrServerOutdated){b.detect.bPromptJSOrServerOutdated=D}}}k(aj,ag)})}}else{k(aj,ag)}}}var ak=[];for(ad=0;ad<ab.length;ad++){if(b.product.bHTML5Edition){ah=ab[ad].WebTwainId}else{ah=ab[ad].ContainerId}af=J.ContainerMap[ah];if(af){if(b.product.bHTML5Edition){if(!af._bNoUI){if(af.Width<=0||af.Height<=0){if(af.Width<=0){af.Width=270}if(af.Height<=0){af.Height=350}}}if(af._bLocalService){ak.push(g(af))}else{b.License.checkProductKey(af,{Core:true})}}else{af.IfAllowLocalCache=true;af.IfShowFileDialog=true;af.IfDisableSourceAfterAcquire=true;af.BrokerProcessType=b.product._iBrokerProcessType;if(ad==0){if(b.License.checkProductKey(af,{Core:true})||b.License.checkProductKey(af,{Webcam:true},true)){}else{b.License.checkProductKey(af,{Core:true},false,true)}}if(!ai.bWin){af.ImageCaptureDriverType=b.product._iImageCaptureDriverType}}}af=null;if(ak.length>0){al=al.then(function(){return Dynamsoft.Lib.Promise.all(ak)})}}ab=null;var ac=Dynamsoft.initOrder;if(ac[0]==e){ac.splice(0,1)}al=al.then(function(){if(b.isFunction(J.OnWebTwainReady)){J.OnWebTwainReady()}else{if(b.isFunction(L.Dynamsoft_OnReady)){L.Dynamsoft_OnReady()}}})},g=function(ab){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_ConfiguringDWT);return ab._innerFunV2("IfDisableSourceAfterAcquire","[1]").then(function(){var ad=o.getNavInfo(),ac=Dynamsoft.EnumDWT_Driver.TWAIN;if(ad.bMac){ac=Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA}else{if(ad.bLinux){ac=Dynamsoft.EnumDWT_Driver.SANE}}ab._driverType=ac;if(ac!=Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA){return ab._innerFunV2("ImageCaptureDriverType","["+ac+"]")}}).then(function(){b.License.checkProductKey(ab,{Core:true})})},Y=function(ab){if(ab==""||!o.isString(ab)&&!o.isNumber(ab)){return S}return D},w=function(ab){if(!ab||ab==""){return S}if(!b.get(ab)){return S}return D},u=function(ab){if(w(ab.ContainerId)){var ac;if(b.isString(ab.WebTwainId)){ac=J.ContainerMap[ab.WebTwainId]}else{ac=J.ContainerMap[ab.ContainerId]}if(ac){return S}return D}return S},c=function(){if(!b.detect.StartWSTimeoutId&&b.detect.arySTwains.length==0){b.detect.StartWSTimeoutId=setTimeout(function(){b.detect.StartWSTimeoutId=S;b.startWS()},100)}},t=function(){if(!b.detect.StartWSByIPTimeoutId&&b.detect.arySTwainsByIP.length==0){b.detect.StartWSByIPTimeoutId=setTimeout(function(){b.detect.StartWSByIPTimeoutId=S;b.startWSByIP()},100)}};b.detect.__WebTwainMain=function(ag,ac,al){var ai={id:ag.WebTwainId,containerID:ag.ContainerId,width:ag.Width,height:ag.Height};if(!Y(ai.id)&&!w(ai.containerID)){ai.id=ai.containerID="dwtcontrolContainer"}else{if(!ai.id&&w(ai.containerID)){ai.id=ai.containerID}}if(J.UseDefaultInstallUI){ai.onNotAllowedForChrome=m;ai.onNoControl=i}else{ai.tAllowedForChrome=J.OnWebTwainOldPluginNotAllowed;ai.onNoControl=J.OnWebTwainNotFound}r(ai);if(b.product.bHTML5Edition){o.mix(ai,ag.bLocalService?{port:ag.port,HTTPPort:(b.detect.ssl?443:80),bLocalService:true}:{bLocalService:false});ai.onReady=function(ao){b.replaceControl(ai.id,ao);if(b.isFunction(ac)){var an={stwain:ao};if(al){b.mix(an,al)}ac(an)}};var am,ah,ak;for(ah=0;ah<b.detect.arySTwains.length;ah++){ak=b.detect.arySTwains[ah];if(ai.id==ak._id){ai.id=ai.id+"_"+o.getRandom()}if(ai.containerID==ak._containerID){ai.containerID=""}}if(w(ai.containerID)){ai.bNoUI=false}else{ai.bNoUI=true}am=new b.html5.STwain(ai);b.detect.arySTwains.push(am);if(b.detect.bFirst){b._init(ai)}b.detect.bFirst=false;return am}else{var af,ae,ad,ab;ai.onPluginReady=function(){b.replaceControl(ai.id,af.getInstance())};ai.onPluginNotReady=function(){if(b.isFunction(L.Dynamsoft_OnNotReady)){L.Dynamsoft_OnNotReady()}};af=new b.DynamicWebTwain(ai);ad=0;ab=J.Containers;for(ae=ab.length-1;ae>=0;ae--){var aj=ab[ae];if(w(aj.ContainerId)){ad++}}if(b.detect.arySTwains.length==ad){b.detect._varSeed=setInterval(b.detect._controlDetect,200)}return af}};J.Unload=function(){var ae=J.Containers,ah,ab,ag,ac,af;if(b.closeAll){b.closeAll()}if(ae){if(b.product.bHTML5Edition){af=J.ContainerMap;for(ab=0;ab<ae.length;ab++){ac=ae[ab].WebTwainId;if(ac&&(ac in af)){ag=af[ac];if(ag){ag.__unload();delete af[ac]}}}}else{af=J.ContainerMap;for(ab=ae.length-1;ab>=0;ab--){ac=ae[ab].ContainerId;if(ac){ag=b.get(ac);if(ag){if((ac in af)&&af[ac]){delete af[ac]}ag.innerHTML=""}}}}}b.page.bUnload=D;if(b.page.OnUnload){b.page.OnUnload()}J.initQueue.splice(0);for(ab=0;ab<Dynamsoft.unloadQueue.length;ab++){var ad=Dynamsoft.unloadQueue[ab];if(b.isFunction(ad)){ad()}}Dynamsoft.unloadQueue.splice(0);if(b.MobileFuns){return b.MobileFuns.unloadWasm()}else{return b.Promise.resolve()}};var K=function(){var ae=J.Containers,ad,ac,af;for(ac=0;ac<ae.length;ac++){var ab;if(w(ae[ac].ContainerId)){ab=ae[ac].ContainerId;if(Y(ae[ac].WebTwainId)){ab=ae[ac].WebTwainId}}if(ab){ad=J.ContainerMap[ab];if(!ad){setTimeout(K,200);return}}}b.closeLoadingMsg();ae=null;H()},z=function(ae){if(ae&&"readyObj" in ae){var ac=ae.readyObj;if(ac){var ad=ae.stwain,ab=ac.totalCount;ac.readyCount=ac.readyCount+1;if(ac.readyCount>=ab){H(ad)}return}}H(ae)},X=function(ah,ab,af){var ag=J.Containers,ad,ac;if(b.config.usingMainMode){b.closeLoadingMsg();b.detect.hideMask();return}if(!ag||ag.length===0){b.closeLoadingMsg();b.detect.hideMask();b.log("DEnv.Containers was not set.");return}if(V.bEnhancedMode){b.product.host=ah;b.detect.urls.splice(0);b.detect.urls.push({port:ab,ssl:M.bSSL});b.detect.cUrlIndex=0}c();var ae={totalCount:ag.length,readyCount:0};for(ad=0;ad<ag.length;ad++){ac=ag[ad];if(!w(ac.ContainerId)){ac.bNoUI=true}if(af){ac.bLocalService=false;ac.ip="";ac.port=0}else{ac.bLocalService=true;if(V.bEnhancedMode){ac.port=ab}}b.detect.__WebTwainMain(ac,z,{readyObj:ae})}},B=function(){if(b.config.usingMainMode){b.closeLoadingMsg();return}var ac,ad=J.Containers;if(ad===S||ad.length===0){b.log("DEnv.Containers was not set.");b.closeLoadingMsg();return}for(ac=0;ac<ad.length;ac++){var ab=ad[ac];if(u(ab)){b.detect.__WebTwainMain(ab)}}setTimeout(K,100)},C=function(ae){var ai,aj=ae.bNoUI,ad=ae.id,an=ae.containerID,al=ae.host,ao=ae.port,am=(al&&ao&&ao>0)?{host:al,port:ao}:S,ah=ae.asyncSuccessFunc,ac=ae.asyncFailureFunc;if(!ae.bNoUI&&(!b.isString(an)||an==""||!b.get(an))){aj=true;an=0}else{if(J.Containers&&!aj){var ag,ab=J.Containers;for(ag=0;ag<ab.length;ag++){if(ab[ag].ContainerId==an){b.detect.hideMask();if(b.isFunction(ac)){ac(E)}return S}}}}ai=J.DynamicDWTMap[ad];if(ai){b.detect.hideMask();if(b.isFunction(ah)){ah(ai)}return ai}if(am){t()}else{c()}var ak={id:ad,containerID:an,customIP:false,width:aj?0:300,height:aj?0:300,bNoUI:aj,bLocalService:ae.bLocalService};if(!aj){var af=b.get(an);if(af.style.width){ak.width=af.style.width}if(af.style.height){ak.height=af.style.height}}if(am){ak.customIP=true;ak.host=am.host;ak.port=am.port}ak.onReady=function(ap){L.DCP_DWT_OnClickCloseInstall();if(!ap){b.closeLoadingMsg();b.detect.hideMask();if(b.isFunction(ac)){ac(p)}return false}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_ConfiguringDWT);J.DynamicContainers.push(ad);J.DynamicDWTMap[ad]=ap;if(!J.IfDisableDefaultSettings&&ap._bLocalService){g(ap).then(function(){b.detect.hideMask();if(b.isFunction(ah)){ah(ap)}k(an,ap)},function(){b.detect.hideMask();if(ap.ErrorCode==-2207){if(!b.detect.bPromptJSOrServerOutdated){b.detect.bPromptJSOrServerOutdated=D}}k(an,ap)})}else{b.detect.hideMask();if(b.isFunction(ah)){ah(ap)}}return true};return new b.html5.CreateDWTObject(ak)};J.Load=function(){b.waitForScripts().then(function(){return J.Unload()}).then(function(){if(b.detect.wasmScriptLoaded&&Dynamsoft.WasmEnv){try{Dynamsoft.WasmEnv.load(J.ProductKey)}catch(ab){if(ab){console.log(ab.message)}}}U(T)})};J.CheckConnectToTheService=function(ah,ac,ae,ab){if(b.detect.scriptLoaded){if(b.product.bHTML5Edition){var ad=0,ag=ah,aj=ac,ai=ae,af=ab;if(b.isFunction(ag)&&b.isFunction(aj)){ai=ag;af=aj;ag=null;aj=null}if(!ag){ag=Dynamsoft.dcp.host}if(!aj){for(ad=0;ad<Dynamsoft.Lib.detect.ports.length;ad++){if(Dynamsoft.navInfoSync.bSSL&&Dynamsoft.Lib.detect.ports[ad].ssl||!Dynamsoft.navInfoSync.bSSL&&!Dynamsoft.Lib.detect.ports[ad].ssl){aj=Dynamsoft.Lib.detect.ports[ad].port;break}}}y.versionInfo(ag,aj,function(al,an,am,ak){if(al===d.OK){if(ak&&ak.length>0){if(R(ak,b.product.getServerVersionInfo(true))){if(b.isFunction(ai)){ai(an,am)}return}}}if(b.isFunction(af)){af()}},af)}else{if(b.isFunction(ab)){ab()}}}else{setTimeout(function(){J.CheckConnectToTheService(ah,ac,ae,ab)},500)}};J.ConnectToTheService=J.Load;J.CreateDWTObject=function(ac,ak,ad,ag,af,ab){var ah=af,aj=ab,ai;if(arguments.length<=3){ah=ak;aj=ad;ai={WebTwainId:ac}}else{ai={WebTwainId:ac,Host:ak,Port:ad,PortSSL:ag}}if(!b.product.bHTML5Edition){if(b.isFunction(aj)){aj(Z)}return S}var ae=ac;if(b.isDOMInBody(ae)){ai.Container=ae;if(!ae.id||ae.id==""){ae.id=["dwt_",o.getRandom()].join("")}ai.WebTwainId=ae.id}else{if(!b.isString(ac)){if(b.isFunction(aj)){aj(b.Errors.container_id_not_string())}return S}if(!b.get(ac)){if(b.isFunction(aj)){aj(b.Errors.container_id_not_exist(ac))}return S}}if(b.isUndefined(ai.UseLocalService)){if(b.isUndefined(J.UseLocalService)){if(b.env.bMobile){ai.UseLocalService=false}else{ai.UseLocalService=true}}else{ai.UseLocalService=J.UseLocalService}}return n(ai,ah,aj)};J.CreateDWTObjectEx=function(ab,ac,ad){if(b.isDOMInBody(ab.Container)){if(!ab.Container.id||ab.Container.id==""){ab.Container.id=["dwt_",o.getRandom()].join("")}if(!b.isString(ab.WebTwainId)){ab.WebTwainId=ab.Container.id}}else{if(!b.isString(ab.WebTwainId)){ad(b.Errors.webtwain_id_not_string());return S}}if(b.isUndefined(ab.UseLocalService)){if(b.isUndefined(J.UseLocalService)){if(b.env.bMobile){ab.UseLocalService=false}else{ab.UseLocalService=true}}else{ab.UseLocalService=J.UseLocalService}}return n(ab,ac,ad)};function a(){var ab=['<div style="padding: 0 25px;">',Dynamsoft.MSG.Err_BrowserNotSupportWasm,"</div>",'<div style="padding-top:60px"></div>'];J.ShowDialog(365,0,ab.join(""))}function n(ab,af,ai){if(!b.product.bHTML5Edition){ai(Z);return S}if(ab.UseLocalService===false){if(!I()){b.closeLoadingMsg();a();ai(Dynamsoft.MSG.Err_BrowserNotSupportWasm);return S}}q();var ag={},ah=ab.WebTwainId,ae=ab.Host,ac=ab.Port,ad=ab.PortSSL;if(!J._srcUseLocalService&&ab.UseLocalService){b.detect.dcpStatus=h;J._srcUseLocalService=true}if(ah===Q||ah===null||ah===""){ag.id=["dwt_",o.getRandom()].join("");ag.bNoUI=true}else{if(!o.get(ah)){ag.id=ah;ag.bNoUI=true}else{ag.id=ah;ag.containerID=ah;ag.bNoUI=false}}ag.UseLocalService=ab.UseLocalService;if(!b.isString(ae)||ae==""){ae=Dynamsoft.dcp.host}ag.host=ae;if(M.bSSL){if(!ad){ad=18623}ag.port=ad}else{if(!ac){ac=18622}ag.port=ac}if(af){ag.asyncSuccessFunc=af}if(ai){ag.asyncFailureFunc=ai}b.waitForScripts().then(function(){return new b.Promise(N)}).then(function(){F({callback:v,docViewCallback:function(){v("",0,true)},host:ag.host,port:ag.port,UseLocalService:ag.UseLocalService})});J.initQueue.push(ag);return D}var q=function(){var ab=Dynamsoft.initOrder,ad=S;for(var ac=0;ac<ab.length;ac++){if(ab[ac]==e){ad=D;break}}if(!ad){ab.push(e)}},R=function(ae,ad){var ac=ae.split(","),ab=ad.split(",");return(ac.length>3&&b.trim(ac[0])==ab[0]&&b.trim(ac[1])>=ab[1]&&b.trim(ac[2])>=ab[2]&&b.trim(ac[3])>=ab[3])},f=function(ac,ab){if(b.isLocalIP(ac)){b.LS.item("DWT_port",ab);b.LS.item("DWT_ssl",M.bSSL?"true":"false")}},j=function(ag){var af,ad="",ac=ag,ae="",ab=o.getNavInfo();if(ab.bMac){af="mac/MacDWT_"}else{if(ab.bLinux){af="linux/LinuxDWT_"}else{af="win/WinDWT_"}}if(!M.bFileSystem){ad="?t="+b.getRandom()}if(ac.length>0&&ac[ac.length-1]!="/"){ac=ac+"/"}if(ab.bWin&&V.b64bit){ae="_x64"}return[ac,"dist/",af,b.product.getServerVersionInfo(),ae,".zip",ad].join("")},W=function(ab,af,ae){var ad=j(J.ResourcesPath),ac=function(ai){var aj=0;V.loadZip(ai,aj,function(){var ak=o.getNavInfo();b.detect.hideMask();if(b.isFunction(L.OnWebTWAINDllDownloadSuccessful)){L.OnWebTWAINDllDownloadSuccessful()}if(J.OnWebTwainInitMessage){var al;if(M.bSSL&&ak.bFirefox){al=J.CustomizableDisplayInfo.generalMessages.refreshNeeded;J.OnWebTwainInitMessage(al,EnumDWT_InitMsg.DownloadNotRestartError);return}al=J.CustomizableDisplayInfo.generalMessages.DWTmoduleLoaded;J.OnWebTwainInitMessage(al,EnumDWT_InitMsg.Info)}setTimeout(af,3000)},ah)},ah=function(ai,al,ak){b.detect.hideMask();var an=D;if(J.OnWebTwainInitMessage){var ao=J.CustomizableDisplayInfo.errorMessages.ERR_DWT_NOT_DOWNLOADED;J.OnWebTwainInitMessage(ao,EnumDWT_InitMsg.DownloadError)}if(b.isFunction(L.OnWebTWAINDllDownloadFailure)){var am={},aj;if(ak.status==404){b.Errors.WebTwainModuleNotExist(am);aj=D}else{b.Errors.WebTwainModuleDownloadFailure(am);aj=S}an=L.OnWebTWAINDllDownloadFailure(b.product.name,am._errorCode,am._errorString);if(aj){an=S}}b.detect.dcpStatus=A;if(b.isFunction(ab.dwtFailedCallback)){ab.dwtFailedCallback()}};if(J.OnWebTwainInitMessage){var ag=J.CustomizableDisplayInfo.generalMessages.downloadingDWTModule;J.OnWebTwainInitMessage(ag,EnumDWT_InitMsg.Info)}b.ajax({method:"GET",url:ad,async:true,dataType:"blob",onSuccess:ac,onError:ah})},s=function(ah,ad,ab){var aj=S,ai=S,ae=b.detect,ag=ah.host,af=ah.port,ac=1;if(ah.UseLocalService===false){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CreatingDWT);b.detect.dcpStatus=x;b.product.host="";f("",0);U(ah.docViewCallback);return}if(b.detect.dcpStatus==x){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CreatingDWT);if(b.isFunction(ah.callback)){ah.callback(ag,af)}return}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CheckDWT);ac=ab>0?(ab+1):1;if(!af){b.each(b.detect.ports,function(ak){if(M.bSSL){if(ak.ssl){af=ak.port}}else{if(!ak.ssl){af=ak.port}}})}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CheckDWTVersion);y.versionInfo(ag,af,function(am,an,al,ak){if(am===d.OK){if(ak&&ak.length>0){if(R(ak,b.product.getServerVersionInfo(true))){b.detect.dcpStatus=x;b.product.host=an;f(an,al);b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CreatingDWT);if(b.isFunction(ah.callback)){ah.callback(an,al)}return}else{}}}if(ad){if(ac>3){b.closeLoadingMsg();b.detect.dcpStatus=A;if(b.isFunction(ah.dwtFailedCallback)){ah.dwtFailedCallback()}return}else{setTimeout(function(){s(ah,D,ac)},1000)}}else{if(J.IfInstallDWTModuleWithZIP){W(ah,function(){s(ah,D,ac)},function(){s(ah,S,ac)})}else{b.closeLoadingMsg();b.detect.dcpStatus=A;if(b.isFunction(ah.dwtFailedCallback)){ah.dwtFailedCallback()}return}}})},F=function(ag){var ae=Dynamsoft.initOrder,ai=false;if(ae.length>0&&ae[0]===e){var ak=function(){if(J.OnWebTwainInitMessage){var am=J.CustomizableDisplayInfo.generalMessages.downloadNeeded;J.OnWebTwainInitMessage(am,EnumDWT_InitMsg.Info)}if(!b.isLocalIP(ag.host)){if(b.isFunction(L.OnRemoteWebTwainNotFoundCallback)){var al=M.bSSL;L.OnRemoteWebTwainNotFoundCallback(b.product.name,ag.host,ag.port,al)}}else{i()}};if(!J.IfCheckDCP){if(!ag.dwtFailedCallback){ag.dwtFailedCallback=ak}s(ag,S,0);return}var ac=function(){b.detect.showMask()},ad=function(){b.detect.hideMask()},af=function(){var am=false;if(b.isFunction(L.OnWebTwainShowUpdatingDialog)){am=L.OnWebTwainShowUpdatingDialog()}if(!am){var al=['<div class="dynamsoft-dwt-dlg-tips dynamsoft-dwt-dlg-center">',J.CustomizableDisplayInfo.generalMessages.updatingDService,"</div>",'<div style="padding-top:35px"></div>'];J.ShowDialog(365,0,al.join(""),0,1)}return true},ab=function(){var al=false;if(b.isFunction(L.OnWebTwainCloseUpdatingDialog)){al=L.OnWebTwainCloseUpdatingDialog()}if(!al){J.CloseDialog()}return true},ah=function(al,am){ai=true;P(al,am)},aj=function(ar){var ao=1,an=o.getNavInfo();if(an.bWin){ao=ar>0?(ar+1):1;if(ao>3){aj=null;b.detect.hideMask();b.detect.dcpStatus=A;if(b.isFunction(ag.dwtFailedCallback)){ag.dwtFailedCallback()}return}}if(!ai){if(!ag.dwtFailedCallback){ag.dwtFailedCallback=function(){var av=o.getNavInfo();b.detect.hideMask();if(b.isFunction(L.OnWebTWAINModuleDownloadManually)){var au,aw;if(av.bLinux){au=EnumDWT_PlatformType.enumLinux;aw={"default":Dynamsoft.dcp.getLinuxHTML5DebPath(),deb:Dynamsoft.dcp.getLinuxHTML5DebPath(),rpm:Dynamsoft.dcp.getLinuxHTML5RpmPath()}}else{if(av.bMac){au=EnumDWT_PlatformType.enumMac;aw={"default":Dynamsoft.dcp.getDSPath()}}else{au=EnumDWT_PlatformType.enumWindow;aw={"default":Dynamsoft.dcp.getDSPath()}}}L.OnWebTWAINModuleDownloadManually(aw,au,av.bIE,av.bSafari,b.detect.ssl,b.env.strIEVersion)}}}if(V.bEnhancedMode){var at=0,am=function(ax){if(b.isArray(ax)&&ax.length>1){b.detect.hideMask();var aw=ax[1],av,au;if(aw){V.currentUserPorts=aw;if(aw.dwt){av=aw.dwt.port;au=aw.dwt.sslPort;if(av==0||au==0){at++;if(at>5){aj(ao);return false}setTimeout(function(){V.getPorts(V.strSID,am,al)},300);return true}ag.port=(M.bSSL?au:av);s(ag,S,0);return true}}}if(J.IfInstallDWTModuleWithZIP){W(ag,function(){aj(ao)},function(){aj(ao)})}else{b.detect.dcpStatus=A;if(b.isFunction(ag.dwtFailedCallback)){ag.dwtFailedCallback()}return}return true},al=function(){b.detect.hideMask();if(J.IfInstallDWTModuleWithZIP){W(ag,function(){aj(ao)},function(){aj(ao)})}else{b.detect.dcpStatus=A;if(b.isFunction(ag.dwtFailedCallback)){ag.dwtFailedCallback()}return}return true};V.getPorts(V.strSID,am,al);return true}aj=null;s(ag,S,0);return true}var ap=b.install._dlgInstall,aq=500;if(!ap||!ap.open){ai=false;aq=0}setTimeout(aj,aq)};Dynamsoft.managerEnv.IfUpdateService=Dynamsoft.WebTwainEnv.IfUpdateService;Dynamsoft.managerEnv.IfDownload64bitService=Dynamsoft.WebTwainEnv.IfDownload64bitService;V.checkDcpForUpdate(ak,ac,ad,af,ab,ah,aj,J.ProductKey)}else{if(!b.env.stopCheckingForService){setTimeout(function(){F(ag)},1000)}}},T=function(){b.page.bUnload=S;var ag=J.Containers,ae,ab,ad,ac=[],af;for(ae=0;ae<ag.length;ae++){ad=ag[ae];if(b.product.bHTML5Edition){if(b.isDOMInBody(ad.Container)){af=ad.Container;if(!af.id||af.id==""){af.id=["dwt_",b.getRandom()].join("")}ad.ContainerId=af.id}if(!b.isString(ad.WebTwainId)&&!b.isNumber(ad.WebTwainId)||ad.WebTwainId==""){if(!b.isString(ad.ContainerId)||ad.ContainerId==""){ad.WebTwainId=["dwt_",b.getRandom()].join("")}else{ad.WebTwainId=ad.ContainerId}}for(ab=0;ab<ac.length;ab++){if(ad.WebTwainId==ac[ab]){ad.WebTwainId=ad.WebTwainId+"_"+o.getRandom();break}}ac.push(ad.WebTwainId)}else{if(o.isString(ad.WebTwainId)&&(!o.isString(ad.ContainerId)||ad.ContainerId=="")){ad.ContainerId=ad.WebTwainId}}}if(b.product.bHTML5Edition){if(J.UseLocalService===false||(b.isUndefined(J.UseLocalService)&&b.env.bMobile)){if(!I()){b.closeLoadingMsg();a();return}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitWasm)}else{b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitH5)}q();b.waitForScripts().then(function(){return new b.Promise(N)}).then(function(){var ah=true;if(J.UseLocalService===false||(b.isUndefined(J.UseLocalService)&&b.env.bMobile)){ah=false}F({callback:X,docViewCallback:function(){X("",0,true)},host:V.host,UseLocalService:ah})})}else{b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitActiveX);B()}},N=function(ad,ac){/*var ab=[Dynamsoft.WebTwainEnv.ResourcesPath,"/src/dynamsoft.imageio.js","?t=20200811"].join("");*/if(J.UseLocalService===false||(b.isUndefined(J.UseLocalService)&&b.env.bMobile)){if(!b.detect.wasmScriptLoaded){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_DownloadingWasm);/*b.getScript(ab,true,function(af)*/if(getScriptImageIO()){b.detect.wasmScriptLoaded=true;b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CompilingWasm);try{Dynamsoft.WasmEnv.load(J.ProductKey)}catch(ae){console.log(ae)}ad()}/*)*/;return}}else{b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitDynamsoftService);if(!b.detect.wasmScriptLoaded&&!Dynamsoft.navInfoSync.bFileSystem&&Dynamsoft.WebTwainEnv.UseCameraAddonWasm){/*b.getScript(ab,true,function(af){b.detect.wasmScriptLoaded=true;try{Dynamsoft.WasmEnv.load(J.ProductKey)}catch(ae){console.log(ae)}})*/if(getScriptImageIO()){b.detect.wasmScriptLoaded=true;try{Dynamsoft.WasmEnv.load(J.ProductKey)}catch(ae){console.log(ae)}}}}ad()},v=function(ag,ad,af){var ac=Dynamsoft.initOrder,ah=S;if(ac.length>0&&ac[0]===e){if(!b.detect.onNoControl){b.detect.onNoControl=i}var ab=J.initQueue,ae;if(ab.length>0){ah=D;for(ae=0;ae<ab.length;ae++){if(af){ab[ae].bLocalService=false}else{ab[ae].bLocalService=true}C(ab[ae])}ab.splice(0)}}if(!ah){setTimeout(function(){v(ag,ad,af)},100)}};J.DeleteDWTObject=function(ae){var ad=J.DynamicDWTMap,ab;if(!b.product.bHTML5Edition){return S}if(ad&&ae in ad){var ac=ad[ae];if(ac){delete ad[ae];ac.__unload()}}for(ab=0;ab<J.DynamicContainers.length;ab++){if(J.DynamicContainers[ab]==ae){J.DynamicContainers.splice(ab,1);break}}b.detect.hideMask();return D};J.GetWebTwain=function(ac){var af,ad,ae,ah,ag=ac;af=J.Containers;if(b.isDOMInBody(ag)){ag=ag.id;if(!ag){return null}}else{if(!ag&&af&&af.length>0){for(ae=0;ae<af.length;ae++){if(w(af[ae].ContainerId)){ag=af[ae].ContainerId;break}}}}if(ag&&af&&af.length>0){for(ae=0;ae<af.length;ae++){ad=af[ae];if(ad.ContainerId==ag){var ab;if(Y(ad.WebTwainId)){ab=ad.WebTwainId}else{ab=ad.ContainerId}ah=J.ContainerMap;if(ah&&(ab in ah)){return ah[ab]}}}}return J.GetWebTwainEx(ag)};J.GetWebTwainEx=function(af){var ac=af,ae,ad,ab;ae=J.DynamicContainers;if(b.isDOMInBody(ac)){ac=ac.id}else{if(!ac&&ae&&ae.length>0){for(ad=0;ad<ae.length;ad++){if(Y(ae[ad])){ac=ae[ad];break}}}}ae=null;if(ac){var ag=J.ContainerMap;if(ag&&(ac in ag)){return ag[ac]}ag=J.DynamicDWTMap;if(ag&&(ac in ag)){return ag[ac]}}return null};var aa=function(){if(!b.isUndefined(J.ProductKey)){b.openLoadingMsg();b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_LookingLicense);var ab=b.get("dynamsoft_waiting");if(ab){ab.parentNode.removeChild(ab)}Dynamsoft.Ready(function(){var aj=o.getNavInfo(),ah=M.bFileSystem,ak=b.env.basePath,ae=Dynamsoft.WebTwainEnv.ResourcesPath;if(!ah){var ad=ae;if(typeof(ad)=="undefined"||ad==""){ae=ak}else{if(ad.length>0&&ad.charAt(0)!="/"&&ad.indexOf("//")<0&&ak!=""){ae=[ak,"/",ad].join("")}}if(ae.length>0&&ae.charAt(ae.length-1)=="/"){ae=ae.substr(0,ae.length-1)}Dynamsoft.WebTwainEnv.ResourcesPath=ae}Dynamsoft.managerEnv.resourcesPath=ae;var ai="?t=20200715",ag=D,af=[];var ac=[[ae,"/src/dynamsoft.webtwain.css",ai].join(""),[ae,"/src/dynamsoft.viewer.css",ai].join("")],al=function(){b.detect.cssLoaded=D};if(aj.bSafari){b.getAllCss(ac,al);al()}else{b.getAllCss(ac,al)}if(aj.bSafari){ag=S}/*af.push([ae,"/dynamsoft.webtwain.install.js",ai].join(""));*/if(b.product.bHTML5Edition){af.push([ae,"/src/dynamsoft.viewer.js",ai].join(""));b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_LoadingViewerJs)}b.getScripts(af,ag,function(am){if(!am){b.log("error: load js failed.");return}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_AllJsLoaded);b.detect.scriptLoaded=D;if(b.isString(J.Host)){Dynamsoft.dcp.host=J.Host}if(b.product.bHTML5Edition){b.closeAll=b.html5.closeAll}else{if(b.product.bPluginEdition){b.DynamicWebTwain=b.plugin.DynamicWebTwain;b.closeAll=b.plugin.closeAll}else{if(b.product.bActiveXEdition){b.DynamicWebTwain=b.ie.DynamicWebTwain;b.closeAll=b.ie.closeAll}}}if(b.isUndefined(J.UseLocalService)){if(b.env.bMobile){J.UseLocalService=false}else{J.UseLocalService=true}}J._srcUseLocalService=J.UseLocalService;if(b.isArray(Dynamsoft.aryAddonReadyFun)){var an=0;for(;an<Dynamsoft.aryAddonReadyFun.length;an++){var ao=Dynamsoft.aryAddonReadyFun[an];if(b.isFunction(ao)){try{ao(b)}catch(ap){b.log(ap.stack||ap,"error");setTimeout(function(){throw ap},0)}}}Dynamsoft.aryAddonReadyFun=[]}if(J.AutoLoad){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_FireBeforeInitEvt);if(J.OnWebTwainWillInit){J.OnWebTwainWillInit()}U(T)}else{b.closeLoadingMsg()}})})}else{setTimeout(aa,100)}};J.IsLocalServiceConnected=function(){return new b.Promise(function(ae,ad){var ac=V.host,ab;b.each(b.detect.ports,function(af){if(M.bSSL){if(af.ssl){ab=af.port}}else{if(!af.ssl){ab=af.port}}});J.CheckConnectToTheService(ac,ab,function(ah,ag,af){ae(!0)},function(){ad(!1)})})};b.domReady(function(){aa();if(M.bIE){if(L.addEventListener){L.addEventListener("unload",J.Unload,false)}}});b.waitForScripts=function(){if(!b.waitForScripts._promise){b.waitForScripts._promise=new Promise(function(ab){b.waitForScripts._resolve=ab;setTimeout(b.waitForScripts,60)})}else{if(b.waitForScripts._resolve&&b.detect.scriptLoaded){b.waitForScripts._resolve()}else{setTimeout(b.waitForScripts,60)}}return b.waitForScripts._promise};if(!L.Dynamsoft_OnClickInstallButton){L.Dynamsoft_OnClickInstallButton=function(){b.hide("dwt-btn-install");b.hide("dwt-install-url-div")}}})(Dynamsoft.Lib,Dynamsoft.WebTwainEnv);Dynamsoft.Ready(function(a,g){var c=Dynamsoft;if(!a.product.bHTML5Edition){return}var f=Dynamsoft.navInfo,h=document,b=a.html5.Funs2,i=Dynamsoft.WebTwainEnv;function d(o,n,m,k,j,l){var p=this;p.Left=o;p.Top=n;p.Right=m;p.Bottom=k;p.ColorRGB=j;p.Opacity=l}function e(l,j){var k=this;k._ImgManager=l;k._stwain=l._stwain;k.fZoom=1;k.zoomInStep=1.2;k.zoomOutStep=0.8;k.MIN_ZOOM=0.02;k.MAX_ZOOM=65;k.BaseUrl=false;k.imagesPerRow=1;k.imagesPerColumn=1;k.MAX_ROWS=128;k.MAX_COLUMNS=128;k.bSingleMode=false;if(k._stwain._isMobileMode()&&!k._stwain._isPC()){k.iMouseShape=EnumDWT_MouseShape.Hand}else{k.iMouseShape=EnumDWT_MouseShape.Crosshair}k.bIfFitWindow=true;k.enumDWTFitWindowType=0;k.AllowMultiSelect=true;k.SelectionImageBorderColor="#7DA2CE";k.bShowPageNumber=false;k.ratio=0;k.__IfAutoScroll=true;k.__MousewheelValue=0;this._Init(j)}e.prototype._Init=function(j){var k=this;k.borderWidth=a.isUndefined(j.borderWidth)?1:j.borderWidth;k.imageViewWidth=j.Width;k.imageViewHeight=j.Height;if(j.BackgroundColor){k.BackgroundColorByDefault=j.BackgroundColor}else{k.BackgroundColorByDefault="#FFFFFF"}k.BackgroundColor=k.BackgroundColorByDefault;if(!k._WebViewer){k._WebViewer=new a.UI.WebViewer(k._ImgManager,j,k)}else{k._WebViewer._Init(j)}k.mapModelImageControl=j.mapModelImageControl;k.__InitEvents(j);if(!k._ImgManager._isNoUI()){k.__InitWebViewer()}};e.prototype.__InitEvents=function(j){var k=this;if(a.isFunction(j.onTopImageInTheViewChanged)){k.onTopImageInTheViewChanged=j.onTopImageInTheViewChanged}if(a.isFunction(j.onGetImageInfo)){k.onGetImageInfo=j.onGetImageInfo}if(a.isFunction(j.onZoomChanged)){k.onZoomChanged=j.onZoomChanged}if(a.isFunction(j.onMouseMove)){k.onMouseMove=j.onMouseMove}if(a.isFunction(j.onMouseClick)){k.onMouseClick=j.onMouseClick}if(a.isFunction(j.onMouseRightClick)){k.onMouseRightClick=j.onMouseRightClick}if(a.isFunction(j.onMouseDoubleClick)){k.onMouseDoubleClick=j.onMouseDoubleClick}if(a.isFunction(j.onImageAreaDeSelected)){k.onImageAreaDeSelected=j.onImageAreaDeSelected}if(a.isFunction(j.onImageAreaSelected)){k.onImageAreaSelected=j.onImageAreaSelected}if(a.isFunction(j.onSelected)){k.onSelected=j.onSelected}if(a.isFunction(j.onRefreshUI)){k.onRefreshUI=j.onRefreshUI}if(a.isFunction(j.onResetCurrentIndex)){k.onResetCurrentIndex=j.onResetCurrentIndex}};e.prototype.__InitWebViewer=function(){var k=this,j=k.GetWebViewer();if(k.imagesPerRow==1&&k.imagesPerColumn==1){j.SetMouseShape(k.iMouseShape);j.SetShowPageNumber(false)}else{j.SetMouseShape(EnumDWT_MouseShape.Hand);j.SetShowPageNumber(k.bShowPageNumber)}j.SetSelectionRectAspectRatio(k.ratio);j.SetBackgroundColor(k.BackgroundColor);j.SetSelectionImageBorderColor(k.SelectionImageBorderColor);if(k.bSingleMode){if(k.bIfFitWindow){j.SetFitType(k.enumDWTFitWindowType)}else{j.SetZoom(k.fZoom)}}else{j.SetFitType(0)}};e.prototype.SetMetaDataByIndex=function(l,k){var m=this,j=m.GetWebViewer();return j.SetMetaDataByIndex(l,k)};e.prototype.GetMetaDataByIndex=function(k){var l=this,j=l.GetWebViewer();return j.GetMetaDataByIndex(k)};e.prototype.GetDataImageControl=function(j){var k=this;return k.mapModelImageControl[j]};e.prototype.SetDataImageControl=function(m,l,j){var n=this,k;if(l==-1){return false}k=n.mapModelImageControl[l];if(!k){k=new a.UI.ModelImageControl();k.serverId=l;n.mapModelImageControl[l]=k}if(k!=null){k.bIsDirty=true}n.__GetImageAndAttach(k,l,true,false,false,m,j);return true};e.prototype.AttachImagesForControl=function(l,k){var m=this,j=m.GetWebViewer();if(l.bAddImage){j.AppendImage(l,k)}else{j.UpdateImage(l,k)}if(j.bCouldBeTimeConsuming){j.bCouldBeTimeConsuming=false;Dynamsoft.Lib.hideMask()}return true};e.prototype.MobileAttachImagesForControl=function(m,k){var n=this,j=n.GetWebViewer(),l;if(m.bAddImage){l=j.MobileAppendImage(m,k)}else{l=j.MobileUpdateImage(m,k)}if(j.bCouldBeTimeConsuming){j.bCouldBeTimeConsuming=false;Dynamsoft.Lib.hideMask()}return true};e.prototype.GetWebViewer=function(){var j=this;return j._WebViewer};e.prototype.__GetWebViewerUuid=function(j){var k=this;return k.mapModelImageControl[j].uuid};e.prototype.SetSelectedImageArea=function(n,m,l,k){var o=this;var j=o.GetWebViewer();if(null!=j){if(o.imagesPerRow==1&&o.imagesPerColumn==1){return j.SetSelectedThumbnailArea(n,m,l,k)}else{return false}}return false};e.prototype.OverlayRectangle=function(r,o,n,q,l,j,m){var p=this;var k=p.GetWebViewer();if(null!=k){return k.OverlayRectangle(r,o,n,q,l,j,m)}return false};e.prototype.ChangeImageViewSize=function(j,l){var m=this,k=false;if(j>=0){if(j>m.imageViewWidth){k=true}m.imageViewWidth=j;m.GetWebViewer().SetWidth(j)}if(l>=0){if(l>m.imageViewHeight){k=true}m.imageViewHeight=l;m.GetWebViewer().SetHeight(l)}if(k){m.RefreshAllImages(j,l)}return true};e.prototype.RefreshAllImages=function(r,m){var o=this,n,q,p,j=o.GetWebViewer();if(o._stwain._isMobileMode()){return}if(!o.mapModelImageControl){return}for(var l=0;l<j.GetHowManyImagesInBuffer();l++){n=o.getImageManager().convertClientIndexToServerId(l);var k=o.mapModelImageControl[n];if(k){q=b.getImageUrl(o.BaseUrl,n,r,m,Date.now());k.minImageUrl=q;p=j.GetMetaDataByIndex(l);j.UpdateImage(k,p)}}};e.prototype.SetViewMode=function(m,l){var n=this,k,j;k=n.imagesPerRow;j=n.imagesPerColumn;n.imagesPerRow=l;n.imagesPerColumn=m;if(m==-1&&l==-1){n.imagesPerRow=1;n.imagesPerColumn=1;n.bSingleMode=true}else{n.bSingleMode=false;if(l==-1){n.imagesPerRow=1}}n.GetWebViewer().SetViewMode(m,l);return true};e.prototype.RemoveAllImages=function(){var j=this;if(j.GetWebViewer().bShowImageEdit){if(j.GetWebViewer()._IfChangedWithinTheEditor==true){j.GetWebViewer()._IfChangedWithinTheEditor=false;j.GetWebViewer().iChangedIndex=-1;j.GetWebViewer().updateButtons()}}return j.Clear()};e.prototype.Clear=function(){var m=this,k,j,l,n;l = m._ImgManager.count(); var i = Object.keys(m.mapModelImageControl); n = i.length; for(k=0;k<m._ImgManager.count();k++){j=m.getImageManager().convertClientIndexToServerId(k);if(j!=-1&&m.mapModelImageControl[j]){m.mapModelImageControl[j].Clear();delete m.mapModelImageControl[j]}}if (n == l) {m.mapModelImageControl={};}m.GetWebViewer().RemoveAllImages();return true};e.prototype.__GetImageAndAttach=function(o,p,m,t,n,r,s){var q=this;var l=q.imageViewWidth;var k=q.imageViewHeight;var u=false;if(m){u=true}else{if(o.bIsDirty==true){u=true}else{u=false}}var j=q.__GetWebViewerUuid(p);if(j){if(o.iImageControlWidth==l&&o.iImageControlHeight==k&&o.bIsDirty==false){return}}q.__SetArrayControlLoadImage(j,p,o,l,k,q.AttachImagesForControl,u,t,n,r,s)};e.prototype.__SetArrayControlLoadImage=function(k,q,p,m,j,v,n,u,o,t,s){var r=this,l,w;if(r._stwain._isMobileMode()){r.OnGetImageFromMobileServer(q,p,m,j,u,o,t,s)}else{if(n){r.OnGetImageFromServer(q,p,m,j,u,o,t,s)}else{r.OnGetImageByURL(q,p,m,j,u,o,t,s)}}};e.prototype.OnGetImageByURL=function(n,m,k,j,r,l,p,q){var o=this;if(m.imageUrl&&m.imageUrl!=""){m.iImageControlWidth=k;m.iImageControlHeight=j;m.bAddImage=r;m.bAppendImage=l;m.index=p;if(o._stwain._isMobileMode()){o.MobileAttachImagesForControl(m,q)}else{o.AttachImagesForControl(m,q)}}else{return o.OnGetImageFromServer(n,m,k,j,r,l,p,q)}return true};e.prototype.OnGetImageFromMobileServer=function(n,m,k,j,r,l,p,q){var o=this;m.iImageControlWidth=k;m.iImageControlHeight=j;m.bAddImage=r;m.bAppendImage=l;m.index=p;o.MobileAttachImagesForControl(m,q)};e.prototype.OnGetImageFromServer=function(o,n,l,j,t,m,q,r){var p=this,k,u,s=p.BaseUrl;if(s){if(o==-1){return false}if(n.bIsDirty){n.ticks=Date.now()}k=b.getImageUrl(s,o,-1,-1,n.ticks);u=b.getImageUrl(s,o,l,j,n.ticks);n.iImageControlWidth=l;n.iImageControlHeight=j;n.imageUrl=k;n.minImageUrl=u;n.bAddImage=t;n.bAppendImage=m;n.index=q;p.AttachImagesForControl(n,r)}return true};e.prototype.SetIfFitWindowAndType=function(k){var l=this;if(l.bSingleMode==true){l.bIfFitWindow=true;l.enumDWTFitWindowType=k;var j=l.GetWebViewer();if(null!=j){j.SetFitType(k);l.fZoom=j.GetZoom()}}else{l.bIfFitWindow=true}return true};e.prototype.GetAllowMultiSelect=function(){var j=this;return j.AllowMultiSelect};e.prototype.SetAllowMultiSelect=function(j){var k=this;k.AllowMultiSelect=j;return true};e.prototype.GetFitWindowType=function(){var j=this;return j.enumDWTFitWindowType};e.prototype.SetSelectionRectAspectRatio=function(j){var k=this;k.ratio=j;k.GetWebViewer().SetSelectionRectAspectRatio(j);return true};e.prototype.SetFitWindowType=function(j){var k=this;k.enumDWTFitWindowType=j;if(k.bSingleMode){k.GetWebViewer().SetFitType(j)}else{k.bIfFitWindow=true;k.enumDWTFitWindowType=0}return true};e.prototype.GetIfFitWindow=function(){var j=this;return j.bIfFitWindow};e.prototype.SetIfFitWindow=function(j){var k=this;k.bIfFitWindow=j;if(k.bSingleMode){if(k.bIfFitWindow){k.GetWebViewer().SetFitType(k.enumDWTFitWindowType)}else{k.GetWebViewer().SetFitType(5)}}else{k.bIfFitWindow=true;k.enumDWTFitWindowType=0}return true};e.prototype.GetImageMargin=function(){var j=this;if(j.imagesPerColumn==j.imagesPerRow&&j.imagesPerRow==1){return 0}else{return j.GetWebViewer().GetImageMargin()}};e.prototype.SetImageMargin=function(j){var k=this;if(k.imagesPerColumn==k.imagesPerRow&&k.imagesPerRow==1){}else{k.GetWebViewer().SetImageMargin(j)}return true};e.prototype.GetSelectionImageBorderColor=function(){var j=this;return j.SelectionImageBorderColor};e.prototype.SetSelectionImageBorderColor=function(j){var l=this,k=j;l.SelectionImageBorderColor=k;l.GetWebViewer().SetSelectionImageBorderColor(k);return true};e.prototype.GetZoom=function(){var k=this;if(k.bIfFitWindow){var j=k.GetWebViewer();if(null!=j){return j.GetZoom()}}return k.fZoom};e.prototype.SetZoom=function(l){var k=this;if(l<k.MIN_ZOOM){l=k.MIN_ZOOM}if(l>k.MAX_ZOOM){l=k.MAX_ZOOM}k.fZoom=l;if(k.bSingleMode==true){k.bIfFitWindow=false;k.enumDWTFitWindowType=0;var j=k.GetWebViewer();if(null!=j){j.SetZoom(k.fZoom)}}else{k.bIfFitWindow=true}return true};e.prototype.ZoomIn=function(l,q){var p=this;if(p.bSingleMode==true){var o=15000;var k=p.mapModelImageControl[p.getImageManager().convertClientIndexToServerId(p._WebViewer.GetCurrentIndex())];var m=p.fZoom;if(p.bIfFitWindow){var j=p.GetWebViewer();if(null!=j){m=j.GetZoom()}}var n=(Math.floor(m*100*p.zoomInStep)+1);if(1<n&&n<2501){if(parseInt(k.imageWidth*p.fZoom)>o||parseInt(k.imageHeight*p.fZoom)>o){b.output(p,i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);alert(i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);return false}else{p.SetZoom(n/100,l,q)}}else{b.output(p,i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);alert(i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);return false}}return true};e.prototype.ZoomOut=function(){var m=this;if(m.bSingleMode==true){var k=m.fZoom;if(m.bIfFitWindow){var j=m.GetWebViewer();if(null!=j){k=j.GetZoom()}}var l=(Math.floor(k*100*m.zoomOutStep)-1);if(1<l&&l<6501){m.SetZoom(l/100)}else{b.output(m,i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut);alert(i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut);return false}}return true};e.prototype.GetMouseShape=function(){var j=this;return j.iMouseShape};e.prototype.SetMouseShape=function(j){var k=this;k.iMouseShape=j;if(!k._ImgManager._isNoUI()){k.GetWebViewer().SetMouseShape(j)}return true};e.prototype.GetShowPageNumber=function(){var j=this;return j.bShowPageNumber};e.prototype.SetShowPageNumber=function(j){var k=this;k.bShowPageNumber=j;k.GetWebViewer().SetShowPageNumber(j);return true};e.prototype.SetBackgroundColor=function(j){var l=this,k=j;l.BackgroundColor=k;l.GetWebViewer().SetBackgroundColor(k);if(l.imagesPerRow==1&&l.imagesPerColumn==1){l.GetWebViewer().SetSelectedImageBackground(k)}return true};e.prototype.Go=function(j){var k=this;if(k.GetWebViewer().bShowImageEdit){if(k.GetWebViewer()._IfChangedWithinTheEditor==true){if(k.GetWebViewer().iChangedIndex!=j){k.GetWebViewer().ShowDialogForSaveImage(j,false,function(){return k.__GoInner(j)},function(){return k.__GoInner(j)})}}}return k.__GoInner(j)};e.prototype.SetCurrentIndexOnly=function(j){var k=this;return k.__GoInner(j)};e.prototype.__GoInner=function(j){var m=this,k,l;m.GetWebViewer().__goInner(j);return true};e.prototype.GetSelectedImageCount=function(){var j=this;return j.GetWebViewer().GetSelectedImagesCount()};e.prototype.SetSelectedImageCount=function(j){var k=this;k.GetWebViewer().SetSelectedImagesCount(j);return true};e.prototype.SetSelectedImageIndex=function(k,j){var l=this;l.GetWebViewer().SetSelectedImageIndex(k,j);return true};e.prototype.SetSelectedindexes=function(j){var k=this;return k.GetWebViewer().SetSelectedindexes(j)};e.prototype.GetSelectedindexes=function(j){var k=this;return k.GetWebViewer().GetSelectedindexes()};e.prototype.__Previous=function(){var j=this;j.Go(j.GetWebViewer().GetCurrentIndex()-1);return true};e.prototype.__Next=function(){var j=this;j.Go(j.GetWebViewer().GetCurrentIndex()+1);return true};e.prototype.__fireEvent=function(j,k){var l=this;if(a.isFunction(l[j])){return l[j](k)}return true};e.prototype.AddImage=function(m,l,j,n){var q=this,o=m*1,k,p;if(l==-1){return false}p=new a.UI.ModelImageControl();p.bIsDirty=true;p.serverId=l;q.mapModelImageControl[l]=p;if(l>=0){q.__GetImageAndAttach(p,l,false,true,n,o,j)}return true};e.prototype.RemoveImage=function(k,j){var m=this,l=k*1;if(m.GetWebViewer().bShowImageEdit){if(m.GetWebViewer()._IfChangedWithinTheEditor==true){if(m.GetWebViewer().iChangedIndex!=l){if(m.GetWebViewer().iChangedIndex>l){m.GetWebViewer().iChangedIndex--}m.GetWebViewer()._IfChangedWithinTheEditor=false;m.GetWebViewer().iChangedIndex=-1;m.GetWebViewer().updateButtons()}else{m.GetWebViewer()._IfChangedWithinTheEditor=false;m.GetWebViewer().iChangedIndex=-1;m.GetWebViewer().updateButtons()}}return m.RemoveImageInner(l,j)}else{return m.RemoveImageInner(l,j)}};e.prototype.RemoveImageInner=function(l,k){var n=this,m=l*1,j;if(typeof(m)==="undefined"||m<0||m>=n._ImgManager.count()){return false}j=n._ImgManager.count();if(k!=-1&&n.mapModelImageControl[k]){n.mapModelImageControl[k].Clear();delete n.mapModelImageControl[k]}return n.GetWebViewer().RemoveByIndex(m)};e.prototype.MoveImage=function(k,j,m){var l=this;return l.GetWebViewer().MoveImage(k,j)};e.prototype.SwitchImage=function(k,j){var l=this;return l.GetWebViewer().SwitchImage(k,j)};e.prototype.GetIfAutoScroll=function(){return this.__IfAutoScroll};e.prototype.SetIfAutoScroll=function(j){var k=this;k.__IfAutoScroll=j?true:false;k._WebViewer.SetIfAutoScroll(this.__IfAutoScroll);return true};e.prototype.Print=function(){var n=this,k=-1;k=n.GetWebViewer().GetCurrentIndex();if(k<0){return}var l,j;j=n.getImageManager().convertClientIndexToServerId(k);if(j==-1){a.Errors.IndexOutOfRange(n);return false}if(n._stwain._isMobileMode()){var m=n.GetWebViewer().GetUidByIndex(k);n.GetWebViewer().GetImageData(m).then(function(o){if(o.originalData instanceof ArrayBuffer){return n.__PrintInner(URL.createObjectURL(new Blob([o.originalData])),j,k)}else{return n.__PrintInner(o.originalData,j,k)}})}else{l=b.getImageUrl(n.BaseUrl,j,-1,-1);return n.__PrintInner(l,j,k)}return true};e.prototype.__PrintInner=function(m,j,l){var p=this;var k=p.mapModelImageControl[j],o=[];if(k){if(k.imageWidth<=0){k.imageWidth=p.getImageManager().GetImageWidth(l)}if(k.imageHeight<=0){k.imageHeight=p.getImageManager().GetImageHeight(l)}var n=new a.UI.PrintUrl(m,k.imageWidth,k.imageHeight);o.push(n)}else{return false}b.print(o);return true};e.prototype.GetHowManyImagesInBuffer=function(){var j=this;return j.GetWebViewer().GetHowManyImagesInBuffer()};e.prototype.RemoveImageTag=function(j){var k=this;return k.GetWebViewer().RemoveImageTag(j)};e.prototype.FilterImagesByTag=function(j,l,k){var m=this;return m.GetWebViewer().FilterImagesByTag(j,l,k)};e.prototype.GetServerIdListByTag=function(l){var p=this,o,m=[],k,j,n;if(l.length==0){for(k=0;k<p.GetHowManyImagesInBuffer();k++){n=p.GetWebViewer().GetCustomDataByIndex(k);if(n){m.push(n.imageId)}}}else{o=p.GetWebViewer().GetTagContents(l);for(k=0;k<o.length;k++){j=p.GetWebViewer().GetIndexByUid(o[k]);if(j>=0){n=p.GetWebViewer().GetCustomDataByIndex(j);if(n){m.push(n.imageId)}}}}return m};e.prototype.SetDefaultTag=function(j){var k=this;return k.GetWebViewer().SetDefaultTag(j)};e.prototype.AddImageTag=function(k,j){var l=this;return l.GetWebViewer().AddImageTag(k,j)};e.prototype.GetCurrentTag=function(){var k=this,j;j=k.GetWebViewer().GetCurrentTag();if(j==false){return""}else{return j}};e.prototype.BindView=function(k,m){var n=this,l=true,j=n.GetWebViewer();l=j.BindView(k);if(l){n.SetBackgroundColor(n.BackgroundColor);n.UpdateView(m);j.SetViewerBorderColor(j.ThumbnailBorderColor)}return l};e.prototype.UnbindView=function(){var j=this;return j.GetWebViewer().UnbindView()};e.prototype.UpdateView=function(m){var p=this,n,l=false;if(m){if(m.Height){var j=m.Height;if(Dynamsoft.Lib.isString(j)&&j.indexOf("%")>=0){p._stwain._height=j;var k=Dynamsoft.Lib.one("#"+p._stwain._containerID);n=parseInt(a.css(k,"height")*parseInt(j)/100)}else{n=parseInt(j);if(n){p._stwain._height=n+"px"}}if(n){if(n>p.imageViewHeight){l=true}p.imageViewHeight=n;p.GetWebViewer().SetHeight(p.imageViewHeight)}}if(m.Width){if(m.Width>p.imageViewWidth){l=true}p.imageViewWidth=m.Width;var o=m.Width;if(Dynamsoft.Lib.isString(o)&&o.indexOf("%")>=0){p._stwain._width=o;var k=Dynamsoft.Lib.one("#"+p._stwain._containerID);n=parseInt(a.css(k,"width")*parseInt(o)/100)}else{n=parseInt(o);if(n){p._stwain._width=n+"px"}}if(n){if(n>p.imageViewWidth){l=true}p.imageViewWidth=n;p.GetWebViewer().SetWidth(p.imageViewWidth)}}if(l){p.RefreshAllImages(p.imageViewWidth,p.imageViewHeight)}if(m.view){p.GetWebViewer().ShowThumbnail(m.view.bShow,m.view.Width)}}return true};e.prototype.GetIfShowVideoContainer=function(){var j=this;return j.GetWebViewer().GetIfShowVideoContainer()};e.prototype.ShowVideoContainer=function(j){var k=this;return k.GetWebViewer().ShowVideoContainer(j)};e.prototype.UpdateVideoContainer=function(j){var k=this;return k.GetWebViewer().UpdateVideoContainer(j)};e.prototype.__AttachImages=function(){var n=this,l,j,k;j=n.GetWebViewer().GetHowManyImagesInBuffer();for(var m=0;m<j;m++){l=n._ImgManager.convertClientIndexToServerId(m);if(l>=0){k=n.mapModelImageControl[l];n.__GetImageAndAttach(k,l,true,false,false,0)}}};e.prototype.exists=function(j){var k=this;if(a.isUndefined(k.mapModelImageControl[j])){return false}else{return true}};e.prototype.getImageManager=function(){var j=this;return j._ImgManager};e.prototype.GetImageData=function(j){var k=this;k.GetWebViewer().GetImageData(j)};e.prototype.Rotate=function(j,k){var l=this;l.GetWebViewer().RotateByWebViewer(j,k)};e.prototype.Mirror=function(j){var k=this;k.GetWebViewer().MirrorByWebViewer(j)};e.prototype.Flip=function(j){var k=this;k.GetWebViewer().FlipByWebViewer(j)};e.prototype.Crop=function(k,n,m,l,j){var o=this;o.GetWebViewer().CropByWebViewer(k,n,m,l,j)};e.prototype.RegistLoadCallback=function(k){var j=this;return j.GetWebViewer().RegistLoadCallback(k)};a.UI=a.UI||{};a.UI.ImageUIView=e});Dynamsoft.Ready(function(a,i){var d=Dynamsoft;if(!a.product.bHTML5Edition){return}var k=document,n=a.DOM,g=window,l=Dynamsoft.WebTwainEnv,h=l.CustomizableDisplayInfo.buttons,c=a.html5.Funs2,e={component:{bottomMenu:false,header:false},group:{viewMenu:{visibility:false},myGroup:{visibility:true,location:"topMenu",sequence:1}},cropStyle:{cropMask:false,cropBar:false},buttonResize:{ifResize:true,maxSize:22,minSize:16},buttons:{loadImage:{visibility:false},readDirection:{visibility:false},panelChange:{visibility:false},previousImage:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-preImage",sequence:1,onButtonClick:"OnPreviousImage"},nextImage:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-nextImage",sequence:2,onButtonClick:"OnNextImage"},blank1:{visibility:true,location:"myGroup",sequence:3},acquire:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-acquire",sequence:4,onButtonClick:"OnAcquire"},loadImages:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-load",sequence:5,onButtonClick:"OnLoadImage"},print:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-printImage",sequence:6,onButtonClick:"OnPrint"},blank2:{visibility:true,location:"myGroup",sequence:7},removeAll:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-removeall",sequence:8,onButtonClick:"OnRemoveAll"},remove:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-removeImage",sequence:9,onButtonClick:"OnRemove"},blank3:{visibility:true,location:"myGroup",sequence:10},rotateLeft:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-rotateLeftImage",sequence:11,onButtonClick:"OnRotateLeft"},rotate:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-rotate",sequence:12,onButtonClick:"OnRotate"},rotateRight:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-rotateRightImage",sequence:13,onButtonClick:"OnRotateRight"},deskew:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-deskew",sequence:14,onButtonClick:"OnDeskew"},blank4:{visibility:true,location:"myGroup",sequence:15},crop:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-cropImage-grey",sequence:16,onButtonClick:"OnCrop"},erase:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-erase-grey",sequence:17,onButtonClick:"OnErase"},changeImageSize:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-changeImageSize",sequence:18,onButtonClick:"OnChangeImageSize"},flip:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-flipImage",sequence:19,onButtonClick:"OnFlip"},mirror:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-mirrorImage",sequence:20,onButtonClick:"OnMirror"},blank5:{visibility:true,location:"myGroup",sequence:21},zoomin:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-zoomin",sequence:22,onButtonClick:"OnZoomin"},originalsize:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-originalsize",sequence:23,onButtonClick:"OnOriginalsize"},zoomout:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-zoomout",sequence:24,onButtonClick:"OnZoomout"},stretch:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-stretch",sequence:25,onButtonClick:"OnStretch"},blank6:{visibility:true,location:"myGroup",sequence:26},fitPage:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-fullWebType",sequence:27,onButtonClick:"OnFitPage"},fitWidth:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-fitWidthType",sequence:28,onButtonClick:"OnFitWidth"},fitHeight:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-fitHeightType",sequence:29,onButtonClick:"OnFitHeight"},blank7:{visibility:true,location:"myGroup",sequence:30},hand:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-hand",sequence:31,onButtonClick:"OnHand"},select:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-select",sequence:32,onButtonClick:"OnSelect"},clicktozoomin:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-clicktozoomin",sequence:33,onButtonClick:"OnClicktozoomin"},blank8:{visibility:true,location:"myGroup",sequence:34},restore:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-restore",sequence:35,onButtonClick:"OnRestore"},save:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-saveImage",sequence:36,onButtonClick:"OnSave"},close:{visibility:true,location:"topMenuRight",iconClass:"d-icon-font icon-close",sequence:1,onButtonClick:"OnClose"}},content:{besides:{visibility:false,sequence:4},thumbnail:{backgroundColor:"#fff"}},thumbnail:{showThumbnailControl:false,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"#7DA2CE",thumbnailBorderColor:"rgb(204, 204, 204)"},tipsConfig:{previousImage:h.titles.previous,nextImage:h.titles.next,acquire:h.titles.scan,loadImages:h.titles.load,print:h.titles.print,removeAll:h.titles.removeall,remove:h.titles.removeselected,rotateLeft:h.titles.rotateleft,rotate:h.titles.rotate,rotateRight:h.titles.rotateright,deskew:h.titles.deskew,crop:h.titles.crop,erase:h.titles.erase,changeImageSize:h.titles.changeimagesize,flip:h.titles.flip,mirror:h.titles.mirror,zoomin:h.titles.zoomin,originalsize:h.titles.originalsize,zoomout:h.titles.zoomout,stretch:h.titles.stretch,fitPage:h.titles.fit,fitWidth:h.titles.fitw,fitHeight:h.titles.fith,hand:h.titles.hand,select:h.titles.rectselect,clicktozoomin:h.titles.zoom,restore:h.titles.restore,save:h.titles.save,close:h.titles.close}},j={component:{header:true},group:{viewMenu:{visibility:false},global:{visibility:false},viewChange:{visibility:false},viewerCorner:{visibility:false},pager:{visibility:false},myGroup:{visibility:true,location:"topMenu",sequence:1},myGroup2:{visibility:true,location:"bottomMenu",sequence:1},myGroup3:{visibility:true,location:"header",sequence:1},myGroup4:{visibility:true,location:"bottomMenu",sequence:2}},cropStyle:{cropMask:false,cropBar:false},buttonResize:{ifResize:true,maxSize:22,minSize:16},buttons:{loadImage:{visibility:false},readDirection:{visibility:false},panelChange:{visibility:false},print:{visibility:false},loadImages:{visibility:true,location:"myGroup3",iconClass:"d-icon-font icon-load",sequence:1,onButtonClick:"OnLoadImage"},close:{visibility:true,location:"myGroup3",iconClass:"d-icon-font icon-close",sequence:2,onButtonClick:"OnClose"},rotateLeft:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-rotateLeftImage",sequence:1,onButtonClick:"OnRotateLeft"},rotateRight:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-rotateRightImage",sequence:2,onButtonClick:"OnRotateRight"},flip:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-flipImage",sequence:3,onButtonClick:"OnFlip"},mirror:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-mirrorImage",sequence:4,onButtonClick:"OnMirror"},crop:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-cropImage-grey",sequence:5,onButtonClick:"OnCrop"},erase:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-erase-grey",sequence:6,onButtonClick:"OnErase"},hand:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-hand",sequence:7,onButtonClick:"OnHand"},select:{visibility:true,location:"myGroup",iconClass:"d-icon-font icon-select",sequence:8,onButtonClick:"OnSelect"},firstPage:{visibility:true,location:"myGroup2",sequence:1,onButtonClick:"onFirstImage"},previousPage:{visibility:true,location:"myGroup2",sequence:2,onButtonClick:"OnPreviousImage"},pagination:{visibility:true,location:"myGroup2",sequence:3},nextPage:{visibility:true,location:"myGroup2",sequence:4,onButtonClick:"OnNextImage"},lastPage:{visibility:true,location:"myGroup2",sequence:5,onButtonClick:"onLastImage"},removeAll:{visibility:true,location:"myGroup4",iconClass:"d-icon-font icon-removeall",sequence:7,onButtonClick:"OnRemoveAll"},remove:{visibility:true,location:"myGroup4",iconClass:"d-icon-font icon-removeImage",sequence:8,onButtonClick:"OnRemove"},restore:{visibility:true,location:"myGroup4",iconClass:"d-icon-font icon-restore",sequence:10,onButtonClick:"OnRestore"},save:{visibility:true,location:"myGroup4",iconClass:"d-icon-font icon-saveImage",sequence:11,onButtonClick:"OnSave"}},content:{besides:{visibility:false,sequence:4},thumbnail:{backgroundColor:"#fff"}},thumbnail:{showThumbnailControl:false,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"#7DA2CE",thumbnailBorderColor:"rgb(204, 204, 204)"},tipsConfig:{previousImage:h.titles.previous,nextImage:h.titles.next,acquire:h.titles.scan,loadImages:h.titles.load,print:h.titles.print,removeAll:h.titles.removeall,remove:h.titles.removeselected,rotateLeft:h.titles.rotateleft,rotate:h.titles.rotate,rotateRight:h.titles.rotateright,deskew:h.titles.deskew,crop:h.titles.crop,erase:h.titles.erase,changeImageSize:h.titles.changeimagesize,flip:h.titles.flip,mirror:h.titles.mirror,zoomin:h.titles.zoomin,originalsize:h.titles.originalsize,zoomout:h.titles.zoomout,stretch:h.titles.stretch,fitPage:h.titles.fit,fitWidth:h.titles.fitw,fitHeight:h.titles.fith,hand:h.titles.hand,select:h.titles.rectselect,clicktozoomin:h.titles.zoom,restore:h.titles.restore,save:h.titles.save,close:h.titles.close}},m={isFunction:function(o){return o&&typeof(o)==="function"},addClass:function(q,p){var r=a.one(q);if(r&&r.length>0){r.addClass(p)}},removeClass:function(q,p){var r=a.one(q);if(r&&r.length>0){r.removeClass(p)}},output:function(p,o){if(Dynamsoft.WebTwainEnv.Debug){a.log(o)}},getTop:function(o){var p=o.offsetTop;if(o.offsetParent!=null){p+=m.getTop(o.offsetParent)}return p},getLeft:function(o){var p=o.offsetLeft;if(o.offsetParent!=null){p+=m.getLeft(o.offsetParent)}return p}};var b;if(a.env.bMac){if(Dynamsoft.dcp.b64bit){b="libDynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dylib"}else{b="libDynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dylib"}}else{if(a.env.bLinux){b="libDynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".so"}else{if(Dynamsoft.dcp.b64bit){b="DynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}else{b="DynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}}}function f(r,p,o){var q=this;q._ImgManager=r;q._stwain=r._stwain;q._UIView=o;q._HowManyImagesInBuffer=0;q._currentIndex=-1;q._currentTag="";q.bCouldBeTimeConsuming=false;q.bShowImageEdit=false;q.bShowImageEditForFullScreen=false;q.ThumbnailBorderColor="rgb(204, 204, 204)";q.SelectedImageBorderColor="#7DA2CE";q.SelectedImageBackground="rgb(199, 222, 252)";q.ImageBorderColor="rgb(238, 238, 238)";q.HoverBorderColor="rgb(238, 238, 238)";q.HoverBackgroundColor="rgb(239, 246, 253)";q.PlaceholderBackgroundColor="rgb(251, 236, 136)";q.sHorizontalImageCount=-1;q.sVerticalImageCount=-1;q.ifWebviewerInit=false;q._Init(p)}f.prototype._Init=function(o){var s=this;if(o.Container&&(a.isNodeList(o.Container)||(a.isArray(o.Container)&&o.Container.length>0))){var r=o.Container[0];if(r){s.iContainerId=r.id}else{s.iContainerId=""}}else{s.iContainerId=""}s.WebviewerHeight=o.Height;s.WebviewerWidth=o.Width;if(s.mydvs){if(s.iContainerId!=""){s.BindView(s.iContainerId)}return}var q=e;s.bMobile=false;s.bMobile_function=false;if(s._stwain._isMobileMode()){if(!s._stwain._isPC()){q=j;s.bMobile=true;s.bMobile_function=true}}if(s.iContainerId){s.mydvs=new DVS({containerId:s.iContainerId,uiConfig:q,scrollerConfig:{useRelativeZoom:false,zoomInStretch:false}});s._InitDVS()}else{s.mydvs=new DVS({containerId:"",uiConfig:q,scrollerConfig:{useRelativeZoom:false,zoomInStretch:false}})}try{if(s.mydvs.bindAreaDetectFunction){s.mydvs.bindAreaDetectFunction(s._stwain._areaDetectCallback)}if(s.mydvs.bindPerspectiveFunction){s.mydvs.bindPerspectiveFunction(s._stwain._perspectiveCallback)}if(s.mydvs.bindLicenseCallback){s.mydvs.bindLicenseCallback(function(){return s._stwain._checkWebcamWasmLicense()})}if(s.mydvs.bindSavePhotoCallback){s.mydvs.bindSavePhotoCallback(function(t){return s._stwain._saveImageCallback(t)})}}catch(p){}s._stwain.Viewer=s.mydvs;s._BindButtonEvents();s._bRegistedLoad=false};f.prototype.BindView=function(o){var q=this,p=false;q.mydvs.showHeader=false;q.mydvs.showTopMenu=false;q.mydvs.showFooter=false;p=q.mydvs.bindViewer(o);if(!p){a.Errors.WebviewerError(q._stwain,q.mydvs.errorMessage,q.mydvs.errorCode);return false}q.iContainerId=o;q._stwain._containerID=o;if(!q.ifWebviewerInit){q._InitDVS();q._UIView.__InitWebViewer()}return p};f.prototype.UnbindView=function(){var p=this,o=false;if(p._stwain&&p._stwain.Addon&&p._stwain.Addon.Camera){if(p._stwain.Addon.Camera.getStatus()!=""){p._stwain.Addon.Camera.closeSource()}}o=p.mydvs.unbindViewer();p.iContainerId="";if(!o){a.Errors.WebviewerError(p._stwain,p.mydvs.errorMessage,p.mydvs.errorCode)}return o};f.prototype.SetUIView=function(o){var p=this;p._UIView=o};f.prototype._BindButtonEvents=function(){var o=this;a.each(["OnPreviousImage","OnNextImage","OnAcquire","OnLoadImage","OnPrint","OnRemoveAll","OnRemove","OnRotateLeft","OnRotate","OnRotateRight","OnDeskew","OnCrop","OnErase","OnChangeImageSize","OnFlip","OnMirror","OnZoomin","OnOriginalsize","OnZoomout","OnStretch","OnFitPage","OnFitWidth","OnFitHeight","OnHand","OnSelect","OnClicktozoomin","OnRestore","OnSave","OnClose","topImageChange","click","imageClick","rightClick","imageRightClick","doubleClick","imageDoubleClick","move","imageAreaSelected","imageAreaUnselected","dragDone","imageMove","onDrop","onFirstImage","onLastImage","pageChange"],function(p){o.mydvs.on(p,function(r,q){o[p](r,q)})})};f.prototype._InitDVS=function(){var p=this,o=false;p.ifWebviewerInit=true;p.mydvs.showHeader=false;p.mydvs.showTopMenu=false;p.mydvs.showFooter=false;p.mydvs.showMain=false;p.mydvs.bOnlyShowThumbnailsView=true;p.mydvs.showThumbnail=true;p.mydvs.showThumbnailControl=false;p.mydvs.keepZoom=true;p.mydvs.showLatestImage=true;p.mydvs.useOuterDrop=true;p.mydvs.minZoom=p._UIView.MIN_ZOOM;p.mydvs.maxZoom=p._UIView.MAX_ZOOM;p.mydvs.off("imageRightClick");p.SetWidthInner(p.WebviewerWidth);p.SetHeightInner(p.WebviewerHeight);p.mydvs.thumbnailBorderColor=p.ThumbnailBorderColor;p.mydvs.selectedImageBorderColor=p.SelectedImageBorderColor;p.mydvs.imageBorderColor=p.ImageBorderColor;p.mydvs.viewerBorderColor=p.ThumbnailBorderColor;p.mydvs.hoverBorderColor=p.HoverBorderColor;p.mydvs.hoverBackgroundColor=p.HoverBackgroundColor;p.mydvs.placeholderBackgroundColor=p.PlaceholderBackgroundColor;p.SetSelectedImageBackground(p._UIView.BackgroundColor);p.SetImageMargin(25);o=p.mydvs.setViewMode(1,1);if(!o){a.Errors.WebviewerError(p._stwain,p.mydvs.errorMessage,p.mydvs.errorCode)}};f.prototype.ShowImageEditor=function(p,q,u,t){var w=this;var v=a.one(".dynamsoft-cvs-container");if(v&&v.getEL()){w.cvsContainer=v;w.cvsParentId=v.parent()[0].id;if(w._stwain&&w._stwain.Addon&&w._stwain.Addon.Camera){w.cvsStatus=w._stwain.Addon.Camera.getStatus()}}else{w.cvsContainer="";w.cvsParentId="";w.cvsStatus=""}w.config_Zoom=w.mydvs.zoom;w.config_uiConfig=w.mydvs.uiConfig;if(!w.bMobile||w.bPadViewer){w.mydvs.updateUISettings(e)}else{w.mydvs.updateUISettings(j)}w.bShowImageEdit=true;w.config_SelectionRectAspectRatio=w.mydvs.selectionRectAspectRatio;w.config_showHeader=w.mydvs.showHeader;w.config_showTopMenu=w.mydvs.showTopMenu;w.config_showFooter=w.mydvs.showFooter;w.config_showMain=w.mydvs.showMain;w.config_showThumbnail=w.mydvs.showThumbnail;w.config_fullThumbnail=w.mydvs.bOnlyShowThumbnailsView;w.config_canvasBackground=w.mydvs.canvasBackground;w.config_iMouseShape=w._UIView.iMouseShape;w.UIEditor=p;if(q){if(w.sHorizontalImageCount==-1&&w.sVerticalImageCount==-1&&!w.bShowImageEdit){w.SetBackgroundColor(w._UIView.BackgroundColor);w.SetSelectedImageBackground(w._UIView.BackgroundColor)}else{if(w.sHorizontalImageCount>1||w.sHorizontalImageCount<-1||w.sVerticalImageCount>1||w.sVerticalImageCount<-1){w.SetSelectedImageBackground(w.SelectedImageBackground);w.SetBackgroundColor(w._UIView.BackgroundColor)}else{w.SetSelectedImageBackground(w._UIView.BackgroundColor)}}w.mydvs.bindContent(p,u,t);var s=document.getElementById(w.cvsParentId);if(s){s.appendChild(w.cvsContainer[0])}}else{w.UIEditor.className="D_ImageUIEditor";w.UIEditor.style.width="100%";w.UIEditor.style.height="100%";w.UIEditor.style.position="fixed";w.UIEditor.style.left="0px";w.UIEditor.style.top="0px";w.UIEditor.style.zIndex="9999";w.SetWidthInner("100%",true);w.SetHeightInner("100%",true);var x=document.getElementById(w.iContainerId);if(x){w.UIEditor.appendChild(x.childNodes[0])}document.documentElement.scrollLeft=0;document.documentElement.scrollTop=0;document.body.style.overflow="hidden";w.mydvs.showThumbnail=false;w.bShowImageEditForFullScreen=true}if(w._UIView){w._UIView.bSingleMode=true;w._UIView.SetIfFitWindowAndType(0)}w.updateMode();w.mydvs.canvasBackground="rgba(67,66,70,1)";w.mydvs.showMain=true;w.mydvs.showTopMenu=true;w.SetSelectionRectAspectRatio(0);w.HideEditorButtonForPad();w.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}];if(w._stwain._isMobileMode()){w.BackImageData();var r=a.one(".icon-acquire");if(r&&r.getEL()){r[0].style.display="none"}w.dwtMobileFileId="dwtmobilefile";if(w.UIEditor&&w.UIEditor.nodeName=="DIV"){var y=document.createElement("div");if(w.bMobile){y.innerHTML="<input multiple accept='image/jpeg,image/png,image/tiff' id ='"+w.dwtMobileFileId+"' type='file' style='display:none' />"}else{y.innerHTML="<input multiple accept='image/*,.pdf' id ='"+w.dwtMobileFileId+"' type='file' style='display:none' />"}w.UIEditor.appendChild(y)}else{var o=document.getElementById(w.UIEditor);var y=document.createElement("div");if(w.bMobile){y.innerHTML="<input id ='"+w.dwtMobileFileId+"' type='file' accept='image/jpeg,image/png,image/tiff' style='display:none' />"}else{y.innerHTML="<input id ='"+w.dwtMobileFileId+"' type='file' accept='image/*,.pdf' style='display:none' />"}o.appendChild(y)}var z=a.get(w.dwtMobileFileId);z.onchange=function(){for(var A=0;A<this.files.length;A++){w._stwain.LoadImageFromBinary(this.files[A])}var B=document.getElementById(w.dwtMobileFileId);B.value=""}}w.mydvs.off("slideSwitch");w.mydvs.on("slideSwitch",function(A){if(A=="left"){w.previous()}else{if(A=="right"){w.next()}}})};f.prototype.HideEditorButtonForPad=function(){var t=this,p=t.mydvs,r=t.bPadViewer;var s=document.getElementById("rotateBtn"+p.postfix);if(s){if(!r){s.style.display=""}else{s.style.display="none"}}var q=document.getElementById("deskewBtn"+p.postfix);if(q){if(!r){q.style.display=""}else{q.style.display="none"}}var o=document.getElementById("changeImageSizeBtn"+p.postfix);if(o){if(!r){o.style.display=""}else{o.style.display="none"}}};f.prototype.BackImageData=function(){var p=this;if(p._stwain._isMobileMode()&&p.bShowImageEdit){var o=p.GetCurrentIndex();if(o>=0){p.GetImageData(p.GetUidByIndex(o)).then(function(r){p.BackImageBuffer=r.originalData;var q=p.mydvs.getMetaDataByIndex(o);if(q){p.BackModelImageControl={};p.BackModelImageControl.imageWidth=q.imageWidth;p.BackModelImageControl.imageHeight=q.imageHeight;p.BackModelImageControl.imageBitDepth=q.imageBitDepth;p.BackModelImageControl.imageXResolution=q.imageXResolution;p.BackModelImageControl.imageYResolution=q.imageYResolution}})}}};f.prototype.CloseShowImageEditor=function(){var p=this;p.mydvs.showHeader=p.config_showHeader;p.mydvs.showTopMenu=p.config_showTopMenu;p.mydvs.showFooter=p.config_showFooter;p.mydvs.showMain=p.config_showMain;p.mydvs.showThumbnail=p.config_showThumbnail;p.mydvs.bOnlyShowThumbnailsView=p.config_fullThumbnail;p.mydvs.canvasBackground=p.config_canvasBackground;p.SetMouseShape(p.config_iMouseShape);p.SetSelectionRectAspectRatio(p.config_SelectionRectAspectRatio);if(p.config_uiConfig){p.mydvs.updateUISettings(p.config_uiConfig)}if(p.config_Zoom==1){p.mydvs.fittype="window"}else{p.mydvs.zoom=p.config_Zoom}if(p.cvsContainer&&p.cvsContainer!=""&&p.cvsParentId&&p.cvsParentId!=""){var o=document.getElementById(p.cvsParentId);if(o){o.appendChild(p.cvsContainer[0])}if(p.cvsStatus=="playing"){if(p._stwain&&p._stwain.Addon&&p._stwain.Addon.Camera){p._stwain.Addon.Camera.resume()}}}};f.prototype.ShowThumbnail=function(o,p){var r=this,q=0;if(o){if(a.isUndefined(p)){p=0}if(a.isString(p)&&p.indexOf("%")>=0){q=r.mydvs.width*(100-parseInt(p))/100}else{q=r.mydvs.width-p}if(q<=0){r.mydvs.bOnlyShowThumbnailsView=true;r.mydvs.showThumbnail=true;r.mydvs.showMain=false}else{r.mydvs.bOnlyShowThumbnailsView=false;r.mydvs.showThumbnail=true;r.mydvs.showMain=true;r.mydvs.thumbnailWidth=parseInt(q)}}else{r.mydvs.bOnlyShowThumbnailsView=true;r.mydvs.showThumbnail=true;r.mydvs.showMain=false}};f.prototype.GetUidByIndex=function(o){var p=this;if(o<0||o>=p.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(p._stwain);return -1}return p.mydvs.getUidByIndex(o)};f.prototype.GetIndexByUid=function(o){var p=this;if(!o||o==""||o==-1){a.Errors.IndexOutOfRange(p._stwain);return -1}return p.mydvs.getIndexByUid(o)};f.prototype.SetMetaDataByIndex=function(p,o){var q=this;if(p<0||p>=q.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(q._stwain);return}return q.mydvs.setMetaDataByIndex(p,o)};f.prototype.GetMetaDataByIndex=function(o){var p=this;if(o<0||o>=p.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(p._stwain);return}return p.mydvs.getMetaDataByIndex(o)};f.prototype.GetCustomDataByIndex=function(o){var q=this,p;if(o<0||o>=q.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(q._stwain);return}if(a.isArray(o)){p=o[0]}else{p=o}return q.mydvs.getCustomDataByIndex(p)};f.prototype.GetHowManyImagesInBuffer=function(){var o=this;if(!a.isUndefined(o.mydvs.currentImageCount)){return o.mydvs.currentImageCount}else{if(!a.isUndefined(o.mydvs.imageCount)){return o.mydvs.imageCount}else{return 0}}};f.prototype.SetHowManyImagesInBuffer=function(o){var p=this;p._HowManyImagesInBuffer=o};f.prototype.GetHowManyImagesInBufferInner=function(){var o=this;var o=this;if(!a.isUndefined(o.mydvs.currentImageCount)){return o.mydvs.currentImageCount}else{if(!a.isUndefined(o.mydvs.imageCount)){return o.mydvs.imageCount}else{return 0}}};f.prototype.UpdateInfo=function(){var o=this;Dynamsoft.Lib.hideMask()};f.prototype.AppendImage=function(r,w){var u=this,o=r.imageUrl,x=r.minImageUrl,q=r.serverId,s=r.bAppendImage,v=r.index,p={};if(w){if(!a.isUndef(w.imageWidth)){p.imageWidth=w.imageWidth}if(!a.isUndef(w.imageHeight)){p.imageHeight=w.imageHeight}if(!a.isUndef(w.imageBitDepth)){p.imageBitDepth=w.imageBitDepth}if(!a.isUndef(w.imageXResolution)){p.imageXResolution=w.imageXResolution}if(!a.isUndef(w.imageYResolution)){p.imageYResolution=w.imageYResolution}}a.log("AppendImage_originalData:"+o);if(s||(s==false&&u.GetHowManyImagesInBuffer()==0)){var t=u.mydvs.appendImageSync("file1",[{originalData:o,minData:x,metaData:p,customData:{imageId:q}}]);r.uuid=t[0];u.UpdateInfo();u.updateMode();u.BackImageData();return t[0]}else{var t=u.mydvs.insertImageSync("file1",[{originalData:o,minData:x,metaData:p,customData:{imageId:q}}],v);r.uuid=t[0];u.UpdateInfo();u.updateMode();u.BackImageData();return t[0]}};f.prototype.MobileAppendImage=function(t,o){var u=this,r=t.bAppendImage,p=t.index,s={};o.imageId=t.serverId;if(o&&o.metaData){if(!a.isUndef(o.metaData.imageWidth)){s.imageWidth=o.metaData.imageWidth}if(!a.isUndef(o.metaData.imageHeight)){s.imageHeight=o.metaData.imageHeight}if(!a.isUndef(o.metaData.imageBitDepth)){s.imageBitDepth=o.metaData.imageBitDepth}if(!a.isUndef(o.metaData.imageXResolution)){s.imageXResolution=o.metaData.imageXResolution}if(!a.isUndef(o.metaData.imageYResolution)){s.imageYResolution=o.metaData.imageYResolution}delete o.metaData}if(o.dataType=="url"||!("srcId" in o)){if("src" in o){t.imageUrl=o.src;delete o.src}if("imageUrl" in o){t.imageUrl=o.imageUrl;delete o.imageUrl}return u.AppendImage(t,s)}if(r==false&&u.GetHowManyImagesInBuffer()==0){var q=u.mydvs.appendImageSync("file1",[{originalData:null,minData:null,metaData:s,customData:o}]);t.uuid=q[0];u.UpdateInfo();u.updateMode();u.BackImageData();return q[0]}else{var q=u.mydvs.insertImageSync("file1",[{originalData:null,minData:null,metaData:s,customData:o}],p);t.uuid=q[0];u.UpdateInfo();u.updateMode();u.BackImageData();return q[0]}};f.prototype.UpdateImage=function(u,o){var v=this,p=u.imageUrl,s=u.minImageUrl,q=u.serverId,r=u.uuid,t={};if(o){if(!a.isUndef(o.imageWidth)){t.imageWidth=o.imageWidth}if(!a.isUndef(o.imageHeight)){t.imageHeight=o.imageHeight}if(!a.isUndef(o.imageBitDepth)){t.imageBitDepth=o.imageBitDepth}if(!a.isUndef(o.imageXResolution)){t.imageXResolution=o.imageXResolution}if(!a.isUndef(o.imageYResolution)){t.imageYResolution=o.imageYResolution}}if(!r||r==""||r==-1){a.Errors.IndexOutOfRange(v._stwain);return false}v._UpdateImageInner(r,{originalData:p,minData:s,customData:{imageId:q},metaData:t});v.UpdateInfo();return r};f.prototype.MobileUpdateImage=function(u,o){var v=this,q=u.index,r=u.uuid,t={},s={};if(!r||r==""||r==-1){a.Errors.IndexOutOfRange(v._stwain);return false}var t=v.mydvs.getMetaDataByIndex(q);if(t&&"metaData" in o&&o.metaData){if(!a.isUndef(o.metaData.imageWidth)){t.imageWidth=o.metaData.imageWidth}if(!a.isUndef(o.metaData.imageHeight)){t.imageHeight=o.metaData.imageHeight}if(!a.isUndef(o.metaData.imageBitDepth)){t.imageBitDepth=o.metaData.imageBitDepth}if(!a.isUndef(o.metaData.imageXResolution)){t.imageXResolution=o.metaData.imageXResolution}if(!a.isUndef(o.metaData.imageYResolution)){t.imageYResolution=o.metaData.imageYResolution}}if(o.dataType=="url"||!("srcId" in o)){if("src" in o){u.imageUrl=o.src}if("imageUrl" in o){u.imageUrl=o.imageUrl}return v.UpdateImage(u,t)}if(o&&o.src&&o.srcId){var s=v.mydvs.getCustomDataByIndex(q);if(s){s.src=o.src;s.srcId=o.srcId;if(!a.isUndef(o.imgType)){s.imgType=o.imgType}var p={};if(s){p.customData=s;p.metaData=t;v._UpdateImageInner(r,p)}}v.UpdateInfo()}return r};f.prototype._UpdateImageInner=function(q,o){var r=this;if(r._stwain._isMobileMode()&&r.bShowImageEdit){var p=r.GetIndexByUid(q);if(p>=0){r.GetImageData(q).then(function(t){var s=true;if(r.BackImageBuffer==t.originalData){s=false}r.mydvs.updateImageSync(q,o,s)})}else{r.mydvs.updateImageSync(q,o)}}else{r.mydvs.updateImageSync(q,o)}};f.prototype.RemoveByIndex=function(q){var r=this,p;if(q<0||q>=r.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(r._stwain);return false}var o=[];o.push(q);p=r.mydvs.removeSync(o);if(p){r.UpdateInfo();r.BackImageData()}else{a.Errors.WebviewerError(r._stwain,r.mydvs.errorMessage,r.mydvs.errorCode)}return p};f.prototype.RemoveAllImages=function(){var p=this,o;o=p.mydvs.removeAllSync();if(o){p.UpdateInfo()}else{a.Errors.WebviewerError(p._stwain,p.mydvs.errorMessage,p.mydvs.errorCode)}return o};f.prototype.SetCurrentIndex=function(p){var q=this,o=false;if(p<0||p>=q.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(q._stwain);return false}q.mydvs.goToPage(p);q.mydvs.thumbnailScrollTo(p);o=q.mydvs.setCurrentIndex(p);if(!o){a.Errors.WebviewerError(q._stwain,q.mydvs.errorMessage,q.mydvs.errorCode)}q.UpdateInfo();return o};f.prototype.OnlySetCurrentIndex=function(p){var q=this,o=false;if(p<0||p>=q.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(q._stwain);return false}o=q.mydvs.setCurrentIndex(p);if(!o){a.Errors.WebviewerError(q._stwain,q.mydvs.errorMessage,q.mydvs.errorCode)}return o};f.prototype.GetCurrentIndex=function(){var p=this,o=-1;if(p.GetHowManyImagesInBuffer()>0){o=p.mydvs.getCurrentIndex();if(a.isUndef(o)||o<0){a.Errors.WebviewerError(p._stwain,p.mydvs.errorMessage,p.mydvs.errorCode)}}return o};f.prototype.SetSelectedindexes=function(p){var q=this,o=false;o=q.mydvs.setSelectedIndexes(p);if(!o){a.Errors.WebviewerError(q._stwain,q.mydvs.errorMessage,q.mydvs.errorCode)}return o};f.prototype.GetSelectedindexes=function(){var o=this;return o.mydvs.getSelectedIndexes()};f.prototype.SetShowPageNumber=function(o){var p=this;p.mydvs.showPageNumber=o};f.prototype.GoToPage=function(p){var q=this,o=false;if(p<0||p>=q.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(q._stwain);return false}o=q.mydvs.goToPage(p);if(!o){a.Errors.WebviewerError(q._stwain,q.mydvs.errorMessage,q.mydvs.errorCode)}q.UpdateInfo();return o};f.prototype.SetSelectedImageArea=function(s,r,q,p){var t=this,o=false;o=t.mydvs.setSelectedImageArea(s,r,q-s,p-r);if(!o){a.Errors.WebviewerError(t._stwain,t.mydvs.errorMessage,t.mydvs.errorCode)}return o};f.prototype.SetSelectedThumbnailArea=function(s,r,q,p){var t=this,o=false;o=t.mydvs.setSelectedThumbnailArea(s,r,q-s,p-r);if(!o){a.Errors.WebviewerError(t._stwain,t.mydvs.errorMessage,t.mydvs.errorCode)}return o};f.prototype.SetSelectionRectAspectRatio=function(o){var p=this;p.mydvs.selectionRectAspectRatio=o;return true};f.prototype.ZoomIn=function(){var p=this,o=false;o=p.mydvs.zoomIn();if(!o){a.Errors.WebviewerError(p._stwain,p.mydvs.errorMessage,p.mydvs.errorCode)}return o};f.prototype.ZoomOut=function(){var p=this,o=false;o=p.mydvs.zoomOut();if(!o){a.Errors.WebviewerError(p._stwain,p.mydvs.errorMessage,p.mydvs.errorCode)}return o};f.prototype.SetZoom=function(s,o,r){var q=this,p=false;if(o&r){p=q.mydvs.zoomTo(s,o,r)}else{p=q.mydvs.zoomTo(s)}if(!p){a.Errors.WebviewerError(q._stwain,q.mydvs.errorMessage,q.mydvs.errorCode)}return p};f.prototype.GetZoom=function(){var o=this;return o.mydvs.zoom};f.prototype.SetFitType=function(p){var q=this;var o;switch(p){case 0:o="window";break;case 1:o="height";break;case 2:o="width";break;case 4:o="stretch";break;case 5:o="origin";break;default:o="origin";break}q.mydvs.fitType=o;return true};f.prototype.SetMouseShape=function(q){var r=this;var p="pointer";var o;switch(q){case EnumDWT_MouseShape.Default:o="default";r.SetOperationMode(1);break;case EnumDWT_MouseShape.Hand:o="pointer";r.SetOperationMode(0);break;case EnumDWT_MouseShape.Crosshair:o="crosshair";r.SetOperationMode(1);if((r.sHorizontalImageCount==1&&r.sVerticalImageCount==1)||(r.sHorizontalImageCount==-1&&r.sVerticalImageCount==-1)){p="crosshair"}else{p="pointer"}break;case EnumDWT_MouseShape.Zoom:o="zoom-in";r.SetOperationMode(2);break;case EnumDWT_MouseShape.NWResize:o="nw-resize";break;case EnumDWT_MouseShape.EResize:o="e-resize";break;case EnumDWT_MouseShape.NResize:o="n-resize";break;case EnumDWT_MouseShape.Resize:o="all-scroll";break;case EnumDWT_MouseShape.Move:o="move";break;default:o="default";break}r.mydvs.canvasMouseShape=o;r.mydvs.cursorOverThumbnailsView=p;return true};f.prototype.SetImageMargin=function(o){var p=this;p.mydvs.imageMargin=o;return true};f.prototype.GetImageMargin=function(){var o=this;return o.mydvs.imageMargin};f.prototype.SetSelectionImageBorderColor=function(o){var p=this;p.mydvs.selectedImageBorderColor=o;return true};f.prototype.SetBackgroundColor=function(o){var p=this;p.mydvs.thumbnailBackground=o;p.mydvs.canvasBackground=o;return true};f.prototype.SetViewerBorderColor=function(o){var p=this;p.mydvs.viewerBorderColor=o;return true};f.prototype.SetWidth=function(o){var p=this;p.WebviewerWidth=o;return p.SetWidthInner(o)};f.prototype.SetWidthInner=function(p,q){var r=this;if(q){r.mydvs.width=p}else{if(a.isString(p)&&p.indexOf("%")>=0){var o=a.one("#"+r._stwain._containerID);r.mydvs.width=parseInt(a.css(o,"width")*parseInt(p)/100)}else{r.mydvs.width=p}}return true};f.prototype.SetHeight=function(o){var p=this;p.WebviewerHeight=o;return p.SetHeightInner(o)};f.prototype.SetHeightInner=function(o,q){var r=this;if(q){r.mydvs.height=o}else{if(a.isString(o)&&o.indexOf("%")>=0){var p=a.one("#"+r._stwain._containerID);r.mydvs.height=parseInt(a.css(p,"height")*parseInt(o)/100)}else{r.mydvs.height=o}}return true};f.prototype.SwitchImage=function(q,p){var r=this,o=false;if(q<0||q>=r.GetHowManyImagesInBuffer()||p<0||p>=r.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(r._stwain);return false}o=r.mydvs.switchImage(q,p);if(!o){a.Errors.WebviewerError(r._stwain,r.mydvs.errorMessage,r.mydvs.errorCode)}return o};f.prototype.MoveImage=function(q,p){var r=this,o=false;if(q<0||q>=r.GetHowManyImagesInBuffer()||p<0||p>=r.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(r._stwain);return false}o=r.mydvs.moveImage(q,p);if(!o){a.Errors.WebviewerError(r._stwain,r.mydvs.errorMessage,r.mydvs.errorCode)}return o};f.prototype.SetViewMode=function(r,q){var s=this,p=false;s.sHorizontalImageCount=r;s.sVerticalImageCount=q;if(r==-1&&q==-1){if(!s.bShowImageEdit){s.mydvs.showMain=true;s.mydvs.showTopMenu=false;s.mydvs.showHeader=false;s.mydvs.showFooter=false;s.mydvs.showThumbnail=false;s.SetBackgroundColor(s._UIView.BackgroundColor);s.SetSelectedImageBackground(s._UIView.BackgroundColor)}else{s.config_showMain=true;s.config_showTopMenu=false;s.config_showHeader=false;s.config_showFooter=false;s.config_showThumbnail=false;s.config_canvasBackground=s._UIView.BackgroundColor}p=true}else{if(!s.bShowImageEdit){if(s.mydvs.showMain){s.mydvs.showMain=false;s.mydvs.showThumbnail=true;s.mydvs.bOnlyShowThumbnailsView=true}}else{if(s.config_showMain){s.config_showMain=false;s.config_showThumbnail=true;s.config_fullThumbnail=true}}if(q<0){p=s.mydvs.setViewMode(r,q)}else{var o=r;if(r>0){o=0-r}p=s.mydvs.setViewMode(o,q)}if(!p){a.Errors.WebviewerError(s._stwain,s.mydvs.errorMessage,s.mydvs.errorCode)}if(r>1||r<-1||q>1||q<-1){s.SetSelectedImageBackground(s.SelectedImageBackground)}else{s.SetSelectedImageBackground(s._UIView.BackgroundColor)}s.ThumbnailScrollTo(s.GetCurrentIndex())}return p};f.prototype.SetIfAutoScroll=function(o){var p=this;p.mydvs.autoScroll=o;p.mydvs.showLatestImage=o;return true};f.prototype.SetSelectedImagesCount=function(o){var p=this;p.mydvs.selectedImageCount=o;return true};f.prototype.GetSelectedImagesCount=function(){var o=this;return o.mydvs.selectedImageCount};f.prototype.SetSelectedImageIndex=function(q,p){var r=this,o=false;if(q<0||q>=r.GetHowManyImagesInBuffer()||p<0||p>=r.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(r._stwain);return false}o=r.mydvs.setSelectImageIndex(q,p);if(!o){a.Errors.WebviewerError(r._stwain,r.mydvs.errorMessage,r.mydvs.errorCode)}return o};f.prototype.RemoveImageTag=function(q){var r=this,p,o=false;if(q<0||q>=r.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(r._stwain);return false}p=r.GetUidByIndex(q);if(p&&p!=""&&p!=-1){o=r.mydvs.removeImageTag(p);if(!o){a.Errors.WebviewerError(r._stwain,r.mydvs.errorMessage,r.mydvs.errorCode)}return o}else{a.Errors.WebviewerError(r._stwain,r.mydvs.errorMessage,r.mydvs.errorCode);return false}};f.prototype.FilterImagesByTag=function(p,r,q){var s=this,o=false;if(p.length==0){s._currentTag="";o=s.mydvs.openAll().then(function(){s.mydvs.setDefaultTag("");if(a.isFunction(r)){r()}},function(t){if(a.isFunction(q)){q(t.code,t.message)}})}else{s._currentTag=p;s.mydvs.openTag(p).then(function(){s.mydvs.setDefaultTag(p);if(a.isFunction(r)){r()}},function(t){if(a.isFunction(q)){q(t.code,t.message)}})}return true};f.prototype.GetTagContents=function(p){var s=this,o=false,r=[],q;if(p.length>0){o=s.mydvs.getTagContents(p)}else{o=s.mydvs.getAllContents()}if(!o){a.Errors.WebviewerError(s._stwain,s.mydvs.errorMessage,s.mydvs.errorCode)}return o};f.prototype.SetDefaultTag=function(p){var q=this,o=false;q._currentTag=p;q.mydvs.addTag(p);o=q.mydvs.setDefaultTag(p);if(!o){a.Errors.WebviewerError(q._stwain,q.mydvs.errorMessage,q.mydvs.errorCode)}return o};f.prototype.AddImageTag=function(s,q){var t=this,o,r;t.mydvs.addTag(q);t._currentTag=q;for(var p=0;p<s.length;p++){o=s[p];if(o>=0){r=t.GetUidByIndex(o);if(r&&r!=""&&r!=-1){t.mydvs.addImageTag(r,q)}}}return true};f.prototype.GetCurrentTag=function(){var p=this,o;return p._currentTag};f.prototype.OverlayRectangle=function(w,t,s,v,q,p,r){var u=this,o=false;if(w<0||w>=u.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(u._stwain);return false}o=u.mydvs.overlayRectangle(w,t,s,(v-t),(q-s),p,r);if(!o){a.Errors.WebviewerError(u._stwain,u.mydvs.errorMessage,u.mydvs.errorCode)}return o};f.prototype.ChangeButtonClass=function(o,r){var q=this,p;p=q.mydvs.setButtonClass(o,r);return p};f.prototype.SetOperationMode=function(p){var q=this,o;q.mydvs.operationMode=p};f.prototype.UnbindContent=function(p){var q=this,o;q.mydvs.unbindContent()};f.prototype.GetIfShowVideoContainer=function(){var o=this;return o.mydvs.showVideoContainer};f.prototype.ShowVideoContainer=function(p){var q=this,o;if(q.mydvs.showVideoContainer==p){return true}if(p){q.OldShowThumbnail=q.mydvs.showThumbnail;q.mydvs.showThumbnail=false}else{q.mydvs.showThumbnail=q.OldShowThumbnail}q.mydvs.showVideoContainer=p;return true};f.prototype.UpdateVideoContainer=function(p){var q=this,o;o=q.mydvs.updateVideoContainer(p);if(!o){a.Errors.WebviewerError(q._stwain,q.mydvs.errorMessage,q.mydvs.errorCode)}return o};f.prototype.ThumbnailScrollTo=function(o){var p=this;p.mydvs.thumbnailScrollTo(o)};f.prototype.GetImageData=function(o){var p=this;return p.mydvs.getData(o)};f.prototype.SetSelectedImageBackground=function(o){var p=this;p.mydvs.selectedImageBackground=o};f.prototype.SetLogLevel=function(o){var p=this;p.mydvs.setLogLevel(o)};f.prototype.SetLogFunc=function(o){var p=this;p.mydvs.setLogFunc(o)};f.prototype.RotateByWebViewer=function(q,r){var s=this,o,p=[];p.push(q);o=s.mydvs.rotate(p,r);if(!o){a.Errors.WebviewerError(s._stwain,s.mydvs.errorMessage,s.mydvs.errorCode)}return o};f.prototype.MirrorByWebViewer=function(q){var r=this,o,p=[];p.push(q);o=r.mydvs.mirror(p);if(!o){a.Errors.WebviewerError(r._stwain,r.mydvs.errorMessage,r.mydvs.errorCode)}return o};f.prototype.FlipByWebViewer=function(q){var r=this,o,p=[];p.push(q);o=r.mydvs.flip(p);if(!o){a.Errors.WebviewerError(r._stwain,r.mydvs.errorMessage,r.mydvs.errorCode)}return o};f.prototype.CropByWebViewer=function(r,u,t,s,p){var v=this,o,q=[];q.push(r);o=v.mydvs.crop(r,u,t,(s-u),(p-t));if(!o){a.Errors.WebviewerError(v._stwain,v.mydvs.errorMessage,v.mydvs.errorCode)}return o};f.prototype.DVSRotate=function(p){var q=this,o;o=q.mydvs.rotate(p);if(!o){a.Errors.WebviewerError(q._stwain,q.mydvs.errorMessage,q.mydvs.errorCode)}return o};f.prototype.DVSFlip=function(){var p=this,o;o=p.mydvs.flip();if(!o){a.Errors.WebviewerError(p._stwain,p.mydvs.errorMessage,p.mydvs.errorCode)}return o};f.prototype.DVSMirror=function(){var p=this,o;o=p.mydvs.mirror();if(!o){a.Errors.WebviewerError(p._stwain,p.mydvs.errorMessage,p.mydvs.errorCode)}return o};f.prototype.DVSCrop=function(s,r,q,p){var t=this,o;o=t.mydvs.crop(s,r,(q-s),(p-r));if(!o){a.Errors.WebviewerError(t._stwain,t.mydvs.errorMessage,t.mydvs.errorCode)}return o};f.prototype.DVSErase=function(s,r,q,p){var t=this,o;o=t.mydvs.erase(s,r,(q-s),(p-r),t._UIView.BackgroundColor);if(!o){a.Errors.WebviewerError(t._stwain,t.mydvs.errorMessage,t.mydvs.errorCode)}return o};f.prototype.DVSSaveTransformResult=function(){var p=this,o;o=p.mydvs.saveTransformResult();if(!o){a.Errors.WebviewerError(p._stwain,p.mydvs.errorMessage,p.mydvs.errorCode)}return o};f.prototype.updateButtons=function(){var o=this;if(o._IfChangedWithinTheEditor==true){o.ChangeButtonClass("save","icon-saveImage");o.ChangeButtonClass("restore","icon-restore")}else{o.ChangeButtonClass("save","icon-saveImage-grey");o.ChangeButtonClass("restore","icon-restore-grey")}};f.prototype.updateMode=function(){var q=this,p,o;if(!q.bShowImageEdit){return}o=q.GetHowManyImagesInBuffer();if(o>1){if(q.GetCurrentIndex()==o-1||q.GetHowManyImagesInBuffer()<=1){q.ChangeButtonClass("nextImage","icon-nextImage-grey")}else{q.ChangeButtonClass("nextImage","icon-nextImage")}if(q.GetCurrentIndex()<=0||q.GetHowManyImagesInBuffer()<=1){q.ChangeButtonClass("previousImage","icon-preImage-grey")}else{q.ChangeButtonClass("previousImage","icon-preImage")}}else{q.ChangeButtonClass("nextImage","icon-nextImage-grey");q.ChangeButtonClass("previousImage","icon-preImage-grey")}q.updateButtons();q.__SetCropButtonGrey(true);q.__SetEraseButtonGrey(true);if(q.bMobile){switch(q.cursorStatus){case"rectselect":q.OnSelect();break;case"zoom":q.OnClicktozoomin();break;default:q.OnHand()}}else{switch(q.cursorStatus){case"hand":q.OnHand();break;case"zoom":q.OnClicktozoomin();break;default:q.OnSelect()}}};f.prototype.__SaveImageInner=function(q,t){var u=this,r;if(u.iChangedIndex==-1&&u._IfSaveChangesOutSideOfTheEditor==false){u._IfChangedWithinTheEditor=false;if(t){t()}return false}if(u._IfChangedWithinTheEditor!=true&&u._IfSaveChangesOutSideOfTheEditor==false){alert(l.CustomizableDisplayInfo.errorMessages.imageNotChanged);u._IfChangedWithinTheEditor=false;if(t){t()}return false}if(u._IfSaveChangesOutSideOfTheEditor){u.iChangedIndex=u.GetCurrentIndex()}var o=function(y,x,v){u.updateMode();if(y){if(q==true){a.log("__SaveImageInner: "+[y.guid].join(","));if(u.GetCurrentIndex()==x){if(u._stwain._isMobileMode()){u.MobileUpdateImage(y,v)}else{u.UpdateImage(y,v)}}}u._IfChangedWithinTheEditor=false;u.iChangedIndex=-1;var w=y.serverId;if(w==-1){if(t){t()}return false}}else{u._IfChangedWithinTheEditor=false;u.iChangedIndex=-1}u.updateButtons();if(t){t()}return true};var s=true;if(u._IfChangedWithinTheEditor==true||u._IfSaveChangesOutSideOfTheEditor==true){var p=u.getImageManager().convertClientIndexToServerId(u.iChangedIndex);if(p==-1){if(t){t()}return false}u.OnGetImageFromServerForEdit(u._UIView.mapModelImageControl[p],u.iChangedIndex,2,o);s=false}u._IfSaveChangesOutSideOfTheEditor=false;if(s){u._IfChangedWithinTheEditor=false;if(t){t()}}return true};f.prototype.ShowDialogForSaveImage=function(p,u,t,q){var v=this;var r=['<div class="dynamsoft-dwt-dlg-tips">',"<div>",l.CustomizableDisplayInfo.dialogText.saveChangedImage[0],"</div>",'<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">','<input class="dynamsoft_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="',l.CustomizableDisplayInfo.dialogText.saveChangedImage[1],'" /><input class="dynamsoft_btnCancel" style="width: 100px; height:30px;"  type="button" value="',l.CustomizableDisplayInfo.dialogText.saveChangedImage[2],'" /></div>',"</div>"];if(v.bMobile){Dynamsoft.WebTwainEnv.ShowDialog(300,0,r.join(""),true)}else{Dynamsoft.WebTwainEnv.ShowDialog(420,0,r.join(""),true)}var o=a.one(".dynamsoft_btnSave").getEL();if(o){o.onclick=function(){v.__SaveImageInner(true,function(){var w=v._stwain._containerID;g.DCP_DWT_OnClickCloseInstall(w);a.bChangeImage=1;if(p==-1){v.OnClose()}else{v.__goInner(p)}if(u){document.body.style.overflow=""}if(m.isFunction(t)){t()}})}}var s=a.one(".dynamsoft_btnCancel").getEL();if(s){s.onclick=function(){v.__RestoreImageInner(p,function(){var w=v._stwain._containerID;g.DCP_DWT_OnClickCloseInstall(w);a.bChangeImage=0;if(p==-1){v.OnClose()}else{v.__goInner(p)}if(u){document.body.style.overflow=""}if(m.isFunction(q)){q()}})}}};f.prototype.__SetCropButtonGrey=function(o){var p=this;p.ChangeButtonClass("crop","icon-cropImage-grey");if(o){p.SetSelectedImageArea(0,0,0,0)}};f.prototype.__SetEraseButtonGrey=function(o){var p=this;p.ChangeButtonClass("erase","icon-erase-grey");if(o){p.SetSelectedImageArea(0,0,0,0)}};f.prototype.__SetZoomInButtonEnable=function(o){var p=this;if(o==true){p.ChangeButtonClass("zoomin","icon-zoomin")}else{p.ChangeButtonClass("zoomin","icon-zoomin-grey")}};f.prototype.__SetZoomOutButtonEnable=function(o){var p=this;if(o==true){p.ChangeButtonClass("zoomout","icon-zoomout")}else{p.ChangeButtonClass("zoomout","icon-zoomout-grey")}};f.prototype.pageChange=function(p){var s=this,r,o=s.GetHowManyImagesInBuffer();a.log("OnPagination");if(o<=0){m.output(s,"No image in Buffer");return}else{if(o==1){return}}var q=/^\d+$/;if(!q.test(p)||p<=0){alert(l.CustomizableDisplayInfo.errorMessages.invalidIndex);return}r=parseInt(p)-1;if(r<0){r=0}else{if(r>=o){r=o-1}}if(r!=s.GetCurrentIndex()){s.go(r)}};f.prototype.onFirstImage=function(){var q=this,p,o=q.GetHowManyImagesInBuffer();if(o<=0){m.output(q,"No image in Buffer");return}else{if(o==1){return}}p=0;if(p!=q.GetCurrentIndex()){q.go(p)}};f.prototype.onLastImage=function(){var q=this,p,o=q.GetHowManyImagesInBuffer();if(o<=0){m.output(q,"No image in Buffer");return}else{if(o==1){return}}p=o-1;if(p!=q.GetCurrentIndex()){q.go(p)}};f.prototype.OnPreviousImage=function(){var p=this,o=a.one(".icon-preImage-grey");a.Errors.ClearErrorInfo(p._stwain);if(o&&o.getEL()){return}else{p.previous()}};f.prototype.previous=function(){var q=this,p,o=q.GetHowManyImagesInBuffer();if(o<=0){m.output(q,"No image in Buffer");return}else{if(o==1){return}}p=q.GetCurrentIndex()-1;if(p<0){p=0}if(p!=q.GetCurrentIndex()){q.go(p)}};f.prototype.OnNextImage=function(){var p=this,o=a.one(".icon-nextImage-grey");a.Errors.ClearErrorInfo(p._stwain);if(o&&o.getEL()){return}else{p.next()}};f.prototype.next=function(){var q=this,p,o=q.GetHowManyImagesInBuffer();if(o<=0){m.output(q,"No image in Buffer");return}else{if(o==1){return}}p=q.GetCurrentIndex()+1;if(p>=o){p=o-1}if(p!=q.GetCurrentIndex()){q.go(p)}};f.prototype.go=function(o){var p=this;if(p.GetHowManyImagesInBuffer()<=0){m.output(p,"No image in Buffer");return}if(p._IfChangedWithinTheEditor==true){p.ShowDialogForSaveImage(o,false);return}p.__goInner(o)};f.prototype.__goInner=function(o){var p=this;if(typeof(o)!=="undefined"){if(o==-1){return false}if(p.bShowImageEdit){p.bCouldBeTimeConsuming=true}Dynamsoft.Lib.showMask();p.SetCurrentIndex(o)}if(p.bShowImageEdit){p.updateMode();p.BackImageData()}return true};f.prototype.OnAcquire=function(){var p=this,o=function(){p._stwain.SelectSource(function(){p._stwain.CloseSource();p._stwain.OpenSource();p._stwain.IfShowUI=true;if(Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer==true){Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer=false;p._stwain.AcquireImage({},function(){Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer=true;if(window.onresize==null){window.onresize=function(){p.ShowImageEditorEx(-1,-1,-1,-1)}}},function(){if(window.onresize==null){window.onresize=function(){p.ShowImageEditorEx(-1,-1,-1,-1)}}})}else{p._stwain.AcquireImage()}},function(){a.log("User did not select a source")})};a.Errors.ClearErrorInfo(p._stwain);if(p._IfChangedWithinTheEditor){p.ShowDialogForSaveImage(p.GetCurrentIndex(),false,o,o)}else{o()}};f.prototype.OnLoadImage=function(){var q=this;var p=null,o=function(){if(q._stwain._isMobileMode()){var s=document.getElementById(q.dwtMobileFileId);s.value="";s.click();return}var w=function(){a.log("Loaded an image successfully.");if(p!=null){q._stwain.Addon.PDF.SetConvertMode(p)}};var u=function(y,x){a.log("Loading failed with the error: "+x);if(p!=null){q._stwain.Addon.PDF.SetConvertMode(p)}};q._stwain.IfShowFileDialog=true;if(q._stwain.Addon&&q._stwain.Addon.PDF){var r=false,t,v;if(q._stwain._isMobileMode()){v=a.License.checkProductKey(q._stwain,{PDFRasterizer:true,Wasm:true},true)}else{v=a.License.checkProductKey(q._stwain,{PDFRasterizer:true},true)}if(v){p=q._stwain.Addon.PDF.GetConvertMode();t=q._stwain._innerFun("GetAddOnVersion",Dynamsoft.Lib.html5.Funs.makeParams("pdf"));if(a.env.bMac&&t==Dynamsoft.PdfMacVersion){r=true}else{if(a.env.bLinux&&t==Dynamsoft.PdfLinuxVersion){r=true}else{if(t==Dynamsoft.PdfVersion){r=true}}}if(r){q._stwain.Addon.PDF.SetConvertMode(1)}}}q._stwain.LoadImageEx("",5,w,u)};a.Errors.ClearErrorInfo(q._stwain);if(q._IfChangedWithinTheEditor){q.ShowDialogForSaveImage(q.GetCurrentIndex(),false,o,o)}else{o()}};f.prototype.OnPrint=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetCurrentIndex()<0){m.output(o,"No image in Buffer");return}o._UIView.Print()};f.prototype.OnRemoveAll=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}o._stwain.RemoveAllImages()};f.prototype.OnRemove=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}o._stwain.RemoveAllSelectedImages()};f.prototype.OnRotateLeft=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}if(o._ImgManager.bImageChangedInViewer==true){o._IfSaveChangesOutSideOfTheEditor=true;o.__SaveImageInner(false,function(){o.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();o._ImgManager.bImageJustChangedInEditor=true;if(o.bMobile_function){o.DVSRotate(270);o.UpdateInfo()}else{o._stwain.RotateLeft(o.GetCurrentIndex())}o._IfChangedWithinTheEditor=true;o.iChangedIndex=o.GetCurrentIndex()})}else{o.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();o._IfSaveChangesOutSideOfTheEditor=false;o._ImgManager.bImageJustChangedInEditor=true;o._IfChangedWithinTheEditor=true;o.iChangedIndex=o.GetCurrentIndex();if(o.bMobile_function){o.DVSRotate(270);o.UpdateInfo()}else{o._stwain.RotateLeft(o.GetCurrentIndex())}}o.updateMode()};f.prototype.Rotate=function(o,p){var q=this;if(q.GetHowManyImagesInBuffer()<=0){m.output(q,"No image in Buffer");return}if(typeof o==="undefined"||typeof p==="undefined"){alert(l.CustomizableDisplayInfo.errorMessages.insufficientParas)}else{if(q._ImgManager.bImageChangedInViewer==true){q._IfSaveChangesOutSideOfTheEditor=true;q.__SaveImageInner(false,function(){q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._stwain.Rotate(q.GetCurrentIndex(),o,p);q._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q.GetCurrentIndex()})}else{q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._IfSaveChangesOutSideOfTheEditor=false;q._stwain.Rotate(q.GetCurrentIndex(),o,p);q._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q.GetCurrentIndex()}}q.updateMode()};f.prototype.RotateEx=function(o,q,p){var r=this;if(r.GetHowManyImagesInBuffer()<=0){m.output(r,"No image in Buffer");return}if(typeof o==="undefined"||typeof q==="undefined"||typeof p==="undefined"){alert(l.CustomizableDisplayInfo.errorMessages.insufficientParas)}else{if(r._ImgManager.bImageChangedInViewer==true){r._IfSaveChangesOutSideOfTheEditor=true;r.__SaveImageInner(false,function(){r.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();r._ImgManager.bImageJustChangedInEditor=true;r._stwain.RotateEx(r.GetCurrentIndex(),o,q,p);r._IfChangedWithinTheEditor=true;r.iChangedIndex=r.GetCurrentIndex()})}else{r.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();r._IfSaveChangesOutSideOfTheEditor=false;r._ImgManager.bImageJustChangedInEditor=true;r._IfChangedWithinTheEditor=true;r.iChangedIndex=r.GetCurrentIndex();r._stwain.RotateEx(r.GetCurrentIndex(),o,q,p)}}r.updateMode()};f.prototype.OnRotate=function(w){var t=this;a.Errors.ClearErrorInfo(t._stwain);if(t.GetHowManyImagesInBuffer()<=0){m.output(t,"No image in Buffer");return}a.hide("dynamsoft_ImgSizeEditor");if(!a.get("dynamsoft_RotateAnyAngle")){var A=['<div id="dynamsoft_RotateAnyAngle" class="dynamsoft-dwt-imgSizeEditor" style="display:none; z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_Angle"><b>',l.CustomizableDisplayInfo.dialogText.dlgRotateAnyAngle[0],'</b><input type="text" id="dynamsoft_Angle" style="width:50%;" size="10"/></label></li>','<li><label for="dynamsoft_Angle_InterpolationMethod"><b>',l.CustomizableDisplayInfo.dialogText.dlgRotateAnyAngle[1],'</b>&nbsp;<select size="1" id="dynamsoft_Angle_InterpolationMethod"><option value = ""></option></select></li>','<li><label for="dynamsoft_KeepSize"><b></b>','<input type="checkbox" id="dynamsoft_KeepSize"/>',l.CustomizableDisplayInfo.dialogText.dlgRotateAnyAngle[2],"</label></li></ul>","<div>",'<input id="dynamsoft_btnRotateAnyAngleOK" type="button" value="',l.CustomizableDisplayInfo.dialogText.dlgRotateAnyAngle[3],'"/><span><input id= "dynamsoft_btnCancelRotateAnyAngle" type="button" value="',l.CustomizableDisplayInfo.dialogText.dlgRotateAnyAngle[4],'" /></span></div>',"</div>"];a.one("body").append(A.join(""))}var B=a.get("dynamsoft_Angle_InterpolationMethod");B.options.length=0;B.options.add(new Option("NearestNeighbor",1));B.options.add(new Option("Bilinear",2));B.options.add(new Option("Bicubic",3));B=null;var u=a.get("dynamsoft_btnRotateAnyAngleOK");u.onclick=function(){var E=a.get("dynamsoft_Angle").value;a.get("dynamsoft_Angle").className="";var C=/^\d+$/;if(!C.test(E)||E<=0){a.get("dynamsoft_Angle").className+=" invalid";a.get("dynamsoft_Angle").focus();alert(l.CustomizableDisplayInfo.errorMessages.invalidAngle);return}var D=a.get("dynamsoft_KeepSize");var y=D.checked;t.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();var o=parseInt(E);var x=t.RotateEx(o,y,a.get("dynamsoft_Angle_InterpolationMethod").selectedIndex+1);if(t._stwain.ErrorCode==0){a.hide("dynamsoft_RotateAnyAngle");return}};var s=a.get("dynamsoft_btnCancelRotateAnyAngle");s.onclick=function(){a.hide("dynamsoft_RotateAnyAngle")};var q=a.get("dynamsoft_RotateAnyAngle");a.toggle("dynamsoft_RotateAnyAngle");var r=w.srcElement||w.target;var v=r.y;if(!v){v=r.offsetTop+1}var z=r.x;if(!z){z=r.offsetLeft+1}if(t.UIEditor&&t.UIEditor.nodeName=="DIV"){q.style.top=v+r.offsetHeight+document.documentElement.scrollTop+"px";q.style.left=z+document.documentElement.scrollLeft+"px"}else{var p=k.getElementById(t.UIEditor);q.style.top=v+r.offsetHeight+m.getTop(p)+"px";q.style.left=z+m.getLeft(p)+"px"}a.get("dynamsoft_Angle").value="45"};f.prototype.OnRotateRight=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}if(o._ImgManager.bImageChangedInViewer==true){o._IfSaveChangesOutSideOfTheEditor=true;o.__SaveImageInner(false,function(){o.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(o.bMobile_function){o.DVSRotate(90);o.UpdateInfo()}else{o._stwain.RotateRight(o.GetCurrentIndex())}o._ImgManager.bImageJustChangedInEditor=true;o._IfChangedWithinTheEditor=true;o.iChangedIndex=o.GetCurrentIndex()})}else{o.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();o._IfSaveChangesOutSideOfTheEditor=false;o._ImgManager.bImageJustChangedInEditor=true;o._IfChangedWithinTheEditor=true;o.iChangedIndex=o.GetCurrentIndex();if(o.bMobile_function){o.DVSRotate(90);o.UpdateInfo()}else{o._stwain.RotateRight(o.GetCurrentIndex())}}o.updateMode()};f.prototype.OnDeskew=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}if(o._ImgManager.bImageChangedInViewer==true){o._IfSaveChangesOutSideOfTheEditor=true;o.__SaveImageInner(false,function(){o.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(o._stwain._isMobileMode()){o._stwain.GetSkewAngle(o.GetCurrentIndex(),function(p){o.RotateEx(p,true,1);a.log("Mobile_GetSkewAngle:"+p)})}else{o.RotateEx(o._stwain.GetSkewAngle(o.GetCurrentIndex()),true,1)}o._ImgManager.bImageJustChangedInEditor=true;o._IfChangedWithinTheEditor=true;o.iChangedIndex=o.GetCurrentIndex()})}else{o.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();o._IfSaveChangesOutSideOfTheEditor=false;o._ImgManager.bImageJustChangedInEditor=true;o._IfChangedWithinTheEditor=true;o.iChangedIndex=o.GetCurrentIndex();if(o._stwain._isMobileMode()){o._stwain.GetSkewAngle(o.GetCurrentIndex(),function(p){o.RotateEx(p,true,1);a.log("Mobile_GetSkewAngle:"+p)})}else{o.RotateEx(o._stwain.GetSkewAngle(o.GetCurrentIndex()),true,1)}}};f.prototype.OnCrop=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);var o,p=a.one(".icon-cropImage");if(p&&p.getEL()){q.Crop()}};f.prototype.Crop=function(){var u=this;if(u.GetHowManyImagesInBuffer()<=0){m.output(u,"No image in Buffer");return}var r=u.actualSelectedCanvasAreas;if(r.length!=2){m.output(u,"No area selected for cropping");return}else{var q=r[1];var t=q.left;var s=q.top;var p=q.right;var o=q.bottom;if(parseInt(t)-parseInt(p)!=0&&parseInt(s)-parseInt(o)!=0){if(u._ImgManager.bImageChangedInViewer==true){u._IfSaveChangesOutSideOfTheEditor=true;u.__SaveImageInner(false,function(){u.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(u.bMobile_function){u.DVSCrop(parseInt(t),parseInt(s),parseInt(p),parseInt(o));u.UpdateInfo()}else{u._stwain.Crop(u.GetCurrentIndex(),parseInt(t),parseInt(s),parseInt(p),parseInt(o))}u._ImgManager.bImageJustChangedInEditor=true;u.__SetCropButtonGrey(true);u.__SetEraseButtonGrey(true);u._IfChangedWithinTheEditor=true;u.iChangedIndex=u.GetCurrentIndex()})}else{u.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();u._IfSaveChangesOutSideOfTheEditor=false;u._ImgManager.bImageJustChangedInEditor=true;u._IfChangedWithinTheEditor=true;u.iChangedIndex=u.GetCurrentIndex();if(u.bMobile_function){u.DVSCrop(parseInt(t),parseInt(s),parseInt(p),parseInt(o));u.UpdateInfo()}else{u._stwain.Crop(u.GetCurrentIndex(),parseInt(t),parseInt(s),parseInt(p),parseInt(o))}u.__SetCropButtonGrey(true);u.__SetEraseButtonGrey(true)}u.updateMode()}}};f.prototype.OnErase=function(){var q=this,p,o=a.one(".icon-erase");a.Errors.ClearErrorInfo(q._stwain);if(o&&o.getEL()){q.Erase()}};f.prototype.Erase=function(){var t=this,q=false;if(t.GetHowManyImagesInBuffer()<=0){m.output(t,"No image in Buffer");return}var s=t.actualSelectedCanvasAreas;if(s.length==1){m.output(t,"No area selected for erasing");return}if(t._ImgManager.bImageChangedInViewer==true){t._IfSaveChangesOutSideOfTheEditor=true;t.__SaveImageInner(false,function(){for(var A=1;A<s.length;A++){var z=s[A];var C=z.left;var B=z.top;var y=z.right;var x=z.bottom;if(parseInt(C)-parseInt(y)!=0&&parseInt(B)-parseInt(x)!=0){t.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(t.bMobile_function){t.DVSErase(parseInt(C),parseInt(B),parseInt(y),parseInt(x));t.UpdateInfo()}else{t._stwain.Erase(t.GetCurrentIndex(),parseInt(C),parseInt(B),parseInt(y),parseInt(x))}t._ImgManager.bImageJustChangedInEditor=true;t._IfChangedWithinTheEditor=true;t.iChangedIndex=t.GetCurrentIndex();q=true}}t.__SetEraseButtonGrey(q);t.__SetCropButtonGrey(q)})}else{t._IfSaveChangesOutSideOfTheEditor=false;t._IfChangedWithinTheEditor=true;t.iChangedIndex=t.GetCurrentIndex();for(var r=1;r<s.length;r++){var v=s[r];var p=v.left;var u=v.top;var w=v.right;var o=v.bottom;if(parseInt(p)-parseInt(w)!=0&&parseInt(u)-parseInt(o)!=0){t.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(t.bMobile_function){t.DVSErase(parseInt(p),parseInt(u),parseInt(w),parseInt(o));t.UpdateInfo()}else{t._stwain.Erase(t.GetCurrentIndex(),parseInt(p),parseInt(u),parseInt(w),parseInt(o))}t._ImgManager.bImageJustChangedInEditor=true;t._IfChangedWithinTheEditor=true;t.iChangedIndex=t.GetCurrentIndex();q=true}}t.__SetEraseButtonGrey(q);t.__SetCropButtonGrey(q)}t.updateMode()};f.prototype.ChangeImageSize=function(p,o,q){var r=this;if(r.GetHowManyImagesInBuffer()<=0){m.output(r,"No image in Buffer");return}if(r._ImgManager.bImageChangedInViewer==true){r._IfSaveChangesOutSideOfTheEditor=true;r.__SaveImageInner(false,function(){r.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();r._stwain.ChangeImageSize(r.GetCurrentIndex(),p,o,q);r._ImgManager.bImageJustChangedInEditor=true;r._IfChangedWithinTheEditor=true;r.iChangedIndex=r.GetCurrentIndex()})}else{r.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();r._IfSaveChangesOutSideOfTheEditor=false;r._ImgManager.bImageJustChangedInEditor=true;r._IfChangedWithinTheEditor=true;r.iChangedIndex=r.GetCurrentIndex();r._stwain.ChangeImageSize(r.GetCurrentIndex(),p,o,q)}r.updateMode()};f.prototype.OnChangeImageSize=function(A){var u=this;a.Errors.ClearErrorInfo(u._stwain);if(u.GetHowManyImagesInBuffer()<=0){m.output(u,"No image in Buffer");return}a.hide("dynamsoft_RotateAnyAngle");if(!a.get("dynamsoft_ImgSizeEditor")){var C=['<div id="dynamsoft_ImgSizeEditor" class="dynamsoft-dwt-imgSizeEditor" style="display:none;z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_img_height"><b>',l.CustomizableDisplayInfo.dialogText.dlgChangeImageSize[0],'</b><input type="text" id="dynamsoft_img_height" style="width:50%;" size="10"/>pixel</label></li>','<li><label for="dynamsoft_img_width"><b>',l.CustomizableDisplayInfo.dialogText.dlgChangeImageSize[1],'</b>&nbsp;<input type="text" id="dynamsoft_img_width" style="width:50%;" size="10"/>pixel</label></li>',"<li>",l.CustomizableDisplayInfo.dialogText.dlgChangeImageSize[2],'<select size="1" id="dynamsoft_InterpolationMethod"><option value = ""></option></select></li>',"</ul>","<div>",'<input id="dynamsoft_btnChangeImageSizeOK" type="button" value="',l.CustomizableDisplayInfo.dialogText.dlgChangeImageSize[3],'"/><span><input id= "dynamsoft_btnCancelChange" type="button" value="',l.CustomizableDisplayInfo.dialogText.dlgChangeImageSize[4],'"/></span></div>',"</div>"];a.one("body").append(C.join(""))}var D=a.get("dynamsoft_InterpolationMethod");D.options.length=0;D.options.add(new Option("NearestNeighbor",1));D.options.add(new Option("Bilinear",2));D.options.add(new Option("Bicubic",3));D=null;var q=a.get("dynamsoft_btnChangeImageSizeOK");q.onclick=function(){var F=a.get("dynamsoft_img_width").value,o=a.get("dynamsoft_img_height").value;a.get("dynamsoft_img_width").className="";a.get("dynamsoft_img_height").className="";var y=/^\d+$/;if(!y.test(o)||o<=0){a.get("dynamsoft_img_height").className+=" invalid";a.get("dynamsoft_img_height").focus();alert(l.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth);return}if(!y.test(F)||F<=0){a.get("dynamsoft_img_width").className+=" invalid";a.get("dynamsoft_img_width").focus();alert(l.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth);return}var x=u.ChangeImageSize(F,o,a.get("dynamsoft_InterpolationMethod").selectedIndex+1);if(u._stwain.ErrorCode==0){a.hide("dynamsoft_ImgSizeEditor");return}};var w=a.get("dynamsoft_btnCancelChange");w.onclick=function(){a.hide("dynamsoft_ImgSizeEditor")};var r=a.get("dynamsoft_ImgSizeEditor"),E;a.toggle("dynamsoft_ImgSizeEditor");var s=A.srcElement||A.target;var z=s.y;if(!z){z=s.offsetTop+1}var B=s.x;if(!B){B=s.offsetLeft+1}if(u.UIEditor&&u.UIEditor.nodeName=="DIV"){r.style.top=z+s.offsetHeight+document.documentElement.scrollTop+"px";r.style.left=B+document.documentElement.scrollLeft+"px"}else{var p=k.getElementById(u.UIEditor);r.style.top=z+s.offsetHeight+m.getTop(p)+"px";r.style.left=B+m.getLeft(p)+"px"}var v=u.GetCurrentIndex();var t=u.getImageManager().convertClientIndexToServerId(v);if(t==-1){return false}E=u._UIView.mapModelImageControl[t];if(E){a.get("dynamsoft_img_width").value=u.getImageManager().GetImageWidth(v);a.get("dynamsoft_img_height").value=u.getImageManager().GetImageHeight(v);return true}return false};f.prototype.OnFlip=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}if(o._ImgManager.bImageChangedInViewer==true){o._IfSaveChangesOutSideOfTheEditor=true;o.__SaveImageInner(false,function(){o.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(o.bMobile_function){o.DVSFlip();o.UpdateInfo()}else{o._stwain.Flip(o.GetCurrentIndex())}o._ImgManager.bImageJustChangedInEditor=true;o._IfChangedWithinTheEditor=true;o.iChangedIndex=o.GetCurrentIndex()})}else{o.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();o._IfSaveChangesOutSideOfTheEditor=false;o._ImgManager.bImageJustChangedInEditor=true;o._IfChangedWithinTheEditor=true;o.iChangedIndex=o.GetCurrentIndex();if(o.bMobile_function){o.DVSFlip();o.UpdateInfo()}else{o._stwain.Flip(o.GetCurrentIndex())}}o.updateMode()};f.prototype.OnMirror=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}if(o._ImgManager.bImageChangedInViewer==true){o._IfSaveChangesOutSideOfTheEditor=true;o.__SaveImageInner(false,function(){o.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(o.bMobile_function){o.DVSMirror();o.UpdateInfo()}else{o._stwain.Mirror(o.GetCurrentIndex())}o._ImgManager.bImageJustChangedInEditor=true;o._IfChangedWithinTheEditor=true;o.iChangedIndex=o.GetCurrentIndex()})}else{o.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();o._IfSaveChangesOutSideOfTheEditor=false;o._ImgManager.bImageJustChangedInEditor=true;o._IfChangedWithinTheEditor=true;o.iChangedIndex=o.GetCurrentIndex();if(o.bMobile_function){o.DVSMirror();o.UpdateInfo()}else{o._stwain.Mirror(o.GetCurrentIndex())}}o.updateMode()};f.prototype.OnZoomin=function(){var q=this;var o=a.one(".icon-zoomin-grey");if(o&&o.getEL()){return}a.Errors.ClearErrorInfo(q._stwain);if(q.GetHowManyImagesInBuffer()<=0){m.output(q,"No image in Buffer");return}if(q._UIView){q._UIView.bSingleMode=true;var p=(Math.floor(q.GetZoom()*100*q._UIView.zoomInStep)+1);if(!p||(1<p&&p<2501)){q.ZoomIn();q.__SetZoomInButtonEnable(true)}else{alert(l.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);q.__SetZoomInButtonEnable(false)}q.__SetZoomOutButtonEnable(true)}else{q.__SetZoomInButtonEnable(false);q.__SetZoomOutButtonEnable(true)}q.__SetCropButtonGrey(true);q.__SetEraseButtonGrey(true)};f.prototype.OnOriginalsize=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}if(o._UIView){o._UIView.bSingleMode=true;o.SetFitType(5)}o.__SetZoomInButtonEnable(true);o.__SetZoomOutButtonEnable(true);o.__SetCropButtonGrey(true);o.__SetEraseButtonGrey(true);return};f.prototype.OnZoomout=function(){var q=this;var o=a.one(".icon-zoomout-grey");if(o&&o.getEL()){return}a.Errors.ClearErrorInfo(q._stwain);if(q.GetHowManyImagesInBuffer()<=0){m.output(q,"No image in Buffer");return}if(q._UIView){q._UIView.bSingleMode=true;var p=(Math.floor(q.GetZoom()*100*q._UIView.zoomOutStep)-1);if(!p||(1<p&&p<6501)){q.ZoomOut();q.__SetZoomOutButtonEnable(true)}else{alert(l.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut);q.__SetZoomOutButtonEnable(false)}q.__SetZoomInButtonEnable(true)}else{q.__SetZoomOutButtonEnable(false);q.__SetZoomInButtonEnable(true)}q.__SetCropButtonGrey(true);q.__SetEraseButtonGrey(true)};f.prototype.OnStretch=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}if(o._UIView){o._UIView.bSingleMode=true;o._UIView.SetIfFitWindowAndType(4)}o.__SetZoomInButtonEnable(true);o.__SetZoomOutButtonEnable(true);o.__SetCropButtonGrey(true);o.__SetEraseButtonGrey(true)};f.prototype.OnFitPage=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}if(o._UIView){o._UIView.bSingleMode=true;o._UIView.SetIfFitWindowAndType(0)}o.__SetZoomInButtonEnable(true);o.__SetZoomOutButtonEnable(true);o.__SetCropButtonGrey(true);o.__SetEraseButtonGrey(true)};f.prototype.OnFitWidth=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}if(o._UIView){o._UIView.bSingleMode=true;o._UIView.SetIfFitWindowAndType(2)}o.__SetZoomInButtonEnable(true);o.__SetZoomOutButtonEnable(true);o.__SetCropButtonGrey(true);o.__SetEraseButtonGrey(true)};f.prototype.OnFitHeight=function(){var o=this;a.Errors.ClearErrorInfo(o._stwain);if(o.GetHowManyImagesInBuffer()<=0){m.output(o,"No image in Buffer");return}if(o._UIView){o._UIView.bSingleMode=true;o._UIView.SetIfFitWindowAndType(1)}o.__SetZoomInButtonEnable(true);o.__SetZoomOutButtonEnable(true);o.__SetCropButtonGrey(true);o.__SetEraseButtonGrey(true);return};f.prototype.OnHand=function(){var p=this,o=EnumDWT_MouseShape.Hand;p.SetMouseSelectInner(o)};f.prototype.OnSelect=function(){var p=this,o=EnumDWT_MouseShape.Crosshair;p.SetMouseSelectInner(o)};f.prototype.OnClicktozoomin=function(){var p=this,o=EnumDWT_MouseShape.Zoom;p.SetMouseSelectInner(o)};f.prototype.SetMouseSelectInner=function(o){var p=this;a.Errors.ClearErrorInfo(p._stwain);if(p.GetHowManyImagesInBuffer()<=0){m.output(p,"No image in Buffer");return}if(!p._ImgManager._isNoUI()){p.SetMouseShape(o)}p.__EnableMouseShapButtons(o);if(p.bMobile){switch(o){case EnumDWT_MouseShape.Crosshair:p.cursorStatus="rectselect";break;case EnumDWT_MouseShape.Zoom:p.cursorStatus="zoom";break;default:p.cursorStatus="hand"}}else{switch(o){case EnumDWT_MouseShape.Hand:p.cursorStatus="hand";break;case EnumDWT_MouseShape.Zoom:p.cursorStatus="zoom";break;default:p.cursorStatus="rectselect"}}};f.prototype.OnRestore=function(){var p=this;var o=a.one(".icon-saveImage-grey");if(o&&o.getEL()){return}a.Errors.ClearErrorInfo(p._stwain);if(p.GetHowManyImagesInBuffer()<=0){m.output(p,"No image in Buffer");return}p.__RestoreImageInner(-1)};f.prototype.__RestoreImageInner=function(o,t){var u=this,r;if(u.iChangedIndex==-1){u._IfChangedWithinTheEditor=false;if(t){t()}return}var p=function(y,x,v){a.log("__RestoreImageInner: "+[y.guid].join(","));if(u.GetCurrentIndex()==x){if(u._stwain._isMobileMode()){u.MobileUpdateImage(y,v)}else{u.UpdateImage(y,v)}}u._IfChangedWithinTheEditor=false;u.iChangedIndex=-1;var w=y.serverId;if(w==-1){u.updateButtons();if(t){t()}return false}u.updateButtons();if(o==-1){var w=u.getImageManager().convertClientIndexToServerId(u.GetCurrentIndex());if(w==-1){a.Errors.IndexOutOfRange(u._stwain);if(t){t()}return false}}if(t){t()}};var s=true;if(u._IfChangedWithinTheEditor==true){var q=u.getImageManager().convertClientIndexToServerId(u.iChangedIndex);if(q!=-1){u.OnGetImageFromServerForEdit(u._UIView.mapModelImageControl[q],u.iChangedIndex,1,p)}s=false}if(s){u._IfChangedWithinTheEditor=false;if(t){t()}}};f.prototype.OnGetImageFromServerForEdit=function(q,t,u,p){var s=this,o,w;if(p&&s._UIView.BaseUrl){var r=s.getImageManager().convertClientIndexToServerId(t);if(r==-1){return false}s.SetCurrentIndex(t);if(s._stwain._isMobileMode()){if(u==1){var v=s.mydvs.getMetaDataByIndex(t);if(v){v.imageWidth=s.BackModelImageControl.imageWidth;v.imageHeight=s.BackModelImageControl.imageHeight;v.imageBitDepth=s.BackModelImageControl.imageBitDepth;v.imageXResolution=s.BackModelImageControl.imageXResolution;v.imageYResolution=s.BackModelImageControl.imageYResolution}q.ticks=Date.now();q.imageUrl=s.BackImageBuffer;p(q,t,{metaData:v})}else{if(s.bMobile_function){s.DVSSaveTransformResult()}s.BackImageData();p(null,-1,null)}}else{o=c.getUrlByAct(s._UIView.BaseUrl,r,u);a.ajax({method:"GET",url:o,onSuccess:function(x){q.ticks=Date.now();q.imageUrl=c.getImageUrl(s._UIView.BaseUrl,r,-1,-1,q.ticks);q.minImageUrl=c.getImageUrl(s._UIView.BaseUrl,r,parseInt(q.iImageControlWidth),parseInt(q.iImageControlHeight),q.ticks);var z=s.mydvs.getMetaDataByIndex(t);if(z){var y=s._UIView.GetDataImageControl(r);if(y&&y.imageWidth){z.imageWidth=y.imageWidth}else{z.imageWidth=s._stwain.GetImageWidth(t)}if(y&&y.imageHeight){z.imageHeight=y.imageHeight}else{z.imageHeight=s._stwain.GetImageHeight(t)}}p(q,t,z)},onError:function(){}})}}return true};f.prototype.OnSave=function(){var p=this;var o=a.one(".icon-saveImage-grey");if(o&&o.getEL()){return}a.Errors.ClearErrorInfo(p._stwain);if(p.GetHowManyImagesInBuffer()<=0){m.output(p,"No image in Buffer");return}p.__SaveImageInner(true,function(){var q=p.getImageManager().convertClientIndexToServerId(p.GetCurrentIndex());if(q==-1){a.Errors.IndexOutOfRange(p._stwain);return false}})};f.prototype.OnClose=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._IfChangedWithinTheEditor==true){q.ShowDialogForSaveImage(-1,true);return}if(q.UIEditor&&q.UIEditor.nodeName=="DIV"){if(q.UIEditor.childNodes.length>0){var o=document.getElementById(q.iContainerId);if(o){o.appendChild(q.UIEditor.childNodes[0])}q.UIEditor.parentNode.removeChild(q.UIEditor);q.SetWidthInner(q.WebviewerWidth);q.SetHeightInner(q.WebviewerHeight)}var p=document.getElementById("wrapper");if(p){p.style.display=""}}else{q.UnbindContent()}q.bShowImageEdit=false;q.bShowImageEditForFullScreen=false;q.CloseShowImageEditor();q.mydvs.off("topImageChange");q.ThumbnailScrollTo(q.GetCurrentIndex());q.mydvs.on("topImageChange",function(s,r){q.topImageChange(s,r)});a.hide("dynamsoft_ImgSizeEditor");a.hide("dynamsoft_RotateAnyAngle");window.onresize=null;document.body.style.overflow="";if(a.isFunction(q._stwain.__CloseImageEditorUI)){q._stwain.__CloseImageEditorUI()}};f.prototype.__EnableMouseShapButtons=function(o){var p=this;p.ChangeButtonClass("hand","icon-hand");p.ChangeButtonClass("select","icon-select");p.ChangeButtonClass("clicktozoomin","icon-clicktozoomin");if(o==EnumDWT_MouseShape.Hand){p.ChangeButtonClass("hand","dynamsoft-dwt-EditorButton-selected")}else{if(o==EnumDWT_MouseShape.Crosshair){p.ChangeButtonClass("select","dynamsoft-dwt-EditorButton-selected")}else{if(o==EnumDWT_MouseShape.Zoom){p.ChangeButtonClass("clicktozoomin","dynamsoft-dwt-EditorButton-selected")}}}};f.prototype.topImageChange=function(p,o){var q=this;if(!q.bShowImageEdit){q._UIView.__fireEvent("onTopImageInTheViewChanged",{index:p,bByScrollBar:o})}};f.prototype.click=function(o){var p=this;if(!p.bShowImageEdit){p._UIView.__fireEvent("onMouseClick",{e:o,x:o.x,y:o.y,index:p.GetCurrentIndex()})}else{a.hide("dynamsoft_ImgSizeEditor");a.hide("dynamsoft_RotateAnyAngle")}};f.prototype.imageClick=function(o,p){var q=this;q.UpdateInfo();q._UIView.__fireEvent("onMouseClick",{e:p,x:p.x,y:p.y,index:o})};f.prototype.rightClick=function(o){var p=this;if(!p.bShowImageEdit){p._UIView.__fireEvent("onMouseRightClick",{e:o,x:o.x,y:o.y,index:p.GetCurrentIndex()})}};f.prototype.imageRightClick=function(o,p){var q=this;q._UIView.__fireEvent("onMouseRightClick",{e:p,x:p.x,y:p.y,index:o})};f.prototype.doubleClick=function(o){var p=this;if(!p.bShowImageEdit){p._UIView.__fireEvent("onMouseDoubleClick",{e:o,x:o.x,y:o.y,index:p.GetCurrentIndex()})}};f.prototype.imageDoubleClick=function(o,p){var q=this;q._UIView.__fireEvent("onMouseDoubleClick",{e:p,x:p.x,y:p.y,index:o})};f.prototype.move=function(o){var p=this;if(!p.bShowImageEdit){p._UIView.__fireEvent("onMouseMove",{e:o,x:o.x,y:o.y,index:p.GetCurrentIndex()})}};f.prototype.imageMove=function(o,p){var q=this;q._UIView.__fireEvent("onMouseMove",{e:p,x:p.x,y:p.y,index:o})};f.prototype.imageAreaSelected=function(r){var t=this;var p=1;if(r.areaIndex){p=parseInt(r.areaIndex)+1}if(t.bShowImageEdit){if(p>0&&p<t.actualSelectedCanvasAreas.length){t.actualSelectedCanvasAreas[p]={left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height}}else{if(p==t.actualSelectedCanvasAreas.length){t.actualSelectedCanvasAreas.push({left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}}var s,o,q;if(t.actualSelectedCanvasAreas.length==2&&r.width>0&&r.height>0){t.ChangeButtonClass("crop","icon-cropImage");t.ChangeButtonClass("erase","icon-erase")}else{t.__SetCropButtonGrey(false);t.__SetEraseButtonGrey(false)}}else{t._UIView.__fireEvent("onImageAreaSelected",{index:r.index,left:parseInt(r.x),top:parseInt(r.y),right:parseInt(r.x+r.width),bottom:parseInt(r.y+r.height),areaIndex:p})}};f.prototype.imageAreaUnselected=function(o){var p=this;if(p.bShowImageEdit){p.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}];p.ChangeButtonClass("crop","icon-cropImage-grey");p.ChangeButtonClass("erase","icon-erase-grey")}else{p._UIView.__fireEvent("onImageAreaDeSelected",o)}};f.prototype.dragDone=function(o){var p=this;if(a.isFunction(p._stwain.__OnIndexChangeDragDropDone)){p._stwain.__OnIndexChangeDragDropDone(o)}};f.prototype.RegistLoadCallback=function(o){var p=this;if(!p._bRegistedLoad){p.mydvs.setLoadCallback(o);p._bRegistedLoad=true}return true};f.prototype.onDrop=function(q){var w=this,A,s,u=null;var x=function(B){if(B){a.html5.Funs2.output(null,B+" was loaded successfully!")}if(u!=null){w._stwain.Addon.PDF.SetConvertMode(u)}};var z=function(C,D,B){if(B){a.html5.Funs2.output(null,B+" failed to load. Error code: "+C+"Error String: "+D)}if(u!=null){w._stwain.Addon.PDF.SetConvertMode(u)}};try{var p=q.dataTransfer.files;for(var t=0;t<p.length;t++){A=p[t];switch(A.type){case"image/bmp":s=EnumDWT_ImageType.IT_BMP;break;case"image/jpeg":s=EnumDWT_ImageType.IT_JPG;break;case"image/tiff":s=EnumDWT_ImageType.IT_TIF;break;case"image/png":s=EnumDWT_ImageType.IT_PNG;break;case"application/pdf":s=EnumDWT_ImageType.IT_PDF;break;default:a.html5.Funs2.output(null,A.name+" failed to load because the file type is not supported!");s=-1;a.Errors.UnrecognizedExt(w._stwain);break}if(s!=-1){a.showProgress(w._stwain,"DropLoading",true);w._stwain._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);if(w._stwain.Addon&&w._stwain.Addon.PDF){var v=false,o,y;if(w._stwain._isMobileMode()){y=a.License.checkProductKey(w._stwain,{PDFRasterizer:true,Wasm:true},true)}else{y=a.License.checkProductKey(w._stwain,{PDFRasterizer:true},true)}if(y){if(w._stwain._isMobileMode()){v=true}else{u=w._stwain.Addon.PDF.GetConvertMode();o=w._stwain._innerFun("GetAddOnVersion",Dynamsoft.Lib.html5.Funs.makeParams("pdf"));if(a.env.bMac&&o==Dynamsoft.PdfMacVersion){v=true}else{if(a.env.bLinux&&o==Dynamsoft.PdfLinuxVersion){v=true}else{if(o==Dynamsoft.PdfVersion){v=true}}}}if(v){w._stwain.Addon.PDF.SetConvertMode(1)}}}if(w._stwain._isMobileMode()){w._stwain.LoadImageFromBinary(A,function(){Dynamsoft.Lib.closeProgress()},function(){Dynamsoft.Lib.closeProgress()})}else{w._stwain.__LoadImageFromBytes(A,s,"",true,x,z,0,A.size)}}}}catch(r){a.log(r.stack||r,"error");setTimeout(function(){throw r},0)}};f.prototype.getImageManager=function(){var o=this;return o._ImgManager};a.UI=a.UI||{};a.UI.WebViewer=f});Dynamsoft.Ready(function(b,i){var c=Dynamsoft;if(!b.product.bHTML5Edition){return}var h=b.getNavInfo(),j=b.html5.Funs,g=!1,e=!0,d=function(l){if(!b.dlgProgress){b.initProgress()}var k=b.one(".dynamsoft-btnCancel");if(k&&k.getEL()){var m=function(){var n=b.cancelFrome;b.closeProgress(0);if(n==1||n==2){if(b.bio){b.bio.abort();b.bio=g}}else{if(n==3||n==4){l.SetCancel()}else{if(n==5){if(b.isFunction(l.__OnCancel)){l.__OnCancel()}}}}};b.addEventListener(k[0],"mousedown",m)}};function f(o,q){var l={Stwain:o};if(!o._isNoUI()){var k,m=o._width,p=o._height,n=g,r;k=b.one("#"+o._containerID);if(b.isString(m)&&m.indexOf("%")>=0){m=b.css(k,"width")*parseInt(m)/100;n=e}else{m=parseInt(m)}if(b.isString(p)&&p.indexOf("%")>=0){p=b.css(k,"height")*parseInt(p)/100;n=e}else{p=parseInt(p)}l={Stwain:o,Container:q,Width:m,Height:p}}j.bindUIViewEvents(o,l);if(!o._ImgManager){o._ImgManager=new b.UI.ImageManager(o,l)}else{if(o._ImgManager&&o._ImgManager._UIView&&o._ImgManager._UIView.BackgroundColor){l.BackgroundColor=o._ImgManager._UIView.BackgroundColor}o._ImgManager._Init(o,l)}if(n){j.changeImageUISize(o,o._width,o._height)}}function a(l,m){var k=m||{};l.__OnImageAreaDeSelected=k.onImageAreaDeSelected||"";l.__OnImageAreaSelected=k.onImageAreaSelected||"";l.__OnMouseClick=k.onMouseClick||"";l.__OnMouseDoubleClick=k.onMouseDoubleClick||"";l.__OnMouseMove=k.onMouseMove||"";l.__OnMouseRightClick=k.onMouseRightClick||"";l.__OnTopImageInTheViewChanged=k.onTopImageInTheViewChanged||""}b.mix(j,{changeImageUISize:function(o,n,p){var l,m,t=-1,w=-1,k=n,v=p,s=g,u,q;l=b.one("#"+o._containerID);if(b.isString(n)&&n.indexOf("%")>=0){u=b.css(l,"width");if(u==0){l[0].style.width="100%"}u=b.css(l,"width")*parseInt(n)/100;s=e}else{u=parseInt(n);k=[u+2,"px"].join("")}if(b.isString(p)&&p.indexOf("%")>=0){q=b.css(l,"height");if(q==0){l[0].style.height="100%"}q=b.css(l,"height")*parseInt(p)/100;s=e}else{q=parseInt(p);v=[q+2,"px"].join("")}if(l){m=b.one(".dynamsoft-dwt-container-box",l);if(m&&m.getEL()){m.style("width",k);m.style("height",v)}}if(s){if(!o.__funResize){o.__funResize=function(){var x=j.__innerGetUIViewRealSize(o._containerID,o._width,o._height);if(o._ImgManager){return o._ImgManager.ChangeSize(x.width,x.height)}return e}}b.removeEventListener(window,"resize",o.__funResize);b.addEventListener(window,"resize",o.__funResize)}else{if(o.__funResize){b.removeEventListener(window,"resize",o.__funResize);o.__funResize=g}}var r=j.__innerGetUIViewRealSize(o._containerID,u,q);if(o._ImgManager){return o._ImgManager.ChangeSize(r.width,r.height)}return e},__innerGetUIViewRealSize:function(m,k,o){var l,n=-1,p=-1;l=b.one("#"+m);if(b.isString(k)&&k.indexOf("%")>=0){n=b.css(l,"width")*parseInt(k)/100}if(n<0&&k){n=parseInt(k)}if(b.isString(o)&&o.indexOf("%")>=0){p=b.css(l,"height")*parseInt(o)/100}if(p<0&&o){p=parseInt(o)}return{width:n,height:p}},bindUIViewEvents:function(m,k){var n=m,l;k.onSelected=function(o){if(n._isNoUI()){return}var q=o.length,p;if(q>0){n._ImgManager.SetSelectedImageCount(q);p=o[q-1];l=true;if(l&&b.isFunction(n.__OnRefreshUI)){n.__OnRefreshUI(p)}}};k.onRefreshUI=function(o){if(n._isNoUI()){return}j.__innerRefreshFromUIView(n,o)};k.onResetCurrentIndex=function(p){if(n._isNoUI()){return}var o=n._ImgManager.getCurrentImageIndex();if(p>=0&&p<n._ImgManager.count()&&o!=p){if(b.isFunction(n.__OnIndexChangeDuringDragDrop)){n.__OnIndexChangeDuringDragDrop(o,p)}}};k.onMouseMove=function(q){if(n._isNoUI()){return}var p=q.index;if(q){var o=q.x,r=q.y;n.__MouseX=o;n.__MouseY=r}if(b.isFunction(n.__OnMouseMove)){n.__OnMouseMove(p)}};k.onMouseClick=function(q){if(n._isNoUI()){return}var p=q.index;if(q){var o=q.x,r=q.y;n.__MouseX=o;n.__MouseY=r}if(b.isFunction(n.__OnMouseClick)){n.__OnMouseClick(p)}};k.onMouseDoubleClick=function(p){if(n._isNoUI()){return}var o=p.index;if(b.isFunction(n.__OnMouseDoubleClick)){n.__OnMouseDoubleClick(o)}};k.onMouseRightClick=function(q){if(n._isNoUI()){return}var p=q.index;if(q){var o=q.x,r=q.y;n.__MouseX=o;n.__MouseY=r}if(b.isFunction(n.__OnMouseRightClick)){return n.__OnMouseRightClick(p)}return e};k.onImageAreaSelected=function(o){if(n._isNoUI()){return}if(b.isFunction(n.__OnImageAreaSelected)){n.__OnImageAreaSelected(o.index,o.left,o.top,o.right,o.bottom,o.areaIndex)}};k.onImageAreaDeSelected=function(o){if(n._isNoUI()){return}if(b.isFunction(n.__OnImageAreaDeSelected)){n.__OnImageAreaDeSelected(o)}}},__innerRefreshFromUIView:function(k,l){var m=k;if(b.isFunction(m.__OnRefreshUI)){m.__OnRefreshUI(l)}}});b.html5.ui={init:function(l,m){var k;if(!l._isNoUI()){l._containerID=m.containerID;l._width=m.width;l._height=m.height;d(l);k=b.one("#"+l._containerID)}else{l._containerID=""}l._ifBindViewer=m.ifBindViewer;f(l,k);a(l,l.config);l.__OnMouseClick=m.onMouseClick||"";l.__OnMouseDoubleClick=m.onMouseDoubleClick||"";l.__OnMouseRightClick=m.onMouseRightClick||"";l.__OnMouseMove=m.onMouseMove||"";l.__OnImageAreaSelected=m.onImageAreaSelected||"";l.__OnImageAreaDeSelected=m.onImageAreaDeSelected||"";l.__OnRefreshUI=m.onRefreshUI||"";l.__MouseX=0;l.__MouseY=0;l.__style=new b.html5.STwainStyle(l);l.__fSelectionRectAspectRatio=0},unLoad:function(l){var m=l._containerID;var k=b.get(m);if(k){k.innerHTML=""}},addMethods:function(k){b.mix(k,{OverlayRectangle:function(t,n,q,s,l,o,r){var p=this,m;p._resetErr();if(p._isNoUI()){return p._nouiNotSupport("OverlayRectangle")}if(n>s||q>l||(n==s&&q==l)){b.Errors.Overlay_InvalidLeftOrTopOrRightOrBottom(p);return false}if(b.isNumber(o)){m="#"+o.toString(16)}else{m=o}return p._ImgManager.OverlayRectangle(t,n,q,s,l,m,r)},SetViewMode:function(o,m){var p=this;p._resetErr();if(p._isNoUI()){return p._nouiNotSupport("SetViewMode")}if(b.isString(o)||b.isString(m)||(o<-1&&m<-1)){b.Errors.InvalidValue(p);return g}var n=Math.floor(o),l=Math.floor(m);p._ImgManager.SetViewMode(n,l);return true},Print:function(l){var n=this;n._resetErr();if(n._isNoUI()){return n._nouiNotSupport("Print")}if(!n._isMobileMode()&&l){var m=true;return n._innerSend("PrintEx",j.makeParams(m),true,function(){},function(){})}n._ImgManager.Print();return true},ShowImageEditor:function(n,m,l,o){var p=this;p._resetErr();if(p._isNoUI()){return p._nouiNotSupport("ShowImageEditor")}if(p._isMobileMode()){}else{if(j.isServerInvalid(p)){return g}}if(p._ImgManager.getWebViewer().bShowImageEdit){return p.ShowImageEditorEx(-1,-1,-1,-1,3)}if(n&&m&&l){return p.ShowImageEditorEx(-1,-1,m,l,0,true,n,o)}else{return p.ShowImageEditorEx(-1,-1,-1,-1,0,false)}},ShowImageEditorEx:function(t,r,n,m,o,l,q,s){var p=this;p._resetErr();if(p._isNoUI()){return p._nouiNotSupport("ShowImageEditorEx")}return p._ImgManager.ShowImageEditorEx(t,r,n,m,o,l,q,s)},SetSelectedImageArea:function(o,q,p,n,l){var r=this;r._resetErr();if(r._isNoUI()){return r._nouiNotSupport("SetSelectedImageArea")}var m=parseInt(o);if(isNaN(m)||m<0||m>=r._ImgManager.count()){b.Errors.IndexOutOfRange(r);return false}if(!r._isMobileMode()){if(j.isServerInvalid(r)){return false}}return r._ImgManager.SetSelectedImageArea(m,q,p,n,l)},first:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(m._isNoUI()){return m._nouiNotSupport("first")}if(l>0){m._ImgManager.Go(0);j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e},previous:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(m._isNoUI()){return m._nouiNotSupport("previous")}if(l>0){m._ImgManager.__Previous();j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e},next:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(m._isNoUI()){return m._nouiNotSupport("next")}if(l>0){m._ImgManager.__Next();j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e},last:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(m._isNoUI()){return m._nouiNotSupport("last")}if(l>0){m._ImgManager.Go(l-1);j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e}})}}});Dynamsoft.Ready(function(b,h){var d=Dynamsoft;if(!b.product.bHTML5Edition){return}var j=b.html5.Funs,a=0,g=1,c=1,f=!1,e=!0,i=j.DEF;b.attachPropertyUI=function(k){i(k,"Width",{get:function(){k._resetErr();if(k._isNoUI()){k._nouiNotSupport("Width");return 0}return k._width},set:function(l){var n=false;k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("Width")}if(Dynamsoft.Lib.isString(l)){if(l.length>0){if(l.charAt(l.length-1)==="%"){n=l}}}if(!n&&l){var m=parseInt(l);if(m>0){n=m+"px"}else{b.Errors.MobileServer_InvalidWidth(k)}}if(n){k._width=n;return j.changeImageUISize(k,n,false)}return false}});i(k,"Height",{get:function(){k._resetErr();if(k._isNoUI()){k._nouiNotSupport("Height");return 0}return k._height},set:function(l){var n=false;k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("Height")}if(Dynamsoft.Lib.isString(l)){if(l.length>0){if(l.charAt(l.length-1)==="%"){n=l}}}if(!n&&l){var m=parseInt(l);if(m>0){n=m+"px"}else{b.Errors.MobileServer_InvalidHeight(k)}}if(n){k._height=n;return j.changeImageUISize(k,false,n)}return false}});i(k,"AllowMultiSelect",{get:function(){if(k._isNoUI()){return k._nouiNotSupport("AllowMultiSelect")}return k._ImgManager.GetAllowMultiSelect()},set:function(l){if(k._isNoUI()){return k._nouiNotSupport("AllowMultiSelect")}k._ImgManager.SetAllowMultiSelect(l)}});i(k,"BackgroundColor",{get:function(){if(k._isNoUI()){k._nouiNotSupport("BackgroundColor");return""}return k._ImgManager.GetBackgroundColor()},set:function(l){if(k._isNoUI()){return k._nouiNotSupport("BackgroundColor")}return k._ImgManager.SetBackgroundColor(l)}});i(k,"BackgroundFillColor",{get:function(){k._resetErr();if(k._isNoUI()){k._nouiNotSupport("BackgroundFillColor");return""}if(k._isMobileMode()){var n=k.__BackgroundFillColor;if(b.isUndefined(n)){n=k._ImgManager._UIView.BackgroundColor}if(b.isNumber(n)){return b.getColor(n)}else{var m=parseInt(n.slice(1),16);n=m}return n}var l=k._innerFun("BackgroundFillColor");return b.BGR2RGB(l)},set:function(m){if(k._isNoUI()){return k._nouiNotSupport("BackgroundFillColor")}var n=m*1,l;if(!b.isNumber(n)||isNaN(n)){b.Errors.InvalidValue(k);return f}k._resetErr();if(k._isMobileMode()){k.__BackgroundFillColor=b.getColor(n);return true}l=b.RGB2BGR(n);return k._innerFun("BackgroundFillColor",j.makeParams(l))}});i(k,"FitWindowType",{get:function(){k._resetErr();if(k._isNoUI()){k._nouiNotSupport("FitWindowType");return 0}return k._ImgManager.GetFitWindowType()},set:function(l){if(k._isNoUI()){return k._nouiNotSupport("FitWindowType")}var m=l*1;k._resetErr();return k._ImgManager.SetFitWindowType(m)}});i(k,"IfFitWindow",{get:function(){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("IfFitWindow")}return k._ImgManager.GetIfFitWindow()},set:function(l){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("IfFitWindow")}if(l){return k._ImgManager.SetIfFitWindow(true)}else{return k._ImgManager.SetIfFitWindow(false)}}});i(k,"ImageMargin",{get:function(){k._resetErr();if(k._isNoUI()){k._nouiNotSupport("ImageMargin");return 0}return k._ImgManager.GetImageMargin()},set:function(l){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("ImageMargin")}var m=parseInt(l);if(isNaN(m)){return}return k._ImgManager.SetImageMargin(m)}});i(k,"MouseX",{get:function(){k._resetErr();if(k._isNoUI()){k._nouiNotSupport("MouseX");return 0}return k.__MouseX}});i(k,"MouseY",{get:function(){k._resetErr();if(k._isNoUI()){k._nouiNotSupport("MouseY");return 0}return k.__MouseY}});i(k,"SelectionImageBorderColor",{get:function(){k._resetErr();if(k._isNoUI()){k._nouiNotSupport("SelectionImageBorderColor");return""}return k._ImgManager.GetSelectionImageBorderColor()},set:function(l){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("SelectionImageBorderColor")}return k._ImgManager.SetSelectionImageBorderColor(l)}});i(k,"Zoom",{get:function(){k._resetErr();if(k._isNoUI()){k._nouiNotSupport("Zoom");return 0}return k._ImgManager.GetZoom()},set:function(l){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("Zoom")}return k._ImgManager.SetZoom(l)}});i(k,"MouseShape",{get:function(){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("MouseShape")}var l=k._ImgManager.GetMouseShape();return(l==EnumDWT_MouseShape.Hand)},set:function(l){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("MouseShape")}var m=EnumDWT_MouseShape.Crosshair;if(l){m=EnumDWT_MouseShape.Hand}return k._ImgManager.SetMouseShape(m)}});i(k,"SelectionRectAspectRatio",{get:function(){k._resetErr();if(k._isNoUI()){k._nouiNotSupport("SelectionRectAspectRatio");return 0}return k._ImgManager.GetSelectionRectAspectRatio()},set:function(l){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("SelectionRectAspectRatio")}var m=parseFloat(l);if(m>=0){k._ImgManager.SetSelectionRectAspectRatio(m);return true}return false}});i(k,"ShowPageNumber",{get:function(){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("ShowPageNumber")}return k._ImgManager.GetShowPageNumber()},set:function(l){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("ShowPageNumber")}return k._ImgManager.SetShowPageNumber(l)}});i(k,"IfAutoScroll",{get:function(){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("IfAutoScroll")}return k._ImgManager.GetIfAutoScroll()},set:function(l){k._resetErr();if(k._isNoUI()){return k._nouiNotSupport("IfAutoScroll")}return k._ImgManager.SetIfAutoScroll(l)}})};b.detect.viewerScriptLoaded=e});


/**
 * Dynamsoft JavaScript Library
 * Product: Dynamsoft Web Twain
 * Web Site: http://www.dynamsoft.com
 * Copyright 2020, Dynamsoft Corporation
 * Author: Dynamsoft Support Team
 * Module: image io js
 * Version: 1.6.1
 * @2020/8/6 1595236944587
 */
// Use a local variable instead of the global Dynamsoft
// var Dynamsoft_X="undefined"!=typeof Dynamsoft?Dynamsoft:("undefined"!=typeof Dynamsoft?window.Dynamsoft:void 0)||{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""};
function getScriptImageIO(){
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.polyfill=function(a,b,c,e){if(b){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in c||(c[d]={});c=c[d]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof d?a:new d(function(b,d){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})}this.batch_.push(a)};var e=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){e(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var d=a[b];a[b]=null;try{d()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var d=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(h){b.reject(h)}};d.prototype.createResolveAndReject_=function(){function a(a){return function(c){d||(d=!0,a.call(b,c))}}var b=this,d=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};d.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof d)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};d.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(h){this.reject_(h);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};d.prototype.reject_=function(a){this.settle_(2,a)};d.prototype.fulfill_=function(a){this.settle_(1,a)};d.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var f=new b;d.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};d.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(l){d.reject(l)}};d.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{f(a(b))}catch(q){e(q)}}:b}var f,e,k=new d(function(a,b){f=a;e=b});this.callWhenSettled_(c(a,f),c(b,e));return k};
d.prototype.catch=function(a){return this.then(void 0,a)};d.prototype.callWhenSettled_=function(a,b){function d(){switch(c.state_){case 1:a(c.result_);break;case 2:b(c.result_);break;default:throw Error("Unexpected state: "+c.state_);}}var c=this;null==this.onSettledCallbacks_?f.asyncExecute(d):this.onSettledCallbacks_.push(d)};d.resolve=c;d.reject=function(a){return new d(function(b,d){d(a)})};d.race=function(a){return new d(function(b,d){for(var f=$jscomp.makeIterator(a),e=f.next();!e.done;e=f.next())c(e.value).callWhenSettled_(b,
d)})};d.all=function(a){var b=$jscomp.makeIterator(a),f=b.next();return f.done?c([]):new d(function(a,d){function e(b){return function(d){k[b]=d;g--;0==g&&a(k)}}var k=[],g=0;do k.push(void 0),g++,c(f.value).callWhenSettled_(e(k.length-1),d),f=b.next();while(!f.done)})};return d},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var e=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var d=e.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,d);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function c(b){return a.throw(b)}return new Promise(function(e,d){function f(a){a.done?e(a.value):Promise.resolve(a.value).then(b,c).then(f,d)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,e={next:function(){if(c<a.length){var d=c++;return{value:b(d,a[d]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var d=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var k=0;k<f&&c<d;)if(b[c++]!=a[k++])return!1;return k>=f}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var d=a.length;0<d&&0<c;)if(b[--c]!=a[--d])return!1;return 0>=d}},"es6","es3");var Dynamsoft_X="undefined"!=typeof Dynamsoft?Dynamsoft:("undefined"!=typeof Dynamsoft?window.Dynamsoft:void 0)||{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""};
Dynamsoft_X.conststring={logInfo:"logInfo",logDebug:"logDebug",logAll:"logAll",initPending:"pending",initReady:"ready",initFailed:"failed",imgIO:"imgIO",core:"imgCore",imgProc:"imgProc",pdfR:"pdfReader",pdfW:"pdfWriter",binaryBlobType:"application/octet-stream",wasmExtension:".wasm"};
Dynamsoft_X.WasmEnv={moduleNames:[Dynamsoft_X.conststring.imgIO,Dynamsoft_X.conststring.core,Dynamsoft_X.conststring.imgProc,Dynamsoft_X.conststring.pdfR,Dynamsoft_X.conststring.pdfW],imgIO:{name:Dynamsoft_X.conststring.imgIO,ver:"1.6.1",status:"",prefixName:"dynamsoft.imageio-",wasmModule:null},imgCore:{name:Dynamsoft_X.conststring.core,autoLoad:!0,ver:"1.6.1",status:"",prefixName:"dynamsoft.imagecore-",wasmModule:null},imgProc:{name:Dynamsoft_X.conststring.imgProc,autoLoad:!0,ver:"1.6.1",status:"",prefixName:"dynamsoft.imageProc-",
wasmModule:null},pdfReader:{name:Dynamsoft_X.conststring.pdfR,autoLoad:!0,ver:"1.6.1",status:"",prefixName:"dynamsoft.pdfReader-",wasmModule:null},pdfWriter:{name:Dynamsoft_X.conststring.pdfW,autoLoad:!0,ver:"1.6.1",status:"",prefixName:"dynamsoft.pdfWriter-",wasmModule:null}};Dynamsoft_X.Enum_ImageType={IT_DIB:-1,IT_RGBA:-2,IT_BMP:0,IT_JPG:1,IT_PNG:3,IT_ALL:5};Dynamsoft_X.Enum_ReturnType={RT_AUTO:-1,RT_BINARY:1,RT_BASE64:2};
Dynamsoft_X.Enum_ErrorMessage={PARAMETER_TYPE_ERROR:"Parameter Type not Supported: ",TIMEOUT:"Timeout no Response: ",FILE_STREAM_ERROR:"File Stream Error: "};var Dynmasoft=Dynamsoft_X||{};Dynamsoft_X.Lib=Dynamsoft_X.Lib||{};Dynamsoft_X.Lib.env=Dynamsoft_X.Lib.env||{};Dynamsoft_X.b64ToUint6=function(a){return 64<a&&91>a?a-65:96<a&&123>a?a-71:47<a&&58>a?a+4:43===a?62:47===a?63:0};
Dynamsoft_X.base64DecToArr=function(a,b){a=a.replace(/[^A-Za-z0-9\+\/]/g,"");var c=a.length;b=b?Math.ceil((3*c+1>>>2)/b)*b:3*c+1>>>2;for(var e=new Uint8Array(b),d,f=0,k=0,g=0;g<c;g++)if(d=g&3,f|=Dynamsoft_X.b64ToUint6(a.charCodeAt(g))<<18-6*d,3===d||1===c-g){for(d=0;3>d&&k<b;d++,k++)e[k]=f>>>(16>>>d&24)&255;f=0}return e};
Dynamsoft_X.isWasmSupport=function(){try{if("object"===typeof WebAssembly&&"function"===typeof WebAssembly.instantiate){var a=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(a instanceof WebAssembly.Module)return new WebAssembly.Instance(a)instanceof WebAssembly.Instance}}catch(b){}return!1};Dynamsoft_X.random=function(){return(Date.now()%10086).toString(36).slice(2)+Math.random().toString(36).slice(2)};
Dynamsoft_X.readFile=function(a){return new Promise(function(b,c){var e=Object.prototype.toString.call(a);if("[object String]"===e)0===a.indexOf("blob:")||0<a.indexOf(".jpg")||0<a.indexOf(".jpeg")||0<a.indexOf(".png")||0<a.indexOf(".bmp")||0<a.indexOf(".dib")||0<a.indexOf(".pdf")||0<a.indexOf(".tiff")||0<a.indexOf(".tif")?fetch(a,{mode:"cors"}).then(function(a){return a.arrayBuffer()}).then(function(a){return b(a)}).catch(function(a){return Promise.reject(a)}):c("Error url: Can not read the file URL");
else if("[object Blob]"===e){var d=new FileReader;d.readAsArrayBuffer(a);d.onload=function(){var a=d.result;d=null;b(a)}}else"[object FileList]"===e||"[object File]"===e?(c=a[0]?a[0]:a,d=new FileReader,d.readAsArrayBuffer(c),d.onload=function(){var a=d.result;d=null;b(a)}):"[object ArrayBuffer]"===e||"[object Uint8ClampedArray]"===e?b(a):c("Not support source type: "+e)})};
Dynamsoft_X.base64Decode=function(a){function b(a){var b=[],c=a.length,e;for(e=0;e<c;e++){var g=a.charCodeAt(e);if(0==(g>>7&255))b.push(a.charAt(e));else if(6==(g>>5&255)){var h=a.charCodeAt(++e);g=(g&31)<<6;h&=63;g|=h;b.push(String.fromCharCode(g))}else if(14==(g>>4&255)){h=a.charCodeAt(++e);var l=a.charCodeAt(++e);g=g<<4|h>>2&15;h=(h&3)<<6|l&63;g=(g&255)<<8|h;b.push(String.fromCharCode(g))}}return b.join("")}var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,
-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];return function(a){for(var d=[],f=0,e=a.length,g,h;f<e;){do g=c[a.charCodeAt(f++)&255];while(f<e&&-1==g);if(-1==g)break;do h=c[a.charCodeAt(f++)&255];while(f<e&&-1==h);if(-1==h)break;d.push(String.fromCharCode(g<<
2|(h&48)>>4));do{g=a.charCodeAt(f++)&255;if(61==g)return b(d.join(""));g=c[g]}while(f<e&&-1==g);if(-1==g)break;d.push(String.fromCharCode((h&15)<<4|(g&60)>>2));do{h=a.charCodeAt(f++)&255;if(61==h)return b(d.join(""));h=c[h]}while(f<e&&-1==h);if(-1==h)break;d.push(String.fromCharCode((g&3)<<6|h))}return b(d.join(""))}(a)};Dynamsoft_X.error=Dynamsoft_X.error||{};Dynamsoft_X.error.code=Dynamsoft_X.error.code||{};Dynamsoft_X.error.code.wasmJsBase=-4100;
Dynamsoft_X.error.code.wasmJsObjectNotInit=Dynamsoft_X.error.code.wasmJsBase-1;Dynamsoft_X.error.code.wasmJsObjectTerminated=Dynamsoft_X.error.code.wasmJsBase-1;Dynamsoft_X.error.code.wasmJsObjectInitFailed=Dynamsoft_X.error.code.wasmJsBase-1;Dynamsoft_X.error.code.wasmJsNotLoaded=Dynamsoft_X.error.code.wasmJsBase-1;Dynamsoft_X.error.code.wasmJsInvalidJson=Dynamsoft_X.error.code.wasmJsBase-1;Dynamsoft_X.error.code.wasmJsWorkerRunException=Dynamsoft_X.error.code.wasmJsBase-1;
Dynamsoft_X.error.code.wasmJsWorkerRunFailed=Dynamsoft_X.error.code.wasmJsBase-1;Dynamsoft_X.error.code.wasmJsReadFileFailed=Dynamsoft_X.error.code.wasmJsBase-1;Dynamsoft_X.error.code.wasmJsCoreTaskException=Dynamsoft_X.error.code.wasmJsBase-1;Dynamsoft_X.error.code.wasmJsProcTaskException=Dynamsoft_X.error.code.wasmJsBase-1;Dynamsoft_X.error.code.wasmJsSavePdfFailed=Dynamsoft_X.error.code.wasmJsBase-1;Dynamsoft_X.error.code.wasmJsSaveTiffFailed=Dynamsoft_X.error.code.wasmJsBase-1;Dynamsoft_X.WasmEnv=Dynamsoft_X.WasmEnv||{};
Dynamsoft_X.WasmEnv.lastInstanceId=0;Dynamsoft_X.WasmEnv.worker={maxWorkers:1,liveTime:60};Dynamsoft_X.WasmEnv.resourceDir=Dynamsoft_X.WebTwainEnv.ResourcesPath+"/src/";Dynamsoft_X.WasmEnv.wasmJS="dynamsoft.imageio_wasm-1.6.1.js";Dynamsoft_X.WasmEnv.logLevel=Dynamsoft_X.WebTwainEnv.Debug?Dynamsoft_X.conststring.logDebug:0;Dynamsoft_X.WasmEnv.logFunc=null;Dynamsoft_X.WasmEnv.productKey="";Dynamsoft_X.WasmEnv.log=function(a,b){var c=Dynamsoft_X.WasmEnv;c.logLevel===b&&("function"===typeof c.logFunc?c.logFunc(a):console.log(a))};
Dynamsoft_X.WasmEnv.clear=function(){for(var a=$jscomp.makeIterator(Dynamsoft_X.WasmEnv.moduleNames),b=a.next();!b.done;b=a.next())Dynamsoft_X.WasmEnv[b.value].status=""};Dynamsoft_X.WasmEnv.setLoglevel=function(a,b){Dynamsoft_X.WasmEnv.logLevel=1===a?Dynamsoft_X.conststring.logDebug:0;Dynamsoft_X.WasmEnv.logFunc=b};
Dynamsoft_X.WorkerHandler=function(a,b){function c(a){e.terminated=!0;e.terminating&&e.terminationHandler&&e.terminationHandler(e);e.terminating=!1;e.cancelAllTasks()}var e=this;this.options=b||{};this.script=a;this.worker=function(a){if("function"!==typeof Worker&&("object"!==typeof Worker||"function"!==typeof Worker.prototype.constructor))throw Error("Web Workers not supported");a=new Worker(a);a.on=function(a,b){this.addEventListener(a,function(a){b(a.data)})};a.send=function(a){this.postMessage(a)};
return a}(this.script);this.requestQueue=[];e.tasks=Object.create(null);this.objectToError=function(a){for(var b=Error(""),d=Object.keys(a),c=0;c<d.length;c++)b[d[c]]=a[d[c]];return b};this.dispatchQueuedRequests=function(){e.requestQueue.forEach(e.worker.send.bind(e.worker));e.requestQueue=[]};this.dispatchRequest=function(a){a.forEach(e.worker.send.bind(e.worker))};this.worker.on("message",function(a){"function"===typeof e.options.log&&e.options.log(a.log?a.log:a,e.context);if("string"===typeof a&&
"ready"===a)e.worker.ready=!0,e.dispatchQueuedRequests();else if(!a.log){if("object"===typeof a){var b=a.result;"object"===typeof b?(void 0!=b.errorCode&&(b.code=b.errorCode,delete b.errorCode),void 0!=b.errorMessage&&(b.message=b.errorMessage,delete b.errorMessage)):"string"===typeof b&&(b=b.replace('"errorCode"','"code"'),b=b.replace("'errorCode'","'code'"),b=b.replace('"errorMessage"','"message"'),b=b.replace("'errorMessage'","'message'"),a.result=b)}b=a.id;var c=e.tasks[b];void 0!==c?(delete e.tasks[b],
!0===e.terminating&&e.terminate(),"loadWasm"===a.func&&void 0!=a.result&&(e.worker.wasmReady=!0,e.dispatchQueuedRequests()),a.error?c.resolver.reject(e.objectToError(a.error)):a.result&&c.resolver.resolve(a.result)):"loadWasm"===a.func&&void 0!=a.result&&Dynamsoft_X.WasmEnv._handleWasmLoad(a.result,e)}});this.worker.on("error",c);this.worker.on("exit",function(a,b){a="Worker terminated Unexpectedly\n exitCode: `"+(a+"`\n signalCode: `")+(b+"`\n script: `")+(e.script+"`\n");c(Error(a))});this.terminated=
this.terminating=!1;this.terminationHandler=null;this.lastTaskId=0};Dynamsoft_X.WorkerHandler.prototype.exec=function(a,b,c){c||(c={},c.promise=new Promise(function(a,b){c.resolve=a;c.reject=b}));var e=++this.lastTaskId;this.tasks[e]={id:e,resolver:c};b={id:e,func:a,params:b};this.terminated?c.reject(Error("Worker is terminated")):this.terminating?c.reject(Error("Worker is terminating")):this.worker.wasmReady||this.worker.ready&&"loadWasm"===a?this.worker.send(b):this.requestQueue.push(b);return c.promise};
Dynamsoft_X.WorkerHandler.prototype.busy=function(){return 0<this.howManyTasks()};Dynamsoft_X.WorkerHandler.prototype.howManyTasks=function(){return Object.keys(this.tasks).length};Dynamsoft_X.WorkerHandler.prototype.cancelAllTasks=function(a){for(var b in this.tasks)void 0!==this.tasks[b]&&this.tasks[b].resolver.reject(Error(a));this.tasks=Object.create(null)};
Dynamsoft_X.WorkerHandler.prototype.terminate=function(a,b){a&&this.cancelAllTasks("Worker terminated");"function"===typeof b&&(this.terminationHandler=b);if(this.busy())this.terminating=!0;else{if(this.worker){if("function"===typeof this.worker.terminate)this.worker.terminate();else throw Error("Failed to terminate worker");this.worker=null}this.terminating=!1;this.terminated=!0;this.terminationHandler&&this.terminationHandler(this)}};
Dynamsoft_X.WorkerHandler.prototype.setLogCallback=function(a,b){this.options.log=a;this.context=b};
Dynamsoft_X.WorkerPool=function(a,b){var c=this;this.workers=[];this.options=a;this.maxWorkers=1;this.script=this.options.resourceDir+this.options.wasmJS;this.ready=!1;this.pdfReaderInstance=null;this.terminated=!1;this.wasmLoaderPromise=Object.create(null);this._getMaxWorkers=function(){var a=2;"hardwareConcurrency"in self.navigator&&(a=self.navigator.hardwareConcurrency);return Math.max(Math.min(c.options.worker.maxWorkers,Math.max(c.options.worker.maxWorkers,a/2)),1)};this._logAll=function(a){Dynamsoft_X.WasmEnv.log(a,
Dynamsoft_X.conststring.logAll)};this._log=function(a,b){Dynamsoft_X.WasmEnv.log(a,Dynamsoft_X.conststring.logDebug)};this._createWorker=function(){c.ready&&(c.maxWorkers=c._getMaxWorkers());var a=c.workers,worker;return a.length<c.maxWorkers?(worker=new Dynamsoft_X.WorkerHandler(c.script),a.push(worker),worker.id=a.length,worker.module={},worker.module.modulesInfo=[],worker.instances=Object.create(null),worker.setLogCallback(this._log,c),c._logAll(a),c.log("get new worker "+worker.id+" succeed!"),worker):null};
this._getContainedModuleWorkers=function(a){c._removeTerminatedWorker();var b=c.workers;c._logAll(b);for(var f=[],e=0;e<b.length;e++){var g=b[e];!g.module.modulesInfo[a.name]||g.busy()&&b.length<c.maxWorkers||f.push(g)}c._logAll("get workers for module "+a.name);c._logAll(f);return f};this._getIdleWorker=function(){c._removeTerminatedWorker();for(var a=c.workers,b=0;b<a.length;b++){var f=a[b];if(!1===f.busy())return f}return c._createWorker()};this._busy=function(){c._removeTerminatedWorker();for(var a=
c.workers,b=0;b<a.length;b++)if(a[b].busy())return!0;return!1};this._removeTerminatedWorker=function(){c.workers=c.workers.filter(function(a){return!a.terminated})};this._getWorkerByIntanceId=function(a,b){c._logAll("_getWorkerByIntanceId");c._logAll(a);for(var d=9007199254740991,e=null,g=0;g<a.length;g++){var h=a[g];if(void 0!=h.instances[b]){e=h;break}else{var l=h.howManyTasks();l<d&&(e=h,d=l)}}if(e)return e.instances[b]="",c._logAll(a),c.log("get worker "+b+" in "+e.id+" succeed!"),e;c._logAll("_getWorkerByIntanceId: no suitable worker");
return null};this._initWorkerInner=function(a,b,f){try{b.params&&(b.params.resourceDir=this.resourceDir);for(var d=$jscomp.makeIterator(b.params.module.modulesInfo),e=d.next();!e.done;e=d.next()){var moduleInfo=e.value;Dynamsoft_X.WasmEnv[moduleInfo.name].status=Dynamsoft_X.conststring.initPending;}a.exec(b.func,b.params).then(function(b){void 0===b.code||b.modules?Dynamsoft_X.WasmEnv._handleWasmLoad(b,a):c.log(b);f()}).catch(function(a){c.log(a);f()})}catch(h){c.log(h),f()}};this._removeInstanceInWorker=function(a,
b){var d=c.workers;c._logAll("removeInstanceInWorker");c._logAll(d);for(var e=0;e<d.length;e++){var g=d[e];if(g===a){void 0!=g.instances[b]?(delete g.instances[b],c._logAll(d),c.log("removeInstanceInWorker "+b+" in "+g.id+" succeed!")):c.log("not found instance "+b);break}}};this._getWorker=function(a,b){if(Dynamsoft_X.WasmEnv[a.name].status==Dynamsoft_X.conststring.initPending)return null;var d=c._getContainedModuleWorkers(a);if(0!=d.length)return c._getWorkerByIntanceId(d,b);if(b=c._getIdleWorker()){if(b.module.modulesInfo[a.name])return b;
a={id:0,func:"loadWasm",params:{priority:0,key:c.options.productKey,module:{modulesInfo:[]}}};d=$jscomp.makeIterator(Dynamsoft_X.WasmEnv.moduleNames);for(var e=d.next();!e.done;e=d.next()){var name=e.value;a.params.module.modulesInfo.push({name:name,ver:Dynamsoft_X.WasmEnv[name].ver,wasmModule:Dynamsoft_X.WasmEnv[name].wasmModule});}c._initWorkerInner(b,a,function(){})}return null};this._init=function(a){var b=c._createWorker();b&&(b.setLogCallback(function(a,b){b.log(a)},c),a.params.callback=null,c._initWorkerInner(b,
a,function(a){c.maxWorkers=c._getMaxWorkers();c.ready=!0}))};this._initAsync=function(a){var b=this,c,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return e=c=b,d.yield(fetch(c.script).then(function(a){return a.blob()}).then(function(a){return URL.createObjectURL(a)}),2);e.script=d.yieldResult;c._init(a);d.jumpToEnd()})};this._getPath=function(){this.script.startsWith("http://")||this.script.startsWith("https://")?this.resourceDir=this.options.resourceDir:this.options.resourceDir.startsWith("/")?
null!=location.origin&&(this.resourceDir=location.origin+"/"+this.options.resourceDir):null!=location.href&&(this.resourceDir=location.href.substring(0,location.href.lastIndexOf("/")+1)+this.options.resourceDir);this.resourceDir.endsWith("/")||(this.resourceDir+="/")};this._getPath();if(b&&0<b.params.module.modulesInfo.length){a=!1;if(this.script.startsWith("http://")||this.script.startsWith("https://"))this.script.startsWith(location.origin)||(a=!0);a?this._initAsync(b):this._init(b)}else c.maxWorkers=
c._getMaxWorkers(),c.ready=!0};Dynamsoft_X.WorkerPool.prototype.getWorker=function(a,b){if(!this.ready)return null;var c=a.name===Dynamsoft_X.WasmEnv.pdfReader.name;if(c&&this.pdfReaderInstance)return null;if((a=this._getWorker(a,b))&&c){if(this.pdfReaderInstance)return this._removeInstanceInWorker(a,b),null;this.pdfReaderInstance=b}return a};
Dynamsoft_X.WorkerPool.prototype.removeInstanceInWorker=function(a,b,c){this._removeInstanceInWorker(b,c);a.name===Dynamsoft_X.WasmEnv.pdfReader.name&&this.pdfReaderInstance&&(this.pdfReaderInstance=null)};Dynamsoft_X.WorkerPool.prototype.log=function(a){Dynamsoft_X.WasmEnv.log(a,Dynamsoft_X.conststring.logDebug)};
Dynamsoft_X.WorkerPool.prototype.terminate=function(a){var b=this;b.terminated=!0;var c=function(a){a=b.workers.indexOf(a);-1!==a&&b.workers.splice(a,1)}.bind(b),e=[];b.workers.slice().forEach(function(b){var d={};d.promise=new Promise(function(a,b){d.resolve=a;d.reject=b});e.push(d.promise);b.terminate(a,function(a){d.resolve(a)});c()});return Promise.all(e)};
Dynamsoft_X.WasmEnv.load=function(a){Dynamsoft_X.WasmEnv.productKey=void 0!=a?a:Dynamsoft_X.WasmEnv.productKey;Dynamsoft_X.WasmEnv.licensePromise={};Dynamsoft_X.WasmEnv.licensePromise.promise=new Promise(function(a,b){Dynamsoft_X.WasmEnv.licensePromise.resolve=a;Dynamsoft_X.WasmEnv.licensePromise.reject=b});var b=Dynamsoft_X.WasmEnv;b.clear();a={id:0,func:"loadWasm",params:{priority:0,key:a,module:{modulesInfo:[]},callback:function(a){b.logLevel===Dynamsoft_X.conststring.logDebug&&("function"===typeof b.logFunc?b.logFunc(a):
console.log(a))}}};a.params.module.modulesInfo.push({name:b.imgIO.name,ver:b.imgIO.ver,wasmModule:b.imgIO.wasmModule});(b.imgCore.autoLoad||b.imgCore.wasmModule)&&a.params.module.modulesInfo.push({name:b.imgCore.name,ver:b.imgCore.ver,wasmModule:b.imgCore.wasmModule});(b.imgProc.autoLoad||b.imgProc.wasmModule)&&a.params.module.modulesInfo.push({name:b.imgProc.name,ver:b.imgProc.ver,wasmModule:b.imgProc.wasmModule});(b.pdfReader.autoLoad||b.pdfReader.wasmModule)&&a.params.module.modulesInfo.push({name:b.pdfReader.name,
ver:b.pdfReader.ver,wasmModule:b.pdfReader.wasmModule});(b.pdfWriter.autoLoad||b.pdfWriter.wasmModule)&&a.params.module.modulesInfo.push({name:b.pdfWriter.name,ver:b.pdfWriter.ver,wasmModule:b.pdfWriter.wasmModule});Dynamsoft_X.WorkerPool.Instance=null;Dynamsoft_X.WasmEnv.loaded=!0;Dynamsoft_X.WorkerPool.Instance=new Dynamsoft_X.WorkerPool(b,a)};Dynamsoft_X.WasmEnv.unload=function(){var a=Dynamsoft_X.WorkerPool.Instance;return void 0!=a?(Dynamsoft_X.WasmEnv.loaded=!1,a.terminate(!0)):Promise.resolve()};
Dynamsoft_X.WasmEnv.getWorkerPool=function(){var a=Dynamsoft_X.WorkerPool.Instance;return a&&a.terminated?null:a};Dynamsoft_X.WasmEnv.busy=function(){var a=Dynamsoft_X.WorkerPool.Instance;return a?a._busy():!1};
Dynamsoft_X.WasmEnv._handleWasmLoad=function(a,b){Dynamsoft_X.WasmEnv.log("handleWasmLoad:",Dynamsoft_X.conststring.logDebug);Dynamsoft_X.WasmEnv.log(a,Dynamsoft_X.conststring.logDebug);if("object"==typeof a&&void 0!=a.modules){for(var c=$jscomp.makeIterator(a.modules),e=c.next();!e.done;e=c.next()){var res=e.value;a.code?(Dynamsoft_X.WasmEnv[res.name].error=a.message,b.module.modulesInfo[res.name]=!1):(delete Dynamsoft_X.WasmEnv[res.name].error,Dynamsoft_X.WasmEnv[res.name].status=Dynamsoft_X.conststring.initReady,Dynamsoft_X.WasmEnv[res.name].wasmModule=
res.wasmModule,b.module.modulesInfo[res.name]=!0);}a.licenseInfo&&(a=a.licenseInfo,"string"===typeof a&&(a=JSON.parse(a)),Dynamsoft_X.WasmEnv.licensePromise.resolve(a))}};
Dynamsoft_X.ImageIoBase=function(a,b,c,e){var d=this;this.moduleInfo=b;this.name=this.moduleInfo.name;this.outputType=Dynamsoft_X.Enum_ImageType.IT_JPG;this.inputType=Dynamsoft_X.Enum_ImageType.IT_ALL;this.tiffFormat=0;this.jpegQuality=80;this.tasksQueue=[];this.worker=null;this.lastTaskId=0;this.logFunc=c;this.context=e;this.instanceId=++Dynamsoft_X.WasmEnv.lastInstanceId;this.timer=null;this.nv=JSON.parse(JSON.stringify(Dynamsoft_X.navInfo));this.mb=Dynamsoft_X.Lib.env.bMobile;this.dm=location.origin;this.initStatus=
"";this.license=a?a:Dynamsoft_X.license;this.license||(this.license="");this._readyPromise={};this._readyPromise.promise=new Promise(function(a,b){d._readyPromise.resolve=a;d._readyPromise.reject=b});this._getWorker=function(){d.timer&&clearTimeout(d.timer);if(d.worker)return d.worker;var a=Dynamsoft_X.WasmEnv.getWorkerPool();if(a){d.worker=a.getWorker(d.moduleInfo,d.instanceId);if(d.worker)0<d.tasksQueue.length&&d._dispatchQueuedTasks();else{if(Dynamsoft_X.WasmEnv[d.name].error)return d._cancelAllTasks(Dynamsoft_X.error.code.wasmJsNotLoaded,
Dynamsoft_X.WasmEnv[d.name].error),d.worker;0<d.tasksQueue.length&&(d.timer=setTimeout(d._getWorker,50))}return d.worker}d._cancelAllTasks(Dynamsoft_X.error.code.wasmJsNotLoaded,"wasm env not loaded")};this._dispatchQueuedTasks=function(){d._logAll(d.tasksQueue,d);if(d.worker){if(0<d.tasksQueue.length){var a=d.tasksQueue[0];if(d.initStatus===Dynamsoft_X.conststring.initReady||"init"===a.func)delete d.tasksQueue[0],d.tasksQueue.splice(0,1),d._exec(a)}}else 0<d.tasksQueue.length&&d._getWorker()};this._log=
function(a,b){"function"===typeof b.logFunc?b.logFunc(a,b.context):Dynamsoft_X.WasmEnv.log(a,Dynamsoft_X.conststring.logDebug)};this._logAll=function(a,b){Dynamsoft_X.WasmEnv.logLevel===Dynamsoft_X.conststring.logAll&&this._log(a,b)};this._handleReject=function(a,b,c){var d=b;"object"!=typeof d&&(d={},d.code=c,d.message=b);return a.reject(d)};this._handleBasicResult=function(a,b){delete a.code;delete a.message;return a};this._handleBooleanResult=function(a,b){return!0};this._handleImageData=function(a,b){if("object"===
typeof a.imageData)if(void 0!=a.imageCount&&1<a.imageCount)for(b=0;b<a.imageCount;b++)a.imageData[b]=URL.createObjectURL(a.imageData[b]);else a.imageData=URL.createObjectURL(a.imageData);"object"===typeof a.pdfData&&(a.pdfData=URL.createObjectURL(a.pdfData));return a};this._handleResult=function(a,b){a=b.context._getResult(a);void 0===a.code||!a.code&&"Successful."===a.message?(a=b.handleResult(a,b),d._dispatchQueuedTasks(),b=b.resolve,b(a)):b.reject({code:a.code,message:a.message})};this._getResult=
function(a){try{return"string"===typeof a?JSON.parse(a):a}catch(k){return a}};this._exec=function(a){var b=this,c=b.worker;c.setLogCallback(b._log,b);b._logAll(a,b);try{c.exec(a.func,a.params).then(function(c){b._log(c,b);b._handleResult(b._getResult(c),a)}).catch(function(c){b._log(c,b);b._dispatchQueuedTasks();var d=c;"object"===typeof c&&(void 0!=c.message?d=c.message:void 0!=c.message&&(d=c.message));a.reject({code:Dynamsoft_X.error.code.wasmJsWorkerRunFailed,message:d})})}catch(h){b._dispatchQueuedTasks(),
b._log(h,b),a.reject({code:Dynamsoft_X.error.code.wasmJsWorkerRunException,message:h.message,stack:h.stack})}};this._cancelAllTasks=function(a,b){for(var c=0;c<this.tasksQueue.length;c++)void 0!==this.tasksQueue[c]&&this.tasksQueue[c].reject({code:a,message:b});this.tasksQueue=[]};this._createTask=function(a,b,c){var d={id:++this.lastTaskId};d.promise=new Promise(function(a,b){d.resolve=a;d.reject=b});d.func=a;d.params={moduleName:this.name,insId:this.instanceId};d.context=this;d.handleResult="undefined"!==
typeof c&&c?c:this._handleBasicResult;d.params.input="undefined"!==typeof b&&b?b:"";d.params.returnType="";return d};this._addTask=function(a){""===this.initStatus?a.reject({code:Dynamsoft_X.error.code.wasmJsObjectNotInit,message:"object not init"}):this.initStatus===Dynamsoft_X.conststring.initFailed?a.reject({code:Dynamsoft_X.error.code.wasmJsObjectInitFailed,message:d.initError}):(d.tasksQueue.push(a),d._dispatchQueuedTasks());return a.promise};this._init=function(){var b=this._createTask("init");b.params.key=
a;b.params.val={nv:this.nv,mb:this.mb,dm:this.dm};b.handleResult=function(a,b){b.context.initStatus=Dynamsoft_X.conststring.initReady;return a};this.initStatus=Dynamsoft_X.conststring.initPending;this._addTask(b);return b.promise};this._destroy=function(){var a=this._createTask("destroy");this._addTask(a);return a.promise};this._terminate=function(){this._destroy().then(function(a){var b=Dynamsoft_X.WasmEnv.getWorkerPool();b&&b.removeInstanceInWorker(d.moduleInfo,d.worker,d.instanceId);d.worker=null;d._log(d.name+
" destroy return: ",d);d._log(a,d)}).catch(function(a){var b=Dynamsoft_X.WasmEnv.getWorkerPool();b&&b.removeInstanceInWorker(d.moduleInfo,d.worker,d.instanceId);d.worker=null;d._log(d.name+" destroy failed",d);d._log(a,d)});this.initStatus=""};this._readFile=function(a,b){return new Promise(function(c,e){Dynamsoft_X.readFile(a).then(function(a){c(a)},function(a){d._handleReject(b,a,Dynamsoft_X.error.code.wasmJsReadFileFailed)}).catch(function(a){d._handleReject(b,a,Dynamsoft_X.error.code.wasmJsReadFileFailed)})})};
this._init().then(function(a){d._log(d.name+" init return: ",d);d._log(a,d);d._readyPromise.resolve()}).catch(function(a){d.initStatus=Dynamsoft_X.conststring.initFailed;d.initError=a.message;d._log(d.name+" init failed",d);d._log(a,d);d._cancelAllTasks(Dynamsoft_X.error.code.wasmJsObjectInitFailed,a.message);d._readyPromise.reject(a)})};Dynamsoft_X.ImageIoBase.prototype.terminate=function(){this._terminate()};Dynamsoft_X.ImageIoBase.prototype.ready=function(){return this._readyPromise.promise};
Dynamsoft_X.ImageIoBase.prototype.downloadData=function(a,b,c,e){a=a?a:Date.now()+"";return(new Promise(function(d,f){if(b){if("base64"===c){var k=Dynamsoft_X.base64DecToArr(b).buffer;k=new Blob([k],{type:"pdf"==e?"application/pdf":"jpg"==e?"image/jpeg":"image/"+e});k=URL.createObjectURL(k)}else"blob"===c?k=b:f(Dynamsoft_X.Enum_ErrorMessage.FILE_STREAM_ERROR+"Please read/write image or get page before download!");a=a+"."+e;window.navigator.msSaveBlob&&fetch(k).then(function(a){return a.arrayBuffer()}).then(function(b){b=
new Blob([b]);window.navigator.msSaveOrOpenBlob(b,a);d(a)});f=document.createElement("a");f.href=k;f.download=a;f.click();d(a)}else f(Dynamsoft_X.Enum_ErrorMessage.FILE_STREAM_ERROR+"Please read/write image or get page before download!")})).catch(function(a){return Promise.reject(a)})};
Dynamsoft_X.Imagecore=function(a,b,c){a=a?a:Dynamsoft_X.WasmEnv.productKey;Dynamsoft_X.ImageIoBase.call(this,a,Dynamsoft_X.WasmEnv.imgCore,b,c);this.saveImageInner=function(a,b,c,k,g,h,l,p,n,m){var d=this;b=void 0!=b?b:this.inputType;c=void 0!=c?c:0;k=void 0!=k?k:0;g=void 0!=g?g:24;h=void 0!=h?h:96;l=void 0!=l?l:96;n=void 0!=n?n:this.jpegQuality;m=void 0!=m?m:Dynamsoft_X.Enum_ReturnType.RT_AUTO;d=this;var e=d._createTask("SaveImage");d._readFile(a,e).then(function(a){e.params.input=[a,b,c,k,g,h,l,p,n,m==Dynamsoft_X.Enum_ReturnType.RT_BASE64];
e.params.returnType=m;e.handleResult=d._handleImageData;d._addTask(e)});return e.promise}};Dynamsoft_X.Imagecore.prototype=Object.create(Dynamsoft_X.ImageIoBase.prototype);Dynamsoft_X.Imagecore.prototype.constructor=Dynamsoft_X.Imagecore;Dynamsoft_X.Imagecore.prototype.getImageFormat=function(a){var b=this,c=b._createTask("GetImageFormat");b._readFile(a,c).then(function(a){c.params.input=a;b._addTask(c)});return c.promise};
Dynamsoft_X.Imagecore.prototype.readImageInfo=function(a){var b=this,c=b._createTask("ReadImageInfo");b._readFile(a,c).then(function(a){c.params.input=a;b._addTask(c)});return c.promise};Dynamsoft_X.Imagecore.prototype.getMD5=function(a){var b=this,c=b._createTask("GetMD5");b._readFile(a,c).then(function(a){c.params.input=a;c.handleResult=function(a,b){return a.MD5};b._addTask(c)});return c.promise};Dynamsoft_X.Imagecore.prototype.getLicenseInfo=function(){return this._addTask(this._createTask("GetLicenseInfo"))};
Dynamsoft_X.Imagecore.prototype.saveImage=function(a,b,c,e){return this.saveImageInner(a,null,null,null,null,null,null,b,c,e?Dynamsoft_X.Enum_ReturnType.RT_BINARY:Dynamsoft_X.Enum_ReturnType.RT_AUTO)};Dynamsoft_X.Imagecore.prototype.readImage=function(a,b,c,e){b=void 0!=b?b:this.outputType;c=void 0!=c?c:this.jpegQuality;e=void 0!=e?e:!1;var d=this,f=d._createTask("ReadImage");d._readFile(a,f).then(function(a){f.params.input=[a,b,c,e];f.handleResult=d._handleImageData;d._addTask(f)});return f.promise};
Dynamsoft_X.Imagecore.prototype.openTiff=function(a){var b=this,c=b._createTask("LoadTiff");b._readFile(a,c).then(function(a){c.params.input=a;b._addTask(c)});return c.promise};Dynamsoft_X.Imagecore.prototype.readTiff=function(a,b,c){b=void 0!=b?b:this.outputType;c=void 0!=c?c:this.returnImageAsBase64;return this._addTask(this._createTask("ReadTiffPage",[void 0!=a?a:0,b,c],this._handleImageData))};
Dynamsoft_X.Imagecore.prototype.closeTiff=function(){return this._addTask(this._createTask("EndReadTiff",null,this._handleBooleanResult))};Dynamsoft_X.Imagecore.prototype.createTiff=function(){return this._addTask(this._createTask("NewTiff",null,this._handleBooleanResult))};
Dynamsoft_X.Imagecore.prototype.appendImage=function(a,b,c,e){b=void 0!=b?b:this.inputType;c=void 0!=c?c:this.tiffFormat;e=void 0!=e?e:this.jpegQuality;var d=this,f=d._createTask("AppendImageToTiff");d._readFile(a,f).then(function(a){f.params.input=[a,b,c,e];f.handleResult=d._handleBooleanResult;d._addTask(f)});return f.promise};Dynamsoft_X.Imagecore.prototype.addTag=function(a,b,c){return this._addTask(this._createTask("AddTagToNextPage",[a,b,void 0!=c?c:!0],this._handleBooleanResult))};
Dynamsoft_X.Imagecore.prototype.getTiff=function(a){var b=this._createTask("GetTiffStream");b.handleResult=this._handleImageData;b.params.returnType=a?Dynamsoft_X.Enum_ReturnType.RT_BINARY:Dynamsoft_X.Enum_ReturnType.RT_AUTO;return this._addTask(b)};Dynamsoft_X.Imagecore.prototype.getMemoryUsed=function(){return this._addTask(this._createTask("getMemoryUsed",null,function(a,b){return a.memoryUsed}))};
Dynamsoft_X.ImageProc=function(a,b,c){a=a?a:Dynamsoft_X.WasmEnv.productKey;Dynamsoft_X.ImageIoBase.call(this,a,Dynamsoft_X.WasmEnv.imgProc,b,c)};Dynamsoft_X.ImageProc.prototype=Object.create(Dynamsoft_X.ImageIoBase.prototype);Dynamsoft_X.ImageProc.prototype.constructor=Dynamsoft_X.ImageProc;
Dynamsoft_X.ImageProc.prototype.initImage=function(a,b,c,e){b=void 0!=b?b:!1;c=void 0!=c?c:0;e=void 0!=e?e:0;var d=this,f=d._createTask("InitImageObject");f.handleResult=this._handleBooleanResult;f.params.input=[a,c,e];b?(f.params.input.push(Dynamsoft_X.Enum_ImageType.IT_RGBA),d._addTask(f)):d._readFile(a,f).then(function(a){f.params.input[0]=a;f.params.input.push(Dynamsoft_X.Enum_ImageType.IT_ALL);d._addTask(f)});return f.promise};
Dynamsoft_X.ImageProc.prototype.rotate=function(a,b,c,e){return this._addTask(this._createTask("RotateEx",[a,void 0!=c?c:!1,void 0!=e?e:3,void 0!=b?b:"FFFFFF"],this._handleBooleanResult))};Dynamsoft_X.ImageProc.prototype.flip=function(a){a=void 0!=a?a:1;var b=this._createTask("");b.handleResult=this._handleBooleanResult;1===a?b.func="Flip":-1===a&&(b.func="Mirror");this._addTask(b);return b.promise};
Dynamsoft_X.ImageProc.prototype.erase=function(a,b,c,e,d){d=void 0!=d?d:"FFFFFF";var f=this._createTask("Erase");f.handleResult=this._handleBooleanResult;f.params.input=[a,b,c,e,d];this._addTask(f);return f.promise};Dynamsoft_X.ImageProc.prototype.crop=function(a,b,c,e){return this._addTask(this._createTask("Crop",[a,b,c,e],this._handleBooleanResult))};Dynamsoft_X.ImageProc.prototype.resize=function(a,b,c){return this._addTask(this._createTask("ChangeImageSize",[a,b,void 0!=c?c:5],this._handleBooleanResult))};
Dynamsoft_X.ImageProc.prototype.toGrayscale=function(a,b){return this._addTask(this._createTask("ConvertToGrayScale",a+";"+b,this._handleBooleanResult))};Dynamsoft_X.ImageProc.prototype.toBinary=function(a,b,c){return this._addTask(this._createTask("ConvertToBWScale",a+";"+b+";"+c,this._handleBooleanResult))};Dynamsoft_X.ImageProc.prototype.invert=function(){return this._addTask(this._createTask("Invert",null,this._handleBooleanResult))};
Dynamsoft_X.ImageProc.prototype.setImageWidth=function(a,b){return this._addTask(this._createTask("SetImageWidth",[a,void 0!=b?b:"FFFFFF"],this._handleBooleanResult))};Dynamsoft_X.ImageProc.prototype.setImageHeight=function(a,b){return this._addTask(this._createTask("SetImageHeight",[a,void 0!=b?b:"FFFFFF"],this._handleBooleanResult))};Dynamsoft_X.ImageProc.prototype.setDPI=function(a,b,c,e,d,f){return this._addTask(this._createTask("SetDPI",[a,b,c,e,void 0!=d?d:!1,f],this._handleBooleanResult))};
Dynamsoft_X.ImageProc.prototype.getImage=function(a,b,c,e,d,f){a=void 0!=a?a:this.jpegQuality;return this._addTask(this._createTask("GetCurrentImage",[void 0!=c&&c?Dynamsoft_X.Enum_ImageType.IT_JPG:Dynamsoft_X.Enum_ImageType.IT_ALL,void 0!=e?e:24,void 0!=d?d:96,void 0!=f?f:96,!1,a,void 0!=b?b:!0],this._handleImageData))};Dynamsoft_X.ImageProc.prototype.getSkewAngle=function(a){return this._addTask(this._createTask("GetSkewAngle",[void 0!=a?a:""],function(a,c){return a.skewAngle}))};
Dynamsoft_X.ImageProc.prototype.freeReservedData=function(){return this._addTask(this._createTask("FreeReservedData",null,this._handleBooleanResult))};Dynamsoft_X.ImageProc.prototype.detectDocument=function(a){return this._addTask(this._createTask("DocumentDetect",[void 0!=a?a:2]))};Dynamsoft_X.ImageProc.prototype.perspective=function(a,b,c,e,d,f,k,g){return this._addTask(this._createTask("Perspective",[a,b,c,e,d,f,k,g],this._handleBooleanResult))};Dynamsoft_X.ImageProcWrapper={};
Dynamsoft_X.ImageProcWrapper.resize=function(a,b,c,e,d){var f=new Dynamsoft_X.ImageProc(Dynamsoft_X.WasmEnv.productKey);return f.initImage(a).then(function(){var a=void 0==d?5:d;var g=b>c?b/e:c/e;return f.resize(b/g,c/g,a)}).then(function(){return f.getImage()}).then(function(a){setTimeout(function(){f.terminate()},30);return a},function(a){setTimeout(function(){f.terminate()},30);return a})};
Dynamsoft_X.PdfReader=function(a,b,c){a=a?a:Dynamsoft_X.WasmEnv.productKey;Dynamsoft_X.ImageIoBase.call(this,a,Dynamsoft_X.WasmEnv.pdfReader,b,c);this.resolution=200;this.readMode=3;this.outputType=Dynamsoft_X.Enum_ImageType.IT_ALL};Dynamsoft_X.PdfReader.prototype=Object.create(Dynamsoft_X.ImageIoBase.prototype);Dynamsoft_X.PdfReader.prototype.constructor=Dynamsoft_X.PdfReader;
Dynamsoft_X.PdfReader.prototype.open=function(a,b){b=void 0!=b?b:"";var c=this,e=c._createTask("LoadPdf");c._readFile(a,e).then(function(a){e.params.input=[a,b];e.handleResult=function(a,b){var c=Dynamsoft_X.base64Decode(a.infoBase64);try{try{c.replace(/\\/gi,"\\\\");var d=JSON.parse(c)}catch(l){d=c}return{PdfCount:a.pageCount,PdfInfo:d,isTextBased:a.isTextBased}}catch(l){b.reject({code:Dynamsoft_X.error.code.wasmJsInvalidJson,message:l.message,stack:l.stack})}};c._addTask(e)});return e.promise};
Dynamsoft_X.PdfReader.prototype.readPage=function(a,b,c,e,d,f){b=void 0!=b?b:this.resolution;c=void 0!=c?c:this.readMode;e=void 0!=e?e:this.outputType;f=void 0!=f?f:this.returnImageAsBase64;return this._addTask(this._createTask("ReadPdfPage",[void 0!=a?a:0,b,c,e,void 0!=d?d:!1,f],this._handleImageData))};Dynamsoft_X.PdfReader.prototype.close=function(){return this._addTask(this._createTask("UnloadPdf",null,this._handleBooleanResult))};
Dynamsoft_X.PdfWriter=function(a,b,c){a=a?a:Dynamsoft_X.WasmEnv.productKey;Dynamsoft_X.ImageIoBase.call(this,a,Dynamsoft_X.WasmEnv.pdfWriter,b,c);this._setPdfSettings=function(a){var b={};if(void 0!=a&&"object"===typeof a)for(var c in a)b[c]=a[c];return b}};Dynamsoft_X.PdfWriter.prototype=Object.create(Dynamsoft_X.ImageIoBase.prototype);Dynamsoft_X.PdfWriter.prototype.constructor=Dynamsoft_X.PdfWriter;
Dynamsoft_X.PdfWriter.prototype.initPdfSetting=function(a){var b=this._createTask("InitPdfWriter");b.params.input=JSON.stringify(this._setPdfSettings(a));b.handleResult=this._handleBooleanResult;return this._addTask(b)};Dynamsoft_X.PdfWriter.prototype.appendPage=function(a){var b=this,c=b._createTask("AddPageFromImageFileStream");b._readFile(a,c).then(function(a){c.params.input=a;c.handleResult=b._handleBooleanResult;b._addTask(c)});return c.promise};
Dynamsoft_X.PdfWriter.prototype.writePdf=function(a){var b=this._createTask("GetPdfContent");b.params.returnType=a?Dynamsoft_X.Enum_ReturnType.RT_BINARY:Dynamsoft_X.Enum_ReturnType.RT_AUTO;b.handleResult=this._handleImageData;return this._addTask(b)};Dynamsoft_X.pdf=Dynamsoft_X.pdf||{};Dynamsoft_X.pdf.IsModuleInstalled=function(){return Dynamsoft_X.isWasmSupport()?Dynamsoft_X.WasmEnv.pdfReader.status==Dynamsoft_X.conststring.initReady&&Dynamsoft_X.WasmEnv.pdfWriter.status==Dynamsoft_X.conststring.initReady:!1};
Dynamsoft_X.WasmEnv.getLicenseInfo=function(a){Dynamsoft_X.WasmEnv.productKey!=a&&(Dynamsoft_X.WasmEnv.productKey=a,Dynamsoft_X.WasmEnv.licensePromise={},Dynamsoft_X.WasmEnv.licensePromise.promise=new Promise(function(a,c){Dynamsoft_X.WasmEnv.licensePromise.resolve=a;Dynamsoft_X.WasmEnv.licensePromise.reject=c;var b=new Dynamsoft_X.Imagecore(Dynamsoft_X.WasmEnv.productKey);b.getLicenseInfo().then(function(c){b.terminate();a(c)},function(a){b.terminate();c(a)})}));return Dynamsoft_X.WasmEnv.licensePromise.promise};
Dynamsoft_X.WasmEnv.memoryUsed=function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){a=new Promise(function(a,b){var c=new Dynamsoft_X.Imagecore(Dynamsoft_X.WasmEnv.productKey);c.getMemoryUsed().then(function(b){c.terminate();a(b)},function(a){c.terminate();b(a)})});return b.return(a)})};
Dynamsoft_X.WasmEnv.getWasmNames=function(){for(var a=[],b=$jscomp.makeIterator(Dynamsoft_X.WasmEnv.moduleNames),c=b.next();!c.done;c=b.next())c=c.value,a.push(Dynamsoft_X.WasmEnv[c].prefixName+Dynamsoft_X.WasmEnv[c].ver+Dynamsoft_X.conststring.wasmExtension);return a};
return true;}

// Dynamsoft Barcode Reader Addon for DWT version 16.1 (DBR version 7.4) 20200605 1340
/** dynamsoft.webtwain.addon.barcodereader.js
 * --Custom Changes--
 * 1. [added line 31] import DSBarcodeReader from "dynamsoft-javascript-barcode";
 * 2. [changed] var i=e.getScript([h,"/addon/dbrjs/dbr.js",k].join(""),true,function(q){e.detect.dbrwasmScriptLoaded=true;o()});i.setAttribute("data-productKeys",Dynamsoft.WebTwainEnv.ProductKey)
 * -> if(DSBarcodeReader&&DSBarcodeReader.BarcodeReader){e.detect.dbrwasmScriptLoaded=true;Dynamsoft.BarcodeReader=DSBarcodeReader.BarcodeReader;Dynamsoft.BarcodeReader.engineResourcePath=Dynamsoft.WebTwainEnv.ResourcesPath+"/addon/dbrjs/";Dynamsoft.BarcodeReader.productKeys=Dynamsoft.WebTwainEnv.ProductKey;o()}
 * 3. [added] added o._canvasMaxWH=4096;
 * from Dynamsoft.BarcodeReader.createInstance().then(function(q){
 * to Dynamsoft.BarcodeReader.createInstance().then(function(q){q._canvasMaxWH=4096;
 */
/*! 20200717
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2020, Dynamsoft Corporation
* Author: Dynamsoft R&D Department
*
* Version: 16.1
*
* Module: addon/barcodereader
* final js: build\addon\dynamsoft.webtwain.addon.barcodereader.js
*/
/*;var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};*/Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};(function(){Dynamsoft.BarcodeReaderAddon=Dynamsoft.BarcodeReaderAddon||{};var a=Dynamsoft.BarcodeReaderAddon;a.Version="7.4.0.0428";a.VersionForActiveX="7.4.0.0428";a._defaultRuntimeSettingsStr="";a._defaultTemplateStr="";a._wasmInstance=false;a._activeXInstance=false;a.BarcodeReaderException=(function(){var b=function(){var d;var c=arguments[0],f=arguments[1],e=Dynamsoft.EnumErrorCode.DBR_UNKNOWN;if(typeof c=="number"){e=c;d=new Error(f)}else{d=new Error(c)}d.code=e;return d};return b})();a.RemoveNonPrintableChar=function(b){if(Dynamsoft.Lib.isString(b)){return b.replace(/[^\x20-\x7E]|(\\")/g,"")}else{return b}};a.errors={webcamNotInstalled:"The Webcam add-on not installed.",nonServiceNotSupportWebcamDecode:"The BarcodeReader add-on does not support reading barcodes from video streams.",decodeResultEmpty:"decode result is empty."};a._activeXMaxIEVersion=9;a.logLevel=3;Dynamsoft.EnumAccompanyingTextRecognitionMode={ATRM_GENERAL:1,ATRM_SKIP:0};Dynamsoft.EnumBarcodeColourMode={BICM_DARK_ON_LIGHT:1,BICM_LIGHT_ON_DARK:2,BICM_DARK_ON_DARK:4,BICM_LIGHT_ON_LIGHT:8,BICM_DARK_LIGHT_MIXED:16,BICM_DARK_ON_LIGHT_DARK_SURROUNDING:32,BICM_SKIP:0};Dynamsoft.EnumBarcodeComplementMode={BCM_AUTO:1,BCM_GENERAL:2,BCM_SKIP:0};Dynamsoft.EnumBarcodeFormat={BF_ALL:-32505857,BF_ONED:2047,BF_GS1_DATABAR:260096,BF_CODE_39:1,BF_CODE_128:2,BF_CODE_93:4,BF_CODABAR:8,BF_ITF:16,BF_EAN_13:32,BF_EAN_8:64,BF_UPC_A:128,BF_UPC_E:256,BF_INDUSTRIAL_25:512,BF_CODE_39_EXTENDED:1024,BF_GS1_DATABAR_OMNIDIRECTIONAL:2048,BF_GS1_DATABAR_TRUNCATED:4096,BF_GS1_DATABAR_STACKED:8192,BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:16384,BF_GS1_DATABAR_EXPANDED:32768,BF_GS1_DATABAR_EXPANDED_STACKED:65536,BF_GS1_DATABAR_LIMITED:131072,BF_PATCHCODE:262144,BF_PDF417:33554432,BF_QR_CODE:67108864,BF_DATAMATRIX:134217728,BF_AZTEC:268435456,BF_MAXICODE:536870912,BF_MICRO_QR:1073741824,BF_MICRO_PDF417:524288,BF_GS1_COMPOSITE:-2147483648,BF_NULL:0};Dynamsoft.EnumBarcodeFormat_2={BF2_NULL:0,BF2_POSTALCODE:32505856,BF2_NONSTANDARD_BARCODE:1,BF2_USPSINTELLIGENTMAIL:1048576,BF2_POSTNET:2097152,BF2_PLANET:4194304,BF2_AUSTRALIANPOST:8388608,BF2_RM4SCC:16777216,BF2_DOTCODE:2};Dynamsoft.EnumBinarizationMode={BM_AUTO:1,BM_LOCAL_BLOCK:2,BM_SKIP:0};Dynamsoft.EnumClarityCalculationMethod={ECCM_CONTRAST:1};Dynamsoft.EnumClarityFilterMode={CFM_GENERAL:1};Dynamsoft.EnumColourClusteringMode={CCM_AUTO:1,CCM_GENERAL_HSV:2,CCM_SKIP:0};Dynamsoft.EnumColourConversionMode={CICM_GENERAL:1,CICM_SKIP:0};Dynamsoft.EnumConflictMode={CM_IGNORE:1,CM_OVERWRITE:2};Dynamsoft.EnumDeformationResistingMode={DRM_AUTO:1,DRM_GENERAL:2,DRM_SKIP:0};Dynamsoft.EnumDPMCodeReadingMode={DPMCRM_AUTO:1,DPMCRM_GENERAL:2,DPMCRM_SKIP:0};Dynamsoft.EnumErrorCode={DBR_SYSTEM_EXCEPTION:1,DBR_SUCCESS:0,DBR_UNKNOWN:-10000,DBR_NO_MEMORY:-10001,DBR_NULL_REFERENCE:-10002,DBR_LICENSE_INVALID:-10003,DBR_LICENSE_EXPIRED:-10004,DBR_FILE_NOT_FOUND:-10005,DBR_FILETYPE_NOT_SUPPORTED:-10006,DBR_BPP_NOT_SUPPORTED:-10007,DBR_INDEX_INVALID:-10008,DBR_BARCODE_FORMAT_INVALID:-10009,DBR_CUSTOM_REGION_INVALID:-10010,DBR_MAX_BARCODE_NUMBER_INVALID:-10011,DBR_IMAGE_READ_FAILED:-10012,DBR_TIFF_READ_FAILED:-10013,DBR_QR_LICENSE_INVALID:-10016,DBR_1D_LICENSE_INVALID:-10017,DBR_DIB_BUFFER_INVALID:-10018,DBR_PDF417_LICENSE_INVALID:-10019,DBR_DATAMATRIX_LICENSE_INVALID:-10020,DBR_PDF_READ_FAILED:-10021,DBR_PDF_DLL_MISSING:-10022,DBR_PAGE_NUMBER_INVALID:-10023,DBR_CUSTOM_SIZE_INVALID:-10024,DBR_CUSTOM_MODULESIZE_INVALID:-10025,DBR_RECOGNITION_TIMEOUT:-10026,DBR_JSON_PARSE_FAILED:-10030,DBR_JSON_TYPE_INVALID:-10031,DBR_JSON_KEY_INVALID:-10032,DBR_JSON_VALUE_INVALID:-10033,DBR_JSON_NAME_KEY_MISSING:-10034,DBR_JSON_NAME_VALUE_DUPLICATED:-10035,DBR_TEMPLATE_NAME_INVALID:-10036,DBR_JSON_NAME_REFERENCE_INVALID:-10037,DBR_PARAMETER_VALUE_INVALID:-10038,DBR_DOMAIN_NOT_MATCHED:-10039,DBR_RESERVEDINFO_NOT_MATCHED:-10040,DBR_AZTEC_LICENSE_INVALID:-10041,DBR_LICENSE_DLL_MISSING:-10042,DBR_LICENSEKEY_NOT_MATCHED:-10043,DBR_REQUESTED_FAILED:-10044,DBR_LICENSE_INIT_FAILED:-10045,DBR_PATCHCODE_LICENSE_INVALID:-10046,DBR_POSTALCODE_LICENSE_INVALID:-10047,DBR_DPM_LICENSE_INVALID:-10048,DBR_FRAME_DECODING_THREAD_EXISTS:-10049,DBR_STOP_DECODING_THREAD_FAILED:-10050,DBR_SET_MODE_ARGUMENT_ERROR:-10051,DBR_LICENSE_CONTENT_INVALID:-10052,DBR_LICENSE_KEY_INVALID:-10053,DBR_LICENSE_DEVICE_RUNS_OUT:-10054,DBR_GET_MODE_ARGUMENT_ERROR:-10055,DBR_IRT_LICENSE_INVALID:-10056,DBR_MAXICODE_LICENSE_INVALID:-10057,DBR_GS1_DATABAR_LICENSE_INVALID:-10058,DBR_GS1_COMPOSITE_LICENSE_INVALID:-10059,DBR_DOTCODE_LICENSE_INVALID:-10061};Dynamsoft.EnumGrayscaleTransformationMode={GTM_INVERTED:1,GTM_ORIGINAL:2,GTM_SKIP:0};Dynamsoft.EnumImagePixelFormat={IPF_Binary:0,IPF_BinaryInverted:1,IPF_GrayScaled:2,IPF_NV21:3,IPF_RGB_565:4,IPF_RGB_555:5,IPF_RGB_888:6,IPF_ARGB_8888:7,IPF_RGB_161616:8,IPF_ARGB_16161616:9,IPF_ABGR_8888:10,IPF_ABGR_16161616:11,IPF_BGR_888:12};Dynamsoft.EnumImagePreprocessingMode={IPM_AUTO:1,IPM_GENERAL:2,IPM_GRAY_EQUALIZE:4,IPM_GRAY_SMOOTH:8,IPM_SHARPEN_SMOOTH:16,IPM_MORPHOLOGY:32,IPM_SKIP:0};Dynamsoft.EnumIMResultDataType={IMRDT_IMAGE:1,IMRDT_CONTOUR:2,IMRDT_LINESEGMENT:4,IMRDT_LOCALIZATIONRESULT:8,IMRDT_REGIONOFINTEREST:16,IMRDT_QUADRILATERAL:32};Dynamsoft.EnumIntermediateResultSavingMode={IRSM_MEMORY:1,IRSM_FILESYSTEM:2,IRSM_BOTH:4};Dynamsoft.EnumIntermediateResultType={IRT_NO_RESULT:0,IRT_ORIGINAL_IMAGE:1,IRT_COLOUR_CLUSTERED_IMAGE:2,IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE:4,IRT_TRANSFORMED_GRAYSCALE_IMAGE:8,IRT_PREDETECTED_REGION:16,IRT_PREPROCESSED_IMAGE:32,IRT_BINARIZED_IMAGE:64,IRT_TEXT_ZONE:128,IRT_CONTOUR:256,IRT_LINE_SEGMENT:512,IRT_FORM:1024,IRT_SEGMENTATION_BLOCK:2048,IRT_TYPED_BARCODE_ZONE:4096,IRT_PREDETECTED_QUADRILATERAL:8192};Dynamsoft.EnumLocalizationMode={LM_SKIP:0,LM_AUTO:1,LM_CONNECTED_BLOCKS:2,LM_LINES:8,LM_STATISTICS:4,LM_SCAN_DIRECTLY:16,LM_STATISTICS_MARKS:32,LM_STATISTICS_POSTAL_CODE:64};Dynamsoft.EnumPDFReadingMode={PDFRM_RASTER:1,PDFRM_AUTO:2,PDFRM_VECTOR:4};Dynamsoft.EnumQRCodeErrorCorrectionLevel={QRECL_ERROR_CORRECTION_H:0,QRECL_ERROR_CORRECTION_L:1,QRECL_ERROR_CORRECTION_M:2,QRECL_ERROR_CORRECTION_Q:3};Dynamsoft.EnumRegionPredetectionMode={RPM_AUTO:1,RPM_GENERAL:2,RPM_GENERAL_RGB_CONTRAST:4,RPM_GENERAL_GRAY_CONTRAST:8,RPM_GENERAL_HSV_CONTRAST:16,RPM_SKIP:0};Dynamsoft.EnumResultCoordinateType={RCT_PIXEL:1,RCT_PERCENTAGE:2};Dynamsoft.EnumResultType={RT_STANDARD_TEXT:0,RT_RAW_TEXT:1,RT_CANDIDATE_TEXT:2,RT_PARTIAL_TEXT:3};Dynamsoft.EnumScaleUpMode={SUM_AUTO:1,SUM_LINEAR_INTERPOLATION:2,SUM_NEAREST_NEIGHBOUR_INTERPOLATION:4,SUM_SKIP:0};Dynamsoft.EnumTerminatePhase={TP_REGION_PREDETECTED:1,TP_IMAGE_PREPROCESSED:2,TP_IMAGE_BINARIZED:4,TP_BARCODE_LOCALIZED:8,TP_BARCODE_TYPE_DETERMINED:16,TP_BARCODE_RECOGNIZED:32};Dynamsoft.EnumTextAssistedCorrectionMode={TACM_AUTO:1,TACM_VERIFYING:2,TACM_VERIFYING_PATCHING:4,TACM_SKIP:0};Dynamsoft.EnumTextFilterMode={TFM_AUTO:1,TFM_GENERAL_CONTOUR:2,TFM_SKIP:0};Dynamsoft.EnumTextResultOrderMode={TROM_CONFIDENCE:1,TROM_POSITION:2,TROM_FORMAT:4,TROM_SKIP:0};Dynamsoft.EnumTextureDetectionMode={TDM_AUTO:1,TDM_GENERAL_WIDTH_CONCENTRATION:2,TDM_SKIP:0}})();Dynamsoft.AddonReady(function(e,c){var b,f=Dynamsoft.BarcodeReaderAddon;function a(h){return h&&h instanceof ArrayBuffer}f.Class=(function(){var h=Dynamsoft.Lib;var p=function(){this._runtimeSettings=null;this._initSettingsContent=null;this._tplContentArr=[];this.bWasm=false};p.prototype._decodeBlob=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof Blob)){throw TypeError("'_decodeBlob(blob, templateName)': Type of 'blob' should be 'Blob'.")}t()}).then(function(){return q._innerDecode(0,s,r)})};p.prototype._decodeArrayBuffer=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof ArrayBuffer)){throw TypeError("'_decodeBlob(arrayBuffer, templateName)': Type of 'arrayBuffer' should be 'ArrayBuffer'.")}t()}).then(function(){return q._innerDecode(0,s,r)})};p.prototype._decodeUint8Array=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof Uint8Array)&&!(self.Uint8ClampedArray&&s instanceof Uint8ClampedArray)){throw TypeError("'_decodeBlob(uint8Array, templateName)': Type of 'uint8Array' should be 'Uint8Array'.")}t()}).then(function(){return q._innerDecode(0,s,r)})};p.prototype._decodeImage=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof HTMLImageElement)){throw TypeError("'_decodeImage(image, templateName)': Type of 'image' should be 'HTMLImageElement'.")}if(s.crossOrigin&&"anonymous"!=s.crossOrigin){throw"cors"}r=r||"";t()}).then(function(){if(s.src.substring(0,11)=="data:image/"){return q._decodeBase64(s.src,r)}else{return q._decodeUrl(s.src,r)["catch"](function(u){if(f.logLevel>=3){if(console&&console.warn){console.warn("'_decodeImage(image, templateName)': Image src not available. Use '_decodeCanvas' instead.");console.warn(u)}}if(!self.HTMLCanvasElement){return Promise.reject(Error("'_decodeImage(image, templateName)': Browser not support HTMLCanvasElement."))}var v=document.createElement("canvas");v.width=s.naturalWidth;v.height=s.naturalHeight;var t=v.getContext("2d");t.drawImage(s,0,0);return q._decodeCanvas(v,r)})}})};p.prototype._decodeCanvas=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof HTMLCanvasElement)){throw TypeError("'_decodeCanvas(canvas, templateName)': Type of 'canvas' should be 'HTMLCanvasElement'.")}if(s.crossOrigin&&"anonymous"!=s.crossOrigin){throw"cors"}r=r||"";if(s.toBlob){s.toBlob(function(u){t(u)})}else{if(s.msToBlob){s.msToBlob(function(u){t(u)})}else{t(s.toDataURL())}}}).then(function(t){if(s.toBlob||s.msToBlob){return q._decodeBlob(t,r)}else{return q._decodeBase64(t,r)}})};p.prototype._decodeVideo=function(t){var r=this;var s;var q=arguments;return new Promise(function(B){if(!(t instanceof HTMLVideoElement)){throw TypeError("'_decodeVideo(video [ [, sx, sy, sWidth, sHeight], dWidth, dHeight] [, templateName] )': Type of 'video' should be 'HTMLVideoElement'.")}if(t.crossOrigin&&"anonymous"!=t.crossOrigin){throw"cors"}var A,z,u,w,y,v;if(q.length<=2){A=z=0;u=y=t.videoWidth;w=v=t.videoHeight}else{if(q.length<=4){A=z=0;u=t.videoWidth;w=t.videoHeight;y=q[1];v=q[2]}else{A=q[1];z=q[2];u=q[3];w=q[4];y=q[5];v=q[6]}}s=(typeof q[q.length-1]=="string")?q[q.length-1]:"";var x=document.createElement("canvas");x.width=y;x.height=v;var C=x.getContext("2d");C.drawImage(t,A,z,u,w,0,0,y,v);B(x)}).then(function(u){return r._decodeCanvas(u,s)})};p.prototype._decodeBase64=p.prototype.decodeBase64String=function(s,r){var q=this;return new Promise(function(t){if(!(typeof s=="string"||typeof s=="object"&&s instanceof String)){throw TypeError("'decodeBase64(base64Str, templateName)': Type of 'base64Str' should be 'String'.")}if(s.substring(0,11)=="data:image/"){s=s.substring(s.indexOf(",")+1)}t()}).then(function(){return q._innerDecode(1,s,r)})};p.prototype._decodeUrl=function(s,r){var q=this;if(s&&s.indexOf&&(s.indexOf("dwt://")==0||s.indexOf("dcs://")==0)){return q._decodeDynamsoftServiceInnerUrl(s,r)}if(f._wasmInstance){return f._wasmInstance.decode(s)}return new Promise(function(v,u){var t;if(!(typeof s=="string"||typeof s=="object"&&s instanceof String)){throw TypeError("'_decodeUrl(url, templateName)': Type of 'url' should be 'String'.")}r=r||"";if(f._activeXInstance){t=new ActiveXObject("MSXML2.XMLHTTP");t.open("GET",s,true);if(t.overrideMimeType){t.overrideMimeType("text/plain; charset=x-user-defined")}else{t.setRequestHeader("Accept-Charset","x-user-defined")}t.onreadystatechange=function(){if(t.readyState==4){v(new VBArray(t.responseBody).toArray())}};t.send("")}else{t=new XMLHttpRequest();t.open("GET",s,true);t.responseType="arraybuffer";t.send();t.onloadend=function(){v(this.response)};t.onerror=function(){u(t.error)}}}).then(function(t){if(f._activeXInstance){return q._activeXDecodeArray(t,r)}else{return q._decodeArrayBuffer(t,r)}})};p.prototype._decodeDynamsoftServiceInnerUrl=function(s,r){var q=this;return new Promise(function(t){if(!(typeof s=="string"||typeof s=="object"&&s instanceof String)){throw TypeError("'_decodeUrl(url, templateName)': Type of 'innerUrl' should be 'String'.")}if(!(s.indexOf("dwt://")==0||s.indexOf("dcs://")==0)){throw TypeError("'_decodeDynamsoftServiceInnerUrl(innerUrl, templateName)': 'innerUrl' should start with 'dwt://' or 'dcs://'.")}t()}).then(function(){return q._innerDecode(4000,s,r)})};p.prototype._activeXDecodeArray=function(s,r){var q=this;return new Promise(function(v,u){if(!(s instanceof Array)){throw TypeError("'_activeXDecodeArray(array, templateName)': Type of 'array' should be 'Array'.")}r=r||"";try{v(Dynamsoft.Lib.btoa(String.fromCharCode.apply(String,s)))}catch(t){u(t)}}).then(function(t){return q._decodeBase64(t,r)})};p.prototype._activeXDecodeHandle=function(s,r){var q=this;return new Promise(function(t){r=r||"";t()}).then(function(){return q._innerDecode(4001,s,r)})};p.prototype._decode=p.prototype.decode=function(r,q){if(f._activeXInstance){if((typeof r=="string"||r instanceof String)){return this._activeXDecodeHandle(r,q)}else{return Promise.reject(TypeError("'_decode(source, templateName)' in activeX: Type of 'source' should be 'String(partUrl)'."))}}else{if(f._wasmInstance){return f._wasmInstance.decode(r)}else{if(self.Blob&&r instanceof Blob){return this._decodeBlob(r,q)}else{if(self.ArrayBuffer&&r instanceof ArrayBuffer){return this._decodeArrayBuffer(r,q)}else{if((self.Uint8Array&&r instanceof Uint8Array)||(self.Uint8ClampedArray&&r instanceof Uint8ClampedArray)){return this._decodeUint8Array(r,q)}else{if(r instanceof Array){return this._activeXDecodeArray(r,q)}else{if(self.HTMLImageElement&&r instanceof HTMLImageElement){return this._decodeImage(r,q)}else{if(self.HTMLCanvasElement&&r instanceof HTMLCanvasElement){return this._decodeCanvas(r,q)}else{if(self.HTMLVideoElement&&r instanceof HTMLVideoElement){return this._decodeVideo(r,q)}else{if(!isNaN(r)){return this._activeXDecodeHandle(r,q)}else{if(typeof r=="string"||r instanceof String){if(r.substring(0,11)=="data:image/"){return this._decodeBase64(r,q)}else{return this._decodeUrl(r,q)}}else{return Promise.reject(TypeError("'_decode(source, templateName)' in H5: Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'."))}}}}}}}}}}}};var k=function(q){return typeof q==="number"&&q%1===0};var m=function(r){if(typeof r!="object"||r.length!=8){return false}for(var q=0;q<r.length;++q){if(!k(r[q])){return false}}return true};p.prototype._innerServiceCmd=function(r,q){return new Promise(function(u,t){var s={method:"ReadBarcode",parameter:[Dynamsoft.WebTwainEnv.ProductKey,4002,"",""],updateSettings:r,initSettingsContent:q};if(f._activeXInstance){u(f._activeXInstance.Process(h.stringify(s),location.protocol+"//"+location.host))}else{h.fetch(f._urlRoot+"ReadBarcode",{mode:"cors",method:"post",body:h.stringify(s),dataType:"arrayBuffer"}).then(function(v){if(a(v)){u(String.fromCharCode.apply(null,new Uint8Array(v)))}else{u(v)}},function(w){var v="Init template & runtimeSettings failed.";if(w){v=[v," Http info: ",w.errorString," (",w.httpCode,")"].join("")}t(v)})}})};p.prototype._innerDecode=function(t,u,r,s){var q=this;if(q._runtimeSettings){if(q._runtimeSettings.expectedBarcodesCount==0){q._runtimeSettings.expectedBarcodesCount=512}}return new Promise(function(z,y){var x={method:"ReadBarcode",parameter:[Dynamsoft.WebTwainEnv.ProductKey,t,t!=0?u:null,r||""],updateSettings:q._runtimeSettings,conflictMode:1==q.conflictMode?"ignore":"overwrite",initSettingsContent:q._initSettingsContent,tplContent:(function(){if(r){for(var A=0;A<q._tplContentArr.length;++A){if(r==q._tplContentArr[A].ImageParameter.Name){return h.stringify(q._tplContentArr[A])}}}return null})()};if(h.product.bHTML5Edition){if(s){x.parameter.push(s)}}var w=function(C,J,I){try{var G=i(C);if(!G||!G.textResults){y(new f.BarcodeReaderException(G.exception,G.description))}if(h.product.bHTML5Edition&&I&&I.config.data){var E=h.parse(I.config.data),D;if(h.isArray(E.parameter)&&E.parameter.length>2){if(E.parameter[1]==4000){if(E.parameter.length>4&&E.parameter[4]){G.textResults.imageid=E.parameter[4]}else{var F,B;F=E.parameter[2];B=F.indexOf("&index=");if(B>=0){G.textResults.imageid=F.substring(B+7,F.indexOf("&t="))}}}}}for(D=0;D<G.textResults.length;D++){var A=G.textResults[D];A.BarcodeText=A.barcodeText;if(G.exception!=Dynamsoft.EnumErrorCode.DBR_SUCCESS){A.exception=G.exception}}if(G.exception!=Dynamsoft.EnumErrorCode.DBR_SUCCESS){G.textResults.exception=G.exception;G.textResults.description=G.description}z(G.textResults)}catch(H){y(H)}};if(f._activeXInstance){w(f._activeXInstance.Process(h.stringify(x),location.protocol+"//"+location.host))}else{var v=f._urlRoot+"ReadBarcode";if(0==t){v+="/LoadZipFromBytes?cmd="+encodeURIComponent(h.stringify(x))}h.fetch(v,{mode:"cors",method:"post",body:(0!=t)?h.stringify(x):u,dataType:"arrayBuffer"}).then(function(C,B,A){if(a(C)){w(String.fromCharCode.apply(null,new Uint8Array(C)),B,A)}else{w(C,B,A)}},function(B){var A="ReadBarcode request fail.";if(B){A=[A," Http info: ",B.errorString," (",B.httpCode,")"].join("")}y(A)})}})};var i=f._handleRetJsonString=function(s){var r;if(typeof s=="string"||typeof s=="object"&&s instanceof String){try{r=h.parse(s)}catch(q){r=h.parse(f.RemoveNonPrintableChar(s))}}else{r=s}if(!r){throw f.BarcodeReaderException(Dynamsoft.EnumErrorCode.DBR_UNKNOWN,f.errors.decodeResultEmpty)}if("textResults" in r&&h.isArray(r.textResults)){}else{if(r.exception!=Dynamsoft.EnumErrorCode.DBR_SUCCESS){throw f.BarcodeReaderException(r.exception,r.description)}}return r};p.prototype.getAllParameterTemplateNames=function(){var q=[];for(var r=0;r<this._tplContentArr.length;++r){q.push(this._tplContentArr[r].ImageParameter.Name)}return q};p.prototype.getRuntimeSettings=function(){var q=this;if(q.bWasm){return f._wasmInstance.getRuntimeSettings()}if(!q._runtimeSettings){q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}return Promise.resolve(q._runtimeSettings)};var o='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":3,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"bestSpeed","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"Mode":"TFM_SKIP"}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}',j='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":5,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"balance","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}',n='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"},{"Mode":"GTM_INVERTED"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"coverage","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":214748347,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}',l='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":null,"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"}],"MaxAlgorithmThreadCount":4,"Name":"default","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}';p.prototype.updateRuntimeSettings=function(u){var r=this,t;if(typeof u=="string"||typeof u=="object"&&u instanceof String){if("speed"==u||"balance"==u||"coverage"==u||"default"==u){var q;if("speed"==u){q=o}else{if("balance"==u){q=j}else{if("coverage"==u){q=n}else{q=l}}}return r.initRuntimeSettingsWithString(q)}else{t=u}}else{if(typeof u=="object"){t=h.stringify(u)}else{throw TypeError("'setTemplateSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.")}}var s=h.parse(t);if(r.bWasm){return f._wasmInstance.updateRuntimeSettings(s).then(function(){return f._wasmInstance.getRuntimeSettings()})}r._runtimeSettings=s;r._initSettingsContent=null;return r._innerServiceCmd(r._runtimeSettings,null).then(function(v){var w=f._handleRetJsonString(v);r._runtimeSettings=w.settings;if(!r._runtimeSettings){r._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}return w.settings})};p.prototype.resetRuntimeSettings=function(){var q=this;if(q.bWasm){return f._wasmInstance.resetRuntimeSettings().then(function(){return f._wasmInstance.getRuntimeSettings()})}q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr);q._initSettingsContent=null;return q._innerServiceCmd(q._runtimeSettings,null).then(function(r){var s=f._handleRetJsonString(r);q._runtimeSettings=s.settings;if(!q._runtimeSettings){q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}return s.settings})};p.prototype.outputSettingsToString=function(q){if(q){for(var r=0;r<this._tplContentArr.length;++r){if(q==this._tplContentArr[r].ImageParameter.Name){return h.stringify(this._tplContentArr[r])}}}else{return f._defaultTemplateStr}};p.prototype.initRuntimeSettingsWithString=function(r){var q=this;if(!h.isString(r)){throw TypeError("'initRuntimeSettingsWithString(settings)': Type of 'settings' should be 'String'.")}if(q.bWasm){return f._wasmInstance.initRuntimeSettingsWithString(r).then(function(){return f._wasmInstance.getRuntimeSettings()})}q._runtimeSettings=null;q._initSettingsContent=h.parse(r);return q._innerServiceCmd(null,q._initSettingsContent).then(function(s){var t=f._handleRetJsonString(s);q._runtimeSettings=t.settings;if(!q._runtimeSettings){q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}q._initSettingsContent=null;return t.settings})};return p})();f._dbr=false;f._initH5=function(i,h){return new Promise(function(k,j){f._urlRoot=Dynamsoft.dcp._getPreUrl(Dynamsoft.dcp.detect.curPortIndex)+"dcp/dbr_"+f.Version.replace(/\./g,"")+"/";e.ajax({method:"POST",url:f._urlRoot+"VersionInfo",data:'{"method":"VersionInfo"}',onSuccess:function(){k()},onError:function(){return j("Failed to connect to the Barcode Reader Add-on, the library may be missing in the Dynamsoft Service directory.")},dataType:"json",async:true,timeout:800})}).then(function(){f._dbr=new f.Class();return f._dbr._innerServiceCmd(null,null)}).then(function(j){try{var l=f._handleRetJsonString(j);f._dbr._runtimeSettings=l.settings;f._defaultRuntimeSettingsStr=e.stringify(l.settings);f._defaultTemplateStr=e.stringify(l.outputSettings);i(f._dbr)}catch(k){h("Init template & runtimeSettings failed: "+k.message||k)}},function(j){h(j)})};function g(){try{if(typeof WebAssembly==="object"&&typeof WebAssembly.instantiate==="function"){var h=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(h instanceof WebAssembly.Module){return new WebAssembly.Instance(h) instanceof WebAssembly.Instance}}}catch(i){}return false}f.dbrInitPromiseFun=function(n,p){var j=Dynamsoft.BarcodeReaderAddon,m=function(){Dynamsoft.BarcodeReader.createInstance().then(function(q){q._canvasMaxWH=4096;j._wasmInstance=q;return q.getRuntimeSettings()}).then(function(q){j._dbr._runtimeSettings=q;j._defaultRuntimeSettingsStr=e.stringify(q);n(j._dbr)},p)};if(j._dbr){if(j._dbr.bWasm&&!j._wasmInstance){m()}else{n(j._dbr)}return}var k="?t=2020525",h=Dynamsoft.WebTwainEnv.ResourcesPath,l=!Dynamsoft.navInfo.bWin||e.product.bHTML5Edition&&(!Dynamsoft.WebTwainEnv.UseLocalService||e.env.bMobile||Dynamsoft.WebTwainEnv.UseBarcodeAddonWasm);var o=function(){if(l){e.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CompilingWasm);Dynamsoft.BarcodeReader._bUseFullFeature=true;j._dbr=new j.Class();j._dbr.bWasm=true;if(Dynamsoft.BarcodeReader.createInstance){m()}else{setTimeout(function(){m()},30)}return}if(e.product.bHTML5Edition){j._initH5(n,p)}else{var u=Dynamsoft.navInfoSync,q={method:"ReadBarcode",parameter:[Dynamsoft.WebTwainEnv.ProductKey,4002,"",""]};if(u.bIE&&parseInt(u.IEVersion)<=j._activeXMaxIEVersion){try{j._activeXInstance=new ActiveXObject("DBRModule.AtlDBR");var v=j._activeXInstance.Process(e.stringify(q),location.protocol+"//"+location.host);var t=e.parse(v);if(!t){return p(Error("The DBR init error."))}if("settings" in t){j._dbr=new j.Class();j._dbr._runtimeSettings=t.settings;j._defaultRuntimeSettingsStr=e.stringify(t.settings);if("outputSettings" in t){j._defaultTemplateStr=e.stringify(t.outputSettings)}n(j._dbr)}else{var r=t.description||"The DBR init error.";return p(Error(r))}}catch(s){return p(Error("The DBR .dll is missing or not accessible: "+(s.message||s)))}}}};if(l){if(!e.detect.dbrwasmScriptLoaded){if(!g()){p(Error(Dynamsoft.MSG.Err_BrowserNotSupportWasm));return}if(DSBarcodeReader&&DSBarcodeReader.BarcodeReader){e.detect.dbrwasmScriptLoaded=true;Dynamsoft.BarcodeReader=DSBarcodeReader.BarcodeReader;Dynamsoft.BarcodeReader.engineResourcePath=Dynamsoft.WebTwainEnv.ResourcesPath+"/addon/dbrjs/";Dynamsoft.BarcodeReader.productKeys=Dynamsoft.WebTwainEnv.ProductKey;o()}}else{o()}}else{o()}};var d=function(i){var j=e.html5.Funs,h;if(Dynamsoft.dcp.b64bit){b="dbrx64_"+Dynamsoft.BarcodeReaderAddon.Version+".dll"}else{b="dbr_"+Dynamsoft.BarcodeReaderAddon.Version+".dll"}if(e.product.bHTML5Edition&&!i._isMobileMode()){i._innerSend("GetAddOnVersion",j.makeParams("barcodereader",b),true,false,false)}h={BarcodeReader:{decode:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(i._errorString)}if(!e.isNumber(k)||k<0||k>=i.HowManyImagesInBuffer){e.Errors.IndexOutOfRange(i);return Promise.reject(i.ErrorString)}return Promise.resolve(k).then(function(m){var l;if(e.product.bHTML5Edition){l=i._ImgManager.convertClientIndexToServerId(m);if(l==-1){e.Errors.IndexOutOfRange(i);throw f.BarcodeReaderException(i._errorCode,i._errorString)}}else{l=m}return new Promise(function(o,n){f.dbrInitPromiseFun(function(r){if(r.bWasm){var p=r.getRuntimeSettings();p=p.then(function(u){if(u.expectedBarcodesCount==0){u.expectedBarcodesCount=512;return r.updateRuntimeSettings(u)}});if(i._isMobileMode()){p=p.then(function(){var u=i._ImgManager.convertServerIdToClientIndex(l);return i._ImgManager.getWebViewer().GetImageData(i._ImgManager.getUidByIndex(u))});p=p.then(function(u){return u.originalData})}else{p=p.then(function(){var u=i._ImgManager.convertServerIdToClientIndex(l);return i.GetImageURL(u,-1,-1)})}p=p.then(function(u){if(u instanceof Blob||u instanceof ArrayBuffer){return f._wasmInstance.decode(u)}return e.fetch(u,{mode:"cors",dataType:"blob"}).then(function(v){return f._wasmInstance.decode(v)})});p.then(function(u){u.imageid=i.objImageIndexManager.convertServerIdToGuid(l);o(u)},function(v){var u="decode failed.";if(v){u=[u," ",v.errorString," (",v.httpCode,")"].join("")}n(u)})}else{var s;if(!e.product.bHTML5Edition){s=l;var t=i.GetImagePartURL(s,-1,-1);return r._innerDecode(4001,t,"").then(function(u){u.imageid=i.IndexToImageID(s);o(u)},function(u){n(u)})}if(!r.bWasm){s=i._ImgManager.convertServerIdToClientIndex(l);var q=i.GetImagePartURL(s,-1,-1);return r._innerDecode(4000,q,"").then(function(u){u.imageid=i.IndexToImageID(s);o(u)},function(u){n(u)})}}},n)})})},resetRuntimeSettings:function(){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(i._errorString)}return new Promise(f.dbrInitPromiseFun).then(function(k){return k.resetRuntimeSettings()})},getRuntimeSettings:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(i._errorString)}if(e.isString(k)&&("speed"==k||"balance"==k||"coverage"==k||"default"==k)){return this.updateRuntimeSettings(k)}return new Promise(f.dbrInitPromiseFun).then(function(l){return l.getRuntimeSettings()})},updateRuntimeSettings:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(i._errorString)}return new Promise(f.dbrInitPromiseFun).then(function(l){return l.updateRuntimeSettings(k)})},initRuntimeSettingsWithString:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(i._errorString)}return new Promise(f.dbrInitPromiseFun).then(function(l){return l.initRuntimeSettingsWithString(k)})}}};if(e.product.bHTML5Edition){i.__addon=i.__addon||{};e.mix(i.__addon,h)}else{i.Addon=i.Addon||{};e.mix(i.Addon,h)}};if(e.DynamicLoadAddonFuns){e.DynamicLoadAddonFuns.push(d)}Dynamsoft.unloadQueue.push(function(){if(f._wasmInstance){f._wasmInstance.destroy();f._wasmInstance=false}})});

// Dynamsoft PDF Rasterizer Addon for DWT version: 16.1
/*! 20200716
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2020, Dynamsoft Corporation
* Author: Dynamsoft R&D Department
*
* Version: 16.1
*
* Module: addon/pdf
* final js: build\addon\dynamsoft.webtwain.addon.pdf.js
*/
/*;var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};*/Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};var EnumDWT_ConvertMode={CM_RENDERALL:1,CM_IMAGEONLY:2,CM_AUTO:3};var EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBig2:7};(function(c){var d=[c,Dynamsoft],b=0;for(;b<2;b++){var a=d[b];a.EnumDWT_ConvertMode=EnumDWT_ConvertMode;a.EnumDWT_PDFCompressionType=EnumDWT_PDFCompressionType}})(typeof window!=="undefined"?window:this);Dynamsoft.AddonReady(function(c,b){if(!c.product.bHTML5Edition){return}var a;var d=function(f){var g=c.html5.Funs,e;if(c.env.bMac){if(Dynamsoft.dcp.b64bit){a="libDynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dylib"}else{a="libDynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dylib"}}else{if(c.env.bLinux){a="libDynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".so"}else{if(Dynamsoft.dcp.b64bit){a="DynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}else{a="DynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}}}if(!f._isMobileMode()){f._innerSend("GetAddOnVersion",g.makeParams("pdf",a),true,false,false)}e={PDF:{IsModuleInstalled:function(){var i=f;i._resetErr();if(i._isMobileMode()){if(Dynamsoft.pdf){return Dynamsoft.pdf.IsModuleInstalled()}return false}var h=i._innerFun("GetAddOnVersion",g.makeParams("pdf",a));return(h!="")},IsModuleInstalledAsync:function(){var h=f;h._resetErr();if(h._isMobileMode()){if(Dynamsoft.pdf){return c.Promise.resolve(Dynamsoft.pdf.IsModuleInstalled())}return c.Promise.resolve(false)}return h._innerFunV2("GetAddOnVersion",g.makeParams("pdf",a)).then(function(i){return(i!="")})},ConvertToImage:function(k,i,p,j){var o=g.replaceLocalFilename(k);var h="ConvertPDFToImage";var l=function(m){g.hideMask(h);if(p){p()}return true},q=function(m){g.hideMask(h);if(j){j()}return false};var n=f;n._resetErr();if(n._isMobileMode()){return true}g.showMask(h);n._innerSend(h,g.makeParams(o,i),true,l,q);return true},SetPassword:function(h){var i=f;i._resetErr();if(i._isMobileMode()){i._pdfPassword=h;return true}return i._innerFun("SetPDFPassword",g.makeParams(h))},SetConvertMode:function(h){var i=f;return i._setConvertMode(h)},SetConvertModeAsync:function(h){var i=f;return i._setConvertModeAsync(h)},GetConvertMode:function(){var h=f;h._resetErr();return h._pdfConvertMode},SetResolution:function(h){var i=f;i._resetErr();if(i._isMobileMode()){i._pdfResolution=1*h;return true}return f._innerFun("SetPDFResolution",g.makeParams(h))},SetResolutionAsync:function(h){var i=f;i._resetErr();if(i._isMobileMode()){i._pdfResolution=1*h;return c.Promise.resolve(true)}return f._innerFunV2("SetPDFResolution",g.makeParams(h))},IsTextBasedPDF:function(l,j,i){var m=f;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("IsTextBasedPDF",i)}var k=g.replaceLocalFilename(l);var h=f._innerFun("IsTextBasedPDF",g.makeParams(k));if(m.ErrorCode==0){if(c.isFunction(j)){j(h)}}else{if(c.isFunction(i)){i(m.ErrorCode,m.ErrorString)}}return h},Write:{Setup:function(h){var j=h;if(!j){j={version:15}}if(!c.isNumber(j.version)){j.version=15}else{if(j.version>1&&j.version<2){j.version=parseInt(10*j.version)}}if(c.isNumber(j.compression)&&(j.compression==EnumDWT_PDFCompressionType.PDF_FAX3)){j.compression=EnumDWT_PDFCompressionType.PDF_FAX4}var k=f;k._resetErr();if(k._isMobileMode()){k._pdfWriteSetting=j;return true}var i=c.stringify(j);i=c.replaceAll(i,'"','\\"');return k._innerFun("SetPDFSettings",['["',i,'"]'].join(""))}}}};f.__addon=f.__addon||{};c.mix(f.__addon,e)};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(d)}});Dynamsoft.AddonReady(function(b,a){if(!b.product.bPluginEdition&&!b.product.bActiveXEdition){return}var c=function(h){var f,i,e;if(h.getSWebTwain()&&h.getSWebTwain().Addon){}else{return false}if(Dynamsoft.navInfo.bWin){var g=navigator.userAgent.toLowerCase(),d=!Dynamsoft.navInfo.isX64||(g.indexOf("wow64")>=0);if(d){e="DynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}else{e="DynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}}else{}i=h.getSWebTwain();f={PDF:{IsModuleInstalled:function(){var j=i.GetAddOnVersion("pdf",e);b.setErrorString(h);return(j!="")},IsModuleInstalledAsync:function(){var j=i.GetAddOnVersion("pdf",e);b.setErrorString(h);return b.Promise.resolve(j!="")},ConvertToImage:function(k,n,j,m){var l=i.ConvertPDFToImage(k,n);return b.wrapperRet(h,l,j,m)},SetPassword:function(j){var k=i.SetPDFPassword(j);return b.wrapperRet(h,k)},SetConvertMode:function(k){var l=k*1;if(isNaN(l)){b.Errors.ParameterCannotEmpty(h);return false}if(l==0){l=EnumDWT_ConvertMode.CM_IMAGEONLY}if(l==EnumDWT_ConvertMode.CM_RENDERALL){if(!b.License.checkProductKey(h,{PDFRasterizer:true},true)){return false}}var j=i.SetPDFConvertMode(l);return b.wrapperRet(h,j)},SetConvertModeAsync:function(j){return Promise.resolve(f.PDF.SetConvertMode(j))},GetConvertMode:function(){var j=i.GetPDFConvertMode();return b.wrapperRet(h,j)},SetResolution:function(k){var j=i.SetPDFResolution(k);return b.wrapperRet(h,j)},SetResolutionAsync:function(k){var j=i.SetPDFResolution(k);return b.Promise.resolve(b.wrapperRet(h,j))},IsTextBasedPDF:function(j){var k=i.IsTextBasedPDF(j);return b.wrapperRet(h,k)}}};h.Addon=h.Addon||{};b.mix(h.Addon,f)};if(b.DynamicLoadAddonFuns){b.DynamicLoadAddonFuns.push(c)}});

// Dynamsoft OCR Basic Addon for DWT version: 16.1

/*! 20190521
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2020, Dynamsoft Corporation
* Author: Dynamsoft R&D Department
*
* Version: 16.0
*
* Module: addon/ocr
* final js: build\addon\dynamsoft.webtwain.addon.OCR.js
*/
/*;var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};*/Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.OCRVerInName="10.0.0.0618";Dynamsoft.OCRLanguageData_eng="4113088";Dynamsoft.OCRLanguageData_ara="1432056";Dynamsoft.OCRLanguageData_chi_sim="2469156";Dynamsoft.OCRLanguageData_chi_tra="2366642";Dynamsoft.OCRLanguageData_hin="1122751";Dynamsoft.OCRLanguageData_urd="1398718";Dynamsoft.OCRLanguageData_spa="2294433";Dynamsoft.OCRLanguageData_fra="1130365";Dynamsoft.OCRLanguageData_msa="1747801";Dynamsoft.OCRLanguageData_ind="1122661";Dynamsoft.OCRLanguageData_rus="3861738";Dynamsoft.OCRLanguageData_ben="855841";Dynamsoft.OCRLanguageData_por="1982756";Dynamsoft.OCRLanguageData_pan="497721";Dynamsoft.OCRLanguageData_deu="1525436";Dynamsoft.OCRLanguageData_jpn="2471260";Dynamsoft.OCRLanguageData_fas="431500";Dynamsoft.OCRLanguageData_swa="2167651";Dynamsoft.OCRLanguageData_jav="2982741";Dynamsoft.OCRLanguageData_tel="2769654";Dynamsoft.OCRLanguageData_tur="4550554";Dynamsoft.OCRLanguageData_kor="1677415";Dynamsoft.OCRLanguageData_mar="2118233";Dynamsoft.OCRLanguageData_tam="3237963";Dynamsoft.OCRLanguageData_vie="531275";Dynamsoft.OCRLanguageData_ita="2701314";Dynamsoft.OCRLanguageData_tha="1072600";(function(a){function b(){var c=this;c._text="";c._fontName="";c._fontSize="";c._left=0;c._top=0;c._right=0;c._bottom=0}b.prototype.GetText=function(){var c=this;return c._text};b.prototype.GetFontName=function(){var c=this;return c._fontName};b.prototype.GetFontSize=function(){var c=this;return c._fontSize};b.prototype.GetWordRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};a.NewWordBasicResult=function(){return new b()}})(Dynamsoft.Lib);(function(a){function b(){var c=this;c._count=0;c._left=0;c._top=0;c._right=0;c._bottom=0;c._wordlist=[]}b.prototype.GetWordCount=function(){var c=this;return c._count};b.prototype.GetLineRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};b.prototype.GetWordContent=function(d){var f=this,c=f._wordlist.length;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetWordContent");return""}var e=Dynamsoft.Lib.NewWordBasicResult();e._text=f._wordlist[d].text;e._fontName=f._wordlist[d].fontname;e._fontSize=f._wordlist[d].fontsize;e._left=f._wordlist[d].rect[0];e._top=f._wordlist[d].rect[1];e._right=f._wordlist[d].rect[2];e._bottom=f._wordlist[d].rect[3];return e};a.NewLineBasicResult=function(){return new b()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._linelist=[]}a.prototype.GetLineCount=function(){var c=this;return c._count};a.prototype.GetLineContent=function(e){var f=this,d=f._linelist.length;if(f._errorCode<0){return""}if(e==null||e>=d||e<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetLineContent");return""}var c=Dynamsoft.Lib.NewLineBasicResult();c._count=f._linelist[e].words.length;c._left=f._linelist[e].rect[0];c._top=f._linelist[e].rect[1];c._right=f._linelist[e].rect[2];c._bottom=f._linelist[e].rect[3];c._wordlist=f._linelist[e].words;return c};b.NewPageBasicResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._pagelist=[]}a.prototype.GetPageCount=function(){var c=this;return c._count};a.prototype.GetPageContent=function(d){var f=this,c=f._pagelist.length;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageContent");return""}var e=Dynamsoft.Lib.NewPageBasicResult();e._count=f._pagelist[d].lines.length;e._linelist=f._pagelist[d].lines;return e};b.NewPageSetBasicResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(d){var c=this;c._errorCode=0;c._errorString="";c._resultlist=[];c._stwain=d}a.prototype.GetErrorCode=function(){var c=this;return c._errorCode};a.prototype.GetErrorString=function(){var c=this;return c._errorString};a.prototype.GetFormat=function(){var c=this;return c._resultlist[0].format};a.prototype.GetInput=function(){var e=this,d=e._resultlist[0].input;if(d){var c=Number(d);if(!isNaN(c)){return e._stwain._ImgManager.convertServerIdToClientIndex(c)}}return d};a.prototype.GetPageSetCount=function(){var c=this;return c._resultlist[0].pagesets.length};a.prototype.GetPageSetContent=function(e){var f=this,c=f._resultlist[0].pagesets.length;if(f._errorCode<0){return""}if(e==null||e>=c||e<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageSetContent");return""}var d=Dynamsoft.Lib.NewPageSetBasicResult();d._count=f._resultlist[0].pagesets[e].pages.length;d._pagelist=f._resultlist[0].pagesets[e].pages;return d};a.prototype.Get=function(){var c=this;return c._stwain._innerFun("GetOCRRestult")};a.prototype.Save=function(c){var e=this,d=b.html5.Funs.replaceLocalFilename(c);return e._stwain._innerFun("SaveOCRRestult",b.html5.Funs.makeParams(d))};b.NewOCRBasicResult=function(c){return new a(c)}})(Dynamsoft.Lib);var EnumDWT_OCRLanguage={OCRL_ENG:"eng",OCRL_ARA:"ara",OCRL_CHI_SIM:"chi_sim",OCRL_CHI_TRA:"chi_tra",OCRL_HIN:"hin",OCRL_URD:"urd",OCRL_SPA:"spa",OCRL_FRA:"fra",OCRL_MSA:"msa",OCRL_IND:"ind",OCRL_RUS:"rus",OCRL_BEN:"ben",OCRL_POR:"por",OCRL_PAN:"pan",OCRL_DEU:"deu",OCRL_JPN:"jpn",OCRL_FAS:"fas",OCRL_SWA:"swa",OCRL_JAV:"jav",OCRL_TEL:"tel",OCRL_TUR:"tur",OCRL_KOR:"kor",OCRL_MAR:"mar",OCRL_TAM:"tam",OCRL_VIE:"vie",OCRL_ITA:"ita",OCRL_THA:"tha"};var EnumDWT_OCRPageSetMode={OCRPSM_OSD_ONLY:0,PSM_AUTO_OSD:1,PSM_AUTO_ONLY:2,PSM_AUTO:3,PSM_SINGLE_COLUMN:4,PSM_SINGLE_BLOCK_VERT_TEXT:5,PSM_SINGLE_BLOCK:6,PSM_SINGLE_LINE:7,PSM_SINGLE_WORD:8,PSM_CIRCLE_WORD:9,PSM_SINGLE_CHAR:10};var EnumDWT_OCROutputFormat={OCROF_TEXT:0,OCROF_PDFPLAINTEXT:1,OCROF_PDFIMAGEOVERTEXT:2,OCROF_PDFPLAINTEXT_PDFX:3,OCROF_PDFIMAGEOVERTEXT_PDFX:4};(function(b){function a(){var c=this;c.UnicodeFontName="";c.UseDetectedFont=true;c.MinFontSizeforMoreAccurateResult=0;c.OCRLanguage=EnumDWT_OCRLanguage.OCRL_ENG;c.PageSetMode=EnumDWT_OCRPageSetMode.PSM_AUTO;c.OutputFormat=EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT}a.prototype.GetUnicodeFontName=function(){var c=this;return c.UnicodeFontName};a.prototype.SetUnicodeFontName=function(c){var d=this;d.UnicodeFontName=c;return true};a.prototype.GetUseDetectedFont=function(){var c=this;return c.UseDetectedFont};a.prototype.SetUseDetectedFont=function(c){var d=this;d.UseDetectedFont=c;return true};a.prototype.GetMinFontSizeforMoreAccurateResult=function(){var c=this;return c.MinFontSizeforMoreAccurateResult};a.prototype.SetMinFontSizeforMoreAccurateResult=function(c){var d=this;d.MinFontSizeforMoreAccurateResult=c;return true};a.prototype.GetOCRLanguage=function(){var c=this;return c.OCRLanguage};a.prototype.SetOCRLanguage=function(c){var d=this;d.OCRLanguage=c;return true};a.prototype.GetPageSetMode=function(){var c=this;return c.PageSetMode};a.prototype.SetPageSetMode=function(c){var d=this;d.PageSetMode=c;return true};a.prototype.GetOutputFormat=function(){var c=this;return c.OutputFormat};a.prototype.SetOutputFormat=function(c){var d=this;d.OutputFormat=c;return true};b.NewOptions=function(){return new a()}})(Dynamsoft.Lib);var EnumDWT_OCRDownloadType={OCRDT_Dll:0,OCRDT_LANGUAGE:1};Dynamsoft.AddonReady(function(c,b){if(!c.product.bHTML5Edition){return}var a;function e(g){var h=c.html5.Funs;if(c.env.bMac){a="DynamicOCR_"+Dynamsoft.OCRVerInName+".dylib"}else{if(c.env.bLinux){a="DynamicOCR_"+Dynamsoft.OCRVerInName+".so"}else{if(Dynamsoft.dcp.b64bit){a="DynamicOCRx64_"+Dynamsoft.OCRVerInName+".dll"}else{a="DynamicOCR_"+Dynamsoft.OCRVerInName+".dll"}}}if(!g._isMobileMode()){g._innerSend("GetAddOnVersion",h.makeParams("ocr",a),true,false,false)}g.__innerOCRBasicReadFunction=function(n,s,o,t,l,u,v,i,j,r,k){var q=this;if(!c.isFunction(r)){return q.__innerOCRSyncReadFunction(n,j)}else{return q.__innerOCRBasicAsyncReadFunction(n,s,o,t,l,u,v,i,j,r,k)}};g.__innerGetOCRBasicResultAsyncFunction=function(j){var i=Dynamsoft.Lib.NewOCRBasicResult(this);if(j){i._errorCode=j.exception;i._errorString=j.description;i._resultlist=j.result}return i};g.__innerOCRBasicAsyncReadFunction=function(n,t,o,u,l,v,x,i,j,s,k){var r=this;var q=function(p){if(p.exception==0){if(c.isFunction(s)){if(t!=-1){var m=r.objImageIndexManager.convertServerIdToGuid(t);if(u==1){s(m,l,v,x,i,r.__innerGetOCRBasicResultAsyncFunction(p))}else{s(m,r.__innerGetOCRBasicResultAsyncFunction(p))}}else{if(o!=""){s(o,r.__innerGetOCRBasicResultAsyncFunction(p))}else{s(r.__innerGetOCRBasicResultAsyncFunction(p))}}}}else{if(c.isFunction(k)){k(p.exception,p.description)}}h.hideMask(n)},w=function(m){h.hideMask(n)};h.showMask(n);r._innerSend(n,j,true,q,w);return true};g.__innerOCRSyncReadFunction=function(j,l){var n=this,k,i;k=n._innerFunRaw(j,l,false,false);i=c.NewOCRBasicResult();i._errorCode=n._errorCode;i._errorString=n._errorString;if(k&&c.isArray(k)){i._resultlist=k;i._Count=k.length}return i};g.__IsOCRBasicModuleInstalled=function(){var k=g;var i=k._innerFun("GetAddOnVersion",h.makeParams("ocr",a));var j=i.split("|");if(j[0]!=""){return true}else{return false}};g.__innerBasicDownload=function(q,s,k,u,l){var o=g,r;c.cancelFrome=2;q=q.toString();var n=function(){if(c.isFunction(u)){u()}return true},v=function(){if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}return false};if(!c.License.checkProductKey(o,{Core:true})){return v()}if(!c.License.checkProductKey(o,{OCR:true},true)){return v()}if(s!=EnumDWT_OCRDownloadType.OCRDT_Dll){o._innerFun("SetOCRLanguage",h.makeParams(k))}var i=o._innerFun("GetAddOnVersion",h.makeParams("ocr",a));var j=i.split("|");if(s==EnumDWT_OCRDownloadType.OCRDT_Dll){if(j[0]!=""){n();return true}}else{if((k==EnumDWT_OCRLanguage.OCRL_ENG&&j[1]==Dynamsoft.OCRLanguageData_eng)||(k==EnumDWT_OCRLanguage.OCRL_ARA&&j[1]==Dynamsoft.OCRLanguageData_ara)||(k==EnumDWT_OCRLanguage.OCRL_CHI_TRA&&j[1]==Dynamsoft.OCRLanguageData_chi_tra)||(k==EnumDWT_OCRLanguage.OCRL_CHI_SIM&&j[1]==Dynamsoft.OCRLanguageData_chi_sim)||(k==EnumDWT_OCRLanguage.OCRL_HIN&&j[1]==Dynamsoft.OCRLanguageData_hin)||(k==EnumDWT_OCRLanguage.OCRL_URD&&j[1]==Dynamsoft.OCRLanguageData_urd)||(k==EnumDWT_OCRLanguage.OCRL_SPA&&j[1]==Dynamsoft.OCRLanguageData_spa)||(k==EnumDWT_OCRLanguage.OCRL_FRA&&j[1]==Dynamsoft.OCRLanguageData_fra)||(k==EnumDWT_OCRLanguage.OCRL_MSA&&j[1]==Dynamsoft.OCRLanguageData_msa)||(k==EnumDWT_OCRLanguage.OCRL_IND&&j[1]==Dynamsoft.OCRLanguageData_ind)||(k==EnumDWT_OCRLanguage.OCRL_RUS&&j[1]==Dynamsoft.OCRLanguageData_rus)||(k==EnumDWT_OCRLanguage.OCRL_BEN&&j[1]==Dynamsoft.OCRLanguageData_ben)||(k==EnumDWT_OCRLanguage.OCRL_POR&&j[1]==Dynamsoft.OCRLanguageData_por)||(k==EnumDWT_OCRLanguage.OCRL_PAN&&j[1]==Dynamsoft.OCRLanguageData_pan)||(k==EnumDWT_OCRLanguage.OCRL_DEU&&j[1]==Dynamsoft.OCRLanguageData_deu)||(k==EnumDWT_OCRLanguage.OCRL_JPN&&j[1]==Dynamsoft.OCRLanguageData_jpn)||(k==EnumDWT_OCRLanguage.OCRL_FAS&&j[1]==Dynamsoft.OCRLanguageData_fas)||(k==EnumDWT_OCRLanguage.OCRL_SWA&&j[1]==Dynamsoft.OCRLanguageData_swa)||(k==EnumDWT_OCRLanguage.OCRL_JAV&&j[1]==Dynamsoft.OCRLanguageData_jav)||(k==EnumDWT_OCRLanguage.OCRL_TEL&&j[1]==Dynamsoft.OCRLanguageData_tel)||(k==EnumDWT_OCRLanguage.OCRL_TUR&&j[1]==Dynamsoft.OCRLanguageData_tur)||(k==EnumDWT_OCRLanguage.OCRL_KOR&&j[1]==Dynamsoft.OCRLanguageData_kor)||(k==EnumDWT_OCRLanguage.OCRL_MAR&&j[1]==Dynamsoft.OCRLanguageData_mar)||(k==EnumDWT_OCRLanguage.OCRL_TAM&&j[1]==Dynamsoft.OCRLanguageData_tam)||(k==EnumDWT_OCRLanguage.OCRL_VIE&&j[1]==Dynamsoft.OCRLanguageData_vie)||(k==EnumDWT_OCRLanguage.OCRL_ITA&&j[1]==Dynamsoft.OCRLanguageData_ita)||(k==EnumDWT_OCRLanguage.OCRL_THA&&j[1]==Dynamsoft.OCRLanguageData_tha)){n();return true}}if(!q||q==""){c.Errors.OCR_InvalidRemoteFilename(o);v();return false}if(h.isServerInvalid(o)){v();return false}r="get";c.showProgress(o,"Download",true);var t=function(w){var x=(w.total===0)?100:Math.round(w.loaded*100/w.total),y=[w.loaded," / ",w.total].join("");o._OnPercentDone([0,x,"","http"])},m=true;if(s==EnumDWT_OCRDownloadType.OCRDT_Dll){o._OnPercentDone([0,-1,"Downloading OCR Module...","http"])}else{o._OnPercentDone([0,-1,"Downloading OCR Language Data...","http"])}if(!c.isFunction(u)){m=false}h.loadHttpBlob(o,r,q,m,function(p){o._OnPercentDone([0,-1,"Loading..."]);var w=100;if(s==EnumDWT_OCRDownloadType.OCRDT_LANGUAGE){w=101}o.__LoadImageFromBytes(p,w,"",m,n,v)},function(){c.closeProgress("Download");v()},t)}}var f=function(j){var k=[],h,g,i;if(j._ImgManager.count()<=0){return k}g=j._ImgManager.getCurrentImageIndex();h=j._ImgManager.convertClientIndexToServerId(g);i=j._ImgManager.getSelectedClientIndexArray();if(c.isArray(i)){c.each(i,function(l){var m=j._ImgManager.convertClientIndexToServerId(l);k.push(m)})}return k},d=function(i){var j=c.html5.Funs,g;var h=c.NewOptions();e(i);g={OCR:{SetUnicodeFontName:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetUnicodeFontName")}return h.SetUnicodeFontName(k)},GetUnicodeFontName:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetUnicodeFontName")}return h.GetUnicodeFontName()},SetIfUseDetectedFont:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetIfUseDetectedFont")}return h.SetUseDetectedFont(k)},GetIfUseDetectedFont:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetIfUseDetectedFont")}return h.GetUseDetectedFont()},SetMinFontSizeforMoreAccurateResult:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetMinFontSizeforMoreAccurateResult")}return h.SetMinFontSizeforMoreAccurateResult(k)},GetMinFontSizeforMoreAccurateResult:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetMinFontSizeforMoreAccurateResult")}return h.GetMinFontSizeforMoreAccurateResult()},SetLanguage:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetLanguage")}return h.SetOCRLanguage(k)},IsModuleInstalled:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.IsModuleInstalled")}return k.__IsOCRBasicModuleInstalled()},SetPageSetMode:function(l){var m=i;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.OCR.SetPageSetMode")}var k=l*1;if(k==EnumDWT_OCRPageSetMode.OCRPSM_OSD_ONLY||k==EnumDWT_OCRPageSetMode.PSM_AUTO_OSD||k==EnumDWT_OCRPageSetMode.PSM_AUTO_ONLY||k==EnumDWT_OCRPageSetMode.PSM_AUTO||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_COLUMN||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK_VERT_TEXT||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_LINE||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_WORD||k==EnumDWT_OCRPageSetMode.PSM_CIRCLE_WORD||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR){return h.SetPageSetMode(k)}Dynamsoft.Lib.Errors.OCR_InvalidPageSetMode(m);return false},SetOutputFormat:function(l){var m=i;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.OCR.SetOutputFormat")}var k=l*1;if(k==EnumDWT_OCROutputFormat.OCROF_TEXT||k==EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT||k==EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT||k==EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT_PDFX||k==EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX){return h.SetOutputFormat(k)}Dynamsoft.Lib.Errors.OCR_InvalidOutputFormat(m);return false},Recognize:function(n,k,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.Recognize")}if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}var l=o._ImgManager.convertClientIndexToServerId(n);return o.__innerOCRBasicReadFunction("OCRRecognize",l,"",0,0,0,0,0,j.makeParams(0,l,"",0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),k,m)},RecognizeRect:function(s,l,p,r,k,q,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeRect")}if((!l&&l!=0)||(!p&&p!=0)||(!r&&r!=0)||(!k&&k!=0)){var t=Dynamsoft.Lib.NewOCRBasicResult(o);Dynamsoft.Lib.Errors.OCR_InvalidLeftOrTopOrRightOrBottom(t,"RecognizeRect");m(t.GetErrorCode(),t.GetErrorString());return}if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}var n=o._ImgManager.convertClientIndexToServerId(s);return o.__innerOCRBasicReadFunction("OCRRecognize",n,"",1,l,p,r,k,j.makeParams(0,n,"",l,p,r,k,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),q,m)},RecognizeFile:function(l,k,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeFile")}var n=j.replaceLocalFilename(l);if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}return o.__innerOCRBasicReadFunction("OCRRecognize",-1,n,0,0,0,0,0,j.makeParams(1,-1,n,0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),k,m)},RecognizeSelectedImages:function(k,n){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeSelectedImages")}var l;if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(n)){n(o._errorCode,o._errorString)}return false}var m=f(o);l=o.__innerOCRBasicReadFunction("OCRRecognize",-1,"",0,0,0,0,0,j.makeParams(2,-1,"",0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),m.join(",")),k,n);return l},Download:function(m,k,l){var n=i;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("Addon.OCR.Download")}return n.__innerBasicDownload(m,EnumDWT_OCRDownloadType.OCRDT_Dll,h.GetOCRLanguage(),k,l)},DownloadLangData:function(m,k,l){var n=i;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("Addon.OCR.DownloadLangData")}return n.__innerBasicDownload(m,EnumDWT_OCRDownloadType.OCRDT_LANGUAGE,h.GetOCRLanguage(),k,l)}}};i.__addon=i.__addon||{};c.mix(i.__addon,g)};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(d)}});

// Dynamsoft OCR Pro Addon for DWT version: 16.1

/** dynamsoft.webtwain.addon.ocrpro.js
 * --Custom Changes--
 * [added] added the 7 Enums to Dynamsoft
 */
;Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.ProOCRVerInName="1.2.0.0806";(function(b){function a(){var c=this;c._text="";c._left=0;c._top=0;c._right=0;c._bottom=0}a.prototype.GetText=function(){var c=this;return c._text};a.prototype.GetLetterRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};b.NewLetterResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._letterlist=[];c._zoneCount=0;c._zoneWords=[]}a.prototype.GetLettersCount=function(){var c=this;return c._count};a.prototype.GetZoneCount=function(){var c=this;return c._zoneCount};a.prototype.GetLetterContent=function(d){var f=this,c=f._count;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetLetterContent");return""}var e=Dynamsoft.Lib.NewLetterResult();e._text=f._letterlist[d].letter;e._left=f._letterlist[d].boundary[0];e._top=f._letterlist[d].boundary[1];e._right=f._letterlist[d].boundary[2];e._bottom=f._letterlist[d].boundary[3];return e};a.prototype.GetZoneContent=function(d){var e=this,c=e._zoneCount;if(e._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(e,"GetZoneContent");return""}return e._zoneWords[d]};b.NewPageResult=function(){return new a()}})(Dynamsoft.Lib);(function(a){function b(){var c=this;c._input=0;c._message="";c._page=-1}b.prototype.GetInput=function(){var c=this;return c._input};b.prototype.GetMessage=function(){var c=this;return c._message};b.prototype.GetPage=function(){var c=this;return c._page};a.NewErrorInfo=function(){return new b()}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._errorCode=0;d._errorString="";d._errorlist=[];d._request="";d._ocrTotalCount=0;d._alreadyOCRCount=0;d._resultlist=[];d._resultZoneDetail=[];d._stwain=c}b.prototype.GetErrorCode=function(){var c=this;return c._errorCode};b.prototype.GetErrorString=function(){var c=this;return c._errorString};b.prototype.GetInput=function(){var e=this;if(e._request&&e._request.input){var d=e._request.input;if(d){var c=Number(d);if(!isNaN(c)){return e._stwain._ImgManager.convertServerIdToClientIndex(c)}}return d}else{return""}};b.prototype.GetErrorDetailList=function(){var g=this,c=0;if(g._errorlist){c=g._errorlist.length}var e=[];for(var d=0;d<c;d++){var f=Dynamsoft.Lib.NewErrorInfo();f._input=g._errorlist[d].input;f._message=g._errorlist[d].message;f._page=g._errorlist[d].page;e.push(f)}return e};b.prototype.GetOCRTotalCount=function(){var c=this;if(c._ocrTotalCount){return c._ocrTotalCount}else{return 0}};b.prototype.GetAlreadyOCRCount=function(){var c=this;if(c._alreadyOCRCount){return c._alreadyOCRCount}else{return 0}};b.prototype.GetPageCount=function(){var c=this;if(c._resultlist&&c._resultlist.length){return c._resultlist.length}else{return 0}};b.prototype.GetPageContent=function(d){var f=this,c=0;if(f._resultlist){c=f._resultlist.length}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageContent");return""}var e=Dynamsoft.Lib.NewPageResult();if(f._resultlist){e._count=f._resultlist[d].length;e._letterlist=f._resultlist[d]}else{e._count=0}if(f._resultZoneDetail){e._zoneCount=f._resultZoneDetail[d].length;e._zoneWords=f._resultZoneDetail[d]}else{e._zoneCount=0}return e};b.prototype.Get=function(){var c=this;return c._stwain._innerFun("GetOCRRestult")};b.prototype.Save=function(c){var e=this,d=a.html5.Funs.replaceLocalFilename(c);return e._stwain._innerFun("SaveOCRRestult",a.html5.Funs.makeParams(d))};a.NewOCRProResult=function(c){return new b(c)}})(Dynamsoft.Lib);var EnumDWT_OCRProRecognitionModule={OCRPM_AUTO:"AUTO",OCRPM_MOSTACCURATE:"MOSTACCURATE",OCRPM_BALANCED:"BALANCED",OCRPM_FASTEST:"FASTEST"};var EnumDWT_OCRProOutputFormat={OCRPFT_TXTS:"TXTS",OCRPFT_TXTCSV:"TXTCSV",OCRPFT_TXTF:"TXTF",OCRPFT_XML:"XML",OCRPFT_IOTPDF:"IOTPDF",OCRPFT_IOTPDF_MRC:"IOTPDF_MRC"};var EnumDWT_OCRProPDFVersion={OCRPPDFV_0:"1.0",OCRPPDFV_1:"1.1",OCRPPDFV_2:"1.2",OCRPPDFV_3:"1.3",OCRPPDFV_4:"1.4",OCRPPDFV_5:"1.5",OCRPPDFV_6:"1.6",OCRPPDFV_7:"1.7"};var EnumDWT_OCRProPDFAVersion={OCRPPDFAV_1A:"pdf/a-1a",OCRPPDFAV_1B:"pdf/a-1b",OCRPPDFAV_2A:"pdf/a-2a",OCRPPDFAV_2B:"pdf/a-2b",OCRPPDFAV_2U:"pdf/a-2u",OCRPPDFAV_3A:"pdf/a-3a",OCRPPDFAV_3B:"pdf/a-3b",OCRPPDFAV_3U:"pdf/a-3u"};var EnumDWT_OCRProType={OCRDT_File:0,OCRDT_Index:1};var EnumDWT_OCRFindTextFlags={OCRFT_WHOLEWORD:1,OCRFT_MATCHCASE:2,OCRFT_FUZZYMATCH:4};var EnumDWT_OCRFindTextAction={OCRFT_HIGHLIGHT:0,OCRFT_STRIKEOUT:1,OCRFT_MARKFORREDACT:2};Dynamsoft.EnumDWT_OCRProRecognitionModule=EnumDWT_OCRProRecognitionModule;Dynamsoft.EnumDWT_OCRProOutputFormat=EnumDWT_OCRProOutputFormat;Dynamsoft.EnumDWT_OCRProPDFVersion=EnumDWT_OCRProPDFVersion;Dynamsoft.EnumDWT_OCRProPDFAVersion=EnumDWT_OCRProPDFAVersion;Dynamsoft.EnumDWT_OCRProType=EnumDWT_OCRProType;Dynamsoft.EnumDWT_OCRFindTextFlags=EnumDWT_OCRFindTextFlags;Dynamsoft.EnumDWT_OCRFindTextAction=EnumDWT_OCRFindTextAction;(function(a){function b(){var c=this;c.FindText="";c.FindTextFlags=EnumDWT_OCRFindTextFlags.OCRFT_WHOLEWORD;c.FindTextAction=EnumDWT_OCRFindTextAction.OCRFT_MARKFORREDACT}a.NewRedaction=function(){return new b()}})(Dynamsoft.Lib);Dynamsoft.WebTwain={Addon:{OCRPro:{}}};(function(a){function b(){var c=this;c.RecognitionModule="";c.Languages="eng";c.OutputFormat="";c.PDFVersion="";c.PDFAVersion="";c.LicenseChecker="";c.Redaction=Dynamsoft.Lib.NewRedaction()}a.NewSettings=function(){return new b()}})(Dynamsoft.WebTwain.Addon.OCRPro);(function(){function a(f,e,c,b){var d=this;d.left=f;d.top=e;d.right=c;d.bottom=b}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRZone=function(e,d,c,b){return new a(e,d,c,b)}})();Dynamsoft.AddonReady(function(m,h){if(!m.product.bHTML5Edition){return}var n=1000,q=function(){return n++};function o(x){var y=m.html5.Funs;x.__innerGetOCRProResultAsyncFunction=function(A){var z=Dynamsoft.Lib.NewOCRProResult(this);if(A){z._errorCode=A.code;z._errorString=A.message;z._request=A.request;z._errorlist=A.errorList;z._ocrTotalCount=A.ocrTotalCount;z._alreadyOCRCount=A.alreadyOCRCount;z._resultlist=A.resultDetail;z._resultZoneDetail=A.resultZoneDetail}return z};x.__innerIsOCRTrial=function(z,A){var C=this,B=function(){var E=false;if(C.__licenseInfo.Detail){for(var D=0;D<C.__licenseInfo.Detail.length;D++){if(C.__licenseInfo.Detail[D].EnumLicenseType=="10"){if(C.__licenseInfo.Detail[D].Trial=="TRUE"){E=true}}}}z(E)};if(C.__licenseInfo&&C.__licenseInfo.Detail){B()}else{C.GetLicenseInfo(B,A)}};x.__innerOCRReadFunction=function(C,H,D,G,z,A,F,B){var E=this;return E.__innerOCRAsyncReadFunction(C,H,D,G,z,A,F,B)};x.__innerOCRAsyncReadFunction=function(C,J,D,H,z,A,G,B){var F=this;var E=function(K){if(K.code==0){if(m.isFunction(G)){if(J!=-1){if(H==1){G(J,z,F.__innerGetOCRProResultAsyncFunction(K))}else{G(J,F.__innerGetOCRProResultAsyncFunction(K))}}else{if(D!=""){G(D,F.__innerGetOCRProResultAsyncFunction(K))}else{G(F.__innerGetOCRProResultAsyncFunction(K))}}}}else{if(m.isFunction(B)){B(K.code,K.message,F.__innerGetOCRProResultAsyncFunction(K))}}y.hideMask(C)},I=function(K){y.hideMask(C)};y.showMask(C);F._innerSend(C,A,true,E,I);return true};x.__innerGetRequestJson=function(F,H,z,J,A){var E=x,B;var D="[{";D+='"id":"'+x.clientId+'",';D+='"method":"OCRProRecognize",';D+='"dllName":"'+A+'",';D+='"productkey":"'+Dynamsoft.WebTwainEnv.ProductKey+'",';if(F==EnumDWT_OCRProType.OCRDT_File){D+='"inputType":"file",'}else{D+='"inputType":"index",'}D+='"input":[';for(B=0;B<H.length;B++){if(F==EnumDWT_OCRProType.OCRDT_File){D+='"'+H[B]+'"'}else{D+=H[B]}if(B+1<H.length){D+="|"}}D+="],";D+='"settings":{';D+='"recognitionMethod": "Page"';if(z){if(z.RecognitionModule&&z.RecognitionModule.length>0){D+=',"recognitionModule":"'+z.RecognitionModule+'"'}if(z.Languages&&z.Languages.length>0){D+=',"languages":"'+z.Languages+'"'}if(z.OutputFormat&&z.OutputFormat.length>0){D+=',"outputFormat":"'+z.OutputFormat+'"'}if(z.PDFVersion&&z.PDFVersion.length>0){D+=',"pdfVersion":"'+z.PDFVersion+'"'}if(z.PDFAVersion&&z.PDFAVersion.length>0){D+=',"pdfAVersion":"'+z.PDFAVersion+'"'}if(z.Redaction&&z.Redaction.FindText&&z.Redaction.FindText.length>0){var I=parseInt(z.Redaction.FindTextFlags),G=parseInt(z.Redaction.FindTextAction);if(!isNaN(I)&&!isNaN(G)){D+=',"redaction":{';var C=z.Redaction.FindText;C=C.replace(/\"/g,'\\"');D+='"findText":"'+C+'"';D+=',"findTextFlags":'+I;D+=',"findTextAction":'+G;D+="}"}}}D+="},";D+='"zones":[';for(B=0;B<J.length;B++){D+="["+J[B].left+","+J[B].top+","+J[B].right+","+J[B].bottom+"]";if(B+1<J.length){D+=","}}D+="],";D+='"outputFile":""';D+="}]";return D};x.__LoadImageFromBytesForDownloadInner=function(D,J,N,I,K,A,G,L,C){var H=x;var z,B,F;if(D>=I){z=A*I;F=J.slice(z,K)}else{z=D*A;B=(D+1)*A;F=J.slice(z,B)}var M=function(){if(Dynamsoft.Lib.isFunction(C)){C()}};var E=function(){if(D>=I){if(Dynamsoft.Lib.isFunction(L)){L()}return}D=D+1;H.__LoadImageFromBytesForDownloadInner(D,J,N,I,K,A,G,L,C)};H.__LoadImageFromBytes(F,N,"",G,E,M,z,K)};x.__LoadImageFromBytesForDownload=function(G,A,F,C,B,I){var E=x;var z=2*1000*1000;var H=G.size||G.length;var D=parseInt(H/z);var J=H%z;if(J==0){D=D-1}E.__LoadImageFromBytesForDownloadInner(0,G,A,D,H,z,C,B,I)}}var e=function(A){var B=[],y,x,z;if(A._ImgManager.count()<=0){return B}x=A._ImgManager.getCurrentImageIndex();y=A._ImgManager.convertClientIndexToServerId(x);z=A._ImgManager.getSelectedClientIndexArray();if(m.isArray(z)){m.each(z,function(C){var D=A._ImgManager.convertClientIndexToServerId(C);B.push(D)})}return B},g=function(z){var A=m.html5.Funs,y,x;if(m.env.bMac){x="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".dylib"}else{if(m.env.bLinux){x="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".so"}else{if(Dynamsoft.dcp.b64bit){x="DynamicOCRProx64_"+Dynamsoft.ProOCRVerInName+".dll"}else{x="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".dll"}}}o(z);y={OCRPro:{Settings:false,Recognize:function(M,J,C){var I=[],G,N,K,H;var F=z;F._resetErr();if(F._isMobileMode()){return F._mobileNotSupport("Addon.OCRPro.Recognize")}G=parseInt(M);var E=z._ImgManager.convertClientIndexToServerId(G);if(isNaN(G)||E==-1){if(m.isFunction(C)){N=Dynamsoft.Lib.NewOCRProResult(z);N._errorCode=-2201;N._errorString="Invalid parameter type";H=[];K=Dynamsoft.Lib.NewErrorInfo();K.input=M;K.message=N._errorString;K.page=0;H.push(K);N._errorlist=H;C(N._errorCode,N._errorString,N)}return false}if(!m.License.checkProductKey(z,{OCRPro:true},true)){if(m.isFunction(C)){N=Dynamsoft.Lib.NewOCRProResult(z);N._errorCode=z._errorCode;N._errorString=z._errorString;H=[];K=Dynamsoft.Lib.NewErrorInfo();K.input=M;K.message=N._errorString;K.page=0;H.push(K);N._errorlist=H;C(N._errorCode,N._errorString,N)}return false}I.push(E);var L=[],B=this.Settings;var D=z.__innerGetRequestJson(EnumDWT_OCRProType.OCRDT_Index,I,B,L,x);z.__innerIsOCRTrial(function(O){if(O){return z.__innerOCRReadFunction("OCRProRecognize",M,"",0,L,D,J,C)}else{return v(B.LicenseChecker,z,"OCRProRecognize",M,"",0,L,D,J,C)}},C)},RecognizeRect:function(W,O,Q,F){var M=[],J=parseInt(W),L,E,K;var R=z;R._resetErr();if(R._isMobileMode()){return R._mobileNotSupport("Addon.OCRPro.RecognizeRect")}var P=z._ImgManager.convertClientIndexToServerId(J),S=z._ImgManager.GetImageWidth(J),I=z.GetImageHeight(J);if(isNaN(J)||P==-1){if(m.isFunction(F)){L=Dynamsoft.Lib.NewOCRProResult(z);L._errorCode=-2201;L._errorString="Invalid parameter type.";K=[];E=Dynamsoft.Lib.NewErrorInfo();E.input=W;E.message=L._errorString;E.page=0;K.push(E);L._errorlist=K;F(L._errorCode,L._errorString,L)}return false}if(!m.License.checkProductKey(z,{OCRPro:true},true)){if(m.isFunction(F)){L=Dynamsoft.Lib.NewOCRProResult(z);L._errorCode=z._errorCode;L._errorString=z._errorString;K=[];E=Dynamsoft.Lib.NewErrorInfo();E.input=W;E.message=L._errorString;E.page=0;K.push(E);L._errorlist=K;F(L._errorCode,L._errorString,L)}return false}if(S>0&&I>0){var U,D,T,V,H,C;for(var N=0;N<O.length;N++){U=O[N];D=U.left;T=U.top;V=U.right;H=U.bottom;if(D<0){D=0}if(T<0){T=0}if(V<0){V=0}if(H<0){H=0}if(D>V){C=D;D=V;V=C}if(T>H){C=T;T=H;H=C}if(V>S){V=S}if(H>I){H=I}U.left=D;U.top=T;U.right=V;U.bottom=H}}M.push(P);var B=this.Settings;var G=z.__innerGetRequestJson(EnumDWT_OCRProType.OCRDT_Index,M,B,O,x);z.__innerIsOCRTrial(function(X){if(X){return z.__innerOCRReadFunction("OCRProRecognize",W,"",1,O,G,Q,F)}else{return v(B.LicenseChecker,z,"OCRProRecognize",W,"",1,O,G,Q,F)}},F)},RecognizeFile:function(C,L,F){var H=z;H._resetErr();if(H._isMobileMode()){return H._mobileNotSupport("Addon.OCRPro.RecognizeFile")}var O,M,J;if(C.length==0){if(m.isFunction(F)){O=Dynamsoft.Lib.NewOCRProResult(z);O._errorCode=-2201;O._errorString="File name cannot be empty.";J=[];M=Dynamsoft.Lib.NewErrorInfo();M.input=C;M.message=O._errorString;M.page=0;J.push(M);O._errorlist=J;F(O._errorCode,O._errorString,O)}return false}if(!m.License.checkProductKey(z,{OCRPro:true},true)){if(m.isFunction(F)){O=Dynamsoft.Lib.NewOCRProResult(z);O._errorCode=z._errorCode;O._errorString=z._errorString;J=[];M=Dynamsoft.Lib.NewErrorInfo();M.input=C;M.message=O._errorString;M.page=0;J.push(M);O._errorlist=J;F(O._errorCode,O._errorString,O)}return false}var I=A.replaceLocalFilename(C);var B=[];if(I.indexOf("|")>0){B=I.split("|")}else{if(I.indexOf(";")>0){B=I.split(";")}else{if(I.indexOf(",")>0){B=I.split(",")}}}var K=[];if(B.length>0){for(var E=0;E<B.length;E++){K.push(B[E])}}else{K.push(I)}var N=[],D=this.Settings;var G=z.__innerGetRequestJson(EnumDWT_OCRProType.OCRDT_File,K,D,N,x);z.__innerIsOCRTrial(function(P){if(P){return z.__innerOCRReadFunction("OCRProRecognize",-1,C,0,N,G,L,F)}else{return v(D.LicenseChecker,z,"OCRProRecognize",-1,C,0,N,G,L,F)}},F)},RecognizeSelectedImages:function(I,C){var F,G,J;var E=z;E._resetErr();if(E._isMobileMode()){return E._mobileNotSupport("Addon.OCRPro.RecognizeSelectedImages")}if(!m.License.checkProductKey(z,{OCRPro:true},true)){if(m.isFunction(C)){var L=Dynamsoft.Lib.NewOCRProResult(z);L._errorCode=z._errorCode;L._errorString=z._errorString;G=[];J=Dynamsoft.Lib.NewErrorInfo();J.input="";J.message=L._errorString;J.page=0;G.push(J);L._errorlist=G;C(L._errorCode,L._errorString,L)}return false}var K=[],B=this.Settings,H=e(z),D=z.__innerGetRequestJson(EnumDWT_OCRProType.OCRDT_Index,H,B,K,x);z.__innerIsOCRTrial(function(M){if(M){F=z.__innerOCRReadFunction("OCRProRecognize",-1,"",0,K,D,I,C)}else{F=v(B.LicenseChecker,z,"OCRProRecognize",-1,"",0,K,D,I,C)}},C);return F},IsModuleInstalled:function(){var C=z;C._resetErr();if(C._isMobileMode()){return C._mobileNotSupport("Addon.OCRPro.IsModuleInstalled")}var B=C._innerFun("GetAddOnVersion",A.makeParams("proocr",x));return(B!="")},Download:function(F,I,B){var E=z,G;E._resetErr();if(E._isMobileMode()){return E._mobileNotSupport("Addon.OCRPro.Download")}var D=function(){if(m.isFunction(I)){I()}return true},J=function(){if(m.isFunction(B)){B(E.ErrorCode,E.ErrorString)}return false};if(!m.License.checkProductKey(E,{Core:true})){return J()}if(!m.License.checkProductKey(E,{OCRPro:true},true)){return J()}if(this.IsModuleInstalled()){D();return true}if(!F||F==""||!m.isString(F)){m.Errors.OCR_InvalidRemoteFilename(E);J();return false}if(A.isServerInvalid(E)){J();return false}G="get";m.cancelFrome=2;m.showProgress(E,"Download",true);var H=function(K){var L=(K.total===0)?100:Math.round(K.loaded*100/K.total),M=[K.loaded," / ",K.total].join("");E._OnPercentDone([0,L,"","http"])},C=true;E._OnPercentDone([0,-1,"Downloading OCR Resources...","http"]);if(!m.isFunction(I)){C=false}return A.loadHttpBlob(E,G,F,C,function(K){E._OnPercentDone([0,-1,"Loading..."]);var L=102;E.__LoadImageFromBytesForDownload(K,L,"",C,D,J)},function(){m.closeProgress("Download");J()},H)}}};z.__addon=z.__addon||{};m.mix(z.__addon,y)};if(m.DynamicLoadAddonFuns){m.DynamicLoadAddonFuns.push(g)}function p(D,G,y,H,A,F,x,B,E,z){var C=this;C.STWAIN=G;C.AjaxFunctionUrl=D;C.FunctionName=y;C.ImageIndex=H;C.FileNames=A;C.Type=F;C.AryZone=x;C.JsonString=B;C.OnSuccess=E;C.OnFailure=z}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRReadPara=function(C,F,y,G,A,E,x,B,D,z){return new p(C,F,y,G,A,E,x,B,D,z)};function r(B,A){var C="";var D=B.responseText;if(D.length==0){var z=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError();Dynamsoft.Lib.Errors.OCR_LicenseCheckerError(z,A.AjaxFunctionUrl);D=z.responseText}C=f(D);var y=C.split(";");if(y.length==1){A.OnFailure(-1,D,Dynamsoft.Lib.NewOCRProResult())}else{if(y[0]=="true"){var x=function(F,E,G){if(Dynamsoft.Lib.isUndefined(G)){if(Dynamsoft.Lib.isUndefined(E)){A.OnSuccess(F);w(A.AjaxFunctionUrl,F.GetPageCount())}else{A.OnSuccess(F,E);w(A.AjaxFunctionUrl,E.GetPageCount())}}else{A.OnSuccess(F,E,G);w(A.AjaxFunctionUrl,G.GetPageCount())}};A.STWAIN.__innerOCRReadFunction(A.FunctionName,A.ImageIndex,A.FileNames,A.Type,A.AryZone,A.JsonString,x,A.OnFailure)}else{A.OnFailure(y[1],y[2],Dynamsoft.Lib.NewOCRProResult())}}}function v(F,I,y,J,C,H,x,D,G,z){var A=F;var E="DTW_AjaxMethod=CheckLicense&Productkey="+j(Dynamsoft.WebTwainEnv.ProductKey);var B=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRReadPara(F,I,y,J,C,H,x,D,G,z);return d(A,E,r,B)}function w(z,A){var y=z;var x="DTW_AjaxMethod=WriteOCRCount&OCRCount="+j(A+"");d(y,x,b,null)}function b(y,x){}function a(){var x=this;x.responseText="";x.errorString=""}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError=function(){return new a()};Dynamsoft.Lib.mix(Dynamsoft.Lib.Errors,{OCR_LicenseCheckerEmpty:function(y){var z=-2601;var x="LicenseChecker cannot be empty.";y.errorString=x;y.responseText=j("false;"+z+";"+x+";")},OCR_LicenseCheckerNotConnect:function(y){var z=-2602;var x="Cannot connect to the LicenseChecker, please check and make sure it's set correctly.";y.errorString=x;y.responseText=j("false;"+z+";"+x+";")},OCR_AccessDenied:function(y){var z=-2603;var x="Access denied.";y.errorString=x;y.responseText=j("false;"+z+";"+x+";")},OCR_LicenseCheckerError:function(y,A){var z=-2604;var x="Error occured in '"+A+"'.";y.errorString=x;y.responseText=j("false;"+z+";"+x+";")},OCR_HTTPError:function(y,z){var A=-2605;var x="HTTP Error "+z+".";y.errorString=x;y.responseText=j("false;"+A+";"+x+";")},OCR_LicenseCheckerUnauthorized:function(y,A){var z=-2606;var x="You do not have permission to view this directory or page using the credentials you supplied (access denied due to Access Control Lists). Ask the Web server's administrator to give you access to '"+A+"'.";y.errorString=x;y.responseText=j("false;"+z+";"+x+";")},__last:false});function i(){var x=null,z=window;try{x=new z.ActiveXObject("Msxml2.XMLHTTP")}catch(y){try{x=new z.ActiveXObject("Microsoft.XMLHTTP")}catch(y){x=new XMLHttpRequest()}}return x}function d(y,x,C,B){var z=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError();if(y==""){Dynamsoft.Lib.Errors.OCR_LicenseCheckerEmpty(z);alert(z.errorString);C(z,B);return false}var A=i();A.open("POST",y,true);A.setRequestHeader("Content-Type","application/x-www-form-urlencoded");A.onreadystatechange=function(){if(A.readyState==4){if(A.status==200){if(C!=null&&typeof(C)=="function"){C(A,B)}}else{if(A.status==401){Dynamsoft.Lib.Errors.OCR_LicenseCheckerUnauthorized(z,B.AjaxFunctionUrl);C(z,B);return false}else{if(A.status==404){Dynamsoft.Lib.Errors.OCR_LicenseCheckerNotConnect(z);alert(z.errorString);C(z,B);return false}else{if(A.status==403){Dynamsoft.Lib.Errors.OCR_AccessDenied(z);C(z,B);return false}else{Dynamsoft.Lib.Errors.OCR_HTTPError(z,A.status);C(z,B);return false}}}}}};if(A&&x){A.send(x)}return true}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var s=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function k(D){var z,B,x;var C,A,y;x=D.length;B=0;z="";while(B<x){C=D.charCodeAt(B++)&255;if(B==x){z+=c.charAt(C>>2);z+=c.charAt((C&3)<<4);z+="==";break}A=D.charCodeAt(B++);if(B==x){z+=c.charAt(C>>2);z+=c.charAt(((C&3)<<4)|((A&240)>>4));z+=c.charAt((A&15)<<2);z+="=";break}y=D.charCodeAt(B++);z+=c.charAt(C>>2);z+=c.charAt(((C&3)<<4)|((A&240)>>4));z+=c.charAt(((A&15)<<2)|((y&192)>>6));z+=c.charAt(y&63)}return z}function t(E){var D,C,A,y;var B,x,z;x=E.length;B=0;z="";while(B<x){do{D=s[E.charCodeAt(B++)&255]}while(B<x&&D==-1);if(D==-1){break}do{C=s[E.charCodeAt(B++)&255]}while(B<x&&C==-1);if(C==-1){break}z+=String.fromCharCode((D<<2)|((C&48)>>4));do{A=E.charCodeAt(B++)&255;if(A==61){return z}A=s[A]}while(B<x&&A==-1);if(A==-1){break}z+=String.fromCharCode(((C&15)<<4)|((A&60)>>2));do{y=E.charCodeAt(B++)&255;if(y==61){return z}y=s[y]}while(B<x&&y==-1);if(y==-1){break}z+=String.fromCharCode(((A&3)<<6)|y)}return z}function u(A){var y,z,x,B;y="";x=A.length;for(z=0;z<x;z++){B=A.charCodeAt(z);if((B>=1)&&(B<=127)){y+=A.charAt(z)}else{if(B>2047){y+=String.fromCharCode(224|((B>>12)&15));y+=String.fromCharCode(128|((B>>6)&63));y+=String.fromCharCode(128|((B>>0)&63))}else{y+=String.fromCharCode(192|((B>>6)&31));y+=String.fromCharCode(128|((B>>0)&63))}}}return y}function l(C){var y,A,x,D;var B,z;y="";x=C.length;A=0;while(A<x){D=C.charCodeAt(A++);switch(D>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:y+=C.charAt(A-1);break;case 12:case 13:B=C.charCodeAt(A++);y+=String.fromCharCode(((D&31)<<6)|(B&63));break;case 14:B=C.charCodeAt(A++);z=C.charCodeAt(A++);y+=String.fromCharCode(((D&15)<<12)|((B&63)<<6)|((z&63)<<0));break}}return y}function j(x){return k(u(x))}function f(x){return l(t(x))}});

// Dynamsoft Webcam Addon for DWT version: 16.1
/*! 20200716
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2020, Dynamsoft Corporation
* Author: Dynamsoft R&D Department
*
* Version: 16.1
*
* Module: addon/webcam
* final js: build\addon\dynamsoft.webtwain.addon.webcam.js
*/
/*;var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};*/Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.WebcamVerForActiveX="15.0.0.0625";Dynamsoft.WebcamVerInName="15.0.0.0625";var EnumDWT_VideoRotateMode={VRM_NONE:0,VRM_90_DEGREES_CLOCKWISE:1,VRM_180_DEGREES_CLOCKWISE:2,VRM_270_DEGREES_CLOCKWISE:3,VRM_FLIP_VERTICAL:4,VRM_FLIP_HORIZONTAL:5};var EnumDWT_VideoProperty={VP_BRIGHTNESS:0,VP_CONTRAST:1,VP_HUE:2,VP_SATURATION:3,VP_SHARPNESS:4,VP_GAMMA:5,VP_COLORENABLE:6,VP_WHITEBALANCE:7,VP_BACKLIGHTCOMPENSATION:8,VP_GAIN:9};var EnumDWT_CameraControlProperty={CCP_PAN:0,CCP_TILT:1,CCP_ROLL:2,CCP_ZOOM:3,CCP_EXPOSURE:4,CCP_IRIS:5,CCP_FOCUS:6};(function(c){var d=[c,Dynamsoft],b=0;for(;b<2;b++){var a=d[b];a.EnumDWT_VideoRotateMode=EnumDWT_VideoRotateMode;a.EnumDWT_VideoProperty=EnumDWT_VideoProperty;a.EnumDWT_CameraControlProperty=EnumDWT_CameraControlProperty}})(typeof window!=="undefined"?window:this);(function(a){a.WebcamErrors={InvalidParameter:function(b){b._errorCode=-10001;b._errorString="The parameter is invalid."},VideoNotPlayingWhenCapture:function(b){b._errorCode=-10002;b._errorString="To capture an image, the video must be playing."},VideoNotPlayingWhenGetURL:function(b){b._errorCode=-10003;b._errorString="To get the url for the current frame, the video must be playing."},Success:function(b){b._errorCode=0;b._errorString="Successful."}}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._Count=0;d._resultlist=[];d._stwain=c}b.prototype.GetCount=function(){var c=this;a.WebcamErrors.Success(c._stwain);return c._Count-1};b.prototype.Get=function(d){var e=this,c=e._resultlist.length;if(d>=c-1||d<0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(e._stwain,"Get");return""}a.WebcamErrors.Success(e._stwain);return e._resultlist[d]};b.prototype.GetCurrent=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"GetCurrent");return""}a.WebcamErrors.Success(d._stwain);return d._resultlist[c-1]};a.NewWebcamValue=function(c){return new b(c)}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._Count=0;d._resultlist=[];d._stwain=c}b.prototype.GetValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return""}a.WebcamErrors.Success(d._stwain);return d._resultlist[0].current};b.prototype.GetIfAuto=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return false}a.WebcamErrors.Success(d._stwain);return d._resultlist[0].auto=="true"?true:false};a.NewWebcamSetting=function(c){return new b(c)}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._Count=0;d._resultlist=[];d._stwain=c}b.prototype.GetMinValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return""}return d._resultlist[0].min};b.prototype.GetMaxValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return""}return d._resultlist[0].max};b.prototype.GetSteppingDelta=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return 0}return d._resultlist[0].step};b.prototype.GetDefaultValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return 0}return d._resultlist[0].defaultValue};b.prototype.GetIfAuto=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return false}return d._resultlist[0].auto=="true"?true:false};a.NewWebcamMoreSetting=function(c){return new b(c)}})(Dynamsoft.Lib);Dynamsoft.AddonReady(function(a){var b=function(c){var d=a.html5.Funs;c._innerSetWebcamValue=function(f){var g=c,e;e=a.NewWebcamValue(c);if(f&&a.isArray(f)){e._resultlist=f;e._Count=f.length}return e};c._innerSetWebcamSetting=function(f){var g=c,e;e=a.NewWebcamSetting(c);if(f&&a.isArray(f)){e._resultlist=f;e._Count=f.length}return e};c._innerSetWebcamMoreSetting=function(f){var g=c,e;e=a.NewWebcamMoreSetting(c);if(f&&a.isArray(f)){e._resultlist=f;e._Count=f.length}return e}};if(a.DynamicLoadAddonFuns){a.DynamicLoadAddonFuns.push(b)}a.Addon_Events.push("OnFrameCaptured");a.Addon_Events.push("OnCaptureSuccess");a.Addon_Events.push("OnCaptureError")});Dynamsoft.AddonReady(function(b,a){if(!b.product.bHTML5Edition){return}function c(f){var g=b.html5.Funs;f._innerWebcamValueFunction=function(h,j){var k=this,i;i=k._innerFunRaw(h,j,false,false);return k._innerSetWebcamValue(i)};f._innerWebcamSettingFunction=function(h,j){var k=this,i;i=k._innerFunRaw(h,j,false,false);return k._innerSetWebcamSetting(i)};f._innerWebcamMoreSettingFunction=function(h,j){var k=this,i;i=k._innerFunRaw(h,j,false,false);return k._innerSetWebcamMoreSetting(i)};f._OnCaptureSuccess=function(h){var i=this;if(Dynamsoft.Lib.isFunction(i.__OnCaptureSuccess)){i.__OnCaptureSuccess()}};f._OnCaptureError=function(i){var k=this,h=i[1],j=i[2];if(Dynamsoft.Lib.isFunction(k.__OnCaptureError)){k.__OnCaptureError(h,j)}};f._OnFrameCaptured=function(h){var k=this,j=Dynamsoft.Lib;if(!k.__videoPause){var i=k.__videoQuality;if(!i){i=60}k.UpdateVideoContainer(k.GetImageURL(-1,-1,-1,0,i))}if(j.isFunction(k.__OnFrameCaptured)){k.__OnFrameCaptured(h)}}}function d(g,h){var f=h.length-1;while(f>=0&&h[f].p1>=g.p1){if(h[f].p1==g.p1&&h[f].p2<g.p2){break}h[f+1]=h[f];f--}h[f+1]=g}var e=function(h){var i=b.html5.Funs,g,f;if(b.env.bMac){f="DynamicWebcam_"+Dynamsoft.WebcamVerInName+".dylib"}else{if(b.env.bLinux){f="DynamicWebcam_"+Dynamsoft.WebcamVerInName+".so"}else{if(Dynamsoft.dcp.b64bit){f="DynamicWebcamx64_"+Dynamsoft.WebcamVerInName+".dll"}else{f="DynamicWebcam_"+Dynamsoft.WebcamVerInName+".dll"}}}if(!h._isMobileMode()){h._innerSend("GetAddOnVersion",i.makeParams("webcam",f),true,false,false)}c(h);g={Webcam:{IsModuleInstalled:function(){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.IsModuleInstalled")}var j=k._innerFun("GetAddOnVersion",i.makeParams("webcam",f));return(j!="")},Download:function(n,q,j){var m=h,o;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.Webcam.Download")}Dynamsoft.Lib.cancelFrome=2;var l=function(){if(Dynamsoft.Lib.isFunction(q)){q()}return true},r=function(){if(Dynamsoft.Lib.isFunction(j)){j(h.ErrorCode,h.ErrorString)}return false};if(!b.License.checkProductKey(h,{Webcam:true},true)){return r()}if(this.IsModuleInstalled()){return l()}if(!n||n==""){Dynamsoft.Lib.Errors.Webcam_InvalidRemoteFilename(m);return r()}if(i.isServerInvalid(m)){r();return false}o="get";Dynamsoft.Lib.showProgress(m,"Download",true);var p=function(s){var t=(s.total===0)?100:Math.round(s.loaded*100/s.total),u=[s.loaded," / ",s.total].join("");m._OnPercentDone([0,t,"","http"])},k=true;m._OnPercentDone([0,-1,"Downloading Webcam Module...","http"]);if(!Dynamsoft.Lib.isFunction(q)){k=false}return i.loadHttpBlob(m,o,n,k,function(s){m._OnPercentDone([0,-1,"Loading..."]);var u=100;m.__LoadImageFromBytes(s,u,"",k,l,r)},function(){Dynamsoft.Lib.closeProgress("Download");r()},p)},GetSourceList:function(){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetSourceList")}if(!b.License.checkProductKey(k,{Webcam:true},true)){return[]}var j=k._innerFunRaw("GetWebcamSourceList");if(k.ErrorCode==0){j.splice(j.length-1,1)}return j},SelectSource:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SelectSource")}if(!b.License.checkProductKey(k,{Webcam:true},true)){return false}return k._innerFun("SelectWebcam",i.makeParams(j))},CloseSource:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.CloseSource")}this._clear();return j._innerFun("StopCapture")},GetFramePartURL:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetFramePartURL")}if(!this._isPlaying()){b.WebcamErrors.VideoNotPlayingWhenGetURL(j);return""}return j.GetImageURL(-1,-1,-1,!0,j.__videoQuality)},GetFrameURL:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetFrameURL")}if(!this._isPlaying()){b.WebcamErrors.VideoNotPlayingWhenGetURL(j);return""}return j.GetImageURL(-1,-1,-1,0,j.__videoQuality)},PlayVideo:function(r,u,l,s,m){var n=h;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("Addon.Webcam.PlayVideo")}var k,p=Dynamsoft.Lib,q=60,j=false,o=this,t=function(){o._clear();if(Dynamsoft.Lib.isFunction(m)){m(h.ErrorCode,h.ErrorString)}return false};if(!r){Dynamsoft.Lib.Errors.ParameterCannotEmpty(h);return t()}if(!b.License.checkProductKey(h,{Webcam:true},true)){return t()}h.ShowVideoContainer(true);if(p.isFunction(l)){h.__OnFrameCaptured=l}if(h.__videoPause){h.__videoPause=false;if(b.isFunction(s)){s()}return true}h.__videoPause=false;if(u){q=1*u;if(q<1){q=60}h.__videoQuality=q;if(j){if(b.isFunction(s)){s()}return true}}else{h.__videoQuality=q}return h._innerSend("PlayVideo",i.makeParams(true),true,s,t)},PauseVideo:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.PauseVideo")}if(this._isPlaying()){j.__videoPause=true}return true},_clear:function(){var k=h;var j=Dynamsoft.Lib;k.__videoPause=false;k.__OnFrameCaptured=false;k.__videoQuality=60;k.ShowVideoContainer(false)},_isPlaying:function(){var j=h;return j.GetIfShowVideoContainer()},StopVideo:function(){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.StopVideo")}this._clear();var j=k._innerFun("PlayVideo",i.makeParams(false,0));k._innerFun("StopCapture");return j},CaptureImage:function(n,k){var p=h;p._resetErr();if(p._isMobileMode()){return p._mobileNotSupport("Addon.Webcam.CaptureImage")}if(!b.License.checkProductKey(p,{Webcam:true},true)){if(b.isFunction(k)){k(p._errorCode,p._errorString)}return false}var j="CaptureImage",o=function(){i.hideMask(j);if(b.isFunction(n)){setTimeout(n,0)}},l=function(){i.hideMask(j);if(b.isFunction(k)){k(p._errorCode,p._errorString)}};i.showMask(j);p.__OnCaptureSuccess=o;p.__OnCaptureError=l;return p._innerSend(j,i.makeParams(false),true,function(){if(p.ErrorCode<0){l(p.ErrorCode,p.ErrorString)}},l)},GetMediaType:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetMediaType")}return j._innerWebcamValueFunction("GetMediaType")},SetMediaType:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SetMediaType")}if(!b.isString(j)){b.Errors.InvalidValue(k);return false}return k._innerFun("SetMediaType",i.makeParams(j))},GetResolution:function(){var m=h;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.Webcam.GetResolution")}var n=m._innerWebcamValueFunction("GetResolution");if(n&&n._resultlist){var l,j,r=n._resultlist,k=[],s=[],p;if(r.length>0){p=r[r.length-1]}if(p==""&&r.length>0){p=r[0]}for(l=0;l<r.length-1;l++){j=r[l];var q=j.toLowerCase().split("x");d({value:j,p1:parseInt(q[0]),p2:parseInt(q[1])},k)}for(l=0;l<k.length;l++){j=k[l].value;s.push(j)}if(p){s.push(p)}n._resultlist=s;k=null;s=null}return n},SetResolution:function(k){var l=h;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.Webcam.SetResolution")}if(!b.isNumber(k)&&!b.isString(k)){b.Errors.InvalidValue(l);return false}var j=l._innerFun("SetResolution",i.makeParams(k));return j},GetFrameRate:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetFrameRate")}return j._innerWebcamValueFunction("GetFrameRate")},SetFrameRate:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SetFrameRate")}if(!b.isNumber(j)){b.Errors.InvalidValue(k);return false}return h._innerFun("SetFrameRate",i.makeParams(j))},GetVideoPropertySetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetVideoPropertySetting")}return k._innerWebcamSettingFunction("GetWebcamVideoPropertySetting",i.makeParams(j))},GetVideoPropertyMoreSetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetVideoPropertyMoreSetting")}return k._innerWebcamMoreSettingFunction("GetWebcamVideoPropertyMoreSetting",i.makeParams(j))},SetVideoPropertySetting:function(k,j,m){var l=h;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.Webcam.SetVideoPropertySetting")}return l._innerFun("SetWebcamVideoPropertySetting",i.makeParams(k,j,m))},SetVideoRotateMode:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SetVideoRotateMode")}return k._innerFun("SetVideoRotateMode",i.makeParams(j))},GetCameraControlPropertySetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetCameraControlPropertySetting")}return k._innerWebcamSettingFunction("GetWebcamCameraControlSetting",i.makeParams(j))},GetCameraControlPropertyMoreSetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetCameraControlPropertyMoreSetting")}return k._innerWebcamMoreSettingFunction("GetWebcamCameraControlMoreSetting",i.makeParams(j))},SetCameraControlPropertySetting:function(k,j,m){var l=h;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.Webcam.SetCameraControlPropertySetting")}return l._innerFun("SetWebcamCameraControlPropertySetting",i.makeParams(k,j,m))}}};h.__addon=h.__addon||{};b.mix(h.__addon,g)};if(b.DynamicLoadAddonFuns){b.DynamicLoadAddonFuns.push(e)}});Dynamsoft.AddonReady(function(c,b){if(!c.product.bPluginEdition&&!c.product.bActiveXEdition){return}var a;function d(g){g._innerRead=function(i){var k=this,h;try{h=Dynamsoft.Lib.parse(i)}catch(j){}return h.result};g._innerWebcamValueFunctionPlugin=function(i){var j=this,h;h=j._innerRead(i);return j._innerSetWebcamValue(h)};g._innerWebcamSettingFunctionPlugin=function(i){var j=this,h;h=j._innerRead(i);return j._innerSetWebcamSetting(h)};g._innerWebcamMoreSettingFunctionPlugin=function(i){var j=this,h;h=j._innerRead(i);return j._innerSetWebcamMoreSetting(h)}}function e(h,i){var g=i.length-1;while(g>=0&&i[g].p1>=h.p1){if(i[g].p1==h.p1&&i[g].p2<h.p2){break}i[g+1]=i[g];g--}i[g+1]=h}var f=function(k){var l,j;if(k.getSWebTwain()&&k.getSWebTwain().Addon){}else{return false}if(Dynamsoft.navInfo.bWin){var i=navigator.userAgent.toLowerCase(),g=!Dynamsoft.navInfo.isX64||(i.indexOf("wow64")>=0);if(g){a="DynamicWebcam_"+Dynamsoft.WebcamVerForActiveX+".dll"}else{a="DynamicWebcamx64_"+Dynamsoft.WebcamVerForActiveX+".dll"}}else{}l=k.getSWebTwain();try{l.GetAddOnVersion("webcam",a)}catch(h){}d(k);j={Webcam:{IsModuleInstalled:function(){var m=l.GetAddOnVersion("webcam",a);c.setErrorString(k);return(m!="")},Download:function(r,m,p){var n=function(){if(Dynamsoft.Lib.isFunction(m)){m()}return true},q=function(){if(Dynamsoft.Lib.isFunction(p)){p(k.ErrorCode,k.ErrorString)}return false};if(!c.License.checkProductKey(k,{Webcam:true},true)){return q()}if(this.IsModuleInstalled()){return n()}if(!r||r==""){Dynamsoft.Lib.Errors.Webcam_InvalidRemoteFilename(k);return q()}var o=l.DownloadAddon(r);return c.wrapperRet(k,o,n,q)},GetSourceList:function(){if(!c.License.checkProductKey(k,{Webcam:true},true)){return[]}var n=l.GetWebcamSourceList(),m=[];c.setErrorString(k);if(k.ErrorCode==0){m=k._innerRead(n);if(m&&m.length>1){m.splice(m.length-1,1)}}return m},SelectSource:function(m){if(!c.License.checkProductKey(k,{Webcam:true},true)){return false}var n=l.SelectWebcam(m);c.setErrorString(k);return n},CloseSource:function(){k._playVideoDWT=null;var m=l.StopCapture();c.setErrorString(k);return m},GetFramePartURL:function(){if(!this._isPlaying()){c.WebcamErrors.VideoNotPlayingWhenGetURL(k);return""}var m=l.GetDIB(-1);c.setErrorString(k);return m},GetFrameURL:function(){return""},PlayVideo:function(s,r,p,m,n){var o=function(){k._playVideoDWT=null;if(Dynamsoft.Lib.isFunction(n)){n(k.ErrorCode,k.ErrorString)}return false};if(!s||!s.getSWebTwain()){Dynamsoft.Lib.WebcamErrors.InvalidParameter(k);return o()}if(!c.License.checkProductKey(k,{Webcam:true},true)){return o()}var q=s.getSWebTwain().CurrentHWND;if(!q){c.WebcamErrors.InvalidParameter(k);return o()}k._playVideoDWT=s;setTimeout(function(){var t=l.RunWebcamCmd("PlayVideo",q,null,null,p);c.wrapperRet(k,t,m,o)},0);return true},PauseVideo:function(){return true},StopVideo:function(){k._playVideoDWT=null;var m=l.RunWebcamCmd("StopVideo",0,null,null,null);c.setErrorString(k);l.StopCapture();return m},CaptureImage:function(p,n){var q=function(){if(c.isFunction(p)){setTimeout(p,0)}},o=function(){if(Dynamsoft.Lib.isFunction(n)){n(k.ErrorCode,k.ErrorString)}return false};if(!c.License.checkProductKey(k,{Webcam:true},true)){return o()}var m=l.RunWebcamCmd("Capture",0,q,o,null);c.setErrorString(k);return m},GetMediaType:function(){var m=k._innerWebcamValueFunctionPlugin(l.GetMediaType());c.setErrorString(k);return m},SetMediaType:function(n){if(!c.isString(n)){c.Errors.InvalidValue(k);return false}var m=l.SetMediaType(n);c.setErrorString(k);return m},GetResolution:function(){var m=k._innerWebcamValueFunctionPlugin(l.GetResolution());c.setErrorString(k);if(m&&m._resultlist){var n,t,s=m._resultlist,r=[],u=[],q;if(s.length>0){q=s[s.length-1]}for(n=0;n<s.length-1;n++){t=s[n];var p=t.toLowerCase().split("x");e({value:t,p1:parseInt(p[0]),p2:parseInt(p[1])},r)}for(n=0;n<r.length;n++){t=r[n].value;u.push(t)}if(q){u.push(q)}m._resultlist=u;r=null;u=null}return m},SetResolution:function(n){if(!c.isNumber(n)&&!c.isString(n)){c.Errors.InvalidValue(k);return false}var m=l.SetResolution(n);c.setErrorString(k);return m},GetFrameRate:function(){var m=k._innerWebcamValueFunctionPlugin(l.GetFrameRate());c.setErrorString(k);return m},SetFrameRate:function(n){if(!c.isNumber(n)){c.Errors.InvalidValue(k);return false}var m=l.SetFrameRate(n);c.setErrorString(k);return m},GetVideoPropertySetting:function(n){var m=l.GetWebcamVideoPropertySetting(n);c.setErrorString(k);return k._innerWebcamSettingFunctionPlugin(m)},GetVideoPropertyMoreSetting:function(n){var m=l.GetWebcamVideoPropertyMoreSetting(n);c.setErrorString(k);return k._innerWebcamMoreSettingFunctionPlugin(m)},SetVideoPropertySetting:function(o,n,p){var m=l.SetWebcamVideoPropertySetting(o,n,p);c.setErrorString(k);return m},SetVideoRotateMode:function(n){var m=l.SetVideoRotateMode(n);c.setErrorString(k);return m},GetCameraControlPropertySetting:function(n){var m=l.GetWebcamCameraControlSetting(n);c.setErrorString(k);return k._innerWebcamSettingFunctionPlugin(m)},GetCameraControlPropertyMoreSetting:function(n){var m=l.GetWebcamCameraControlMoreSetting(n);c.setErrorString(k);return k._innerWebcamMoreSettingFunctionPlugin(m)},SetCameraControlPropertySetting:function(o,n,p){var m=l.SetWebcamCameraControlPropertySetting(o,n,p);c.setErrorString(k);return m},_isPlaying:function(){if(k._playVideoDWT){return true}return false}}};k.Addon=k.Addon||{};c.mix(k.Addon,j)};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(f)}});

// Dynamsoft Camera Addon for DWT version: 16.1.1
/*! 20200811* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2020, Dynamsoft Corporation
* Author: Dynamsoft R&D Department
*
* Version: 16.1.1
*
* Module: addon/camera
* final js: build\addon\dynamsoft.webtwain.addon.camera.js
*/
/*;var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};*/Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.CameraVerInName="16.1.0.0720";Dynamsoft.AddonReady(function(c,b){if(!c.product.bHTML5Edition){return}var a=function(e){var g=c.html5.Funs,d;var f=function(){this._stwain=e;this._viewer=new CameraViewer()};f.prototype._checkLic=function(){var h=true;if(!c.License.checkProductKey(this._stwain,{Webcam:true},true)){h=false}if(h&&!c.License.checkProductKey(this._stwain,{Webcam:true,Wasm:true},true)){h=false}if(h){return false}else{return{errorCode:this._stwain._errorCode,errorMessage:this._stwain._errorString}}};f.prototype.getSourceList=function(){var h=this._checkLic();if(h){return c.Promise.reject(h)}return this._viewer.getSourceList()};f.prototype.selectSource=function(h){var i=this._checkLic();if(i){return c.Promise.reject(i)}this._viewer.hide();return this._viewer.selectSource(h)};f.prototype.closeSource=function(){var h=this._checkLic();if(h){return c.Promise.reject(h)}this._viewer.hide();return this._viewer.closeSource()};f.prototype.play=function(i,j){var n=this._checkLic(),l,h;if(n){return c.Promise.reject(n)}if(this._stwain._ImgManager.getView().GetWebViewer().bShowImageEditForFullScreen){return c.Promise.resolve()}var o=i;if(!o){if(this._stwain.Viewer.bOnlyShowThumbnailsView||!this._stwain.Viewer.showMain){var m=c.one(["#showImageArea",this._stwain.Viewer.postfix].join(""));if(m&&m.length>0){if(m[0].className.indexOf("DVS_disabled")<0){o=m[0]}}}else{var k=c.one(["#container",this._stwain.Viewer.postfix].join(""));if(k&&k.length>0){if(k[0].className.indexOf("DVS_disabled")<0){o=k[0]}}}}if(!o){this._viewer.unbindUI();this._viewer.closeSource().then(function(){},function(){})}else{if(typeof j=="object"){l=j.width;h=j.height}this._viewer.show()}return this._viewer.play(o,l,h)};f.prototype.pause=function(){return this._viewer.pause()};f.prototype.resume=function(){return this._viewer.resume()};f.prototype.getStatus=function(){var h=this._checkLic();if(h){return c.Promise.reject(h)}return this._viewer.getStatus()};f.prototype.capture=function(){var i=this._checkLic(),h=this._stwain;if(i){return c.Promise.reject(i)}return this._viewer.capture().then(function(j){return new c.Promise(function(o,n){var k=j,l=-1,m=Dynamsoft.EnumDWT_ImageType;if(h._bLocalService){if(c.isString(k.type)){if(k.type=="application/pdf"){l=m.IT_PDF}else{if(k.type=="image/png"){l=m.IT_PNG}else{if(k.type=="image/jpeg"){l=m.IT_JPG}else{if(k.type=="image/bmp"){l=m.IT_BMP}else{if(k.type=="image/tiff"){l=m.IT_TIF}}}}}}h.__LoadImageFromBytes(k,l,"",true,function(){o(k)},n)}else{h._innerSendToMobile("LoadImageFromBinary",[k],0,function(){o(k)},n)}})})};f.prototype.stop=function(){this._viewer.hide();return this._viewer.stop()};f.prototype.show=function(){return this._viewer.show()};f.prototype.hide=function(){return this._viewer.hide()};f.prototype.getCurrentResolution=function(){return this._viewer.getCurrentResolution()};f.prototype.getCurrentSource=function(){return this._viewer.getCurrentSource()};f.prototype.getResolution=function(){var h=this._checkLic();if(h){return c.Promise.reject(h)}return this._viewer.getResolution()};f.prototype.setResolution=function(h){var i=this._checkLic();if(i){return c.Promise.reject(i)}return this._viewer.setResolution(h)};e.__addon=e.__addon||{};e.__addon.Camera=new f()};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(a)}});/*! For license information please see dcs.js.LICENSE.txt */
!function(t){var e={};function i(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(r,o,function(e){return t[e]}.bind(null,o));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={ErrorMessage:{OK:{code:0,message:"Successful"},HTTPS_REQUIRED:{code:-4201,message:"HTTPS is required for accessing cameras."},MEDIADEVICES_NOT_IMPL:{code:-4202,message:"The current browser has not implemented the MediaDevices interface."},GETUSERMEDIA_NOT_IMPL:{code:-4203,message:"The current browser has not implemented the getUserMedia interface."},NO_MEMORY:{code:-4204,message:"Not enough memory for this operation."},NO_CAMERA_SELECTED:{code:-4205,message:"No camera is selected."},VIDEO_ELEMENT_REQUIRED:{code:-4206,message:"A Video element is required for this operation."},CAMERA_PLUG_OUT:{code:-4207,message:"The camera is not plugged in."},CAMERA_NOT_OPEN:{code:-4208,message:"The camera is not open."},CAMERA_SETTINGS_NOT_SUPPORT:{code:-4209,message:"The current browser does not support camera settings."},FAILED_GET_USERMEDIA:{code:-4210,message:"Failed to get camera input."},SOURCE_NOT_FOUND:{code:-4211,message:"The camera source can not be found."},VIDEO_NOT_PLAY:{code:-4214,message:"The video must be playing for the capture operation to work."},VIDEO_NOT_STOP:{code:-4215,message:"The video is already playing. Please stop the video before attempting to play it again to a different container."},NO_CAMERA:{code:-4216,message:"No camera is found."}}}},function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(i(2));i(10),e.default=o.default,window.CameraViewer=o.default,HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,i){for(var r=atob(this.toDataURL(e,i).split(",")[1]),o=r.length,n=new Uint8Array(o),s=0;s<o;s++)n[s]=r.charCodeAt(s);t(new Blob([n],{type:e||"image/png"}))}})},function(t,e,i){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(o,n){function s(t){try{c(r.next(t))}catch(t){n(t)}}function a(t){try{c(r.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<i;e++)for(var n=arguments[e],s=0,a=n.length;s<a;s++,o++)r[o]=n[s];return r},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(i(3)),h=a(i(4)),l=i(6),u=a(i(7)),d=i(8),p=a(i(9)),f=a(i(0)).default.ErrorMessage,v=function(){function t(t,e,i){this._cropComponent=null,this._isDrawing=!1,this._iResolution=null,this._camera=null,this._tempCanvas=document.createElement("canvas"),this.errorCode=0,this.errorMessage="Successful.",this._cropArea=[],this._logs="",this._videoContainer=null,this._video=null,this._resultImg=null,this._controlBox=null,this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._btnClose=null,this.regionMaskFillStyle="rgba(0,0,0,0.5)",this.regionMaskStrokeStyle="rgb(254,142,20)",this.regionMaskLineWidth=2,this.areaFillStyle="rgba(254,180,32,0.3)",this.lineStrokeStyle="rgba(254,180,32,0.9)",this.lineWidth=1,this._pub=new d.PublishSubscribe,this._cropComponent=new l.Crop({}),this._iResolution={deviceId:e,resolution:i},t&&this.bindUI(document.getElementById(t),!1),this._cameraManageInit(),this._bindEvents()}return t.prototype._bindEvents=function(){var t=this;[["onLog",this._onLog],["onResolutionChanged",this.show],["onCameraChanged",this._cameraChangedHandler],["onCameraSelChanged",this._onCameraSelChanged],["onPlayed",this.drawRegionsults],["onThrowError",this._throwError],["onParaTypeError",this._throwParaTypeError],["onParaValueError",this._throwParaValueError]].forEach((function(e){t.on(e[0],e[1])})),window.addEventListener("resize",(function(){t.drawRegionsults()}))},t.prototype._cameraChangedHandler=function(t){this._camera&&(c.default.cameraExist(this._camera._cameraInfo,t)||(this.emit("onLog","camera plug out."),this._camera.setPlugout(),this.emit("onThrowError",f.CAMERA_PLUG_OUT)))},t.prototype._onLog=function(t){this._logs+=t+"\n"},t.prototype._cameraManageInit=function(){this._cameraManager=new c.default(this._pub)},t.prototype.destroy=function(){this.off("onLog"),this.unbindUI(),this._closeCamera(),this._cameraManager.destroy(),this.unbindRealTimeRender()},t.prototype.getVideoElement=function(){return this._video},t.prototype._throwError=function(t){if(t.code&&t.message)throw this.errorCode=t.code,this.errorMessage=t.message,u.default.cameraException(t)},t.prototype._throwParaTypeError=function(t,e){throw this.errorCode=-4212,this.errorMessage="Argument of type '"+t+"' is not assignable to parameter of type '"+e+"'.",u.default.cameraException({code:this.errorCode,message:this.errorMessage})},t.prototype._throwParaValueError=function(t,e){throw this.errorCode=-4213,this.errorMessage="The argument '"+t+"' is not valid for the parameter '"+e+"'",u.default.cameraException({code:this.errorCode,message:this.errorMessage})},t.prototype.show=function(){this._checkCamera(),this._videoContainer&&"none"==this._videoContainer.style.display&&(this._videoContainer.style.display=""),this.drawRegionsults(null)},t.prototype.hidden=function(){return!!this._videoContainer&&"none"==this._videoContainer.style.display},t.prototype.hide=function(){this._videoContainer&&(this._videoContainer.style.display="none")},t.prototype.playDirectly=function(t,e,i){return o(this,void 0,void 0,(function(){var r,o;return n(this,(function(n){switch(n.label){case 0:return r={},this._camera?this._camera.playing()?[3,2]:[4,this._camera.play(e,i)]:[3,4];case 1:return r=n.sent(),[3,3];case 2:r=this._camera._curResolution,n.label=3;case 3:return[3,8];case 4:return(o=this._cameraManager._allCamerasInfo).length?[3,6]:[4,this._cameraManager.getAllCamerasInfo()];case 5:o=n.sent(),n.label=6;case 6:return this._camera=new h.default(null,this._video,o,t,this._pub),[4,this._camera.play(e,i)];case 7:r=n.sent(),n.label=8;case 8:return[2,r]}}))}))},t.prototype.playing=function(){return!!this._camera&&this._camera.playing()},t.prototype.paused=function(){return!!this._camera&&this._camera.paused()},t.prototype._closeCamera=function(){this._camera&&(this._camera.destroy(),this._camera=null)},t.prototype._checkCamera=function(){return!!this._camera&&void 0},t.prototype.bindResolutionsSelector=function(t){return!!this._camera&&this._camera.bindResolutionsSelector(t)},t.prototype.unbindResolutionsSelector=function(){return!!this._camera&&this._camera.unbindResolutionsSelector()},t.prototype.drawRegionsults=function(t){if(this._video&&this._cvsDrawArea){var e=this._cvsDrawArea;if(this.calPixelRatio()){e.width=e.clientWidth,e.height=e.clientHeight;var i=e.getContext("2d");i.strokeStyle=this.lineStrokeStyle,i.strokeRect(0,0,e.width,e.height)}}},t.prototype.calPixelRatio=function(){if(this._video&&this._cvsDrawArea){var t=this._video,e=t.videoWidth,i=t.videoHeight,r=t.clientWidth,o=t.clientHeight;if(0===r||0===o)return 0;var n=Math.max(r/e,o/i);return n===1/0&&(n=0),this._pixelRatio=n,n}},t.prototype._clearCanvasRect=function(){this._cvsDrawArea&&this._cvsDrawArea.getContext("2d").clearRect(0,0,this._cvsDrawArea.width,this._cvsDrawArea.height)},t.prototype._clearRegionsults=function(){this._cvsDrawArea&&(this._cvsDrawArea.width=this._cvsDrawArea.height=0)},t.prototype.bindCameraSelector=function(t){return this._cameraManager.bindCameraSelector(t)},t.prototype.unbindCameraSelector=function(){return this._cameraManager.unbindCameraSelector()},t.prototype._onCameraSelChanged=function(t){var e=this;this.setCurrentCamera(t).then((function(t){e.hide(),t.getResolutions()}))},t.prototype.setCurrentCamera=function(t,e){return o(this,void 0,void 0,(function(){var i;return n(this,(function(r){switch(r.label){case 0:return this._closeCamera(),(i=this._cameraManager._allCamerasInfo)?[3,2]:[4,this._cameraManager.getAllCamerasInfo()];case 1:i=r.sent(),r.label=2;case 2:return this._camera=new h.default(t,this._video,i,e,this._pub),[2,this._camera]}}))}))},t.prototype.getCurrentCamera=function(){return this._camera},t.prototype.on=function(t,e){this._pub.on(t,e.bind(this))},t.prototype.emit=function(t){for(var e,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];(e=this._pub).emit.apply(e,s([t],i))},t.prototype.off=function(t,e){this._pub.off(t,e)},t.prototype.bindUI=function(t,e){var i=this;if((void 0===e&&(e=!0),this.unbindUI(),this._licenseCallback)&&0!==this._licenseCallback().errorCode)return!1;if(t){if(""===t.style.position&&(t.style.position="relative"),this._videoContainer=document.createElement("div"),this._videoContainer.setAttribute("class","dynamsoft-cvs-container"),t.appendChild(this._videoContainer),this._video=document.createElement("video"),this._video.setAttribute("class","dynamsoft-video"),this._video.setAttribute("playsinline","true"),this._videoContainer.appendChild(this._video),this._camera&&(this._camera._videoEle=this._video),this._cvsDrawArea=document.createElement("canvas"),this._cvsDrawArea.setAttribute("class","dynamsoft-cvs-drawarea"),this._videoContainer.appendChild(this._cvsDrawArea),this._resultImg=document.createElement("img"),this._resultImg.setAttribute("class","dynamsoft-resultImg"),this._videoContainer.appendChild(this._resultImg),e){var r=document.createElement("div");r.setAttribute("class","dynamsoft-cvs-exit ds-dvs-ui-iconfont ds-dvs-ui-exitMutiple"),this._videoContainer.appendChild(r),r&&r.addEventListener("click",(function(){i.emit("onExitCamera")}))}return this.bindControlBox(),!0}},t.prototype.unbindUI=function(){if(this._clearRegionsults(),this._videoContainer){var t=this._videoContainer.parentNode;t&&t.removeChild(this._videoContainer)}this._videoContainer=null,this._video=null,this._cvsDrawArea=null,this._divScanLight=null,this._divScanLight=null,this._btnClose=null},t.prototype.getImageData=function(){this._drawRealCameraArea();var t=this._tempCanvas;return t.getContext("2d").getImageData(0,0,t.width,t.height)},t.prototype.getBlobData=function(t){if(t=t||this._tempCanvas,this._video)return new Promise((function(e){t.toBlob((function(t){e(t)}))}))},t.prototype._drawRealCameraArea=function(){if(this._video){var t=this._tempCanvas,e=this._cvsDrawArea,i=this._pixelRatio,r=e.width/i,o=e.height/i;t.width=r,t.height=o;var n=(this._video.videoWidth-r)/2,s=(this._video.videoHeight-o)/2;t.getContext("2d").drawImage(this._video,n,s,r,o,0,0,r,o)}},t.prototype.emptyTempCanvas=function(){var t=this._tempCanvas;t.width=0,t.height=0},t.prototype.bindRealTimeRender=function(t){var e=this;if(this.unbindRealTimeRender(),!this._areaDetectFn)return!1;var i=1e3/t;this._isDrawing=!0;return function t(i){e.freeCropTimer=setTimeout((function(){return o(e,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return this._isDrawing?[4,this.drawCropArea()]:[3,2];case 1:e.sent(),t(i),e.label=2;case 2:return[2]}}))}))}),i)}(i),!0},t.prototype.unbindRealTimeRender=function(){clearTimeout(this.freeCropTimer),this._isDrawing=!1,this.drawRegionsults()},t.prototype.bindAreaDetectFunction=function(t){return!!p.default.isFunction(t)&&(this._areaDetectFn=t,!0)},t.prototype.bindPerspectiveFunction=function(t){return!!p.default.isFunction(t)&&(this._perspectiveCallback=t,!0)},t.prototype.bindLicenseCallback=function(t){return!!p.default.isFunction(t)&&(this._licenseCallback=t,!0)},t.prototype.detectArea=function(){return o(this,void 0,void 0,(function(){var t,e;return n(this,(function(i){switch(i.label){case 0:return t=this.getImageData(),e=[],this._areaDetectFn?[4,this._areaDetectFn(t.data,t.width,t.height)]:[3,2];case 1:e=i.sent(),t=null,i.label=2;case 2:return[2,e.slice(0)]}}))}))},t.prototype.perspective=function(t){return o(this,void 0,void 0,(function(){var e;return n(this,(function(i){return Array.isArray(t)?(e=this.getImageData(),this._perspectiveCallback?[2,this._perspectiveCallback.call(this,e.data,t,e.width,e.height)]:[2]):[2,!1]}))}))},t.prototype.drawArea=function(t){var e=this,i=this._cvsDrawArea;if(i){var r=i.getContext("2d");return t?(this._clearCanvasRect(),r.strokeStyle=this.areaFillStyle,r.fillStyle=this.areaFillStyle,r.lineWidth=5,r.clearRect(0,0,i.width,i.height),r.save(),r.beginPath(),r.moveTo(t[0][0]*this._pixelRatio,t[0][1]*this._pixelRatio),t.forEach((function(i,o){var n=(o+1)%4;r.lineTo(t[n][0]*e._pixelRatio,t[n][1]*e._pixelRatio)})),r.stroke(),r.closePath(),r.restore(),!0):(r.clearRect(0,0,i.width,i.height),!1)}},t.prototype.drawCropArea=function(){return o(this,void 0,void 0,(function(){var t,e;return n(this,(function(i){switch(i.label){case 0:return[4,this.detectArea()];case 1:return t=i.sent(),Array.isArray(t)&&t.length&&this._isDrawing?(e=[t.slice(0,2),t.slice(2,4),t.slice(4,6),t.slice(6,8)],this.drawArea(e),[2,!0]):[2,!1]}}))}))},t.prototype.bindControlBox=function(t){if(!(document.getElementById(t)||this._controlBox))return!1;this.bindCustomBox(t,{blank1:{className:"camera-empty"},captureBtn:{className:"camera-main",iconClass:"ds-dvs-ui-zhaoxiangji",onButtonClick:"onCapture"},detectBtn:{className:"camera-right",iconClass:"ds-dvs-ui-shibie-chuanti",onButtonClick:"onDetect"}})},t.prototype.bindConfirmBox=function(t){if(!(document.getElementById(t)||this._controlBox))return!1;this.bindCustomBox(t,{remakeBtn:{className:"camera-left",iconClass:"ds-dvs-ui-shangyibu",onButtonClick:"onRemake"},blank1:{className:"camera-editEmpty"},perspectiveBtn:{className:"camera-right",iconClass:"ds-dvs-ui-xiayibu",onButtonClick:"onPerspective"}})},t.prototype.bindSaveBox=function(t){if(!(document.getElementById(t)||this._controlBox))return!1;this.bindCustomBox(t,{backBtn:{className:"camera-around",iconClass:"ds-dvs-ui-shangyibu",onButtonClick:"onBack"},blank1:{className:"camera-saveEmpty"},remakeBtn:{className:"camera-around",iconClass:"ds-dvs-ui-zhongpai",onButtonClick:"onRemake"},confirmBtn:{className:"camera-around",iconClass:"ds-dvs-ui-lijiquerenx",onButtonClick:"onConfirm"}})},t.prototype.bindCustomBox=function(t,e,i){var r=this;e=e||{};var o=document.getElementById(t)||this._controlBox;if(!o)return!1;var n={};p.default.mergeJSON(e,n);var s="<div id='controlwrapper' class='controlwrapper "+p.default.rValue(i)+"'>";for(var a in n){var c=n[a];c=c||{},s+="<div id='"+a+"' class='"+a+"  "+(p.default.rValue(c.className)?p.default.rValue(c.className):"camera-empty")+"'>",s+="<div class='ds-dvs-ui-iconfont "+p.default.rValue(c.iconClass)+"'></div>",s+="<text>"+p.default.rValue(c.text)+"</text>",s+="</div>"}s+="</div>",o.innerHTML=s;var h=function(t){var e=n[t];e=e||{};var i=p.default.rValue(e.onButtonClick),o=document.getElementById(t);if(!o||!i)return"continue";o.addEventListener("click",(function(){r.emit(i)})),o.addEventListener("touchstart",(function(t){}))};for(var a in n)h(a);document.body.addEventListener("touchstart",(function(){}))},t.prototype.showResultImage=function(t){this._resultImg&&(this._resultImg.style.display="block",this._resultImg.src=t,this._video.style.display="none")},t.prototype.hideResultImage=function(t){if(this._resultImg){var e=this._resultImg.src;e&&!t&&URL.revokeObjectURL(e),this._resultImg.style.display="none",this._resultImg.src="",this._video.style.display=""}},t.prototype._cropInit=function(){var t=this._video,e=this._cropComponent,i=this._cvsDrawArea.getBoundingClientRect();e.setValidAreaSize(t.clientWidth,t.clientHeight),e.setImageSize(t.clientWidth,t.clientWidth),e.bindCallback(this._cropCallback.bind(this)),e.canvasLeft=i.left,e.canvasTop=i.top;var r="mousedown",o="mousemove",n="mouseup";"ontouchstart"in window&&(r="touchstart",o="touchmove",n="touchend"),this._cvsDrawArea&&(this._cvsDrawArea.addEventListener(r,(function(t){e.onStartHandler(t)})),this._cvsDrawArea.addEventListener(o,(function(t){e.onMoveHandler(t)})),this._cvsDrawArea.addEventListener(n,(function(t){e.onEndHandler(t)})))},t.prototype._cropCallback=function(t){var e=this._cvsDrawArea;if(e){var i=e.getContext("2d");if(!t)return i.clearRect(0,0,e.width,e.height),!1;this._clearCanvasRect(),i.strokeStyle="white",i.lineWidth=5,i.clearRect(0,0,e.width,e.height),i.save();var r=this._pixelRatio;i.beginPath(),i.moveTo(t[0]*r,t[1]*r);for(var o=1;o<=4;o++){var n=2*o%8;i.lineTo(t[n]*r,t[n+1]*r)}i.closePath(),i.stroke();for(o=0;o<4;o++){var s=2*(o+1)%8,a=(t[n=2*o%8]+t[s])*r/2,c=(t[n+1]+t[s+1])*r/2;i.beginPath(),i.arc(t[n]*r,t[n+1]*r,5,0,2*Math.PI),i.closePath(),i.stroke(),i.beginPath(),i.arc(a,c,5,0,2*Math.PI),i.closePath(),i.stroke()}return i.restore(),!0}},t.prototype.getSourceList=function(){return this._cameraManager.getAllCamerasInfo()},t.prototype.selectSource=function(t){return o(this,void 0,void 0,(function(){var e;return n(this,(function(i){switch(i.label){case 0:return p.default.isString(t)||this._throwParaTypeError(r(t),"string"),this._cameraManager._allCamerasInfo&&0!==this._cameraManager._allCamerasInfo.length?[3,2]:[4,this._cameraManager.getAllCamerasInfo()];case 1:i.sent(),i.label=2;case 2:return(e=this._cameraManager.selectCamera(t))||this.emit("onThrowError",f.SOURCE_NOT_FOUND),[4,this.setCurrentCamera(e)];case 3:return i.sent(),[2,e]}}))}))},t.prototype.getCurrentSource=function(){return o(this,void 0,void 0,(function(){return n(this,(function(t){return this._camera?[2,this._camera._cameraInfo]:[2,null]}))}))},t.prototype.closeSource=function(){var t=this;return new Promise((function(e,i){if(t._camera){var r=t._camera._cameraInfo;t._camera.destroy(),t._camera=null,e(r)}else t.emit("onThrowError",f.NO_CAMERA_SELECTED)}))},t.prototype.play=function(t,e,i){return o(this,void 0,void 0,(function(){return n(this,(function(o){return void 0!==t&&(p.default.isElement(t)?this._videoContainer&&t===this._videoContainer.parentNode||(this.playing()&&this.emit("onThrowError",f.VIDEO_NOT_STOP),this.bindUI(t,!1)):this._throwParaTypeError(r(t),"HTMLElement")),[2,this.playDirectly(null,e,i)]}))}))},t.prototype.capture=function(){return o(this,void 0,void 0,(function(){var t;return n(this,(function(e){return this._camera||this.emit("onThrowError",f.NO_CAMERA_SELECTED),this._video?(this.playing()||this._throwError(f.VIDEO_NOT_PLAY),t=this._tempCanvas,this.calPixelRatio(),this._drawRealCameraArea(),[2,new Promise((function(e,i){t.toBlob((function(i){t.width=0,t.height=0,e(i)}))}))]):(this.emit("onThrowError",f.VIDEO_ELEMENT_REQUIRED),[2])}))}))},t.prototype.pause=function(){this._camera&&this._camera.pause()},t.prototype.stop=function(){this._camera&&(this._clearCanvasRect(),this._camera.stop())},t.prototype.resume=function(){this._camera&&this._camera.resume()},t.prototype.getStatus=function(){return this._camera?this.playing()?this.paused()?"paused":"playing":"stopped":""},t.prototype.getResolution=function(){return o(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this._camera?[4,this._camera.getResolutions()]:[3,2];case 1:return[2,t.sent()];case 2:this.emit("onThrowError",f.NO_CAMERA_SELECTED),t.label=3;case 3:return[2]}}))}))},t.prototype.setResolution=function(t){return o(this,void 0,void 0,(function(){return n(this,(function(e){return this._camera?(p.default.isObject(t)||this._throwParaTypeError(r(t),"Object"),t.width>0&&t.height>0||this._throwParaValueError(JSON.stringify(t),"resolution"),this.playing()?[2,this._camera.setResolution(t.width,t.height)]:(this._camera._curResolution=t,[2,t])):(this.emit("onThrowError",f.NO_CAMERA_SELECTED),[2])}))}))},t.prototype.getCurrentResolution=function(){return o(this,void 0,void 0,(function(){return n(this,(function(t){return this._camera?[2,this._camera._curResolution]:(this.emit("onThrowError",f.NO_CAMERA_SELECTED),[2])}))}))},t}();e.default=v},function(t,e,i){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(o,n){function s(t){try{c(r.next(t))}catch(t){n(t)}}function a(t){try{c(r.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=s(i(0)).default.ErrorMessage,c=function(){function t(t){var e=this;this._cameraPermission=!1,this._allCamerasInfo=[],this._selCameraInfo=null,this._cameraSelector=null,this._onCameraSelChange=function(){var t=!0;e._selCameraInfo&&e._cameraSelector.options.length>0&&e._selCameraInfo.deviceId==e._cameraSelector.value&&(t=!1);var i={},r=e._cameraSelector.selectedOptions;t&&(r&&r.length>0?(i.deviceId=r[0].value,i.label=r[0].innerText):i=e._allCamerasInfo[0]),i.deviceId?e._selCameraInfo=i:i=null,t&&e._fireCameraSelChanged(i)},this._pub=t,this._trackCameraDeviceChanged(),this._bindEvents()}return t.prototype._requestCamera=function(){return o(this,void 0,void 0,(function(){var t,e;return n(this,(function(i){switch(i.label){case 0:if(this._cameraPermission)return[2,!1];void 0===navigator.mediaDevices&&(location.origin.startsWith("https://")?this._pub.emit("onThrowError",a.MEDIADEVICES_NOT_IMPL):this._pub.emit("onThrowError",a.HTTPS_REQUIRED)),void 0===navigator.mediaDevices.getUserMedia&&this._pub.emit("onThrowError",a.GETUSERMEDIA_NOT_IMPL),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}})];case 2:return(t=i.sent())&&(t.getTracks().forEach((function(t){t.stop()})),this._cameraPermission=!0),[3,4];case 3:throw e=i.sent(),this._pub.emit("onThrowError",e),e;case 4:return[2]}}))}))},t.prototype._bindEvents=function(){this._pub.on("onCameraSelChange",this._onCameraSelChange.bind(this))},t.prototype._trackCameraDeviceChanged=function(){var t=this;if(null==navigator.mediaDevices)return!1;navigator.mediaDevices.ondevicechange=function(e){t.getAllCamerasInfo().then((function(e){e&&t._fireCameraChanged(e)}),(function(e){t._pub.emit("onLog",e)}))}},t.prototype.getAllCamerasInfo=function(){return o(this,void 0,void 0,(function(){var t,e,i,r,o,s,a,c,h,l,u,d,p,f,v,_,m;return n(this,(function(n){switch(n.label){case 0:return[4,this._requestCamera()];case 1:return n.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(t=n.sent(),e=[],i=0,r=0;r<t.length;r++)if("videoinput"==(o=t[r]).kind){for(s=!1,a=0,c=e;a<c.length;a++)if(c[a].deviceId===o.deviceId){s=!0;break}s||((h={}).deviceId=o.deviceId,h.label=!o.label||/^camera\s[0-9]+$/.test(o.label)?"camera "+i++:o.label,e.push(h))}if(l=!0,e.length==this._allCamerasInfo.length){for(u=0,d=0,p=e;d<p.length;d++)for(f=p[d],v=0,_=this._allCamerasInfo;v<_.length;v++)if((m=_[v]).deviceId==f.deviceId&&m.label==f.label){u++;break}l=u!=e.length}return l&&(this._allCamerasInfo=e,this._renderSelCameraInfo()),[2,Promise.resolve(this._allCamerasInfo)]}}))}))},t.prototype._fireCameraChanged=function(t){this._pub.emit("onCameraChanged",t)},t.prototype.destroy=function(){this.unbindCameraSelector(),this._pub.off("onCameraChanged"),this._selCameraInfo=null},t.prototype._fireCameraSelChanged=function(t){this._pub.emit("onCameraSelChanged",t)},t.prototype._renderSelCameraInfo=function(){var t={},e=null;if(this._cameraSelector){for(var i in t.deviceId=this._cameraSelector.value,t.label=this._cameraSelector.innerText,this._cameraSelector.innerHTML="",this._allCamerasInfo){var r=this._allCamerasInfo[i],o=document.createElement("option");o.value=r.deviceId,o.innerText=r.label,this._cameraSelector.append(o),t.deviceId==r.deviceId&&(e=o)}var n=this._cameraSelector.options;if(!e&&this._selCameraInfo&&n.length)for(var s=0;s<n.length;s++)if(this._selCameraInfo.deviceId==n.item(s).value){e=n.item(s);break}e&&(this._cameraSelector.value=e.value),(t.deviceId||0!=this._allCamerasInfo.length)&&this._onCameraSelChange()}},t.prototype.bindCameraSelector=function(t){var e=this;this.unbindCameraSelector(),this._cameraSelector=t||document.createElement("select"),this._cameraSelector&&(this._cameraSelector.addEventListener("change",(function(){e._pub.emit("onCameraSelChange")})),this._renderSelCameraInfo())},t.prototype.unbindCameraSelector=function(){this._cameraSelector&&(this._cameraSelector.removeEventListener("change",this._onCameraSelChange),this._cameraSelector.innerHTML="",this._cameraSelector=null)},t.cameraExist=function(t,e){for(var i=0,r=e;i<r.length;i++){var o=r[i];if(o.deviceId==t.deviceId&&o.label==t.label)return!0}return!1},t.prototype.selectCamera=function(t){if(!t)return null;var e={};if(this._cameraSelector){var i=void 0,o=void 0;if("object"===r(t)){var n=t;n&&(i=n.deviceId,o=n.label)}"string"==typeof t&&(o=i=t);for(var s=this._cameraSelector.options,a=0;a<s.length;a++){if(i==(c=s[a]).value)return e.deviceId=c.value,e.label=c.innerText,this._cameraSelector.value=c.value,e}for(a=0;a<s.length;a++){var c;if(o==(c=s.item(a)).innerText)return e.deviceId=c.value,e.label=c.innerText,this._cameraSelector.value=c.value,e}}if(this._allCamerasInfo)for(var h={deviceId:"",label:""},l=0;l<this._allCamerasInfo.length;l++){var u=this._allCamerasInfo[l];if(t===u.deviceId)return h.deviceId=u.deviceId,h.label=u.label,h}return null},t}();e.default=c},function(t,e,i){"use strict";var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(o,n){function s(t){try{c(r.next(t))}catch(t){n(t)}}function a(t){try{c(r.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(t){n=[6,t],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(i(0)),a=i(5),c=s.default.ErrorMessage,h=function(){function t(t,e,i,r,o){var n=this;this.videoSettings={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}},this._browserInfo={chrome:!1,firefox:!1,safari:!1,mobile:!1},this._isPlugOut=!1,this._resolutionSelector=null,this._cameraInfo=null,this._allCameras=null,this._videoTrack=null,this._allResolutions=[],this._curResolution=null,this._videoEle=null,this._onResolutionSelChange=function(){var t=!0;if(n._curResolution&&n._resolutionSelector.options.length>0&&JSON.stringify(n._curResolution)==n._resolutionSelector.value&&(t=!1),n._resolutionSelector.options.length>0){var e={};if(n._resolutionSelector&&-1!=n._resolutionSelector.selectedIndex){var i=n._resolutionSelector.options[n._resolutionSelector.selectedIndex];e=JSON.parse(i.value)}n.play(e.width,e.height).then((function(){t&&n._fireResolutionChanged(e.width,e.height,e.type)})).catch((function(t){n._fireLog("Play video failed: "+(t.message||t))}))}},this._pub=o,this._initBrowserInfo(r),t?this._cameraInfo=t:(this._cameraInfo={},this._cameraInfo.deviceId="",this._cameraInfo.label=""),e&&(this._videoEle=e),this._allCameras=i,this._pub.on("onResolutionSelChange",this._onResolutionSelChange.bind(this))}return t.prototype.setPlugout=function(){this._isPlugOut=!0},t.prototype._checkPlugout=function(){this._isPlugOut&&this._pub.emit("video-error",c.CAMERA_PLUG_OUT)},t.prototype._initBrowserInfo=function(t){this._browserInfo=t||this._getBrowser()},t.prototype._getBrowser=function(){var t=new a.BrowserDetect;return{safari:"Safari"==t.browser,chrome:"Chrome"==t.browser,firefox:"Firefox"==t.browser,mobile:t.detectmobilebrowser()}},t.prototype._fireResolutionChanged=function(t,e,i){var r={};r.width=t,r.height=e,r.type=i,this._pub.emit("onResolutionChanged",r)},t.prototype._renderSelResolution=function(){var t={},e=null;if(this._resolutionSelector){var i=this._resolutionSelector.options[this._resolutionSelector.selectedIndex];i&&(t=JSON.parse(i.value),this._resolutionSelector.innerHTML="")}if(this._resolutionSelector){for(var r=0,o=this._allResolutions;r<o.length;r++){var n=o[r],s=document.createElement("option");s.value=JSON.stringify(n),s.innerText=n.width+" x "+n.height,this._resolutionSelector.append(s),t.width==n.width&&t.height==n.height&&(e=s)}var a=this._resolutionSelector.options;if(!e&&this._curResolution&&a.length)for(var c=JSON.stringify(this._curResolution),h=0;h<a.length;h++)if(c==a.item(h).value){e=a.item(h);break}e&&(this._resolutionSelector.value=e.value),(t.width||0!=this._allResolutions.length)&&this._onResolutionSelChange()}},t.prototype.bindResolutionsSelector=function(t){var e=this;this.unbindResolutionsSelector(),this._checkPlugout(),this._resolutionSelector=t||document.createElement("select"),this._resolutionSelector&&(this._resolutionSelector.addEventListener("change",(function(){e._pub.emit("onResolutionSelChange")})),this._renderSelResolution())},t.prototype.unbindResolutionsSelector=function(){this._resolutionSelector&&this._resolutionSelector.removeEventListener("change",this._onResolutionSelChange),this._resolutionSelector=null},t.prototype._getResolution=function(t,e,i,n){return r(this,void 0,void 0,(function(){var r,s,a,h,l,u,d,p;return o(this,(function(o){switch(o.label){case 0:this._checkPlugout(),r={},s=null,a=null,o.label=1;case 1:return o.trys.push([1,5,,6]),this._fireLog("request constraints: width="+e+", height="+i),[4,this._getMediaStream(this._getMediaTrackConstraints(t,e,i,n,!1))];case 2:return(s=o.sent())?(document&&document.createElement?a=document.createElement("video"):this._videoEle?a=this._videoEle:this._pub.emit("onThrowError",c.VIDEO_ELEMENT_REQUIRED),h="exact"==n,!this._browserInfo.firefox&&h?[3,4]:(a.srcObject=s,[4,a.play()])):[2,r];case 3:o.sent(),o.label=4;case 4:return r.type=n,h?(l=s.getVideoTracks()[0],(u=l.getConstraints())&&u.width?(r.height=u.height.exact?u.height.exact:u.height,r.width=u.width.exact?u.width.exact:u.width,this._fireLog("Result constraints: "+JSON.stringify(u))):(d=l.getSettings(),r.height=d.height.exact?d.height.exact:d.height,r.width=d.width.exact?d.width.exact:d.width,this._fireLog("Result constraints(getSettings): "+JSON.stringify(d)))):(r.height=a.videoHeight,r.width=a.videoWidth),[3,6];case 5:return p=o.sent(),this._fireLog("_getResolution exception:"+(p.message||p)),[3,6];case 6:return s?(this._browserInfo.firefox&&(a.srcObject=null),[4,s.getTracks().forEach((function(t){t.stop()}))]):[3,8];case 7:o.sent(),s=null,a=null,o.label=8;case 8:return[2,r]}}))}))},t.prototype.getResolutions=function(){return r(this,void 0,void 0,(function(){var t,e,i,r,n,s,a,c,h,l,u,d,p;return o(this,(function(o){switch(o.label){case 0:if(this._allResolutions.length>0)return[2,this._allResolutions];t=[],e=[{width:320,height:240,type:"exact"},{width:640,height:480,type:"exact"},{width:640,height:360,type:"exact"},{width:800,height:600,type:"exact"},{width:1280,height:720,type:"exact"},{width:1920,height:1080,type:"exact"},{width:2560,height:1440,type:"exact"},{width:3840,height:2160,type:"exact"}],i=null,this._allResolutions=[],r=0,n=e,o.label=1;case 1:return r<n.length?(s=n[r],a=s.height,c=s.width,h=s.type,this._cameraInfo?[4,this._getResolution(this._cameraInfo.deviceId,c,a,h)]:[2,null]):[3,6];case 2:return(i=o.sent())&&i.height&&(!i||!i.height||i.height==a&&i.width==c||i.height==c&&i.width==a)?[3,4]:(this._fireLog("getResolutions try to get ideal resolution: "+c+" x "+a),this._cameraInfo?[4,this._getResolution(this._cameraInfo.deviceId,c,a,"ideal")]:[2,null]);case 3:i=o.sent(),o.label=4;case 4:if(i&&i.height){for(l=!1,u=0,d=t;u<d.length;u++)if((p=d[u]).height==i.height&&p.width==i.width){l=!0;break}if(!l){if(this._fireLog("got resolution: "+JSON.stringify(i)),delete i.type,t.push(i),null===this._allResolutions)return[2,null];this._allResolutions.push(i)}}o.label=5;case 5:return r++,[3,1];case 6:return this._renderSelResolution(),[2,t]}}))}))},t.prototype.setResolution=function(t,e){return r(this,void 0,void 0,(function(){return o(this,(function(i){switch(i.label){case 0:return this._checkPlugout(),[4,this.play(t,e)];case 1:return[2,i.sent()]}}))}))},t.prototype.getVideoSettings=function(){return JSON.parse(JSON.stringify(this.videoSettings))},t.prototype.updateVideoSettings=function(t){return this.videoSettings=JSON.parse(JSON.stringify(t)),this.play()},t.prototype.destroy=function(){this.unbindResolutionsSelector(),this.stop(),this._cameraInfo=null,this._allCameras=null,this._allResolutions=null,this._videoEle=null},t.prototype.stop=function(){this._videoEle&&this._videoEle.srcObject&&(this._fireLog("======stop video========"),this._videoEle.srcObject.getTracks().forEach((function(t){t.stop()})),this._videoEle.srcObject=null,this._videoTrack=null)},t.prototype.pause=function(){this._videoEle&&this._videoEle.pause()},t.prototype.resume=function(){this._videoEle&&this.paused()&&this.playing()&&this._videoEle.play()},t.prototype.paused=function(){return!!this._videoEle&&this._videoEle.paused},t.prototype.playing=function(){if(this._isPlugOut)return!1;if(this._videoEle&&this._videoEle.srcObject)try{var t=this._videoEle.srcObject;if(t){var e=t.getVideoTracks();if(e&&0!=e.length)return!0}}catch(t){this._fireLog("get video status: "+(t.message||t))}return!1},t.prototype._getMediaTrackConstraints=function(t,e,i,r,o){var n=JSON.parse(JSON.stringify(this.videoSettings));"boolean"==typeof n.video&&(n.video={});var s="exact"==r;if(e&&(n.video.width=s?{exact:e}:{ideal:e}),i&&(n.video.height=s?{exact:i}:{ideal:i}),o&&(e&&(n.video.width={ideal:e}),i&&(n.video.height={ideal:i})),this._browserInfo.mobile&&this._browserInfo.safari&&o&&(n.video.width=n.video.height,delete n.video.height),t)delete n.video.facingMode,n.video.deviceId={exact:t};else if(n.video.facingMode){var a=n.video.facingMode;if(a instanceof Array&&a.length&&(a=a[0]),"environment"===(a=a.exact||a.ideal||a)&&this._allCameras){for(var c=0,h=this._allCameras;c<h.length;c++){var l=h[c],u=l.label.toLowerCase();if(u&&-1!=u.indexOf("facing back")&&/camera[0-9]?\s0,/.test(u)){delete n.video.facingMode,n.video.deviceId={ideal:l.deviceId};break}}n.bFmEnvironment=!!n.video.facingMode}}return n},t.prototype._getMediaStream=function(t,e){return r(this,void 0,void 0,(function(){var i;return o(this,(function(r){switch(r.label){case 0:this._fireLog("======try getUserMedia========"),"boolean"==typeof t.video&&(t.video={}),this._fireLog("ask "+JSON.stringify(t.video.width)+"x"+JSON.stringify(t.video.height)),r.label=1;case 1:return r.trys.push([1,3,,4]),this._fireLog(t),[4,navigator.mediaDevices.getUserMedia(t)];case 2:return[2,r.sent()];case 3:if(i=r.sent(),this._fireLog(i),i.name&&"OverconstrainedError"==i.name){if(e)throw i;return[2,null]}return this._fireLog("======try getUserMedia again========"),this._browserInfo.mobile&&this._browserInfo.safari?(delete t.video.width,delete t.video.height):t.bFmEnvironment?(delete t.video.facingMode,this._allCameras&&this._allCameras.length&&(t.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})):t.video=!0,this._fireLog(t),[2,navigator.mediaDevices.getUserMedia(t)];case 4:return[2]}}))}))},t.prototype._supportedResolution=function(t,e){for(var i=0,r=this._allResolutions;i<r.length;i++){var o=r[i];if(o.height==e&&o.width==t)return o.type}return"ideal"},t.prototype.play=function(t,e){return r(this,void 0,void 0,(function(){var i,r,n,s,a,h,l,u,d;return o(this,(function(o){switch(o.label){case 0:this._videoEle||this._pub.emit("onThrowError",c.VIDEO_ELEMENT_REQUIRED),"number"==typeof t&&t>0&&"number"==typeof e&&e>0||(t=this._curResolution?this._curResolution.width:1280,e=this._curResolution?this._curResolution.height:720),i=this._supportedResolution(t,e),this._checkPlugout(),this.stop(),this._fireLog("======before video========"),this.videoSettings=this._getMediaTrackConstraints(this._cameraInfo.deviceId,t,e,i,!0),r=this.videoSettings,n=null,s={},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._getMediaStream(r,!0)];case 2:return(n=o.sent())&&(a=n.getVideoTracks()).length&&(this._videoTrack=a[0],s=this._videoTrack.getSettings(),h={deviceId:s.deviceId,label:this._videoTrack.label},this._cameraInfo=h),[3,4];case 3:return l=o.sent(),this._fireLog("======get user media exception========"+(l.message||l)),"NotAllowedError"===l.name||"Permission denied"===l.message?this._pub.emit("onThrowError",c.CAMERA_NOT_OPEN):this._pub.emit("onThrowError",c.FAILED_GET_USERMEDIA),[3,4];case 4:this._videoEle.srcObject=n,this._fireLog("======play video========"),o.label=5;case 5:return o.trys.push([5,7,,10]),[4,this._videoEle.play()];case 6:return o.sent(),[3,10];case 7:return u=o.sent(),this._fireLog("======play video exception========"+(u.message||u)),[4,new Promise((function(t){setTimeout(t,1e3)}))];case 8:return o.sent(),[4,this._videoEle.play()];case 9:return o.sent(),[3,10];case 10:return this._fireLog("======after played video========"),d=s.width?{width:s.width,height:s.height}:{width:this._videoEle.videoWidth,height:this._videoEle.videoHeight},this._curResolution=d,this._pub.emit("onPlayed"),[2,d]}}))}))},t.prototype.getCapabilities=function(){return this._videoTrack.getCapabilities?this._videoTrack.getCapabilities():{}},t.prototype.getCameraSettings=function(){return this._videoTrack.getSettings()},t.prototype.getConstraints=function(){return this._videoTrack.getConstraints()},t.prototype._throwNotSupportException=function(){this._pub.emit("onThrowError",c.CAMERA_SETTINGS_NOT_SUPPORT)},t.prototype._fireLog=function(t){this._pub.emit("onLog",t)},t.prototype.applyConstraints=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this._videoTrack.applyConstraints||this._throwNotSupportException(),[4,this._videoTrack.applyConstraints(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.turnOnTorch=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.getCapabilities().torch?[4,this._videoTrack.applyConstraints({advanced:[{torch:!0}]})]:[3,2];case 1:return[2,t.sent()];case 2:this._throwNotSupportException(),t.label=3;case 3:return[2]}}))}))},t.prototype.turnOffTorch=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.getCapabilities().torch?[4,this._videoTrack.applyConstraints({advanced:[{torch:!1}]})]:[3,2];case 1:return[2,t.sent()];case 2:this._throwNotSupportException(),t.label=3;case 3:return[2]}}))}))},t.prototype.setColorTemperature=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(i){switch(i.label){case 0:return(e=this.getCapabilities().colorTemperature)||this._throwNotSupportException(),t<e.min?t=e.min:t>e.max&&(t=e.max),[4,this._videoTrack.applyConstraints({advanced:[{colorTemperature:t}]})];case 1:return[2,i.sent()]}}))}))},t.prototype.setExposureCompensation=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(i){switch(i.label){case 0:return(e=this.getCapabilities().exposureCompensation)||this._throwNotSupportException(),t<e.min?t=e.min:t>e.max&&(t=e.max),[4,this._videoTrack.applyConstraints({advanced:[{exposureCompensation:t}]})];case 1:return[2,i.sent()]}}))}))},t.prototype.setZoom=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(i){switch(i.label){case 0:return(e=this.getCapabilities().zoom)||this._throwNotSupportException(),t<e.min?t=e.min:t>e.max&&(t=e.max),[4,this._videoTrack.applyConstraints({advanced:[{zoom:t}]})];case 1:return[2,i.sent()]}}))}))},t.prototype.setFrameRate=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(i){switch(i.label){case 0:return(e=this.getCapabilities().frameRate)||this._throwNotSupportException(),t<e.min?t=e.min:t>e.max&&(t=e.max),[4,this._videoTrack.applyConstraints({width:{ideal:Math.max(this._videoEle.videoWidth,this._videoEle.videoHeight)},frameRate:t})];case 1:return[2,i.sent()]}}))}))},t}();e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserDetect=void 0;var r=function(){function t(){this.dataBrowser=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"OPR",identity:"OPR"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}],this.dataOS=[{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],this.init()}return t.prototype.init=function(){this.browser=this.searchString(this.dataBrowser)||"unknownBrowser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",this.OS=this.searchString(this.dataOS)||"unknownOS"},t.prototype.searchString=function(t){for(var e=0;e<t.length;e++){var i=t[e].string,r=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,i){if(-1!=i.indexOf(t[e].subString))return t[e].identity}else if(r)return t[e].identity}},t.prototype.searchVersion=function(t){var e=t.indexOf(this.versionSearchString);if(-1!=e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},t.prototype.detectmobilebrowser=function(){var t=window,e=navigator.userAgent||navigator.vendor||t.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|android|playbook|silk|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))return!0;if(null!==e.match(/Macintosh/i)){var i=document.createElement("canvas");if(null!==i){var r=i.getContext("webgl")||i.getContext("experimental-webgl");if(r){var o=r.getExtension("WEBGL_debug_renderer_info");if(o)if(-1!==r.getParameter(o.UNMASKED_RENDERER_WEBGL).indexOf("Apple"))return!0}}}return!1},t}();e.BrowserDetect=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Crop=void 0;var r=function(){function t(t){this.mode=0,this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.probePointRadius=6,this.sensorRadius=10,this.defaultLinecolor="rgba(0,0,0,1)",this.defaultFirstPointColor="rgba(255,0,0,1)",this.invalidLineColor="rgba(255,0,0,1)",this.invalidFirstPointColor="rgba(0,0,0,1)",this._lineColor="rgba(0,0,0,1)",this._firstPointColor="rgba(255,0,0,1)",this.pointFillColor="rgba(255,255,255,0)",this.lineWidth=2,this.dashLine=[4,2],this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this._StartX=0,this._StartY=0,this.canvasLeft=0,this.canvasTop=0,this.angle=0,this.width=0,this.height=0,this.outerWidth=0,this.outerHeight=0,this.zoomX=1,this.zoomY=1,this._callback=null,this.transformStack=null,this._init(t)}return t.prototype._init=function(t){for(var e=Object.keys(t),i=0,r=e.length;i<r;i++)this[e[i]]=t[e[i]]},t.prototype.bindCallback=function(t){this._callback=t},t.prototype.setZoom=function(t,e){this.zoomX=t,this.zoomY=e},t.prototype.setValidAreaSize=function(t,e){this.outerWidth=t,this.outerHeight=e},t.prototype.setMoveDistance=function(t,e){this.moveLeft=t,this.moveTop=e},t.prototype.setImageSize=function(t,e){this.width=t,this.height=e},t.prototype.setFreeCropBox=function(t){if(this.mode=1,!this.isCrop)return!1;if(8!==t.length)return!1;if(!this.checkRectConvexity(t))return!1;for(var e=0;e<4;e++){var i=this.getPointToCanvas(t[2*e],t[2*e+1]);i=this.transformToCanvasCenterCoordinate(i.x,i.y),t[2*e]=i.x,t[2*e+1]=i.y}return this.vertexes=t.slice(),this.midpoints=this.calcMidpoint(t).slice(),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=this.calcSlopeRatio(this.probePoints).slice(0,4),this._publish(),!0},t.prototype.setCropArea=function(t,e,i,r){this.mode=0;var o=[t,e,t+i,e,t+i,e+r,t,e+r];if(!this.isCrop)return!1;if(8!==o.length)return!1;if(!this.checkRectConvexity(o))return!1;for(var n=0;n<4;n++){var s=this.transformToImageCenterCoordinate(o[2*n],o[2*n+1]);s=this.getPointToCanvas(s.x,s.y),o[2*n]=s.x,o[2*n+1]=s.y}return this.vertexes=o.slice(),this.midpoints=this.calcMidpoint(o).slice(),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=this.calcSlopeRatio(this.probePoints).slice(0,4),this._publish(),!0},t.prototype.transformToImageCenterCoordinate=function(t,e){return{x:t-=this.width/2,y:e-=this.height/2}},t.prototype.transformToCanvasCenterCoordinate=function(t,e){return{x:t-=this.outerWidth/2,y:e-=this.outerHeight/2}},t.prototype.transformToCanvasLeftTopCoordinate=function(t,e){return{x:t+=this.outerWidth/2,y:e+=this.outerHeight/2}},t.prototype.calcMidpoint=function(t){for(var e=t.slice(0,8).concat(t[0],t[1]),i=[],r=0;r<4;r++){var o=(e[2*r]+e[2*r+2])/2,n=(e[2*r+1]+e[2*r+3])/2;i.push(o,n)}return i},t.prototype.calcSlopeRatio=function(t){for(var e=[],i=null,r=t.slice(0,8).concat(t[0],t[1]),o=0;o<4;o++)i=r[2*o+3]-r[2*o+1]==0&&r[2*o+2]-r[2*o]==0?0:(r[2*o+3]-r[2*o+1])/(r[2*o+2]-r[2*o]),e.push(i);return e},t.prototype.checkRectConvexity=function(t){var e=(t[6]-t[0])*(t[3]-t[1])-(t[7]-t[1])*(t[2]-t[0]),i=(t[0]-t[2])*(t[5]-t[3])-(t[1]-t[3])*(t[4]-t[2]),r=(t[2]-t[4])*(t[7]-t[5])-(t[3]-t[5])*(t[6]-t[4]),o=(t[4]-t[6])*(t[1]-t[7])-(t[5]-t[7])*(t[0]-t[6]);if(e*i*r*o<0)return!1;var n=t.slice().concat(t.slice(0,2));if(this.slopeRatio.length)for(var s=0;s<2;s++){if(this.slopeRatio[s]!==this.slopeRatio[s+2])if(this.calcIntersection(n.slice(2*s,2*s+2),n.slice(2*s+2,2*s+4),n.slice(2*s+4,2*s+6),n.slice(2*s+6,2*s+8)))return!1}return e*i*r*o>0},t.prototype.checkImageEdge=function(t,e){var i=this.getPointToCanvas(0,0),r=this.getPointToCanvas(this.width,this.height),o=r.x-i.x,n=r.y-i.y;return t>=-o/2&&t<=o/2&&e>=-n/2&&e<=n/2},t.prototype.getPointToImage=function(t,e){return{x:t=(t-(this.outerWidth/2-this.width*this.zoomX/2-this.moveLeft))/this.zoomX,y:e=(e-(this.outerHeight/2-this.height*this.zoomY/2-this.moveTop))/this.zoomY}},t.prototype.getPointToCanvas=function(t,e){return{x:t=t*this.zoomX+(this.outerWidth/2-this.width*this.zoomX/2-this.moveLeft),y:e=e*this.zoomY+(this.outerHeight/2-this.height*this.zoomY/2-this.moveTop)}},t.prototype.checkProbePoint=function(t,e){for(var i=this.sensorRadius,r=0;r<8;r++){var o=this.probePoints[2*r],n=this.probePoints[2*r+1],s={x:t,y:e};if(this.transformStack&&(s=this.transformStack.setPointTransform(t,e)),s.x<=o+i&&s.x>=o-i&&s.y<=n+i&&s.y>=n-i)return r}return null},t.prototype.pointRotate=function(t,e,i,r,o){return o%360?(o=o/180*Math.PI,{x:(t-i)*Math.cos(o)-(e-r)*Math.sin(o)+i,y:(t-i)*Math.sin(o)+(e-r)*Math.cos(o)+r}):{x:t,y:e}},t.prototype.onStartHandler=function(t){if(this.isCrop){var e=void 0!==t.clientX?t.clientX:t.changedTouches[0].clientX,i=void 0!==t.clientY?t.clientY:t.changedTouches[0].clientY;this._StartX=e-this.canvasLeft,this._StartY=i-this.canvasTop;var r={x:this._StartX,y:this._StartY};r=this.transformToCanvasCenterCoordinate(r.x,r.y);var o=this.checkProbePoint(r.x,r.y);null!==o?(this.isPointSelected=!0,this.activeProbePoint=o):(this.isPointSelected=!1,this.activeProbePoint=null)}},t.prototype.onMoveHandler=function(t){if(this.isPointSelected&&null!==this.activeProbePoint){var e=void 0!==t.clientX?t.clientX:t.changedTouches[0].clientX,i=void 0!==t.clientY?t.clientY:t.changedTouches[0].clientY,r=e-this.canvasLeft,o=i-this.canvasTop,n=this.activeProbePoint,s=this.transformToCanvasCenterCoordinate(r,o);this.transformStack&&(s=this.transformStack.setPointTransform(s.x,s.y));var a=s.x,c=s.y,h=this.probePoints.slice();h=0===this.mode?this._moveNormalCropBox(h,n,a,c):this._moveFreeCropBox(h,n,a,c);for(var l=!1,u=0;u<4;u++){if(!this.checkImageEdge(h[2*u],h[2*u+1])){l=!0;break}}l||(this.probePoints=h.slice()),this.checkRectConvexity(this.probePoints)?(this._lineColor=this.defaultLinecolor,this._firstPointColor=this.defaultFirstPointColor):(this._lineColor=this.invalidLineColor,this._firstPointColor=this.invalidFirstPointColor);var d=this.calcMidpoint(this.probePoints);this.probePoints=this.probePoints.slice(0,8).concat(d),this._publish()}},t.prototype.onEndHandler=function(t){var e=void 0!==t.clientX?t.clientX:t.changedTouches[0].clientX,i=void 0!==t.clientY?t.clientY:t.changedTouches[0].clientY,r=e-this.canvasLeft,o=i-this.canvasTop,n=this._StartX,s=this._StartY;if(this._StartX=0,this._StartY=0,this._lineColor=this.defaultLinecolor,this._firstPointColor=this.defaultFirstPointColor,this.isPointSelected&&null!==this.activeProbePoint){this.activeProbePoint=null,this.isPointSelected=!1;var a=this.checkRectConvexity(this.probePoints);if(n===r&&s===o||!a)return this.probePoints=this.vertexes.slice().concat(this.midpoints),this.slopeRatio=this.calcSlopeRatio(this.probePoints).slice(0,4),void this._publish();this.vertexes=this.probePoints.slice(0,8),this.midpoints=this.probePoints.slice(8,16),this._publish()}},t.prototype._moveNormalCropBox=function(t,e,i,r){if(e<4){var o=i-t[2*e],n=r-t[2*e+1];t[2*e]=i,t[2*e+1]=r;var s=(e+1)%4,a=(e+3)%4;e%2?(t[2*s]+=o,t[2*a+1]+=n):(t[2*s+1]+=o,t[2*a]+=n)}else{var c=e-4,h=this.slopeRatio[c%4];0===h?(t[(2*c+3)%8]=r,t[(2*c+1)%8]=r):h!==1/0&&h!==-1/0||(t[(2*c+2)%8]=i,t[(2*c+0)%8]=i)}return t},t.prototype._moveFreeCropBox=function(t,e,i,r){if(e<4){var o=this.getPointToCanvas(0,0),n=this.getPointToCanvas(this.width,this.height),s=n.x-o.x,a=n.y-o.y;t[2*e]=i,t[2*e+1]=r,t[2*e]=Math.min(Math.max(-s/2,t[2*e]),s/2),t[2*e+1]=Math.min(Math.max(-a/2,t[2*e+1]),a/2),this.slopeRatio=this.calcSlopeRatio(this.probePoints).slice(0,4)}else{var c=e-4,h=this.slopeRatio[c%4],l=1*r-h*i,u=-l/h,d=1*t[(2*c+9)%8]-h*t[(2*c+8)%8],p=-d/h,f=this.slopeRatio[(c+1)%4],v=1*t[(2*c+3)%8]-f*t[(2*c+2)%8],_=this.slopeRatio[(c+3)%4],m=1*t[(2*c+1)%8]-_*t[(2*c+0)%8];0===h?(t[(2*c+3)%8]=r,f!==1/0&&f!==-1/0&&(t[(2*c+2)%8]=(1*r-v)/f),t[(2*c+1)%8]=r,_!==1/0&&_!==-1/0&&(t[(2*c+0)%8]=(1*r-m)/_)):h===1/0||h===-1/0?(t[(2*c+2)%8]=i,t[(2*c+3)%8]=(f*i+v)/1,t[(2*c+0)%8]=i,t[(2*c+1)%8]=(_*i+m)/1):(0===f?t[(2*c+2)%8]+=u-p:f===1/0||f===-1/0?t[(2*c+3)%8]+=l-d:(t[(2*c+2)%8]=(1*v-1*l)/(1*h-1*f),t[(2*c+3)%8]=(f*l-h*v)/(1*f-1*h)),0===_?t[(2*c+0)%8]+=u-p:_===1/0||_===-1/0?t[(2*c+1)%8]+=l-d:(t[(2*c+0)%8]=(1*m-1*l)/(1*h-1*_),t[(2*c+1)%8]=(_*l-h*m)/(1*_-1*h)))}return t},t.prototype._publish=function(){if(this._callback){for(var t=this.probePoints.slice(0,8),e=0;e<4;e++){var i=this.transformToCanvasLeftTopCoordinate(t[2*e],t[2*e+1]);i=this.getPointToImage(i.x,i.y),t[2*e]=i.x,t[2*e+1]=i.y}this._callback(t.slice())}},t.prototype.calcIntersection=function(t,e,i,r){if(this._isRectCross(t,e,i,r)&&this._isLineSegmentCross(t,e,i,r)){var o,n=void 0,s=void 0;if(n=(r[0]-i[0])*(t[1]-e[1])-(e[0]-t[0])*(i[1]-r[1]),s=(t[1]-i[1])*(e[0]-t[0])*(r[0]-i[0])+i[0]*(r[1]-i[1])*(e[0]-t[0])-t[0]*(e[1]-t[1])*(r[0]-i[0]),0===n||0===s){var a=this._getLine(t,e),c=this._getLine(i,r),h=a[0],l=a[1],u=c[0],d=c[1];if(l[0]===u[0]&&l[1]===u[1])return l;if(h[0]===d[0]&&h[1]===d[1])return h;if(this._isOnLine(l,c)&&this._isOnLine(u,a))return[u,l];if(this._isOnLine(h,c)&&this._isOnLine(d,a))return[h,d];if(this._isOnLine(h,c)&&this._isOnLine(l,c))return[h,l];if(this._isOnLine(u,c)&&this._isOnLine(d,c))return[u,d]}return o=s/n,n=(t[0]-e[0])*(r[1]-i[1])-(e[1]-t[1])*(i[0]-r[0]),[o,(s=e[1]*(t[0]-e[0])*(r[1]-i[1])+(r[0]-e[0])*(r[1]-i[1])*(t[1]-e[1])-r[1]*(i[0]-r[0])*(e[1]-t[1]))/n]}return!1},t.prototype._getLine=function(t,e){return t[0]===e[0]?t[1]<e[1]?[t,e]:[e,t]:t[0]<e[0]?[t,e]:[e,t]},t.prototype._isOnLine=function(t,e){return e[0][0]===e[1][0]?t[1]>=e[0][1]&&t[1]<=e[1][1]:t[0]>=e[0][0]&&t[0]<=e[1][0]},t.prototype._isRectCross=function(t,e,i,r){var o=Math.min,n=Math.max;return o(t[0],e[0])<=n(i[0],r[0])&&o(i[0],r[0])<=n(t[0],e[0])&&o(t[1],e[1])<=n(i[1],r[1])&&o(i[1],r[1])<=n(t[1],e[1])},t.prototype._isLineSegmentCross=function(t,e,i,r){var o,n;return!(((o=t[0]*(i[1]-e[1])+e[0]*(t[1]-i[1])+i[0]*(e[1]-t[1]))^(n=t[0]*(r[1]-e[1])+e[0]*(t[1]-r[1])+r[0]*(e[1]-t[1])))>=0&&0!==o&&0!==n)&&!(((o=i[0]*(t[1]-r[1])+r[0]*(i[1]-t[1])+t[0]*(r[1]-i[1]))^(n=i[0]*(e[1]-r[1])+r[0]*(i[1]-e[1])+e[0]*(r[1]-i[1])))>=0&&0!==o&&0!==n)},t}();e.Crop=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.cameraException=function(t,e){var i={};return(i=new Error(e||t.message)).code=t.code,i},t}();e.default=r},function(t,e,i){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<i;e++)for(var n=arguments[e],s=0,a=n.length;s<a;s++,o++)r[o]=n[s];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.PublishSubscribe=void 0;var o=function(){function t(){this._events=[]}return t.prototype.on=function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},t.prototype.emit=function(t){for(var e,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var n=this._events[t];if(!n||0===n.length)return!1;for(var s=n.length,a=0;a<s;a++)(e=n[a]).call.apply(e,r([null],i))},t.prototype.off=function(t,e){var i=this._events[t];if(!i)return!1;if(e)for(var r=i.length,o=0;o<r;o++){i[o]===e&&i.splice(o,1)}else i&&(i.length=0)},t}();e.PublishSubscribe=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isFunction:function(t){return"function"==typeof t},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t&&!isNaN(t)},isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isElement:function(t){return t instanceof HTMLElement},mergeJSON:function(t,e){for(var i in t)void 0===e[i]?e[i]=t[i]:this.isObject(t[i])?this.mergeJSON(t[i],e[i]):e[i]=t[i]},rValue:function(t){return void 0===t?"":t}}},function(t,e,i){}]);

// Dynamsoft File Uploader version: 1.6.0.0428
// @Tue 07/21/2020 145010
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Upload
* Web Site: http://www.dynamsoft.com
*
* Copyright 2020, Dynamsoft Corporation
* Author: Dynamsoft Support Team
* Version: 1.6.0.0428
*/

//NOTE: var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}}; appears later and is commented out
/*;var Dynamsoft=window.Dynamsoft||{Lib:{}};*/(function(c){var d=c.WebTwainEnv||(c.WebTwainEnv={});d.initQueue=[];d.inited=!1;c.initOrder=c.initOrder||[]})(Dynamsoft);var Dynamsoft=Dynamsoft||{};(function(e,b,a){var c=20200521;if(b._preDefine_ver){if(b._preDefine_ver>=c){return}}b._preDefine_ver=c;var d=function(g,j){for(var h in j){if(j.hasOwnProperty(h)){g[h]=j[h]}}return g},f=function(j){if(null==j||"object"!=typeof j){return j}var k,h,g;if(j instanceof Date){k=new Date();k.setTime(j.getTime());return k}else{if(j instanceof Array){k=[];g=j.length;for(h=0;h<g;h++){k[h]=f(j[h])}return k}else{if(j instanceof Object){k={};for(h in j){if(j.hasOwnProperty(h)){k[h]=f(j[h])}}return k}else{return 0}}}};if(!b.Lib){b.Lib={}}d(b.Lib,{win:e,doc:e.document,debug:!1,nil:a,mix:d,clone:f,keys:Object.keys,guid:function(l){var k=[],g="0123456789abcdef",j,h;for(j=0;j<8;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");for(j=0;j<4;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-4");for(j=0;j<3;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");h=g.substr(Math.floor(Math.random()*16),1);h=g.substr((h&3)|8,1);k.push(h);for(j=0;j<3;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");for(j=0;j<8;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.unshift(l);return k.join("")},now:Date.now||function(){return +new Date()},noop:function(){}})})(typeof window!=="undefined"?window:this,Dynamsoft);(function(d){var b=!({toString:1}.propertyIsEnumerable("toString")),c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function a(f,e){return({}).hasOwnProperty.call(f,e)}d.keys=Object.keys||function(h){var e=[],g,f;for(g in h){if(a(h,g)){e.push(g)}}if(b){for(f=c.length-1;f>=0;f--){g=c[f];if(a(h,g)){e.push(g)}}}return e}})(Dynamsoft.Lib);(function(j,k){var f=20200716;if(j._isXXX_ver){if(j._isXXX_ver>=f){return}}j._isXXX_ver=f;var o=j.mix,l,g,i=!1,e=!0,d=i,c={}.hasOwnProperty,n={},m=(typeof HTMLElement==="object");function h(p){return p===k}function a(p){return p!==k}o(j,{isDef:a,isUndef:h,isUndefined:h,isNull:function(p){return(p===null)},isNaN:function(p){return isNaN(p)},type:function(p){if(p===null||p===k){return String(p)}return n[{}.toString.call(p)]||"object"},isPlainObject:function(s){if(!s||j.type(s)!=="object"||s.nodeType||s.window==s){return i}var p,q;try{if((q=s.constructor)&&!c(s,"constructor")&&!c(q.prototype,"isPrototypeOf")){return i}}catch(r){return i}for(p in s){}return(h(p)||c(s,p))},isDOM:function(p){return m?(p instanceof HTMLElement):p&&typeof p==="object"&&(p.nodeType===1||p.nodeType===9)&&typeof p.nodeName==="string"},isDOMInBody:function(q){var p=q;if(j.isDOM(q)){while(!p&&p!=document.body){p=p.parentNode}}else{p=0}return !!p}});function b(p,q){n["[object "+p+"]"]=(q=p.toLowerCase());j["is"+p]=function(r){return j.type(r)===q}}b("Function");j.each=l=function(t,v,p){if(t){var w,r,x,u=0,q=t.length,s=h(q)||j.isFunction(t);p=p||null;if(s){x=j.keys(t);for(;u<x.length;u++){w=x[u];if(v.call(p,t[w],w,t)===i){break}}}else{for(r=t[0];u<q;r=t[++u]){if(v.call(p,r,u,t)===i){break}}}}return t};g=["String","Object","Boolean","Number"];if(Array.isArray){j.isArray=Array.isArray}else{g.push("Array")}l(g,b)})(Dynamsoft.Lib);(function(c){var a=c.mix,b=c.win,e;var d=20200521;if(c._log_ver){if(c.isNumber(c._log_ver)&&c._log_ver>=d){return}}c._log_ver=d;if(c.isDef(b.console)){e=b.console;if(!c.isFunction(e.log)||!c.isFunction(e.error)){e=false}}a(c,{log:function(f){if(c.debug&&e){e.log(f)}},error:function(f){if(c.debug&&e){e.error(f)}},getLogger:function(){var f=c.log;return{warn:f,log:f,info:f,debug:f}}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._random_ver){if(b._random_ver>=a){return}}b._random_ver=a;b.getRandom=function(){var d=b.now()%10000,c=[],f;for(var e=0;e<5;e++){f=Math.floor(Math.random()*10);if(e==0&&f==0){e=-1;continue}c.push(f)}if(d<10){c.push("000")}else{if(d<100){c.push("00")}else{if(d<1000){c.push("0")}}}c.push(d);return c.join("")}})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._strUtil_ver){if(b.isNumber(b._strUtil_ver)&&b._strUtil_ver>=a){return}}b._strUtil_ver=a;b.mix(b,{startsWith:function(d,c){return d.lastIndexOf(c,0)===0},endsWith:function(e,d){var c=e.length-d.length;return c>=0&&e.indexOf(d,c)===c},replaceAll:function(e,d,c){return e.replace(new RegExp(d,"gi"),c)},upperCaseFirst:function(c){return c.charAt(0).toUpperCase()+c.substr(1)},makeArray:function(h){if(h==null){return[]}if(b.isArray(h)){return h}var c=typeof h.length,g=typeof h;if(c!=="number"||h.alert||g==="string"||(g==="function"&&!("item" in h&&c==="number"))){return[h]}var e=[];for(var f=0,d=h.length;f<d;f++){e[f]=h[f]}return e}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._extend_ver){if(b.isNumber(b._extend_ver)&&b._extend_ver>=a){return}}b._extend_ver=a;b.extend=function(c,d){var e=function(){c.apply(this,arguments);if(d){d.apply(this,arguments)}};b.each(c.prototype,function(g,f){e.prototype[f]=g});e.prototype.constructor=e;return e}})(Dynamsoft.Lib);(function(c){var a=20200521;if(c._attribute_ver){if(c.isNumber(c._attribute_ver)&&c._attribute_ver>=a){return}}c._attribute_ver=a;function b(e){var d=this,f=d.constructor;d.__attrs={};d.__attrVals={};d.userConfig=e;while(f){d.addAttrs(f.ATTRS);f=f.superclass?f.superclass.constructor:null}c.mix(d.__attrs,e)}c.mix(b.prototype,{get:function(e){var d=this;if(e in d.__attrs){return d.__attrs[e]}return""},set:function(f,e){var d=this;if(f in d.__attrs){d.__attrs[f]=e}},addAttrs:function(d){c.mix(this.__attrs,d)}});b.extend=function(f){var d=this,g,e;f=f||{};if(f.constructor){g=f.constructor}e=c.extend(d,g);c.mix(e,f);return e};c.Attributes=b})(Dynamsoft.Lib);(function(h){var m=20200521;if(h._json_ver){if(h._json_ver>=m){return}}h._json_ver=m;var j=h.win.JSON;if(j&&j.parse&&j.stringify){h.parse=j.parse;h.stringify=j.stringify;return}var l=(function(){var q={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},p={},r=/["\b\f\n\r\t\x00-\x1f]/g,o=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;h.each(q,function(s,t){p[s]=t});p["\\/"]="/";p["\\\\"]="\\";return{quote:function(s){return'"'+s.replace(r,function(t){var u;if(!(u=q[t])){u="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(0-4)}return u})+'"'},unQuote:function(s){return s.slice(1,s.length-1).replace(o,function(t){var u;if(!(u=p[t])){u=String.fromCharCode(parseInt(t.slice(2),16))}return u})}}})(),i;function b(o){return o<10?"0"+o:o}function f(F,z,r,E,D,t){var u=t;t+=E;var v,q,x=0,s;if(r!==undefined){v=r}else{v=h.keys(F)}var C=[];for(q=v.length;x<q;x++){s=v[x];var o=i(s,F,z,r,E,D,t);if(o!==undefined){var w=l.quote(s);w+=":";if(E){w+=" "}w+=o;C[C.length]=w}}var A;if(!C.length){A="{}"}else{if(!E){A="{"+C.join(",")+"}"}else{var y=",\n"+t;var B=C.join(y);A="{\n"+t+B+"\n"+u+"}"}}return A}function n(B,t,p,A,z,q){var r=q;q+=A;var y=[];var v=B.length;var u=0;while(u<v){var o=i(String(u),B,t,p,A,z,q);if(o===undefined){y[y.length]="null"}else{y[y.length]=o}++u}var w;if(!y.length){w="[]"}else{if(!A){w="["+y.join(",")+"]"}else{var s="\n,"+q;var x=y.join(s);w="[\n"+q+x+"\n"+r+"]"}}return w}i=function(r,q,u,s,v,p,o){var t=q[r];if(t&&typeof t==="object"){if(typeof t.toJSON==="function"){t=t.toJSON(r)}else{if(t instanceof Date){t=isFinite(t.valueOf())?t.getUTCFullYear()+"-"+b(t.getUTCMonth()+1)+"-"+b(t.getUTCDate())+"T"+b(t.getUTCHours())+":"+b(t.getUTCMinutes())+":"+b(t.getUTCSeconds())+"Z":null}else{if(t instanceof String||t instanceof Number||t instanceof Boolean){t=t.valueOf()}}}}if(u!==undefined){t=u.call(q,r,t)}switch(typeof t){case"number":return isFinite(t)?String(t):"null";case"string":return l.quote(t);case"boolean":return String(t);case"object":if(!t){return"null"}if(h.isArray(t)){return n(t,u,s,v,p,o)}return f(t,u,s,v,p,o)}return undefined};h.stringify=function(r,o,q){var t="";var p,s;if(o){if(typeof o==="function"){s=o}else{if(h.isArray(o)){p=o}}}if(typeof q==="number"){q=Math.min(10,q);t=new Array(q+1).join(" ")}else{if(typeof q==="string"){t=q.slice(0,10)}}return i("",{"":r},s,p,t,[],"")};var c={},d={SHIFT_TYPE:1,REDUCE_TYPE:2,ACCEPT_TYPE:0,TYPE_INDEX:0,PRODUCTION_INDEX:1,TO_INDEX:2},a;c.yy={unQuote:l.unQuote};a=function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)};a.prototype={constructor:function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)},resetInput:function(o){h.mix(this,{input:o,matched:"",stateStack:[a.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var o=this,p=o.stateStack[o.stateStack.length-1],q=[];p=o.mapState(p);h.each(o.rules,function(s){var t=s.state||s[3];if(!t){if(p==a.STATIC.INITIAL){q.push(s)}}else{if(h.inArray(p,t)){q.push(s)}}});return q},pushState:function(o){this.stateStack.push(o)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var q=this,s=a.STATIC.DEBUG_CONTEXT_LIMIT,o=q.matched,r=q.match,p=q.input;o=o.slice(0,o.length-r.length);var u=(o.length>s?"...":"")+o.slice(-s).replace(/\n/," "),t=r+p;t=t.slice(0,s)+(t.length>s?"...":"");return u+t+"\n"+new Array(u.length+1).join("-")+"^"},mapSymbol:function(q){var o=this,p=o.symbolMap;if(!p){return q}return p[q]||(p[q]=(++o.symbolId))},mapReverseSymbol:function(p){var o=this,r=o.symbolMap,q,s=o.reverseSymbolMap;if(!s&&r){s=o.reverseSymbolMap={};h.each(r,function(u,t){s[u]=t})}if(s){return s[p]}else{return p}},mapState:function(q){var o=this,p=o.stateMap;if(!p){return q}return p[q]||(p[q]=(++o.stateId))},lex:function(){var y=this,w=y.input,r,v,o,t,z,x=y.getCurrentRules();y.match=y.text="";if(!w){return y.mapSymbol(a.STATIC.END_TAG)}for(r=0;r<x.length;r++){v=x[r];var u=v.regexp||v[1],p=v.token||v[0],q=v.action||v[2]||undefined;if((o=w.match(u))){z=o[0].match(/\n.*/g);if(z){y.lineNumber+=z.length}h.mix(y,{firstLine:y.lastLine,lastLine:y.lineNumber+1,firstColumn:y.lastColumn,lastColumn:z?z[z.length-1].length-1:y.lastColumn+o[0].length});var s;s=y.match=o[0];y.matches=o;y.text=s;y.matched+=s;t=q&&q.call(y);if(t===undefined){t=p}else{t=y.mapSymbol(t)}w=w.slice(s.length);y.input=w;if(t){return t}else{return y.lex()}}}h.error("lex error at line "+y.lineNumber+":\n"+y.showDebugInfo());return undefined}};a.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var e=new a({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});c.lexer=e;e.symbolMap={"$EOF":1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,"$START":13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20};c.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return this.$1==="true"}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){this.$1[this.$1.length]=this.$3;return this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var o={};o[this.$1.key]=this.$1.value;return o}],[20,[20,3,19],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]];c.table={gotos:{"0":{"14":7,"15":8,"16":9,"17":10},"2":{"15":12,"16":9,"17":10,"18":13},"3":{"19":16,"20":17},"18":{"15":23,"16":9,"17":10},"20":{"15":24,"16":9,"17":10},"21":{"19":25}},action:{"0":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"1":{"1":[2,2,0],"3":[2,2,0],"6":[2,2,0],"8":[2,2,0]},"2":{"2":[1,0,1],"5":[1,0,2],"6":[1,0,11],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"3":{"2":[1,0,14],"8":[1,0,15]},"4":{"1":[2,3,0],"3":[2,3,0],"6":[2,3,0],"8":[2,3,0]},"5":{"1":[2,6,0],"3":[2,6,0],"6":[2,6,0],"8":[2,6,0]},"6":{"1":[2,7,0],"3":[2,7,0],"6":[2,7,0],"8":[2,7,0]},"7":{"1":[0,0,0]},"8":{"1":[2,1,0]},"9":{"1":[2,4,0],"3":[2,4,0],"6":[2,4,0],"8":[2,4,0]},"10":{"1":[2,5,0],"3":[2,5,0],"6":[2,5,0],"8":[2,5,0]},"11":{"1":[2,10,0],"3":[2,10,0],"6":[2,10,0],"8":[2,10,0]},"12":{"3":[2,8,0],"6":[2,8,0]},"13":{"3":[1,0,18],"6":[1,0,19]},"14":{"4":[1,0,20]},"15":{"1":[2,15,0],"3":[2,15,0],"6":[2,15,0],"8":[2,15,0]},"16":{"3":[2,13,0],"8":[2,13,0]},"17":{"3":[1,0,21],"8":[1,0,22]},"18":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"19":{"1":[2,11,0],"3":[2,11,0],"6":[2,11,0],"8":[2,11,0]},"20":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"21":{"2":[1,0,14]},"22":{"1":[2,16,0],"3":[2,16,0],"6":[2,16,0],"8":[2,16,0]},"23":{"3":[2,9,0],"6":[2,9,0]},"24":{"3":[2,12,0],"8":[2,12,0]},"25":{"3":[2,14,0],"8":[2,14,0]}}};c.parse=function g(y){var A=this,o=A.lexer,t,F,E,I=A.table,B=I.gotos,s=I.action,r=A.productions,u=[null],v=[0];o.resetInput(y);while(1){t=v[v.length-1];if(!F){F=o.lex()}if(!F){h.log("it is not a valid input: "+y,"error");return false}E=s[t]&&s[t][F];if(!E){var w=[],D;if(s[t]){h.each(s[t],function(L,M){w.push(A.lexer.mapReverseSymbol(M))})}D="Syntax error at line "+o.lineNumber+":\n"+o.showDebugInfo()+"\nexpect "+w.join(", ");h.log(D);return false}switch(E[d.TYPE_INDEX]){case d.SHIFT_TYPE:v.push(F);u.push(o.text);v.push(E[d.TO_INDEX]);F=null;break;case d.REDUCE_TYPE:var J=r[E[d.PRODUCTION_INDEX]],z=J.symbol||J[0],q=J.action||J[2],C=J.rhs||J[1],H=C.length,G=0,K,x=u[u.length-H];A.$$=x;K=undefined;for(;G<H;G++){A["$"+(H-G)]=u[u.length-1-G]}if(q){K=q.call(A)}if(K!==undefined){x=K}else{x=A.$$}if(H){v=v.slice(0,-1*H*2);u=u.slice(0,-1*H)}v.push(z);u.push(x);var p=B[v[v.length-2]][v[v.length-1]];v.push(p);break;case d.ACCEPT_TYPE:return x}}};function k(w,o,x){var s=w[o],t,v,u;if(typeof s==="object"){if(h.isArray(s)){t=0;v=s.length;var r=[];while(t<v){u=k(s,String(t),x);if(u!==undefined){r[r.length]=u}}s=r}else{var y=h.keys(s);t=0;for(v=y.length;t<v;t++){var q=y[t];u=k(s,q,x);if(u===undefined){delete s[q]}else{s[q]=u}}}}return x.call(w,o,s)}h.parse=function(q,o){var p=c.parse(String(q));if(o){return k({"":p},"",o)}else{return p}}})(Dynamsoft.Lib);(function(e){var d=20200521;if(e._array_ver){if(e._array_ver>=d){return}}e._array_ver=d;var c=Array.prototype,b=c.indexOf,a=c.filter;if(!e.isFunction(b)){b=function(h,i){var g;if(this==null){return -1}var j=Object(this);var f=j.length>>>0;if(f===0){return -1}var l=+i||0;if(Math.abs(l)===Infinity){l=0}if(l>=f){return -1}g=Math.max(l>=0?l:f-Math.abs(l),0);while(g<f){if(g in j&&j[g]===h){return g}g++}return -1}}e.mix(e,{filter:a?function(f,h,g){return a.call(f,h,g||this)}:function(f,i,h){var g=[];e.each(f,function(l,k,j){if(i.call(h||this,l,k,j)){g.push(l)}});return g},indexOf:function(g,f){return b.call(f,g)},uniq:function(l){var k=[],f=l.length;for(var h=0;h<f;h++){for(var g=h+1;g<f;g++){if(l[h]===l[g]){h++;g=h}}k.push(l[h])}return k}})})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._function_ver){if(d._function_ver>=c){return}}d._function_ver=c;var b=Array.prototype,a=Function.prototype;if(!d.isFunction(a.bind)){a.bind=function(g){var f=this;if(1<arguments.length){var e=b.slice.call(arguments,1);return function(){return f.apply(g,arguments.length?e.concat(b.slice.call(arguments)):e)}}return function(){return arguments.length?f.apply(g,arguments):f.call(g)}}}})(Dynamsoft.Lib);(function(f){var d=20200521;if(f._string_ver){if(f._string_ver>=d){return}}f._string_ver=d;var b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,e=String.prototype,c="",a=e.trim;if(!a){a=e.trim=function(){return this.replace(b,c)}}f.trim=function(g){return g==null?c:a.call(g)}})(Dynamsoft.Lib);(function(g,c){var t="",j=!1,f=!0,s=g.getLogger(),l=g.isDef,a=g.each,k="&",m="=",p=16,d={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},o={},h,i,b=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;a(d,function(v,u){o[v]=u});function r(v){var u=typeof v;return v==null||(u!=="object"&&u!=="function")}function q(){if(h){return h}var u=t;a(d,function(v){u+=v+"|"});u=u.slice(0,-1);h=new RegExp(u,"g");return h}function n(){if(i){return i}var u=t;a(o,function(v){u+=v+"|"});u+="&#(\\d{1,5});";i=new RegExp(u,"g");return i}function e(u){return encodeURIComponent(String(u))}g.mix(g,{urlEncode:e,urlDecode:function(u){return decodeURIComponent(u.replace(/\+/g," "))},fromUnicode:function(u){return u.replace(/\\u([a-f\d]{4})/ig,function(v,w){return String.fromCharCode(parseInt(w,p))})},escapeHtml:function(u){return(u+"").replace(q(),function(v){return o[v]})},escapeRegExp:function(u){return u.replace(b,"\\$&")},unEscapeHtml:function(u){return u.replace(n(),function(v,w){return d[v]||String.fromCharCode(+w)})},param:function(y,x,v,u){x=x||k;v=v||m;if(g.isUndef(u)){u=f}var w=[];a(y,function(B,z){var A=e(z);if(r(B)){w.push(A);if(l(B)){w.push(v,e(B+t))}w.push(x)}else{if(g.isArray(B)&&B.length){a(B,function(C){if(r(C)){w.push(A,(u?e("[]"):t));if(l(C)){w.push(v,e(C+t))}w.push(x)}})}}});w.pop();return w.join(t)},unparam:function(B,F,E){if(!g.isString(B)||!(B=g.trim(B))){return{}}F=F||k;E=E||m;var A={},C,u=g.urlDecode,v=B.split(F),D,w,x=0,y=v.length;for(;x<y;++x){C=g.indexOf(E,v[x]);if(C===-1){D=u(v[x]);w=c}else{D=u(v[x].substring(0,C));w=v[x].substring(C+1);try{w=u(w)}catch(z){s.error("decodeURIComponent error : "+w);s.error(z)}if(g.endsWith(D,"[]")){D=D.substring(0,D.length-2)}}if(D in A){if(g.isArray(A[D])){A[D].push(w)}else{A[D]=[A[D],w]}}else{A[D]=w}}return A}})})(Dynamsoft.Lib);(function(d){var c=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function b(j,e){var g=[];for(var f=0;f<j.length;f++){var h=j[f];if(!h||h==="."){continue}if(h===".."){if(g.length&&g[g.length-1]!==".."){g.pop()}else{if(e){g.push("..")}}}else{g.push(h)}}return g}var a=d.Path={resolve:function(){var h="",f,g,e=(arguments),j,k=0;for(g=e.length-1;g>=0&&!k;g--){j=e[g];if(d.isString(j)&&!!j){h=j+"/"+h;k=j.charAt(0)==="/"}}f=b(d.filter(h.split("/"),function(i){return !!i}),!k).join("/");return((k?"/":"")+f)||"."},normalize:function(f){var g=f.charAt(0)==="/",e=f.slice(-1)==="/";f=b(d.filter(f.split("/"),function(h){return !!h}),!g).join("/");if(!f&&!g){f="."}if(f&&e){f+="/"}return(g?"/":"")+f},join:function(){var e=d.makeArray(arguments);return a.normalize(d.filter(e,function(f){return f&&(d.isString(f))}).join("/"))},relative:function(l,k){l=a.normalize(l);k=a.normalize(k);var j=d.filter(l.split("/"),function(m){return !!m}),i=[],f,g,e=d.filter(k.split("/"),function(m){return !!m}),h=Math.min(j.length,e.length);for(f=0;f<h;f++){if(j[f]!==e[f]){break}}g=f;while(f<j.length){i.push("..");f++}i=i.concat(e.slice(g));return i.join("/")},basename:function(h,f){var e=h.match(c)||[],g;g=e[3]||"";if(f&&g&&g.slice(-1*f.length)===f){g=g.slice(0,-1*f.length)}return g},dirname:function(h){var e=h.match(c)||[],f=e[1]||"",g=e[2]||"";if(!f&&!g){return"."}if(g){g=g.substring(0,g.length-1)}return f+g},extname:function(e){return(e.match(c)||[])[4]||""}}})(Dynamsoft.Lib);(function(d,c){function b(e){if(!e._queryMap){e._queryMap=d.unparam(e._query)}}function a(e){this._query=e||""}a.prototype={constructor:a,clone:function(){return new a(this.toString())},reset:function(f){var e=this;e._query=f||"";e._queryMap=null;return e},count:function(){var e=this,f=0;b(e);d.each(e._queryMap,function(g){if(d.isArray(g)){f+=g.length}else{f++}});return f},has:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return f in g}else{return !d.isEmptyObject(g)}},get:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return g[f]}else{return g}},keys:function(){var e=this;b(e);return d.keys(e._queryMap)},set:function(f,g){var e=this,h;b(e);h=e._queryMap;if(d.isString(f)){e._queryMap[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(j,i){h[i]=j})}return e},remove:function(f){var e=this;b(e);if(f){delete e._queryMap[f]}else{e._queryMap={}}return e},add:function(f,h){var e=this,i,g;if(d.isString(f)){b(e);i=e._queryMap;g=i[f];if(d.isUndef(g)){g=h}else{g=[].concat(g).concat(h)}i[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(l,j){e.add(j,l)})}return e},toString:function(e){var f=this;b(f);return d.param(f._queryMap,c,c,e)}};d.uriQuery=a})(Dynamsoft.Lib);(function(j){var h=j.uriQuery,l=j.each,f=j.Path,n=j.getLogger(),o=/[#\/\?@]/g,c=/[#\?]/g,k=/[#@]/g,e=/#/g,g={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},b=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function a(p){return p.length===1?"0"+p:p}function i(q,p){return q.toLowerCase()===p.toLowerCase()}function m(q,p){return encodeURI(q).replace(p,function(r){return"%"+a(r.charCodeAt(0).toString(16))})}function d(r){if(r instanceof d){return r.clone()}var q,p=this;j.mix(p,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""});q=d.getComponents(r);l(q,function(s,t){s=s||"";if(t==="query"){p.query=new h(s)}else{try{s=j.urlDecode(s)}catch(u){n.error(u+"urlDecode error : "+s)}p[t]=s}});return p}d.prototype={constructor:d,clone:function(){var q=new d(),p=this;l(g,function(r,s){q[s]=p[s]});q.query=q.query.clone();return q},resolve:function(t){if(j.isString(t)){t=new d(t)}var r=this,s=0,q,p=["scheme","userInfo","hostname","port","path","query","fragment"],u=r.clone();l(p,function(w){if(w==="path"){if(s){u[w]=t[w]}else{var v=t.path;if(v){s=1;if(!j.startsWith(v,"/")){if(u.hostname&&!u.path){v="/"+v}else{if(u.path){q=u.path.lastIndexOf("/");if(q!==-1){v=u.path.slice(0,q+1)+v}}}}u.path=f.normalize(v)}}}else{if(w==="query"){if(s||t.query.toString()){u.query=t.query.clone();s=1}}else{if(s||t[w]){u[w]=t[w];s=1}}}});return u},getScheme:function(){return this.scheme},setScheme:function(p){this.scheme=p;return this},getHostname:function(){return this.hostname},setHostname:function(p){this.hostname=p;return this},setUserInfo:function(p){this.userInfo=p;return this},getUserInfo:function(){return this.userInfo},setPort:function(p){this.port=p;return this},getPort:function(){return this.port},setPath:function(p){this.path=p;return this},getPath:function(){return this.path},setQuery:function(p){if(j.isString(p)){if(j.startsWith(p,"?")){p=p.slice(1)}p=new h(m(p,k))}this.query=p;return this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(q){var p=this;if(j.startsWith(q,"#")){q=q.slice(1)}p.fragment=q;return p},isSameOriginAs:function(p){var q=this;return i(q.hostname,p.hostname)&&i(q.scheme,p.scheme)&&i(q.port,p.port)},toString:function(s){var r=[],x=this,p,v,y,q,t,u,w;if((p=x.scheme)){r.push(m(p,o));r.push(":")}if((v=x.hostname)){r.push("//");if((w=x.userInfo)){r.push(m(w,o));r.push("@")}r.push(encodeURIComponent(v));if((q=x.port)){r.push(":");r.push(q)}}if((y=x.path)){if(v&&!j.startsWith(y,"/")){y="/"+y}y=f.normalize(y);r.push(m(y,c))}if((u=(x.query.toString.call(x.query,s)))){r.push("?");r.push(u)}if((t=x.fragment)){r.push("#");r.push(m(t,e))}return r.join("")}};d.getComponents=function(s){var r="";s=s||r;var p=s.match(b)||[],q={};l(g,function(t,u){q[u]=p[t]});return q};j.Uri=d})(Dynamsoft.Lib);(function(c,b){var e=c.Lib,d=e.win,a=20200716;if(e._promise_ver){if(e.isNumber(e._promise_ver)&&e._promise_ver>=a){return}}e._promise_ver=a;if(e.isFunction(d.__zone_symbol__Promise)){e.nativePromise=d.__zone_symbol__Promise}if(self&&self.Promise){e.Promise=self.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}else{if(d&&d.Promise){e.Promise=d.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}}!function(f){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=f()}else{if("function"==typeof define&&define.amd){define([],f)}else{var g;"undefined"!=typeof window?g=window:"undefined"!=typeof global?g=global:"undefined"!=typeof self&&(g=self),g.Promise=f()}}}(function(){var f,h,i;return function g(l,m,q){function p(o,t){if(!m[o]){if(!l[o]){var v="function"==typeof _dereq_&&_dereq_;if(!t&&v){return v(o,!0)}if(k){return k(o,!0)}var n=new Error("Cannot find module '"+o+"'");throw n.code="MODULE_NOT_FOUND",n}var r=m[o]={exports:{}};l[o][0].call(r.exports,function(s){var u=l[o][1][s];return p(u?u:s)},r,r.exports,g,l,m,q)}return m[o].exports}for(var k="function"==typeof _dereq_&&_dereq_,j=0;j<q.length;j++){p(q[j])}return p}({1:[function(C,y,q){function j(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new x(16),this._normalQueue=new x(16),this._haveDrainedQueues=!1;var l=this;this.drainQueues=function(){l._drainQueues()},this._schedule=k}function m(l,o,p){this._lateQueue.push(l,o,p),this._queueTick()}function w(l,o,p){this._normalQueue.push(l,o,p),this._queueTick()}function A(l){this._normalQueue._pushOne(l),this._queueTick()}function D(l){for(;l.length()>0;){z(l)}}function z(l){var p=l.shift();if("function"!=typeof p){p._settlePromises()}else{var s=l.shift(),o=l.shift();p.call(s,o)}}var v;try{throw new Error}catch(B){v=B}var k=C("./schedule"),x=C("./queue");j.prototype.setScheduler=function(l){var n=this._schedule;return this._schedule=l,this._customScheduler=!0,n},j.prototype.hasCustomScheduler=function(){return this._customScheduler},j.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},j.prototype.fatalError=function(l,n){n?(process.stderr.write("Fatal "+(l instanceof Error?l.stack:l)+"\n"),process.exit(2)):this.throwLater(l)},j.prototype.throwLater=function(l,o){if(1===arguments.length&&(o=l,l=function(){throw o}),"undefined"!=typeof setTimeout){setTimeout(function(){l(o)},0)}else{try{this._schedule(function(){l(o)})}catch(p){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}}},j.prototype.invokeLater=m,j.prototype.invoke=w,j.prototype.settlePromises=A,j.prototype._drainQueues=function(){D(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,D(this._lateQueue)},j.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},j.prototype._reset=function(){this._isTickUsed=!1},y.exports=j,y.exports.firstLineError=v},{"./queue":17,"./schedule":18}],2:[function(j,k,l){k.exports=function(y,v,q,m){var p=!1,u=function(n,o){this._reject(o)},x=function(n,o){o.promiseRejectionQueued=!0,o.bindingPromise._then(u,u,null,this,n)},z=function(n,o){0===(50397184&this._bitField)&&this._resolveCallback(o.target)},w=function(n,o){o.promiseRejectionQueued||this._reject(n)};y.prototype.bind=function(r){p||(p=!0,y.prototype._propagateFrom=m.propagateFromFunction(),y.prototype._boundValue=m.boundValueFunction());var n=q(r),o=new y(v);o._propagateFrom(this,1);var t=this._target();if(o._setBoundTo(n),n instanceof y){var s={promiseRejectionQueued:!1,promise:o,target:t,bindingPromise:n};t._then(v,x,void 0,o,s),n._then(z,w,void 0,o,s),o._setOnCancel(n)}else{o._resolveCallback(t)}return o},y.prototype._setBoundTo=function(n){void 0!==n?(this._bitField=2097152|this._bitField,this._boundTo=n):this._bitField=-2097153&this._bitField},y.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},y.bind=function(o,r){return y.resolve(r).bind(o)}}},{}],3:[function(k,m,q){function l(){try{Promise===j&&(Promise=p)}catch(n){}return j}var p;"undefined"!=typeof Promise&&(p=Promise);var j=k("./promise")();j.noConflict=l,m.exports=j},{"./promise":15}],4:[function(j,k,l){k.exports=function(u,x,t,v){var p=j("./util"),m=p.tryCatch,q=p.errorObj,w=u._async;u.prototype["break"]=u.prototype.cancel=function(){if(!v.cancellation()){return this._warn("cancellation is disabled")}for(var o=this,r=o;o._isCancellable();){if(!o._cancelBy(r)){r._isFollowing()?r._followee().cancel():r._cancelBranched();break}var s=o._cancellationParent;if(null==s||!s._isCancellable()){o._isFollowing()?o._followee().cancel():o._cancelBranched();break}o._isFollowing()&&o._followee().cancel(),o._setWillBeCancelled(),r=o,o=s}},u.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},u.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},u.prototype._cancelBy=function(n){return n===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},u.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},u.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),w.invoke(this._cancelPromises,this,void 0))},u.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},u.prototype._unsetOnCancel=function(){this._onCancelField=void 0},u.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},u.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},u.prototype._doInvokeOnCancel=function(o,y){if(p.isArray(o)){for(var z=0;z<o.length;++z){this._doInvokeOnCancel(o[z],y)}}else{if(void 0!==o){if("function"==typeof o){if(!y){var s=m(o).call(this._boundValue());s===q&&(this._attachExtraTrace(s.e),w.throwLater(s.e))}}else{o._resultCancelled(this)}}}},u.prototype._invokeOnCancel=function(){var n=this._onCancel();this._unsetOnCancel(),w.invoke(this._doInvokeOnCancel,this,n)},u.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},u.prototype._resultCancelled=function(){this.cancel()}}},{"./util":21}],5:[function(j,k,l){k.exports=function(s){function u(o,v,r){return function(C){var n=r._boundValue();o:for(var x=0;x<o.length;++x){var A=o[x];if(A===Error||null!=A&&A.prototype instanceof Error){if(C instanceof A){return p(v).call(n,C)}}else{if("function"==typeof A){var z=p(A).call(n,C);if(z===m){return z}if(z){return p(v).call(n,C)}}else{if(q.isObject(C)){for(var y=t(A),B=0;B<y.length;++B){var w=y[B];if(A[w]!=C[w]){continue o}}return p(v).call(n,C)}}}}return s}}var q=j("./util"),t=j("./es5").keys,p=q.tryCatch,m=q.errorObj;return u}},{"./es5":10,"./util":21}],6:[function(j,k,l){k.exports=function(p){function s(){this._trace=new s.CapturedTrace(q())}function v(){return u?new s:void 0}function q(){var n=m.length-1;return n>=0?m[n]:void 0}var u=!1,m=[];return p.prototype._promiseCreated=function(){},p.prototype._pushContext=function(){},p.prototype._popContext=function(){return null},p._peekContext=p.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,m.push(this._trace))},s.prototype._popContext=function(){if(void 0!==this._trace){var n=m.pop(),o=n._promiseCreated;return n._promiseCreated=null,o}return null},s.CapturedTrace=null,s.create=v,s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var x=p.prototype._pushContext,r=p.prototype._popContext,o=p._peekContext,t=p.prototype._peekContext,w=p.prototype._promiseCreated;s.deactivateLongStackTraces=function(){p.prototype._pushContext=x,p.prototype._popContext=r,p._peekContext=o,p.prototype._peekContext=t,p.prototype._promiseCreated=w,u=!1},u=!0,p.prototype._pushContext=s.prototype._pushContext,p.prototype._popContext=s.prototype._popContext,p._peekContext=p.prototype._peekContext=q,p.prototype._promiseCreated=function(){var n=this._peekContext();n&&null==n._promiseCreated&&(n._promiseCreated=this)}},s}},{}],7:[function(j,k,l){k.exports=function(a7,aW,aR,aV){function a2(m,n){return{promise:n}}function bb(){return !1}function aQ(m,q,u){var p=this;try{m(q,u,function(n){if("function"!=typeof n){throw new TypeError("onCancel must be a function, got: "+ad.toString(n))}p._attachCancellationCallback(n)})}catch(s){return s}}function a9(m){if(!this._isCancellable()){return this}var n=this._onCancel();void 0!==n?ad.isArray(n)?n.push(m):this._setOnCancel([n,m]):this._setOnCancel(m)}function aY(){return this._onCancelField}function aP(m){this._onCancelField=m}function aU(){this._cancellationParent=void 0,this._onCancelField=void 0}function a6(m,o){if(0!==(1&o)){this._cancellationParent=m;var p=m._branchesRemainingToCancel;void 0===p&&(p=0),m._branchesRemainingToCancel=p+1}0!==(2&o)&&m._isBound()&&this._setBoundTo(m._boundTo)}function a3(m,n){0!==(2&n)&&m._isBound()&&this._setBoundTo(m._boundTo)}function a8(){var m=this._boundTo;return void 0!==m&&m instanceof a7?m.isFulfilled()?m.value():void 0:m}function bc(){this._trace=new au(this._peekContext())}function aO(m,p){if(aS(m)){var q=this._trace;if(void 0!==q&&p&&(q=q._parent),void 0!==q){q.attachExtraTrace(m)}else{if(!m.__stackCleaned__){var o=ax(m);ad.notEnumerableProp(m,"stack",o.message+"\n"+o.stack.join("\n")),ad.notEnumerableProp(m,"__stackCleaned__",!0)}}}}function aL(){this._trace=void 0}function a4(F,B,w,m,v){if(void 0===F&&null!==B&&t){if(void 0!==v&&v._returnedNonUndefined()){return}if(0===(65535&m._bitField)){return}w&&(w+=" ");var y="",D="";if(B._trace){for(var G=B._trace.stack.split("\n"),C=ay(G),x=C.length-1;x>=0;--x){var E=C[x];if(!an.test(E)){var q=E.match(ac);q&&(y="at "+q[1]+":"+q[2]+":"+q[3]+" ");break}}if(C.length>0){for(var A=C[0],x=0;x<G.length;++x){if(G[x]===A){x>0&&(D="\n"+G[x-1]);break}}}}var z="a promise was created in a "+w+"handler "+y+"but was not returned from it, see http://goo.gl/rRqMUw"+D;m._warn(z,!0,B)}}function aX(m,o){var p=m+" is deprecated and will be removed in a future version.";return o&&(p+=" Use "+o+" instead."),ba(p)}function ba(q,v,s){if(aI.warnings){var u,p=new az(q);if(v){s._attachExtraTrace(p)}else{if(aI.longStackTraces&&(u=a7._peekContext())){u.attachExtraTrace(p)}else{var m=ax(p);p.stack=m.message+"\n"+m.stack.join("\n")}}aE("warning",p)||af(p,"",!0)}}function aA(m,o){for(var p=0;p<o.length-1;++p){o[p].push("From previous event:"),o[p]=o[p].join("\n")}return p<o.length&&(o[p]=o[p].join("\n")),m+"\n"+o.join("\n")}function aN(m){for(var n=0;n<m.length;++n){(0===m[n].length||n+1<m.length&&m[n][0]===m[n+1][0])&&(m.splice(n,1),n--)}}function aZ(y){for(var v=y[0],q=1;q<y.length;++q){for(var m=y[q],p=v.length-1,u=v[p],x=-1,z=m.length-1;z>=0;--z){if(m[z]===u){x=z;break}}for(var z=x;z>=0;--z){var w=m[z];if(v[p]!==w){break}v.pop(),p--}v=m}}function ay(p){for(var s=[],v=0;v<p.length;++v){var q=p[v],u="    (No stack trace)"===q||aJ.test(q),m=u&&av(q);u&&!m&&(ab&&" "!==q.charAt(0)&&(q="    "+q),s.push(q))}return s}function a1(m){for(var p=m.stack.replace(/\s+$/g,"").split("\n"),q=0;q<p.length;++q){var o=p[q];if("    (No stack trace)"===o||aJ.test(o)){break}}return q>0&&"SyntaxError"!=m.name&&(p=p.slice(q)),p}function ax(m){var o=m.stack,p=m.toString();return o="string"==typeof o&&o.length>0?a1(m):["    (No stack trace)"],{message:p,stack:"SyntaxError"==m.name?o:ay(o)}}function af(m,q,u){if("undefined"!=typeof console){var p;if(ad.isObject(m)){var s=m.stack;p=q+aK(s,m)}else{p=q+String(m)}"function"==typeof aB?aB(p,u):("function"==typeof console.log||"object"==typeof console.log)&&console.log(p)}}function aM(p,s,v,q){var u=!1;try{"function"==typeof s&&(u=!0,"rejectionHandled"===p?s(q):s(v,q))}catch(m){ar.throwLater(m)}"unhandledRejection"===p?aE(p,v,q)||u||af(v,"Unhandled rejection "):aE(p,q)}function ai(m){var q;if("function"==typeof m){q="[function "+(m.name||"anonymous")+"]"}else{q=m&&"function"==typeof m.toString?m.toString():ad.toString(m);var u=/\[object [a-zA-Z0-9$_]+\]/;if(u.test(q)){try{var p=JSON.stringify(m);q=p}catch(s){}}0===q.length&&(q="(empty array)")}return"(<"+ah(q)+">, no stack trace)"}function ah(m){var n=41;return m.length<n?m:m.substr(0,n-3)+"..."}function ak(){return"function"==typeof aF}function al(m){var n=m.match(aD);return n?{fileName:n[1],line:parseInt(n[2],10)}:void 0}function aC(z,w){if(ak()){for(var q,m,p=(z.stack||"").split("\n"),v=(w.stack||"").split("\n"),y=-1,A=-1,x=0;x<p.length;++x){var u=al(p[x]);if(u){q=u.fileName,y=u.line;break}}for(var x=0;x<v.length;++x){var u=al(v[x]);if(u){m=u.fileName,A=u.line;break}}0>y||0>A||!q||!m||q!==m||y>=A||(av=function(n){if(aw.test(n)){return !0}var o=al(n);return o&&o.fileName===q&&y<=o.line&&o.line<=A?!0:!1})}}function au(m){this._parent=m,this._promisesCreated=0;var n=this._length=1+(void 0===m?0:m._length);aF(this,au),n>32&&this.uncycle()}var am,ao,aB,ae,ar=a7._async,az=j("./errors").Warning,ad=j("./util"),aj=j("./es5"),aS=ad.canAttachTrace,aw=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,an=/\((?:timers\.js):\d+:\d+\)/,ac=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,aJ=null,aK=null,ab=!1,ap=!(0==ad.env("BLUEBIRD_DEBUG")||!ad.env("BLUEBIRD_DEBUG")&&"development"!==ad.env("NODE_ENV")),aq=!(0==ad.env("BLUEBIRD_WARNINGS")||!ap&&!ad.env("BLUEBIRD_WARNINGS")),aa=!(0==ad.env("BLUEBIRD_LONG_STACK_TRACES")||!ap&&!ad.env("BLUEBIRD_LONG_STACK_TRACES")),t=0!=ad.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(aq||!!ad.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){function m(){for(var n=0;n<o.length;++n){o[n]._notifyUnhandledRejection()}p()}function p(){o.length=0}var o=[];ae=function(n){o.push(n),setTimeout(m,1)},aj.defineProperty(a7,"_unhandledRejectionCheck",{value:m}),aj.defineProperty(a7,"_unhandledRejectionClear",{value:p})}(),a7.prototype.suppressUnhandledRejections=function(){var m=this._target();m._bitField=-1048577&m._bitField|524288},a7.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),ae(this))},a7.prototype._notifyUnhandledRejectionIsHandled=function(){aM("rejectionHandled",am,void 0,this)},a7.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},a7.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},a7.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var m=this._settledValue();this._setUnhandledRejectionIsNotified(),aM("unhandledRejection",ao,m,this)}},a7.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},a7.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},a7.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},a7.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},a7.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},a7.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},a7.prototype._warn=function(m,o,p){return ba(m,o,p||this)},a7.onPossiblyUnhandledRejection=function(m){var o=a7._getContext();ao=ad.contextBind(o,m)},a7.onUnhandledRejectionHandled=function(m){var o=a7._getContext();am=ad.contextBind(o,m)};var a5=function(){};a7.longStackTraces=function(){if(ar.haveItemsQueued()&&!aI.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}if(!aI.longStackTraces&&ak()){var m=a7.prototype._captureStackTrace,n=a7.prototype._attachExtraTrace,p=a7.prototype._dereferenceTrace;aI.longStackTraces=!0,a5=function(){if(ar.haveItemsQueued()&&!aI.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}a7.prototype._captureStackTrace=m,a7.prototype._attachExtraTrace=n,a7.prototype._dereferenceTrace=p,aW.deactivateLongStackTraces(),aI.longStackTraces=!1},a7.prototype._captureStackTrace=bc,a7.prototype._attachExtraTrace=aO,a7.prototype._dereferenceTrace=aL,aW.activateLongStackTraces()}},a7.hasLongStackTraces=function(){return aI.longStackTraces&&ak()};var aT={unhandledrejection:{before:function(){var m=ad.global.onunhandledrejection;return ad.global.onunhandledrejection=null,m},after:function(m){ad.global.onunhandledrejection=m}},rejectionhandled:{before:function(){var m=ad.global.onrejectionhandled;return ad.global.onrejectionhandled=null,m},after:function(m){ad.global.onrejectionhandled=m}}},a0=function(){var m=function(q,r){if(!q){return !ad.global.dispatchEvent(r)}var s;try{return s=q.before(),!ad.global.dispatchEvent(r)}finally{q.after(s)}};try{if("function"==typeof CustomEvent){var o=new CustomEvent("CustomEvent");return ad.global.dispatchEvent(o),function(s,v){s=s.toLowerCase();var q={detail:v,cancelable:!0},u=new CustomEvent(s,q);return aj.defineProperty(u,"promise",{value:v.promise}),aj.defineProperty(u,"reason",{value:v.reason}),m(aT[s],u)}}if("function"==typeof Event){var o=new Event("CustomEvent");return ad.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=new Event(s,{cancelable:!0});return q.detail=u,aj.defineProperty(q,"promise",{value:u.promise}),aj.defineProperty(q,"reason",{value:u.reason}),m(aT[s],q)}}var o=document.createEvent("CustomEvent");return o.initCustomEvent("testingtheevent",!1,!0,{}),ad.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=document.createEvent("CustomEvent");return q.initCustomEvent(s,!1,!0,u),m(aT[s],q)}}catch(p){}return function(){return !1}}(),aH=function(){return ad.isNode?function(){return process.emit.apply(process,arguments)}:ad.global?function(m){var o="on"+m.toLowerCase(),p=ad.global[o];return p?(p.apply(ad.global,[].slice.call(arguments,1)),!0):!1}:function(){return !1}}(),aG={promiseCreated:a2,promiseFulfilled:a2,promiseRejected:a2,promiseResolved:a2,promiseCancelled:a2,promiseChained:function(m,o,p){return{promise:o,child:p}},warning:function(m,n){return{warning:n}},unhandledRejection:function(m,o,p){return{reason:o,promise:p}},rejectionHandled:a2},aE=function(m){var p=!1;try{p=aH.apply(null,arguments)}catch(q){ar.throwLater(q),p=!0}var o=!1;try{o=a0(m,aG[m].apply(null,arguments))}catch(q){ar.throwLater(q),o=!0}return o||p};a7.config=function(o){if(o=Object(o),"longStackTraces" in o&&(o.longStackTraces?a7.longStackTraces():!o.longStackTraces&&a7.hasLongStackTraces()&&a5()),"warnings" in o){var q=o.warnings;aI.warnings=!!q,t=aI.warnings,ad.isObject(q)&&"wForgottenReturn" in q&&(t=!!q.wForgottenReturn)}if("cancellation" in o&&o.cancellation&&!aI.cancellation){if(ar.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use")}a7.prototype._clearCancellationData=aU,a7.prototype._propagateFrom=a6,a7.prototype._onCancel=aY,a7.prototype._setOnCancel=aP,a7.prototype._attachCancellationCallback=a9,a7.prototype._execute=aQ,ag=a6,aI.cancellation=!0}if("monitoring" in o&&(o.monitoring&&!aI.monitoring?(aI.monitoring=!0,a7.prototype._fireEvent=aE):!o.monitoring&&aI.monitoring&&(aI.monitoring=!1,a7.prototype._fireEvent=bb)),"asyncHooks" in o&&ad.nodeSupportsAsyncResource){var m=aI.asyncHooks,p=!!o.asyncHooks;m!==p&&(aI.asyncHooks=p,p?aR():aV())}return a7},a7.prototype._fireEvent=bb,a7.prototype._execute=function(m,p,q){try{m(p,q)}catch(o){return o}},a7.prototype._onCancel=function(){},a7.prototype._setOnCancel=function(m){},a7.prototype._attachCancellationCallback=function(m){},a7.prototype._captureStackTrace=function(){},a7.prototype._attachExtraTrace=function(){},a7.prototype._dereferenceTrace=function(){},a7.prototype._clearCancellationData=function(){},a7.prototype._propagateFrom=function(m,n){};var ag=a3,av=function(){return !1},aD=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;ad.inherits(au,Error),aW.CapturedTrace=au,au.prototype.uncycle=function(){var B=this._length;if(!(2>B)){for(var x=[],q={},m=0,p=this;void 0!==p;++m){x.push(p),p=p._parent}B=this._length=m;for(var m=B-1;m>=0;--m){var w=x[m].stack;void 0===q[w]&&(q[w]=m)}for(var m=0;B>m;++m){var z=x[m].stack,C=q[z];if(void 0!==C&&C!==m){C>0&&(x[C-1]._parent=void 0,x[C-1]._length=1),x[m]._parent=void 0,x[m]._length=1;var y=m>0?x[m-1]:this;B-1>C?(y._parent=x[C+1],y._parent.uncycle(),y._length=y._parent._length+1):(y._parent=void 0,y._length=1);for(var v=y._length+1,A=m-2;A>=0;--A){x[A]._length=v,v++}return}}}},au.prototype.attachExtraTrace=function(m){if(!m.__stackCleaned__){this.uncycle();for(var q=ax(m),u=q.message,p=[q.stack],s=this;void 0!==s;){p.push(ay(s.stack.split("\n"))),s=s._parent}aZ(p),aN(p),ad.notEnumerableProp(m,"stack",aA(u,p)),ad.notEnumerableProp(m,"__stackCleaned__",!0)}};var aF=function(){var p=/^\s*at\s*/,s=function(n,o){return"string"==typeof n?n:void 0!==o.name&&void 0!==o.message?o.toString():ai(o)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,aJ=p,aK=s;var v=Error.captureStackTrace;return av=function(n){return aw.test(n)},function(n,o){Error.stackTraceLimit+=6,v(n,o),Error.stackTraceLimit-=6}}var q=new Error;if("string"==typeof q.stack&&q.stack.split("\n")[0].indexOf("stackDetection@")>=0){return aJ=/@/,aK=s,ab=!0,function(n){n.stack=(new Error).stack}}var u;try{throw new Error}catch(m){u="stack" in m}return"stack" in q||!u||"number"!=typeof Error.stackTraceLimit?(aK=function(n,o){return"string"==typeof n?n:"object"!=typeof o&&"function"!=typeof o||void 0===o.name||void 0===o.message?ai(o):o.toString()},null):(aJ=p,aK=s,function(n){Error.stackTraceLimit+=6;try{throw new Error}catch(o){n.stack=o.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(aB=function(m){console.warn(m)},ad.isNode&&process.stderr.isTTY?aB=function(m,o){var p=o?"[33m":"[31m";console.warn(p+m+"[0m\n")}:ad.isNode||"string"!=typeof(new Error).stack||(aB=function(m,n){console.warn("%c"+m,n?"color: darkorange":"color: red")}));var aI={warnings:aq,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return aa&&a7.longStackTraces(),{asyncHooks:function(){return aI.asyncHooks},longStackTraces:function(){return aI.longStackTraces},warnings:function(){return aI.warnings},cancellation:function(){return aI.cancellation},monitoring:function(){return aI.monitoring},propagateFromFunction:function(){return ag},boundValueFunction:function(){return a8},checkForgottenReturns:a4,setBounds:aC,warn:ba,deprecated:aX,CapturedTrace:au,fireDomEvent:a0,fireGlobalEvent:aH}}},{"./errors":9,"./es5":10,"./util":21}],8:[function(j,k,l){k.exports=function(m){function o(){return this.value}function p(){throw this.reason}m.prototype["return"]=m.prototype.thenReturn=function(q){return q instanceof m&&q.suppressUnhandledRejections(),this._then(o,void 0,void 0,{value:q},void 0)},m.prototype["throw"]=m.prototype.thenThrow=function(n){return this._then(p,void 0,void 0,{reason:n},void 0)},m.prototype.catchThrow=function(n){if(arguments.length<=1){return this._then(void 0,p,void 0,{reason:n},void 0)}var s=arguments[1],q=function(){throw s};return this.caught(n,q)},m.prototype.catchReturn=function(t){if(arguments.length<=1){return t instanceof m&&t.suppressUnhandledRejections(),this._then(void 0,o,void 0,{value:t},void 0)}var q=arguments[1];q instanceof m&&q.suppressUnhandledRejections();var s=function(){return q};return this.caught(t,s)}}},{}],9:[function(w,J,C){function z(l,m){function o(n){return this instanceof o?(A(this,"message","string"==typeof n?n:m),A(this,"name",l),void (Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new o(n)}return q(o,Error),o}function B(l){return this instanceof B?(A(this,"name","OperationalError"),A(this,"message",l),this.cause=l,this.isOperational=!0,void (l instanceof Error?(A(this,"message",l.message),A(this,"stack",l.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new B(l)}var F,N,x=w("./es5"),L=x.freeze,E=w("./util"),q=E.inherits,A=E.notEnumerableProp,I=z("Warning","warning"),G=z("CancellationError","cancellation error"),K=z("TimeoutError","timeout error"),O=z("AggregateError","aggregate error");try{F=TypeError,N=RangeError}catch(k){F=z("TypeError","type error"),N=z("RangeError","range error")}for(var j="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),H=0;H<j.length;++H){"function"==typeof Array.prototype[j[H]]&&(O.prototype[j[H]]=Array.prototype[j[H]])}x.defineProperty(O.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),O.prototype.isOperational=!0;var D=0;O.prototype.toString=function(){var m=Array(4*D+1).join(" "),s="\n"+m+"AggregateError of:\n";D++,m=Array(4*D+1).join(" ");for(var v=0;v<this.length;++v){for(var p=this[v]===this?"[Circular AggregateError]":this[v]+"",u=p.split("\n"),l=0;l<u.length;++l){u[l]=m+u[l]}p=u.join("\n"),s+=p+"\n"}return D--,s},q(B,Error);var M=Error.__BluebirdErrorTypes__;M||(M=L({CancellationError:G,TimeoutError:K,OperationalError:B,RejectionError:B,AggregateError:O}),x.defineProperty(Error,"__BluebirdErrorTypes__",{value:M,writable:!1,enumerable:!1,configurable:!1})),J.exports={Error:Error,TypeError:F,RangeError:N,CancellationError:M.CancellationError,OperationalError:M.OperationalError,TimeoutError:M.TimeoutError,AggregateError:M.AggregateError,Warning:I}},{"./es5":10,"./util":21}],10:[function(C,y,q){var j=function(){return void 0===this}();if(j){y.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:j,propertyIsWritable:function(l,o){var p=Object.getOwnPropertyDescriptor(l,o);return !(p&&!p.writable&&!p.set)}}}else{var m={}.hasOwnProperty,w={}.toString,A={}.constructor.prototype,D=function(l){var o=[];for(var p in l){m.call(l,p)&&o.push(p)}return o},z=function(l,n){return{value:l[n]}},v=function(l,o,p){return l[o]=p.value,l},B=function(l){return l},k=function(l){try{return Object(l).constructor.prototype}catch(n){return A}},x=function(l){try{return"[object Array]"===w.call(l)}catch(n){return !1}};y.exports={isArray:x,keys:D,names:D,defineProperty:v,getDescriptor:z,freeze:B,getPrototypeOf:k,isES5:j,propertyIsWritable:function(){return !0}}}},{}],11:[function(j,k,l){k.exports=function(A,v,m){function t(o,p,r){this.promise=o,this.type=p,this.handler=r,this.called=!1,this.cancelPromise=null}function x(n){this.finallyHandler=n}function C(n,o){return null!=n.cancelPromise?(arguments.length>1?n.cancelPromise._reject(o):n.cancelPromise._cancel(),n.cancelPromise=null,!0):!1}function E(){return w.call(this,this.promise._target()._settledValue())}function B(n){return C(this,n)?void 0:(z.e=n,z)}function w(r){var G=this.promise,n=this.handler;if(!this.called){this.called=!0;var p=this.isFinallyHandler()?n.call(G._boundValue()):n.call(G._boundValue(),r);if(p===m){return p}if(void 0!==p){G._setReturnedNonUndefined();var s=v(p,G);if(s instanceof A){if(null!=this.cancelPromise){if(s._isCancelled()){var F=new q("late cancellation observer");return G._attachExtraTrace(F),z.e=F,z}s.isPending()&&s._attachCancellationCallback(new x(this))}return s._then(E,B,void 0,this,void 0)}}}return G.isRejected()?(C(this),z.e=r,z):(C(this),r)}var D=j("./util"),q=A.CancellationError,z=D.errorObj,y=j("./catch_filter")(m);return t.prototype.isFinallyHandler=function(){return 0===this.type},x.prototype._resultCancelled=function(){C(this.finallyHandler)},A.prototype._passThrough=function(o,s,u,p){return"function"!=typeof o?this.then():this._then(u,p,void 0,new t(this,s,o),void 0)},A.prototype.lastly=A.prototype["finally"]=function(n){return this._passThrough(n,0,w,w)},A.prototype.tap=function(n){return this._passThrough(n,1,w)},A.prototype.tapCatch=function(F){var J=arguments.length;if(1===J){return this._passThrough(F,1,void 0,w)}var H,I=new Array(J-1),u=0;for(H=0;J-1>H;++H){var p=arguments[H];if(!D.isObject(p)){return A.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+D.classString(p)))}I[u++]=p}I.length=u;var G=arguments[H];return this._passThrough(y(I,G,this),1,void 0,w)},t}},{"./catch_filter":5,"./util":21}],12:[function(j,k,l){k.exports=function(s,u,q,t,p){var m=j("./util");m.canEvaluate,m.tryCatch,m.errorObj;s.join=function(){var n,w=arguments.length-1;if(w>0&&"function"==typeof arguments[w]){n=arguments[w];var v}var x=[].slice.call(arguments);n&&x.pop();var v=new u(x).promise();return void 0!==n?v.spread(n):v}}},{"./util":21}],13:[function(j,k,l){k.exports=function(u,w,t,v,p){var m=j("./util"),q=m.tryCatch;u.method=function(n){if("function"!=typeof n){throw new u.TypeError("expecting a function but got "+m.classString(n))}return function(){var x=new u(w);x._captureStackTrace(),x._pushContext();var y=q(n).apply(this,arguments),s=x._popContext();return p.checkForgottenReturns(y,s,"Promise.method",x),x._resolveFromSyncValue(y),x}},u.attempt=u["try"]=function(s){if("function"!=typeof s){return v("expecting a function but got "+m.classString(s))}var x=new u(w);x._captureStackTrace(),x._pushContext();var z;if(arguments.length>1){p.deprecated("calling Promise.try with more than 1 argument");var n=arguments[1],o=arguments[2];z=m.isArray(n)?q(s).apply(o,n):q(s).call(o,n)}else{z=q(s)()}var y=x._popContext();return p.checkForgottenReturns(z,y,"Promise.try",x),x._resolveFromSyncValue(z),x},u.prototype._resolveFromSyncValue=function(n){n===m.errorObj?this._rejectCallback(n.e,!1):this._resolveCallback(n,!0)}}},{"./util":21}],14:[function(B,x,q){function j(l){return l instanceof Error&&A.getPrototypeOf(l)===Error.prototype}function m(p){var r;if(j(p)){r=new v(p),r.name=p.name,r.message=p.message,r.stack=p.stack;for(var u=A.keys(p),s=0;s<u.length;++s){var l=u[s];k.test(l)||(r[l]=p[l])}return r}return z.markAsOriginatingFromRejection(p),p}function w(l,n){return function(t,s){if(null!==l){if(t){var p=m(C(t));l._attachExtraTrace(p),l._reject(p)}else{if(n){var o=[].slice.call(arguments,1);l._fulfill(o)}else{l._fulfill(s)}}l=null}}}var z=B("./util"),C=z.maybeWrapAsError,y=B("./errors"),v=y.OperationalError,A=B("./es5"),k=/^(?:name|message|stack|cause)$/;x.exports=w},{"./errors":9,"./es5":10,"./util":21}],15:[function(j,k,l){k.exports=function(){function ai(){}function af(m,n){if(null==m||m.constructor!==ah){throw new am("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}if("function"!=typeof n){throw new am("expecting a function but got "+aq.classString(n))}}function ah(m){m!==t&&af(this,m),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(m),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function an(m){this.promise._resolveCallback(m)}function av(m){this.promise._rejectCallback(m,!1)}function ae(m){var n=new ah(t);n._fulfillmentHandler0=m,n._rejectionHandler0=m,n._promise0=m,n._receiver0=m}var at=function(){return new am("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},ak=function(){return new ah.PromiseInspection(this._target())},ad=function(m){return ah.reject(new am(m))},ag={},aq=j("./util");aq.setReflectHandler(ak);var ao=function(){var m=process.domain;return void 0===m?null:m},ar=function(){return null},aw=function(){return{domain:ao(),async:null}},ac=aq.isNode&&aq.nodeSupportsAsyncResource?j("async_hooks").AsyncResource:null,Z=function(){return{domain:ao(),async:new ac("Bluebird::Promise")}},ap=aq.isNode?aw:ar;aq.notEnumerableProp(ah,"_getContext",ap);var aj=function(){ap=Z,aq.notEnumerableProp(ah,"_getContext",Z)},au=function(){ap=aw,aq.notEnumerableProp(ah,"_getContext",aw)},W=j("./es5"),ab=j("./async"),al=new ab;W.defineProperty(ah,"_async",{value:al});var V=j("./errors"),am=ah.TypeError=V.TypeError;ah.RangeError=V.RangeError;var Q=ah.CancellationError=V.CancellationError;ah.TimeoutError=V.TimeoutError,ah.OperationalError=V.OperationalError,ah.RejectionError=V.OperationalError,ah.AggregateError=V.AggregateError;var t=function(){},aa={},D={},z=j("./thenables")(ah,t),G=j("./promise_array")(ah,t,z,ad,ai),I=j("./context")(ah),Y=(I.create,j("./debuggability")(ah,I,aj,au)),M=(Y.CapturedTrace,j("./finally")(ah,z,D)),J=j("./catch_filter")(D),K=j("./nodeback"),X=aq.errorObj,q=aq.tryCatch;return ah.prototype.toString=function(){return"[object Promise]"},ah.prototype.caught=ah.prototype["catch"]=function(p){var u=arguments.length;if(u>1){var w,s=new Array(u-1),v=0;for(w=0;u-1>w;++w){var m=arguments[w];if(!aq.isObject(m)){return ad("Catch statement predicate: expecting an object but got "+aq.classString(m))}s[v++]=m}if(s.length=v,p=arguments[w],"function"!=typeof p){throw new am("The last argument to .catch() must be a function, got "+aq.toString(p))}return this.then(void 0,J(s,p,this))}return this.then(void 0,p)},ah.prototype.reflect=function(){return this._then(ak,ak,void 0,this,void 0)},ah.prototype.then=function(m,o){if(Y.warnings()&&arguments.length>0&&"function"!=typeof m&&"function"!=typeof o){var p=".then() only accepts functions but was passed: "+aq.classString(m);arguments.length>1&&(p+=", "+aq.classString(o)),this._warn(p)}return this._then(m,o,void 0,void 0,void 0)},ah.prototype.done=function(m,o){var p=this._then(m,o,void 0,void 0,void 0);p._setIsFinal()},ah.prototype.spread=function(m){return"function"!=typeof m?ad("expecting a function but got "+aq.classString(m)):this.all()._then(m,void 0,void 0,aa,void 0)},ah.prototype.toJSON=function(){var m={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(m.fulfillmentValue=this.value(),m.isFulfilled=!0):this.isRejected()&&(m.rejectionReason=this.reason(),m.isRejected=!0),m},ah.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new G(this).promise()},ah.prototype.error=function(m){return this.caught(aq.originatesFromRejection,m)},ah.getNewLibraryCopy=k.exports,ah.is=function(m){return m instanceof ah},ah.fromNode=ah.fromCallback=function(m){var p=new ah(t);p._captureStackTrace();var s=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,o=q(m)(K(p,s));return o===X&&p._rejectCallback(o.e,!0),p._isFateSealed()||p._setAsyncGuaranteed(),p},ah.all=function(m){return new G(m).promise()},ah.cast=function(m){var n=z(m);return n instanceof ah||(n=new ah(t),n._captureStackTrace(),n._setFulfilled(),n._rejectionHandler0=m),n},ah.resolve=ah.fulfilled=ah.cast,ah.reject=ah.rejected=function(m){var n=new ah(t);return n._captureStackTrace(),n._rejectCallback(m,!0),n},ah.setScheduler=function(m){if("function"!=typeof m){throw new am("expecting a function but got "+aq.classString(m))}return al.setScheduler(m)},ah.prototype._then=function(H,A,v,m,x){var E=void 0!==x,L=E?x:new ah(t),C=this._target(),w=C._bitField;E||(L._propagateFrom(this,3),L._captureStackTrace(),void 0===m&&0!==(2097152&this._bitField)&&(m=0!==(50397184&w)?this._boundValue():C===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,L));var F=ap();if(0!==(50397184&w)){var o,y,B=C._settlePromiseCtx;0!==(33554432&w)?(y=C._rejectionHandler0,o=H):0!==(16777216&w)?(y=C._fulfillmentHandler0,o=A,C._unsetRejectionIsUnhandled()):(B=C._settlePromiseLateCancellationObserver,y=new Q("late cancellation observer"),C._attachExtraTrace(y),o=A),al.invoke(B,C,{handler:aq.contextBind(F,o),promise:L,receiver:m,value:y})}else{C._addCallbacks(H,A,L,m,F)}return L},ah.prototype._length=function(){return 65535&this._bitField},ah.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},ah.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},ah.prototype._setLength=function(m){this._bitField=-65536&this._bitField|65535&m},ah.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},ah.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},ah.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},ah.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},ah.prototype._isFinal=function(){return(4194304&this._bitField)>0},ah.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},ah.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},ah.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},ah.prototype._setAsyncGuaranteed=function(){if(!al.hasCustomScheduler()){var m=this._bitField;this._bitField=m|(536870912&m)>>2^134217728}},ah.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},ah.prototype._receiverAt=function(m){var n=0===m?this._receiver0:this[4*m-4+3];return n===ag?void 0:void 0===n&&this._isBound()?this._boundValue():n},ah.prototype._promiseAt=function(m){return this[4*m-4+2]},ah.prototype._fulfillmentHandlerAt=function(m){return this[4*m-4+0]},ah.prototype._rejectionHandlerAt=function(m){return this[4*m-4+1]},ah.prototype._boundValue=function(){},ah.prototype._migrateCallback0=function(m){var s=(m._bitField,m._fulfillmentHandler0),v=m._rejectionHandler0,p=m._promise0,u=m._receiverAt(0);void 0===u&&(u=ag),this._addCallbacks(s,v,p,u,null)},ah.prototype._migrateCallbackAt=function(p,u){var w=p._fulfillmentHandlerAt(u),s=p._rejectionHandlerAt(u),v=p._promiseAt(u),m=p._receiverAt(u);void 0===m&&(m=ag),this._addCallbacks(w,s,v,m,null)},ah.prototype._addCallbacks=function(s,v,x,u,w){var p=this._length();if(p>=65531&&(p=0,this._setLength(0)),0===p){this._promise0=x,this._receiver0=u,"function"==typeof s&&(this._fulfillmentHandler0=aq.contextBind(w,s)),"function"==typeof v&&(this._rejectionHandler0=aq.contextBind(w,v))}else{var m=4*p-4;this[m+2]=x,this[m+3]=u,"function"==typeof s&&(this[m+0]=aq.contextBind(w,s)),"function"==typeof v&&(this[m+1]=aq.contextBind(w,v))}return this._setLength(p+1),p},ah.prototype._proxy=function(m,n){this._addCallbacks(void 0,void 0,n,m,null)},ah.prototype._resolveCallback=function(u,x){if(0===(117506048&this._bitField)){if(u===this){return this._rejectCallback(at(),!1)}var y=z(u,this);if(!(y instanceof ah)){return this._fulfill(u)}x&&this._propagateFrom(y,2);var w=y._target();if(w===this){return void this._reject(at())}var p=w._bitField;if(0===(50397184&p)){var o=this._length();o>0&&w._migrateCallback0(this);for(var v=1;o>v;++v){w._migrateCallbackAt(this,v)}this._setFollowing(),this._setLength(0),this._setFollowee(y)}else{if(0!==(33554432&p)){this._fulfill(w._value())}else{if(0!==(16777216&p)){this._reject(w._reason())}else{var m=new Q("late cancellation observer");w._attachExtraTrace(m),this._reject(m)}}}}},ah.prototype._rejectCallback=function(p,u,w){var s=aq.ensureErrorObject(p),v=s===p;if(!v&&!w&&Y.warnings()){var m="a promise was rejected with a non-error: "+aq.classString(p);this._warn(m,!0)}this._attachExtraTrace(s,u?v:!1),this._reject(p)},ah.prototype._resolveFromExecutor=function(m){if(m!==t){var p=this;this._captureStackTrace(),this._pushContext();var s=!0,o=this._execute(m,function(n){p._resolveCallback(n)},function(n){p._rejectCallback(n,s)});s=!1,this._popContext(),void 0!==o&&p._rejectCallback(o,!0)}},ah.prototype._settlePromiseFromHandler=function(s,v,x,u){var w=u._bitField;if(0===(65536&w)){u._pushContext();var p;v===aa?x&&"number"==typeof x.length?p=q(s).apply(this._boundValue(),x):(p=X,p.e=new am("cannot .spread() a non-array: "+aq.classString(x))):p=q(s).call(v,x);var m=u._popContext();w=u._bitField,0===(65536&w)&&(p===D?u._reject(x):p===X?u._rejectCallback(p.e,!1):(Y.checkForgottenReturns(p,m,"",u,this),u._resolveCallback(p)))}},ah.prototype._target=function(){for(var m=this;m._isFollowing();){m=m._followee()}return m},ah.prototype._followee=function(){return this._rejectionHandler0},ah.prototype._setFollowee=function(m){this._rejectionHandler0=m},ah.prototype._settlePromise=function(o,v,u,n){var m=o instanceof ah,p=this._bitField,w=0!==(134217728&p);0!==(65536&p)?(m&&o._invokeInternalOnCancel(),u instanceof M&&u.isFinallyHandler()?(u.cancelPromise=o,q(v).call(u,n)===X&&o._reject(X.e)):v===ak?o._fulfill(ak.call(u)):u instanceof ai?u._promiseCancelled(o):m||o instanceof G?o._cancel():u.cancel()):"function"==typeof v?m?(w&&o._setAsyncGuaranteed(),this._settlePromiseFromHandler(v,u,n,o)):v.call(u,n,o):u instanceof ai?u._isResolved()||(0!==(33554432&p)?u._promiseFulfilled(n,o):u._promiseRejected(n,o)):m&&(w&&o._setAsyncGuaranteed(),0!==(33554432&p)?o._fulfill(n):o._reject(n))},ah.prototype._settlePromiseLateCancellationObserver=function(o){var s=o.handler,u=o.promise,p=o.receiver,m=o.value;"function"==typeof s?u instanceof ah?this._settlePromiseFromHandler(s,p,m,u):s.call(p,m,u):u instanceof ah&&u._reject(m)},ah.prototype._settlePromiseCtx=function(m){this._settlePromise(m.promise,m.handler,m.receiver,m.value)},ah.prototype._settlePromise0=function(m,s,v){var p=this._promise0,u=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(p,m,u,s)},ah.prototype._clearCallbackDataAtIndex=function(m){var n=4*m-4;this[n+2]=this[n+3]=this[n+0]=this[n+1]=void 0},ah.prototype._fulfill=function(m){var o=this._bitField;if(!((117506048&o)>>>16)){if(m===this){var p=at();return this._attachExtraTrace(p),this._reject(p)}this._setFulfilled(),this._rejectionHandler0=m,(65535&o)>0&&(0!==(134217728&o)?this._settlePromises():al.settlePromises(this),this._dereferenceTrace())}},ah.prototype._reject=function(m){var n=this._bitField;if(!((117506048&n)>>>16)){return this._setRejected(),this._fulfillmentHandler0=m,this._isFinal()?al.fatalError(m,aq.isNode):void ((65535&n)>0?al.settlePromises(this):this._ensurePossibleRejectionHandled())}},ah.prototype._fulfillPromises=function(p,u){for(var w=1;p>w;w++){var s=this._fulfillmentHandlerAt(w),v=this._promiseAt(w),m=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(v,s,m,u)}},ah.prototype._rejectPromises=function(p,u){for(var w=1;p>w;w++){var s=this._rejectionHandlerAt(w),v=this._promiseAt(w),m=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(v,s,m,u)}},ah.prototype._settlePromises=function(){var m=this._bitField,p=65535&m;if(p>0){if(0!==(16842752&m)){var s=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,s,m),this._rejectPromises(p,s)}else{var o=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,o,m),this._fulfillPromises(p,o)}this._setLength(0)}this._clearCancellationData()},ah.prototype._settledValue=function(){var m=this._bitField;return 0!==(33554432&m)?this._rejectionHandler0:0!==(16777216&m)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&W.defineProperty(ah.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),ah.defer=ah.pending=function(){Y.deprecated("Promise.defer","new Promise");var m=new ah(t);return{promise:m,resolve:an,reject:av}},aq.notEnumerableProp(ah,"_makeSelfResolutionError",at),j("./method")(ah,t,z,ad,Y),j("./bind")(ah,t,z,Y),j("./cancel")(ah,G,ad,Y),j("./direct_resolve")(ah),j("./synchronous_inspection")(ah),j("./join")(ah,G,z,t,al),ah.Promise=ah,ah.version="3.7.2",aq.toFastProperties(ah),aq.toFastProperties(ah.prototype),ae({a:1}),ae({b:2}),ae({c:3}),ae(1),ae(function(){}),ae(void 0),ae(!1),ae(new ah(t)),Y.setBounds(ab.firstLineError,aq.lastLineError),ah}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21,async_hooks:void 0}],16:[function(j,k,l){k.exports=function(v,q,m,p,u){function x(n){switch(n){case -2:return[];case -3:return{};case -6:return new Map}}function y(n){var o=this._promise=new v(q);n instanceof v&&(o._propagateFrom(n,3),n.suppressUnhandledRejections()),o._setOnCancel(this),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var w=j("./util");w.isArray;return w.inherits(y,u),y.prototype.length=function(){return this._length},y.prototype.promise=function(){return this._promise},y.prototype._init=function t(z,B){var r=m(this._values,this._promise);if(r instanceof v){r=r._target();var A=r._bitField;if(this._values=r,0===(50397184&A)){return this._promise._setAsyncGuaranteed(),r._then(t,this._reject,void 0,this,B)}if(0===(33554432&A)){return 0!==(16777216&A)?this._reject(r._reason()):this._cancel()}r=r._value()}if(r=w.asArray(r),null===r){var o=p("expecting an array or an iterable object but got "+w.classString(r)).reason();return void this._promise._rejectCallback(o,!1)}return 0===r.length?void (-5===B?this._resolveEmptyArray():this._resolve(x(B))):void this._iterate(r)},y.prototype._iterate=function(A){var E=this.getActualLength(A.length);this._length=E,this._values=this.shouldCopyValues()?new Array(E):this._values;for(var C=this._promise,z=!1,r=null,B=0;E>B;++B){var D=m(A[B],C);D instanceof v?(D=D._target(),r=D._bitField):r=null,z?null!==r&&D.suppressUnhandledRejections():null!==r?0===(50397184&r)?(D._proxy(this,B),this._values[B]=D):z=0!==(33554432&r)?this._promiseFulfilled(D._value(),B):0!==(16777216&r)?this._promiseRejected(D._reason(),B):this._promiseCancelled(B):z=this._promiseFulfilled(D,B)}z||C._setAsyncGuaranteed()},y.prototype._isResolved=function(){return null===this._values},y.prototype._resolve=function(n){this._values=null,this._promise._fulfill(n)},y.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},y.prototype._reject=function(n){this._values=null,this._promise._rejectCallback(n,!1)},y.prototype._promiseFulfilled=function(o,r){this._values[r]=o;var s=++this._totalResolved;return s>=this._length?(this._resolve(this._values),!0):!1},y.prototype._promiseCancelled=function(){return this._cancel(),!0},y.prototype._promiseRejected=function(n){return this._totalResolved++,this._reject(n),!0},y.prototype._resultCancelled=function(){if(!this._isResolved()){var o=this._values;if(this._cancel(),o instanceof v){o.cancel()}else{for(var r=0;r<o.length;++r){o[r] instanceof v&&o[r].cancel()}}}},y.prototype.shouldCopyValues=function(){return !0},y.prototype.getActualLength=function(n){return n},y}},{"./util":21}],17:[function(j,l,p){function k(s,v,x,u,w){for(var q=0;w>q;++q){x[q+u]=s[q+v],s[q+v]=void 0}}function m(n){this._capacity=n,this._length=0,this._front=0}m.prototype._willBeOverCapacity=function(n){return this._capacity<n},m.prototype._pushOne=function(o){var q=this.length();this._checkCapacity(q+1);var r=this._front+q&this._capacity-1;this[r]=o,this._length=q+1},m.prototype.push=function(s,v,x){var u=this.length()+3;if(this._willBeOverCapacity(u)){return this._pushOne(s),this._pushOne(v),void this._pushOne(x)}var w=this._front+u-3;this._checkCapacity(u);var q=this._capacity-1;this[w+0&q]=s,this[w+1&q]=v,this[w+2&q]=x,this._length=u},m.prototype.shift=function(){var n=this._front,o=this[n];return this[n]=void 0,this._front=n+1&this._capacity-1,this._length--,o},m.prototype.length=function(){return this._length},m.prototype._checkCapacity=function(n){this._capacity<n&&this._resizeTo(this._capacity<<1)},m.prototype._resizeTo=function(r){var s=this._capacity;this._capacity=r;var v=this._front,u=this._length,q=v+u&s-1;k(this,0,this,s,q)},l.exports=m},{}],18:[function(x,u,m){var j,k=x("./util"),q=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},w=k.getNativePromise();if(k.isNode&&"undefined"==typeof MutationObserver){var y=global.setImmediate,v=process.nextTick;j=k.isRecentNode?function(l){y.call(global,l)}:function(l){v.call(process,l)}}else{if("function"==typeof w&&"function"==typeof w.resolve){var p=w.resolve();j=function(l){p.then(l)}}else{j="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList" in document.documentElement?function(){var s=document.createElement("div"),A={attributes:!0},C=!1,z=document.createElement("div"),B=new MutationObserver(function(){s.classList.toggle("foo"),C=!1});B.observe(z,A);var l=function(){C||(C=!0,z.classList.toggle("foo"))};return function(t){var o=new MutationObserver(function(){o.disconnect(),t()});o.observe(s,A),l()}}():"undefined"!=typeof setImmediate?function(l){setImmediate(l)}:"undefined"!=typeof setTimeout?function(l){setTimeout(l,0)}:q}}u.exports=j},{"./util":21}],19:[function(j,k,l){k.exports=function(q){function w(n){void 0!==n?(n=n._target(),this._bitField=n._bitField,this._settledValueField=n._isFateSealed()?n._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}w.prototype._settledValue=function(){return this._settledValueField};var y=w.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},v=w.prototype.error=w.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},x=w.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},p=w.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},m=w.prototype.isPending=function(){return 0===(50397184&this._bitField)},u=w.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};w.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},q.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},q.prototype._isCancelled=function(){return this._target().__isCancelled()},q.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},q.prototype.isPending=function(){return m.call(this._target())},q.prototype.isRejected=function(){return p.call(this._target())},q.prototype.isFulfilled=function(){return x.call(this._target())},q.prototype.isResolved=function(){return u.call(this._target())},q.prototype.value=function(){return y.call(this._target())},q.prototype.reason=function(){var n=this._target();return n._unsetRejectionIsUnhandled(),v.call(n)},q.prototype._value=function(){return this._settledValue()},q.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},q.PromiseInspection=w}},{}],20:[function(j,k,l){k.exports=function(y,v){function m(n,p){if(B(n)){if(n instanceof y){return n}var s=x(n);if(s===w){p&&p._pushContext();var u=y.reject(s.e);return p&&p._popContext(),u}if("function"==typeof s){if(A(n)){var u=new y(v);return n._then(u._fulfill,u._reject,void 0,u,null),u}return C(n,s,p)}}return n}function t(n){return n.then}function x(n){try{return t(n)}catch(o){return w.e=o,w}}function A(n){try{return q.call(n,"_promise0")}catch(o){return !1}}function C(J,n,E){function F(o){K&&(K._resolveCallback(o),K=null)}function H(o){K&&(K._rejectCallback(o,D,!0),K=null)}var K=new y(v),I=K;E&&E._pushContext(),K._captureStackTrace(),E&&E._popContext();var D=!0,G=z.tryCatch(n).call(J,F,H);return D=!1,K&&G===w&&(K._rejectCallback(G.e,!0,!0),K=null),I}var z=j("./util"),w=z.errorObj,B=z.isObject,q={}.hasOwnProperty;return m}},{"./util":21}],21:[function(an,aC,at){function ap(){try{var j=K;return K=null,j.apply(this,arguments)}catch(k){return aj.e=k,aj}}function ar(j){return K=j,ap}function ay(j){return null==j||j===!0||j===!1||"string"==typeof j||"number"==typeof j}function aG(j){return"function"==typeof j||"object"==typeof j&&null!==j}function ao(j){return ay(j)?new Error(al(j)):j}function aE(j,l){var p,k=j.length,m=new Array(k+1);for(p=0;k>p;++p){m[p]=j[p]}return m[p]=l,m}function av(j,l,m){if(!ac.isES5){return{}.hasOwnProperty.call(j,l)?j[l]:void 0}var k=Object.getOwnPropertyDescriptor(j,l);return null!=k?null==k.get&&null==k.set?k.value:m:void 0}function am(j,l,m){if(ay(j)){return j}var k={value:m,configurable:!0,enumerable:!1,writable:!0};return ac.defineProperty(j,l,k),j}function aq(j){throw j}function aB(k){try{if("function"==typeof k){var m=ac.names(k.prototype),s=ac.isES5&&m.length>1,l=m.length>0&&!(1===m.length&&"constructor"===m[0]),p=ah.test(k+"")&&ac.names(k).length>0;if(s||l||p){return !0}}return !1}catch(j){return !1}}function az(j){function l(){}function m(){return typeof k.foo}l.prototype=j;var k=new l;return m(),m(),j}function aD(j){return ab.test(j)}function aH(j,l,p){for(var k=new Array(j),m=0;j>m;++m){k[m]=l+m+p}return k}function al(j){try{return j+""}catch(k){return"[no string representation]"}}function ai(j){return j instanceof Error||null!==j&&"object"==typeof j&&"string"==typeof j.message&&"string"==typeof j.name}function aA(j){try{am(j,"isOperational",!0)}catch(k){}}function au(j){return null==j?!1:j instanceof Error.__BluebirdErrorTypes__.OperationalError||j.isOperational===!0}function aF(j){return ai(j)&&ac.propertyIsWritable(j,"stack")}function af(j){return{}.toString.call(j)}function ak(l,p,u){for(var m=ac.names(l),s=0;s<m.length;++s){var k=m[s];if(u(k)){try{ac.defineProperty(p,k,ac.getDescriptor(l,k))}catch(j){}}}}function aw(j){return aa?process.env[j]:void 0}function ad(){if("function"==typeof Promise){try{var j=new Promise(function(){});if("[object Promise]"===af(j)){return Promise}}catch(k){}}}function ax(j,l){if(null===j||"function"!=typeof l||l===ae){return l}null!==j.domain&&(l=j.domain.bind(l));var m=j.async;if(null!==m){var k=l;l=function(){var n=new Array(2).concat([].slice.call(arguments));return n[0]=k,n[1]=this,m.runInAsyncScope.apply(m,n)}}return l}var ac=an("./es5"),G="undefined"==typeof navigator,aj={e:{}},K,J="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,W=function(j,l){function m(){this.constructor=j,this.constructor$=l;for(var o in l.prototype){k.call(l.prototype,o)&&"$"!==o.charAt(o.length-1)&&(this[o+"$"]=l.prototype[o])}}var k={}.hasOwnProperty;return m.prototype=l.prototype,j.prototype=new m,j.prototype},X=function(){var j=[Array.prototype,Object.prototype,Function.prototype],l=function(o){for(var p=0;p<j.length;++p){if(j[p]===o){return !0}}return !1};if(ac.isES5){var m=Object.getOwnPropertyNames;return function(v){for(var x=[],y=Object.create(null);null!=v&&!l(v);){var u;try{u=m(v)}catch(p){return x}for(var w=0;w<u.length;++w){var A=u[w];if(!y[A]){y[A]=!0;var n=Object.getOwnPropertyDescriptor(v,A);null!=n&&null==n.get&&null==n.set&&x.push(A)}}v=ac.getPrototypeOf(v)}return x}}var k={}.hasOwnProperty;return function(t){if(l(t)){return[]}var s=[];j:for(var r in t){if(k.call(t,r)){s.push(r)}else{for(var p=0;p<j.length;++p){if(k.call(j[p],r)){continue j}}s.push(r)}}return s}}(),ah=/this\s*\.\s*\S+\s*=/,ab=/^[a-z$_][a-z$_0-9]*$/i,Y=function(){return"stack" in new Error?function(j){return aF(j)?j:new Error(al(j))}:function(j){if(aF(j)){return j}try{throw new Error(al(j))}catch(k){return k}}}(),Z=function(j){return ac.isArray(j)?j:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var ag="function"==typeof Array.from?function(j){return Array.from(j)}:function(j){for(var l,m=[],k=j[Symbol.iterator]();!(l=k.next()).done;){m.push(l.value)}return m};Z=function(j){return ac.isArray(j)?j:null!=j&&"function"==typeof j[Symbol.iterator]?ag(j):null}}var z="undefined"!=typeof process&&"[object process]"===af(process).toLowerCase(),aa="undefined"!=typeof process&&"undefined"!=typeof process.env,ae,q={setReflectHandler:function(j){ae=j},isClass:aB,isIdentifier:aD,inheritedDataKeys:X,getDataPropertyOrDefault:av,thrower:aq,isArray:ac.isArray,asArray:Z,notEnumerableProp:am,isPrimitive:ay,isObject:aG,isError:ai,canEvaluate:G,errorObj:aj,tryCatch:ar,inherits:W,withAppended:aE,maybeWrapAsError:ao,toFastProperties:az,filledRange:aH,toString:al,canAttachTrace:aF,ensureErrorObject:Y,originatesFromRejection:au,markAsOriginatingFromRejection:aA,classString:af,copyDescriptors:ak,isNode:z,hasEnvVariables:aa,env:aw,global:J,getNativePromise:ad,contextBind:ax};q.isRecentNode=q.isNode&&function(){var j;return process.versions&&process.versions.node?j=process.versions.node.split(".").map(Number):process.version&&(j=process.version.split(".").map(Number)),0===j[0]&&j[1]>10||j[0]>0}(),q.nodeSupportsAsyncResource=q.isNode&&function(){var k=!1;try{var l=an("async_hooks").AsyncResource;k="function"==typeof l.prototype.runInAsyncScope}catch(j){k=!1}return k}(),q.isNode&&q.toFastProperties(process);try{throw new Error}catch(M){q.lastLineError=M}aC.exports=q},{"./es5":10,async_hooks:void 0}]},{},[3])(3)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);e.Promise=Promise;if(!e.nativePromise){e.nativePromise=e.Promise}})(Dynamsoft);(function(b){var a=20200717;if(b._navInfo_ver){if(b.isNumber(b._navInfo_ver)&&b._navInfo_ver>=a){return}}b._navInfo_ver=a;b.getNavInfoSync=function(){var o=!1,k=!0,n=b.win,q=b.doc,d=q.location.protocol,m=(d==="https:"),j=(d!=="https:"&&d!=="http:"),e=false,g=false,r=true,l=true,f=false,i=0,p=0,c=n.JSON;b.getNavInfo();if("userAgentData" in navigator){f=navigator.userAgentData.mobile}else{var h=Dynamsoft.navInfo;e=h.bIE;g=h.bEdge;l=h.bGecko;f=h.bMobile||h.bPad||h.bChromeOS;if(e){i=h.strBrowserVersion;p=h.IEMode}r=h.bHTML5Edition}return{host:n,bSSL:m,bFileSystem:j,bIE:e,bEdge:g,bGecko:l,bMobile:f,IEVersion:i,IEMode:p,bHTML5Edition:r,nodejs:o}};b.getNavInfoByUserAgent=function(N,L){var O="",aa=!1,F=!0,T=b.win,j=b.doc,ag=j&&j.documentElement,V,S=N.toLowerCase(),D=L.toLowerCase(),W=(/cros/).test(S),w=(/android/g).test(S),Y=(/iphone/g).test(S)||(/iphone/g).test(D),k=(/macintosh/).test(S),x=(/ipad/g).test(S)||((k||(D=="macintel"))&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1),p=(/ucweb|ucbrowser/g).test(S),J=!p&&(/nexus/g).test(S)&&(/version\/[\d.]+.*safari\//g).test(S),ae=(/playbook/g).test(S),Q=(/hp-tablet/g).test(S),C=(/blackberry|bb10/g).test(S),q=(/symbian/g).test(S),E=(/windows phone/g).test(S);var s=ae||x||Q,U=Y||J||C||q||E||w,c=!U&&!s&&!W,P=c&&(/win32|win64|windows/).test(D),n=P&&(/win64|x64/).test(S),H=c&&(/mac68k|macppc|macintosh|macintel/).test(S),ad=c&&(/linux/).test(D),o=(D=="win64")||(/wow64|x86_64|win64|x64/).test(S),m=(/wow64/g).test(S),A=S.indexOf("msie "),I=S.indexOf("trident"),G=S.indexOf("rv:"),v=aa,r=(/opera|opr/g).test(S),K=(/360se/g).test(S),R=(/maxthon/g).test(S),y=(/tencenttraveler|qqbrowser/g).test(S),M=(/the world/g).test(S),X=(/metasr/g).test(S),h=(/avant/g).test(S),B=(/firefox|fxios/g).test(S),t=!B&&(/edge\/|edga\/|edgios\/|edg\//g).test(S),f=!(C||ae||p||r||t)&&(/chrome|crios/g).test(S),e=P&&!B&&!t&&!f&&(A!=-1||I!=-1||G!=-1),l="",d=0,u=(/gecko/g).test(S),g=U||s,Z=O,z=aa,ac=T.JSON;if((H||Y||x||P||C||ae||J)&&!p&&!r&&!t&&!e&&!B){V=S.match(/version\/([\d.]+).*safari\//);if(V){if(C||ae||J){}else{v=F;f=aa}Z=V[1]}}if(t){var af=S.indexOf("edge/");if(af>-1){af+=5}else{af=S.indexOf("edg/");if(af>-1){af+=4}else{af=S.indexOf("edga/");if(af>-1){af+=5}else{af=S.indexOf("edgios/");if(af>-1){af+=7}}}}if(af>-1){Z=S.slice(af);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}g=F}else{if(B){V=S.indexOf("firefox/");g=F;if(V>-1){V=S.slice(V+8);var ab=V.indexOf(" ");if(ab>-1){V=V.slice(0,ab)}Z=V;ab=V.indexOf(".");if(ab>-1){V=Z.slice(0,ab)}if(V<27){g=aa}}else{if(Y||x){V=S.indexOf("fxios/");if(V>-1){V=S.slice(V+6);V=V.slice(0,V.indexOf(" "));Z=V}}}}else{if(e){if(A!=-1){V=S.slice(A+5);V=V.slice(0,V.indexOf(";"));l=V}else{if(G!=-1){V=S.slice(G+3);V=V.slice(0,V.indexOf(";"));V=V.slice(0,V.indexOf(")"));l=V}else{if(I!=-1){V=S.slice(I+7);V=V.slice(0,V.indexOf(";"));l=V}}}if(l===""||l>8){g=F}Z=V}else{if(v){V=Z.indexOf(".");g=F;if(V>-1){V=Z.slice(0,V);if(V<7){g=aa}}}else{if(p){V=S.indexOf("ucweb");if(V>-1){Z=S.slice(V+5)}else{V=S.indexOf("ucbrowser/");if(V>-1){Z=S.slice(V+10);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}}g=F}else{if(r){V=S.indexOf("version/");if(V>-1){Z=S.slice(V+8)}else{V=S.indexOf("opr/");if(V>-1){Z=S.slice(V+4)}}g=F}else{if(q){V=S.indexOf("browserng/");if(V>-1){Z=S.slice(V+10)}g=F}else{if(E){V=S.indexOf("iemobile/");if(V>-1){Z=S.slice(V+9)}g=F}else{if(f){var i=S.indexOf("chrome/");if(i>-1){Z=S.slice(i+7);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}else{i=S.indexOf("crios/");if(i>-1){Z=S.slice(i+6);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}}g=F;V=Z.indexOf(".");if(V>-1){V=Z.slice(0,V);if(V<27){g=aa}}}}}}}}}}}if(t||e){if(j.documentMode){d=j.documentMode}else{d=5;if(j.compatMode){if(j.compatMode=="CSS1Compat"){d=7}}}}if(ag&&ag.querySelector&&(!e||e&&(Z>8))){z=F}if(e&&Z<9){ac=null}return{bWin:P,bMac:H,bLinux:ad,bMobile:U,bPad:s,bChromeOS:W,bAndroid:w,biPhone:Y,biPad:x,bWin64:n,bWOW64:m,bOSx64:o,bIE:e,bEdge:t,bChrome:f,bFirefox:B,bSafari:v,bOpera:r,bNexus:J,bUC:p,b360SE:K,bMaxthon:R,bTencentTraveler:y,bTheWorld:M,bMetaSr:X,bAvant:h,bGecko:u,bHTML5Edition:g,strBrowserVersion:Z,IEMode:d,bQuerySelectorSupported:z,nativeJson:ac,scrollBarWidth:aa}};b.getNavInfoByUAData=function(d){var c=function(k){var f=navigator.userAgentData,h=f.mobile,j,o,g=k.platform.toLowerCase(),m=k.platformVersion,i=k.architecture.toLowerCase(),e=false,l=(g.indexOf("mac")>=0);if("brands" in f&&b.isArray(f.brands)){j=f.brands[0].brand.toLowerCase();o=f.brands[0].version}else{if("uaList" in f&&b.isArray(f.uaList)){j=f.uaList[0].brand.toLowerCase();o=f.uaList[0].version}}if(l){var n=m.split("_");if(n.length>0&&n[0]>=15){e=true}}else{if(i.indexOf("win64")>=0||i.indexOf("x86_64")>=0||i.indexOf("x64")>=0){e=true}}return{bWin:(g=="windows"),bMac:l,bLinux:(g=="linux"),bAndroid:false,bMobile:h,bPad:false,bChromeOS:false,bOSx64:e,bIE:false,bEdge:false,bChrome:true,bFirefox:false,bSafari:false,bOpera:false,bGecko:true,bHTML5Edition:true,strBrowserVersion:o,IEMode:false,bQuerySelectorSupported:true,nativeJson:true,scrollBarWidth:false}};if(d){return Promise.resolve(function(){return c(d)})}return navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture"]).then(c)};b.asyncGetNavInfo=function(){if(Dynamsoft.navInfo){return Promise.resolve(Dynamsoft.navInfo)}if("userAgentData" in navigator){return b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d;return d})}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Promise.resolve(Dynamsoft.navInfo)}};b.getNavInfo=function(){if(Dynamsoft.navInfo){return Dynamsoft.navInfo}if("userAgentData" in navigator){b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d});return false}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Dynamsoft.navInfo}};Dynamsoft.navInfoSync=b.getNavInfoSync()})(Dynamsoft.Lib);(function(a,h){var g=a.Lib,b=a.navInfoSync,c=20200521;if(g._ls_ver){if(g.isNumber(g._ls_ver)&&g._ls_ver>=c){return}}g._ls_ver=c;var i=false,f=false,j;if((b.bEdge&&b.bFileSystem)||(b.bIE&&b.IEVersion<8)){}else{try{f=window.localStorage;i=f?true:false}catch(d){f=false}}g.LS={isSupportLS:function(){return i},item:function(k,l,e){var m=null;if(this.isSupportLS()){if(l){f.setItem(k,l);m=l}else{m=f.getItem(k)}if(m===null){return e}return m}else{return e}},removeItem:function(e){if(this.isSupportLS()){f.removeItem(e)}else{return false}return true}}})(Dynamsoft);(function(lib,nil){var _utilities_ver=20200708;if(lib._utilities_ver){if(lib._utilities_ver>=_utilities_ver){return}}lib._utilities_ver=_utilities_ver;var AP=Array.prototype,win=lib.win,doc=lib.doc,navInfoSync=Dynamsoft.navInfoSync,EMPTY_STR="",FALSE=!1,TRUE=!0,mix=lib.mix;var RE_TRIM=/^[\s\xa0]+|[\s\xa0]+$/g,indexOf=AP.indexOf,lastIndexOf=AP.lastIndexOf,filter=AP.filter,every=AP.every,some=AP.some,map=AP.map;var logger=lib.getLogger(),location=win.location,bDomReady=0,callbacks=[],POLL_RETIRES=500,POLL_INTERVAL=40,RE_ID_STR=/^#?([\w-]+)$/,RE_NOT_WHITESPACE=/\S/,standardEventModel=!!(doc&&doc.addEventListener),DOM_READY_EVENT="DOMContentLoaded",READY_STATE_CHANGE_EVENT="readystatechange",LOAD_EVENT="load",COMPLETE="complete",addEventListener=standardEventModel?function(el,type,fn){el.addEventListener(type,fn,false)}:function(el,type,fn){el.attachEvent("on"+type,fn)},removeEventListener=standardEventModel?function(el,type,fn){el.removeEventListener(type,fn,false)}:function(el,type,fn){el.detachEvent("on"+type,fn)};lib.mix(lib,{isWindow:function(obj){return obj!=null&&obj==obj.window},globalEval:function(data){if(data&&RE_NOT_WHITESPACE.test(data)){if(win.execScript){win.execScript(data)}else{(function(data){win.eval.call(win,data)})(data)}}},domReady:function(fn){if(bDomReady){try{fn(lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}else{callbacks.push(fn)}return this}});lib.ready=lib.domReady;function fireReady(){for(var i=0;i<callbacks.length;i++){try{callbacks[i](lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}}lib.checkDomReady=function(){if(!bDomReady){bDomReady=1;lib.asyncGetNavInfo().then(function(navInfo){if(doc&&!navInfoSync.nodejs){removeEventListener(win,LOAD_EVENT,lib.checkDomReady)}fireReady()})}};function bindReady(){if(!doc||doc.readyState===COMPLETE){lib.checkDomReady();return}addEventListener(win,LOAD_EVENT,lib.checkDomReady);if(standardEventModel){var fnDomReady=function(){removeEventListener(doc,DOM_READY_EVENT,fnDomReady);lib.checkDomReady()};addEventListener(doc,DOM_READY_EVENT,fnDomReady)}else{var stateChange=function(){if(doc.readyState===COMPLETE){removeEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);lib.checkDomReady()}};addEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);var notframe,docElem=doc&&doc.documentElement,doScroll=docElem&&docElem.doScroll;try{notframe=(win.frameElement===null)}catch(e){notframe=false}if(doScroll&&notframe){var readyScroll=function(){try{doScroll("left");setTimeout(lib.checkDomReady,30)}catch(ex){setTimeout(readyScroll,POLL_INTERVAL)}};readyScroll()}}}bindReady();if(Dynamsoft.navInfoSync.bIE){try{doc.execCommand("BackgroundImageCache",false,true)}catch(e){}}})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._domUtil_ver){if(d._domUtil_ver>=c){return}}d._domUtil_ver=c;var b="",a="none";d.mix(d,{get:function(e){return d.doc.getElementById(e)},hide:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=a}},show:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=b}},toggle:function(f){var e=d.isString(f)?d.get(f):f;if(e){if(e.style.display===a){e.style.display=b}else{e.style.display=a}}},empty:function(e){if(!e){return}while(e.firstChild){e.removeChild(e.firstChild)}}})})(Dynamsoft.Lib);(function(a){var c=a.Lib;var b=20200521;if(c._color_ver){if(c.isNumber(c._color_ver)&&c._color_ver>=b){return}}c._color_ver=b;c.colorStrToInt=function(h){var d="0x",f,e;if(/^(rgb|RGB)/.test(h)){var g=h.replace(/[^\d,.]/g,"").split(",");for(e=0;e<3;++e){f=Number(g[e]).toString(16);if(f.length==1){f="0"+f}d+=f}if(g.length==4){f=Math.round(Number(g[e])*255).toString(16);if(f.length==1){f="0"+f}d+=f}else{d+="ff"}}else{if(h=="transparent"){d+="00000000"}else{if(/^#[0-9a-fA-f]{6}$/.test(h)){d+=h.replace(/#/,"")+"ff"}else{if(/^#[0-9a-fA-f]{3}$/.test(h)){for(e=0;e<3;++e){d+=h[e]+h[e]}d+="ff"}else{d="-1"}}}}return Number(d)};c.IntToColorStr=function(d){if(d>4294967295||d<0){return null}var e;if(!Dynamsoft.navInfoSync.bHTML5Edition){if(d%256==0){e="transparent"}else{e=Math.floor(d/256).toString(16);while(e.length!=6){e="0"+e}e="#"+e}}else{e="rgba("+Math.floor(d/16777216)+","+Math.floor(d/65536)%256+","+Math.floor(d/256)%256+","+(d%256)/255+")"}return e}})(Dynamsoft);(function(b,a){var d=b.Lib,c=20200716;if(d._ajax_ver){if(d.isNumber(d._ajax_ver)&&d._ajax_ver>=c){return}}d._ajax_ver=c;d.asyncGetNavInfo().then(function(h){var s=h.bIE&&(parseInt(h.strBrowserVersion)<=9),u=h.bIE&&(parseInt(h.strBrowserVersion)<=10),p=d.win,n=d.each,m=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,A=1,H=2,g=3,K=200,f=204,l=300,w=304,r=404,j=1223,x=500,C="open error: ",z="send error: ",k=new d.Uri(location.href),G=k&&m.test(k.getScheme()),I=false,o=function(){try{return new p.XMLHttpRequest()}catch(M){}},B=function(){try{var M=false;n(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(O){try{return(M=new p.ActiveXObject(O))}catch(P){d.error("new xhr error: "+P.message)}});return M}catch(N){}},v=(!G&&p.XMLHttpRequest)?("withCredentials" in (o()||[])):false,E=p.ActiveXObject?function(M){if(s){return B()}if(!v&&M&&I){return new I()}return !G&&o()||B()}:o,t=function(M){return I&&(M instanceof I)},q=/^(?:GET|HEAD)$/,e=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,L={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},D=a,F;if(self&&self.fetch){F=self.fetch}else{F=p.fetch}if(u){D=d.noop}function J(){}d.mix(J.prototype,{url:false,onSuccess:false,onError:false,onComplete:false,method:"GET",async:true,xhrFields:false,mimeType:false,username:false,password:false,data:false,dataType:"text",headers:false,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:false,afterSend:false,timeout:0,cache:true,crossDomain:false,retry:0,setRequestHeader:function(N,O){var M=this;M.headers[N]=O;return M},getAllResponseHeaders:function(){var M=this;return M.state===H?M.responseHeadersString:null},getNativeXhr:function(){var M=this;return M.nativeXhr},getResponseHeader:function(O){var N,M=this,P;O=O.toLowerCase();if(M.state===H){if(!(P=M.responseHeaders)){P=M.responseHeaders={};while((N=e.exec(M.responseHeadersString))){P[N[1].toLowerCase()]=N[2]}}N=P[O]}return N===undefined?null:N},overrideMimeType:function(N){var M=this;if(!M.state){M.mimeType=N}return M},abort:function(N){var M=this;N=N||"abort";M.state=g;M.status=0;M.statusText=N;if(M.nativeXhr){M.nativeXhr.abort()}M._callback();return M},_ioReady:function(N,Q){var O=this,M=false;if(O.state===H||O.state===g){return}if(O.state===A){O.state=H}O.readyState=4;if(N>=K&&N<l||N===w){if(N===w){Q="not modified";M=true}else{Q="success";M=true}}else{if(N<0){N=0}}try{if(N>=K){O.handleResponseData()}}catch(P){d.error(P.stack||P,"error");Q=P.message||"parser error"}if(N<K||!M){if(O.retry>0){O.retry=O.retry-1;setTimeout(function(){O.sendInternal()},200);return}}O.status=N;O.statusText=Q;O._callback(M)},_callback:function(M){var N=this,O=N.timeoutTimer;if(O){clearTimeout(O);N.timeoutTimer=0}n([M?N.onSuccess:N.onError,N.onComplete],function(P){if(d.isFunction(P)){P.apply(N.context,[N.responseData,N.statusText,N])}});N.responseData=null},handleResponseData:function(){var T=this,U,S=T.dataType,R=T.nativeXhr;if(S==="blob"||S==="arraybuffer"){if(s){var Q,O;if("responseBody" in R){Q=R.responseBody;O=dsVbsBinGetLength(Q);U=(new VBArray(dsVbsBinGetBytes(Q,0,O))).toArray()}else{var M;U=[];Q=R.responseText;O=Q.length;for(M=0;M<O;++M){U.push(Q.charCodeAt(M)&255)}}Q=null}else{if(!!p.Blob){U=R.response}else{if("responseBody" in R){U=R.responseBody}else{U=R.responseText}}}}else{if(S=="json"){if(R.responseType&&R.responseType.toLowerCase()=="json"){U=R.response}else{U=R.responseText?(((p.JSON&&p.JSON.parse)?p.JSON.parse:d.parse)(R.responseText)):{}}}else{if(S==="user-defined"){U=R.response!==undefined?R.response:R.responseText}else{T.responseText=U=R.responseText||"";try{var N=R.responseXML;if(N&&N.documentElement){T.responseXML=N}}catch(P){}}}}T.responseData=U},sendInternal:function(M){var T=this,ac,X,N,O,V,Y,W,ab,P,U,ad,R;ac=T._setup(M);N=ac.method;if(d.isString(N)){N=N.toUpperCase()}if(N=="POST"){Y=ac.contentType}else{Y=false}O=ac.url;V=ac.dataType;P=ac.mimeType;if(!d.isString(O)){return}T.nativeXhr=W=E(ac.crossDomain);if(!W){return}try{T.state=A;if(ac.username){W.open(N,O,ac.async,ac.username,ac.password)}else{W.open(N,O,ac.async)}if((ac.async||h.bIE)&&V&&V!="user-defined"&&("responseType" in W)){try{W.responseType=V}catch(aa){}}}catch(Z){if(T.state<2){d.error(Z.stack||Z,"error");T._ioReady(-1,C+(d.isNumber(Z.number)?"("+Z.number+")":"")+(Z.message||""))}else{d.error(Z)}return}ab=ac.xhrFields||{};if("withCredentials" in ab){if(!v){delete ab.withCredentials}}n(ab,function(ag,ae){try{W[ae]=ag}catch(af){d.error(af)}});if(P&&W.overrideMimeType){W.overrideMimeType(P)}U=ac.headers||{};var Q=U["X-Requested-With"];if(Q===false){delete U["X-Requested-With"]}if("setRequestHeader" in W){if(Y){W.setRequestHeader("Content-Type",ac.contentType)}W.setRequestHeader("Accept",V&&L[V]?L[V]+(V==="*"?"":", */*; q=0.01"):L["*"]);n(U,function(af,ae){W.setRequestHeader(ae,af)})}if(!ac.cache){W.setRequestHeader("If-Modified-Since","0");W.setRequestHeader("Cache-Control","no-cache")}ad=!q.test(ac.method);R=ad&&ac.data||null;if(ad&&s){R=ac.data}if(ac.async&&ac.timeout>0){if(ac.timeout<300){ac.timeout=300}T.timeoutTimer=setTimeout(function(){T.abort("timeout")},ac.timeout)}try{T.state=A;if(d.isFunction(T.beforeSend)){var S=T.beforeSend(W,T);if(S===false){T.abort("cancel");return}}W.send(R);R=null;ac.data=null;if(d.isFunction(T.afterSend)){T.afterSend(T)}}catch(aa){if(T.state<2){d.error(aa.stack||aa,"error");T._ioReady(-1,z+(aa.message||""))}else{d.error(aa)}}if(!ac.async||W.readyState===4){T._xhrCallback()}else{if(t(W)){W.onload=function(){W.readyState=4;W.status=K;T._xhrCallback()};W.onerror=function(){W.readyState=4;W.status=x;T._xhrCallback()}}else{W.onreadystatechange=function(){T._xhrCallback()}}}},_xhrCallback:function(N,S){var O=this,P=O.nativeXhr;try{if(P.readyState===4||S){if(t(P)){P.onerror=D;P.onload=D}else{P.onreadystatechange=D}if(S){if(P.readyState!==4){P.abort()}}else{if(!t(P)){O.responseHeadersString=P.getAllResponseHeaders()}var M=P.status,R;try{R=P.statusText}catch(Q){d.error("xhr statusText error: ");d.error(Q);R=""}O._ioReady(M,R)}}}catch(Q){d.error(Q.stack||Q,"error");P.onreadystatechange=D;if(!S){O._ioReady(-1,Q.message||"process error")}}},_setup:function(Q){var N=this,M,P,S,O,R;if(Q){N.context=Q.context;delete Q.context;if(Q instanceof J){Q=Q.config}N.config=Q;O=Q.url;if(d.startsWith(O,"http://")||d.startsWith(O,"https://")){R=new d.Uri(O)}else{if(d.startsWith(O,"//")){Q.url=O="http:"+O}R=k.resolve(O)}if(!Q.dataType){M="text"}else{M=Q.dataType.toLowerCase()}Q.dataType=M;if(!Q.method){Q.method="GET"}else{Q.method=Q.method.toUpperCase()}if(!("crossDomain" in Q)){Q.crossDomain=!R.isSameOriginAs(k)}S=Q.headers;for(P in S){if(d.isUndefined(S[P])){delete S[P]}}d.mix(N,Q)}N.state=A;return N}});function i(N){if(!N||!d.isString(N.url)){d.log("the url is error.");return}var M=new J();M.sendInternal(N);return M}d.mix(d,{ajax:i,io:{get:function(N,O,P,M){return i({method:"GET",url:N,onSuccess:O,onError:P,dataType:M})},post:function(N,P,O,Q,M){return i({method:"POST",data:P,url:N,onSuccess:O,onError:Q,dataType:M})},put:function(N,P,O,Q,M){return i({method:"PUT",data:P,url:N,onSuccess:O,onError:Q,dataType:M})}}});if(h.bChrome||h.bFirefox||F){d.fetch=function(P,O){var M="text";if(O){if(O&&O.dataType){M=O.dataType}}var N,Q;N=F(P,O);if(Promise!=d.nativePromise){Q=Promise;Promise=d.nativePromise;N=N.then(function(R){Promise=Q;if(R.ok){return R}else{throw {httpCode:R.status,errorString:R.statusText}}})}if(M=="blob"){N=N.then(function(R){return R.blob()})}else{if(M=="json"){N=N.then(function(R){return R.json()})}else{if(M=="arraybuffer"){N=N.then(function(R){return R.arrayBuffer()})}else{N=N.then(function(R){return R.text()})}}}return N}}else{if(s){d.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join(""))}var y;if(Promise!=d.nativePromise){y=Promise;Promise=d.nativePromise}d.fetch=function(N,M){return new Promise(function(S,Q){var P=function(W,U,V){if(y){Promise=y}S(W)},T=function(W,U,V){if(y){Promise=y}Q({httpCode:V.status,errorString:U})},O={url:N,onSuccess:P,onError:T,dataType:"text"},R=false;if(M){if(M.method){O.method=M.method}if(M.body){O.data=M.body}if(M.headers){n(M.headers,function(V,U){if(U.toLowerCase()=="content-type"){R=true}O.headers[U]=V})}if(M.dataType){O.dataType=M.dataType}}if(R){O.contentType=false}if(O.dataType=="blob"&&s){O.mimeType="text/plain; charset=x-user-defined"}d.ajax(O)})}}})})(Dynamsoft);(function(c){var b=20200521;if(c._customEvt_ver){if(c.isNumber(c._customEvt_ver)&&c._customEvt_ver>=b){return}}c._customEvt_ver=b;var a={fire:function(f){var d=this,e;d.exec=d.exec||{};f=f.toLowerCase();e=Array.prototype.slice.call(arguments,1);c.each(d.exec[f]||[],function(i){var h=i.f,g=i.c||d;try{h.apply(g,e)}catch(j){c.log(j)}})},on:function(g,f,d){var e=this;e.exec=e.exec||{};g=g.toLowerCase();e.exec[g]=e.exec[g]||[];e.exec[g].push({f:f,c:d})},off:function(j,h,k){var f=this,e=f.exec;if(!e){return}if(!j){f.exec=null;return}j=j.toLowerCase();if(!h){e[j]=null;return}var d=e[j]||[];for(var g=d.length-1;g>=0;g--){if(d[g]===h){d.splice(g,1)}}}};c.obj={customEvent:a}})(Dynamsoft.Lib);(function(b){var g=b.Lib,e=!1,c=!0,f=g.win.document,d;var a=20200521;if(g._evtBase_ver){if(g.isNumber(g._evtBase_ver)&&g._evtBase_ver>=a){return}}g._evtBase_ver=a;d=function(h){return(Dynamsoft.navInfoSync.bGecko&&"mousewheel"===h)?"DOMMouseScroll":h};g.mix(g,{addEventListener:f.addEventListener?function(i,k,j){var h=d(k);if(i){i.addEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.attachEvent("on"+h,j)}},removeEventListener:f.removeEventListener?function(i,k,j){var h=d(k);if(i){i.removeEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.detachEvent("on"+h,j)}},stopPropagation:function(h){var i=h||window.event;if(i.preventDefault){i.preventDefault()}if(i.stopPropagation){i.stopPropagation()}i.returnValue=false;i.cancelBubble=true},fireEvent:function(h,i){var j;if(f.createEvent){j=f.createEvent("HTMLEvents");j.initEvent(h,c,c);if(i.dispatchEvent){i.dispatchEvent(j)}}else{if(f.createEventObject){j=f.createEventObject();j.bubbles=c;j.cancelable=c;i.fireEvent(h,j)}else{j=new Event(h);if(i.dispatchEvent){i.dispatchEvent(j)}}}}})})(Dynamsoft);(function(f,b){var e=20200716;if(f._loadbase64_ver){if(f._loadbase64_ver>=e){return}}f._loadbase64_ver=e;var d={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};f.base64={UTF16ToUTF8:function(n){var l=[],h=n.length,j,g;for(var k=0;k<h;k++){var m=n.charCodeAt(k);if(m>0&&m<=127){l.push(n.charAt(k))}else{if(m>=128&&m<=2047){j=192|((m>>6)&31);g=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g))}else{if(m>=2048&&m<=65535){j=224|((m>>12)&15);g=128|((m>>6)&63);var o=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g),String.fromCharCode(o))}else{if(m>=65536&&m<=2097151){}else{if(m>=2097152&&m<=67108863){}else{}}}}}}return l.join("")},UTF8ToUTF16:function(m){var l=[],k=m.length,j,p,o,g,q,n,h;for(j=0;j<k;j++){g=m.charCodeAt(j);if(((g>>7)&255)==0){l.push(m.charAt(j))}else{if(((g>>5)&255)==6){q=m.charCodeAt(++j);p=(g&31)<<6;o=q&63;h=p|o;l.push(String.fromCharCode(h))}else{if(((g>>4)&255)==14){q=m.charCodeAt(++j);n=m.charCodeAt(++j);p=(g<<4)|((q>>2)&15);o=((q&3)<<6)|(n&63);h=((p&255)<<8)|o;l.push(String.fromCharCode(h))}else{if(((g>>3)&255)==30){}else{if(((g>>2)&255)==62){}else{}}}}}}return l.join("")},encode:function(o){var n=this.UTF16ToUTF8(o),j=[],l=0,g=n.length,m,k,h;while(l<g){m=n.charCodeAt(l++)&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n.charCodeAt(l++);if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n.charCodeAt(l++);j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},encodeArray:function(n){var j=[],l=0,g=n.length,m,k,h;while(l<g){m=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n[l++]&255;j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},decode:function(p){var n=this,k=[],m=0,o=p.length,l,j,h,g;while(m<o){do{l=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&l==-1);if(l==-1){break}do{j=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&j==-1);if(j==-1){break}k.push(String.fromCharCode((l<<2)|((j&48)>>4)));do{h=p.charCodeAt(m++)&255;if(h==61){return n.UTF8ToUTF16(k.join(""))}h=d.decodeChars[h]}while(m<o&&h==-1);if(h==-1){break}k.push(String.fromCharCode(((j&15)<<4)|((h&60)>>2)));do{g=p.charCodeAt(m++)&255;if(g==61){return n.UTF8ToUTF16(k.join(""))}g=d.decodeChars[g]}while(m<o&&g==-1);if(g==-1){break}k.push(String.fromCharCode(((h&3)<<6)|g))}return n.UTF8ToUTF16(k.join(""))}};f.utf8={fromUTF16:function(k){var h=[],j=0,g=k.length,l;while(j<g){l=k.charCodeAt(j);if((l>=1)&&(l<=127)){h.push(k.charAt(j))}else{if(l>2047){h.push(String.fromCharCode(224|((l>>12)&15)));h.push(String.fromCharCode(128|((l>>6)&63)));h.push(String.fromCharCode(128|((l>>0)&63)))}else{h.push(String.fromCharCode(192|((l>>6)&31)));h.push(String.fromCharCode(128|((l>>0)&63)))}}j++}return h.join("")},toUTF16:function(m){var h=[],k=0,g=m.length,n,l,j;while(k<g){n=m.charCodeAt(k++);switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:h.push(m.charAt(k-1));break;case 12:case 13:l=m.charCodeAt(k++);h.push(String.fromCharCode(((n&31)<<6)|(l&63)));break;case 14:l=m.charCodeAt(k++);j=m.charCodeAt(k++);h.push(String.fromCharCode(((n&15)<<12)|((l&63)<<6)|((j&63)<<0)));break}}return h.join("")}};var c=typeof exports!="undefined"?exports:typeof self!="undefined"?self:$.global;function a(g){this.message=g}a.prototype=new Error();a.prototype.name="InvalidCharacterError";f.btoa=c.btoa?(function(g){return c.btoa(g)}):(function(j){var m=String(j);for(var l,h,g=0,k=d.encodeChars,i="";m.charAt(g|0)||(k="=",g%1);i+=k.charAt(63&l>>8-g%1*8)){h=m.charCodeAt(g+=3/4);if(h>255){throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.")}l=l<<8|h}return i});f.atob=c.atob?(function(g){return c.atob(g)}):(function(j){var m=String(j).replace(/[=]+$/,"");if(m.length%4==1){throw new a("'atob' failed: The string to be decoded is not correctly encoded.")}for(var l=0,k,h,g=0,i="";h=m.charAt(g++);~h&&(k=l%4?k*64+h:h,l++%4)?i+=String.fromCharCode(255&k>>(-2*l&6)):0){h=d.encodeChars.indexOf(h)}return i})})(Dynamsoft.Lib);(function(h){var f=20200721;if(h._loadjs_ver){if(h._loadjs_ver>=f){return}}h._loadjs_ver=f;var b="",d=!0,g=h.doc,a=g&&g.documentElement,c=g.getElementsByTagName("head")[0]||a,e=g.createElement("script").readyState?function(j,k){var i=j.onreadystatechange;j.onreadystatechange=function(){var l=j.readyState;if(l==="loaded"||l==="complete"){j.onreadystatechange=null;if(i){i()}k.call(this,true)}else{if(l==="loading"){}else{k.call(this,false)}}}}:function(j,k){var i=!1;j.addEventListener("load",k,i);j.addEventListener("error",k,i)};h.getScript=function(j,l,m){var k,i;if(!h.isFunction(m)){m=function(){}}if(!h.isString(j)||j==b){m();return}k=g.createElement("script");i=["",j].join(b);k.src=i;if(l){k.async=d}k.charset="utf-8";e(k,m);c.insertBefore(k,c.firstChild);return k};h.getScripts=function(k,j,m){if(!h.isArray(k)){m();return}var l=k.length,i=function(n){if(n){l--}else{m()}if(l<=0){m("ok")}};h.each(k,function(n){h.getScript(n,j,i)})};h.getCss=function(i,l){var j,k=l;if(!h.isFunction(k)){k=!1}if(!h.isString(i)||i==b){if(k){k()}return}j=g.createElement("link");j.href=i;j.rel="stylesheet";j.async=d;if(k){e(j,k)}c.insertBefore(j,c.firstChild);return j};h.getAllCss=function(l,k){if(!h.isArray(l)){k();return}var j=l.length,i=function(m){if(m){j--}else{k()}if(j<=0){k("ok")}};h.each(l,function(m){h.getCss(m,i)})};h.addScript=function(i){var k,j;j=i.body;if(!h.isString(j)||j==b){return}k=g.createElement("script");k.charset="utf-8";if(Dynamsoft.navInfoSync.bIE){k.text=j}else{k.appendChild(g.createTextNode(j))}if(i.language){k.language=i.language}else{k.language="javascript"}if(i.type){k.type=i.type}else{k.type="text/javascript"}c.insertBefore(k,c.firstChild)};h.addJS=function(i){h.addScript({body:i})};h.addVBS=function(i){h.addScript({body:i,language:"vbscript",type:"text/vbscript"})}})(Dynamsoft.Lib);(function(a){var c=a.Lib,b=20200521;if(c._asyncQueue_ver){if(c.isNumber(c._asyncQueue_ver)&&c._asyncQueue_ver>=b){return}}c._asyncQueue_ver=b;var d={queue:[],doNextStarted:false,timer:false,pushToDo:function(g,f,e){d.queue.push({obj:g,method:f,args:e})},doNext:function(){if(!d.doNextStarted){clearTimeout(d.timer);d.timer=false;return}if(d.queue.length==0){d.timer=setTimeout(d.doNext,500);return}var h=d.queue[0],j=h.obj,k=h.method,f=h.args;d.queue.splice(0,1);if(c.isFunction(j[k])){if(f.length>2){var g=f[f.length-2],e=f[f.length-1];f[f.length-2]=function(){try{g.apply(j,arguments)}catch(l){}d.timer=setTimeout(d.doNext,0)};f[f.length-1]=function(){try{e.apply(j,arguments)}catch(l){}d.timer=setTimeout(d.doNext,0)}}try{j[k].apply(j,f)}catch(i){}return}else{c.log("not invoke a function: "+k);d.timer=setTimeout(d.doNext,0)}},start:function(){if(!d.doNextStarted){d.doNextStarted=true;d.timer=setTimeout(d.doNext,0)}},stop:function(){clearTimeout(d.timer);d.doNextStarted=false;d.queue=[]}};c.asyncQueue=d})(Dynamsoft);(function(f){var d=20200521;if(f._sprintf_ver){if(f._sprintf_ver>=d){return}}f._sprintf_ver=d;var e,i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function g(m,l){if("_".repeat){return m.repeat(l)}var k=0,j=[];for(;k<l;k++){j.push(m)}return j.join("")}function c(s,r){var w=1,u=s.length,x,l="",p,n,q,m,t,v,o,j;for(p=0;p<u;p++){if(typeof s[p]==="string"){l+=s[p]}else{if(typeof s[p]==="object"){q=s[p];if(q.keys){x=r[w];for(n=0;n<q.keys.length;n++){if(x==undefined){throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',q.keys[n],q.keys[n-1]))}x=x[q.keys[n]]}}else{if(q.param_no){x=r[q.param_no]}else{x=r[w++]}}if(i.not_type.test(q.type)&&i.not_primitive.test(q.type)&&x instanceof Function){x=x()}if(i.numeric_arg.test(q.type)&&(typeof x!=="number"&&isNaN(x))){throw new TypeError(e("[sprintf] expecting number but found %T",x))}if(i.number.test(q.type)){o=x>=0}switch(q.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,q.width?parseInt(q.width):0);break;case"e":x=q.precision?parseFloat(x).toExponential(q.precision):parseFloat(x).toExponential();break;case"f":x=q.precision?parseFloat(x).toFixed(q.precision):parseFloat(x);break;case"g":x=q.precision?String(Number(x.toPrecision(q.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x);x=(q.precision?x.substring(0,q.precision):x);break;case"t":x=String(!!x);x=(q.precision?x.substring(0,q.precision):x);break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase();x=(q.precision?x.substring(0,q.precision):x);break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf();x=(q.precision?x.substring(0,q.precision):x);break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase();break}if(i.json.test(q.type)){l+=x}else{if(i.number.test(q.type)&&(!o||q.sign)){j=o?"+":"-";x=x.toString().replace(i.sign,"")}else{j=""}t=q.pad_char?q.pad_char==="0"?"0":q.pad_char.charAt(1):" ";v=q.width-(j+x).length;m=q.width?(v>0?g(t,v):""):"";l+=q.align?j+x+m:(t==="0"?j+m+x:m+j+x)}}}}return l}var h=Object.create?Object.create(null):{};function a(j){if(h[j]){return h[j]}var m=j,n,p=[],o=0;while(m){if((n=i.text.exec(m))!==null){p.push(n[0])}else{if((n=i.modulo.exec(m))!==null){p.push("%")}else{if((n=i.placeholder.exec(m))!==null){if(n[2]){o|=1;var q=[],l=n[2],k=[];if((k=i.key.exec(l))!==null){q.push(k[1]);while((l=l.substring(k[0].length))!==""){if((k=i.key_access.exec(l))!==null){q.push(k[1])}else{if((k=i.index_access.exec(l))!==null){q.push(k[1])}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}n[2]=q}else{o|=2}if(o===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}p.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}else{throw new SyntaxError("[sprintf] unexpected placeholder")}}}m=m.substring(n[0].length)}h[j]=p;return p}e=function(j){return c(a(j),arguments)};function b(k,j){return e.apply(null,[k].concat(j||[]))}f.sprintf=e;f.vsprintf=b})(Dynamsoft.Lib);(function(b){var f=b.Lib,e=f.doc;var d=20200521;if(f._evt_ver){if(f.isNumber(f._evt_ver)&&f._evt_ver>=d){return}}f._evt_ver=d;f.Events={registedClass:[],registedObjs:[]};var c=function(g){var i=g||window.event;var h=true;f.each(f.Events.registedObjs,function(j){f.each(f.Events.registedClass,function(k){if(j instanceof k){if(j.bFocus&&j.handlerKeyDown){h=j.handlerKeyDown(i);if(!h){return false}}}})});return h};f.ready(function(){f.addEventListener(e.documentElement,"keydown",c)});f.mix(f,{getWheelDelta:function(g){g=g||window.event;var j,i=g.wheelDelta,h=g.detail;if(i){j=i/120}if(h){j=-(h%3===0?h/3:h)}return j}});var a={LEFT:0,MIDDLE:1,RIGHT:2};f.EnumMouseButton=a;f.detectButton=function(g){var h=g||window.event;if(h.which==null){return(h.button<2)?a.LEFT:((h.button==4)?a.MIDDLE:a.RIGHT)}else{return(h.which<2)?a.LEFT:((h.which==2)?a.MIDDLE:a.RIGHT)}}})(Dynamsoft);(function(b){var a=20200521;if(b._ui_eventWhich_ver){if(b.isNumber(b._ui_eventWhich_ver)&&b._ui_eventWhich_ver>=a){return}}b._ui_eventWhich_ver=a;b.switchEvent=function(c){c=c||window.event;if(c.which==null){c.which=(c.button<2)?1:((c.button==4)?2:3)}else{c.which=(c.which<2)?1:((c.which==2)?2:3)}return c}})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._ui_style_ver){if(b.isNumber(b._ui_style_ver)&&b._ui_style_ver>=a){return}}b._ui_style_ver=a;b.currentStyle=function(f,g){var e=b.win,d=e.doc,c;if(f.currentStyle){return f.currentStyle[g]}else{if(e.getComputedStyle){c=g.replace(/([A-Z])/g,"-$1");c=g.toLowerCase();return d.defaultView.getComputedStyle(f,null)[g]}}return null}})(Dynamsoft.Lib);(function(f,h){var m=Array.prototype,i=!0,t=!1,l=f.Lib,b=f.navInfoSync,o=l.isString,v=l.each,s=m.slice,n=" ",p=(b.bIE&&b.IEMode<10),r=/[\n\t\r\.]/g;var d=20200521;if(l._ui_nodelist_ver){if(l.isNumber(l._ui_nodelist_ver)&&l._ui_nodelist_ver>=d){return}}l._ui_nodelist_ver=d;function w(z,A,y){var x=this;if(!(x instanceof w)){return new w(z,A,y)}if(!z){return x}if(typeof z==="string"){l.error("Err 4001.");return x}if(l.isArray(z)||z.isNodeList){Array.prototype.push.apply(x,l.makeArray(z));return x}x[0]=z;x.length=1;return x}w.prototype={isNodeList:true,length:0,item:function(y){var x=this;if(l.isNumber(y)){if(y>=x.length){return null}else{return new w(x[y])}}else{return new w(y)}},slice:function(){return new w(s.apply(this,arguments))},getDOMNodes:function(){return s.call(this)},each:function(z,y){var x=this;v(x,function(B,A){B=new w(B);return z.call(y||B,B,A,x)});return x},getEL:function(){var x=this;return(x.length>0)?x[0]:h},all:function(x){var z,y=this;if(y.length>0){z=l.all(x,y)}else{z=new w()}return z},one:function(x){var y=this,A=y.all(x),z=A.length?A.slice(0,1):A;return z}};function j(x){return o(x)&&(x=l.trim(x))&&x.length>=3&&l.startsWith(x,"<")&&l.endsWith(x,">")}function g(x){return(n+x+n).replace(r,n)}function u(x){return(x).replace(r,"")}function a(B){var y=B.innerHTML;if(!document.all){return y}var A=/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/ig;var z=/"'([^'"]*)'"/ig;y=y.replace(A,'$1="$2"').replace(z,'"$1"');var x=y.replace(/<(\/?)(\w+)([^>]*)>/g,function(D,C,F,E){if(C){return"</"+F.toLowerCase()+">"}return("<"+F.toLowerCase()+E+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(M,H,N,L,K,J,G,I){if(K){return'="'+K+'"'+J}return M})});return x.replace(/<\/?([^>]+)>/g,function(C){return C})}var q=function(B,D){var A=B.className,x,y=D.length,C,z,E;if(A){x=g(A);C=A;z=0;for(;z<y;z++){E=u(D[z]);if(x.indexOf(n+E+n)<0){C+=n+E}}C=l.trim(C)}else{C=D.join(" ")}B.className=C},k=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;while(A.indexOf(C)>=0){A=A.replace(C,n)}}B.className=l.trim(A)}},c=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;if(A.indexOf(C)<0){return t}}return i}return t};l.mix(w.prototype,{before:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.insertBefore(A,z.childNodes[0])})}},append:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.appendChild(A)})}},html:function(y){var x=this.getEL();if(x){if(l.isUndef(y)){return a(x)}x.innerHTML="";v(l.parseHTML(y),function(z){x.appendChild(z)})}},attr:function(z,x){var y=this.getEL();if(y){if(l.isUndef(x)){if(z==="readonly"){return y.readOnly?"readonly":""}if(z==="style"||!p){y=y.attributes[z];if(y){y=y.value}}else{y=y[z]}return y}if(z=="class"){y.className=x}else{y[z]=x}}},style:function(z,x){var y=this.getEL();if(y){return l.style(y,z,x)}},css:function(x){v(this,function(y){v(x,function(z,A){l.style(y,A,z)})})},addClass:function(x){var y=this.getEL();if(y){q(y,x.split(n))}},removeClass:function(x){var y=this.getEL();if(y){k(y,x.split(n))}},hasClass:function(x){var y=this.getEL();if(y){return c(y,x.split(n))}},parent:function(){var x=this.getEL();if(x){x=x.parentNode}return new w(x)},remove:function(){var x=this.getEL();if(x){x.parentNode.removeChild(x)}},offset:function(){var x=this.getEL();return l.DOM.getElDimensions(x,i)}});function e(x,z){var y=z;if(y&&y.isNodeList){y=y.getEL()}if(o(x)){if(j(x)){l.err("Err 4002.")}return new w(l.sizzle(x,y))}if(x.isNodeList){return x}return new w(x)}l.mix(l,{all:e,one:function(x,y){var z=e(x,y);return z.length?z.slice(0,1):z},isNodeList:function(x){return x instanceof w}});l.ready(function(){l.all=e})})(Dynamsoft);(function(e){var d=e.win,c=e.doc,b=isNaN;var a=20200521;if(e._dom_ver){if(e.isNumber(e._dom_ver)&&e._dom_ver>=a){return}}e._dom_ver=a;e.DOM={getOffset:function(p,j,l){p=p||d.event;var g=l||p.target,o=0,n=0,k=0,m=0,f,i,h=false;while(g&&!b(g.offsetLeft)&&!b(g.offsetTop)){i=g.scrollLeft;f=g.scrollTop;if(g.tagName==="BODY"){if(h){i=0;f=0}else{i=i|c.documentElement.scrollLeft;f=f|c.documentElement.scrollTop}}else{if(g.style.position==="fixed"){h=true}}o+=g.offsetLeft-i;n+=g.offsetTop-f;g=g.offsetParent}if(j){k=j.Left;m=j.Top}o=p.clientX-o-k;n=p.clientY-n-m;return{x:o,y:n}},getElDimensions:function(g,i){var f,h;if(!g){return{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}f=g.style.display;g.style.display="";h=i?{offsetTop:g.offsetTop,offsetLeft:g.offsetLeft,offsetWidth:g.offsetWidth,offsetHeight:g.offsetHeight}:{clientTop:g.clientTop,clientLeft:g.clientLeft,clientWidth:g.clientWidth?g.clientWidth:(parseInt(g.style.width)?parseInt(g.style.width):0),clientHeight:g.clientHeight?g.clientHeight:(parseInt(g.style.height)?parseInt(g.style.height):0)};g.style.display=f;return h}};e.getElDimensions=e.DOM.getElDimensions})(Dynamsoft.Lib);(function(g,h){var i=20200521,k=g.Lib,q;if(k._dialog_ver){if(k.isNumber(k._dialog_ver)&&k._dialog_ver>=i){return}}k._dialog_ver=i;q="data:image/gif;base64,R0lGODlhzAETAPf/AK/a/sfn/qnW/aLV/bPb/pnP/KnZ/9Ds/6jZ/8/s/6fY/57S/aTW/qHU/s3r/5XM/Mbn/sLk/bzh/Mrp/rje/K3b/6/d/6va/7nh/szq/8vq/8rp/8Xn/7Tf/8np/7Le/6rZ/6za/8Pm/6bX/sjp/7fe/J/T/bPe/6ra/7/k/5vQ/Lbg/sLm/8zr/7ri/rHd/77k/5rP/KjY/6zb/8Tm/rrg/Mjo/8bo/87r/8Tn/8bn/8Dl/6XW/s3q/8Ll/qPV/r/j/rfg/sXm/sfo/6LV/rbe/MLl/7Lc/bXf/s7s/67d/73j/5jO/Mrq/7zi/rrh/pfN/Ljh/rvh/MDj/ZbN/LTd/KjY/rnf/Kza/r7i/aLU/qHU/cjo/rvg/KXV/Ljf/bni/sDk/6fX/8np/sPl/qrY/cfo/sXn/qnY/sHj/bHb/pbM/KTV/b/j/arZ/rPf/6fX/rPe/aHS/LXe/M/r/8Hk/bjg/r7j/7Da/Z7S/KvZ/a7Z/b3j/pnO/Lvh/qvb/6fV/abW/p/S/LXg/sno/rTe/ZzR/L3i/cDk/rbf/rng/qHT/Lvi/qvZ/sHk/qvY/bvg/bzj/63a/qTU/LLd/p3R/ZzR/bDe/7Te/77j/rDZ/bXd/szq/sHl/6DU/rzh/a7b/prQ/b3i/sro/pjN/J/R/JXM+7bf/ZvQ/bbd/KjX/K3b/ZTM/K3d/6rY/rDb/pvP/JTL+53R/K3Y/aXX/rPc/bXd/K7b/7rg/cno/7jf/KfY/qna/6DT/aDU/aTV/sbm/rnf/Z7T/afX/aPU/KrX/JrQ/Lzj/sTm/7Hd/rbe/aTW/aXW/J3Q/KbV/KbW/bzi/6rX/ZrO/K/Z/anZ/r3h/b/l/7Lb/rfh/qjX/qvX/bvj/qbW/KzZ/bvi/73k/7ff/rHa/qLT/KDS/K7Y/bXe/bHa/cTl/anY/bbd+6LU/aXW/bfg/bjg/aTV/Lrf/LPd/p/T/MTl/q/b/anX/JXN/MPm/qnY/77i/q/Y/ZfO/LPc+7Tc/ZnO+63Y/AAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjAwMjY2NzMzQTQyMTFFODlFMUQ4ODdDOEJCNjY0RkEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjAwMjY2NzQzQTQyMTFFODlFMUQ4ODdDOEJCNjY0RkEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMDAyNjY3MTNBNDIxMUU4OUUxRDg4N0M4QkI2NjRGQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMDAyNjY3MjNBNDIxMUU4OUUxRDg4N0M4QkI2NjRGQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwABOcErJq1Qp0q9euXrn+DCvWJ9msYMmmDbv269izbbfGLdvzrIS5aN+q1cuWr1uzcP3KFUyXp128dwnn3cmECRQK6fYVK6CwQKUFmBdE2MyZc+bPnzuLBk1adGfSoE17Rp1Z9WbWrV3Dxuw6wmzNsmfXvr1bd27YvYH/Zh2c+HDUxZEfL708dfPQz2Or5t28kqVQBa5EppywQIPv4CGI/x8/Hrx58+TTn1+fnvz68+3Lvw8fH8J8+vHvf69vXz9//Q385199AAp4n4HzIfieguwROGB+D7ZXoIMHUpighQti2CCE55mwACoFUGALdzYxYOKJDEyg4oorouiiiSzG+KKLMbI4I4o1tngjjDlOsCOPOf6YYo9C9ujjj0YWSSSSS+6YJJNBQlmjklE62eSNT1pZJZZXzpgll1t62SUDRHiyQChQpEPiQQWMIIYCcMbpwJx00hnnnXfWqSeefOpZJ594+mknoHIK6gChhQqKKJyGHrpoo4sqAOmjhkY6KaKXEpopoJv2WSmlioLqp6WfYlqqpqdymqqnoSogxghkmv9gCROsrGlQAQrIgMCuvCKQwK/AAtvrsLsGayyxwxobLLK9Kisss8U6mwC00TpLra/SXivttNRuq2223YILrbfhWluust+aO664zJK7rrrtsousu/HCOy+4MigAawOVMPGArQUVIIMBBBdc8AEIJ5ywwQwTrPDDDTP8sMIRGzzxwhU7fPEBGWt8cccGbMxxxyKDXDLJG5ucMsofszyxyi1nfLLMK9Mcc8Uz41yzzjdHnLPPK8sgBgMNLFDAv5Uh4DLES1PcNMY2v/w0wjBLHTXTVzudNdQ8W9011l9rHTbXQPfc8M9n71y212uD3bbYb5OdttkSp4yAAkQbjXR3dFT57fbcbAP+d910W6y24HAjLjfhgTM+uOGFH3y444lTvjjkjWP+uOSRe5w55597vrnolWteOugPC5330QATVAAO3L6L7rnH0r6s7c/KXrvut/Oee72z+/5rusEDv7vxvSP/+732Eksv88VDf7z0yVO/vPPyYt98ssrSgcO+/e5t0yE9OGpqq6iir6r6rI4q6p7v/xn/oOe7Xz/898ufP/3p298//v/TXwD5tz7/FRCABxRgAgnYPgQ2UIEP7AEnJkAEWTGhHq1z3VQ2yMEOevCDIAyhCEdIwhIqpSYoTKEKV8jCFrrwhTCMoQxnSMMa2vCGOMyhDncYw4AAACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrOrxo8C1K4USsB6IHTuWyh6vXUssIst2DSC0XEsIYMtWDlyueOiSjXGXQhG9ZavcBQv4gdnBawG7HTy3sN27eQvzvfu3MBXBcAkDPpw5sd7FmRsDfgw3MuDJcCtvxoxWs17OrT3TBd1atF7SaE3rRY1W9WvWXl3ThR1c9lhWsUwVUFjgARQmTFRckUC9uoQugnwaO2K9ehdmPmNo/+tOXQq58F7IU6/yM496CTV+SlePXTt38t/DjydvHv179j65p158Ps2HX3Y9bUcfeD2Jp15/DaanHoA9CUgegT0Z2F19Cd63IYM8OcjfeRH+1957GPKkoXUc8qQgfiDeBB0UDyyX0E2hWFLJAiZkEcGPQEYwxTILFGmkkSZ8ESSQaehx5JPChLPkj3UQ8OSTZUz5Iy5XHjmAlkJ2iaSPUw4pJo9KTtnkmVFqWeWZC2SpJZdnfqnlFHD2eCeRYiap5Zpitjnlm2fKOSWdYtpZZp5kLmlmn2kuCWiXgi5JqJiGLolol4o6yuieZ/qpppNGVmJJKDcxhwqPDbT6gw8QxP8qKwRCoNHqrbj+4MessgqhBq7AEoEJr7KCAyyuWkhCbKyZHIvrCMtCQIMWzroKK7G1VtuArsv6qq2w0RpbbbLRNqsttMtOq+2r3dpaLbfY/lotuMuK6yy5y5pbLbrEqvvutbxm++6u8X47bL3a4kusvs7yy6u/zrKLrbsRExywvK2asAAqNtq0gCdEMCAyA3CcMcHJKE/ABRYjtyzyCECkjDIXhbjcMi12yHwyIX7YPDIPyeg8wRg++DwyNUJPYAYPRpNsss4rNw2z0DQ3jbPQPDcNtNBEN80A0kIv3XTJVLNs9NRQ12z01TpnbfTWOnfdNNg6i2002VCb7TPaMlf/vXbObff8dtBxFz130nb7jHffetvMd8p+M0CEJwt0fFABJoQ8ghgKdA4CCQ6ELroDTVjQ+emoG2DE6KJrEATqsBvgDeuhZ3AH7KjL0AHtDrSQA+6oV8C7AxsgALznoNNe+vEKqM6768zLzrvtzOvOu+/MKyA878Uz/znvyx/vPO3Qiz877dQfbz3t2DO/Pe3dH/+98qaLvzr5r5s//e3q787+7+4bXvyANz/WhQ9442Od68QwAsmZwHIGKUADGDACBcgAARhEwB88kIAOejABLbhEBkeIwQuI4IMedEAUSDhCFEQChR3EQQpYmEEDDAKGCUjCDWiYQSXgMAEaQAEP/zXIQRiGcIgmxKEKh+hCHMpwiDbEoQ6HiAAf4jCIQ9wgDo/IwyTCcIk8bCIMn8jDKMJwikO0IgyxyEMtGlGEXTzhF1cYxheOcYZlvOEZd5jGH7KRhm5EIRdp6EUUOsAOCmhgAyBYkAL8gAFikIEBJknJGWzgAJjM5AEccAJKenKSIUCGJjOJAwx80pMX4MMoMUmHHZySkiBYwSoPkIAhvJKSFpjlATJwgVsawJKz5KQvQznLUvoylbNspS9jOcta+tIAuZwlL30JzFUK85bEXKUxb4nMVSrzlsxcpTN9Gc1VTvOW1RzlNV+ZzVFu85XdHOU3XxnOUY7zluUc5Tlfmf9OTa7zlO3UJA7sIAYGLJI5ZKggAl5ZgUuusgedxKYIgvmEY6pSm64EpyzFaUty6nKfp2zoLCE6zIlas6LcvKg7M0rPjdqzo/j8aC9vKdKHRpSdJlUnSuGpUoGy9JT11OQ9X5lPTYL0kzUdJUklSlGLFvOnnwxqJod6yqJm8qieTKoml4rTWbbADgZlJEEKAIEz3EOSDHWoPm8K0Jz6c6enjKdPl+lSocKUqLrUQAh8qdWrsvWTIXBrJh0A10/KlZRQ9aRUMUnVT1oVk3rlq1qN+ldPBrapKX0qXZt516rmda80naxfS4pZnmpWo5x95mMPENnQSrOylLysPDdQjoOr3igYozADCIY4AxJc8QNZZMEWwcDEbSjRGkPkhR5RiEYeqhGFTbgAb327RuC2UbhGJG4YjftF5PJQuVLko3N/GN3p/ja4wy3ucZO73A82l4bP/WB5edjb8143vdtd73fb68H3sjC+HpwvDetbXfR6kA444EQA0CHWsU7lwRCOsIQnTOEKW/jCGM6wUmrC4Q57+MMgDrGIR0ziEpv4xChOsYpXzOIWu/jFJQ4IACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrKCYo8C1K4Uich6IHTuWyiSvXUvsIcv2QR+0XefEaDsWShm4FEoAoit2TSm8FKrwFUvqCF6wg83iVTvYLWC5g+0u3svXL2DBgwsfDstXMVzGg9/ihcxX8mfKdC3jxcxXM1zEnc9+Xhv68dzSd08PVg2XNV3XaGHT9YwW9ANWsUwVUFjgARQmTFSkkkC9uoQaXnyqUGW9upQjPw1J/+lOvYYg7ZrIX3/kMwYx9RKu/JSuHrt27uS/hx9P3jz6+uz15B588mk3XX/Z9bSdevr5JF595ymYXn8B8jSgegUqeGB39imIX3cN9vRgfxHypMKEHFa404XkZWjihtZ1aOKH1ukHHRQPLJfQTaFYUskCW0ASwZBERtCGHgskqaSSJqxSJJF1fLHklECm8eSQWbBBpZK9bHJlBFOosaWSw3wZwSFjJhnkl0em2eSXUaZZ5ZdZptnll2HKWeaXaKa55pVtjvnmlXH6aeWVdY5555V5prnnlX2O+eeTgW456JOFSnrok4luueiTjY756JORbjlpkZVSeWmRUVZiSSg3Mf+HygImNGArD0BAoOuuENDwiq3ABvsDJbzy6kSwyDYQiBDF6koGGskC+4sdzUIgRCLR2qpFI9VC4AMR2TaAa7W+hjtst8eGu2y1z4Y7bbXXhrttt9+GO26z5WZ7brXpZrtus+1m+26z8WY7b7X1ZntvsflGu2+z/Ub7b7EBRztwsQVHe3CzCUe7MK8NJ/twsX6YsAAqOtq0gCdEMOAyA1b4MMHMNE8QQBwv5+zyCKfUTPMYiOissxtm+DzzGVgI/fIuThg9ARdPKO0yD6A4PQENI0gNs8xG36w1z04DrTUDRDuNtNZMOw211lRbjbXWMTvttdRgGy221mUbfbbUaRv/vbbUbTv9ttRxd40z3T3bHTTeReudNN9N+x014FULnjXhXPs8t9J1+0yIKJ4skPJBBZjQ8ghiKKB6CDk44PrrDngQhOq0124ABrC/3gILtfeuQAVN5O46CS/4TvsFKQjvgAZLGK+6DB8o78AQIDivAOvKy2797crvbv3vwQtPvPXIK8+89dBLT7312AuvvfPcC++99cArP77z5Qt/vvPpK7++8+3L3fuMF7/czc959RNf8fCXPP01j3/R81/1ANg6980OfriDXQ84MQZRmGB0BilAAxgwAgXIAAEoREArOJCAFrowARqIQgpniEIUuOCFLkxCDmhIQwtoAIct9MAH/3iYwhnsAIgJaAEMiIhCA3QAiQkgwQWYqEIWAjGGVLQhEnVIRQT4EIlCpKIRkahEKjoRilKk4gqRiEUmahGIXKTiF4EYRiaOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGIr6xhXTAAScI4QcQFqQAPGCAGGRggFKa0gI6OIAqV3mADGDAlLAs5QVcwMpVJoADsYzlCzJQS1Vu4AS5NGUFdtDLAzggBcEsJQiQUMwD5KICyTQAKovpymjOspi3jKYBdlnMX0ZzmMU8ZjSX2cxnRnOavaxmMq/Zy2xGk5u99GYywdlLcSaTnMU0ZzLRWf9LdQaTnbV0ZzLhWUt5BpOetbRnMPHZS30Gk5+s9GcuAXoAOvRgAhDwJEEKAAQrKAABD01lOl+ZzBDQsp24jOYHNNDNDnwzDOFE5j2ZWUwbQHOfIu0nSYNpUmymNJkrbelLYzpOmvbSpufMaUR3msueolSbQY2nS+cJ03rKdKFGrSVScUpNpsbSqQH9aTCjWtCpHrSqCb1qLhmq1ZuGtKvRBGsCHIBRjQ6kABAgAwhI+VAOFFMDXoUlWFkp0LGytJceMGsuK4BWVip0rVll5Vb7+tfAmnKwthRrLsnKysQO1apFbeZkc2kBv/YSsHE9aVihethaepaqRJ2paN1KWtPJ1hK1JVUtYTUbS86u8rVnjS1WZ3tO27IStzw9qUXrypxgjMIeIZBjDpDYBAxQ8QJg2KIIuvgBD/DxDWJMARkbycRHAvEGFZAuda3LROxql7veBSIJwGtH8TKyi+bFIXrVC8TqXje7cNwuFbv73fCOF79Q3C8TLTDd/rKXiO4NMHwLXN8DUzG/L1QwERm83v9mkhOjCIZd7zqVEpv4xChOsYpXzOIWu/jFSqmJjGdM4xrb+MY4zrGOd8zjHvv4x0AOspCHTOQi7zggACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrPTlo8C1K4Uizh6IHTt2TTOvXqvEIMsWigC0XEs8Ysu2jy24FOaMozuWiji8FI7wHctkGl6wgx+YBaw2sVu8chM/sItXb2K/gAUnLnw47ODFeBsPfgw3cmLKcC0PxoxX82DOcBF/Pht67ei3peeevpt67+q/rSXDRiubL2ivJUrU6meqgMICD6AwYWKoloTr2CXUKOYzxqLs2XXl//GpYhb4613w/JR15byEK17Ic3MvocjP6u63d//uXjx58+elt15758EnH332+YTfefr15B19/vVUnnsC+sSeewZKOJ97Cfa0IHgN8vRgf+NJCCB4FfZ0YYHxaYjgfdYxyJ2D/GUnRRdzxOBcQjeFYkklC2zxRQREFhlBG3gsoOSSTD5jpJHVsMHklL5c8ySRaSgz5ZQ/HHJlBFmUseWSJnTzZQSfjLmkkF8iqaaSTn4Z5ZtVfpnlmwt0+WWYb5Z5Zppvsnmlm2/GeeWcatZ55Z1v6nkln2r6+SWgagr6JKFqGvokomMq+iSjajr6JKRjSnolpWNaaiSmY2oaQR1TZP9Rwo42obKACQ3kGogTEPTqKwQ0YJLrsMRq4cqvvzqCBrHM8pAIsr0C8wSzzGbjCLQQ+IAHtcP+oAa2EADxA7e68gptsOQ2YCy4yqbrLLbSptuAtdhqm6634Iqb7q7Yokvuuti2S+670MabLr3Q2ksuvtjqSy6/5wr777EBLzvwswVPe/C1CW+78LcNj/uwucj6yy3A0Z5zJK0HFbCAJ0QwIDMDbgAxwc04T2CGIjP3PLMkY+SMMw1Y+NyzFRgIfTMhmRjdcyM0KD3BGXE4LfMIhUg9ARlwWE2zzUrv7DUDQEtNtNdIS8302FBLTbXXWGvNtdc1Sy2212UrfbbVaSv/vbbXbSv9ttVxSz231XWHzTPeQetdNN9J+9004FELXjXhWRveNeJgC3231XmPEoAQEbBsUAEmxDyCGAq0XoERDsQuuwMbQNP67bgr8EEGs8t+wwu5435BJL3HnkEnweNuwQ3FO0DCCsm3bkAQzTuQAwrRK/B687Vnrzvvxf+e/fDNH+/98s0/n/301V+f/fbFd5/97s2LHz35xZufPfrFqx89+81zX/Tg1zv5RY9+4QPe/YiXP+Ttj3n9g97/qBdA7A0QdvGz3fwy0ANOTCAA5zBdQQrQAAaMQAEyQIAKEaAEFiTghTBMQAaWsMIarrADDoghDIfwARvWcAbf0OEL/3HAAh/W8BIkEGICPIANI6oQBVFQYgI4MAMnstCFQpyhFRGAQyXy0IpAVCIRt4hEJTLRilCUIhWt2EIlatGKXRTiF50YRiGO0YplFOIZnZhGJa7RiW3MIg3hmEM59pCOQbRjEfGYRD02kY9R9GMVAYlFHb7RiR3oAQ44MQpgiJAgBeABA8QgAwOY8pQvEMEBVsnKA/TgDqeM5SmR4IBWstIGHZBlLCsAA1uuMgEs0GUsT2ADXx5gAxgQpikvgAFjHkAHFVCmAVJpzFdK0wC0NCYupclLYwLzmsQ0JjKlyUxnQlOa1PSlNaWZTV9uU5nd9OU3pRlOX45TmeU05jmVmf9OW65Tme205TuFGU9bzlOZ9bTlPYWZT1/uU5j9bOU/hYkEDk4AAp8cSAGcgAYFIACiqlTnEq65gh5oM5fw7KU8g0nPYtozmcpEQTONyYFboDOk/hypNEt6Um6q1KAsRahLFQpTYcrUmTW9aTV1qkyeuhOlBP1pKw8qzIS2cqG6PCpNbcpPnEqUqcJ0qkChqsuCTjWoVR3qVYua1Zn6MqldXeo1B7GBi2ZUIAWAACJCUEqQGtMBYNXlCjJgzCGQVZZmbaURQCDNDqiVlViVJQqegFQLKNWXgCUpYX1pWJ86c7GNfewqIxvLyVb2srbM7E43a8vOpvSzjFWmY8XJVsnhUpamlo0rZgMry8EW9rC7lKpiYyvM2b5UmqbFLWpbqVphyuAEvbrrPwoQjFEgogJWtEAlY9iCY2xxBRpQ4g3eAEYYSHEHKLDiG25gxihY0QBgkKIIlJDd7cKwu98NrxDHW97zpteJ623ve+OrxPnWV4n4tSJ4xUteOppXiehVL3v16F4nwle+9HWidhHsXQXrV4f8dbB/JSxgCxNYiAbWsH1fmGAbykABI0iGMqQ73anY+MY4zrGOd8zjHvv4x0BWSk2GTOQiG/nISE6ykpfM5CY7+clQjrKUp0zlKluZyQEBACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrKCYo8C1K4Uich6IHTuWyiSvXUvsIcv2QR+0XefEaDsWShm4FEoAoit2TSm8FKrwFUvqCF6wg83iVTvYLWC5g+0u3svXL2DBgwsfDstXMVzGg9/ihcxX8mfKdC3jxcxXM1zEnc9+Xhv68dzSd08PVg2XNV3XaGHT9YwW9ANWsUwVUFjgARQmTFSkkkC9uoQaXnyqUGW9upQjPw1J/+lOvYYg7ZrIX3/kMwYx9RKu/JSuHrt27uS/hx9P3jz6+uz15B588mk3XX/Z9bSdevr5JF595ymYXn8B8jSgegUqeGB39imIX3cN9vRgfxHypMKEHFa404XkZWjihtZ1aOKH1ukHHRQPLJfQTaFYUskCW0ASwZBERtCGHgskqaSSJqxSJJF1fLHklECm8eSQWbBBpZK9bHJlBFOosaWSw3wZwSFjJhnkl0em2eSXUaZZ5ZdZptnll2HKWeaXaKa55pVtjvnmlXH6aeWVdY5555V5prnnlX2O+eeTgW456JOFSnrok4luueiTjY756JORbjlpkZVSeWmRUVZiSSg3Mf+HygImNGArD0BAoOuuENDwiq3ABvsDJbzy6kSwyDYQiBDF6koGGskC+4sdzUIgRCLR2qpFI9VC4AMR2TaAa7W+hjtst8eGu2y1z4Y7bbXXhrttt9+GO26z5WZ7brXpZrtus+1m+26z8WY7b7X1ZntvsflGu2+z/Ub7b7EBRztwsQVHe3CzCUe7MK8NJ/twsX6YsAAqOtq0gCdEMOAyA1b4MMHMNE8QQBwv5+zyCKfUTPMYiOissxtm+DzzGVgI/fIuThg9ARdPKO0yD6A4PQENI0gNs8xG36w1z04DrTUDRDuNtNZMOw211lRbjbXWMTvttdRgGy221mUbfbbUaRv/vbbUbTv9ttRxd40z3T3bHTTeReudNN9N+x014FULnjXhXPs8t9J1+0yIKJ4skPJBBZjQ8ghiKKB6CDk44PrrDngQhOq0124ABrC/3gILtfeuQAVN5O46CS/4TvsFKQjvgAZLGK+6DB8o78AQIDivAOvKy2797crvbv3vwQtPvPXIK8+89dBLT7312AuvvfPcC++99cArP77z5Qt/vvPpK7++8+3L3fuMF7/czc959RNf8fCXPP01j3/R81/1ANg6980OfriDXQ84MQZRmGB0BilAAxgwAgXIAAEoREArOJCAFrowARqIQgpniEIUuOCFLkxCDmhIQwtoAIct9MAH/3iYwhnsAIgJaAEMiIhCA3QAiQkgwQWYqEIWAjGGVLQhEnVIRQT4EIlCpKIRkahEKjoRilKk4gqRiEUmahGIXKTiF4EYRiaOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGIr6xhXTAAScI4QcQFqQAPGCAGGRggFKa0gI6OIAqV3mADGDAlLAs5QVcwMpVJoADsYzlCzJQS1Vu4AS5NGUFdtDLAzggBcEsJQiQUMwD5KICyTQAKovpymjOspi3jKYBdlnMX0ZzmMU8ZjSX2cxnRnOavaxmMq/Zy2xGk5u99GYywdlLcSaTnMU0ZzLRWf9LdQaTnbV0ZzLhWUt5BpOetbRnMPHZS30Gk5+s9GcuAXoAOvRgAhDwJEEKAAQrKAABD01lOl+ZzBDQsp24jOYHNNDNDnwzDOFE5j2ZWUwbQHOfIu0nSYNpUmymNJkrbelLYzpOmvbSpufMaUR3msueolSbQY2nS+cJ03rKdKFGrSVScUpNpsbSqQH9aTCjWtCpHrSqCb1qLhmq1ZuGtKvRBGsCHIBRjQ6kABAgAwhI+VAOFFMDXoUlWFkp0LGytJceMGsuK4BWVip0rVll5Vb7+tfAmnKwthRrLsnKysQO1apFbeZkc2kBv/YSsHE9aVihethaepaqRJ2paN1KWtPJ1hK1JVUtYTUbS86u8rVnjS1WZ3tO27IStzw9qUXrypxgjMIeIZBjDpDYBAxQ8QJg2KIIuvgBD/DxDWJMARkbycRHAvEGFZAuda3LROxql7veBSIJwGtH8TKyi+bFIXrVC8TqXje7cNwuFbv73fCOF79Q3C8TLTDd/rKXiO4NMHwLXN8DUzG/L1QwERm83v9mkhOjCIZd7zqVEpv4xChOsYpXzOIWu/jFSqmJjGdM4xrb+MY4zrGOd8zjHvv4x0AOspCHTOQi7zggACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrJjMosC1K4Ui0R6IHUtW2hGvXedMIsv2ASy0XauUajsWihy4XOFJoyuWFCC8JczxFdtnK1ywgx+Yxas28Vu8cgfbxUtB72C/gAUPLowX8eDFcBsPfgw3Mt/JeC3zxQw3cGLOh8N+Pht67WjKpumihquaLmu0rjcbRuuZ7+ISyNP5K6CwwAMoTJjIwiOhunUJNTT9zFPkuvV39H7G/+vivboudz5VeClfvUSe9NHYS7H1czr77Nu7lwcvnnz58+mtx5578MlHn0/2lYefT9yxx59P47EHYE/qsScBgRTGV9589VGnoHYM6ufdgz1F+B96FApYHoY8qaChdxwi6KF3C/bUoBRd1EABcwndFIollSygTjkRFGlkBFNsssCSTDbJBiRHGpnFPE1WucA6U0RZ5CfoWMmkCWVouSUbXi7pCx5iRoCLMGUKSaSWSba5wJNiTiknlmJy2SaYaX5CZplnprlmm0OKGWebdGppZ5t4aqlnmXzm+aeXgYo5aJmFwqkkolAqSiWjWTraJaRhStpmpVpe6mWmUR5a5pN1TP+RhQQ82oTKAiY0oCscikDg668QCKGIrsQW24AVQAD7KxlxGGusK/Io66sjADhLLBEASOsrEFZYqysPhWgLgSg/eNsAr9oKa+6xyUrL7LrQakutudiKy6254IpLrrnoSquuuchq+6658Uo7r7f1anuvt/lqu6+3/Sr7r7cBu9sswdEaXC3C2SrcLcPhOlwuxL36OyzA+JwTQRu1HlTAAp4QwcDMDLghygQ45zwBF07Q7DPNWPigc84QsPPzz6BAMDTONFByNM20wLM0zmRg8fTMVrQz9QSIwHF1zTcvzfPXDAQ9ddFkJz11019HvXXVX2e9dddf2zz12F+bvTTaX6v/vTTbV7s9NdxXyz013VfbLXbPeQu9t9F9K/2304FLPbjVhWt9uNeJhz003ldfAIQQEbRsUAEmyDyCGAq0XkEYDsQuuwMZpND67bgr8IIIs8vugQu5534CCb3HfgMSwd8uwwrFx57DC8m3fgEjzTtgxAXRK/B687Vnrzvvxf/u/fDNH5/98tU/n/301V+f/fbFd5/97s2Lnz35xZsfPfrNqx89+81zX/Tg1zv5RY9+4QPe/YiXP+Ttj3n9g97/qBdA7A0QdvGzXfLEMAJJpMx0BSlAAxgwAgXIAAEoRIASOpGAFrowAUnYQQpnmMIPcOCFLtQAI2hIw0F4AIctJMEK/3g4wygkAYgJ4MAHiIjCP0QCiQkQQQWYqEIWAjGGVESADZGowyz6EIlCzKIRkahEKjoRilKk4gqRiEUqbhGIXaTiF4EYRiqOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGGspAASPAwidASJACBIIBYpCBAUZJSgsY4QCoTOUBEhAGEJDylaM8gQ5UmcoMOAGWsFzBBmiJSg8EAZevxAAOeHkAHZwAmKMMwR2IeQAR3AKZBjAlMVnpSmTKkpi2hKYBdElMX2pTmMQ0JjSVyUxnQlOavKQmNK/Jy2xCk5u89CY0wclLcSKTnMQ0JzLRSf9LdVpzlu285Tt3Gc9fznOY9TzmPZeZz2fu85TpbCUuZSAGBriCkwMpAAbcoAAEAJOftEzBBdYJUFr2gBHaDAJBaSlPZLoAobS0JzDxyUsWWOCcEOWlSElKzJOmdKWqbCkwXxpOhc6UoTW96UOZudN/9hSl0FRpNw3qUpiqUqa4pCktbYpTpo7Uqbz0aVSBmkqh4pKoCR0nUreq1I/mNKRfJSUCFMCABmBUIAUYVwhE6VZmwiCuuOxASVXpAKgiMwgemKo2qRfODkDzAjBgphHaikuQqvKv0BQsMQub0sQWdLEOaOxjI0vMyXaVmJhFpmZ5ydmoepalVAUmY+vpWGTkQlaylIWlZVOZWmCulpatPexrgxpbXM42prUF5m1Lm9tX7haVvTUARet6138UIBijyEQkiagEFkBxCRcQJBIdAIYsroAESPRAIpnoggyQsZFE5AUMoNgJJajRu0gEr3iBSF7zoheI6s1ie99LRfnS175+xC8Q9cvEN+Kwv1Q8b3rXS8QBM7LA80Vife/73fA2eJAPLm+E/4vDAFPRwjjMY3wzDMQNJ7jDKLzkCBhggupadyo4zrGOd8zjHvv4x0AOspCVUpMiG/nISE6ykpfM5CY7+clQjrKUp0zlKlv5ylh2ckAAACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrPTlo8C1K4Uizh6IHTt2TTOvXqvEIMsWigC0XEs8Ysu2jy24FOaMozuWiji8FI7wHctkGl6wgx+YBaw2sVu8chM/sItXb2K/gAUnLnw47ODFeBsPfgw3cmLKcC0PxoxX82DOcBF/Pht67ei3peeevpt67+q/rSXDRiubL2ivJUrU6meqgMICD6AwYWKoloTr2CXUKOYzxqLs2XXl//GpYhb4613w/JR15byEK17Ic3MvocjP6u63d//uXjx58+elt15758EnH332+YTfefr15B19/vVUnnsC+sSeewZKOJ97Cfa0IHgN8vRgf+NJCCB4FfZ0YYHxaYjgfdYxyJ2D/GUnRRdzxOBcQjeFYkklC2zxRQREFhlBG3gsoOSSTD5jpJHVsMHklL5c8ySRaSgz5ZQ/HHJlBFmUseWSJnTzZQSfjLmkkF8iqaaSTn4Z5ZtVfpnlmwt0+WWYb5Z5Zppvsnmlm2/GeeWcatZ55Z1v6nkln2r6+SWgagr6JKFqGvokomMq+iSjajr6JKRjSnolpWNaaiSmY2oaQR1TZP9Rwo42obKACQ3kGogTEPTqKwQ0YJLrsMRq4cqvvzqCBrHM8pAIsr0C8wSzzGbjCLQQ+IAHtcP+oAa2EADxA7e68gptsOQ2YCy4yqbrLLbSptuAtdhqm6634Iqb7q7Yokvuuti2S+670MabLr3Q2ksuvtjqSy6/5wr777EBLzvwswVPe/C1CW+78LcNj/uwucj6yy3A0Z5zJK0HFbCAJ0QwIDMDbgAxwc04T2CGIjP3PLMkY+SMMw1Y+NyzFRgIfTMhmRjdcyM0KD3BGXE4LfMIhUg9ARlwWE2zzUrv7DUDQEtNtNdIS8302FBLTbXXWGvNtdc1Sy2212UrfbbVaSv/vbbXbSv9ttVxSz231XWHzTPeQetdNN9J+9004FELXjXhWRveNeJgC3231XmPEoAQEbBsUAEmxDyCGAq0XoERDsQuuwMbQNP67bgr8EEGs8t+wwu5435BJL3HnkEnweNuwQ3FO0DCCsm3bkAQzTuQAwrRK/B687Vnrzvvxf+e/fDNH+/98s0/n/301V+f/fbFd5/97s2LHz35xZufPfrFqx89+81zX/Tg1zv5RY9+4QPe/YiXP+Ttj3n9g97/qBdA7A0QdvGz3fwy0ANOTCAA5zBdQQrQAAaMQAEyQIAKEaAEFiTghTBMQAaWsMIarrADDoghDIfwARvWcAbf0OEL/3HAAh/W8BIkEGICPIANI6oQBVFQYgI4MAMnstCFQpyhFRGAQyXy0IpAVCIRt4hEJTLRilCUIhWt2EIlatGKXRTiF50YRiGO0YplFOIZnZhGJa7RiW3MIg3hmEM59pCOQbRjEfGYRD02kY9R9GMVAYlFHb7RiR3oAQ44MQpgiJAgBeABA8QgAwOY8pQvEMEBVsnKA/TgDqeM5SmR4IBWstIGHZBlLCsAA1uuMgEs0GUsT2ADXx5gAxgQpikvgAFjHkAHFVCmAVJpzFdK0wC0NCYupclLYwLzmsQ0JjKlyUxnQlOa1PSlNaWZTV9uU5nd9OU3pRlOX45TmeU05jmVmf9OW65Tme205TuFGU9bzlOZ9bTlPYWZT1/uU5j9bOU/hYkEDk4AAp8cSAGcgAYFIACiqlTnEq65gh5oM5fw7KU8g0nPYtozmcpEQTONyYFboDOk/hypNEt6Um6q1KAsRahLFQpTYcrUmTW9aTV1qkyeuhOlBP1pKw8qzIS2cqG6PCpNbcpPnEqUqcJ0qkChqsuCTjWoVR3qVYua1Zn6MqldXeo1B7GBi2ZUIAWAACJCUEqQGtMBYNXlCjJgzCGQVZZmbaURQCDNDqiVlViVJQqegFQLKNWXgCUpYX1pWJ86c7GNfewqIxvLyVb2srbM7E43a8vOpvSzjFWmY8XJVsnhUpamlo0rZgMry8EW9rC7lKpiYyvM2b5UmqbFLWpbqVphyuAEvbrrPwoQjFEgogJWtEAlY9iCY2xxBRpQ4g3eAEYYSHEHKLDiG25gxihY0QBgkKIIlJDd7cKwu98NrxDHW97zpteJ623ve+OrxPnWV4n4tSJ4xUteOppXiehVL3v16F4nwle+9HWidhHsXQXrV4f8dbB/JSxgCxNYiAbWsH1fmGAbykABI0iGMqQ73anY+MY4zrGOd8zjHvv4x0BWSk2GTOQiG/nISE6ykpfM5CY7+clQjrKUp0zlKluZyQEBACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrKCYo8C1K4Uich6IHTuWyiSvXUvsIcv2QR+0XefEaDsWShm4FEoAoit2TSm8FKrwFUvqCF6wg83iVTvYLWC5g+0u3svXL2DBgwsfDstXMVzGg9/ihcxX8mfKdC3jxcxXM1zEnc9+Xhv68dzSd08PVg2XNV3XaGHT9YwW9ANWsUwVUFjgARQmTFSkkkC9uoQaXnyqUGW9upQjPw1J/+lOvYYg7ZrIX3/kMwYx9RKu/JSuHrt27uS/hx9P3jz6+uz15B588mk3XX/Z9bSdevr5JF595ymYXn8B8jSgegUqeGB39imIX3cN9vRgfxHypMKEHFa404XkZWjihtZ1aOKH1ukHHRQPLJfQTaFYUskCW0ASwZBERtCGHgskqaSSJqxSJJF1fLHklECm8eSQWbBBpZK9bHJlBFOosaWSw3wZwSFjJhnkl0em2eSXUaZZ5ZdZptnll2HKWeaXaKa55pVtjvnmlXH6aeWVdY5555V5prnnlX2O+eeTgW456JOFSnrok4luueiTjY756JORbjlpkZVSeWmRUVZiSSg3Mf+HygImNGArD0BAoOuuENDwiq3ABvsDJbzy6kSwyDYQiBDF6koGGskC+4sdzUIgRCLR2qpFI9VC4AMR2TaAa7W+hjtst8eGu2y1z4Y7bbXXhrttt9+GO26z5WZ7brXpZrtus+1m+26z8WY7b7X1ZntvsflGu2+z/Ub7b7EBRztwsQVHe3CzCUe7MK8NJ/twsX6YsAAqOtq0gCdEMOAyA1b4MMHMNE8QQBwv5+zyCKfUTPMYiOissxtm+DzzGVgI/fIuThg9ARdPKO0yD6A4PQENI0gNs8xG36w1z04DrTUDRDuNtNZMOw211lRbjbXWMTvttdRgGy221mUbfbbUaRv/vbbUbTv9ttRxd40z3T3bHTTeReudNN9N+x014FULnjXhXPs8t9J1+0yIKJ4skPJBBZjQ8ghiKKB6CDk44PrrDngQhOq0124ABrC/3gILtfeuQAVN5O46CS/4TvsFKQjvgAZLGK+6DB8o78AQIDivAOvKy2797crvbv3vwQtPvPXIK8+89dBLT7312AuvvfPcC++99cArP77z5Qt/vvPpK7++8+3L3fuMF7/czc959RNf8fCXPP01j3/R81/1ANg6980OfriDXQ84MQZRmGB0BilAAxgwAgXIAAEoREArOJCAFrowARqIQgpniEIUuOCFLkxCDmhIQwtoAIct9MAH/3iYwhnsAIgJaAEMiIhCA3QAiQkgwQWYqEIWAjGGVLQhEnVIRQT4EIlCpKIRkahEKjoRilKk4gqRiEUmahGIXKTiF4EYRiaOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGIr6xhXTAAScI4QcQFqQAPGCAGGRggFKa0gI6OIAqV3mADGDAlLAs5QVcwMpVJoADsYzlCzJQS1Vu4AS5NGUFdtDLAzggBcEsJQiQUMwD5KICyTQAKovpymjOspi3jKYBdlnMX0ZzmMU8ZjSX2cxnRnOavaxmMq/Zy2xGk5u99GYywdlLcSaTnMU0ZzLRWf9LdQaTnbV0ZzLhWUt5BpOetbRnMPHZS30Gk5+s9GcuAXoAOvRgAhDwJEEKAAQrKAABD01lOl+ZzBDQsp24jOYHNNDNDnwzDOFE5j2ZWUwbQHOfIu0nSYNpUmymNJkrbelLYzpOmvbSpufMaUR3msueolSbQY2nS+cJ03rKdKFGrSVScUpNpsbSqQH9aTCjWtCpHrSqCb1qLhmq1ZuGtKvRBGsCHIBRjQ6kABAgAwhI+VAOFFMDXoUlWFkp0LGytJceMGsuK4BWVip0rVll5Vb7+tfAmnKwthRrLsnKysQO1apFbeZkc2kBv/YSsHE9aVihethaepaqRJ2paN1KWtPJ1hK1JVUtYTUbS86u8rVnjS1WZ3tO27IStzw9qUXrypxgjMIeIZBjDpDYBAxQ8QJg2KIIuvgBD/DxDWJMARkbycRHAvEGFZAuda3LROxql7veBSIJwGtH8TKyi+bFIXrVC8TqXje7cNwuFbv73fCOF79Q3C8TLTDd/rKXiO4NMHwLXN8DUzG/L1QwERm83v9mkhOjCIZd7zqVEpv4xChOsYpXzOIWu/jFSqmJjGdM4xrb+MY4zrGOd8zjHvv4x0AOspCHTOQi7zggACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrOrxo8C1K4USsB6IHTuWyh6vXUssIst2DSC0XEsIYMtWDlyueOiSjXGXQhG9ZavcBQv4gdnBawG7HTy3sN27eQvzvfu3MBXBcAkDPpw5sd7FmRsDfgw3MuDJcCtvxoxWs17OrT3TBd1atF7SaE3rRY1W9WvWXl3ThR1c9lhWsUwVUFjgARQmTFRckUC9uoQugnwaO2K9ehdmPmNo/+tOXQq58F7IU6/yM496CTV+SlePXTt38t/DjydvHv179j65p158Ps2HX3Y9bUcfeD2Jp15/DaanHoA9CUgegT0Z2F19Cd63IYM8OcjfeRH+1957GPKkoXUc8qQgfiDeBB0UDyyX0E2hWFLJAiZkEcGPQEYwxTILFGmkkSZ8ESSQaehx5JPChLPkj3UQ8OSTZUz5Iy5XHjmAlkJ2iaSPUw4pJo9KTtnkmVFqWeWZC2SpJZdnfqnlFHD2eCeRYiap5Zpitjnlm2fKOSWdYtpZZp5kLmlmn2kuCWiXgi5JqJiGLolol4o6yuieZ/qpppNGVmJJKDcxhwqPDbT6gw8QxP8qKwRCoNHqrbj+4MessgqhBq7AEoEJr7KCAyyuWkhCbKyZHIvrCMtCQIMWzroKK7G1VtuArsv6qq2w0RpbbbLRNqsttMtOq+2r3dpaLbfY/lotuMuK6yy5y5pbLbrEqvvutbxm++6u8X47bL3a4kusvs7yy6u/zrKLrbsRExywvK2asAAqNtq0gCdEMCAyA3CcMcHJKE/ABRYjtyzyCECkjDIXhbjcMi12yHwyIX7YPDIPyeg8wRg++DwyNUJPYAYPRpNsss4rNw2z0DQ3jbPQPDcNtNBEN80A0kIv3XTJVLNs9NRQ12z01TpnbfTWOnfdNNg6i2002VCb7TPaMlf/vXbObff8dtBxFz130nb7jHffetvMd8p+M0CEJwt0fFABJoQ8ghgKdA4CCQ6ELroDTVjQ+emoG2DE6KJrEATqsBvgDeuhZ3AH7KjL0AHtDrSQA+6oV8C7AxsgALznoNNe+vEKqM6768zLzrvtzOvOu+/MKyA878Uz/znvyx/vPO3Qiz877dQfbz3t2DO/Pe3dH/+98qaLvzr5r5s//e3q787+7+4bXvyANz/WhQ9442Od68QwAsmZwHIGKUADGDACBcgAARhEwB88kIAOejABLbhEBkeIwQuI4IMedEAUSDhCFEQChR3EQQpYmEEDDAKGCUjCDWiYQSXgMAEaQAEP/zXIQRiGcIgmxKEKh+hCHMpwiDbEoQ6HiAAf4jCIQ9wgDo/IwyTCcIk8bCIMn8jDKMJwikO0IgyxyEMtGlGEXTzhF1cYxheOcYZlvOEZd5jGH7KRhm5EIRdp6EUUOsAOCmhgAyBYkAL8gAFikIEBJknJGWzgAJjM5AEccAJKenKSIUCGJjOJAwx80pMX4MMoMUmHHZySkiBYwSoPkIAhvJKSFpjlATJwgVsawJKz5KQvQznLUvoylbNspS9jOcta+tIAuZwlL30JzFUK85bEXKUxb4nMVSrzlsxcpTN9Gc1VTvOW1RzlNV+ZzVFu85XdHOU3XxnOUY7zluUc5Tlfmf9OTa7zlO3UJA7sIAYGLJI5ZKggAl5ZgUuusgedxKYIgvmEY6pSm64EpyzFaUty6nKfp2zoLCE6zIlas6LcvKg7M0rPjdqzo/j8aC9vKdKHRpSdJlUnSuGpUoGy9JT11OQ9X5lPTYL0kzUdJUklSlGLFvOnnwxqJod6yqJm8qieTKoml4rTWbbADgZlJEEKAIEz3EOSDHWoPm8K0Jz6c6enjKdPl+lSocKUqLrUQAh8qdWrsvWTIXBrJh0A10/KlZRQ9aRUMUnVT1oVk3rlq1qN+ldPBrapKX0qXZt516rmda80naxfS4pZnmpWo5x95mMPENnQSrOylLysPDdQjoOr3igYozADCIY4AxJc8QNZZMEWwcDEbSjRGkPkhR5RiEYeqhGFTbgAb327RuC2UbhGJG4YjftF5PJQuVLko3N/GN3p/ja4wy3ucZO73A82l4bP/WB5edjb8143vdtd73fb68H3sjC+HpwvDetbXfR6kA444EQA0CHWsU7lwRCOsIQnTOEKW/jCGM6wUmrC4Q57+MMgDrGIR0ziEpv4xChOsYpXzOIWu/jFJQ4IACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrB6UoMC1K9cHYMOKfeC17NizZb2eHZu261qxbb++BRuXwly6ce+SzXu3rl6/ffnOBTxY8FvChw2vRbxYMVrHbCHDlRyW8eO2ekuUSOevgMICD6AwYVJAgunTp4GiXq16deqfrl/7jG26dWzbrnGzhk1bN2rfsnvSlgC8Nu/bx3Mn3z279/Lfz4PzHF6ceHTjPZl0qUHBc8KboSxV/1qwIIL58+fJq19PHr179vDdo4fPXn56+urtm8efXz//9v79p18E/5UXIH8DFpiggAfityCCDdL3oIMRxldhfReuN6GEGfZnn4IdVmJJFsR9hsoCJjSgYgMQtOiiiyvGGOOLNMpoI40v2igjjjDquCKPLfr4I5BCqggkBEWySGSRRybZJJNLCvmklFH6OKWVVep4pZZZ3tjljl/OGOaQPDo5pgkLtOGdTQt4QgQDcMI5wZx00hnnnXfWqSeefOpZJ594+mknoHEKOiehhRqKqJyKLmroBIsy8GikkzraKKKVYnopoZlyuimgnYL6aZ+jBlpqnqcmKiilpxLhyQJrHv9UgAlvjiCGArgq4MCuvPKa66+/9iossMQK2yuxwBrrK7K5Krsrs806Cy2uzjowra7STlvttdtqmy203YL7LbPhkjsusuWie26x6ybbbrDvRqsst+eKMQIDRJgQq0EFNMDACArIgMDAAydg8MEHE6ywwgg3vPDDDSP88MIRJzwxwRUbfDHGGW9ccMceZ5yAxwiITLLJIYO8Mcorq3wxyy+7PDHMM8sMsc0U48ywzhxXfLLLMihwbwP7FtQvA2LIYMDSTBtwwNNQQ9301EtHbTXVU1sdNdZNay0111V7fQDYYXtNttNiny322GSvrXbabcMNtttxm1231m/bPbfcXNP/vbfeffONtd+BAz443zKIwQDRn0HAgAIIFI733VdTvrXlX/89ueaVc36555lL3rnon5Me+uGGU0046pub/nTerbM+uuyl03666oLjnnrWciOgwOJFE1QABBMkDfrrmCN/PNvLwz677rFD/zzvu3edO/XRYz+99dUzvbr0tYN/u/bhkz8+99mjv73316tfvvtfJw78Z8GMwgnkLfucsv75R/wz/zEDYM0EeDMC5syAO0Ngz/y3Pwb2z2ENhOADJRZBCk7QYhfUWAUxGEAHdlCCH7RgCA8WtHvpqypTSaEKV8jCFrrwhTCMoQxnqJSa2PCGOMyhDnfIwx768IdADKIQDYdIxCIa8YhITOIPAwIAOw==";var f=k.win,y=k.doc,j=!0,p=!1,s,d,n=500000,a=1000;function b(z){var C,B,A;C=y.body.scrollTop||y.documentElement.scrollTop;if(f.innerHeight){A=f.innerHeight}else{A=y.documentElement.clientHeight}B=C+(A-z.offsetHeight)/2;z.style.top=B+"px";z._dlgInfo.isTopOverridden=j}function o(z,B){for(var A=0;A<z.length;++A){if(z[A]==B){return j}}return p}function t(C){for(var D=0;D<y.styleSheets.length;++D){var I=y.styleSheets[D],F=p,A=p,H,J;try{F=I.cssRules;A=y.querySelectorAll}catch(E){}if(F&&A){for(var B=0;B<F.length;++B){H=F[B];J=p;try{J=A(H.selectorText)}catch(E){}if(J&&o(J,C)){var z=H.style.getPropertyValue("top"),G=H.style.getPropertyValue("bottom");if((z&&z!="auto")||(G&&G!="auto")){return j}}}}}return p}function u(A){var z=p;if(f.getComputedStyle){z=f.getComputedStyle(A)}else{if(A.currentStyle){z=A.currentStyle}}if(z&&z.position!="absolute"){return p}if((A.style.top!="auto"&&A.style.top!="")||(A.style.bottom!="auto"&&A.style.bottom!="")){return p}return !t(A)}function w(A){var z=y.createEvent("MouseEvents");z.initMouseEvent(A.type,A.bubbles,A.cancelable,f,A.detail,A.screenX,A.screenY,A.clientX,A.clientY,A.ctrlKey,A.altKey,A.shiftKey,A.metaKey,A.button,A.relatedTarget);return z}function c(z){y.body.dispatchEvent(w(z))}function x(){s=y.createElement("div");d=s.style;d.position="fixed";d.display="block";d.left=d.top=d.margin=d.padding=0;d.backgroundColor="#000";d.filter="alpha(opacity=30)";d.opacity=d.MozOpacity=0.3;d.zIndex=n;d.width=d.height="100%";if(y.createEvent){k.addEventListener(s,"click",c)}}function l(){if(s===h){x()}if(!y.body.contains(s)){y.body.appendChild(s)}}function v(){if(s!==h){k.removeEventListener(s,"click",c);y.body.removeChild(s);s=h}}var e={pendingDialogStack:[],_updateStacking:function(C){var E=this,z,B,A,D;B=E.pendingDialogStack;if(B.length==0){v();return}if(C!=true){l()}D=n;k.each(B,function(F){D++;F._dlgInfo.mask.style.zIndex=D++;F.style.zIndex=D})},pushDialog:function(A,C){var D=this,z,B=A.getBoundingClientRect();if(D.pendingDialogStack.length>=a){k.error("Too many modal dialogs.");return}z=y.createElement("div");z.className="dynamsoft-backdrop";if(C==true){z.style.left=(B.x|B.left)+"px";z.style.top=(B.y|B.top)+"px";z.style.width=B.width+"px";z.style.height=B.height+"px"}if(y.createEvent){k.addEventListener(z,"click",function(E){if(A.dispatchEvent){var F=w(E);A.dispatchEvent(F)}})}A.parentNode.insertBefore(z,A.nextSibling);A._dlgInfo.mask=z;D.pendingDialogStack.push(A);D._updateStacking(C)},removeDialog:function(B){var C=this,A,z;A=k.isArray(C.pendingDialogStack)?k.indexOf(B,C.pendingDialogStack):-1;if(A==-1){return}C.pendingDialogStack.splice(A,1);z=B._dlgInfo.mask;z.parentNode.removeChild(z);B._dlgInfo.mask=null;C._updateStacking()}};function m(B,A){var C=this,z;if(C.open){k.error("showDialog called on open dialog.");return}C.open=j;C.removeAttribute("closed");C.setAttribute("open","open");if(u(C)){b(C)}if(B){C._dlgInfo.modal=j;e.pushDialog(C,A)}}function r(z){var A=this;if(!A.open){k.error("closeDialog called on closed dialog.")}A.open=p;A.removeAttribute("open");A.setAttribute("closed","closed");if(typeof z!="undefined"){A.returnValue=z}if(A._dlgInfo.isTopOverridden){A.style.top="auto"}if(A._dlgInfo.modal){e.removeDialog(A)}return A.returnValue}k.dialog={setup:function(z,A){z.show=m.bind(z,p,A);z.showModal=m.bind(z,j,A);z.close=r.bind(z);z._dlgInfo={}}};k.mask={container:false,bConfined:false,dlgMask:false,preOnresize:false,preOnscroll:false};k.showMask=function(){if(k.mask.dlgMask){return}var B=k.mask.bConfined,A=k.mask.container,z;if(A){z=A.getBoundingClientRect();var G=A.firstChild;while(G){if(k.isFunction(G.getBoundingClientRect)){z=G.getBoundingClientRect();break}G=G.nextSibling}}var E=document.createElement("div"),D="460px",C="300px";E.className="dynamsoft-dialog-wrap";if(!window.onresize){k.mask.preOnresize=false}else{k.mask.preOnresize=window.onresize}if(!window.onscroll){k.mask.preOnscroll=false}else{k.mask.preOnscroll=window.onscroll}if(B&&z){window.onresize=window.onscroll=function(){z=A.getBoundingClientRect();var H=A.firstChild;while(H){if(k.isFunction(H.getBoundingClientRect)){z=H.getBoundingClientRect();break}H=H.nextSibling}E.style.left=(z.x|z.left)+"px";E.style.top=(z.y|z.top)+"px";E.style.width=z.width+"px";if(z.width<470){D=(z.width-10)+"px"}E.style.height=C=z.height+"px";if(k.mask.dlgMask){k.mask.dlgMask.close();k.mask.dlgMask.showModal()}};window.onscroll()}var F=['<div style="margin:0 auto; width:',D,";line-height:",C,'"><img src="',q,'" style="margin:0 auto; width:',D,'" /></div>'].join("");E.innerHTML=F;document.body.appendChild(E);k.mask.dlgMask=E;k.dialog.setup(k.mask.dlgMask,B);k.mask.dlgMask.showModal()};k.hideMask=function(){var z=k.mask.dlgMask;if(z){z.close();document.body.removeChild(z);k.mask.dlgMask=false}if(!k.mask.preOnresize){window.onresize=null}else{window.onresize=k.mask.preOnresize}k.mask.preOnresize=false;if(!k.mask.preOnscroll){window.onscroll=null}else{window.onscroll=k.mask.preOnscroll}k.mask.preOnscroll=false}})(Dynamsoft);(function(t){var w=20200521;if(t._sizzle_ver){if(t.isNumber(t._sizzle_ver)&&t._sizzle_ver>=w){return}}t._sizzle_ver=w;var aq,g=RegExp,ae,ab,d,k,u,al,Y,U,s,v,o,p,ao=!0,f,M,b,S,am="dws_"+1*new Date(),an=window.document,K=0,y=0,ai,aj,G,z,A=function(i,e){if(i===e){s=true}return 0},I=[],V=I.pop,aa=I.push,ak=I.push,F=I.slice,H=function(ax,aw){var av=0,e=ax.length;for(;av<e;av++){if(ax[av]===aw){return av}}return -1},ag="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Q="[\\x20\\t\\r\\n\\f]",C="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ad=["\\[",Q,"*(",C,")(?:",Q,"*([*^$|!~]?=)",Q,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(",C,"))|)",Q,"*\\]"].join(""),E=new g(Q+"+","g"),ah=new g(["^",Q,"+|((?:^|[^\\\\])(?:\\\\.)*)",Q,"+$"].join(""),"g"),m=new g(["^",Q,"*,",Q,"*"].join("")),X=new g(["^",Q,"*([>+~]|",Q,")",Q,"*"].join("")),h=new g("^"+C+"$"),W={ID:new g("^#("+C+")"),CLASS:new g("^\\.("+C+")"),TAG:new g("^("+C+"|[*])"),ATTR:new g("^"+ad),needsContext:new g(["^",Q,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(",Q,"*((?:-\\d)?\\d*)",Q,"*\\)|)(?=[^-]|$)"].join(""),"i")},L=/^[^{]+\{\s*\[native \w/,ac=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,c=/^(?:#([\w-]+)|(\w+)|\.([\w-]+)) .*$/,R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,l=function(i,e){if(e){if(i==="\0"){return"\uFFFD"}return i.slice(0,-1)+"\\"+i.charCodeAt(i.length-1).toString(16)+" "}return"\\"+i},q=function(){v()};function au(){var i=[];function e(av,aw){if(i.push(av+" ")>ab.cacheLength){delete e[i.shift()]}return(e[av+" "]=aw)}return e}function a(ax){var aw=0,av=ax.length,e="";for(;aw<av;aw++){e+=ax[aw].value}return e}ai=au();aj=au();G=au();z=au();try{ak.apply((I=F.call(an.childNodes)),an.childNodes);var r=I[an.childNodes.length].nodeType}catch(at){ak={apply:I.length?function(i,e){aa.apply(i,F.call(e))}:function(ax,aw){var e=ax.length,av=0;while((ax[e++]=aw[av++])){}ax.length=e-1}}}function af(aB,av,aE,aH){var az,aF,ay,e,aG,ax,aC,aw=av&&av.ownerDocument,aD=av?av.nodeType:9;aE=aE||[];if(typeof aB!=="string"||!aB||aD!==1&&aD!==9&&aD!==11){return aE}if(!aH){if((av?av.ownerDocument||av:an)!==o){v(av)}av=av||o;if(aD!==11){if((aG=ac.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){aE.push(ay);return aE}}else{return aE}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){aE.push(ay);return aE}}}else{if(aG[2]){ak.apply(aE,av.getElementsByTagName(aB));return aE}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));return aE}}}}else{if((aG=c.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){av=ay}}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){av=ay}}az="#"+az+" "}else{if((az=aG[2])){ak.apply(aE,av.getElementsByTagName(aB));av=aE[0];az=az+" "}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));av=aE[0];az=az+" "}}}aB=aB.replace(az,"")}}}if(ae.qsa&&!z[aB+" "]&&(!f||!f.test(aB))){if(aD!==1){aw=av;aC=aB}else{if(av.nodeName.toLowerCase()!=="object"){if((e=av.getAttribute("id"))){e=e.replace(R,l)}else{av.setAttribute("id",(e=am))}ax=k(aB);aF=ax.length;while(aF--){ax[aF]="#"+e+" "+a(ax[aF])}aC=ax.join(",");aw=av}}if(aC){try{ak.apply(aE,aw.querySelectorAll(aC));return aE}catch(aA){z(aB,!0)}finally{if(e===am){av.removeAttribute("id")}}}}}return al(aB.replace(ah,"$1"),av,aE,aH)}function ap(e){e[am]=true;return e}function Z(av){var i=o.createElement("fieldset");try{return !!av(i)}catch(aw){return false}finally{if(i.parentNode){i.parentNode.removeChild(i)}i=null}}function B(e,i){}function j(i,e){var aw=e&&i,av=aw&&i.nodeType===1&&e.nodeType===1&&i.sourceIndex-e.sourceIndex;if(av){return av}if(aw){while((aw=aw.nextSibling)){if(aw===e){return -1}}}return i?1:-1}function T(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}ae=af.support={};v=af.setDocument=function(av){var e,i,aw=av?av.ownerDocument||av:an;if(aw===o||aw.nodeType!==9||!aw.documentElement){return o}o=aw;p=o.documentElement;if(an!==o&&(i=o.defaultView)&&i.top!==i){if(i.addEventListener){i.addEventListener("unload",q,false)}else{if(i.attachEvent){i.attachEvent("onunload",q)}}}ae.attributes=Z(function(ax){ax.className="i";return !ax.getAttribute("className")});ae.getElementsByTagName=Z(function(ax){ax.appendChild(o.createComment(""));return !ax.getElementsByTagName("*").length});ae.getElementsByClassName=L.test(o.getElementsByClassName);ae.getById=Z(function(ax){p.appendChild(ax).id=am;return !o.getElementsByName||!o.getElementsByName(am).length});if(ae.getById){ab.filter.ID=function(ay){var ax=ay;return function(az){return az.getAttribute("id")===ax}}}else{ab.filter.ID=function(ay){var ax=new g(["^",ay,"$"].join(""),"g");return function(aA){var az=typeof aA.getAttributeNode!=="undefined"&&aA.getAttributeNode("id");return az&&ax.test(az.value)}}}ab.find.TAG=ae.getElementsByTagName?function(ax,ay){if(typeof ay.getElementsByTagName!=="undefined"){return ay.getElementsByTagName(ax)}else{if(ae.qsa){return ay.querySelectorAll(ax)}}}:function(ax,aB){var aC,aA=[],az=0,ay=aB.getElementsByTagName(ax);if(ax==="*"){while((aC=ay[az++])){if(aC.nodeType===1){aA.push(aC)}}return aA}return ay};ab.find.CLASS=ae.getElementsByClassName&&function(ay,ax){if(typeof ax.getElementsByClassName!=="undefined"){return ax.getElementsByClassName(ay)}};M=[];f=[];if((ae.qsa=L.test(o.querySelectorAll))){Z(function(ax){p.appendChild(ax).innerHTML="<a id='"+am+"'></a><select id='"+am+"-\r\\' msallowcapture=''><option selected=''></option></select>";if(ax.querySelectorAll("[msallowcapture^='']").length){f.push("[*^$]="+Q+"*(?:''|\"\")")}if(!ax.querySelectorAll("[selected]").length){f.push("\\["+Q+"*(?:value|"+ag+")")}if(!ax.querySelectorAll("[id~="+am+"-]").length){f.push("~=")}if(!ax.querySelectorAll(":checked").length){f.push(":checked")}if(!ax.querySelectorAll("a#"+am+"+*").length){f.push(".#.+[+~]")}});Z(function(ay){ay.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ax=o.createElement("input");ax.setAttribute("type","hidden");ay.appendChild(ax).setAttribute("name","D");if(ay.querySelectorAll("[name=d]").length){f.push("name"+Q+"*[*^$|!~]?=")}if(ay.querySelectorAll(":enabled").length!==2){f.push(":enabled",":disabled")}p.appendChild(ay).disabled=true;if(ay.querySelectorAll(":disabled").length!==2){f.push(":enabled",":disabled")}ay.querySelectorAll("*,:x");f.push(",.*:")})}if((ae.matchesSelector=L.test((b=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)))){Z(function(ax){ae.disconnectedMatch=b.call(ax,"*");b.call(ax,"[s!='']:x")})}f=f.length&&new g(f.join("|"));M=M.length&&new g(M.join("|"));e=L.test(p.compareDocumentPosition);S=e||L.test(p.contains)?function(ay,ax){var aA=ay.nodeType===9?ay.documentElement:ay,az=ax&&ax.parentNode;return ay===az||!!(az&&az.nodeType===1&&(aA.contains?aA.contains(az):ay.compareDocumentPosition&&ay.compareDocumentPosition(az)&16))}:function(ay,ax){if(ax){while((ax=ax.parentNode)){if(ax===ay){return true}}}return false};A=e?function(ay,ax){if(ay===ax){s=true;return 0}var az=!ay.compareDocumentPosition-!ax.compareDocumentPosition;if(az){return az}az=(ay.ownerDocument||ay)===(ax.ownerDocument||ax)?ay.compareDocumentPosition(ax):1;if(az&1||(!ae.sortDetached&&ax.compareDocumentPosition(ay)===az)){if(ay===o||ay.ownerDocument===an&&S(an,ay)){return -1}if(ax===o||ax.ownerDocument===an&&S(an,ax)){return 1}return U?(H(U,ay)-H(U,ax)):0}return az&4?-1:1}:function(ay,ax){if(ay===ax){s=true;return 0}var aE,aB=0,aD=ay.parentNode,aA=ax.parentNode,az=[ay],aC=[ax];if(!aD||!aA){return ay===o?-1:ax===o?1:aD?-1:aA?1:U?(H(U,ay)-H(U,ax)):0}else{if(aD===aA){return j(ay,ax)}}aE=ay;while((aE=aE.parentNode)){az.unshift(aE)}aE=ax;while((aE=aE.parentNode)){aC.unshift(aE)}while(az[aB]===aC[aB]){aB++}return aB?j(az[aB],aC[aB]):az[aB]===an?-1:aC[aB]===an?1:0};return o};af.matches=function(i,e){return af(i,null,null,e)};af.matchesSelector=function(av,ax){if((av.ownerDocument||av)!==o){v(av)}if(ae.matchesSelector&&!z[ax+" "]&&(!M||!M.test(ax))&&(!f||!f.test(ax))){try{var i=b.call(av,ax);if(i||ae.disconnectedMatch||av.document&&av.document.nodeType!==11){return i}}catch(aw){z(ax,!0)}}return af(ax,o,null,[av]).length>0};af.contains=function(e,i){if((e.ownerDocument||e)!==o){v(e)}return S(e,i)};af.escape=function(e){return(e+"").replace(R,l)};af.error=function(e){throw new Error("Syntax error: "+e)};af.uniqueSort=function(aw){var ax,ay=[],e=0,av=0;s=!ae.detectDuplicates;U=!ae.sortStable&&aw.slice(0);aw.sort(A);if(s){while((ax=aw[av++])){if(ax===aw[av]){e=ay.push(av)}}while(e--){aw.splice(ay[e],1)}}U=null;return aw};d=af.getText=function(ay){var ax,av="",aw=0,e=ay.nodeType;if(!e){while((ax=ay[aw++])){av+=d(ax)}}else{if(e===1||e===9||e===11){if(typeof ay.textContent==="string"){return ay.textContent}else{for(ay=ay.firstChild;ay;ay=ay.nextSibling){av+=d(ay)}}}else{if(e===3||e===4){return ay.nodeValue}}}return av};ab=af.selectors={cacheLength:50,match:W,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[3]=(e[3]||e[4]||e[5]||"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)}},filter:{TAG:function(i){var e=i.toLowerCase();return i==="*"?function(){return true}:function(av){return av.nodeName&&av.nodeName.toLowerCase()===e}},CLASS:function(e){var i=ai[e+" "];return i||(i=new g("(^|"+Q+")"+e+"("+Q+"|$)"))&&ai(e,function(av){return i.test(typeof av.className==="string"&&av.className||typeof av.getAttribute!=="undefined"&&av.getAttribute("class")||"")})},ATTR:function(av,i,e){return function(ax){var aw=af.attr(ax,av);if(aw==null){return i==="!="}if(!i){return true}aw+="";return i==="="?aw===e:i==="!="?aw!==e:i==="^="?e&&aw.indexOf(e)===0:i==="*="?e&&aw.indexOf(e)>-1:i==="$="?e&&aw.slice(-e.length)===e:i==="~="?(" "+aw.replace(E," ")+" ").indexOf(e)>-1:i==="|="?aw===e||aw.slice(0,e.length+1)===e+"-":false}}}};function D(){}D.prototype=ab.filters=ab.pseudos;ab.setFilters=new D();k=af.tokenize=function(ax,aC){var i,ay,aA=[],aB,az,av,e,aw=aj[ax+" "];if(aw){return aC?0:aw.slice(0)}az=ax;av=[];e=ab.preFilter;while(az){if(!i||(ay=m.exec(az))){if(ay){az=az.slice(ay[0].length)||az}av.push((aA=[]))}i=false;if((ay=X.exec(az))){i=ay.shift();aA.push({value:i,type:ay[0].replace(ah," ")});az=az.slice(i.length)}for(aB in ab.filter){if((ay=W[aB].exec(az))&&(!e[aB]||(ay=e[aB](ay)))){i=ay.shift();aA.push({value:i,type:aB,matches:ay});az=az.slice(i.length)}}if(!i){break}}return aC?az.length:az?af.error(ax):aj(ax,av).slice(0)};function O(az,ax,ay){var e=ax.dir,aw=ax.next,av=aw||e,aA=ay&&av==="parentNode",i=y++;return ax.first?function(aD,aC,aB){while((aD=aD[e])){if(aD.nodeType===1||aA){return az(aD,aC,aB)}}return false}:function(aG,aE,aD){var aH,aB,aF,aC=[K,i];if(aD){while((aG=aG[e])){if(aG.nodeType===1||aA){if(az(aG,aE,aD)){return true}}}}else{while((aG=aG[e])){if(aG.nodeType===1||aA){aF=aG[am]||(aG[am]={});aB=aF[aG.uniqueID]||(aF[aG.uniqueID]={});if(aw&&aw===aG.nodeName.toLowerCase()){aG=aG[e]||aG}else{if((aH=aB[av])&&aH[0]===K&&aH[1]===i){return(aC[2]=aH[2])}else{aB[av]=aC;if((aC[2]=az(aG,aE,aD))){return true}}}}}}return false}}function x(e){return e.length>1?function(ay,ax,av){var aw=e.length;while(aw--){if(!e[aw](ay,ax,av)){return false}}return true}:e[0]}function J(av,ay,ax){var aw=0,e=ay.length;for(;aw<e;aw++){af(av,ay[aw],ax)}return ax}function N(e,av,aw,ax,aA){var ay,aD=[],az=0,aB=e.length,aC=av!=null;for(;az<aB;az++){if((ay=e[az])){if(!aw||aw(ay,ax,aA)){aD.push(ay);if(aC){av.push(az)}}}}return aD}function ar(av,i,ax,aw,ay,e){if(aw&&!aw[am]){aw=ar(aw)}if(ay&&!ay[am]){ay=ar(ay,e)}return ap(function(aJ,aG,aB,aI){var aL,aH,aD,aC=[],aK=[],aA=aG.length,az=aJ||J(i||"*",aB.nodeType?[aB]:aB,[]),aE=av&&(aJ||!i)?N(az,aC,av,aB,aI):az,aF=ax?ay||(aJ?av:aA||aw)?[]:aG:aE;if(ax){ax(aE,aF,aB,aI)}if(aw){aL=N(aF,aK);aw(aL,[],aB,aI);aH=aL.length;while(aH--){if((aD=aL[aH])){aF[aK[aH]]=!(aE[aK[aH]]=aD)}}}if(aJ){if(ay||av){if(ay){aL=[];aH=aF.length;while(aH--){if((aD=aF[aH])){aL.push((aE[aH]=aD))}}ay(null,(aF=[]),aL,aI)}aH=aF.length;while(aH--){if((aD=aF[aH])&&(aL=ay?H(aJ,aD):aC[aH])>-1){aJ[aL]=!(aG[aL]=aD)}}}}else{aF=N(aF===aG?aF.splice(aA,aF.length):aF);if(ay){ay(null,aG,aF,aI)}else{ak.apply(aG,aF)}}})}function P(aA){var av,ay,aw,az=aA.length,aD=ab.relative[aA[0].type],aE=aD||ab.relative[" "],ax=aD?1:0,aB=O(function(i){return i===av},aE,true),aC=O(function(i){return H(av,i)>-1},aE,true),e=[function(aH,aG,aF){var i=(!aD&&(aF||aG!==Y))||((av=aG).nodeType?aB(aH,aG,aF):aC(aH,aG,aF));av=null;return i}];for(;ax<az;ax++){if((ay=ab.relative[aA[ax].type])){e=[O(x(e),ay)]}else{ay=ab.filter[aA[ax].type].apply(null,aA[ax].matches);if(ay[am]){aw=++ax;for(;aw<az;aw++){if(ab.relative[aA[aw].type]){break}}return ar(ax>1&&x(e),ax>1&&a(aA.slice(0,ax-1).concat({value:aA[ax-2].type===" "?"*":""})).replace(ah,"$1"),ay,ax<aw&&P(aA.slice(ax,aw)),aw<az&&P((aA=aA.slice(aw))),aw<az&&a(aA))}e.push(ay)}}return x(e)}function n(aw,av){var e=av.length>0,ax=aw.length>0,i=function(aH,aB,aG,aF,aK){var aC,aD,aI,aM=0,aE="0",ay=aH&&[],aN=[],aL=Y,aA=aH||ax&&ab.find.TAG("*",aK),az=(K+=aL==null?1:Math.random()||0.1),aJ=aA.length;if(aK){Y=aB===o||aB||aK}for(;aE!==aJ&&(aC=aA[aE])!=null;aE++){if(ax&&aC){aD=0;if(!aB&&aC.ownerDocument!==o){v(aC);aG=!ao}while((aI=aw[aD++])){if(aI(aC,aB||o,aG)){aF.push(aC);break}}if(aK){K=az}}if(e){if((aC=!aI&&aC)){aM--}if(aH){ay.push(aC)}}}aM+=aE;if(e&&aE!==aM){aD=0;while((aI=av[aD++])){aI(ay,aN,aB,aG)}if(aH){if(aM>0){while(aE--){if(!(ay[aE]||aN[aE])){aN[aE]=V.call(aF)}}}aN=N(aN)}ak.apply(aF,aN);if(aK&&!aH&&aN.length>0&&(aM+av.length)>1){af.uniqueSort(aF)}}if(aK){K=az;Y=aL}return ay};return e?ap(i):i}u=af.compile=function(e,aw){var ax,av=[],az=[],ay=G[e+" "];if(!ay){if(!aw){aw=k(e)}ax=aw.length;while(ax--){ay=P(aw[ax]);if(ay[am]){av.push(ay)}else{az.push(ay)}}ay=G(e,n(az,av));ay.selector=e}return ay};al=af.select=function(e,az,ay,av){var ax,aA=typeof e==="function"&&e,aw=!av&&k((e=aA.selector||e));ay=ay||[];(aA||u(e,aw))(av,az,!ao,ay,!az||az);return ay};ae.sortStable=am.split("").sort(A).join("")===am;ae.detectDuplicates=!!s;v();ae.sortDetached=Z(function(e){return e.compareDocumentPosition(o.createElement("fieldset"))&1});if(!Z(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){B("type|href|height|width",function(i,e){return i.getAttribute(e,e.toLowerCase()==="type"?1:2)})}if(!ae.attributes||!Z(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){B("value",function(i,e){if(i.nodeName.toLowerCase()==="input"){return i.defaultValue}})}if(!Z(function(e){return e.getAttribute("disabled")==null})){B(ag,function(i,e){var av;return i[e]===true?e.toLowerCase():(av=i.getAttributeNode(e))&&av.specified?av.value:null})}t.support=ae;t.sizzle=af})(Dynamsoft.Lib);(function(j){var aa=Array.prototype,t=aa.slice,f=j.doc,U=j.each,d=f.documentElement;var y=20200521;if(j._ui_nodelistExt_ver){if(j.isNumber(j._ui_nodelistExt_ver)&&j._ui_nodelistExt_ver>=y){return}}j._ui_nodelistExt_ver=y;var M=j.support,Q=j.sizzle;var b,S,T,I,r,k,K=f.createElement("div"),Y=f.createElement("div");function p(){var ad,ac;d.appendChild(K);Y.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";b=T=k=false;S=r=true;if(window.getComputedStyle){ac=window.getComputedStyle(Y);b=(ac||{}).top!=="1%";k=(ac||{}).marginLeft==="2px";T=(ac||{width:"4px"}).width==="4px";Y.style.marginRight="50%";S=(ac||{marginRight:"4px"}).marginRight==="4px";ad=Y.appendChild(document.createElement("div"));ad.style.cssText=Y.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";ad.style.marginRight=ad.style.width="0";Y.style.width="1px";r=!parseFloat((window.getComputedStyle(ad)||{}).marginRight);Y.removeChild(ad)}Y.style.display="none";I=Y.getClientRects().length===0;if(I){Y.style.display="";Y.innerHTML="<table><tr><td></td><td>t</td></tr></table>";Y.childNodes[0].style.borderCollapse="separate";ad=Y.getElementsByTagName("td");ad[0].style.cssText="margin:0;border:0;padding:0;display:none";I=ad[0].offsetHeight===0;if(I){ad[0].style.display="";ad[1].style.display="none";I=ad[0].offsetHeight===0}}d.removeChild(K)}if(!Y.style){return}Y.style.cssText="float:left;opacity:.5";M.opacity=Y.style.opacity==="0.5";M.cssFloat=!!Y.style.cssFloat;Y.style.backgroundClip="content-box";Y.cloneNode(true).style.backgroundClip="";M.clearCloneStyle=Y.style.backgroundClip==="content-box";K=document.createElement("div");K.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";Y.innerHTML="";K.appendChild(Y);M.boxSizing=Y.style.boxSizing===""||Y.style.MozBoxSizing===""||Y.style.WebkitBoxSizing==="";j.mix(M,{reliableHiddenOffsets:function(){if(b==null){p()}return I},boxSizingReliable:function(){if(b==null){p()}return T},pixelMarginRight:function(){if(b==null){p()}return S},pixelPosition:function(){if(b==null){p()}return b},reliableMarginRight:function(){if(b==null){p()}return r},reliableMarginLeft:function(){if(b==null){p()}return k}});var i,g,x=(/^margin/),q=/^(top|right|bottom|left)$/,Z=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source,J=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),o=new RegExp("^("+Z+")(.*)$","i");if(window.getComputedStyle){i=function(ae){var ad,ac;ad=j.isFunction(ae.getEL)?ae.getEL():ae;ac=ad.ownerDocument.defaultView;if(!ac||!ac.opener){ac=window}return ac.getComputedStyle(ad)};g=function(aj,ad,ai){var ag,af,ah,ac,ae=aj.style;ai=ai||i(aj);ac=ai?ai.getPropertyValue(ad)||ai[ad]:undefined;if((ac===""||ac===undefined)&&!Q.contains(aj.ownerDocument,aj)){ac=j.style(aj,ad)}if(ai){if(!M.pixelMarginRight()&&J.test(ac)&&x.test(ad)){ag=ae.width;af=ae.minWidth;ah=ae.maxWidth;ae.minWidth=ae.maxWidth=ae.width=ac;ac=ai.width;ae.width=ag;ae.minWidth=af;ae.maxWidth=ah}}return ac===undefined?ac:ac+""}}else{if(d.currentStyle){i=function(ac){return ac.currentStyle};g=function(ai,af,ah){var aj,ad,ac,ae,ag=ai.style;ah=ah||i(ai);ae=ah?ah[af]:undefined;if(ae==null&&ag&&ag[af]){ae=ag[af]}if(J.test(ae)&&!q.test(af)){aj=ag.left;ad=ai.runtimeStyle;ac=ad&&ad.left;if(ac){ad.left=ai.currentStyle.left}ag.left=af==="fontSize"?"1em":ae;ae=ag.pixelLeft+"px";ag.left=aj;if(ac){ad.left=ac}}return ae===undefined?ae:ae+""||"auto"}}}var e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,n=(/<([\w:-]+)/),c=(/^\s+/),u=/<|&#?\w+;/,E=/<tbody/i,G=/^-ms-/,z=/-([\da-z])/gi,A=/^(none|table(?!-c[ea]).+)/,O=(/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/),L={position:"absolute",visibility:"hidden",display:"block"},D={letterSpacing:"0",fontWeight:"400"},a=["Top","Right","Bottom","Left"];var R={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:M.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};var C,X=["Webkit","O","Moz","ms"],H="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";var V=document.createElement("div");if(!V.style){return}C=V.style;M.cssFloat=!!V.style.cssFloat;var B=function(ac,ad){return ad.toUpperCase()};var v={type:j.type,cssHooks:{},htmlPrefilter:function(ac){return ac.replace(e,"<$1></$2>")},nodeName:function(ad,ac){return ad.nodeName&&ad.nodeName.toLowerCase()===ac.toLowerCase()},merge:function(ag,ae){var ac=+ae.length,ad=0,af=ag.length;while(ad<ac){ag[af++]=ae[ad++]}if(ac!==ac){while(ae[ad]!==undefined){ag[af++]=ae[ad++]}}ag.length=af;return ag},camelCase:function(ac){return ac.replace(G,"ms-").replace(z,B)},cssProps:{"float":M.cssFloat?"cssFloat":"styleFloat"},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true}};function N(ac){if(ac in C){return ac}var ae=ac.charAt(0).toUpperCase()+ac.slice(1),ad=X.length;while(ad--){ac=X[ad]+ae;if(ac in C){return ac}}}function m(af,ac){var ad,ag,ae=0,ah=typeof af.getElementsByTagName!=="undefined"?af.getElementsByTagName(ac||"*"):typeof af.querySelectorAll!=="undefined"?af.querySelectorAll(ac||"*"):undefined;if(!ah){ah=[];for(ad=af.childNodes||af;(ag=ad[ae])!=null;ae++){if(!ac||v.nodeName(ag,ac)){ah.push(ag)}else{v.merge(ah,m(ag,ac))}}}return ac===undefined||ac&&v.nodeName(af,ac)?v.merge([af],ah):ah}function W(ae){var ad=H.split("|"),ac=ae.createDocumentFragment();if(ac.createElement){while(ad.length){ac.createElement(ad.pop())}}return ac}function h(ad,af){var ak,ah,aj,am,ao,an,ae,ai=ad.length,ag=W(af),ac=[],al=0;for(;al<ai;al++){ah=ad[al];if(ah||ah===0){if(j.type(ah)==="object"){v.merge(ac,ah.nodeType?[ah]:ah)}else{if(!u.test(ah)){ac.push(af.createTextNode(ah))}else{am=am||ag.appendChild(af.createElement("div"));ao=(n.exec(ah)||["",""])[1].toLowerCase();ae=R[ao]||R._default;am.innerHTML=ae[1]+v.htmlPrefilter(ah)+ae[2];ak=ae[0];while(ak--){am=am.lastChild}if(!M.leadingWhitespace&&c.test(ah)){ac.push(af.createTextNode(c.exec(ah)[0]))}if(!M.tbody){ah=ao==="table"&&!E.test(ah)?am.firstChild:ae[1]==="<table>"&&!E.test(ah)?am:0;ak=ah&&ah.childNodes.length;while(ak--){if(v.nodeName((an=ah.childNodes[ak]),"tbody")&&!an.childNodes.length){ah.removeChild(an)}}}v.merge(ac,am.childNodes);am.textContent="";while(am.firstChild){am.removeChild(am.firstChild)}am=ag.lastChild}}}}if(am){ag.removeChild(am)}al=0;while((ah=ac[al++])){if(ah.tagName!=="SCRIPT"){aj=Q.contains(ah.ownerDocument,ah);ag.appendChild(ah)}}am=null;return ag}var F=function(ah,ag,ai,af){var ae,ad,ac={};U(ag,function(ak,aj){ac[aj]=ah.style[aj];ah.style[aj]=ag[aj]});ae=ai.apply(ah,af||[]);U(ag,function(ak,aj){ah.style[aj]=ac[aj]});return ae};function s(ag,ad,ac,ai,af){var ae=ac===(ai?"border":"content")?4:ad==="width"?1:0,ah=0;for(;ae<4;ae+=2){if(ac==="margin"){ah+=j.css(ag,ac+a[ae],true,af)}if(ai){if(ac==="content"){ah-=j.css(ag,"padding"+a[ae],true,af)}if(ac!=="margin"){ah-=j.css(ag,"border"+a[ae]+"Width",true,af)}}else{ah+=j.css(ag,"padding"+a[ae],true,af);if(ac!=="padding"){ah+=j.css(ag,"border"+a[ae]+"Width",true,af)}}}return ah}function ab(ag,ad,ac){var af=true,ah=ad==="width"?ag.offsetWidth:ag.offsetHeight,ae=i(ag),ai=M.boxSizing&&j.css(ag,"boxSizing",false,ae)==="border-box";if(ah<=0||ah==null){ah=g(ag,ad,ae);if(ah<0||ah==null){ah=ag.style[ad]}if(J.test(ah)){return ah}af=ai&&(M.boxSizingReliable()||ah===ag.style[ad]);ah=parseFloat(ah)||0}return(ah+s(ag,ad,ac||(ai?"border":"content"),af,ae))}function P(ac){var ad=new RegExp("^(?:([+-])=|)("+Z+")([a-z%]*)$","i");return ad.exec(ac)}function w(ac,ae,af){var ad=o.exec(ae);return ad?Math.max(0,ad[1]-(af||0))+(ad[2]||"px"):ae}function l(ad,ac,ag,al){var am,ae=1,ai=20,ak=al?function(){return al.cur()}:function(){return j.css(ad,ac,"")},ah=ak(),aj=ag&&ag[3]||(v.cssNumber[ac]?"":"px"),af=(v.cssNumber[ac]||aj!=="px"&&+ah)&&P(j.css(ad,ac));if(af&&af[3]!==aj){aj=aj||af[3];ag=ag||[];af=+ah||1;do{ae=ae||".5";af=af/ae;j.style(ad,ac,af+aj)}while(ae!==(ae=ak()/ah)&&ae!==1&&--ai)}if(ag){af=+af||+ah||0;am=ag[1]?af+(ag[1]+1)*ag[2]:+ag[2];if(al){al.unit=aj;al.start=af;al.end=am}}return am}U(["height","width"],function(ac,ad){v.cssHooks[ac]={get:function(ag,af,ae){if(af){return A.test(j.css(ag,"display"))&&ag.offsetWidth===0?F(ag,L,function(){return ab(ag,ac,ae)}):ab(ag,ac,ae)}},set:function(ag,ah,ae){var af=ae&&i(ag);return w(ag,ah,ae?s(ag,ac,ae,M.boxSizing&&j.css(ag,"boxSizing",false,af)==="border-box",af):0)}}});j.style=function(ae,ad,aj,af){if(!ae||ae.nodeType===3||ae.nodeType===8||!ae.style){return}var ah,ai,ak,ag=v.camelCase(ad),ac=ae.style;ad=v.cssProps[ag]||(v.cssProps[ag]=N(ag)||ag);ak=v.cssHooks[ad]||v.cssHooks[ag];if(aj!==undefined){ai=typeof aj;if(ai==="string"&&(ah=P(aj))&&ah[1]){aj=l(ae,ad,ah);ai="number"}if(aj==null||aj!==aj){return}if(ai==="number"){aj+=ah&&ah[3]||(v.cssNumber[ag]?"":"px")}if(!M.clearCloneStyle&&aj===""&&ad.indexOf("background")===0){ac[ad]="inherit"}if(!ak||!("set" in ak)||(aj=ak.set(ae,aj,af))!==undefined){ac[ad]=aj}}else{if(ak&&"get" in ak&&(ah=ak.get(ae,false,af))!==undefined){return ah}return ac[ad]+""}};j.css=function(ai,ag,ad,ah){var af,aj,ac,ae=v.camelCase(ag);ag=v.cssProps[ae]||(v.cssProps[ae]=N(ae)||ae);ac=v.cssHooks[ag]||v.cssHooks[ae];if(ac&&"get" in ac){aj=ac.get(ai,true,ad)}if(aj===undefined){aj=g(ai,ag,ah)}if(aj==="normal"&&ag in D){aj=D[ag]}if(ad===""||ad){af=parseFloat(aj);return ad===true||isFinite(af)?af||0:aj}return aj};j.parseHTML=function(ae,ad){if(!ae||typeof ae!=="string"){return[]}if(typeof ad==="boolean"){ad=false}ad=ad||document;var ac=O.exec(ae);if(ac){return[ad.createElement(ac[1])]}ac=h([ae],ad);return v.merge([],ac.childNodes)}})(Dynamsoft.Lib);(function(f,i){var c=Dynamsoft.managerEnv,k=f.LS,h=Dynamsoft.navInfoSync.host,d,a,g=20200522,j=function(){if(Dynamsoft.dcp){var l=Dynamsoft.dcp.dcpJSVer;if(f.isNumber(l)){return l>=g}}return false};if(!c){Dynamsoft.managerEnv={};c=Dynamsoft.managerEnv}c.resourcesPath=c.resourcesPath||"Resources";c.IfUpdateService=c.IfUpdateService?true:false;if(j()){j=i;g=i;return}a={dcpStatus:0,bConnected:false,connectedResult:"",curPortIndex:0,bConnectNumLimited:true,IMAXCONNECTCOUNT:3,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}};var b=[],e=0;Dynamsoft.dcp=d={host:"127.0.0.1",ports:[[18625,18626]],win64Port:[18627,18628],ifCheck64bitServiceFirst:false,dcpJSVer:g,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],DWASMVer14:[14,3,1,"0115"],managerVersion:[16,0,0,"0428"],managerVersionMac:[16,0,0,"0428"],managerVersionLinux:[16,0,0,"0428"],serviceVersion:[1,5,3,"0107"],serviceVersionMac:[1,5,3,"0107"],serviceVersionLinux:[1,5,3,"0107"],detect:a,strSID:"",bEnhancedMode:false,b64bit:false,onReadys:[],getManagerVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.managerVersionMac}else{if(l.bLinux){return d.managerVersionLinux}}}return d.managerVersion},getServiceVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.serviceVersionMac}else{if(l.bLinux){return d.serviceVersionLinux}}}return d.serviceVersion},versionInfo:function(p,l){var o=0,n=function(t){if(f.isArray(t)&&t.length>0&&t[0]){a.curPort=d.ports[o%d.ports.length];var w=t[0];if(f.isString(w)&&d._compareVersion(w.split(","),d.oldDWASMVer)){var v=f.isString(t[1])&&t[1].toLowerCase(),u="",s=false,q=false;if(t.length>4){u=f.isString(t[2])?t[2]:"";s=f.isString(t[3])&&(t[3]==="true");q=f.isString(t[4])&&(t[4]==="64")}d.strSID=u;d.bEnhancedMode=s;d.b64bit=q;a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.Connected;d._sendStatusEvent(false,w);if(f.isFunction(p)){setTimeout(function(){p(u,s)},0)}return true}}return false},m=function(r,s,q){++o;a.curPortIndex=o%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&o>=a.IMAXCONNECTCOUNT){setTimeout(function(){p(r,s,q)},0);return true}return false};a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,l,n,m)},_checkOldManagerVersion:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,i,m,l)},_checkManagerVersion:function(l,n,m){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",false,l,n,m)},_checkService:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingServiceVer;this._postBase("DSVersion",false,i,m,l)},_checkUpdateFile:function(m,l){this._postBase("CheckUpdateFile",false,i,m,l)},_updateService:function(m,l){this._postBase("UpdateService",false,i,m,l)},_postBase:function(n,r,o,t,s){var q,l;if(r){q=d.oldDWASMVerStr}else{q="dwasm2_"+d._getModuleVer()}l={id:"1",method:n,version:q,parameter:[]};if(o){if(f.startsWith(o,"http://")||f.startsWith(o,"https://")){if(Dynamsoft.managerEnv.ifCheckRemoteProductKey){var p=this,m=o;f.ajax({method:"GET",url:m,onSuccess:function(u){l.productKey=u;p._postBaseV2(n,r,l,t,s)},onError:s});return true}}else{l.productKey=o}}this._postBaseV2(n,r,l,t,s);return true},_postBaseV2:function(r,w,m,A,z){var x,B,t,u=f.stringify(m);if(!f.isFunction(A)||!f.isFunction(z)){return}if(d.detect.bConnected&&r=="VersionInfo"){A(d.detect.connectedResult);return}B=function(D,E,C){s--;if(s==0){if(z(D,E,C)){return}}};t=function(D,F,C){var E=d._getJSON(D);if(E&&"result" in E){s=-1;if(d.detect.bConnected){return}d.detect.bConnected=true;d.detect.connectedResult=E.result;d.detect.dcpStatus=d.detect.EnumDCP_DetectStatus.Connected;d.detect.curPort=d.ports[C.index];d.ports=[d.detect.curPort];d.detect.curPortIndex=0;if(k.isSupportLS()){k.item("DCP_port",d.detect.curPort[1])}if(A(E.result)){return}}B(D,F,C)};var p,s=d.ports.length;if(s>1&&k.isSupportLS()){var n=k.item("DCP_port");if(f.isString(n)&&n!==""){for(p=1;p<s;p++){var l=d.ports[p],y,v;y=l[0];v=l[1];if(v==n){d.ports[p][0]=d.ports[0][0];d.ports[p][1]=d.ports[0][1];d.ports[0][0]=y;d.ports[0][1]=v}break}}}if(d.detect.bConnected){s=1}b=[];d.detect.bConnected=false;for(p=0;p<s;p++){var o=[d._getPreUrl(p),w?"dcp/":d._getModuleName(),w?d.oldDWASMVerStr:d._getModuleVer(),"/",r,"?type=1&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");b.push({method:"POST",url:o,timeout:200,data:u,onSuccess:t,onError:B})}for(p=0;p<s;p++){var q=f.ajax(b[p]);q.index=p}},loadZip:function(m,q,p,r){var o,n=q,l=p;if(n===100){n=0;l=function(s){if(f.isString(s)){s=s.replace('"result" : [ 0,','"result" : [ 100,')}p(s)}}if(Dynamsoft.managerEnv.IfUpdateService){o=[d._getPreUrl(a.curPortIndex),d._getModuleName(),d._getModuleVer(),"/LoadZipFromBytes?type=",n,"&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}else{o=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}f.ajax({method:"POST",url:o,async:true,data:m,onSuccess:l,onError:r})},oldLoadZip:function(m,l,o,p){var n=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");f.ajax({method:"POST",url:n,async:true,data:m,onSuccess:o,onError:p})},_getPreUrl:function(o){var l,m;if(Dynamsoft.navInfoSync.bSSL){m="https://";l=d.ports[o][1]}else{m="http://";l=d.ports[o][0]}return[m,d.host,":",l,"/"].join("")},_getJSON:function(l){return l?f.parse(l):!1},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return d.getManagerVersion().join("")},_compareVersion:function(m,l){if(f.isArray(m)&&m.length==4&&f.isArray(l)&&l.length>=4){return m[0]>l[0]||m[0]==l[0]&&m[1]>l[1]||m[0]==l[0]&&m[1]==l[1]&&m[2]>l[2]||m[0]==l[0]&&m[1]==l[1]&&m[2]==l[2]&&parseInt(m[3])>=parseInt(l[3])}else{if(f.isArray(m)&&m.length==1&&f.isArray(l)&&l.length>=1){return parseInt(m[0])>=parseInt(l[0])}}return false},_getDSUpdateZipUrl:function(){var m=Dynamsoft.Lib.getNavInfo(),n,l,o="";n="Win";if(m.bMac){n="Mac"}else{if(m.bLinux){n="Linux"}}if(Dynamsoft.navInfoSync.bFileSystem){l=""}else{l="?t="+f.now()}if(m.bWin&&d.b64bit){o="_x64"}return[Dynamsoft.managerEnv.resourcesPath,"/dist/serviceupdate/",n,"DSUpdate_",d.getManagerVersion().join("."),o,".zip",l].join("")},getPorts:function(l,p,o){var n="GetPorts",q="dwasm2_"+d._getModuleVer(),m={id:"1",method:n,version:q,parameter:[l]};this._postBaseV2(n,false,m,p,o)},checkDcpForUpdate:function(q,l,s,t,o,n,D,v){var r=false,F=true,B=3,m=0,y=function(J){if(!(f.isArray(J)&&J.length>0&&J[0])){return false}var K=J[0].split(",");var I=false;if(J.length>4){I=f.isString(J[4])&&(J[4]==="64")}d.b64bit=I;if(!Dynamsoft.managerEnv.IfUpdateService){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{if(d._compareVersion(K,d.oldDWASMVer)){var H=d._getDSUpdateZipUrl();r=true;var M=function(N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadedZip;d._sendStatusEvent();var O=0;d.oldLoadZip(N,O,function(){setTimeout(function(){d._checkManagerVersion(v,u,p)},5000)},L)},L=function(O,P,N){d._funUpdateFailed(o,n,O,N.status);setTimeout(D,0)},G=function(O,Q,N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(o){o()}var R=N.status,P;if(R==200){P=O}else{P="The update package can't be downloaded. The error code is "+R+"."}if(n){n(true,P)}d._sendStatusEvent(true,P);setTimeout(D,0)};if(s){s()}if(t){t()}a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.ajax({method:"GET",url:H,async:true,dataType:"blob",onSuccess:M,onError:G})}else{if(F){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;if(s){s()}if(q){q()}d._sendStatusEvent();F=false}}}return true},x=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;d._sendStatusEvent()}else{setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},u=function(G){if(!(f.isArray(G)&&G.length>0&&G[0])){return false}var H=G[0].split(",");if(d._compareVersion(H,d.getManagerVersion())){if(Dynamsoft.managerEnv.IfUpdateService){if(r){setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}return true}return false},p=function(I,J,H){var G=1000;if(B<3){G=500}B--;if(B<0){d._funShowUpgradeDialogWhenUpdateFailed(o,n);setTimeout(D,0)}else{setTimeout(function(){d._checkManagerVersion(v,u,p)},G)}return true},E=function(H){if(!(f.isArray(H)&&H.length>0&&H[0])){if(s){s()}return false}var G=H[0].split(",");if(d._compareVersion(G,d.getServiceVersion())){a.bConnected=true;if(o){o()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,H[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}return true},w=function(H,I,G){d._funUpdateFailed(o,n,H,G.status);setTimeout(D,0);return true};var A=false,C=function(I){if(!(f.isArray(I)&&I.length>0&&I[0])){return false}var L=I[0];if(f.isString(L)&&d._compareVersion(L.split(","),d.oldDWASMVer)){var K=f.isString(I[1])&&I[1].toLowerCase(),J="",H=false,G=false;if(I.length>4){A=true;J=f.isString(I[2])?I[2]:"";H=f.isString(I[3])&&(I[3]==="true");G=f.isString(I[4])&&(I[4]==="64")}d.strSID=J;d.bEnhancedMode=H;d.b64bit=G;a.curPort=d.ports[m%d.ports.length];if(!Dynamsoft.managerEnv.IfUpdateService){a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{m=0;a.curPortIndex=0;if(F){if(s){s()}if(q){q()}F=false}setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},z=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(F){if(s){s()}if(q){q(G,H)}F=false}if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){m=0;a.curPortIndex=0;setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}else{setTimeout(function(){d._checkManagerVersion(v,C,z)},1000)}return true};if(l){l()}d._checkManagerVersion(v,C,z)},_checkUpdateZip:function(p,w,o,x,q){var r=function(B,C,A){var D=-1;if(A){D=A.status}if(D==0){setTimeout(function(){d._checkService(v,s)},5000);return true}var z=d._getDSUpdateZipUrl();a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.ajax({method:"GET",url:z,async:true,dataType:"blob",onSuccess:l,onError:u});return true},u=function(A,C,z){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(w){w()}var D=z.status,B;if(D==200){B=A}else{B="The update package can't be downloaded. The error code is "+D+"."}if(o){o(true,B)}d._sendStatusEvent(true,B);setTimeout(x,0);return true},t=function(A){if(!(f.isArray(A)&&A.length>1)){return false}if(A[1]==true){a.dcpStatus=a.EnumDCP_DetectStatus.VerifiedZip;d._sendStatusEvent();a.dcpStatus=a.EnumDCP_DetectStatus.UpdatingService;d._sendStatusEvent();setTimeout(function(){d._checkService(v,s)},5000)}else{var z=0;if("exception" in A){z=A.exception}if(z==-2373){d._funUpdateFailed(w,o,A,200);setTimeout(x,0);return true}setTimeout(r,0)}return true},l=function(z){var A=1;Dynamsoft.dcp.loadZip(z,A,function(B){var D,C;try{if(f.isString(B)){C=f.parse(B.replace(/\0/g,""));if("result" in C){D=C.result}}}catch(E){}if(f.isArray(D)&&D.length>2&&D[2]==true){setTimeout(function(){d._checkService(v,s)},5000);return}d._funUpdateFailed(w,o,B,200);setTimeout(x,0)},n)},n=function(A,B,z){var C=-1;if(z){C=z.status}if(C==0){setTimeout(function(){d._checkService(v,s)},5000)}else{d._funUpdateFailed(w,o,A,z.status);setTimeout(x,0)}return true},y=function(z){if(!(f.isArray(z)&&z.length>0)){return false}if(z[0]==true){setTimeout(function(){d._checkService(v,s)},5000)}else{d._funUpdateFailed(w,o,z,200);setTimeout(x,0)}return true},m=3,v=function(A){if(!(f.isArray(A)&&A.length>0&&A[0])){return false}var z=A[0].split(",");if(d._compareVersion(z,d.getServiceVersion())){a.bConnected=true;if(w){w()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,A[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(x,0);return true}return false},s=function(A,B){var z=1000;if(m<3){z=500}m--;if(m<0){d._funShowUpgradeDialogWhenUpdateFailed(w,o);setTimeout(x,0);return true}setTimeout(function(){d._checkService(v,s)},z);return true};if(p){p()}a.dcpStatus=a.EnumDCP_DetectStatus.VerifyingZip;d._sendStatusEvent();d._checkUpdateFile(t,r)},_getStatusString:function(p,o){var m,l,n="";if(p==a.EnumDCP_DetectStatus.Init){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.Connected){if(o){n=o}return"Getting manager version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.DownloadingZip){return"Downloading the update package"}else{if(p==a.EnumDCP_DetectStatus.DownloadedZip){return"Update package downloaded"}else{if(p==a.EnumDCP_DetectStatus.DownloadFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"Update package failed to download"+m+l}else{if(p==a.EnumDCP_DetectStatus.CheckingManagerVer){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.CheckingServiceVer){return"Getting service version"}else{if(p==a.EnumDCP_DetectStatus.NotInstalled){return"Dynamsoft Service Not Installed"}else{if(p==a.EnumDCP_DetectStatus.UpdateSkipped){return"Update skipped"}else{if(p==a.EnumDCP_DetectStatus.CheckedService){if(o){n=o}return"Getting service version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.VerifyingZip){return"Verifying the update package"}else{if(p==a.EnumDCP_DetectStatus.VerifiedZip){return"Update package verified"}else{if(p==a.EnumDCP_DetectStatus.UpdatingService){return"Updating the service"}else{if(p==a.EnumDCP_DetectStatus.UpdateSucceed){return"Update succeeded"}else{if(p==a.EnumDCP_DetectStatus.UpdateFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"The update failed"+m+l}}}}}}}}}}}}}}}return""},_sendStatusEvent:function(m,n){var l=m?true:false;if(f.isFunction(h.OnGetServiceUpdateStatus)){h.OnGetServiceUpdateStatus(l,a.dcpStatus,d._getStatusString(a.dcpStatus,n))}},_getErr:function(m){var n,l="";try{if(f.isString(m)){n=m.replace(/\0/g,"");n=f.parse(n)}else{if(m){n=m}}if("description" in n){l=n.description}}catch(o){}return l},_funShowUpgradeDialogWhenUpdateFailed:function(m,l){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}if(l){l()}d._sendStatusEvent(true);return true},_funUpdateFailed:function(m,l,n,q){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}var o,p;if(q==200){o="The update failed.";p=d._getStatusString(a.dcpStatus,d._getErr(n))}else{o="The update failed. The error code is "+q;p=o}if(l){l(true,o)}d._sendStatusEvent(true,p);return true},getDSPath:function(l,n){var p=Dynamsoft.managerEnv.resourcesPath,o=n;if(Dynamsoft.Lib.isString(p)&&p.length>0){if(p[p.length-1]!="/"){p=p+"/"}}else{p="Resources/"}if(!o){var m=Dynamsoft.Lib.getNavInfo();if(m.bMac){o=".pkg"}else{if(m.bLinux){o=".deb"}else{o=".msi"}}}return[p,"dist/DynamsoftServiceSetup",o].join("")},getLinuxHTML5DebPath:function(){return Dynamsoft.dcp.getDSPath(false,".deb")},getLinuxHTML5RpmPath:function(){return Dynamsoft.dcp.getDSPath(false,".rpm")}};j=i;g=i;c=i;f.ready(function(){if(d.onReadys.length>0){f.each(d.onReadys,function(l){if(f.isFunction(l)){l()}})}})})(Dynamsoft.Lib);var EnumTransferErrorCode={TRANS_OK:0,TRANS_URL_MALFFORMAT:1,TRANS_FAILED_RESOLVE_PROXY:2,TRANS_FAILED_RESOLVE_HOST:3,TRANS_FAILED_CONNECT:4,TRANS_REMOTE_ACCESS_DENIED:5,TRANS_PARTIAL_FILE:6,TRANS_UPLOAD_FAILED:7,TRANS_READ_FAILED:8,TRANS_OUT_OF_MEMORY:9,TRANS_REMOTE_FULL_DISK:10,TRANS_OPERATION_TIMEOUT:11,TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14,TRANS_SERVICE_ERROR:15,TRANS_NOT_SEND:16,TRANS_WAITFOR_SEND:17,TRANS_SENDING:18,TRANS_PAUSE:19,TRANS_FINISHED:20,TRANS_NULL_POINTER:21,TRANS_INVALID_ID:22,TRANS_Failed:23,TRANS_SERVICE_ERROR_MORE_THAN_500:24,TRANS_SERVICE_ERROR_LESS_THAN_200:25,TRANS_SERVICE_ERROR_MORE_THAN_300:26,TRANS_CANNOT_FINDFILE:27,TRANS_ABORT:28,TRANS_NOT_FINISHED:29,TRANS_TASK_PREPARE_INIT:30,TRANS_TASK_INIT:31,TRANS_BEYOND_MAXSIZE:32};/*var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};*/Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.AddonReady(function(i,e){var j=Dynamsoft,k=1,g=!0,m=!1,l=Dynamsoft.dcp,u=l.detect,a="upload",n=[1,6,0,"0428"],s="upload_"+n.join(""),r={getFullUrl:function(x){return[j.FileUploader.protocol,j.FileUploader.ip,":",j.FileUploader.port,"/dcp/",s,"/",x,"?type=1&dsver=",n.join(""),"&ts=",i.now()].join("")},runUploadFile:function(){return r.getFullUrl("RunUploadFile")},versionInfo:function(){return r.getFullUrl("VersionInfo")},cancelAllUploadFile:function(){return r.getFullUrl("CancelAllUploadFile")},getUploadStatus:function(){return r.getFullUrl("GetUploadStatus")},deleteUploadTask:function(){return r.getFullUrl("DeleteUploadTask")}},f={Version:"1.0",HttpVersion:"1.1",ServerUrl:"",FileName:"",VERIFYPEER:false,VERIFYHOST:false,BlockSize:10240,ThreadNum:1,OnUploadTransferPercentage:function(y,x){},OnRunSuccess:function(x){},OnRunFailure:function(z,y,x){}};var h=0,w="",t={Upload_InvalidRemoteFilename:function(){h=-1;w="The zip file that contains the upload library (.dll) is invalid."},ServerUrlError:function(){h=-2;w="Upload failed because the url to upload to is invalid."},HttpUploadError:function(x,y,z){h=-3;if(x){w="Upload cancelled."}else{if(y&&y!=""){w="Upload failed with error: "+y}else{w="Upload failed."}if(y&&y!=""){w=w+"("+z+")"}}},HttpContentError:function(){h=-4;w="Upload failed because the file to upload has invalid content."},InvalidJobId:function(){h=-5;w="Invalid upload job id."},HttpRunError:function(){h=-6;w="Cannot create an upload job."},HttpFilenameError:function(){h=-7;w="The file name is incorrect in the upload job."},CancelAllWhenJobWatingError:function(){h=-8;w="Can not cancel all jobs when at least one job is still being created."},DownloadError:function(){h=-9;w="The zip file that contains the upload library (.dll) download failed."},MissingDll:function(){h=-10;w=["Error: the file UploadModule_",n.join("."),".dll is missing or invalid in the Dynamsoft Service Directory."].join("")},MobileNotSupport:function(){h=-2400;w="File uploader addon doesn't work under current settings."},_resetErr:function(){h=0;w=""}},o=function(){var x=false;if(Dynamsoft.WebTwainEnv){x=(Dynamsoft.WebTwainEnv.UseLocalService===false)}return x||Dynamsoft.navInfoSync.bMobile};function b(){}b.prototype={runWaiting:0,CreateJob:function(){var x={HttpHeader:{},documents:[],formFields:[],bEvent:false};i.mix(x,f);x.SourceValue=new d(x);x.FormField=new v(x);return x},Run:function(x){var C=this,A,z='""',y=x.ServerUrl;if(j.WebTwainEnv&&j.WebTwainEnv.ProductKey){z='"'+j.WebTwainEnv.ProductKey+'"'}if(!i.isString(y)||y==""){x.id=-1;t.ServerUrlError();if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}return false}if(!x.documents||!i.isArray(x.documents)||x.documents.length<=0){x.id=-1;t.HttpContentError();if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}return false}x.Url=y;delete x.ServerUrl;for(A=0;A<x.documents;A++){var E=x.documents[A];if(!i.isString(E.files)||E.files==""){x.id=-1;t.HttpFilenameError();if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}return false}if(!i.isString(E.remoteName)||E.remoteName==""){E.remoteName="RemoteFile"}}var F=x.SourceValue;delete x.SourceValue;var G=x.FormField;delete x.FormField;var D=i.stringify(x);D=i.replaceAll(D,'"',"'");x.ServerUrl=y;delete x.Url;x.SourceValue=F;x.FormField=G;var B='{"id":"'+k+'","method":"RunUploadFile","version":"'+s+'","parameter":['+z+',"'+D+'"]}';C.runWaiting++;i.ajax({url:r.runUploadFile(),method:"post",processData:false,data:B,dataType:"json",onSuccess:function(K){C.runWaiting--;if(K){var J=K.UploadId;if(J&&J>0){x.id=J;j.FileUploader.map[x.id]=x;j.FileUploader.ids.push(K.UploadId);if(x.OnUploadTransferPercentage){x.OnUploadTransferPercentage(x,0)}}else{var H=K.errorcode,I=K.errorstring;if(H&&I){h=H;w=I}else{t.HttpRunError()}if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}}}},onError:function(H,I,J){C.runWaiting--;j.FileUploader.parseHttpErrors(H,I,J);if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}}});return true},Cancel:function(y){if(!y.id||y.id<0){t.InvalidJobId();if(!y.bEvent&&i.isFunction(y.OnRunFailure)){y.bEvent=true;y.OnRunFailure(y,h,w);y.bEvent=false}return false}var x='{"id":"'+k+'","method":"DeleteUploadTask","version":"'+s+'","parameter":["'+y.id+'"]}';i.ajax({url:r.deleteUploadTask(),method:"post",processData:false,data:x,onSuccess:function(z){j.FileUploader.deleteJobById(y.id)},onError:function(z,A,B){j.FileUploader.parseHttpErrors(z,A,B);if(!y.bEvent&&i.isFunction(y.OnRunFailure)){y.bEvent=true;y.OnRunFailure(y,h,w);y.bEvent=false}}});return true},CancelAllUpload:function(){var z=this,y=j.FileUploader.ids,x='{"id":"'+k+'","method":"DeleteUploadTask","version":"'+s+'","parameter":["'+y.join(",")+'"]}';if(z.runWaiting>0){t.CancelAllWhenJobWatingError();return false}else{if(z.runWaiting<0){z.runWaiting=0}}if(y.length<=0){return true}i.ajax({url:r.deleteUploadTask(),method:"post",processData:false,data:x,onSuccess:function(B){for(var A=0;A<y.length;A++){j.FileUploader.deleteJobById(y[A])}j.FileUploader.ids=[];j.FileUploader.map=[]},onError:function(A,B,C){j.FileUploader.parseHttpErrors(A,B,C)}});return true},OnUploadTransferPercentage:function(y,x){},OnRunSuccess:function(x){},OnRunFailure:function(z,y,x){}};function d(x){this.job=x}j.SourceValue=d;d.prototype.Add=function(x,C,B){var A=this.job,z=B,y=x;if(!i.isString(y)||y==""){t.HttpFilenameError();if(!A.bEvent&&i.isFunction(A.OnRunFailure)){A.bEvent=true;A.OnRunFailure(A,h,w);A.bEvent=false}return}if(!z){z="RemoteFile"}y=Dynamsoft.Lib.replaceAll(y,"\\\\","\\\\");A.documents.push({files:[y],fileName:C,remoteName:z})};function v(x){this.job=x}j.FormField=v;v.prototype.Add=function(z,y){var A,C,B=y,x=z;if(B==null){B=""}if(!i.isString(x)||x==""||!i.isString(B)){return false}B=encodeURI(B);x=encodeURI(x);if(x.indexOf("'")>-1||B.indexOf("'")>-1){return false}for(A=0;A<this.job.formFields.length;A++){C=this.job.formFields[A];if(C.name==x){C.value=B;return true}}this.job.formFields.push({name:x,value:B});return true};j.FileUploader={ids:[],map:{},port:18625,protocol:"https://",ip:"127.0.0.1",nextLoopTime:600,deleteJobById:function(A){t._resetErr();if(o()){t.MobileNotSupport();return false}var x;if(!A){return}for(x=0;x<j.FileUploader.ids.length;x++){if(A==j.FileUploader.ids[x]){j.FileUploader.ids.splice(x,1);break}}var z=j.FileUploader.map[A];z.SourceValue.job=null;delete z.SourceValue;z.FormField.job=null;delete z.FormField;delete j.FileUploader.map[A];for(x=z.documents.length-1;x>=0;x--){z.documents.splice(x,1)}for(x=z.formFields.length-1;x>=0;x--){z.formFields.splice(x,1)}var y='{"id":"'+k+'","method":"DeleteUploadTask","version":"'+s+'","parameter":["'+A+'"]}';i.ajax({url:r.deleteUploadTask(),method:"post",processData:false,data:y})},parseHttpErrors:function(C,z,B){var y,A;if(C&&i.isArray(C)&&C.length>2){y=C[1];A=C[2]}else{y=z;A=B}if(A.state==2&&A.status==0){if(A.statusText==="abort"){var x=g;t.HttpUploadError(x)}else{t.ServerUrlError()}}else{t.HttpUploadError(m,y,A.status)}},loadHttpBlob:function(D,z,A,E,x,C,y){var F=function(I,G,H){j.FileUploader.parseHttpErrors(I,G,H);if(i.isFunction(x)){x()}},B={method:D,url:z,dataType:"blob",async:A,onSuccess:E,onError:F};if(i.isFunction(C)){B.beforeSend=function(G){G.addEventListener("progress",function(H){delete (H.totalSize);delete (H.position);C(H)},m)}}i.ajax(B)},_OnPercentDone:function(){},_GetPort:function(z){if(l.bEnhancedMode){i.showMask();var y=function(D){i.hideMask();if(i.isArray(D)&&D.length>1){var C=D[1];if(C){l.currentUserPorts=C;if(C.dcp){var B=C.dcp.port,A=C.dcp.sslPort;if(B==0||A==0){setTimeout(function(){l.getPorts(l.strSID,y,x)},0);return true}if(Dynamsoft.navInfoSync.bSSL){j.FileUploader.port=A}else{j.FileUploader.port=B}}}}z();return true},x=function(){i.hideMask();z();return true};l.getPorts(l.strSID,y,x);return true}z();return true},Init:function(D,x,A){t._resetErr();if(o()){t.MobileNotSupport();if(i.isFunction(A)){A(h,w)}return false}var y,C,E=l.detect.curPortIndex;if(Dynamsoft.navInfoSync.bSSL){C="https://";y=l.ports[E][1]}else{C="http://";y=l.ports[E][0]}j.FileUploader.port=y;j.FileUploader.protocol=C;j.FileUploader.ip=l.host;var z=function(){j.FileUploader._GetPort(function(){x(new b());setTimeout(j.FileUploader.StatusLoop,500)})};var B=function(){if(!i.isString(D)){t.MissingDll();if(i.isFunction(A)){A(h,w)}return false}var G=D;if(!G||G==""){G=Dynamsoft.managerEnv.resourcesPath+"/dist/win/UploadModule_"+n.join(".")+".zip"}var F=function(){t.DownloadError();if(i.isFunction(A)){A(h,w)}return false};var H=m;return j.FileUploader.loadHttpBlob("get",G,true,function(I){var J=100;l.loadZip(I,J,z,F)},F,H)};return j.FileUploader.VersionInfo(function(G){if(G&&G.result&&i.isArray(G.result)&&G.result.length>1){var F=G.result[0].split(",");if(l._compareVersion(F,n)){z();return true}}B()},B)},VersionInfo:function(x,y){t._resetErr();if(o()){t.MobileNotSupport();if(i.isFunction(y)){y(h,w)}return false}var z='{"id":"'+k+'","method":"VersionInfo","version":"'+s+'","parameter":[]}';i.ajax({url:r.versionInfo(),method:"post",dataType:"json",processData:false,data:z,onSuccess:function(A){x(A)},onError:function(A,B,C){j.FileUploader.parseHttpErrors(A,B,C);if(i.isFunction(y)){y(h,w)}}});return true},StatusLoop:function(){t._resetErr();if(o()){t.MobileNotSupport();return false}j.FileUploader.GetUploadStatus();setTimeout(j.FileUploader.StatusLoop,j.FileUploader.nextLoopTime);return true},GetUploadStatus:function(){t._resetErr();if(j.FileUploader.ids.length<=0){return true}if(o()){t.MobileNotSupport();return false}var x='{"id":"'+k+'","method":"GetUploadStatus","version":"'+s+'","parameter":["'+j.FileUploader.ids.join(",")+'"]}';i.ajax({url:r.getUploadStatus(),method:"post",dataType:"json",processData:false,data:x,onSuccess:function(z){if(i.isArray(z)){var C=0,F;for(;C<z.length;C++){F=z[C];var E=F.id,A=j.FileUploader.map[E],G=F.percentage,D=F.errorcode,B=F.response,y=F.errorstring;if(!A){continue}if(D==EnumTransferErrorCode.TRANS_FINISHED){A.OnUploadTransferPercentage(A,100,q(B));if(!A.bEvent&&i.isFunction(A.OnRunSuccess)){A.bEvent=true;A.OnRunSuccess(A,q(B));A.bEvent=false}j.FileUploader.deleteJobById(E)}else{if(D==EnumTransferErrorCode.TRANS_OK||D==EnumTransferErrorCode.TRANS_NOT_SEND||D==EnumTransferErrorCode.TRANS_WAITFOR_SEND||D==EnumTransferErrorCode.TRANS_SENDING||D==EnumTransferErrorCode.TRANS_PAUSE||D==EnumTransferErrorCode.TRANS_TASK_PREPARE_INIT||D==EnumTransferErrorCode.TRANS_TASK_INIT){A.OnUploadTransferPercentage(A,G,q(B))}else{if(!A.bEvent&&i.isFunction(A.OnRunFailure)){A.bEvent=true;A.OnRunFailure(A,D,y,q(B));A.bEvent=false}j.FileUploader.deleteJobById(E)}}}}},onError:function(y,z,A){}});return true}};var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var p=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function q(E){var D,C,A,y;var B,x,z;x=E.length;B=0;z="";while(B<x){do{D=p[E.charCodeAt(B++)&255]}while(B<x&&D==-1);if(D==-1){break}do{C=p[E.charCodeAt(B++)&255]}while(B<x&&C==-1);if(C==-1){break}z+=String.fromCharCode((D<<2)|((C&48)>>4));do{A=E.charCodeAt(B++)&255;if(A==61){return z}A=p[A]}while(B<x&&A==-1);if(A==-1){break}z+=String.fromCharCode(((C&15)<<4)|((A&60)>>2));do{y=E.charCodeAt(B++)&255;if(y==61){return z}y=p[y]}while(B<x&&y==-1);if(y==-1){break}z+=String.fromCharCode(((A&3)<<6)|y)}return z}});
/**
 * Install.js
 */
var promptDlgWidth = 550,reconnectTime = 0;
var imagesInBase64 = {
	icn_download: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABOklEQVRIie2WTW6DMBCFH4h1l22VqmqPVUEvEJa9gRt6FDhDpfx0FdJj+Arx3nldhEjEdchgWlaM9CSwMZ/fzMgQvX0TwvA+ePOpIsniRIwZGIl/n/8AGs3RWKB4JA4STjUKBo1EivLtGakEkP7Ru6vbpcpONzFxPFsazQloZyxEmkDepsYk0JIhkZGwzngfWRKvd0u1Pwf93k1NoBjg5uN+pbZuHn0gEFgQ2AVAdgTefQVzU9e2nzaplKbMkEhnK2W9oAOAC9IHIO+Yd5U/rJX2QbocnVSSqARuqse1Ki9BumrUp+U1gXkXRAoyBDIC1jNnCWRPG2Wug2SFrkkUnvHieaPqaxCpo3bL104rLySQviDbpNA0Sgl4W9kXfU9vjWPho+ZaHCHfo6r/kumfYUBEL1/jeJpqFBw/d5aBU2kHOMQAAAAASUVORK5CYII=",
	icn_install: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAA+klEQVRIid2SMWoCQRiFv3GnW7BII6ZPqeAlorewtBELsZdFOz2Q0VYkXQ6QA9iaIqU+mx2Y3QRd12WKffCY4WdmPt5jzPRT5PQOfOSHnky6/rnoqd/cJFt/0FB6I3UkWOVmZbz+GcyjLEjgeSjRzc3KuCMxzIC8fQwsbtTxqJan/jz+r7qZ4LWC2pzbgpkDmclBAG3gO011T0U+g9Mv8PayTY4u0UIQV5jGORYsAcz4oA7wBWR+SUWJAM5Az17E6gFIGUXA2goGJR8wAK1dUuiwVdECnpQZ7cOggiWy5zCcgIkCcbCX2iUKB6pfdfVLFAwUiNS4f6QaXQHE5K75dPBEiQAAAABJRU5ErkJggg==",
	icn_scan: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAADI0lEQVRIibWXTUhUURTHf+/NsxRCp3QGwhKT/MDoAyNo1apmNhYkodGmaFOWmUXQcpgo2gRN5kerllEGLWqjBqZGFH2BlSRJRVqCjpNjYOaUc1q80fnovZmnMx34w+Odc+///u+9595zlbPPBAuWBbiBPcAOoASwR3xB4BPwAngIdOV2en+n6lA5k5zYDjQBJwCHlRECk0Ar4Mvr9AbNglQRMMFBEYZE8IjgSBKXiIJIm6Gg23PQVHHT038U24DrQL1FhamsHThl7/LOxysGYmAT6BCoT/ifDuoFOqbcHlsyYp9ATQZJF1AjcC2OOMZbh9CQacYYnPzu8tQlKrYLNP8/zkU0B1weeyxxk4AzkySqYvjfKXp6opx8IiuAr1jP05S2bQ3sL4a29zA++4/bD6xTBVwCjkwp3eGAo+WQnw1b8w1jHAIuTQRXppTuWgt1JaAA90egc9Q01K0JVGWCdHch1BTr33c/Q89Y0vAqLQxl6ZJWF8He9RAWuPURHo+nbFKqiZC3XEIFOLAB9hTqpDc/wHO/paZ5ahgwQtEqOFIGNtXYD3Boo076R+DGe3jmN441gibCNAmplKXA8QooyAb7CmgZhLlw1G9T4GgZ7HRCKAytg/DO9AI0tGlVYDhxy4cEmgdhOgSVdjizGXI03acpcKxCJ/01D1ffwdvgktNuWBV4ZeQc/QmX30BgDkpz4dxmWL0SGjbB9gKY+QNX3sLQ9LLy/bVyuE+qgQdmc5K/Es5vAWcO/A5Dlgo/QjrpyMySpjfW9qkC3QIBs9FNzsGlARj7qZNOzcHlAfgys+zTzS/QpYq+pC3JgqdCOvnLSbg4AN9m0zpW20oeeUMLNZdPhIlktdSPEFwbhIlZ8xgL8Ivgg+i1GBRoTEOFVTRu7NUrz9gq844IrWmoSYXW0l7v7YXdpUn8bjsNrAVqLO9Pa3Yv0veiJRZ78wK1Au0ZnN52gdryvvjyVjMY3Tz6y6EfvTJ0LlPlBHC6oi86vfGKzdfktgjlIlwQIbCEtQxE2pSbkQIotT1i5ou1hUebi+ijbXXEN0X00dYNdFf2e0OpOvwLFunYK2i9bNwAAAAASUVORK5CYII="
};
window.OnWebTwainNotFoundOnWindowsCallback=function(ProductName, InstallerUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion) {
	var objUrl = { 'default': InstallerUrl };
	_show_install_dialog(ProductName, objUrl, bHTML5, EnumDWT_PlatformType.enumWindow, bIE, bSafari, bSSL, strIEVersion);
}
window.OnWebTwainNotFoundOnLinuxCallback=function(ProductName, strDebUrl, strRpmUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion) {
	var objUrl = { 'default': strDebUrl, 'deb': strDebUrl, 'rpm': strRpmUrl };
	_show_install_dialog(ProductName, objUrl, bHTML5, EnumDWT_PlatformType.enumLinux, bIE, bSafari, bSSL, strIEVersion);
}
window.OnWebTwainNotFoundOnMacCallback=function(ProductName, InstallerUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion) {
	var objUrl = { 'default': InstallerUrl };
	_show_install_dialog(ProductName, objUrl, bHTML5, EnumDWT_PlatformType.enumMac, bIE, bSafari, bSSL, strIEVersion);
}
window.dwt_change_install_url=function(url) {
	var install = document.getElementById('dwt-btn-install');
	if (install)
		install.href = url;
}
window.DWT_Reconnect=function() {
	if(((new Date() - reconnectTime) / 1000) > 30) {
		// change prompt
		var el = document.getElementById('dwt-btn-install');
		if (el) {
			el.innerHTML = 'Failed to connect to the service, have you run the setup?<br />If not, please run the setup and <a href="javascript:void(0)" onclick="DCP_DWT_onclickInstallButton()">click here to connect again</a>.';
		}
		return;
	}
	Dynamsoft.WebTwainEnv.CheckConnectToTheService(function(){
		Dynamsoft.WebTwainEnv.ConnectToTheService();
	}, function(){
		setTimeout(DWT_Reconnect, 500);
	});
}
window.DCP_DWT_onclickInstallButton=function(evt) {
	var btnInstall = document.getElementById('dwt-btn-install');
	if (btnInstall) {
		setTimeout(function(){
			var install = document.getElementById('dwt-install-url-div');
			if (install)
				install.style.display = 'none';
			var el = document.getElementById('dwt-btn-install');
			if (el && el.getAttribute("html5") == "1") {
				var pel = el.parentNode,
					newDiv = document.createElement('div');
				newDiv.id = 'dwt-btn-install';
				newDiv.style.textAlign = "center";
				newDiv.style.paddingBottom='15px';
				newDiv.innerHTML = 'Connecting to the service...';
				newDiv.setAttribute("html5", "1");
				pel.removeChild(el);
				pel.appendChild(newDiv);
				reconnectTime = new Date();
				setTimeout(DWT_Reconnect, 10);
			} else {
				var pel = el.parentNode;
				pel.removeChild(el);
			}
		}, 10);
	}
	return true;
}
window._show_install_dialog=function(ProductName, objInstallerUrl, bHTML5, iPlatform, bIE, bSafari, bSSL, strIEVersion) {
	var ObjString, title, browserActionNeeded;
		title = 'Please complete one-time setup';
	ObjString = [
		'<div class="dynamsoft-dwt-dlg-title">',
		title,
		'</div>'];
	if (iPlatform == EnumDWT_PlatformType.enumLinux || navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
		browserActionNeeded = 'RESTART';
	}
	else {
		browserActionNeeded = 'REFRESH';
	}
		ObjString.push('<div class="dynamsoft-dwt-installdlg-iconholder"> ');
		ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 125px"></div>');
		ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>');
		ObjString.push('<img style="margin: 0px 134px 0px 0px" src=' + imagesInBase64.icn_download + ' alt="download">');
		ObjString.push('<img style="margin: 2px 132px 2px 0px" src=' + imagesInBase64.icn_install + ' alt="install">');
		ObjString.push('<img src=' + imagesInBase64.icn_scan + ' alt="scan">');
		ObjString.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>');
		ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Install</span>');
		ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>');
		ObjString.push('</div>');
		ObjString.push('</div>');
	if (bHTML5 && iPlatform == EnumDWT_PlatformType.enumLinux) {
		ObjString.push('<div style="margin:10px 0 0 60px;"><div id="dwt-install-url-div"><div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="dwt_change_install_url(\'' + objInstallerUrl.deb + '\')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian)</label></div>');
		ObjString.push('<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="dwt_change_install_url(\'' + objInstallerUrl.rpm + '\')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div></div></div>');
	}
	ObjString.push('<div><a id="dwt-btn-install" target="_blank" href="');
	ObjString.push(objInstallerUrl['default']);
	ObjString.push('"');
	if (bHTML5) {
		ObjString.push(' html5="1"');
	} else {
		ObjString.push(' html5="0"');
	}
	ObjString.push(' onclick="DCP_DWT_onclickInstallButton(this)"><div class="dynamsoft-dwt-dlg-button">Download</div></a></div>');
	if (bHTML5) {
		if (bIE) {
			ObjString.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">');
			ObjString.push('If you still see the dialog after installing the scan service, please<br />');
			ObjString.push('1. Add the website to the zone of trusted sites.<br />');
			ObjString.push('IE | Tools | Internet Options | Security | Trusted Sites.<br />');
			ObjString.push('2. Refresh your browser.');
			ObjString.push('</div>');

		} else {
		}
	} else {
		ObjString.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">');
		if (bIE) {
			ObjString.push('After the installation, please<br />');
			ObjString.push('1. Restart the browser<br />');
			ObjString.push('2. Allow "DynamicWebTWAIN" add-on to run by right clicking on the Information Bar in the browser.');
		} else {
			ObjString.push('<div class="dynamsoft-dwt-dlg-red">After installation, please <strong>REFRESH</strong> your browser.</div>');
		}
		ObjString.push('</div>');
	}
	Dynamsoft.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
}
window.OnWebTwainOldPluginNotAllowedCallback=function(ProductName) {
	var ObjString = [
		'<div class="dynamsoft-dwt-dlg-title">',
		ProductName,
		' plugin is not allowed to run on this site.',
		'</div>',
		'<div class="dynamsoft-dwt-dlg-tail" style="margin-top:40px">',
		'Please click "<strong>Always run on this site</strong>" for the prompt that says <br />"<strong>',
		ProductName,
		' Plugin needs your permission to run</strong>"<br /><div class="dynamsoft-dwt-dlg-red">After that, you need to refresh or restart the browser.',
		'</div></div>'];

	Dynamsoft.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
}
window.OnWebTwainNeedUpgradeCallback=function(ProductName, objInstallerUrl, bHTML5, iPlatform,
	bIE, bSafari, bSSL, strIEVersion, bForceUpgrade, bError, strErrorString) {
	var browserActionNeeded, ObjString, title, bActiveX = !bHTML5 && bIE, bPlugin = !bHTML5 && !bIE;
	if (bError) {
		ObjString = [
			'<div class="dynamsoft-dwt-dlg-center">',
			'<div class="dynamsoft-dwt-dlg-errorIcon"></div>',
			'</div>',
			'<div class="dynamsoft-dwt-dlg-error">',
			strErrorString,
			'</div>'
		];
	} else {
		if (bActiveX)
			title = 'The ActiveX to scan needs to be updated';
		else if (bPlugin)
			title = 'The Plugin to scan needs to be updated';
		else
			title = 'The scan service needs to be updated';
		ObjString = [
			'<div class="dynamsoft-dwt-dlg-title">',
			title,
			'</div>'];
	}
	if (iPlatform == EnumDWT_PlatformType.enumLinux || navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
		browserActionNeeded = 'RESTART';
	}
	else {
		browserActionNeeded = 'REFRESH';
	}
	if (bHTML5) {
		ObjString.push('<div class="dynamsoft-dwt-installdlg-iconholder"> ');
		ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 125px"></div>');
		ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>');
		ObjString.push('<img style="margin: 0px 134px 0px 0px" src=' + imagesInBase64.icn_download + ' alt="Update">');
		ObjString.push('<img style="margin: 2px 132px 2px 0px" src=' + imagesInBase64.icn_install + ' alt="install">');
		ObjString.push('<img src=' + imagesInBase64.icn_scan + ' alt="scan">');
		ObjString.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>');
		ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Update</span>');
		ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>');
		ObjString.push('</div>');
		ObjString.push('</div>');
	}
	if (bHTML5 && iPlatform == EnumDWT_PlatformType.enumLinux) {
		ObjString.push('<div style="margin:10px 0 0 19px;"><div id="dwt-install-url-div"><div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="dwt_change_install_url(\'' + objInstallerUrl.deb + '\')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian)</label></div>');
		ObjString.push('<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="dwt_change_install_url(\'' + objInstallerUrl.rpm + '\')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div></div></div>');
	}
	else {
		if (!bError)
			ObjString.push('<div style="margin-top:40px;"></div>');
	}
	ObjString.push('<a id="dwt-btn-install" target="_blank" href="');
	ObjString.push(objInstallerUrl['default']);
	ObjString.push('" onclick="DCP_DWT_onclickInstallButton(this)"><div class="dynamsoft-dwt-dlg-button">Download</div></a>');
	ObjString.push('<p></p>');
	ObjString.push('<div class="dynamsoft-dwt-dlg-tail">');
	if (bActiveX) {
		ObjString.push('A newer version of the ActiveX is available. Please download and update now.');
		ObjString.push('<div class="dynamsoft-dwt-dlg-red">Please EXIT Internet Explorer before you install the new version.</div>');
	}
	else if (bPlugin) {
	}
	else {
		ObjString.push('A newer version of the scan service is available on this page. <br /> Please download and update now.');
	}
	ObjString.push('</div>');
	Dynamsoft.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''), false, bForceUpgrade);
}
window.OnWebTwainPreExecuteCallback=function() {
	Dynamsoft.WebTwainEnv.OnWebTwainPreExecute();
}
window.OnWebTwainPostExecuteCallback=function() {
	Dynamsoft.WebTwainEnv.OnWebTwainPostExecute();
}
window.OnRemoteWebTwainNotFoundCallback=function(ProductName, ip, port, bSSL) {
	var ObjString = [
		'<div class="dynamsoft-dwt-dlg-tips">',
		'Dynamsoft Service is missing a certificate for the following IP/domain <br />',
		'or isn\'t installed on the PC with the following IP/domain <br />',
		'"', ip, '".<br />',
		'Please make sure you have put the correct certificate <br />',
		'in the {Dynamsoft Service Directory}<br />',
		'or that Dynamsoft Service is installed on that specified PC.',
		'</div>',
		'<div class="dynamsoft-dwt-dlg-tail">',
		'<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'
	];
	Dynamsoft.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
}
window.OnRemoteWebTwainNeedUpgradeCallback=function(ProductName, ip, port, bSSL) {
	var ObjString = [
		'<div class="dynamsoft-dwt-dlg-tips">',
		'Dynamsoft Service is outdated on the PC with IP/domain <br />',
		'"', ip, '".<br />',
		'Please open the page on that PC to download and install it.',
		'</div>',
		'<div class="dynamsoft-dwt-dlg-tail">',
		'<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'
	];
	Dynamsoft.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
}
window.OnWebTWAINDllDownloadSuccessful=function() {
	console.log('The Web TWAIN Module was downloaded successfully!');
}
window.OnWebTWAINDllDownloadFailure=function(ProductName, errorCode, errorString) {
	if (errorCode == EnumDWT_Error.ModuleNotExists) {
		var ObjString = [
			'<div class="dynamsoft-dwt-dlg-tips">',
			errorString,
			'</div>',
			'<div class="dynamsoft-dwt-dlg-tail">',
			'<div class="dynamsoft-dwt-dlg-red">You can try <strong>REFRESHING</strong> your browser to try again. <br /> If the issue persists, please contact the website administrator.</div></div>'
		];
		Dynamsoft.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
	}
	return true;
}
window.OnGetServiceUpdateStatus=function(bError, statusCode, statusString) {
	if (statusString != "Update skipped")
		console.log(statusString);
}
window.OnWebTWAINModuleDownloadManually=function(objInstallerUrl, iPlatform, bIE, bSafari, bSSL, strIEVersion) {
	return _show_install_dialog('', objInstallerUrl, true, iPlatform, bIE, bSafari, bSSL, strIEVersion);
}
/**
 * Basic Configuration (config.js with differences)
 */
Dynamsoft.WebTwainEnv.AutoLoad = false;
Dynamsoft.WebTwainEnv.Containers = [{ContainerId:'dwtcontrolContainer', Width:270, Height:350}];
Dynamsoft.WebTwainEnv.IfAddMD5InUploadHeader = false;
Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer = false;
export default Dynamsoft;
