// @Tue 02/02/2021 161052 
/*
* @name: dwt all-in-one package
* @version: 16.2.0.0202
* @components:
*   + Dynamsoft Dynamic Web TWAIN version: 16.2
*   + Dynamsoft Barcode Reader Addon for DWT version 16.2 (DBR version 7.6) 20200605 1340
*   + Dynamsoft PDF Rasterizer Addon for DWT version: 16.2
*   + Dynamsoft OCR Basic Addon for DWT version: 16.2
*   + Dynamsoft OCR Pro Addon for DWT version: 16.2
*   + Dynamsoft Webcam Addon for DWT version: 16.2
*   + Dynamsoft Camera Addon for DWT version: 16.2
*   + Dynamsoft File Uploader version: 1.6.0.0428
*/

 
// @Thu 01/07/2021 092345 
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft Support Team
* Version: 16.2
*/

/*! Date: 01/06/2021 10:21:18 */!function(r){var i={};function n(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=r,n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=15)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pointToPointDistance=e.parsePadding=e.throttle1=e.promiseWidthAbort=e.makePromiseCancelable=e.formatLog=e.formatTime=e.devicePixelRatio=e.requestAnimationFrame=e.checkFocus=e.deepClone=e.deepCopy=e.createCanvas=e.uid=e.error=e.throwError=e.insertBefore=e.insertAfter=e.getByClass=e.getIndexByCallback=e.getIndex=e.exitFullscreen=e.launchFullscreen=e.isFullscreen=e.toggleDisplayByQuery=e.toggleDisplayByDom=e.toggleHidden=e.animation=e.showByDom=e.hiddenByDom=e.hiddenByQuery=e.id=e.preventDefault=e.stopBubble=e.arrayFrom=e.queryAll=e.query=e.throttleStable=e.stable=e.throttle=e.mergeJSON=e.addEvent=e.isElement=e.isIE=e.isMobile=e.isBorder=e.isColor=e.isBoolean=e.isNumber=e.isSize=e.isString=e.isFunction=e.isObject=e.uniqueArray=e.isArray=void 0;var i="WebViewer_Error: ";function a(t){return"function"==typeof t}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},e.uniqueArray=function(t){if(Array.isArray(t)){for(var e=0;e<t.length;e++)for(var r=e+1;r<t.length;r++)t[e]===t[r]&&(t.splice(r,1),r--);return t}},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e.isFunction=a,e.isString=function(t){return"string"==typeof t},e.isSize=function(t){var e=String(t);return!!/^\d+(px|em)$|^\d+$|^(100|[1-9]?\d(\.\d\d?\d?)?)%$/.test(e)},e.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},e.isBoolean=function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},e.isColor=function(t){var e=document.createElement("span");return e.style.background=t,!!e.style.background},e.isBorder=function(t){var e=document.createElement("span");return e.style.border=t,!(!e.style.border&&""!==t)},e.isMobile=function(){return"ontouchstart"in document.documentElement},e.isIE=function(){return void 0!==document.documentMode},e.isElement=function(t){return t instanceof HTMLElement||"[object ShadowRoot]"===Object.prototype.toString.call(t)},e.addEvent=function(t,e,r,i){if(t)return t.addEventListener(e,r,i),function(){t.removeEventListener(e,r)}},e.mergeJSON=function(t,e){for(var r in t)void 0!==e[r]&&this.isObject(t[r])?this.mergeJSON(t[r],e[r]):e[r]=t[r]},e.throttle=function(e,r,i){var n=!0;return function(){var t=this;n&&(n=!1,setTimeout(function(){e.apply(t,i),n=!0},r))}},e.stable=function(t,e,r){var i,n=this;return void 0===r&&(r=!1),function(){r?t.apply(n):(i&&clearTimeout(i),i=setTimeout(function(){t.apply(n)},e))}},e.throttleStable=function(e,r){var i=this,n=0,o=null;return function(){var t=+new Date;t-n<r?(clearTimeout(o),o=setTimeout(function(){n=t,e.apply(i)},r)):(n=t,e.apply(i))}},e.query=function(t){return document.querySelector(t)},e.queryAll=function(t){return Array.from?Array.from(document.querySelectorAll(t)):this.arrayFrom(document.querySelectorAll(t))},e.arrayFrom=function(t){var e=[];if(this.isObject(t))for(var r=Object.keys(t),i=0;i<r.length;i++)e.push(t[r[i]]);else for(var n=0;n<t.length;n++)e.push(t[n]);return e},e.stopBubble=function(t){t&&t.stopPropagation?t.stopPropagation():t&&(t.cancelBubble=!0)},e.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},e.id=function(t){return""===t||void 0===t?null:document.getElementById(t)},e.hiddenByQuery=function(t){var e=this.query(t);this.hiddenByDom(e)},e.hiddenByDom=function(t){null!=t&&t.classList.add("dvs-nodisplay")},e.showByDom=function(t){null!=t&&t.classList.remove("dvs-nodisplay")},e.animation=function(t,e,r,i,n){if(void 0===i&&(i=200),void 0===n&&(n=13),!this.isString(e)||!this.isNumber(r))return!1;var o=!1;this.isString(t[e])&&-1!==t[e].indexOf("px")&&(o=!0);var s,a,h=parseInt(t[e]);this.isNumber(h)&&(s=(r-h)/n,a=setInterval(function(){0<s&&h<r||s<0&&r<h?h+=s:(clearInterval(a),h=r),t[e]=o?h+"px":h},i/n))},e.toggleHidden=function(t){t.classList.toggle("dvs-hidden")},e.toggleDisplayByDom=function(t){t.classList.toggle("dvs-nodisplay")},e.toggleDisplayByQuery=function(t,e){void 0===e&&(e=!0);var r=this.query(t);return this.toggleDisplayByDom(r,e)},e.isFullscreen=function(){var t=window.document;return t.fullscreenElement||t.msFullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||!1},e.launchFullscreen=function(t){return t.requestFullscreen?(t.requestFullscreen(),!0):t.mozRequestFullScreen?(t.mozRequestFullScreen(),!0):t.msRequestFullscreen?(t.msRequestFullscreen(),!0):t.oRequestFullscreen?(t.oRequestFullscreen(),!0):t.webkitRequestFullscreen?(t.webkitRequestFullScreen(),!0):(alert("Your browser does not support full screen!"),!1)},e.exitFullscreen=function(){var t=window.document;return t.exitFullScreen?(t.exitFullScreen(),!0):t.mozCancelFullScreen?(t.mozCancelFullScreen(),!0):t.webkitExitFullscreen?(t.webkitExitFullscreen(),!0):t.msExitFullscreen?(t.msExitFullscreen(),!0):void 0},e.getIndex=function(t){for(var e=t.parentNode.children,r=0;r<e.length;r++)if(e[r]===t)return r},e.getIndexByCallback=function(t,e){for(var r=t.parentNode,i=r.children,n=0,o=0;o<i.length;o++){var s=i[o];if(a(e)){if(!e(s,r))continue;if(s===t)return n;n++}else if(s===t)return o}return-1},e.getByClass=function(t){return document.getElementsByClassName(t)},e.insertAfter=function(t,e){var r=e.parentNode;r.lastChild==e?r.appendChild(t):this.insertBefore(t,e.nextSibling,r)},e.insertBefore=function(t,e,r){void 0===e?r.appendChild(t):r.insertBefore(t,e)},e.throwError=function(t){throw new Error(i+"ErrorCode: "+t.errorCode+" ErrorString: "+t.message)},e.error=function(t){},e.uid=function(t){var e=Math.random().toString(35).substr(2);return e.length<11&&(e+=Math.random().toString(35).substr(2)),t=Math.max(Math.min(Math.round(t),11),8),e=e.substr(0,t)},e.createCanvas=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:t,context:e}},e.deepCopy=function(t){var e=Array.isArray(t)?[]:{};for(var r in t)"object"==typeof t[r]?e[r]=this.deepCopy(t[r]):e[r]=t[r];return e},e.deepClone=function(t){var e;if(this.isArray(t))e=[];else{if(!this.isObject(t))return t;e={}}for(var r in t){var i=t[r];this.isArray(t)||this.isObject(t)?e[r]=this.deepClone(i):e[r]=i}return e},e.checkFocus=function(){var t=document.activeElement;return"INPUT"===t.tagName&&"text"===t.type},e.requestAnimationFrame=function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame,r=!!e;if(e&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(e.toString())&&(r=!1),r)return e(t);var i={},n=null,o=+new Date;return i[1]=t,null===n&&(n=setInterval(function(){var t=+new Date,e=i;for(var r in i={},e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r](t),o=t);2500<t-o&&(clearInterval(n),n=null)},1e3/60)),1},e.devicePixelRatio=function(){var t=window;return t?t.devicePixelRatio?t.devicePixelRatio:t.screen.deviceXDPI&&t.screen.logicalXDPI?t.screen.deviceXDPI/t.screen.logicalXDPI:1:1},e.formatTime=function(t){var e=new Date,r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return t},e.formatLog=function(t,e,r){var i="";return 1===arguments.length&&(i+=t),2!==arguments.length&&3!==arguments.length||(i+="execute "+t,i+=e?" successful":" failed",3===arguments.length&&(i+=": "+r)),i},e.makePromiseCancelable=function(t){var i=!1;return{promise:new Promise(function(e,r){t.then(function(t){i?r({isCanceled:!0}):e(t)}),t.catch(function(t){r(i?{isCanceled:!0}:t)})}),cancel:function(){i=!0}}},e.promiseWidthAbort=function(t){var r=null,e=new Promise(function(t,e){r=function(t){void 0===t&&(t="abort"),e(t)}}),i=Promise.race([t,e]);return i.abort=r,i},e.throttle1=function(r,i){var n,o,s,a=0;return function(){var t=+new Date,e=i-(t-a);o=this,s=arguments,e<=0||i<e?(n&&(clearTimeout(n),n=null),a=t,r.apply(o,s)):n=n||setTimeout(function(){r.apply(o,s),n=null,a=+new Date},e)}},e.parsePadding=function(t){var e=(t=t.replace(/^\s*|\s*$/g,"")).split(/\s*/).map(function(t){return Number(t)}),r=0,i=0,n=0,o=0;switch(e.length){case 1:r=e[0],i=e[0],n=e[0],o=e[0];break;case 2:r=e[0],i=e[1],n=e[0],o=e[1];break;case 3:r=e[0],i=e[1],n=e[2],o=e[1];break;case 4:r=e[0],i=e[1],n=e[2],o=e[3];break;default:o=n=i=r=0}return{top:r,right:i,bottom:n,left:o}},e.pointToPointDistance=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.operationMode=e.shapeType=e.dashType=e.lineType=e.errorMessages=e.modelEvent=e.uiEvent=e.privateEvent=e.viewerEvent=e.originEvent=e.keyCodes=void 0;var i="undefined"!=typeof window,n=i?window:{};i&&0 in window.document.documentElement,i&&0 in n;e.keyCodes={SHIFT:16,CTRL:17,BACKSPACE:8,DEL:46,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,Y:89,Z:90},e.originEvent={CLICK:"click",KEYDOWN:"keydown",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",MOUSE_OVER:"mouseover",MOUSE_OUT:"mouseout",CHANGE:"change",SCROLL:"scroll",CONTEXTMENU:"contextmenu",RESIZE:"resize"},e.viewerEvent={IMAGE_SELECTED:"imageSelected",PAGE_CLICK:"click",PAGE_MOUSE_DOWN:"mousedown",PAGE_MOUSE_MOVE:"mousemove",PAGE_MOUSE_UP:"mouseup",PAGE_MOUSE_OVER:"mouseover",PAGE_MOUSE_OUT:"mouseout",PAGE_DOUBLE_CLICK:"dblclick",PAGE_RIGHT_CLICK:"rightclick",PAGE_CONTEXTMENU:"contextmenu",DRAG_START:"dragstart",DRAG_MOVE:"dragmove",DRAG_DONE:"dragdone",KEY_DOWN:"keydown",KEY_UP:"keyup",RESIZE:"resize",TOP_PAGE_CHANGED:"topPageChanged",BUFFER_CHANGED:"bufferChanged",THUMBNAIL_STRETCH:"resize",REMOVE_PAGE:"removePage",FILE_KEY_UP:"fileKeyUp",FILE_LIST_CLICK:"fileListClick",FILE_LIST_RIGHT_CLICK:"fileListRightClick",TAG_KEY_UP:"tagKeyUp",TAG_LIST_CLICK:"tagListClick",TAG_LIST_RIGHT_CLICK:"tagListRightClick",PAGE_AREA_SELECTED:"pageAreaSelected",PAGE_AREA_UNSELECTED:"pageAreaUnselected",VIEWER_PAGE_RENDERED:"pageRendered",DOCUMENT_KEY_UP:"onDocumentKeyUp",DOCUMENT_POINTER_UP:"onDocumentPointerUp",DOCUMENT_POINTER_MOVE:"onDocumentPointerMove",DOCUMENT_CLICK:"onDocumentClick",SIDEBAR_CLICK:"onSidebarClick",FILE_DROP:"onDrop"},e.privateEvent={APPEND_SYNC_DROP:"_appendSyncDrop",UPDATE_UI_SETTING:"_updateUISetting",UPDATE_FOCUS:"_updateFocus",CANVAS_VISIBILITY_CHANGED:"_canvasVisibilityChanged",SET_SELECTED_INDEXES:"_SetSelectedIndexes",DOCUMENT_UP:"_documentUp",DOCUMENT_MOVE:"_documentMove",DISPLAYED_IMAGE_CHANGED:"_displayedImageChanged",REORDER_THUMBNAIL:"_onReOrderThumbnail",CHANGE_THUMBNAIL_VIEW_PROP:"_changeThumbnailViewProp",UPDATE_INNER_THUMBNAIL_PAGE:"_updateInnerThumbnailPage",UPDATE_ERROR_MESSAGE:"_updateErrorMessage",UPDATE_LOG_MESSAGE:"_updateLogMessage",DIRECTORY_CHANGED:"_DirectoryChanged",BIND_SLIDE_COMPONENT:"_bindSlideComponent",UNBIND_SLIDE_COMPONENT:"_unbindSlideComponent",BIND_CANVAS:"_bindCanvas",UNBIND_CANVAS:"_unbindCanvas",SET_CANVAS_SIZE:"_setCanvasSize",CANVAS_TOUCH_START:"_canvasTouchstart",CANVAS_TOUCH_MOVE:"_canvasTouchmove",CANVAS_TOUCH_END:"_canvasTouchend",CANVAS_MOUSE_DOWN:"_canvasMousedown",CANVAS_MOUSE_UP:"_canvasMouseup",CANVAS_MOUSE_MOVE:"_canvasMousemove",CANVAS_MOUSE_OVER:"_canvasMouseOver",CANVAS_MOUSE_OUT:"_canvasMouseOut",CANVAS_WHEEL:"_canvasWheel",CANVAS_SCROLL:"_canvasScroll",CANVAS_CLICK:"_canvasClick",CANVAS_DOUBLE_CLICK:"_canvasDoubleClick",CANVAS_RIGHT_CLICK:"_canvasRightClick",CANVAS_KEY_DOWN:"_canvasKeyDown",CANVAS_KEY_UP:"_canvasKeyUp",CANVAS_RESIZE:"_canvasResize",CANVAS_DRAG_START:"_canvasDragStart",CANVAS_DRAG_MOVE:"_canvasDragMove",CANVAS_DRAG_DONE:"_canvasDragDone",CANVAS_DEFAULT_CURSOR:"_canvasDefaultCursor",SHOW_CANVAS_LOADING:"_showCanvasLoading",ADD_DATA_TO_DB_SUCCESS:"_addDataToDBSuccess",ADD_DATA_TO_DB_FAILED:"_addDataToDBFailed"},e.uiEvent={VIEWER_RESIZE:"_viewerResizeUI",VIEWER_CLICK:"_mouseClickUI",VIEWER_RIGHT_CLICK:"_viewerRightClickUI",VIEWER_MOVE:"_mouseMoveUI",FILE_DROP:"_fileDropUI",SHOW_LATEST_PAGE:"_showLatestPage",UPDATE_PAGES_LAYOUT:"_updatePagesLayout",DOCUMENT_POINTER_MOVE:"_documentPointerMoveUI",DOCUMENT_POINTER_UP:"_documentPointerUpUI",DOCUMENT_KEY_DOWN:"_documentKeyDownUI",DOCUMENT_KEY_UP:"_documentKeyUpUI",DOCUMENT_CLICK:"_documentClickUI",SIDEBAR_CLICK:"_sideBarClickUI",SIDEBAR_STRETCH_START:"_sidebarStretchStartUI",FILE_LIST_CLICK:"_fileListClickUI",FILE_LIST_RIGHT_CLICK:"_fileListRightClickUI",FILE_KEY_UP:"_fileListKeyUpUI",ADD_NEW_FOLDER:"_addNewFolderUI",FILE_REFRESH:"_directoryRefreshUI",FILE_SELECTED:"_fileSelectedUI",TAG_LIST_CLICK:"_tagListClickUI",TAG_LIST_RIGHT_CLICK:"tagListRightClickUI",TAG_KEY_UP:"_tagKeyUpUI",ADD_NEW_TAG:"_addNewTagUI",TAG_REFRESH:"_tagRefreshUI",TAG_SELECTED:"_tagSelectedUI",OPEN_DEFAULT_TAG:"_openDefaultTagUI",IMAGE_SELECTED:"_imageSelectedUI",THUMBNAIL_CHANGED:"_thumbnailChangedUI",UPDATE_THUMBNAIL_PROP:"_updateThumbnailPropUI",SCROLL_TO:"_scrollToUI",SET_VIEW_MODE:"_setViewModeUI",PAGER_BLUR:"_pagerBlurUI",PAGER_CHANGED:"_pagerChangedUI",SET_SCROLLER_SIZE:"_setScrollerSizeUI",CHANGE_CANVAS_CURSOR:"_changeCanvasCursorUI",TAB_CHANGED:"_tabChangedUI",TAB_LIST_CLICK:"_tabListClickUI",CLOSE_SAVE_SETTING_BOX:"_closeSaveSettingBoxUI",CUSTOM_BUTTON_CLICK:"_customButtonClickUI"},e.modelEvent={APPEND_FOR_VIEWER:"_appendForViewer",INSERT_FOR_VIEWER:"_insertForViewer",UPDATE_FOR_VIEWER:"_updateForViewer",REMOVE_SYNC:"_removeSync",REMOVE_ALL_SYNC:"_removeAllSync",SET_CURRENT_INDEX:"_setCurrentIndex",MOVE_PAGE:"_movePage",SWITCH_PAGE:"_switchPage",FIRST_PAGE:"_firstPage",LAST_PAGE:"_lastPage",NEXT_PAGE:"_nextPage",PREV_PAGE:"_prevPage",GOTO_PAGE:"_gotoPage",OVERLAY_RECTANGLE:"_overlayRectangle",UPDATE_THUMBNAIL_PAGE:"_updateThumbnailPage",UPDATE_SLIDE_PAGE:"_updateSlidePage",REMOVE_FROM_TAG:"_removeFromTag",APPEND_FOR_TAG:"_appendForTag",INSERT_FOR_TAG:"_insertForTag",SWITCH_FOR_TAG:"_switchForTag",MOVE_FOR_TAG:"_moveForTag",REORDER_FOR_TAG:"_reorderForTag",OPEN_TAG:"_openTag",REMOVE_PAGE_TAG:"_removePageTag",ADD_PAGE_TAG:"_addPageTag",EMPTY_TAG:"_emptyTag",RENAME_TAG:"_renameTag",TAG_CHANGED:"_tagChanged",APPEND_SYNC:"_appendSync",UPDATE_SYNC:"_updateSync",REMOVE_FROM_FILE:"_removeFromFile",APPEND_FOR_FILE:"_appendForFile",INSERT_FOR_FILE:"_insertForFile",SWITCH_FOR_FILE:"_switchForFile",MOVE_FOR_FILE:"_moveForFile",REORDER_FOR_FILE:"_orderForFile",APPEND_TO_OPEN_TAG:"_appendToOpenTag",APPEND_TO_OPEN_ALL:"_appendToOpenAll",OPEN_ALL:"_openAll",APPEND_FOR_ALL:"_appendForAll",INSERT_FOR_ALL:"_insertForAll",REMOVE_FROM_ALL:"_removeFromAll",SWITCH_FOR_ALL:"_switchForAll",MOVE_FOR_ALL:"_moveForAll",REORDER_FOR_ALL:"_reorderForAll"},e.errorMessages={OK:{code:0,message:"ok."},PARAMETER_TYPE:{code:80001,message:"The parameter type is wrong."},PARAMETER_RANGE:{code:80002,message:"The parameter is out of range."},IMG_NOT_EXIST:{code:80003,message:"The image does not exist."},IMG_LOAD_FAILED:{code:80004,message:"The image load failed."},BACK_TO_TOP:{code:80005,message:"The current folder is root folder."},FILE_NOT_EXIST:{code:80006,message:"The file does not exist."},IMG_HAVE_EXIST:{code:80007,message:"The image has existed."},EMPTY_IN_ARRAY:{code:80008,message:"There is some empty element in array."},TAG_NOT_EXIST:{code:80009,message:"Tag does not exist."},TAG_HAVE_EXIST:{code:80010,message:"The tag already exists."},ELEMENT_NOT_EXIST:{code:80011,message:"Element does not exist."},PAGE_NOT_EXIST:{code:80012,message:"Page does not exist."},PARAMETER_INVALID:{code:80013,message:"The parameter is invalid."},URL_INVALID:{code:80014,message:"The url is invalid."},FOLDER_NOT_EXIST:{code:80015,message:"The folder does not exist."},COLOR_INVALID:{code:80016,message:"The color is invalid."},IMG_STORAGE_FAILED:{code:80017,message:"Failed to save image to database."},IMG_REMOVE_FAILED:{code:80018,message:"Failed to remove image from database by uid."},PATH_ERROR:{code:80019,message:"The path of file or folder does not exist."},BROWSER_NOT_SUPPORT:{code:80020,message:"Your browser does not support full screen."},SIZE_INVALID:{code:80021,message:"The size is invalid."},OPERATION_MODE_ERROR:{code:80022,message:"The operation mode is error."},BORDER_INVALID:{code:80023,message:"The border is invalid."},CAMERA_CLASS_REQUIRE:{code:80025,message:"The camera class is required."},VIEW_UI_REQUIRE:{code:80026,message:"The constructor of view ui is required."},WEBCAM_LICENSE_INVALID:{code:80027,message:"The license of webcam is invalid."},CAMERA_EXIST:{code:80028,message:"The video is shown."},CAMERA_CLASS_INVALID:{code:80029,message:"The camera class is invalid."},META_DATA_NOT_EXIST:{code:80030,message:"The metadata is not exist."},CAMERA_NOT_EXIST:{code:80031,message:"The video is not shown."}},e.lineType={FREE_LINE:0,STRAIGHT_LINE:1,BROKEN_LINE:2},e.dashType={a:null,b:null},e.shapeType={RECTANGLE:0,CIRCLE:1,TRIANGLE:2},e.operationMode={HAND:0,CROP:1,CLICK_TO_ZOOM:2}},function(t,e,r){"use strict";var a=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.PublishSubscribe=void 0;var i=(n.prototype.on=function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},n.prototype.emit=function(t){for(var e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var n=this._events[t];if(!n||0===n.length)return!1;for(var o=n.length,s=0;s<o;s++)null!==(e=n[s])&&void 0!==e&&e.call.apply(e,a([null],r))},n.prototype.off=function(t,e){var r=this._events[t];if(!r)return!1;if(e)for(var i=r.length,n=0;n<i;n++)r[n]===e&&r.splice(n,1);else r&&(r.length=0)},n);function n(){this._events={}}e.PublishSubscribe=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseCanvas=void 0;var i=(n.prototype.bindCanvas=function(t){this.canvas=t,this.canvasContext=t.getContext("2d"),this.canvasContext.imageSmoothingEnabled=!1},n.prototype.unbindCanvas=function(){this.canvas=null,this.canvasContext=null},n.prototype.clearCanvas=function(t,e,r,i){var n;null!==(n=this.canvas)&&void 0!==n&&n.clearRect(t,e,r,i)},n.prototype.setCanvasSize=function(t,e){this.cssWidth=t,this.cssHeight=e,this.innerWidth=t*this.devicePixelRatio,this.innerHeight=e*this.devicePixelRatio},n.prototype.getContext=function(){return this.canvasContext},n.prototype.getPixelRatio=function(){return this.devicePixelRatio},n.prototype.setPixelRatio=function(t){t&&(this.devicePixelRatio=t)},n.prototype.setWidth=function(t){this.cssWidth=t},n.prototype.setHeight=function(t){this.cssHeight=t},n.prototype.getWidth=function(){return this.cssWidth},n.prototype.getHeight=function(){return this.cssHeight},n);function n(t){this.cssWidth=0,this.cssHeight=0,this.devicePixelRatio=1,this.canvas=null,this.canvasContext=null,this.devicePixelRatio=t.devicePixelRatio}e.BaseCanvas=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CropManager=void 0;var i=r(7),n=(o.prototype.setKeepAspectRatio=function(e){this.keepAspectRatio=e,this.drawingFlag||this.cropBoxes.forEach(function(t){t.keepAspectRatio=e})},o.prototype.setAspectRatio=function(t){this.aspectRatio=t},o.prototype.setZoom=function(e){this.zoom=e,this.cropBoxes.forEach(function(t){t.zoom=e})},o.prototype.setPageSize=function(t,e){this.width=t,this.height=e},o.prototype.getRectArr=function(){var i=[];return this.cropBoxes.forEach(function(t,e){var r=Object.assign({index:e},t.getRect());i.push(r)}),i},o.prototype.clear=function(){var t;0<this.cropBoxes.length&&null!==(t=this.unselectedCallback)&&void 0!==t&&t.call(this),this.cropBoxes=[]},o.prototype.addFreeBox=function(t){var e=new i.CropBox({vertexes:t.slice(),width:this.width,height:this.height,mode:"free"});return this.cropBoxes.push(e),e},o.prototype.addBox=function(t,e){var r=new i.CropBox({vertexes:t.slice(),width:this.width,height:this.height,type:e,mode:"normal",aspectRatio:this.aspectRatio,keepAspectRatio:this.keepAspectRatio,zoom:this.zoom});return this.cropBoxes.push(r),r},o.prototype.removeBox=function(t){return void 0===t&&this.clear(),!(t<0||t>=this.cropBoxes.length||(this.cropBoxes.splice(t,1),0))},o.prototype.getBoxByUid=function(t){for(var e=this.cropBoxes.length,r=0;r<e;r++)if(this.cropBoxes[r].uid===t)return this.cropBoxes[r];return null},o.prototype.onStartHandler=function(t,e,r){this.startX=t,this.startY=e,this.mouseDown=!0;var i=this.checkSelect(t,e);if(null===i)return r||this.clear(),void(this.activeBoxId=null);this.activeBoxId=this.cropBoxes[i].uid,this.getBoxByUid(this.activeBoxId).onStartHandler(t,e)},o.prototype.onMoveHandler=function(t,e,r){if(this.mouseDown){var i=null,n=t-this.startX,o=e-this.startY,s=null,a=2/this.zoom;!this.activeBoxId&&t-this.startX<-a&&e-this.startY<-a?(s=0)<this.aspectRatio&&(o=n/this.aspectRatio):!this.activeBoxId&&t-this.startX>a&&e-this.startY<-a?(s=1,0<this.aspectRatio&&(o=-n/this.aspectRatio)):!this.activeBoxId&&t-this.startX>a&&e-this.startY>a?(s=2,0<this.aspectRatio&&(o=n/this.aspectRatio)):!this.activeBoxId&&t-this.startX<-a&&e-this.startY>a&&(s=3,0<this.aspectRatio&&(o=-n/this.aspectRatio));var h=[t,this.startY+o,this.startX,this.startY+o,this.startX,this.startY,t,this.startY],u=[this.startX,this.startY,this.startX,this.startY+o,t,this.startY+o,t,this.startY];if(null!==s){for(var l=[],c=0;c<4;c++)s%2?(l.push(u[2*(s+c)%8]),l.push(u[(2*(s+c)+1)%8])):(l.push(h[2*(s+c)%8]),l.push(h[(2*(s+c)+1)%8]));return i=this.addBox(l,["topLeft","topRight","bottomRight","bottomLeft"][s]),0<this.aspectRatio?i.keepAspectRatio=!0:i.keepAspectRatio=!1,this.drawingFlag=!0,this.addNewFlag=this.keepAspectRatio,this.activeBoxId=i.uid,i.onStartHandler(this.startX,this.startY,s),i.onMoveHandler(t,e,s),void(s=null)}this.activeBoxId&&(i=this.getBoxByUid(this.activeBoxId)),i&&i.onMoveHandler(t,e)}},o.prototype.onEndHandler=function(t,e){var r,i;this.mouseDown&&(this.mouseDown=!1,this.drawingFlag=!1,!this.activeBoxId||(i=this.getBoxByUid(this.activeBoxId))&&(null!==this.addNewFlag&&(i.keepAspectRatio=this.addNewFlag,this.addNewFlag=null),i.onEndHandler(t,e),0<this.cropBoxes.length&&null!==(r=this.selectedCallback)&&void 0!==r&&r.call(this,this.getRectArr()),this.activeBoxId=null))},o.prototype.checkSelect=function(t,e){var r=this.cropBoxes.length;if(0===r)return null;for(var i=r-1;0<=i;i--)if(null!==this.cropBoxes[i].isBoxSelected(t,e))return i;return null},o.prototype.checkSelectForCursor=function(t,e){var r=this.cropBoxes.length;if(0===r)return null;for(var i=r-1;0<=i;i--){var n=this.cropBoxes[i],o=n.isBoxSelected(t,e);if(null!==o){var s="move";return-1!==o&&(s=n.checkPointPosition(o)),{part:o,type:n.type,position:s}}}return null},o);function o(t,e){this.cropBoxes=[],this.width=0,this.height=0,this.activeBoxId=null,this.mouseDown=!1,this.startX=null,this.startY=null,this.selectedCallback=null,this.unselectedCallback=null,this.aspectRatio=0,this.keepAspectRatio=!1,this.addNewFlag=null,this.drawingFlag=!1,this.zoom=1,this.width=t,this.height=e}e.CropManager=n},,function(t,e){var r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CropBox=void 0;var i=r(0),n=(o.prototype.getRect=function(){if("free"===this.mode)return null;var t=this._getMaxPoint(),e=t.minX,r=t.maxX,i=t.minY,n=t.maxY;return{x:Math.floor(e),y:Math.floor(i),width:Math.floor(r-e),height:Math.floor(n-i)}},o.prototype._initBox=function(){this.midpoints=this.calcMidpoint(this.vertexes),this.probePoints=this.vertexes.slice().concat(this.midpoints.slice()),this.slopeRatio=this.calcSlopeRatio(this.vertexes)},o.prototype._getMaxPoint=function(){return{minX:Math.min(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),maxX:Math.max(this.probePoints[0],this.probePoints[2],this.probePoints[4],this.probePoints[6]),minY:Math.min(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7]),maxY:Math.max(this.probePoints[1],this.probePoints[3],this.probePoints[5],this.probePoints[7])}},o.prototype.checkPointPosition=function(t){var e=this._getMaxPoint(),r=e.minX,i=e.maxX,n=e.minY,o=e.maxY,s=this.probePoints[2*t],a=this.probePoints[2*t+1];return t<4?s===i&&a===o?"se":s===i&&a===n?"ne":s===r&&a===n?"nw":s===r&&a===o?"sw":null:s===i?"e":a===o?"s":s===r?"w":a===n?"n":null},o.prototype.onStartHandler=function(t,e,r){var i=this.isBoxSelected(t,e);void 0!==r&&(i=r),null!==i&&(this._startX=t,this._startY=e,this._lastX=t,this._lastY=e,-1===i?(this.isPointSelected=!1,this.activeProbePoint=null,"normal"===this.mode&&(this.isMoveBox=!0)):(this.isPointSelected=!0,this.activeProbePoint=i,this.isMoveBox=!1))},o.prototype.onMoveHandler=function(t,e,r){if(this.isPointSelected||this.isMoveBox){var i=this.probePoints.slice();if(this.isPointSelected){var n=this.activeProbePoint;void 0!==r&&(n=r),i="normal"===this.mode?this._movePointNormal(i,n,t,e):this._movePointFree(i,n,t,e),this.probePoints=i.slice(),this.checkRectConvexity(this.probePoints)?(this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor):(this.lineColor=this.invalidLineColor,this.firstPointColor=this.invalidFirstPointColor)}else if(this.isMoveBox){var o=t-this._lastX,s=e-this._lastY;if(0==o&&0==s)return;i=this._moveBox(i,o,s),this.probePoints=i.slice()}var a=this.calcMidpoint(this.probePoints);this.probePoints=this.probePoints.slice(0,8).concat(a),this.midpoints=a,this._lastX=t,this._lastY=e}},o.prototype.onEndHandler=function(t,e){this.lineColor=this.defaultLineColor,this.firstPointColor=this.defaultFirstPointColor;var r=this._startX,i=this._startY;if(this._startX=0,this._startY=0,this._lastX=t,this._lastY=e,this.isPointSelected||this.isMoveBox){this.isPointSelected=!1,this.isMoveBox=!1,this.activeProbePoint=null;var n=this.checkRectConvexity(this.probePoints);if(r===t&&i===e||!n)return this.probePoints=this.vertexes.slice().concat(this.midpoints),void(this.slopeRatio=this.calcSlopeRatio(this.probePoints).slice(0,4));this.vertexes=this.probePoints.slice(0,8),this.midpoints=this.probePoints.slice(8,16)}},o.prototype._checkEdge=function(t,e){return 0<=t&&t<=this.width&&0<=e&&e<this.height},o.prototype._movePointNormal=function(t,e,r,i){r=Math.max(0,Math.min(this.width,r)),i=Math.max(0,Math.min(this.height,i));var n=0,o=0;if(this.keepAspectRatio){var s=this._getMaxPoint(),a=s.minX,h=s.maxX,u=s.minY,l=s.maxY,c=this.checkPointPosition(e),d=(h-a)/(l-u);0===d||d===1/0||d===-1/0||isNaN(d)?d=this._lastWhr:this._lastWhr=d,o=n=0;var p="width";if(e<4){if(n=r-t[2*e],o=i-t[2*e+1],0===n||0===o)return t;p="width"}else{var _=e-4;if("e"===c?(e=(1+_)%4,p="width"):"s"===c?(e=_,p="height"):"w"===c?(e=_,p="width"):"n"===c&&(e=(1+_)%4,p="height"),n=r-t[2*_],o=i-t[2*_+1],0===n||0===o)return t}"height"===p?(n=o*d,"ne"!==c&&"sw"!==c&&"n"!==c&&"w"!==c||(n=-n)):(o=n/d,"ne"!==c&&"sw"!==c&&"n"!==c&&"w"!==c||(o=-o));var g=t[2*e]+n,f=t[2*e+1]+o;g<0?(n=0-t[2*e],o=0):g>this.width?(n=this.width-t[2*e],o=0):f<0?(o=0-t[2*e+1],n=0):f>this.height&&(o=this.height-t[2*e+1],n=0),t[2*e]+=n,t[2*e+1]+=o,v=(e+1)%4,m=(e+3)%4,e%2?(t[2*v]+=n,t[2*m+1]+=o):(t[2*v+1]+=o,t[2*m]+=n)}else if(e<4){if(n=r-t[2*e],o=i-t[2*e+1],0===n&&0===o)return t;t[2*e]=r,t[2*e+1]=i;var v=(e+1)%4,m=(e+3)%4;e%2?(t[2*v]=r,t[2*m+1]=i):(t[2*v+1]=i,t[2*m]=r)}else{var E=e-4,y=this.slopeRatio[E%4];0===y?(t[(2*E+3)%8]=i,t[(2*E+1)%8]=i):y!==1/0&&y!==-1/0||(t[(2*E+2)%8]=r,t[(2*E+0)%8]=r)}return t},o.prototype._movePointFree=function(t,e,r,i){if(r=Math.max(0,Math.min(this.width,r)),i=Math.max(0,Math.min(this.height,i)),e<4){var n=r-t[2*e],o=i-t[2*e+1];if(0==n&&0==o)return t;t[2*e]=r,t[2*e+1]=i}return t},o.prototype._moveBox=function(t,e,r){if("normal"===this.mode){var i=Math.min(t[0],t[2],t[4],t[6]),n=Math.max(t[0],t[2],t[4],t[6]),o=Math.min(t[1],t[3],t[5],t[7]),s=Math.max(t[1],t[3],t[5],t[7]);i+e<0&&(e=-i),n+e>this.width&&(e=this.width-n),o+r<0&&(r=-o),s+r>this.height&&(r=this.height-s);for(var a=0;a<4;a++)t[2*a]+=e,t[2*a+1]+=r}return t},o.prototype._isPointOnBox=function(t,e){if("normal"!==this.mode)return!1;var r=this._getMaxPoint(),i=r.minX,n=r.maxX,o=r.minY,s=r.maxY;return i<=t&&t<=n&&o<=e&&e<=s},o.prototype.isBoxSelected=function(t,e){var r=this._isPointOnBox(t,e),i=this.isCtrlPointSelected(t,e);return null!==i?i:r?-1:null},o.prototype.isCtrlPointSelected=function(t,e){var r=this.sensorRadius/this.zoom,i=8;"free"===this.mode&&(i=4);for(var n=0;n<i;n++){var o=this.probePoints[2*n],s=this.probePoints[2*n+1];if(t<=o+r&&o-r<=t&&e<=s+r&&s-r<=e)return n}return null},o.prototype.checkRectConvexity=function(t){var e=(t[6]-t[0])*(t[3]-t[1])-(t[7]-t[1])*(t[2]-t[0]),r=(t[0]-t[2])*(t[5]-t[3])-(t[1]-t[3])*(t[4]-t[2]),i=(t[2]-t[4])*(t[7]-t[5])-(t[3]-t[5])*(t[6]-t[4]),n=(t[4]-t[6])*(t[1]-t[7])-(t[5]-t[7])*(t[0]-t[6]);if(e*r*i*n<0)return!1;var o=t.slice().concat(t.slice(0,2));if(this.slopeRatio.length)for(var s=0;s<2;s++)if(this.slopeRatio[s]!==this.slopeRatio[s+2]&&this.calcIntersection(o.slice(2*s,2*s+2),o.slice(2*s+2,2*s+4),o.slice(2*s+4,2*s+6),o.slice(2*s+6,2*s+8)))return!1;return 0<e*r*i*n},o.prototype.calcMidpoint=function(t){for(var e=t.slice(0,8).concat(t[0],t[1]),r=[],i=0;i<4;i++){var n=(e[2*i]+e[2*i+2])/2,o=(e[2*i+1]+e[2*i+3])/2;r.push(n,o)}return r},o.prototype.calcSlopeRatio=function(t){for(var e=[],r=null,i=t.slice(0,8).concat(t[0],t[1]),n=0;n<4;n++)r=i[2*n+3]-i[2*n+1]==0&&i[2*n+2]-i[2*n]==0?0:(i[2*n+3]-i[2*n+1])/(i[2*n+2]-i[2*n]),e.push(r);return e},o.prototype.calcIntersection=function(t,e,r,i){if(this._isRectCross(t,e,r,i)&&this._isLineSegmentCross(t,e,r,i)){var n,o=void 0,s=(i[0]-r[0])*(t[1]-e[1])-(e[0]-t[0])*(r[1]-i[1]),o=(t[1]-r[1])*(e[0]-t[0])*(i[0]-r[0])+r[0]*(i[1]-r[1])*(e[0]-t[0])-t[0]*(e[1]-t[1])*(i[0]-r[0]);if(0==s||0===o){var a=this._getLine(t,e),h=this._getLine(r,i),u=a[0],l=a[1],c=h[0],d=h[1];if(l[0]===c[0]&&l[1]===c[1])return l;if(u[0]===d[0]&&u[1]===d[1])return u;if(this._isOnLine(l,h)&&this._isOnLine(c,a))return[c,l];if(this._isOnLine(u,h)&&this._isOnLine(d,a))return[u,d];if(this._isOnLine(u,h)&&this._isOnLine(l,h))return[u,l];if(this._isOnLine(c,h)&&this._isOnLine(d,h))return[c,d]}return n=o/s,s=(t[0]-e[0])*(i[1]-r[1])-(e[1]-t[1])*(r[0]-i[0]),[n,(o=e[1]*(t[0]-e[0])*(i[1]-r[1])+(i[0]-e[0])*(i[1]-r[1])*(t[1]-e[1])-i[1]*(r[0]-i[0])*(e[1]-t[1]))/s]}return!1},o.prototype._getLine=function(t,e){return t[0]===e[0]?t[1]<e[1]?[t,e]:[e,t]:t[0]<e[0]?[t,e]:[e,t]},o.prototype._isOnLine=function(t,e){return e[0][0]===e[1][0]?t[1]>=e[0][1]&&t[1]<=e[1][1]:t[0]>=e[0][0]&&t[0]<=e[1][0]},o.prototype._isRectCross=function(t,e,r,i){var n=Math.min,o=Math.max;return n(t[0],e[0])<=o(r[0],i[0])&&n(r[0],i[0])<=o(t[0],e[0])&&n(t[1],e[1])<=o(r[1],i[1])&&n(r[1],i[1])<=o(t[1],e[1])},o.prototype._isLineSegmentCross=function(t,e,r,i){var n=t[0]*(r[1]-e[1])+e[0]*(t[1]-r[1])+r[0]*(e[1]-t[1]),o=t[0]*(i[1]-e[1])+e[0]*(t[1]-i[1])+i[0]*(e[1]-t[1]);return!(0<=(n^o)&&0!==n&&0!==o||0<=((n=r[0]*(t[1]-i[1])+i[0]*(r[1]-t[1])+t[0]*(i[1]-r[1]))^(o=r[0]*(e[1]-i[1])+i[0]*(r[1]-e[1])+e[0]*(i[1]-r[1])))&&0!==n&&0!==o)},o);function o(t){this.uid=null,this.mode="normal",this.vertexes=[],this.midpoints=[],this.probePoints=[],this.slopeRatio=[],this.isCrop=!1,this.ctrlRadius=4,this.sensorRadius=4,this.defaultLineColor="rgba(0,0,0,1)",this.defaultFirstPointColor="rgba(255,0,0,1)",this.invalidLineColor="rgba(255,0,0,1)",this.invalidFirstPointColor="rgba(0,0,0,1)",this.lineColor="rgba(0,0,0,1)",this.firstPointColor="rgba(0,0,0,1)",this.pointFillColor="rgba(255,255,255,0)",this.lineWidth=1,this.dashLine=[4,2],this.isPointSelected=!1,this.activeProbePoint=null,this.moveLeft=0,this.moveTop=0,this.isMoveBox=!1,this.width=0,this.height=0,this.type="bottomRight",this.keepAspectRatio=!1,this.aspectRatio=0,this._startX=null,this._startY=null,this._lastX=null,this._lastY=null,this._lastWhr=1,this.zoom=1,this.uid=i.uid(11),this.vertexes=t.vertexes,this.width=t.width,this.height=t.height,this.type=t.type,this.mode=t.mode,this.keepAspectRatio=t.keepAspectRatio,this.aspectRatio=t.aspectRatio,this.zoom=t.zoom,this._initBox()}e.CropBox=n},,function(t,e){var r,i,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var h,u=[],l=!1,c=-1;function d(){l&&h&&(l=!1,h.length?u=h.concat(u):c=-1,u.length&&p())}function p(){if(!l){var t=a(d);l=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new _(t,e)),1!==u.length||l||a(p)},_.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ANNOTATION_NAME=e.DEFAULT_IMAGE_TABLE_NAME=e.DEFAULT_DOCUMENT_TABLE_NAME=e.DEFAULT_DATABASE_NAME=e.PAGE_SPACE=e.SHOW_LATEST_PAGE=e.DEFAULT_CROP_LINE_WIDTH=e.CROP_DASH_LINE=e.POINT_FILL_COLOR=e.INVALID_FIRST_POINT_COLOR=e.DEFAULT_FIRST_POINT_COLOR=e.INVALID_CROP_LINE_COLOR=e.DEFAULT_CROP_LINE_COLOR=e.DEFAULT_CANVAS_BACKGROUND=e.USE_RELATIVE_ZOOM=e.KEEP_ZOOM=e.DEFAULT_MOUSE_SHAPE=e.DEFAULT_FIT_TYPE=e.MIN_ZOOM=e.MAX_ZOOM=e.SCROLL_MIN_ZOOM=e.SCROLL_MAX_ZOOM=e.ANIMATION_FPS=e.SPEED_DELTA=e.LOCKING=e.ANIMATION_DURATION=e.SNAPING=e.PAGING=e.BOUNCING=e.SCROLLY=e.SCROLLX=e.ANIMATING=e.ZOOMING=e.ZOOM_OUT_DELTA=e.ZOOM_IN_DELTA=e.IS_CLICK_TO_ZOOM=void 0,e.IS_CLICK_TO_ZOOM=!1,e.ZOOM_IN_DELTA=1.2,e.ZOOM_OUT_DELTA=1.2,e.ZOOMING=!0,e.ANIMATING=!1,e.SCROLLX=!0,e.SCROLLY=!0,e.BOUNCING=!1,e.PAGING=!1,e.SNAPING=!1,e.ANIMATION_DURATION=300,e.LOCKING=!1,e.SPEED_DELTA=1,e.ANIMATION_FPS=60,e.SCROLL_MAX_ZOOM=8,e.SCROLL_MIN_ZOOM=.1,e.MAX_ZOOM=8,e.MIN_ZOOM=.1,e.DEFAULT_FIT_TYPE="window",e.DEFAULT_MOUSE_SHAPE="default",e.KEEP_ZOOM=!1,e.USE_RELATIVE_ZOOM=!0,e.DEFAULT_CANVAS_BACKGROUND="rgba(67,66,70,1)",e.DEFAULT_CROP_LINE_COLOR="rgba(0,0,0,1)",e.INVALID_CROP_LINE_COLOR="rgba(255,0,0,1)",e.DEFAULT_FIRST_POINT_COLOR="rgba(255,0,0,1)",e.INVALID_FIRST_POINT_COLOR="rgba(255,0,0,1)",e.POINT_FILL_COLOR="rgba(255,255,255,0)",e.CROP_DASH_LINE=[0,0],e.DEFAULT_CROP_LINE_WIDTH=1,e.SHOW_LATEST_PAGE=!0,e.PAGE_SPACE=0,e.DEFAULT_DATABASE_NAME="dvsDatabase",e.DEFAULT_DOCUMENT_TABLE_NAME="dvsDocument",e.DEFAULT_IMAGE_TABLE_NAME="dvsImage",e.DEFAULT_ANNOTATION_NAME="dvsAnnotation"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Page=void 0;var i=r(4),n=r(37),o=(s.prototype.setBorder=function(t,e,r){this.style.borderWidth=t,e&&(this.style.borderType=e),r&&(this.style.borderColor=r)},s.prototype.setSize=function(t,e){this.style.width=t,this.style.height=e},s.prototype.setPosition=function(t,e){this.style.left=t,this.style.top=e},s.prototype.clearSelectionBoxes=function(){this.selectionBoxes=[]},s.prototype.pushSelectionBox=function(t){this.selectionBoxes.push(t)},s.prototype.setNaturalSize=function(t,e){this.naturalWidth=t,this.naturalHeight=e,this.cropManager.setPageSize(t,e)},s);function s(t){this.visible=!1,this.children=[],this.redoStack=[],this.undoStack=[],this.matrixStack=[],this.style={left:0,top:0,width:0,height:0,borderColor:"#ffffff",borderType:"solid",borderWidth:0},this.naturalWidth=0,this.naturalHeight=0,this.wrapLeft=0,this.wrapTop=0,this.wrapWidth=0,this.wrapHeight=0,this.rotateAngle=0,this.flipCount=0,this.flipCountX=0,this.flipCountY=0,this.selectionBoxes=[],this.cropManager=null,this.editor2d=null,this.uid=t.uid,this.naturalWidth=t.naturalWidth,this.naturalHeight=t.naturalHeight,this.cropManager=new i.CropManager(this.naturalWidth,this.naturalHeight),this.editor2d=new n.Editor2d}e.Page=o},,,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DVS=void 0;var i=r(16);window.Promise||(window.Promise=i);var n=r(19);Object.defineProperty(e,"DVS",{enumerable:!0,get:function(){return n.DVS}}),window.Dynamsoft=window.Dynamsoft||{},window.Dynamsoft.ViewModel=n.DVS},function(e,t,r){(function(ot,H,u){var t;t=function(){var t,e,r;return function o(s,a,h){function u(r,t){if(!a[r]){if(!s[r]){var e="function"==typeof _dereq_&&_dereq_;if(!t&&e)return e(r,!0);if(l)return l(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var n=a[r]={exports:{}};s[r][0].call(n.exports,function(t){var e=s[r][1][t];return u(e||t)},n,n.exports,o,s,a,h)}return a[r].exports}for(var l="function"==typeof _dereq_&&_dereq_,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,e,r){"use strict";e.exports=function(t){var i=t._SomePromiseArray;function e(t){var e=new i(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}t.any=e,t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,r){"use strict";var i;try{throw new Error}catch(t){i=t}var n=t("./schedule"),o=t("./queue");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=n}function a(t){for(;0<t.length();)!function(t){var e=t.shift();{var r,i;"function"!=typeof e?e._settlePromises():(r=t.shift(),i=t.shift(),e.call(r,i))}}(t)}s.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(t,e){e?(ot.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),ot.exit(2)):this.throwLater(t)},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.prototype.invokeLater=function(t,e,r){this._lateQueue.push(t,e,r),this._queueTick()},s.prototype.invoke=function(t,e,r){this._normalQueue.push(t,e,r),this._queueTick()},s.prototype.settlePromises=function(t){this._normalQueue._pushOne(t),this._queueTick()},s.prototype._drainQueues=function(){a(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,a(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},e.exports=s,e.exports.firstLineError=i},{"./queue":26,"./schedule":29}],3:[function(t,e,r){"use strict";e.exports=function(o,s,a,h){function r(t,e){this._reject(e)}function u(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(r,r,null,this,t)}function l(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)}function c(t,e){e.promiseRejectionQueued||this._reject(t)}var d=!1;o.prototype.bind=function(t){d||(d=!0,o.prototype._propagateFrom=h.propagateFromFunction(),o.prototype._boundValue=h.boundValueFunction());var e=a(t),r=new o(s);r._propagateFrom(this,1);var i,n=this._target();return r._setBoundTo(e),e instanceof o?(i={promiseRejectionQueued:!1,promise:r,target:n,bindingPromise:e},n._then(s,u,void 0,r,i),e._then(l,c,void 0,r,i),r._setOnCancel(e)):r._resolveCallback(n),r},o.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},o.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},o.bind=function(t,e){return o.resolve(e).bind(t)}}},{}],4:[function(t,e,r){"use strict";var i;"undefined"!=typeof Promise&&(i=Promise);var n=t("./promise")();n.noConflict=function(){try{Promise===n&&(Promise=i)}catch(t){}return n},e.exports=n},{"./promise":22}],5:[function(t,e,r){"use strict";var i,n,o=Object.create;o&&(i=o(null),n=o(null),i[" size"]=n[" size"]=0),e.exports=function(n){var o=t("./util"),i=o.canEvaluate;o.isIdentifier;function r(t){return function(t,e){var r;if(null!=t&&(r=t[e]),"function"==typeof r)return r;var i="Object "+o.classString(t)+" has no method '"+o.toString(e)+"'";throw new n.TypeError(i)}(t,this.pop()).apply(t,this)}function s(t){return t[this]}function a(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}n.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},n.prototype.get=function(t){var e,r;return r="number"==typeof t?a:i&&null!==(e=(void 0)(t))?e:s,this._then(r,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(h,t,e){"use strict";t.exports=function(t,e,r,i){var n=h("./util"),o=n.tryCatch,s=n.errorObj,a=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var r=t._cancellationParent;if(null==r||!r._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=r}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),a.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(t,e){var r;if(n.isArray(t))for(var i=0;i<t.length;++i)this._doInvokeOnCancel(t[i],e);else void 0!==t&&("function"==typeof t?e||(r=o(t).call(this._boundValue()))===s&&(this._attachExtraTrace(r.e),a.throwLater(r.e)):t._resultCancelled(this))},t.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),a.invoke(this._doInvokeOnCancel,this,t)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,r){"use strict";e.exports=function(c){var d=t("./util"),p=t("./es5").keys,_=d.tryCatch,g=d.errorObj;return function(h,u,l){return function(t){var e=l._boundValue();t:for(var r=0;r<h.length;++r){var i=h[r];if(i===Error||null!=i&&i.prototype instanceof Error){if(t instanceof i)return _(u).call(e,t)}else if("function"==typeof i){var n=_(i).call(e,t);if(n===g)return n;if(n)return _(u).call(e,t)}else if(d.isObject(t)){for(var o=p(i),s=0;s<o.length;++s){var a=o[s];if(i[a]!=t[a])continue t}return _(u).call(e,t)}}return c}}}},{"./es5":13,"./util":36}],8:[function(t,e,r){"use strict";e.exports=function(o){var s=!1,r=[];function a(){this._trace=new a.CapturedTrace(h())}function h(){var t=r.length-1;if(0<=t)return r[t]}return o.prototype._promiseCreated=function(){},o.prototype._pushContext=function(){},o.prototype._popContext=function(){return null},o._peekContext=o.prototype._peekContext=function(){},a.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},a.prototype._popContext=function(){if(void 0===this._trace)return null;var t=r.pop(),e=t._promiseCreated;return t._promiseCreated=null,e},a.CapturedTrace=null,a.create=function(){if(s)return new a},a.deactivateLongStackTraces=function(){},a.activateLongStackTraces=function(){var t=o.prototype._pushContext,e=o.prototype._popContext,r=o._peekContext,i=o.prototype._peekContext,n=o.prototype._promiseCreated;a.deactivateLongStackTraces=function(){o.prototype._pushContext=t,o.prototype._popContext=e,o._peekContext=r,o.prototype._peekContext=i,o.prototype._promiseCreated=n,s=!1},s=!0,o.prototype._pushContext=a.prototype._pushContext,o.prototype._popContext=a.prototype._popContext,o._peekContext=o.prototype._peekContext=h,o.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},a}},{}],9:[function(nt,t,e){"use strict";t.exports=function(s,i,n,o){var r,a,h,t,e,u=s._async,l=nt("./errors").Warning,c=nt("./util"),d=nt("./es5"),p=c.canAttachTrace,_=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,g=/\((?:timers\.js):\d+:\d+\)/,f=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,m=null,E=!1,y=!(0==c.env("BLUEBIRD_DEBUG")),b=!(0==c.env("BLUEBIRD_WARNINGS")||!y&&!c.env("BLUEBIRD_WARNINGS")),T=!(0==c.env("BLUEBIRD_LONG_STACK_TRACES")||!y&&!c.env("BLUEBIRD_LONG_STACK_TRACES")),S=0!=c.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(b||!!c.env("BLUEBIRD_W_FORGOTTEN_RETURN"));function w(){for(var t=0;t<e.length;++t)e[t]._notifyUnhandledRejection();M()}function M(){e.length=0}e=[],t=function(t){e.push(t),setTimeout(w,1)},d.defineProperty(s,"_unhandledRejectionCheck",{value:w}),d.defineProperty(s,"_unhandledRejectionClear",{value:M}),s.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},s.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),t(this))},s.prototype._notifyUnhandledRejectionIsHandled=function(){Z("rejectionHandled",r,void 0,this)},s.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},s.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},s.prototype._notifyUnhandledRejection=function(){var t;this._isRejectionUnhandled()&&(t=this._settledValue(),this._setUnhandledRejectionIsNotified(),Z("unhandledRejection",a,t,this))},s.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},s.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},s.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},s.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},s.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},s.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},s.prototype._warn=function(t,e,r){return z(t,e,r||this)},s.onPossiblyUnhandledRejection=function(t){var e=s._getContext();a=c.contextBind(e,t)},s.onUnhandledRejectionHandled=function(t){var e=s._getContext();r=c.contextBind(e,t)};var P=function(){};s.longStackTraces=function(){if(u.haveItemsQueued()&&!it.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");var t,e,r;!it.longStackTraces&&Q()&&(t=s.prototype._captureStackTrace,e=s.prototype._attachExtraTrace,r=s.prototype._dereferenceTrace,it.longStackTraces=!0,P=function(){if(u.haveItemsQueued()&&!it.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");s.prototype._captureStackTrace=t,s.prototype._attachExtraTrace=e,s.prototype._dereferenceTrace=r,i.deactivateLongStackTraces(),it.longStackTraces=!1},s.prototype._captureStackTrace=V,s.prototype._attachExtraTrace=H,s.prototype._dereferenceTrace=W,i.activateLongStackTraces())},s.hasLongStackTraces=function(){return it.longStackTraces&&Q()};var C={unhandledrejection:{before:function(){var t=c.global.onunhandledrejection;return c.global.onunhandledrejection=null,t},after:function(t){c.global.onunhandledrejection=t}},rejectionhandled:{before:function(){var t=c.global.onrejectionhandled;return c.global.onrejectionhandled=null,t},after:function(t){c.global.onrejectionhandled=t}}},A=function(){function i(t,e){if(!t)return!c.global.dispatchEvent(e);var r;try{return r=t.before(),!c.global.dispatchEvent(e)}finally{t.after(r)}}try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return c.global.dispatchEvent(t),function(t,e){t=t.toLowerCase();var r=new CustomEvent(t,{detail:e,cancelable:!0});return d.defineProperty(r,"promise",{value:e.promise}),d.defineProperty(r,"reason",{value:e.reason}),i(C[t],r)}}if("function"!=typeof Event)return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),c.global.dispatchEvent(t),function(t,e){t=t.toLowerCase();var r=document.createEvent("CustomEvent");return r.initCustomEvent(t,!1,!0,e),i(C[t],r)};var t=new Event("CustomEvent");return c.global.dispatchEvent(t),function(t,e){t=t.toLowerCase();var r=new Event(t,{cancelable:!0});return r.detail=e,d.defineProperty(r,"promise",{value:e.promise}),d.defineProperty(r,"reason",{value:e.reason}),i(C[t],r)}}catch(t){}return function(){return!1}}(),I=c.isNode?function(){return ot.emit.apply(ot,arguments)}:c.global?function(t){var e="on"+t.toLowerCase(),r=c.global[e];return!!r&&(r.apply(c.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function O(t,e){return{promise:e}}var R={promiseCreated:O,promiseFulfilled:O,promiseRejected:O,promiseResolved:O,promiseCancelled:O,promiseChained:function(t,e,r){return{promise:e,child:r}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,r){return{reason:e,promise:r}},rejectionHandled:O},D=function(t){var e=!1;try{e=I.apply(null,arguments)}catch(t){u.throwLater(t),e=!0}var r=!1;try{r=A(t,R[t].apply(null,arguments))}catch(t){u.throwLater(t),r=!0}return r||e};function x(){return!1}function L(t,e,r){var i=this;try{t(e,r,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+c.toString(t));i._attachCancellationCallback(t)})}catch(t){return t}}function N(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?c.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function k(){return this._onCancelField}function B(t){this._onCancelField=t}function F(){this._cancellationParent=void 0,this._onCancelField=void 0}function U(t,e){var r;0!=(1&e)&&(void 0===(r=(this._cancellationParent=t)._branchesRemainingToCancel)&&(r=0),t._branchesRemainingToCancel=r+1),0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}s.config=function(t){var e,r;if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?s.longStackTraces():!t.longStackTraces&&s.hasLongStackTraces()&&P()),"warnings"in t&&(e=t.warnings,it.warnings=!!e,S=it.warnings,c.isObject(e)&&"wForgottenReturn"in e&&(S=!!e.wForgottenReturn)),"cancellation"in t&&t.cancellation&&!it.cancellation){if(u.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");s.prototype._clearCancellationData=F,s.prototype._propagateFrom=U,s.prototype._onCancel=k,s.prototype._setOnCancel=B,s.prototype._attachCancellationCallback=N,s.prototype._execute=L,j=U,it.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!it.monitoring?(it.monitoring=!0,s.prototype._fireEvent=D):!t.monitoring&&it.monitoring&&(it.monitoring=!1,s.prototype._fireEvent=x)),"asyncHooks"in t&&c.nodeSupportsAsyncResource&&(it.asyncHooks!==(r=!!t.asyncHooks)&&((it.asyncHooks=r)?n:o)()),s},s.prototype._fireEvent=x,s.prototype._execute=function(t,e,r){try{t(e,r)}catch(t){return t}},s.prototype._onCancel=function(){},s.prototype._setOnCancel=function(t){},s.prototype._attachCancellationCallback=function(t){},s.prototype._captureStackTrace=function(){},s.prototype._attachExtraTrace=function(){},s.prototype._dereferenceTrace=function(){},s.prototype._clearCancellationData=function(){},s.prototype._propagateFrom=function(t,e){};var j=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function G(){var t=this._boundTo;return void 0!==t&&t instanceof s?t.isFulfilled()?t.value():void 0:t}function V(){this._trace=new et(this._peekContext())}function H(t,e){var r,i;p(t)&&(void 0!==(r=this._trace)&&e&&(r=r._parent),void 0!==r?r.attachExtraTrace(t):t.__stackCleaned__||(i=K(t),c.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),c.notEnumerableProp(t,"__stackCleaned__",!0)))}function W(){this._trace=void 0}function z(t,e,r){var i,n,o;it.warnings&&(i=new l(t),e?r._attachExtraTrace(i):it.longStackTraces&&(n=s._peekContext())?n.attachExtraTrace(i):(o=K(i),i.stack=o.message+"\n"+o.stack.join("\n")),D("warning",i)||X(i,"",!0))}function Y(t){for(var e=[],r=0;r<t.length;++r){var i=t[r],n="    (No stack trace)"===i||v.test(i),o=n&&$(i);n&&!o&&(E&&" "!==i.charAt(0)&&(i="    "+i),e.push(i))}return e}function K(t){var e=t.stack,r=t.toString(),e="string"==typeof e&&0<e.length?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),r=0;r<e.length;++r){var i=e[r];if("    (No stack trace)"===i||v.test(i))break}return 0<r&&"SyntaxError"!=t.name&&(e=e.slice(r)),e}(t):["    (No stack trace)"];return{message:r,stack:"SyntaxError"==t.name?e:Y(e)}}function X(t,e,r){var i,n;"undefined"!=typeof console&&(n=c.isObject(t)?(i=t.stack,e+m(i,t)):e+String(t),"function"==typeof h&&h(n,r))}function Z(t,e,r,i){var n=!1;try{"function"==typeof e&&(n=!0,"rejectionHandled"===t?e(i):e(r,i))}catch(t){u.throwLater(t)}"unhandledRejection"===t?D(t,r,i)||n||X(r,"Unhandled rejection "):D(t,i)}function q(t){if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():c.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{var e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}function Q(){return"function"==typeof rt}var $=function(){return!1},J=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function tt(t){var e=t.match(J);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function et(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);rt(this,et),32<e&&this.uncycle()}c.inherits(et,Error),(i.CapturedTrace=et).prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],r={},i=0,n=this;void 0!==n;++i)e.push(n),n=n._parent;for(i=(t=this._length=i)-1;0<=i;--i){var o=e[i].stack;void 0===r[o]&&(r[o]=i)}for(i=0;i<t;++i){var s=r[e[i].stack];if(void 0!==s&&s!==i){0<s&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[i]._parent=void 0,e[i]._length=1;var a=0<i?e[i-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var h=a._length+1,u=i-2;0<=u;--u)e[u]._length=h,h++;return}}}},et.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=K(t),r=e.message,i=[e.stack],n=this;void 0!==n;)i.push(Y(n.stack.split("\n"))),n=n._parent;!function(t){for(var e=t[0],r=1;r<t.length;++r){for(var i=t[r],n=e.length-1,o=e[n],s=-1,a=i.length-1;0<=a;--a)if(i[a]===o){s=a;break}for(a=s;0<=a;--a){var h=i[a];if(e[n]!==h)break;e.pop(),n--}e=i}}(i),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(i),c.notEnumerableProp(t,"stack",function(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\n");return r<e.length&&(e[r]=e[r].join("\n")),t+"\n"+e.join("\n")}(r,i)),c.notEnumerableProp(t,"__stackCleaned__",!0)}};var rt=function(){function t(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():q(e)}var e=/^\s*at\s*/;if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=e,m=t;var r=Error.captureStackTrace;return $=function(t){return _.test(t)},function(t,e){Error.stackTraceLimit+=6,r(t,e),Error.stackTraceLimit-=6}}var i,n=new Error;if("string"==typeof n.stack&&0<=n.stack.split("\n")[0].indexOf("stackDetection@"))return v=/@/,m=t,E=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){i="stack"in t}return"stack"in n||!i||"number"!=typeof Error.stackTraceLimit?(m=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?q(e):e.toString()},null):(v=e,m=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(h=function(t){},c.isNode&&ot.stderr.isTTY?h=function(t,e){}:c.isNode||"string"!=typeof(new Error).stack||(h=function(t,e){}));var it={warnings:b,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return T&&s.longStackTraces(),{asyncHooks:function(){return it.asyncHooks},longStackTraces:function(){return it.longStackTraces},warnings:function(){return it.warnings},cancellation:function(){return it.cancellation},monitoring:function(){return it.monitoring},propagateFromFunction:function(){return j},boundValueFunction:function(){return G},checkForgottenReturns:function(t,e,r,i,n){if(void 0===t&&null!==e&&S){if(void 0!==n&&n._returnedNonUndefined())return;if(0==(65535&i._bitField))return;r&&(r+=" ");var o="",s="";if(e._trace){for(var a=e._trace.stack.split("\n"),h=Y(a),u=h.length-1;0<=u;--u){var l=h[u];if(!g.test(l)){var c=l.match(f);c&&(o="at "+c[1]+":"+c[2]+":"+c[3]+" ");break}}if(0<h.length)for(var d=h[0],u=0;u<a.length;++u)if(a[u]===d){0<u&&(s="\n"+a[u-1]);break}}var p="a promise was created in a "+r+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;i._warn(p,!0,e)}},setBounds:function(t,e){if(Q()){for(var r,i,n=(t.stack||"").split("\n"),o=(e.stack||"").split("\n"),s=-1,a=-1,h=0;h<n.length;++h){if(u=tt(n[h])){r=u.fileName,s=u.line;break}}for(var u,h=0;h<o.length;++h){if(u=tt(o[h])){i=u.fileName,a=u.line;break}}s<0||a<0||!r||!i||r!==i||a<=s||($=function(t){if(_.test(t))return!0;var e=tt(t);return!!(e&&e.fileName===r&&s<=e.line&&e.line<=a)})}},warn:z,deprecated:function(t,e){var r=t+" is deprecated and will be removed in a future version.";return e&&(r+=" Use "+e+" instead."),z(r)},CapturedTrace:et,fireDomEvent:A,fireGlobalEvent:I}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,r){"use strict";e.exports=function(r){function i(){return this.value}function n(){throw this.reason}r.prototype.return=r.prototype.thenReturn=function(t){return t instanceof r&&t.suppressUnhandledRejections(),this._then(i,void 0,void 0,{value:t},void 0)},r.prototype.throw=r.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},r.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},r.prototype.catchReturn=function(t){if(arguments.length<=1)return t instanceof r&&t.suppressUnhandledRejections(),this._then(void 0,i,void 0,{value:t},void 0);var e=arguments[1];e instanceof r&&e.suppressUnhandledRejections();return this.caught(t,function(){return e})}}},{}],11:[function(t,e,r){"use strict";e.exports=function(t,r){var i=t.reduce,e=t.all;function n(){return e(this)}t.prototype.each=function(t){return i(this,t,r,0)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,r,r)},t.each=function(t,e){return i(t,e,r,0)._then(n,void 0,void 0,t,void 0)},t.mapSeries=function(t,e){return i(t,e,r,r)}}},{}],12:[function(t,e,r){"use strict";var i,n,o=t("./es5"),s=o.freeze,a=t("./util"),h=a.inherits,u=a.notEnumerableProp;function l(e,r){function i(t){if(!(this instanceof i))return new i(t);u(this,"message","string"==typeof t?t:r),u(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return h(i,Error),i}var c=l("Warning","warning"),d=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),_=l("AggregateError","aggregate error");try{i=TypeError,n=RangeError}catch(t){i=l("TypeError","type error"),n=l("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),f=0;f<g.length;++f)"function"==typeof Array.prototype[g[f]]&&(_.prototype[g[f]]=Array.prototype[g[f]]);o.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var v=0;function m(t){if(!(this instanceof m))return new m(t);u(this,"name","OperationalError"),u(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(u(this,"message",t.message),u(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}_.prototype.toString=function(){var t=Array(4*v+1).join(" "),e="\n"+t+"AggregateError of:\n";v++,t=Array(4*v+1).join(" ");for(var r=0;r<this.length;++r){for(var i=this[r]===this?"[Circular AggregateError]":this[r]+"",n=i.split("\n"),o=0;o<n.length;++o)n[o]=t+n[o];e+=(i=n.join("\n"))+"\n"}return v--,e},h(m,Error);var E=Error.__BluebirdErrorTypes__;E||(E=s({CancellationError:d,TimeoutError:p,OperationalError:m,RejectionError:m,AggregateError:_}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:E,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:i,RangeError:n,CancellationError:E.CancellationError,OperationalError:E.OperationalError,TimeoutError:E.TimeoutError,AggregateError:E.AggregateError,Warning:c}},{"./es5":13,"./util":36}],13:[function(t,e,r){var i,n,o,s,a=function(){"use strict";return void 0===this}();a?e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:a,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}}:(i={}.hasOwnProperty,n={}.toString,o={}.constructor.prototype,s=function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e},e.exports={isArray:function(t){try{return"[object Array]"===n.call(t)}catch(t){return!1}},keys:s,names:s,defineProperty:function(t,e,r){return t[e]=r.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return o}},isES5:a,propertyIsWritable:function(){return!0}})},{}],14:[function(t,e,r){"use strict";e.exports=function(t,i){var n=t.map;t.prototype.filter=function(t,e){return n(this,t,e,i)},t.filter=function(t,e,r){return n(t,e,r,i)}}},{}],15:[function(t,e,r){"use strict";e.exports=function(a,s,h){var u=t("./util"),l=a.CancellationError,c=u.errorObj,d=t("./catch_filter")(h);function n(t,e,r){this.promise=t,this.type=e,this.handler=r,this.called=!1,this.cancelPromise=null}function p(t){this.finallyHandler=t}function _(t,e){return null!=t.cancelPromise&&(1<arguments.length?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,1)}function g(){return v.call(this,this.promise._target()._settledValue())}function f(t){if(!_(this,t))return c.e=t,c}function v(t){var e=this.promise,r=this.handler;if(!this.called){this.called=!0;var i=this.isFinallyHandler()?r.call(e._boundValue()):r.call(e._boundValue(),t);if(i===h)return i;if(void 0!==i){e._setReturnedNonUndefined();var n=s(i,e);if(n instanceof a){if(null!=this.cancelPromise){if(n._isCancelled()){var o=new l("late cancellation observer");return e._attachExtraTrace(o),c.e=o,c}n.isPending()&&n._attachCancellationCallback(new p(this))}return n._then(g,f,void 0,this,void 0)}}}return e.isRejected()?(_(this),c.e=t,c):(_(this),t)}return n.prototype.isFinallyHandler=function(){return 0===this.type},p.prototype._resultCancelled=function(){_(this.finallyHandler)},a.prototype._passThrough=function(t,e,r,i){return"function"!=typeof t?this.then():this._then(r,i,void 0,new n(this,e,t),void 0)},a.prototype.lastly=a.prototype.finally=function(t){return this._passThrough(t,0,v,v)},a.prototype.tap=function(t){return this._passThrough(t,1,v)},a.prototype.tapCatch=function(t){var e=arguments.length;if(1===e)return this._passThrough(t,1,void 0,v);for(var r=new Array(e-1),i=0,n=0;n<e-1;++n){var o=arguments[n];if(!u.isObject(o))return a.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(o)));r[i++]=o}r.length=i;var s=arguments[n];return this._passThrough(d(r,s,this),1,void 0,v)},n}},{"./catch_filter":7,"./util":36}],16:[function(r,t,e){"use strict";t.exports=function(a,i,s,h,t,u){var l=r("./errors").TypeError,e=r("./util"),c=e.errorObj,d=e.tryCatch,p=[];function _(t,e,r,i){var n,o;u.cancellation()?(n=new a(s),o=this._finallyPromise=new a(s),this._promise=n.lastly(function(){return o}),n._captureStackTrace(),n._setOnCancel(this)):(this._promise=new a(s))._captureStackTrace(),this._stack=i,this._generatorFunction=t,this._receiver=e,this._generator=void 0,this._yieldHandlers="function"==typeof r?[r].concat(p):p,this._yieldedPromise=null,this._cancellationPhase=!1}e.inherits(_,t),_.prototype._isResolved=function(){return null===this._promise},_.prototype._cleanup=function(){this._promise=this._generator=null,u.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},_.prototype._promiseCancelled=function(){var t,e;this._isResolved()||(e=void 0!==this._generator.return?(this._promise._pushContext(),d(this._generator.return).call(this._generator,void 0)):(t=new a.CancellationError("generator .return() sentinel"),a.coroutine.returnSentinel=t,this._promise._attachExtraTrace(t),this._promise._pushContext(),d(this._generator.throw).call(this._generator,t)),this._promise._popContext(),this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e))},_.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=d(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},_.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=d(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},_.prototype._resultCancelled=function(){var t;this._yieldedPromise instanceof a&&(t=this._yieldedPromise,this._yieldedPromise=null,t.cancel())},_.prototype.promise=function(){return this._promise},_.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},_.prototype._continue=function(t){var e=this._promise;if(t===c)return this._cleanup(),this._cancellationPhase?e.cancel():e._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?e.cancel():e._resolveCallback(r);var i,n=h(r,this._promise);n instanceof a||null!==(n=function(t,e,r){for(var i=0;i<e.length;++i){r._pushContext();var n=d(e[i])(t);if(r._popContext(),n===c){r._pushContext();var o=a.reject(c.e);return r._popContext(),o}var s=h(n,r);if(s instanceof a)return s}return null}(n,this._yieldHandlers,this._promise))?0==(50397184&(i=(n=n._target())._bitField))?(this._yieldedPromise=n)._proxy(this,null):0!=(33554432&i)?a._async.invoke(this._promiseFulfilled,this,n._value()):0!=(16777216&i)?a._async.invoke(this._promiseRejected,this,n._reason()):this._promiseCancelled():this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},a.coroutine=function(i,t){if("function"!=typeof i)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,o=_,s=(new Error).stack;return function(){var t=i.apply(this,arguments),e=new o(void 0,void 0,n,s),r=e.promise();return e._generator=t,e._promiseFulfilled(void 0),r}},a.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+e.classString(t));p.push(t)},a.spawn=function(t){if(u.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return i("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var e=new _(t,this),r=e.promise();return e._run(a.spawn),r}}},{"./errors":12,"./util":36}],17:[function(s,t,e){"use strict";t.exports=function(t,n,e,r,i){var o=s("./util");o.canEvaluate,o.tryCatch,o.errorObj;t.join=function(){var t,e=arguments.length-1;0<e&&"function"==typeof arguments[e]&&(t=arguments[e]);var r=[].slice.call(arguments);t&&r.pop();var i=new n(r).promise();return void 0!==t?i.spread(t):i}}},{"./util":36}],18:[function(e,t,r){"use strict";t.exports=function(p,t,o,_,a,g){var h=e("./util"),f=h.tryCatch,v=h.errorObj,u=p._async;function s(t,e,r,i){this.constructor$(t),this._promise._captureStackTrace();var n=p._getContext();if(this._callback=h.contextBind(n,e),this._preservedValues=i===a?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],u.invoke(this._asyncInit,this,void 0),h.isArray(t))for(var o=0;o<t.length;++o){var s=t[o];s instanceof p&&s.suppressUnhandledRejections()}}function r(t,e,r,i){if("function"!=typeof e)return o("expecting a function but got "+h.classString(e));var n=0;if(void 0!==r){if("object"!=typeof r||null===r)return p.reject(new TypeError("options argument must be an object but it is "+h.classString(r)));if("number"!=typeof r.concurrency)return p.reject(new TypeError("'concurrency' must be a number but it is "+h.classString(r.concurrency)));n=r.concurrency}return new s(t,e,n="number"==typeof n&&isFinite(n)&&1<=n?n:0,i).promise()}h.inherits(s,t),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,e){var r=this._values,i=this.length(),n=this._preservedValues,o=this._limit;if(e<0){if(r[e=-1*e-1]=t,1<=o&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(1<=o&&this._inFlight>=o)return r[e]=t,this._queue.push(e),!1;null!==n&&(n[e]=t);var s=this._promise,a=this._callback,h=s._boundValue();s._pushContext();var u=f(a).call(h,t,e,i),l=s._popContext();if(g.checkForgottenReturns(u,l,null!==n?"Promise.filter":"Promise.map",s),u===v)return this._reject(u.e),!0;var c=_(u,this._promise);if(c instanceof p){var d=(c=c._target())._bitField;if(0==(50397184&d))return 1<=o&&this._inFlight++,(r[e]=c)._proxy(this,-1*(e+1)),!1;if(0==(33554432&d))return 0!=(16777216&d)?this._reject(c._reason()):this._cancel(),!0;u=c._value()}r[e]=u}return i<=++this._totalResolved&&(null!==n?this._filter(r,n):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;0<t.length&&this._inFlight<e;){if(this._isResolved())return;var i=t.pop();this._promiseFulfilled(r[i],i)}},s.prototype._filter=function(t,e){for(var r=e.length,i=new Array(r),n=0,o=0;o<r;++o)t[o]&&(i[n++]=e[o]);i.length=n,this._resolve(i)},s.prototype.preservedValues=function(){return this._preservedValues},p.prototype.map=function(t,e){return r(this,t,e,null)},p.map=r}},{"./util":36}],19:[function(e,t,r){"use strict";t.exports=function(s,a,t,h,u){var l=e("./util"),c=l.tryCatch;s.method=function(i){if("function"!=typeof i)throw new s.TypeError("expecting a function but got "+l.classString(i));return function(){var t=new s(a);t._captureStackTrace(),t._pushContext();var e=c(i).apply(this,arguments),r=t._popContext();return u.checkForgottenReturns(e,r,"Promise.method",t),t._resolveFromSyncValue(e),t}},s.attempt=s.try=function(t){if("function"!=typeof t)return h("expecting a function but got "+l.classString(t));var e,r,i,n=new s(a);n._captureStackTrace(),n._pushContext(),i=1<arguments.length?(u.deprecated("calling Promise.try with more than 1 argument"),e=arguments[1],r=arguments[2],l.isArray(e)?c(t).apply(r,e):c(t).call(r,e)):c(t)();var o=n._popContext();return u.checkForgottenReturns(i,o,"Promise.try",n),n._resolveFromSyncValue(i),n},s.prototype._resolveFromSyncValue=function(t){t===l.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,r){"use strict";var s=t("./util"),a=s.maybeWrapAsError,h=t("./errors").OperationalError,u=t("./es5");var l=/^(?:name|message|stack|cause)$/;function c(t){var e,r;if((r=t)instanceof Error&&u.getPrototypeOf(r)===Error.prototype){(e=new h(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var i=u.keys(t),n=0;n<i.length;++n){var o=i[n];l.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}e.exports=function(n,o){return function(t,e){var r,i;null!==n&&(t?(r=c(a(t)),n._attachExtraTrace(r),n._reject(r)):o?(i=[].slice.call(arguments,1),n._fulfill(i)):n._fulfill(e),n=null)}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){"use strict";t.exports=function(t){var i=e("./util"),n=t._async,o=i.tryCatch,s=i.errorObj;function a(t,e){if(!i.isArray(t))return h.call(this,t,e);var r=o(e).apply(this._boundValue(),[null].concat(t));r===s&&n.throwLater(r.e)}function h(t,e){var r=this._boundValue(),i=void 0===t?o(e).call(r,null):o(e).call(r,null,t);i===s&&n.throwLater(i.e)}function u(t,e){var r;t||((r=new Error(t+"")).cause=t,t=r);var i=o(e).call(this._boundValue(),t);i===s&&n.throwLater(i.e)}t.prototype.asCallback=t.prototype.nodeify=function(t,e){var r;return"function"==typeof t&&(r=h,void 0!==e&&Object(e).spread&&(r=a),this._then(r,u,void 0,this,t)),this}}},{"./util":36}],22:[function(L,N,t){"use strict";N.exports=function(){function h(){return new d("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")}function a(){return new O.PromiseInspection(this._target())}function s(t){return O.reject(new d(t))}function u(){}var l={},p=L("./util");p.setReflectHandler(a);function t(){var t=ot.domain;return void 0===t?null:t}function e(){return{domain:t(),async:null}}function r(){return{domain:t(),async:new i("Bluebird::Promise")}}var i=p.isNode&&p.nodeSupportsAsyncResource?L("async_hooks").AsyncResource:null,_=p.isNode?e:function(){return null};p.notEnumerableProp(O,"_getContext",_);var n=L("./es5"),o=L("./async"),g=new o;n.defineProperty(O,"_async",{value:g});var c=L("./errors"),d=O.TypeError=c.TypeError;O.RangeError=c.RangeError;var f=O.CancellationError=c.CancellationError;O.TimeoutError=c.TimeoutError,O.OperationalError=c.OperationalError,O.RejectionError=c.OperationalError,O.AggregateError=c.AggregateError;var v=function(){},m={},E={},y=L("./thenables")(O,v),b=L("./promise_array")(O,v,y,s,u),T=L("./context")(O),S=T.create,w=L("./debuggability")(O,T,function(){_=r,p.notEnumerableProp(O,"_getContext",r)},function(){_=e,p.notEnumerableProp(O,"_getContext",e)}),M=(w.CapturedTrace,L("./finally")(O,y,E)),P=L("./catch_filter")(E),C=L("./nodeback"),A=p.errorObj,I=p.tryCatch;function O(t){t!==v&&function(t,e){if(null==t||t.constructor!==O)throw new d("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new d("expecting a function but got "+p.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function R(t){this.promise._resolveCallback(t)}function D(t){this.promise._rejectCallback(t,!1)}function x(t){var e=new O(v);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return O.prototype.toString=function(){return"[object Promise]"},O.prototype.caught=O.prototype.catch=function(t){var e=arguments.length;if(1<e){for(var r=new Array(e-1),i=0,n=0;n<e-1;++n){var o=arguments[n];if(!p.isObject(o))return s("Catch statement predicate: expecting an object but got "+p.classString(o));r[i++]=o}if(r.length=i,"function"!=typeof(t=arguments[n]))throw new d("The last argument to .catch() must be a function, got "+p.toString(t));return this.then(void 0,P(r,t,this))}return this.then(void 0,t)},O.prototype.reflect=function(){return this._then(a,a,void 0,this,void 0)},O.prototype.then=function(t,e){var r;return w.warnings()&&0<arguments.length&&"function"!=typeof t&&"function"!=typeof e&&(r=".then() only accepts functions but was passed: "+p.classString(t),1<arguments.length&&(r+=", "+p.classString(e)),this._warn(r)),this._then(t,e,void 0,void 0,void 0)},O.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},O.prototype.spread=function(t){return"function"!=typeof t?s("expecting a function but got "+p.classString(t)):this.all()._then(t,void 0,void 0,m,void 0)},O.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},O.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),new b(this).promise()},O.prototype.error=function(t){return this.caught(p.originatesFromRejection,t)},O.getNewLibraryCopy=N.exports,O.is=function(t){return t instanceof O},O.fromNode=O.fromCallback=function(t){var e=new O(v);e._captureStackTrace();var r=1<arguments.length&&!!Object(arguments[1]).multiArgs,i=I(t)(C(e,r));return i===A&&e._rejectCallback(i.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},O.all=function(t){return new b(t).promise()},O.resolve=O.fulfilled=O.cast=function(t){var e=y(t);return e instanceof O||((e=new O(v))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},O.reject=O.rejected=function(t){var e=new O(v);return e._captureStackTrace(),e._rejectCallback(t,!0),e},O.setScheduler=function(t){if("function"!=typeof t)throw new d("expecting a function but got "+p.classString(t));return g.setScheduler(t)},O.prototype._then=function(t,e,r,i,n){var o=void 0!==n,s=o?n:new O(v),a=this._target(),h=a._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===i&&0!=(2097152&this._bitField)&&(i=0!=(50397184&h)?this._boundValue():a===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var u,l,c,d=_();return 0!=(50397184&h)?(c=a._settlePromiseCtx,0!=(33554432&h)?(l=a._rejectionHandler0,u=t):0!=(16777216&h)?(l=a._fulfillmentHandler0,u=e,a._unsetRejectionIsUnhandled()):(c=a._settlePromiseLateCancellationObserver,l=new f("late cancellation observer"),a._attachExtraTrace(l),u=e),g.invoke(c,a,{handler:p.contextBind(d,u),promise:s,receiver:i,value:l})):a._addCallbacks(t,e,s,i,d),s},O.prototype._length=function(){return 65535&this._bitField},O.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},O.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},O.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},O.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},O.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},O.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},O.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},O.prototype._isFinal=function(){return 0<(4194304&this._bitField)},O.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},O.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},O.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},O.prototype._setAsyncGuaranteed=function(){var t;g.hasCustomScheduler()||(t=this._bitField,this._bitField=t|(536870912&t)>>2^134217728)},O.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},O.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==l)return void 0===e&&this._isBound()?this._boundValue():e},O.prototype._promiseAt=function(t){return this[4*t-4+2]},O.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4]},O.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},O.prototype._boundValue=function(){},O.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,r=t._rejectionHandler0,i=t._promise0,n=t._receiverAt(0);void 0===n&&(n=l),this._addCallbacks(e,r,i,n,null)},O.prototype._migrateCallbackAt=function(t,e){var r=t._fulfillmentHandlerAt(e),i=t._rejectionHandlerAt(e),n=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=l),this._addCallbacks(r,i,n,o,null)},O.prototype._addCallbacks=function(t,e,r,i,n){var o,s=this._length();return 65531<=s&&(s=0,this._setLength(0)),0===s?(this._promise0=r,this._receiver0=i,"function"==typeof t&&(this._fulfillmentHandler0=p.contextBind(n,t)),"function"==typeof e&&(this._rejectionHandler0=p.contextBind(n,e))):(this[2+(o=4*s-4)]=r,this[3+o]=i,"function"==typeof t&&(this[o]=p.contextBind(n,t)),"function"==typeof e&&(this[1+o]=p.contextBind(n,e))),this._setLength(s+1),s},O.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},O.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(h(),!1);var r=y(t,this);if(!(r instanceof O))return this._fulfill(t);e&&this._propagateFrom(r,2);var i=r._target();if(i!==this){var n,o=i._bitField;if(0==(50397184&o)){var s=this._length();0<s&&i._migrateCallback0(this);for(var a=1;a<s;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else{0!=(33554432&o)?this._fulfill(i._value()):0!=(16777216&o)?this._reject(i._reason()):(n=new f("late cancellation observer"),i._attachExtraTrace(n),this._reject(n))}}else this._reject(h())}},O.prototype._rejectCallback=function(t,e,r){var i,n=p.ensureErrorObject(t),o=n===t;o||r||!w.warnings()||(i="a promise was rejected with a non-error: "+p.classString(t),this._warn(i,!0)),this._attachExtraTrace(n,!!e&&o),this._reject(t)},O.prototype._resolveFromExecutor=function(t){var e,r,i;t!==v&&((e=this)._captureStackTrace(),this._pushContext(),i=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,i)}),i=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0))},O.prototype._settlePromiseFromHandler=function(t,e,r,i){var n,o;0==(65536&i._bitField)&&(i._pushContext(),e===m?r&&"number"==typeof r.length?n=I(t).apply(this._boundValue(),r):(n=A).e=new d("cannot .spread() a non-array: "+p.classString(r)):n=I(t).call(e,r),o=i._popContext(),0==(65536&i._bitField)&&(n===E?i._reject(r):n===A?i._rejectCallback(n.e,!1):(w.checkForgottenReturns(n,o,"",i,this),i._resolveCallback(n))))},O.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},O.prototype._followee=function(){return this._rejectionHandler0},O.prototype._setFollowee=function(t){this._rejectionHandler0=t},O.prototype._settlePromise=function(t,e,r,i){var n=t instanceof O,o=this._bitField,s=0!=(134217728&o);0!=(65536&o)?(n&&t._invokeInternalOnCancel(),r instanceof M&&r.isFinallyHandler()?(r.cancelPromise=t,I(e).call(r,i)===A&&t._reject(A.e)):e===a?t._fulfill(a.call(r)):r instanceof u?r._promiseCancelled(t):n||t instanceof b?t._cancel():r.cancel()):"function"==typeof e?n?(s&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,i,t)):e.call(r,i,t):r instanceof u?r._isResolved()||(0!=(33554432&o)?r._promiseFulfilled(i,t):r._promiseRejected(i,t)):n&&(s&&t._setAsyncGuaranteed(),0!=(33554432&o)?t._fulfill(i):t._reject(i))},O.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,r=t.promise,i=t.receiver,n=t.value;"function"==typeof e?r instanceof O?this._settlePromiseFromHandler(e,i,n,r):e.call(i,n,r):r instanceof O&&r._reject(n)},O.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},O.prototype._settlePromise0=function(t,e,r){var i=this._promise0,n=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(i,t,n,e)},O.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[2+e]=this[3+e]=this[e]=this[1+e]=void 0},O.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var r=h();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=t,0<(65535&e)&&(0!=(134217728&e)?this._settlePromises():g.settlePromises(this),this._dereferenceTrace())}},O.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return g.fatalError(t,p.isNode);0<(65535&e)?g.settlePromises(this):this._ensurePossibleRejectionHandled()}},O.prototype._fulfillPromises=function(t,e){for(var r=1;r<t;r++){var i=this._fulfillmentHandlerAt(r),n=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(n,i,o,e)}},O.prototype._rejectPromises=function(t,e){for(var r=1;r<t;r++){var i=this._rejectionHandlerAt(r),n=this._promiseAt(r),o=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(n,i,o,e)}},O.prototype._settlePromises=function(){var t,e,r=this._bitField,i=65535&r;0<i&&(0!=(16842752&r)?(t=this._fulfillmentHandler0,this._settlePromise0(this._rejectionHandler0,t,r),this._rejectPromises(i,t)):(e=this._rejectionHandler0,this._settlePromise0(this._fulfillmentHandler0,e,r),this._fulfillPromises(i,e)),this._setLength(0)),this._clearCancellationData()},O.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&n.defineProperty(O.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),O.defer=O.pending=function(){return w.deprecated("Promise.defer","new Promise"),{promise:new O(v),resolve:R,reject:D}},p.notEnumerableProp(O,"_makeSelfResolutionError",h),L("./method")(O,v,y,s,w),L("./bind")(O,v,y,w),L("./cancel")(O,b,s,w),L("./direct_resolve")(O),L("./synchronous_inspection")(O),L("./join")(O,b,y,v,g),(O.Promise=O).version="3.7.2",L("./call_get.js")(O),L("./generators.js")(O,s,v,y,u,w),L("./map.js")(O,b,s,y,v,w),L("./nodeify.js")(O),L("./promisify.js")(O,v),L("./props.js")(O,b,y,s),L("./race.js")(O,v,y,s),L("./reduce.js")(O,b,s,y,v,w),L("./settle.js")(O,b,w),L("./some.js")(O,b,s),L("./timers.js")(O,v,w),L("./using.js")(O,s,y,S,v,w),L("./any.js")(O),L("./each.js")(O,v),L("./filter.js")(O,v),p.toFastProperties(O),p.toFastProperties(O.prototype),x({a:1}),x({b:2}),x({c:3}),x(1),x(function(){}),x(void 0),x(!1),x(new O(v)),w.setBounds(o.firstLineError,p.lastLineError),O}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(i,t,e){"use strict";t.exports=function(a,r,h,s,t){var u=i("./util");u.isArray;function e(t){var e=this._promise=new a(r);t instanceof a&&(e._propagateFrom(t,3),t.suppressUnhandledRejections()),e._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return u.inherits(e,t),e.prototype.length=function(){return this._length},e.prototype.promise=function(){return this._promise},e.prototype._init=function t(e,r){var i,n=h(this._values,this._promise);if(n instanceof a){var o=(n=n._target())._bitField;if(this._values=n,0==(50397184&o))return this._promise._setAsyncGuaranteed(),n._then(t,this._reject,void 0,this,r);if(0==(33554432&o))return 0!=(16777216&o)?this._reject(n._reason()):this._cancel();n=n._value()}null!==(n=u.asArray(n))?0!==n.length?this._iterate(n):-5===r?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(r)):(i=s("expecting an array or an iterable object but got "+u.classString(n)).reason(),this._promise._rejectCallback(i,!1))},e.prototype._iterate=function(t){var e=this.getActualLength(t.length);this._length=e,this._values=this.shouldCopyValues()?new Array(e):this._values;for(var r=this._promise,i=!1,n=null,o=0;o<e;++o){var s=h(t[o],r),n=s instanceof a?(s=s._target())._bitField:null;i?null!==n&&s.suppressUnhandledRejections():null!==n?0==(50397184&n)?(s._proxy(this,o),this._values[o]=s):i=0!=(33554432&n)?this._promiseFulfilled(s._value(),o):0!=(16777216&n)?this._promiseRejected(s._reason(),o):this._promiseCancelled(o):i=this._promiseFulfilled(s,o)}i||r._setAsyncGuaranteed()},e.prototype._isResolved=function(){return null===this._values},e.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},e.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},e.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},e.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},e.prototype._promiseCancelled=function(){return this._cancel(),!0},e.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},e.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof a)t.cancel();else for(var e=0;e<t.length;++e)t[e]instanceof a&&t[e].cancel()}},e.prototype.shouldCopyValues=function(){return!0},e.prototype.getActualLength=function(t){return t},e}},{"./util":36}],24:[function(r,t,e){"use strict";t.exports=function(u,l){var p={},_=r("./util"),c=r("./nodeback"),d=_.withAppended,g=_.maybeWrapAsError,t=_.canEvaluate,f=r("./errors").TypeError,v={__isPromisified__:!0},e=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),m=function(t){return _.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function s(t){return!e.test(t)}function E(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function y(t,e,r,i){for(var n,o,s,a,h=_.inheritedDataKeys(t),u=[],l=0;l<h.length;++l){var c=h[l],d=t[c],p=i===m||m(c,d,t);"function"!=typeof d||E(d)||(n=t,o=c,s=e,a=void 0,(a=_.getDataPropertyOrDefault(n,o+s,v))&&E(a))||!i(c,d,t,p)||u.push(c,d)}return function(t,e,r){for(var i=0;i<t.length;i+=2){var n=t[i];if(r.test(n))for(var o=n.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new f("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(u,e,r),u}var b=function(t){return t.replace(/([$])/,"\\$")};var T=t?void 0:function(n,o,t,e,r,s){var a=function(){return this}(),h=n;function i(){var t=o;o===p&&(t=this);var e=new u(l);e._captureStackTrace();var r="string"==typeof h&&this!==a?this[h]:n,i=c(e,s);try{r.apply(t,d(arguments,i))}catch(t){e._rejectCallback(g(t),!0,!0)}return e._isFateSealed()||e._setAsyncGuaranteed(),e}return"string"==typeof h&&(n=e),_.notEnumerableProp(i,"__isPromisified__",!0),i};function S(t,e,r,i,n){for(var o=new RegExp(b(e)+"$"),s=y(t,e,o,r),a=0,h=s.length;a<h;a+=2){var u,l=s[a],c=s[a+1],d=l+e;i===T?t[d]=T(l,p,l,c,e,n):(u=i(c,function(){return T(l,p,l,c,e,n)}),_.notEnumerableProp(u,"__isPromisified__",!0),t[d]=u)}return _.toFastProperties(t),t}u.promisify=function(t,e){if("function"!=typeof t)throw new f("expecting a function but got "+_.classString(t));if(E(t))return t;var r,i=void 0===(e=Object(e)).context?p:e.context,n=!!e.multiArgs,o=T(r=t,i,void 0,r,null,n);return _.copyDescriptors(t,o,s),o},u.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new f("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(e=Object(e)).multiArgs,i=e.suffix;"string"!=typeof i&&(i="Async");var n=e.filter;"function"!=typeof n&&(n=m);var o=e.promisifier;if("function"!=typeof o&&(o=T),!_.isIdentifier(i))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=_.inheritedDataKeys(t),a=0;a<s.length;++a){var h=t[s[a]];"constructor"!==s[a]&&_.isClass(h)&&(S(h.prototype,i,n,o,r),S(h,i,n,o,r))}return S(t,i,n,o,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(_,t,e){"use strict";t.exports=function(i,t,n,o){var a,e=_("./util"),s=e.isObject,h=_("./es5");"function"==typeof Map&&(a=Map);var r,u,l=(u=0,function(t){r=t.size,u=0;var e=new Array(2*t.size);return t.forEach(c,e),e});function c(t,e){this[u]=t,this[u+r]=e,u++}function d(t){var e=!1;if(void 0!==a&&t instanceof a)n=l(t),e=!0;else for(var r=h.keys(t),i=r.length,n=new Array(2*i),o=0;o<i;++o){var s=r[o];n[o]=t[s],n[o+i]=s}this.constructor$(n),this._isMap=e,this._init$(void 0,e?-6:-3)}function p(t){var e,r=n(t);return s(r)?(e=r instanceof i?r._then(i.props,void 0,void 0,void 0,void 0):new d(r).promise(),r instanceof i&&e._propagateFrom(r,2),e):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}e.inherits(d,t),d.prototype._init=function(){},d.prototype._promiseFulfilled=function(t,e){var r;if(this._values[e]=t,++this._totalResolved>=this._length){if(this._isMap)r=function(t){for(var e=new a,r=t.length/2|0,i=0;i<r;++i){var n=t[r+i],o=t[i];e.set(n,o)}return e}(this._values);else{r={};for(var i=this.length(),n=0,o=this.length();n<o;++n)r[this._values[n+i]]=this._values[n]}return this._resolve(r),!0}return!1},d.prototype.shouldCopyValues=function(){return!1},d.prototype.getActualLength=function(t){return t>>1},i.prototype.props=function(){return p(this)},i.props=p}},{"./es5":13,"./util":36}],26:[function(t,e,r){"use strict";function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},i.prototype.push=function(t,e,r){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var n=this._front+i-3;this._checkCapacity(i);var o=this._capacity-1;this[n&o]=t,this[1+n&o]=e,this[2+n&o]=r,this._length=i},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,r,i,n){for(var o=0;o<n;++o)r[o+i]=t[o+e],t[o+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=i},{}],27:[function(t,e,r){"use strict";e.exports=function(u,l,c,d){var p=t("./util"),_=function(e){return e.then(function(t){return r(t,e)})};function r(t,e){var r=c(t);if(r instanceof u)return _(r);if(null===(t=p.asArray(t)))return d("expecting an array or an iterable object but got "+p.classString(t));var i=new u(l);void 0!==e&&i._propagateFrom(e,3);for(var n=i._fulfill,o=i._reject,s=0,a=t.length;s<a;++s){var h=t[s];(void 0!==h||s in t)&&u.cast(h)._then(n,o,void 0,i,null)}return i}u.race=function(t){return r(t,void 0)},u.prototype.race=function(){return r(this,void 0)}}},{"./util":36}],28:[function(e,t,r){"use strict";t.exports=function(a,t,n,r,o,s){var h=e("./util"),u=h.tryCatch;function l(t,e,r,i){this.constructor$(t);var n=a._getContext();this._fn=h.contextBind(n,e),void 0!==r&&(r=a.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function i(t,e,r,i){return"function"!=typeof e?n("expecting a function but got "+h.classString(e)):new l(t,e,r,i).promise()}function d(t){this.accum=t,this.array._gotAccum(t);var e=r(this.value,this.array._promise);return e instanceof a?(this.array._currentCancellable=e)._then(p,void 0,void 0,this,void 0):p.call(this,e)}function p(t){var e,r=this.array,i=r._promise,n=u(r._fn);i._pushContext(),(e=void 0!==r._eachValues?n.call(i._boundValue(),t,this.index,this.length):n.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof a&&(r._currentCancellable=e);var o=i._popContext();return s.checkForgottenReturns(e,o,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),e}h.inherits(l,t),l.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},l.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},l.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof a&&this._currentCancellable.cancel(),this._initialValue instanceof a&&this._initialValue.cancel())},l.prototype._iterate=function(t){var e=(this._values=t).length,r=void 0!==this._initialValue?(s=this._initialValue,0):(s=a.resolve(t[0]),1);this._currentCancellable=s;for(var i=r;i<e;++i){var n=t[i];n instanceof a&&n.suppressUnhandledRejections()}if(!s.isRejected())for(;r<e;++r){var o={accum:null,value:t[r],index:r,length:e,array:this},s=s._then(d,void 0,void 0,o,void 0);0==(127&r)&&s._setNoAsyncGuarantee()}void 0!==this._eachValues&&(s=s._then(this._eachComplete,void 0,void 0,this,void 0)),s._then(c,c,void 0,s,this)},a.prototype.reduce=function(t,e){return i(this,t,e,null)},a.reduce=i}},{"./util":36}],29:[function(t,e,r){"use strict";var i,n,o,s,a=t("./util"),h=a.getNativePromise();o=a.isNode&&"undefined"==typeof MutationObserver?(i=H.setImmediate,n=ot.nextTick,a.isRecentNode?function(t){i.call(H,t)}:function(t){n.call(ot,t)}):"function"==typeof h&&"function"==typeof h.resolve?(s=h.resolve(),function(t){s.then(t)}):"undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?function(){var r=document.createElement("div"),i={attributes:!0},n=!1,o=document.createElement("div");new MutationObserver(function(){r.classList.toggle("foo"),n=!1}).observe(o,i);return function(t){var e=new MutationObserver(function(){e.disconnect(),t()});e.observe(r,i),n||(n=!0,o.classList.toggle("foo"))}}():void 0!==u?function(t){u(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},e.exports=o},{"./util":36}],30:[function(o,t,e){"use strict";t.exports=function(t,e,r){var i=t.PromiseInspection;function n(t){this.constructor$(t)}o("./util").inherits(n,e),n.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},n.prototype._promiseFulfilled=function(t,e){var r=new i;return r._bitField=33554432,r._settledValueField=t,this._promiseResolved(e,r)},n.prototype._promiseRejected=function(t,e){var r=new i;return r._bitField=16777216,r._settledValueField=t,this._promiseResolved(e,r)},t.settle=function(t){return r.deprecated(".settle()",".reflect()"),new n(t).promise()},t.allSettled=function(t){return new n(t).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(l,t,e){"use strict";t.exports=function(t,e,n){var r=l("./util"),i=l("./errors").RangeError,o=l("./errors").AggregateError,s=r.isArray,a={};function h(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new h(t),i=r.promise();return r.setHowMany(e),r.init(),i}r.inherits(h,e),h.prototype._init=function(){var t;this._initialized&&(0!==this._howMany?(this._init$(void 0,-5),t=s(this._values),!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))):this._resolve([]))},h.prototype.init=function(){this._initialized=!0,this._init()},h.prototype.setUnwrap=function(){this._unwrap=!0},h.prototype.howMany=function(){return this._howMany},h.prototype.setHowMany=function(t){this._howMany=t},h.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},h.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},h.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(a),this._checkOutcome())},h.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new o,e=this.length();e<this._values.length;++e)this._values[e]!==a&&t.push(this._values[e]);return 0<t.length?this._reject(t):this._cancel(),!0}return!1},h.prototype._fulfilled=function(){return this._totalResolved},h.prototype._rejected=function(){return this._values.length-this.length()},h.prototype._addRejected=function(t){this._values.push(t)},h.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},h.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},h.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new i(e)},h.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=u,t.prototype.some=function(t){return u(this,t)},t._SomePromiseArray=h}},{"./errors":12,"./util":36}],32:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var r=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return n.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return r.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),i.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,r){"use strict";e.exports=function(a,h){var u=t("./util"),l=u.errorObj,n=u.isObject;var o={}.hasOwnProperty;return function(t,e){if(n(t)){if(t instanceof a)return t;var r=function(t){try{return t.then}catch(t){return l.e=t,l}}(t);if(r===l){e&&e._pushContext();var i=a.reject(r.e);return e&&e._popContext(),i}if("function"==typeof r){if(function(t){try{return o.call(t,"_promise0")}catch(t){return!1}}(t)){i=new a(h);return t._then(i._fulfill,i._reject,void 0,i,null),i}return function(t,e,r){var i=new a(h),n=i;r&&r._pushContext();i._captureStackTrace(),r&&r._popContext();var o=!0,s=u.tryCatch(e).call(t,function(t){if(!i)return;i._resolveCallback(t),i=null},function(t){if(!i)return;i._rejectCallback(t,o,!0),i=null});o=!1,i&&s===l&&(i._rejectCallback(s.e,!0,!0),i=null);return n}(t,r,e)}}return t}}},{"./util":36}],34:[function(t,e,r){"use strict";e.exports=function(n,o,a){var h=t("./util"),u=n.TimeoutError;function l(t){this.handle=t}l.prototype._resultCancelled=function(){clearTimeout(this.handle)};function s(t){return e(+this).thenReturn(t)}var e=n.delay=function(t,e){var r,i;return void 0!==e?(r=n.resolve(e)._then(s,null,null,t,void 0),a.cancellation()&&e instanceof n&&r._setOnCancel(e)):(r=new n(o),i=setTimeout(function(){r._fulfill()},+t),a.cancellation()&&r._setOnCancel(new l(i)),r._captureStackTrace()),r._setAsyncGuaranteed(),r};n.prototype.delay=function(t){return e(t,this)};function r(t){return clearTimeout(this.handle),t}function i(t){throw clearTimeout(this.handle),t}n.prototype.timeout=function(t,n){var o,s;t=+t;var e=new l(setTimeout(function(){var t,e,r,i;o.isPending()&&(t=o,r=s,i="string"!=typeof(e=n)?e instanceof Error?e:new u("operation timed out"):new u(e),h.markAsOriginatingFromRejection(i),t._attachExtraTrace(i),t._reject(i),null!=r&&r.cancel())},t));return a.cancellation()?(s=this.then(),(o=s._then(r,i,void 0,e,void 0))._setOnCancel(e)):o=this._then(r,i,void 0,e,void 0),o}}},{"./util":36}],35:[function(s,t,e){"use strict";t.exports=function(d,p,_,e,t,g){var f=s("./util"),r=s("./errors").TypeError,i=s("./util").inherits,v=f.errorObj,m=f.tryCatch,n={};function u(t){setTimeout(function(){throw t},0)}function E(n,o){var s=0,a=n.length,h=new d(t);return function t(){if(a<=s)return h._fulfill();var e,r,i=(e=n[s++],(r=_(e))!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&r._setDisposable(e._getDisposer()),r);if(i instanceof d&&i._isDisposable()){try{i=_(i._getDisposer().tryDispose(o),n.promise)}catch(t){return u(t)}if(i instanceof d)return i._then(t,u,null,null,null)}t()}(),h}function y(t,e,r){this._data=t,this._promise=e,this._context=r}function o(t,e,r){this.constructor$(t,e,r)}function b(t){return y.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function T(t){this.length=t,this.promise=null,this[t-1]=null}y.prototype.data=function(){return this._data},y.prototype.promise=function(){return this._promise},y.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():n},y.prototype.tryDispose=function(t){var e=this.resource(),r=this._context;void 0!==r&&r._pushContext();var i=e!==n?this.doDispose(e,t):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,i},y.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},i(o,y),o.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},T.prototype._resultCancelled=function(){for(var t=this.length,e=0;e<t;++e){var r=this[e];r instanceof d&&r.cancel()}},d.using=function(){var t=arguments.length;if(t<2)return p("you must pass at least 2 arguments to Promise.using");var e,o=arguments[t-1];if("function"!=typeof o)return p("expecting a function but got "+f.classString(o));var s=!0;2===t&&Array.isArray(arguments[0])?(t=(e=arguments[0]).length,s=!1):(e=arguments,t--);for(var r=new T(t),i=0;i<t;++i){var n,a,h=e[i];y.isDisposer(h)?(h=(n=h).promise())._setDisposable(n):(a=_(h))instanceof d&&(h=a._then(b,null,null,{resources:r,index:i},void 0)),r[i]=h}for(var u=new Array(r.length),i=0;i<u.length;++i)u[i]=d.resolve(r[i]).reflect();var l=d.all(u).then(function(t){for(var e=0;e<t.length;++e){var r=t[e];if(r.isRejected())return v.e=r.error(),v;if(!r.isFulfilled())return void l.cancel();t[e]=r.value()}c._pushContext(),o=m(o);var i=s?o.apply(void 0,t):o(t),n=c._popContext();return g.checkForgottenReturns(i,n,"Promise.using",c),i}),c=l.lastly(function(){var t=new d.PromiseInspection(l);return E(r,t)});return(r.promise=c)._setOnCancel(r),c},d.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},d.prototype._isDisposable=function(){return 0<(131072&this._bitField)},d.prototype._getDisposer=function(){return this._disposer},d.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},d.prototype.disposer=function(t){if("function"==typeof t)return new o(t,this,e());throw new r}}},{"./errors":12,"./util":36}],36:[function(t,e,r){"use strict";var u=t("./es5"),i="undefined"==typeof navigator,n={e:{}},o,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==H?H:void 0!==this?this:null;function a(){try{var t=o;return o=null,t.apply(this,arguments)}catch(t){return n.e=t,n}}function h(t){return o=t,a}var l=function(e,r){var i={}.hasOwnProperty;function t(){for(var t in this.constructor=e,(this.constructor$=r).prototype)i.call(r.prototype,t)&&"$"!==t.charAt(t.length-1)&&(this[t+"$"]=r.prototype[t])}return t.prototype=r.prototype,e.prototype=new t,e.prototype};function c(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function d(t){return"function"==typeof t||"object"==typeof t&&null!==t}function p(t){return c(t)?new Error(M(t)):t}function _(t,e){for(var r=t.length,i=new Array(r+1),n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function g(t,e,r){if(!u.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:r:void 0}function f(t,e,r){if(c(t))return t;var i={value:r,configurable:!0,enumerable:!1,writable:!0};return u.defineProperty(t,e,i),t}function v(t){throw t}var m=function(){function a(t){for(var e=0;e<n.length;++e)if(n[e]===t)return 1}var n=[Array.prototype,Object.prototype,Function.prototype];if(u.isES5){var h=Object.getOwnPropertyNames;return function(t){for(var e,r=[],i=Object.create(null);null!=t&&!a(t);){try{e=h(t)}catch(t){return r}for(var n=0;n<e.length;++n){var o,s=e[n];i[s]||(i[s]=!0,null!=(o=Object.getOwnPropertyDescriptor(t,s))&&null==o.get&&null==o.set&&r.push(s))}t=u.getPrototypeOf(t)}return r}}var o={}.hasOwnProperty;return function(t){if(a(t))return[];var e=[];t:for(var r in t)if(o.call(t,r))e.push(r);else{for(var i=0;i<n.length;++i)if(o.call(n[i],r))continue t;e.push(r)}return e}}(),E=/this\s*\.\s*\S+\s*=/;function y(t){try{if("function"==typeof t){var e=u.names(t.prototype),r=u.isES5&&1<e.length,i=0<e.length&&!(1===e.length&&"constructor"===e[0]),n=E.test(t+"")&&0<u.names(t).length;if(r||i||n)return!0}return!1}catch(t){return!1}}function b(t){function e(){}e.prototype=t;var r=new e;function i(){return r.foo,1}return i(),i(),t}var T=/^[a-z$_][a-z$_0-9]*$/i;function S(t){return T.test(t)}function w(t,e,r){for(var i=new Array(t),n=0;n<t;++n)i[n]=e+n+r;return i}function M(t){try{return t+""}catch(t){return"[no string representation]"}}function P(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function C(t){try{f(t,"isOperational",!0)}catch(t){}}function A(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function I(t){return P(t)&&u.propertyIsWritable(t,"stack")}var O="stack"in new Error?function(t){return I(t)?t:new Error(M(t))}:function(t){if(I(t))return t;try{throw new Error(M(t))}catch(t){return t}};function R(t){return{}.toString.call(t)}function D(t,e,r){for(var i=u.names(t),n=0;n<i.length;++n){var o=i[n];if(r(o))try{u.defineProperty(e,o,u.getDescriptor(t,o))}catch(t){}}}var x=function(t){return u.isArray(t)?t:null},L,x;"undefined"!=typeof Symbol&&Symbol.iterator&&(L="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,r=[],i=t[Symbol.iterator]();!(e=i.next()).done;)r.push(e.value);return r},x=function(t){return u.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?L(t):null});var N=void 0!==ot&&"[object process]"===R(ot).toLowerCase(),k=void 0!==ot&&void 0!==ot.env,B;function F(t){return k?ot.env[t]:void 0}function U(){if("function"==typeof Promise)try{if("[object Promise]"===R(new Promise(function(){})))return Promise}catch(t){}}function j(t,e){if(null===t||"function"!=typeof e||e===B)return e;null!==t.domain&&(e=t.domain.bind(e));var r,i=t.async;return null!==i&&(r=e,e=function(){var t=new Array(2).concat([].slice.call(arguments));return t[0]=r,t[1]=this,i.runInAsyncScope.apply(i,t)}),e}var G={setReflectHandler:function(t){B=t},isClass:y,isIdentifier:S,inheritedDataKeys:m,getDataPropertyOrDefault:g,thrower:v,isArray:u.isArray,asArray:x,notEnumerableProp:f,isPrimitive:c,isObject:d,isError:P,canEvaluate:i,errorObj:n,tryCatch:h,inherits:l,withAppended:_,maybeWrapAsError:p,toFastProperties:b,filledRange:w,toString:M,canAttachTrace:I,ensureErrorObject:O,originatesFromRejection:A,markAsOriginatingFromRejection:C,classString:R,copyDescriptors:D,isNode:N,hasEnvVariables:k,env:F,global:s,getNativePromise:U,contextBind:j},V;G.isRecentNode=G.isNode&&(ot.versions&&ot.versions.node?V=ot.versions.node.split(".").map(Number):ot.version&&(V=ot.version.split(".").map(Number)),0===V[0]&&10<V[1]||0<V[0]),G.nodeSupportsAsyncResource=G.isNode&&function(){var e=!1;try{e="function"==typeof t("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(t){e=!1}return e}(),G.isNode&&G.toFastProperties(ot);try{throw new Error}catch(t){G.lastLineError=t}e.exports=G},{"./es5":13,async_hooks:void 0}]},{},[4])(4)},e.exports=t(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,r(9),r(6),r(17).setImmediate)},function(t,n,o){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new i(r.call(setTimeout,e,arguments),clearTimeout)},n.setInterval=function(){return new i(r.call(setInterval,e,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(e,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(18),n.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,n.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,o(6))},function(t,e,r){(function(t,_){!function(r,i){"use strict";var n,o,s,a,h,u,e,l,t;function c(t){delete o[t]}function d(t){if(s)setTimeout(d,0,t);else{var e=o[t];if(e){s=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(i,r)}}(e)}finally{c(t),s=!1}}}}function p(t){t.source===r&&"string"==typeof t.data&&0===t.data.indexOf(l)&&d(+t.data.slice(l.length))}r.setImmediate||(n=1,s=!(o={}),a=r.document,t=(t=Object.getPrototypeOf&&Object.getPrototypeOf(r))&&t.setTimeout?t:r,h="[object process]"==={}.toString.call(r.process)?function(t){_.nextTick(function(){d(t)})}:function(){if(r.postMessage&&!r.importScripts){var t=!0,e=r.onmessage;return r.onmessage=function(){t=!1},r.postMessage("","*"),r.onmessage=e,t}}()?(l="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",p,!1):r.attachEvent("onmessage",p),function(t){r.postMessage(l+t,"*")}):r.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){d(t.data)},function(t){e.port2.postMessage(t)}):a&&"onreadystatechange"in a.createElement("script")?(u=a.documentElement,function(t){var e=a.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,u.removeChild(e),e=null},u.appendChild(e)}):function(t){setTimeout(d,0,t)},t.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return o[n]=i,h(n),n++},t.clearImmediate=c)}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(6),r(9))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DVS=void 0;function i(t){this.DataControl=null,this.ViewControl=null,this.File=null,this.Tag=null,this.Annotation=null,this.Error=null,this.Log=null,n.polyfill(),this._pubSub=new o.PublishSubscribe,this.Log=new d.Log({pubsub:this._pubSub}),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Initialize data storage object."),this._dataStorage=new l.DataStorage,this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Complete data storage object initialization."),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Initialize Error object."),this.Error=new c.ErrorManager({pubsub:this._pubSub}),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Complete Error object initialization."),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Initialize Tag object."),this.Tag=new u.Tag({pubsub:this._pubSub}),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Complete Tag object initialization."),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Initialize File object."),this.File=new h.File({pubsub:this._pubSub}),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Complete File object initialization."),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Initialize ViewControl object."),this.ViewControl=new a.ViewControl(t,this._pubSub,this._dataStorage),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Complete ViewControl object initialization."),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Initialize DataControl object."),this.DataControl=new s.DataControl(t,this._pubSub,this._dataStorage),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Complete DataControl object initialization."),this._pubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Complete DVS object initialization.")}var n=r(20),o=r(2),s=r(21),a=r(22),h=r(39),u=r(42),l=r(45),c=r(48),d=r(49),p=r(1);e.DVS=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.polyfill=void 0,e.polyfill=function(){function l(t){return"function"==typeof t||"[object Function]"===e.call(t)}function c(t){var e,r=(e=Number(t),isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e);return Math.min(Math.max(r,0),i)}var e,i;Array.from||(Array.from=(e=Object.prototype.toString,i=Math.pow(2,53)-1,function(t,e,r){var i=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,o=1<arguments.length?e:void 0;if(void 0!==o){if(!l(o))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=r)}for(var s,a=c(i.length),h=l(this)?Object(new this(a)):new Array(a),u=0;u<a;)s=i[u],h[u]=o?void 0===n?o(s,u):o.call(n,s,u):s,u+=1;return h.length=a,h})),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},writable:!0,configurable:!0}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,r){for(var i=atob(this.toDataURL(e,r).split(",")[1]),n=i.length,o=new Uint8Array(n),s=0;s<n;s++)o[s]=i.charCodeAt(s);t(new Blob([o],{type:e||"image/png"}))}})}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,s,a,h){return new(a=a||Promise)(function(r,e){function i(t){try{o(h.next(t))}catch(t){e(t)}}function n(t){try{o(h.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?r(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,n)}o((h=h.apply(t,s||[])).next())})},o=this&&this.__generator||function(r,i){var n,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(r,a)}catch(t){e=[6,t],o=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.DataControl=void 0;var d=r(0),p=r(1),i=(a.prototype.appendSync=function(t,e){if(this._dataPubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Invoking DataControl#appendSync."),!this._checkString(t)||!this._checkArray(e))return[];var r=this._load(t,e);return this._ok(),r},a.prototype.insertSync=function(t,e,r){if(this._dataPubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Invoking DataControl#insertSync."),!this._checkString(t)||!this._checkArray(e))return this._throwError(p.errorMessages.PARAMETER_TYPE),[];if(void 0===r)return this.appendSync(t,e);var i=this._load(t,e,r);return this._ok(),i},a.prototype.updateSync=function(t,e,r){void 0===r&&(r=!0),this._dataPubSub.emit(p.privateEvent.UPDATE_LOG_MESSAGE,"Invoking DataControl#updateSync.");var i=this._dataStorage.getInterlayerDataSync(t);if(!i)return!1;this._dataStorage.getMetadataSync(t),this._dataStorage.updateMetadataSync(t,e.metadata),e.customData&&(i.customData=e.customData),e.tags&&(i.tags=e.tags),r&&(this._revokeUrl(i.oriData),this._revokeUrl(i.minData)),i.minData=null,i.oriData=null,i.img=null,i.active=!1,i.activeMin=!1,this._dataStorage.updateInterlayerDataSync(t,i),e.tags||(e.tags=i.tags.slice()),e.customData||(e.customData=i.customData),this._dataStorage.updateDataAsync(t,e),this._dataPubSub.emit(p.modelEvent.UPDATE_FOR_VIEWER,t,e)},a.prototype._revokeUrl=function(t){var e=window.URL||window.webkitURL;if(/^blob:/.test(t))return e.revokeObjectURL(t)},a.prototype._load=function(t,e,r){for(var n,o,s=this,i=[],a=[],h=e.length,u=0;u<h;u++){var l={uid:d.uid(11),imgData:e[u]};a.push(l),i.push(l.uid)}void 0!==r?this._dataPubSub.emit(p.modelEvent.INSERT_FOR_TAG,a):this._dataPubSub.emit(p.modelEvent.APPEND_FOR_TAG,a);for(var c=this,u=0;u<h;u++)!function(t){var e=a[t],r=Object.assign({},e.imgData.metadata);c._dataStorage.addMetadataSync(e.uid,r),c._dataStorage.addDataAsync(e.uid,e.imgData).then(function(t){s._dataPubSub.emit(p.privateEvent.ADD_DATA_TO_DB_SUCCESS,e.uid,t)}).catch(function(t){s._dataPubSub.emit(p.privateEvent.ADD_DATA_TO_DB_FAILED,e.uid,t)});var i={uid:e.uid,minData:null,oriData:null,customData:e.imgData.customData||{},tags:(null===(o=null===(n=e.imgData)||void 0===n?void 0:n.tags)||void 0===o?void 0:o.slice(0))||[],active:!1,load:!1,show:[],overlays:[],img:null};c._dataStorage.addInterlayerDataSync(e.uid,i)}(u);return void 0===r?this._dataPubSub.emit(p.modelEvent.APPEND_FOR_FILE,t,a):this._dataPubSub.emit(p.modelEvent.INSERT_FOR_FILE,t,a,r),i},a.prototype._findImageByUid=function(t,e){for(var r=e.children,i=r.length,n=0;n<i;n++)if(r[n].children){var o=this._findImageByUid(t,r[n]);if(o)return o}else if(r[n]===t)return e},a.prototype._formatData=function(t){return{uid:d.uid(11),image:t}},a.prototype.addData=function(r,i){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:return this._checkString(r)&&d.isObject(i)?[4,this._dataStorage.addDataAsync(r,i).then(function(t){return e._ok(),t}).catch(function(t){return e._throwError(p.errorMessages.IMG_STORAGE_FAILED),Promise.reject(new Error(p.errorMessages.IMG_STORAGE_FAILED.message))})]:(this._throwError(p.errorMessages.PARAMETER_TYPE),[2,Promise.reject(new Error(p.errorMessages.PARAMETER_TYPE.message))]);case 1:return[2,t.sent()]}})})},a.prototype.getData=function(r){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:return this._checkString(r)?[4,this._dataStorage.getDataAsync(r).then(function(t){return e._ok(),Promise.resolve(t)}).catch(function(t){return e._throwError(p.errorMessages.IMG_NOT_EXIST),Promise.reject(new Error(p.errorMessages.IMG_NOT_EXIST.message))})]:(this._throwError(p.errorMessages.PARAMETER_TYPE),[2,Promise.reject(new Error(p.errorMessages.PARAMETER_TYPE.message))]);case 1:return[2,t.sent()]}})})},a.prototype.removeData=function(r){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:return this._checkString(r)?[4,this._dataStorage.removeDataAsync(r).then(function(t){return e._ok(),t}).catch(function(t){return e._throwError(p.errorMessages.IMG_REMOVE_FAILED),Promise.reject(new Error(p.errorMessages.IMG_REMOVE_FAILED.message))})]:(this._throwError(p.errorMessages.PARAMETER_TYPE),[2,Promise.reject(new Error(p.errorMessages.PARAMETER_TYPE.message))]);case 1:return[2,t.sent()]}})})},a.prototype.updateData=function(r,i){return n(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:return this._checkString(r)?[4,this._dataStorage.updateDataAsync(r,i).then(function(t){return e._ok(),t}).catch(function(t){return e._throwError(p.errorMessages.IMG_NOT_EXIST),Promise.reject(new Error(p.errorMessages.IMG_NOT_EXIST.message))})]:(this._throwError(p.errorMessages.PARAMETER_TYPE),[2,Promise.reject(new Error(p.errorMessages.PARAMETER_TYPE.message))]);case 1:return[2,t.sent()]}})})},a.prototype.on=function(t,e){this._dataPubSub.on(t,e)},a.prototype.emit=function(t){for(var e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];(e=this._dataPubSub).emit.apply(e,s([t],r))},a.prototype.off=function(t,e){this._dataPubSub.off(t,e)},a.prototype._checkArray=function(t){return!!d.isArray(t)||(this._throwError(p.errorMessages.PARAMETER_TYPE),!1)},a.prototype._checkNameString=function(t){return d.isString(t)&&0!==t.length||(this._throwError(p.errorMessages.PARAMETER_TYPE),!1)},a.prototype._checkString=function(t){return!!d.isString(t)||(this._throwError(p.errorMessages.PARAMETER_TYPE),!1)},a.prototype._throwError=function(t,e){this._dataPubSub.emit("dvs_error",t),void 0!==e&&void 0!==t.message&&this._dataPubSub.emit("_onAddLog",d.formatLog(e,!1,t.message))},a.prototype._ok=function(){this._dataPubSub.emit("dvs_error",p.errorMessages.OK)},a);function a(t,e,r){var i=this;this._dataPubSub=e,this._dataStorage=r,this.on(p.modelEvent.APPEND_SYNC,function(t,e){i.appendSync(t,e)}),this.on(p.modelEvent.UPDATE_SYNC,function(t,e,r){i.updateSync(t,e,r)})}e.DataControl=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewControl=void 0;var n=r(23),h=r(1),o=r(0),s=r(38),u=r(11),i=(a.prototype._getScrollerWidth=function(){var t=document.createElement("div"),e=document.createElement("div");t.appendChild(e),t.setAttribute("style","width:180px;height:180px;position:absolute;overflow:auto;"),e.setAttribute("style","width:200px;height:200px;"),document.body.appendChild(t);var r=t.offsetWidth-t.clientWidth;document.body.removeChild(t),this._scrollbarWidth=r,this._viewers.forEach(function(t){t.viewModel.setScrollbarWidth(r)})},a.prototype.initWorkerUlr=function(){this._workerBlobURL=window.URL.createObjectURL(new Blob(["(",function(){onmessage=function(e){var t=e.data.core,r=e.data.width_source,i=e.data.height_source,n=e.data.width,o=e.data.height,s=r/n,a=i/o,h=Math.ceil(s/2),u=Math.ceil(a/2),l=null;try{l=new Uint8ClampedArray(e.data.source)}catch(t){l=new Uint8Array(e.data.source)}l.length;var c=n*o*4,d=new ArrayBuffer(c),p=null;try{p=new Uint8ClampedArray(d,0,c)}catch(t){p=new Uint8Array(d,0,c)}for(var _=0;_<o;_++)for(var g=0;g<n;g++){for(var f=4*(g+_*n),v=0,m=0,E=0,y=0,b=0,T=0,S=0,w=_*a,M=Math.floor(g*s),P=Math.ceil((g+1)*s),C=Math.floor(_*a),A=Math.ceil((_+1)*a),P=Math.min(P,r),A=Math.min(A,i),I=C;I<A;I++)for(var O=Math.abs(w-I)/u,R=g*s,D=O*O,x=M;x<P;x++){var L,N=Math.abs(R-x)/h,k=Math.sqrt(D+N*N);1<=k||(S+=(v=2*k*k*k-3*k*k+1)*l[3+(L=4*(x+I*r))],E+=v,l[3+L]<255&&(v=v*l[3+L]/250),y+=v*l[L],b+=v*l[1+L],T+=v*l[2+L],m+=v)}p[f]=y/m,p[1+f]=b/m,p[2+f]=T/m,p[3+f]=S/E}var B={core:t,target:p};try{postMessage(B,[p.buffer])}catch(t){postMessage(B)}}}.toString(),")()"],{type:"application/javascript"}))},a.prototype.createViewer=function(t){var s=this;void 0===t&&(t={}),this._dataPubSub.emit(h.privateEvent.UPDATE_LOG_MESSAGE,"Invoking ViewControl#createViewer."),t.pubsub=this._dataPubSub,t.dataStorage=this._dataStorage;var e=o.deepClone(this._defaultConfig);o.mergeJSON(t,e);var r,a,i=new n.Viewer(e,this._ViewUi,this._workerBlobURL,this._scrollbarWidth);return this._viewers.push(i),this._tabData.selectedTabId&&(r=this._tabData.tabs,a=i.viewModel.getTabManager(),r.forEach(function(t){var e=t.name,r=t.pageLists.length,i=[];t.pageLists.forEach(function(t){i.push(t.uid)});var n=a.checkTab(t.uid),o=null;-1!==n?(o=a.getTab(t.uid),i=i.slice(o.pageLists.length),o.totalPages=r):o=a.addTab({uid:t.uid,name:e,type:"file",pageLists:[],currentPage:t.currentPage||0,totalPages:t.totalPages||0,selectedPages:t.selectedPages.slice(),maxWidth:t.maxWidth||0,maxHeight:t.maxHeight||0}),i.forEach(function(t,e){var r=s._dataStorage.getMetadataSync(t),i=new u.Page({uid:t,naturalWidth:r.width,naturalHeight:r.height});o.pageLists.push(i)})}),a.setCurrentTab(this._tabData.selectedTabId),i.viewModel.showTab(this._tabData.selectedTabId)),i},a.prototype.getViewerByUid=function(t){if(void 0===t)return this._viewers[0];for(var e=0;e<this._viewers.length;e++)if(this._viewers[e].uid===t)return this._viewers[e];return null},a.prototype.getViewerByIndex=function(t){return t>=this._viewers.length||t<0?null:this._viewers[t]},a.prototype.removeViewer=function(t){this._dataPubSub.emit(h.privateEvent.UPDATE_LOG_MESSAGE,"Invoking ViewControl#removeViewer.");var e=t;if(!e)return!1;o.isObject(t)&&(e=t.uid);for(var r=0;r<this._viewers.length;r++){var i=this._viewers[r];if(i.uid===e){for(var n in i.unbindView(),i)i[n]=null,delete i[n];return this._viewers.splice(r,1),!0}}return!1},a.prototype.getViewersList=function(){return this._viewers},a.prototype.bindViewUiConstructor=function(t){if(!o.isFunction(t))return this._dataPubSub.emit(h.privateEvent.UPDATE_ERROR_MESSAGE,h.errorMessages.PARAMETER_TYPE),!1;this._ViewUi=t;for(var e=0;e<this._viewers.length;e++)this._viewers[e].ViewUi=t},a.prototype._initEvent=function(){var s=this;window.addEventListener("resize",function(){s._getScrollerWidth()}),this._dataPubSub.on(h.privateEvent.DIRECTORY_CHANGED,function(t){s._viewers.forEach(function(t){})}),this._dataPubSub.on(h.modelEvent.APPEND_FOR_VIEWER,function(e){s._viewers.forEach(function(t){t.viewModel.appendSync(e)})}),this._dataPubSub.on(h.modelEvent.INSERT_FOR_VIEWER,function(e,r){s._viewers.forEach(function(t){t.viewModel.insert(e,r)})}),this._dataPubSub.on(h.modelEvent.UPDATE_FOR_VIEWER,function(e,r){s._viewers.forEach(function(t){t.viewModel.updateSync(e,r)})}),this._dataPubSub.on(h.modelEvent.OPEN_ALL,function(e,r){s._viewers.forEach(function(t){(r&&r===t.uid||!r)&&t.viewModel.openAll(e,r)})}),this._dataPubSub.on(h.modelEvent.REMOVE_SYNC,function(e,t,r,i){s._viewers.forEach(function(t){t.uid!==e&&t.viewModel.removeSync(r,!1)}),s._tabData.tabs.forEach(function(e){e.uid===t.uid&&i.forEach(function(t){e.remove(t)})}),s._dataPubSub.emit(h.modelEvent.REMOVE_FROM_FILE,t.uid,i),s._dataPubSub.emit(h.modelEvent.REMOVE_FROM_TAG,t.uid,i),s._dataPubSub.emit(h.modelEvent.REMOVE_FROM_ALL,i)}),this._dataPubSub.on(h.modelEvent.REMOVE_ALL_SYNC,function(e,r,t){s._viewers.forEach(function(t){t.uid!==e&&t.viewModel.removeAllSync(!1)}),s._tabData.tabs.forEach(function(t){t.uid===r.uid&&t.emptyTab()}),s._dataPubSub.emit(h.modelEvent.REMOVE_FROM_FILE,r.uid,t),s._dataPubSub.emit(h.modelEvent.REMOVE_FROM_TAG,r.uid,t),s._dataPubSub.emit(h.modelEvent.REMOVE_FROM_ALL,t)}),this._dataPubSub.on(h.modelEvent.SET_CURRENT_INDEX,function(e,r){s._viewers.forEach(function(t){t.uid!==e&&t.viewModel.setCurrentIndex(r,!1)})}),this._dataPubSub.on(h.privateEvent.SET_SELECTED_INDEXES,function(e,r){s._viewers.forEach(function(t){t.uid!==e&&t.viewModel.setSelectedIndexes(r,!1)})}),this._dataPubSub.on(h.modelEvent.SWITCH_PAGE,function(e,t,r,i){s._viewers.forEach(function(t){t.uid!==e&&t.viewModel.switchPage(r,i,!1)}),t&&("file"===t.type?s._dataPubSub.emit(h.modelEvent.SWITCH_FOR_FILE,t.uid,r,i):"tag"===t.type?s._dataPubSub.emit(h.modelEvent.SWITCH_FOR_TAG,t.uid,r,i):"all"===t.type&&s._dataPubSub.emit(h.modelEvent.SWITCH_FOR_ALL,r,i))}),this._dataPubSub.on(h.modelEvent.MOVE_PAGE,function(e,t,r,i){s._viewers.forEach(function(t){t.uid!==e&&t.viewModel.switchPage(r,i,!1)}),t&&("file"===t.type?s._dataPubSub.emit(h.modelEvent.MOVE_FOR_FILE,t.uid,r,i):"tag"===t.type?s._dataPubSub.emit(h.modelEvent.MOVE_FOR_TAG,t.uid,r,i):"all"===t.type&&s._dataPubSub.emit(h.modelEvent.MOVE_FOR_ALL,r,i))}),this._dataPubSub.on(h.privateEvent.REORDER_THUMBNAIL,function(e,r){s._viewers.forEach(function(t){t.viewModel.reorderPage(e,r)});for(var t=s._tabData.tabs,i=null,n=0;n<t.length;n++)if(t[n].uid===s._tabData.selectedTabId){i=t[n];break}i&&("file"===i.type?s._dataPubSub.emit(h.modelEvent.REORDER_FOR_FILE,i.uid,e):"tag"===i.type?s._dataPubSub.emit(h.modelEvent.REORDER_FOR_TAG,i.uid,e):"all"===i.type&&s._dataPubSub.emit(h.modelEvent.REORDER_FOR_ALL,e))}),this._dataPubSub.on(h.modelEvent.FIRST_PAGE,function(e){s._viewers.forEach(function(t){t.uid!==e&&t.viewModel.firstPage(!1)})}),this._dataPubSub.on(h.modelEvent.LAST_PAGE,function(e){s._viewers.forEach(function(t){t.uid!==e&&t.viewModel.lastPage(!1)})}),this._dataPubSub.on(h.modelEvent.NEXT_PAGE,function(e){s._viewers.forEach(function(t){t.uid!==e&&t.viewModel.nextPage(!1)})}),this._dataPubSub.on(h.modelEvent.PREV_PAGE,function(e){s._viewers.forEach(function(t){t.uid!==e&&t.viewModel.prevPage(!1)})}),this._dataPubSub.on(h.modelEvent.GOTO_PAGE,function(e,r){s._viewers.forEach(function(t){t.uid!==e&&t.viewModel.gotoPage(r,!1)})}),this._dataPubSub.on(h.modelEvent.OVERLAY_RECTANGLE,function(e){s._viewers.forEach(function(t){t.viewModel._onShowThumbnail([e]),t.viewModel.getSlidePages(),t.viewModel.render()})}),this._dataPubSub.on(h.modelEvent.UPDATE_THUMBNAIL_PAGE,function(e){s._viewers.forEach(function(t){t.viewModel._showThumbnail(e)})}),this._dataPubSub.on(h.modelEvent.UPDATE_SLIDE_PAGE,function(){s._viewers.forEach(function(t){t.viewModel.getSlidePages()})}),this._dataPubSub.on(h.privateEvent.UPDATE_UI_SETTING,function(r,i){s._viewers.forEach(function(t){var e;t.uid===i&&(e=o.deepClone(s._defaultConfig.uiConfig),o.mergeJSON(r,e),t.updateUICallback(e))})}),this._dataPubSub.on(h.modelEvent.REMOVE_PAGE_TAG,function(r,i,e){var t,n=s._dataStorage.getInterlayerDataSync(r);!n||-1!==(t=n.tags.indexOf(i))&&n.tags.splice(t,1),s._dataStorage.getDataAsync(r).then(function(t){var e;!t.tags||-1!==(e=t.tags.indexOf(i))&&(t.tags.splice(e,1),s._dataStorage.updateDataAsync(r,t).catch(function(t){}))}).catch(function(t){}),s._viewers.forEach(function(t){t.viewModel.removePageTag(r,e)})}),this._dataPubSub.on(h.modelEvent.ADD_PAGE_TAG,function(e,r,i){var t=s._dataStorage.getInterlayerDataSync(e);t&&-1===t.tags.indexOf(r)&&t.tags.push(e),s._dataStorage.getDataAsync(e).then(function(t){t.tags&&-1===t.tags.indexOf(r)&&(t.tags.push(e),s._dataStorage.updateDataAsync(e,t).catch(function(t){}))}).catch(function(t){}),s._viewers.forEach(function(t){t.viewModel.addPageTag(e,i)})}),this._dataPubSub.on(h.modelEvent.EMPTY_TAG,function(i,t,e){t.forEach(function(r){var t,e=s._dataStorage.getInterlayerDataSync(r);!e||-1!==(t=e.tags.indexOf(i))&&e.tags.splice(t,1),s._dataStorage.getDataAsync(r).then(function(t){var e;!t.tags||-1!==(e=t.tags.indexOf(i))&&(t.tags.splice(e,1),s._dataStorage.updateDataAsync(r,t).catch(function(t){}))}).catch(function(t){})}),s._viewers.forEach(function(t){t.viewModel.emptyTag(e)})}),this._dataPubSub.on(h.modelEvent.TAG_CHANGED,function(e){s._viewers.forEach(function(t){t.viewModel.changeTag(e)})}),this._dataPubSub.on(h.modelEvent.RENAME_TAG,function(i,n,t,e){t.forEach(function(r){var t,e=s._dataStorage.getInterlayerDataSync(r);!e||-1!==(t=e.tags.indexOf(i))&&e.tags.splice(t,1,n),s._dataStorage.getDataAsync(r).then(function(t){var e;!t.tags||-1!==(e=t.tags.indexOf(i))&&(t.tags.splice(e,1,n),s._dataStorage.updateDataAsync(r,t).catch(function(t){}))}).catch(function(t){})}),s._viewers.forEach(function(t){t.viewModel.renameTag(i,n,e)})}),this._dataPubSub.on(h.modelEvent.OPEN_TAG,function(e,r){s._viewers.forEach(function(t){(r&&r===t.uid||!r)&&t.viewModel.openTag(e,r)})}),this._dataPubSub.on(h.privateEvent.UPDATE_FOCUS,function(t){s._focus=t}),document.addEventListener("keydown",function(t){var e=s._focus,r=e.viewerId,i=e.thumbnailId;if(r)for(var n=0;n<s._viewers.length;n++){var o=s._viewers[n];if(o.uid===r){o.emit(h.uiEvent.DOCUMENT_KEY_DOWN,t,i);break}}}),document.addEventListener("keyup",function(t){var e=s._focus,r=e.viewerId,i=e.thumbnailId;if(r)for(var n=0;n<s._viewers.length;n++){var o=s._viewers[n];if(o.uid===r){o.emit(h.uiEvent.DOCUMENT_KEY_UP,t,i);break}}})},a);function a(t,e,r){var i=this;this.autoShowTab=!0,this._defaultConfig=s.getDefaultConfig(),this._tabData={selectedTabId:null,tabs:[]},this._ViewUi=null,this._workerBlobURL=null,this._scrollbarWidth=0,this._focus={viewerId:void 0,thumbnailId:void 0},this._viewers=[],this._dataPubSub=e,this._dataStorage=r,this._initEvent(),this._dataPubSub.on(h.uiEvent.TAB_CHANGED,function(t){i._tabData=t}),o.mergeJSON(t,this._defaultConfig),o.isIE()||o.isMobile()||this.initWorkerUlr(),this._getScrollerWidth(),this.createViewer()}e.ViewControl=i},function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.Viewer=void 0;var c=r(0),u=r(2),l=r(24),d=r(1),i=(o.prototype._throwError=function(t){this._dataPubSub.emit(d.privateEvent.UPDATE_ERROR_MESSAGE,t)},o.prototype.closeTab=function(t){if(!c.isString(t))return this._throwError(d.errorMessages.PARAMETER_TYPE),!1;this.viewModel.closeTab(t)},o.prototype.closeCurrentTab=function(){return this.viewModel.closeCurrentTab()},o.prototype.emptyTab=function(t){},o.prototype.getCurrentTabId=function(){return this.viewModel.getCurrentTabId()},o.prototype.getTab=function(t){return c.isString(t)?this.viewModel.getTab(t):(this._throwError(d.errorMessages.PARAMETER_TYPE),null)},o.prototype.getCurrentTab=function(){return this.viewModel.getCurrentTab()},o.prototype.getTotalImageCounts=function(){return this.viewModel.getTotalImageCounts()},o.prototype.getCurrentIndex=function(){return this.viewModel.getCurrentIndex()},o.prototype.setCurrentIndex=function(t){return this.viewModel.setCurrentIndex(t)},o.prototype.setSelectedIndexes=function(t){return this.viewModel.setSelectedIndexes(t)},o.prototype.getSelectedIndexes=function(){return this.viewModel.getSelectedIndexes()},o.prototype.selectAll=function(){return this.viewModel.selectAll()},o.prototype.removeSync=function(t){return this.viewModel.removeSync(t)},o.prototype.removeAllSync=function(){return this.viewModel.removeAllSync()},o.prototype.switchPage=function(t,e){return this.viewModel.switchPage(t,e)},o.prototype.movePage=function(t,e){return this.viewModel.movePage(t,e)},o.prototype.getViewerElement=function(){var t;return this._throwError(d.errorMessages.OK),(null===(t=this.ui)||void 0===t?void 0:t.getViewerElement())||null},o.prototype.bindView=function(t,e,r){var i,n,o,s=this;if(void 0===e&&(e={}),void 0===r&&(r=!0),!this.ViewUi)return this._throwError(d.errorMessages.VIEW_UI_REQUIRE),!1;if(!t)return this._throwError(d.errorMessages.PARAMETER_INVALID),!1;if(c.isString(t)&&(t=document.getElementById(t)),!c.isElement(t))return this._throwError(d.errorMessages.PARAMETER_INVALID),!1;this.unbindView(),r?c.mergeJSON(e,this._uiConfig):this._uiConfig=e,this.ui=new this.ViewUi(t,this._uiConfig,this.postfix,this._innerPubSub,this._dataStorage),this._initWebcamCallbacks(this.ui),null!==(i=this.ui)&&void 0!==i&&i.createInnerThumbnail(),null!==(n=this.ui)&&void 0!==n&&n.setDisplayMode(this.displayMode),null!==(o=this.ui)&&void 0!==o&&o.setOperationMode(this.operationMode),this.viewModel.thumbnailViews.forEach(function(t){var e;null!==(e=s.ui)&&void 0!==e&&e.createThumbnail(t)});var a=this.viewModel.getCurrentTab();return a&&(this.viewModel._showThumbnail(a),this.viewModel.getSlidePages(),this.viewModel.updateSelectedIndex(),this.viewModel.onTabChanged(),this._throwError(d.errorMessages.OK)),!0},o.prototype.unbindView=function(){var t;return null!==(t=this.ui)&&void 0!==t&&t.unbindView(),this.ui=null,this._throwError(d.errorMessages.OK),!0},o.prototype.updateUISetting=function(t){return c.isObject(t)?(this._dataPubSub.emit(d.privateEvent.UPDATE_UI_SETTING,t,this.uid),this._throwError(d.errorMessages.OK),!0):(this._throwError(d.errorMessages.PARAMETER_TYPE),!1)},o.prototype.bindContent=function(t){var e;return c.isString(t)&&(t=document.getElementById(t)),c.isElement(t)?null!==(e=this.ui)&&void 0!==e&&e.bindContent(t)?(this._throwError(d.errorMessages.OK),!0):(this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1):(this._throwError(d.errorMessages.PARAMETER_INVALID),!1)},o.prototype.unbindContent=function(){var t;return null!==(t=this.ui)&&void 0!==t&&t.unbindContent()?(this._throwError(d.errorMessages.OK),!0):(this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1)},o.prototype.fullScreen=function(){var t;return null!==(t=this.ui)&&void 0!==t&&t.fullScreen()?(this._throwError(d.errorMessages.OK),!0):(this.ui?this._throwError(d.errorMessages.BROWSER_NOT_SUPPORT):this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1)},o.prototype.cancelFullScreen=function(){var t;return this._throwError(d.errorMessages.OK),null===(t=this.ui)||void 0===t?void 0:t.cancelFullScreen()},o.prototype.fullWebPage=function(){var t;return null!==(t=this.ui)&&void 0!==t&&t.fullPage()?(this._throwError(d.errorMessages.OK),!0):(this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1)},o.prototype.cancelFullWebPage=function(){var t;return null!==(t=this.ui)&&void 0!==t&&t.cancelFullPage()?(this._throwError(d.errorMessages.OK),!0):(this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1)},o.prototype.setButtonClass=function(t,e){var r;if(!c.isString(t)||!c.isString(e))return this._throwError(d.errorMessages.PARAMETER_TYPE),!1;var i=this._uiConfig.buttons[t];return i?(i.setClass=e,null!==(r=this.ui)&&void 0!==r&&r.setButtonClass(t)?(this._throwError(d.errorMessages.OK),!0):(this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1)):(this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1)},o.prototype.setViewMode=function(t,e){var r;return c.isNumber(t)&&c.isNumber(e)?0<t&&0<e?(this._uiConfig.canvasConfig.rows=e,this._uiConfig.canvasConfig.columns=t,this.ui?(this._throwError(d.errorMessages.OK),this.viewModel.rows=e,this.viewModel.columns=t,null===(r=this.ui)||void 0===r?void 0:r.setViewMode(t,e)):(this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1)):(this._throwError(d.errorMessages.PARAMETER_RANGE),!1):(this._throwError(d.errorMessages.PARAMETER_TYPE),!1)},o.prototype.createCustomElement=function(t,e,r){var i;void 0===e&&(e=0),void 0===r&&(r=!1);var n=t;return c.isString(t)&&(n=document.getElementById(t)),c.isElement(n)?(this._throwError(d.errorMessages.OK),null===(i=this.ui)||void 0===i?void 0:i.createCustomElement(n,e,r)):(this._throwError(d.errorMessages.PARAMETER_TYPE),!1)},o.prototype.updateVideoContainer=function(t){return this.ui?(c.isString(t)||this._throwError(d.errorMessages.PARAMETER_TYPE),this.ui.updateVideoContainer(t),this._throwError(d.errorMessages.OK),!0):(this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1)},o.prototype.updateUICallback=function(t){var e,r=null===(e=this.ui)||void 0===e?void 0:e.containerBox;r&&this.bindView(r,t,!1)},o.prototype.setLoadingImage=function(t){var e;this.uiConfig.canvasConfig.loadingImageUrl=t,null!==(e=this.ui)&&void 0!==e&&e.setLoadingImage(t)},o.prototype.nextPage=function(){return this.viewModel.nextPage()},o.prototype.prevPage=function(){return this.viewModel.prevPage()},o.prototype.firstPage=function(){return this.viewModel.firstPage()},o.prototype.lastPage=function(){return this.viewModel.lastPage()},o.prototype.gotoPage=function(t){return this.viewModel.gotoPage(t)},o.prototype.createThumbnailView=function(t){var e;if(void 0===t&&(t={}),this._dataPubSub.emit(d.privateEvent.UPDATE_LOG_MESSAGE,"Invoking viewer#createThumbnailView."),!c.isObject(t))return this._throwError(d.errorMessages.PARAMETER_TYPE),null;var r,i=[],n=this.viewModel.createThumbnailView(this._uiConfig.thumbnail);return n._init(t,i),null!==(e=this.ui)&&void 0!==e&&e.createThumbnail(n),i.length?(r="Failed to create the thumbnail viewer because the parameter "+i[0]+" is incorrect.",this._throwError({code:80024,message:r})):this._throwError(d.errorMessages.OK),n},o.prototype.removeThumbnailView=function(t){var e;this._dataPubSub.emit(d.privateEvent.UPDATE_LOG_MESSAGE,"Invoking viewer#removeThumbnailView.");var r=t;return c.isString(t)||(r=t.uid),this.viewModel.removeThumbnailView(r)?(null!==(e=this.ui)&&void 0!==e&&e.removeThumbnail(r),this._throwError(d.errorMessages.OK),!0):(this._throwError(d.errorMessages.PARAMETER_INVALID),!1)},o.prototype.getThumbnailViewById=function(t){return this.viewModel.getThumbnailViewById(t)},o.prototype.getThumbnailViewsList=function(){return this.viewModel.thumbnailViews},o.prototype.getIndexByUid=function(t){return this.viewModel.getIndexByUid(t)},o.prototype.getUidByIndex=function(t){return this.viewModel.getUidByIndex(t)},o.prototype.getRealTimeMetadataByIndex=function(t){return this.viewModel.getRealTimeMetadataByIndex(t)},o.prototype.getMetadataByIndex=function(t){return this.viewModel.getMetadataByIndex(t)},o.prototype.setMetadataByIndex=function(t,e){return this.viewModel.setMetadataByIndex(t,e)},o.prototype.getCustomDataByIndex=function(t){return this.viewModel.getCustomDataByIndex(t)},o.prototype.zoomIn=function(){return this.viewModel.zoomIn()},o.prototype.zoomOut=function(){return this.viewModel.zoomOut()},o.prototype.zoomTo=function(t,e,r){return this.viewModel.zoomTo(t,e,r)},o.prototype.reset=function(){return this.viewModel.reset()},o.prototype.mirror=function(){return this.viewModel.flip(1)},o.prototype.flip=function(){return this.viewModel.flip(0)},o.prototype.rotate=function(t,e){return this.viewModel.rotate(t,e)},o.prototype.crop=function(t,e,r,i){return this.viewModel.crop(t,e,r,i)},o.prototype.erase=function(t,e,r,i,n){return this.viewModel.erase(t,e,r,i,n)},o.prototype.overlayRectangle=function(t,e,r,i,n,o,s){return this.viewModel.overlay(t,e,r,i,n,o,s)},o.prototype.changePageSize=function(t,e){return this.viewModel.changePageSize(t,e)},o.prototype.saveTransformation=function(){return this.viewModel.saveTransformation()},o.prototype.getMinPageData=function(){return"single"===this.displayMode?this.viewModel.getMinPageData():"continuous"===this.displayMode?null:void 0},o.prototype.setFreeSelectedBox=function(t){return this.viewModel.setFreeSelectedBox(t)},o.prototype.setSelectedBoxes=function(t,e){var r;if(1!==this.operationMode)return this._throwError(d.errorMessages.OPERATION_MODE_ERROR),!1;if(void 0===t)return this._throwError(d.errorMessages.PARAMETER_TYPE),!1;if(void 0!==e&&!c.isBoolean(e))return this._throwError(d.errorMessages.PARAMETER_TYPE),!1;var i=this.getCurrentTab();if(!i)return this._throwError(d.errorMessages.IMG_NOT_EXIST),!1;var n=i.getCurrentPage();if(void 0===n)return this._throwError(d.errorMessages.IMG_NOT_EXIST),!1;var o=null;if(c.isArray(t)){if(0===(o=t).length)return this._throwError(d.errorMessages.PARAMETER_INVALID),!1}else{if(!c.isObject(t))return this._throwError(d.errorMessages.PARAMETER_TYPE),!1;o=[t]}for(var s=o.length,a=n.naturalWidth,h=n.naturalHeight,u=0;u<s;u++){var l=o[u];if(!(c.isNumber(l.left)&&c.isNumber(l.top)&&c.isNumber(l.width)&&c.isNumber(l.height)))return this._throwError(d.errorMessages.PARAMETER_TYPE),!1;l.left<0&&(l.left=0),l.top<0&&(l.top=0),l.width<=0&&(l.width=1),l.height<=0&&(l.height=1),l.width+l.left>a&&(l.width=a-l.left),l.height+l.top>h&&(l.height=h-l.top)}return"single"===this.displayMode?this.viewModel.setSelectedBoxes(t,e):null!==(r=this.ui)&&void 0!==r&&r.setSelectedBoxes(t,e),this._throwError(d.errorMessages.OK),!0},o.prototype.clearSelectedBoxes=function(t){var e;return this.viewModel.clearSelectedBoxes(t),null!==(e=this.ui)&&void 0!==e&&e.clearSelectedBoxes(t),this._throwError(d.errorMessages.OK),!0},o.prototype.render=function(){var t,e;if(null!==(t=this.ui)&&void 0!==t&&t.containerBox){var r=null===(e=this.ui)||void 0===e?void 0:e.containerBox;return this.bindView(r),this._throwError(d.errorMessages.OK),!0}return this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1},o.prototype.on=function(t,e){c.isString(t)&&c.isFunction(e)?(this._innerPubSub.on(t,e),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},o.prototype.emit=function(t){for(var e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];c.isString(t)?((e=this._innerPubSub).emit.apply(e,n([t],r)),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},o.prototype.off=function(t,e){c.isString(t)&&(void 0===e||c.isFunction(e))?(this._innerPubSub.off(t,e),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},Object.defineProperty(o.prototype,"zoom",{get:function(){return this.viewModel.getZoom()},set:function(t){c.isNumber(t)?t<=0?this._throwError(d.errorMessages.PARAMETER_RANGE):(this.viewModel.setZoom(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"minZoom",{get:function(){return this._config.minZoom},set:function(t){c.isNumber(t)?t<=0?this._throwError(d.errorMessages.PARAMETER_RANGE):(this._config.minZoom=t,this.viewModel.setMinZoom(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"maxZoom",{get:function(){return this._config.maxZoom},set:function(t){c.isNumber(t)?t<=0?this._throwError(d.errorMessages.PARAMETER_RANGE):(this._config.maxZoom=t,this.viewModel.setMaxZoom(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showViewer",{get:function(){return this._uiConfig.showViewer},set:function(t){var e;c.isBoolean(t)?(this._uiConfig.showViewer=t,null!==(e=this.ui)&&void 0!==e&&e.setShowViewer(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showHeader",{get:function(){return this._uiConfig.toolbars.header},set:function(t){var e;c.isBoolean(t)?(this._uiConfig.toolbars.header=t,null!==(e=this.ui)&&void 0!==e&&e.setShowHeader(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"headerColor",{get:function(){return this._uiConfig.headerColor},set:function(t){var e;c.isColor(t)?(this._uiConfig.headerColor=t,null!==(e=this.ui)&&void 0!==e&&e.setHeaderColor(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showTopMenu",{get:function(){return this._uiConfig.toolbars.topMenu},set:function(t){var e;c.isBoolean(t)?(this._uiConfig.toolbars.topMenu=t,null!==(e=this.ui)&&void 0!==e&&e.setShowTopMenu(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"topMenuColor",{get:function(){return this._uiConfig.topMenuColor},set:function(t){var e;c.isColor(t)?(this._uiConfig.topMenuColor=t,null!==(e=this.ui)&&void 0!==e&&e.setTopMenuColor(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"topMenuBorder",{get:function(){return this._uiConfig.topMenuBorder},set:function(t){var e;c.isBorder(t)?(this._uiConfig.topMenuBorder=t,null!==(e=this.ui)&&void 0!==e&&e.setTopMenuBorder(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showSidebar",{get:function(){return this._uiConfig.showSidebar},set:function(t){var e;c.isBoolean(t)?(this._uiConfig.showSidebar=t,null!==(e=this.ui)&&void 0!==e&&e.setShowSidebar(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showAside",{get:function(){return this._uiConfig.toolbars.asideMenu},set:function(t){var e;c.isBoolean(t)?(this._uiConfig.toolbars.showAsideMenu=t,null!==(e=this.ui)&&void 0!==e&&e.setShowAside(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showMain",{get:function(){return this._uiConfig.showMain},set:function(t){var e;c.isBoolean(t)?(this._uiConfig.showMain=t,null!==(e=this.ui)&&void 0!==e&&e.setShowMain(t),this.emit(d.privateEvent.CANVAS_VISIBILITY_CHANGED,t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showFooter",{get:function(){return this._uiConfig.toolbars.bottomMenu},set:function(t){var e;c.isBoolean(t)?(this._uiConfig.toolbars.bottomMenu=t,null!==(e=this.ui)&&void 0!==e&&e.setShowFooter(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showTab",{get:function(){return this._uiConfig.showTab},set:function(t){var e;c.isBoolean(t)?(this._uiConfig.showTab=t,null!==(e=this.ui)&&void 0!==e&&e.setShowTab(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"footerColor",{get:function(){return this._uiConfig.footerColor},set:function(t){var e;c.isColor(t)?(this._uiConfig.footerColor=t,null!==(e=this.ui)&&void 0!==e&&e.setFooterColor(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showVideoContainer",{get:function(){return this._uiConfig.showVideoContainer},set:function(t){var e;c.isBoolean(t)||this._throwError(d.errorMessages.PARAMETER_TYPE),this._uiConfig.showVideoContainer=t,null!==(e=this.ui)&&void 0!==e&&e.setShowVideoContainer(t),this._throwError(d.errorMessages.OK)},enumerable:!1,configurable:!0}),o.prototype.setShowVideoContainer=function(t){return this.ui?(c.isBoolean(t)||this._throwError(d.errorMessages.PARAMETER_TYPE),this.ui.setShowVideoContainer(t),this._throwError(d.errorMessages.OK),!0):(this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1)},Object.defineProperty(o.prototype,"fitType",{get:function(){return this.viewModel.getFitType()},set:function(t){this.viewModel.setFitType(t)&&(this._config.fitType=t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"canvasMouseShape",{get:function(){return this._uiConfig.canvasConfig.canvasMouseShape},set:function(t){var e;c.isString(t)?(this._uiConfig.canvasConfig.canvasMouseShape=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasMouseShape(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"canvasBackground",{get:function(){return this._uiConfig.canvasConfig.canvasBackground},set:function(t){var e;c.isColor(t)?(this._uiConfig.canvasConfig.canvasBackground=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasBackground(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"selectedBoxLineColor",{get:function(){return this.viewModel.getCropLineColor()},set:function(t){var e;c.isColor(t)?(this._uiConfig.canvasConfig.selectedBoxLineColor=t,this.viewModel.setCropLineColor(t),null!==(e=this.ui)&&void 0!==e&&e.setSelectedBoxLineColor(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"saveBackgroundColor",{get:function(){return this.viewModel.getSaveBackgroundColor()},set:function(t){this.viewModel.setSaveBackgroundColor(t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"saveQuality",{get:function(){return this.viewModel.getSaveQuality()},set:function(t){this.viewModel.setSaveQuality(t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"saveType",{get:function(){return this.viewModel.getSaveType()},set:function(t){this.viewModel.setSaveType(t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"rotateMode",{get:function(){return this.viewModel.getRotateMode()},set:function(t){this.viewModel.setRotateMode(t)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"canvasBorder",{get:function(){return this._uiConfig.canvasConfig.canvasBorder},set:function(t){var e;c.isBorder(t)?(this._uiConfig.canvasConfig.canvasBorder=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasBorder(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pageBackground",{get:function(){return this._uiConfig.canvasConfig.pageBackground},set:function(t){var e;c.isColor(t)?(this._uiConfig.canvasConfig.pageBackground=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasPageBackground(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pageBorder",{get:function(){return this._uiConfig.canvasConfig.pageBorder},set:function(t){var e;c.isBorder(t)?(this._uiConfig.canvasConfig.pageBorder=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasPageBorder(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"selectedPageBackground",{get:function(){return this._uiConfig.canvasConfig.selectedPageBackground},set:function(t){var e;c.isColor(t)?(this._uiConfig.canvasConfig.selectedPageBackground=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasSelectedPageBackground(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"selectedPageBorder",{get:function(){return this._uiConfig.canvasConfig.selectedPageBorder},set:function(t){var e;c.isBorder(t)?(this._uiConfig.canvasConfig.selectedPageBorder=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasSelectedPageBorder(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hoverPageBorder",{get:function(){return this._uiConfig.canvasConfig.hoverPageBorder},set:function(t){var e;c.isBorder(t)?(this._uiConfig.canvasConfig.hoverPageBorder=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasHoverPageBorder(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hoverPageBackground",{get:function(){return this._uiConfig.canvasConfig.hoverPageBackground},set:function(t){var e;c.isColor(t)?(this._uiConfig.canvasConfig.hoverPageBackground=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasHoverPageBackground(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"placeholderBackground",{get:function(){return this._uiConfig.canvasConfig.placeholderBackground},set:function(t){var e;c.isColor(t)?(this._uiConfig.canvasConfig.placeholderBackground=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasPlaceholderBackground(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showPageNumber",{get:function(){return this._uiConfig.canvasConfig.showPageNumber},set:function(t){var e;c.isBoolean(t)?(this._uiConfig.canvasConfig.showPageNumber=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasShowPageNumber(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"allowPageDragging",{get:function(){return this._uiConfig.canvasConfig.allowPageDragging},set:function(t){var e;c.isBoolean(t)?(this._uiConfig.canvasConfig.allowPageDragging=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasAllowPageDragging(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"allowKeyboardControl",{get:function(){return this._uiConfig.canvasConfig.allowKeyboardControl},set:function(t){var e;c.isBoolean(t)?(this._uiConfig.canvasConfig.allowKeyboardControl=t,null!==(e=this.ui)&&void 0!==e&&e.setCanvasAllowKeyboardControl(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pageMargin",{get:function(){return this._uiConfig.canvasConfig.pageMargin},set:function(t){var e;c.isSize(t)?(this._uiConfig.canvasConfig.pageMargin=t,this.viewModel.setPageMargin(t),null!==(e=this.ui)&&void 0!==e&&e.setCanvasPageMargin(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"scrollDirection",{get:function(){return this._uiConfig.canvasConfig.scrollDirection},set:function(t){var e;c.isString(t)?(this._uiConfig.canvasConfig.scrollDirection=t,null!==(e=this.ui)&&void 0!==e&&e.setScrollDirection(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"outerBorder",{get:function(){return this._uiConfig.outerBorder},set:function(t){var e;c.isBorder(t)?(this._uiConfig.outerBorder=t,null!==(e=this.ui)&&void 0!==e&&e.setOuterBorder(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sidebarWidth",{get:function(){return this._uiConfig.sidebarWidth},set:function(t){var e;c.isSize(t)?(this._uiConfig.sidebarWidth=t,null!==(e=this.ui)&&void 0!==e&&e.setSidebarWidth(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){var t;return(null===(t=this.ui)||void 0===t?void 0:t.getViewerWidth())||this._uiConfig.width},set:function(t){var e;c.isSize(t)?(this._uiConfig.width=t,null!==(e=this.ui)&&void 0!==e&&e.setViewerWidth(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){var t;return(null===(t=this.ui)||void 0===t?void 0:t.getViewerHeight())||this._uiConfig.height},set:function(t){var e;c.isSize(t)?(this._uiConfig.height=t,null!==(e=this.ui)&&void 0!==e&&e.setViewerHeight(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"uiConfig",{get:function(){return this._uiConfig},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showLatestImage",{get:function(){return this.viewModel.showLatestImage},set:function(t){c.isBoolean(t)?(this.viewModel.showLatestImage=t,this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"operationMode",{get:function(){return this._config.operationMode},set:function(t){var e;c.isNumber(t)?-1!==[0,1,2].indexOf(t)?(this._config.operationMode=t,this.viewModel.setOperationMode(t),null!==(e=this.ui)&&void 0!==e&&e.setOperationMode(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_INVALID):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"allowSlide",{get:function(){return this.viewModel.getAllowSlide()},set:function(t){c.isBoolean(t)?(this.viewModel.setAllowSlide(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"tabMode",{get:function(){return this._config.tabMode},set:function(t){"single"===t||"multiple"===t?(this._config.tabMode=t,this.viewModel.setTabMode(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"selectionBoxAspectRatio",{get:function(){return this.viewModel.getAspectRatio()},set:function(t){var e;c.isNumber(t)?(this.viewModel.setAspectRatio(t),null!==(e=this.ui)&&void 0!==e&&e.setAspectRatio(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"keepAspectRatio",{get:function(){return this.viewModel.getKeepAspectRatio()},set:function(t){c.isBoolean(t)?this.viewModel.setKeepAspectRatio(t):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"displayMode",{get:function(){return this._config.displayMode},set:function(t){var e;c.isString(t)?-1!==["single","continuous"].indexOf(String(t))?(this._config.displayMode=t,null!==(e=this.ui)&&void 0!==e&&e.setDisplayMode(t),this.viewModel.setDisplayMode(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_RANGE):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"zooming",{get:function(){return this._config.zooming},set:function(t){c.isBoolean?(this._config.zooming=t,this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"scrollX",{get:function(){return this._config.scrollX},set:function(t){c.isBoolean?(this._config.scrollX=t,this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"scrollY",{get:function(){return this._config.scrollY},set:function(t){c.isBoolean?(this._config.scrollY=t,this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"keepZoom",{get:function(){return this._config.keepZoom},set:function(t){c.isBoolean(t)?(this._config.keepZoom=t,this.viewModel.setKeepZoom(t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ifAllowSlide",{get:function(){return this._config.ifAllowSlide},set:function(t){c.isBoolean(t)?(this._config.ifAllowSlide=t,this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"zoomInDelta",{get:function(){return this._config.zoomInDelta},set:function(t){c.isNumber(t)?t<=0?this._throwError(d.errorMessages.PARAMETER_RANGE):(this._config.zoomInDelta=t,this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"zoomOutDelta",{get:function(){return this._config.zoomOutDelta},set:function(t){c.isNumber(t)?t<=0?this._throwError(d.errorMessages.PARAMETER_RANGE):(this._config.zoomOutDelta=t,this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"zoomDelta",{get:function(){return this._config.zoomDelta},set:function(t){c.isNumber(t)?t<=0?this._throwError(d.errorMessages.PARAMETER_RANGE):(this._config.zoomDelta=t,this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"useOuterDrop",{get:function(){return this._uiConfig.useOuterDrop},set:function(t){c.isBoolean(t)?(this._uiConfig.useOuterDrop=t,this.ui&&(this.ui.useMyEvent=!t),this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"currentPageCount",{get:function(){return this.viewModel.getCurrentPageCounts()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"showLatestPage",{get:function(){return this._config.showLatestPage},set:function(t){c.isBoolean(t)?(this._config.showLatestPage=t,this.viewModel.showLatestImage=t,this._throwError(d.errorMessages.OK)):this._throwError(d.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),o.prototype.bindCamera=function(t){return this._licenseCallback&&0!==this._licenseCallback().errorCode?(this._throwError(d.errorMessages.WEBCAM_LICENSE_INVALID),!1):c.isFunction(t)?this._cameraClass?(this._throwError(d.errorMessages.OK),!0):(this._cameraClass=t,this.ui?void this._initWebcamCallbacks(this.ui):(this._throwError(d.errorMessages.OK),!0)):(this._throwError(d.errorMessages.PARAMETER_TYPE),!1)},o.prototype.showVideo=function(t,e,r,i){var n;return void 0===r&&(r="picture"),void 0===i&&(i=!1),this.ui?null===(n=this.ui)||void 0===n?void 0:n.showVideo(t,e,r||"picture",i):Promise.reject(d.errorMessages.ELEMENT_NOT_EXIST)},o.prototype.closeVideo=function(){var t;return this.ui?null===(t=this.ui)||void 0===t?void 0:t.closeVideo():(this._throwError(d.errorMessages.ELEMENT_NOT_EXIST),!1)},o.prototype.bindAreaDetectFunction=function(t){return c.isFunction(t)?(this._areaDetectCallback=t,this.ui?this.ui.bindAreaDetectFunction(t):(this._throwError(d.errorMessages.OK),!0)):(this._throwError(d.errorMessages.PARAMETER_TYPE),!1)},o.prototype.bindPerspectiveFunction=function(t){return c.isFunction(t)?(this._perspectiveCallback=t,this.ui?this.ui.bindPerspectiveFunction(t):(this._throwError(d.errorMessages.OK),!0)):(this._throwError(d.errorMessages.PARAMETER_TYPE),!1)},o.prototype.bindLicenseCallback=function(t){return c.isFunction(t)?(this._licenseCallback=t,this.ui?this.ui.bindLicenseCallback(t):(this._throwError(d.errorMessages.OK),!0)):(this._throwError(d.errorMessages.PARAMETER_TYPE),!1)},o.prototype.bindSavePhotoCallback=function(t){return c.isFunction(t)?(this._savePhotoCallback=t,this.ui?this.ui.bindSavePhotoCallback(t):(this._throwError(d.errorMessages.OK),!0)):(this._throwError(d.errorMessages.PARAMETER_TYPE),!1)},o.prototype._initWebcamCallbacks=function(t){c.isFunction(this._cameraClass)&&(t.bindCamera(this._cameraClass),this._areaDetectCallback&&t.bindAreaDetectFunction(this._areaDetectCallback),this._perspectiveCallback&&t.bindPerspectiveFunction(this._perspectiveCallback),this._savePhotoCallback&&t.bindSavePhotoCallback(this._savePhotoCallback))},o);function o(t,e,r,i){var n=this;this.ViewUi=null,this._config={},this._cameraClass=null,this._areaDetectCallback=null,this._perspectiveCallback=null,this._licenseCallback=null,this._savePhotoCallback=null,this.uid=c.uid(6),this.postfix="-"+this.uid,this._dataPubSub=t.pubsub,this._innerPubSub=new u.PublishSubscribe,this._dataStorage=t.dataStorage,this.ViewUi=e;var o=t.uiConfig,s=t.container;for(var a in this._config=t,this._uiConfig=o,this.viewModel=new l.ViewModel(t,this._innerPubSub,this._dataPubSub,this.uid,r,i),this.bindView(s),t)"uiConfig"!==a&&"container"!==a&&"canvas"!==a&&"pubsub"!==a&&"dataStorage"!==a&&(this[a]=t[a]);var h=o.canvasConfig;for(var a in h)this[a]=h[a];this._innerPubSub.on(d.privateEvent.UPDATE_FOCUS,function(t){n._dataPubSub.emit(d.privateEvent.UPDATE_FOCUS,t)}),this._innerPubSub.on(d.modelEvent.GOTO_PAGE,function(t){n.gotoPage(t)})}e.Viewer=i},function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.ViewModel=void 0;var a=r(25),h=r(28),i=r(36),S=r(1),w=r(0),g=r(11),o=(s.prototype.renderSelectedBoxes=function(){var t,e;"single"===this._graphic.displayMode&&(!(t=this._tabManager.getCurrentTab())||(e=t.getCurrentPage())&&this._graphic.renderSelectedBoxes(e.uid))},s.prototype.render=function(t,e){t=t||!1,e=e||!1;var r,i=this._tabManager.getCurrentTab();i?(this._graphic._layoutSingle(i,t,e),(r=i.getCurrentPage())?(this._checkDisplay(i),this._showPage(r.uid,i.uid),this._throwError(S.errorMessages.OK)):this._throwError(S.errorMessages.PAGE_NOT_EXIST)):this._throwError(S.errorMessages.IMG_NOT_EXIST)},s.prototype.appendSync=function(t,e){var n=this,r=this.getCurrentTab(),i=t.name,o=t.children,s=t.treeId,a=o.length,h=null;if(r){if(r.name!==i||r.uid!==s)return void("tag"===r.type?this._dataPubSub.emit(S.modelEvent.APPEND_TO_OPEN_TAG,r.name,this.uid):"All"===r.name?this._dataPubSub.emit(S.modelEvent.APPEND_TO_OPEN_ALL,this.uid):r.type);(h=this._tabManager.getTab(s)).totalHeight;var u,o=o.slice(h.pageLists.length);h.totalPages=a,this.showLatestImage&&((u=h.getCurrentPage())&&0<u.cropManager.cropBoxes.length&&(u.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,h.getCurrentIndex())),h.currentPage=a-1)}else h=this._tabManager.addTab({uid:s,name:i,type:"file",pageLists:[],currentPage:this.showLatestImage?a-1:0,totalPages:a});o.forEach(function(t,e){var r=n._dataStorage.getMetadataSync(t);r.width>h.maxWidth&&(h.maxWidth=r.width),r.height>h.maxHeight&&(h.maxHeight=r.height);var i=new g.Page({uid:t,naturalWidth:r.width,naturalHeight:r.height});h.pageLists.push(i)}),this.showLatestImage&&(h.currentPage=0<a-1?a-1:0),this._tabManager.setCurrentTab(s);var l={selectedTabId:s,tabs:this._tabManager.tabLists};this._innerPubSub.emit(S.uiEvent.TAB_CHANGED,l),this._dataPubSub.emit(S.uiEvent.TAB_CHANGED,l),this.showTab(s),0===a&&this._graphic.clearCanvas(),this.showLatestImage?this._setSelectedIndexes([a-1],"add"):this._setSelectedIndexes([h.currentPage],"add")},s.prototype.onTabChanged=function(){var t={selectedTabId:this._tabManager.selectedTabId,tabs:this._tabManager.tabLists};this._innerPubSub.emit(S.uiEvent.TAB_CHANGED,t)},s.prototype.insert=function(t,e){var r=t.name,i=t.children.slice(),n=t.treeId,o=i.length,s=null,a=(this._tabManager.checkTab(n),o),h=this.getCurrentTab();if(h){if(h.name!==r||h.uid!==n)return void("All"===h.name&&this._dataPubSub.emit(S.modelEvent.APPEND_TO_OPEN_ALL,this.uid));var u=(s=this._tabManager.getTab(n)).pageLists.length,a=i.length-u;this.showLatestImage&&((p=s.getCurrentPage())&&0<p.cropManager.cropBoxes.length&&(p.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,s.getCurrentIndex())),s.currentPage=e+a-1)}else e=0,s=this._tabManager.addTab({uid:n,name:r,type:"file",pageLists:[],currentPage:this.showLatestImage&&0<o-1?o-1:0,totalPages:o});for(var l=0;l<a;l++){var c=i[e+l],d=this._dataStorage.getMetadataSync(c);d.width>s.maxWidth&&(s.maxWidth=d.width),d.height>s.maxHeight&&(s.maxHeight=d.height);var p=new g.Page({uid:c,naturalWidth:d.width,naturalHeight:d.height});s.pageLists.splice(e+l,0,p)}s.totalPages=o,this.showLatestImage&&(s.currentPage=e+a-1),this._tabManager.setCurrentTab(n);var _=this._tabManager.tabLists;this._innerPubSub.emit(S.uiEvent.TAB_CHANGED,{selectedTabId:n,tabs:_}),this.showTab(n),0===o&&this._graphic.clearCanvas(),this.showLatestImage?this._setSelectedIndexes([e+a-1],"add"):this._setSelectedIndexes([s.currentPage],"add")},s.prototype.updateSync=function(t,e){var r=this,i=this.getCurrentTab();if(i){for(var n=i.pageLists,o=new g.Page({uid:t,naturalWidth:e.metadata.width||0,naturalHeight:e.metadata.height||0}),s=0;s<n.length;s++)if(n[s].uid===t){n[s]=o;break}i.getCurrentUid()===t&&(this._graphic.canvasManager.getOffCanvas().uid=null),this._showThumbnail(i);var a=this.getIndexByUid(t);this._onShowThumbnail([a]),this._graphic._layoutSingle(i,!0),this._graphic.initGraphic(i),this._checkDisplay(i),n.forEach(function(t){r._showPage(t.uid,i.uid,!0)}),this.getSlidePages(),this._bufferChanged(i,"modify")}},s.prototype.openAll=function(t,e){var n=this,o=null,r=null,i=null,s="filter";if(e){if(!(o=this.getCurrentTab()))return;s="add",r=t.children.slice(o.pageLists.length),i=t.children.length,o.totalPages+=r.length}else{if(-1!==this._tabManager.checkTab(t.uid))return;i=t.children.length,r=t.children.slice(),o=this._tabManager.addTab({uid:t.uid,name:t.name,type:"file",pageLists:[],currentPage:this.showLatestImage&&0<i-1?i-1:0,totalPages:i})}r.forEach(function(t,e){var r=n._dataStorage.getMetadataSync(t);r.width>o.maxWidth&&(o.maxWidth=r.width),r.height>o.maxHeight&&(o.maxHeight=r.height);var i=new g.Page({uid:t,naturalWidth:r.width,naturalHeight:r.height});o.pageLists.push(i)}),this.showLatestImage&&(o.currentPage=0<i-1?i-1:0),this._tabManager.setCurrentTab(t.uid);var a={selectedTabId:t.uid,tabs:this._tabManager.tabLists};return this._innerPubSub.emit(S.uiEvent.TAB_CHANGED,a),this._dataPubSub.emit(S.uiEvent.TAB_CHANGED,a),this.showTab(t.uid),0===i&&this._graphic.clearCanvas(),this.showLatestImage?this._setSelectedIndexes([i-1],s):this._setSelectedIndexes([o.currentPage],s),t.children.slice()},s.prototype.setTabMode=function(t){-1!==["single","multiple"].indexOf(t)&&(this.tabMode=t)},s.prototype.showTab=function(e){var r=this,t=this._tabManager.getTab(e),i=t.pageLists;this._showThumbnail(t),this._graphic.initGraphic(t),this._graphic._layoutSingle(t,!0),this._checkDisplay(t),i.forEach(function(t){r._showPage(t.uid,e)}),this.getSlidePages()},s.prototype._showCurrentTab=function(){var t=this.getCurrentTab();t&&this.showTab(t.uid)},s.prototype.getSlidePages=function(){var t=this._tabManager.getCurrentTab();if(t){var e=t.getCurrentIndex(),r=[],i=t.totalPages;0!==i&&(0<=e-1&&r.push(e-1),r.push(e),e+1<i&&r.push(e+1));for(var n=r.length,o=0;o<n;o++)this.showThumbnail(r[o],!0);this._setSlidePages()}},s.prototype._setSlidePages=function(){var e=this,r=this.getCurrentTab();if(r){var i,n=r.getCurrentIndex(),t=r.totalPages,o=[],s=[],s=[null,null,null];return 0!==t&&(0<=n-1&&(s[0]=n-1),(s[1]=n)+1<t&&(s[2]=n+1)),s.forEach(function(t){i=e._calcSlidePage(t,n,r),o.push(i)}),this._graphic.setSlidePages(o),o}},s.prototype._calcSlidePage=function(t,e,r){if(null===t)return{width:0,height:0,index:-1,uid:"",url:""};var i=this.getUidByIndex(t),n=this._dataStorage.getMetadataSync(i),o=this._dataStorage.getInterlayerDataSync(i),s=r.getPageByIndex(t);if(!n||!o||!s)return{width:0,height:0,index:-1,uid:"",url:""};var a=this._graphic._zoom;return t!==e&&(a=this._graphic.calcZoomForSlide(n.width||1,n.height||1)),{width:(s.naturalWidth||0)*a,height:(s.naturalHeight||0)*a,index:t,uid:i,url:o.minData||""}},s.prototype._showThumbnail=function(t){var e=t.pageLists||[],r=e.length;t.thumbnail.clear();for(var i=0;i<r;i++){var n,o=e[i],s=(s=o.editor2d.getLatestResult())?s.slice():[],a=this._dataStorage.getInterlayerDataSync(e[i].uid);a&&(n={uid:o.uid,data:a.minData,tags:a.tags.slice(),matrix:s,optimization:a.optimization},t.addThumbnailItem(n))}var h=t.getThumbnailContents();this.emit(S.uiEvent.THUMBNAIL_CHANGED,h)},s.prototype._showPage=function(i,n,o){var s,t,a,h=this;n!==this._tabManager.selectedTabId||(s=this._dataStorage.getInterlayerDataSync(i))&&-1!==s.show.indexOf(this.uid)&&(this._graphic.renderDefaultLoading(i),o||!s.img?!o&&s.active?(t=setTimeout(function(){h._graphic.renderDefaultLoading(i)},100),setTimeout(function(){clearTimeout(t),h._showPage(i,n)},20)):(s.active=!0,a=setTimeout(function(){h._graphic.renderDefaultLoading(i)},100),this._dataStorage.getDataAsync(i).then(function(t){var e=h._createUrl(t.oriData);s.oriData=e.data,s.oriType=e.type;var r=new Image;h.allowCrossOrigin&&(r.crossOrigin="anonymous"),r.src=s.oriData,r.onload=function(){o&&(h._graphic.canvasManager.getOffCanvas().uid=null),s.img=r,clearTimeout(a),h._showPage(i,n)},r.onerror=function(){}}).catch(function(t){s.active=!1})):this._graphic.render(i))},s.prototype._checkDisplay=function(s){var a=this;if("single"===s.displayMode){var t=s.pageLists,h=s.getCurrentPage();if(!h)return;s.getCurrentIndex(),t.forEach(function(t,e){var r=a._dataStorage.getInterlayerDataSync(t.uid),i=a._graphic.checkDisplay(t.uid,s),i=t.uid===h.uid,n=r.show,o=n.indexOf(a.uid);i?-1===o&&n.push(a.uid):(-1!==o&&n.splice(o,1),0===n.length&&("object"===r.oriType&&a._revokeUrl(r.oriData),r.active=!1,r.load=!1,r.img=null,r.oriData=null))})}else s.displayMode},s.prototype.getTabManager=function(){return this._tabManager},s.prototype.closeTab=function(t){return!!this._tabManager.closeTab(t)&&(this._innerPubSub.emit("_onCloseTab",t),!0)},s.prototype.closeCurrentTab=function(){},s.prototype.emptyTab=function(t){},s.prototype.getCurrentTabId=function(){return this._tabManager.selectedTabId},s.prototype.getTab=function(t){return this._tabManager.getTab(t)},s.prototype.getCurrentTab=function(){return this._tabManager.getCurrentTab()},s.prototype.getCurrentPageCounts=function(){var t=this.getCurrentTab();return t?t.pageLists.length:0},s.prototype.getTotalImageCounts=function(){},s.prototype.createThumbnailView=function(t){void 0===t&&(t={});var e=new i.ThumbnailView(t,this._dataPubSub);return this.thumbnailViews.push(e),e},s.prototype.removeThumbnailView=function(t){var e=t;if(!t)return this.thumbnailViews=[],!0;w.isString(t)||(e=t.uid);for(var r=null,i=0;i<this.thumbnailViews.length;i++)if(this.thumbnailViews[i].uid===e){r=i;break}return null!==r&&(this.thumbnailViews.splice(r,1),!0)},s.prototype.getThumbnailViewById=function(t){if(!this._checkString(t))return null;for(var e=0;e<this.thumbnailViews.length;e++)if(this.thumbnailViews[e].uid===t)return this._throwError(S.errorMessages.OK),this.thumbnailViews[e];return null},s.prototype.removeSync=function(t,e){var r=this;void 0===e&&(e=!0);var i=this._tabManager.getCurrentTab();if(!i)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;i.totalPages;var n=[];if(w.isNumber(t)&&(t=[t]),!w.isArray(t))return this._throwError(S.errorMessages.PARAMETER_TYPE),!1;var o=t.length;if(0===o)return this._throwError(S.errorMessages.PARAMETER_INVALID),!1;for(var s=0;s<o;s++)if(!this._checkIndex(t[s]))return!1;for(var a=i.getCurrentUid(),s=0;s<o;s++){var h=this.getUidByIndex(t[s]);h===a&&this._graphic.canvasManager.getOffCanvas().reset(),n.push(h)}for(s=0;s<o;s++){this._tabManager.removePage(n[s]);var u=this._dataStorage.getInterlayerDataSync(n[s]);u&&(this._revokeUrl(u.minData),this._revokeUrl(u.oriData)),this._dataStorage.removeInterlayerDataSync(n[s]),this._dataStorage.getDataAsync(n[s]).then(function(t){t.oriData&&r._revokeUrl(t.oriData),t.minData&&r._revokeUrl(t.oriData)}).catch(function(t){}),this._dataStorage.removeDataAsync(n[s]),this._dataStorage.removeMetadataSync(n[s])}this.showTab(i.uid);var l=this.getSelectedIndexes();return this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,l),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,l),this._pagerChanged(),e&&this._dataPubSub.emit(S.modelEvent.REMOVE_SYNC,this.uid,i,t,n),this._bufferChanged(i,"remove"),0===i.pageLists.length&&(this._graphic.clearCanvas(),this.emit(S.uiEvent.SET_SCROLLER_SIZE,{width:1,height:1,x:1,y:1})),this._throwError(S.errorMessages.OK),!0},s.prototype.removeAllSync=function(t){var r=this;void 0===t&&(t=!0);var e=this._tabManager.getCurrentTab();if(!e)return this._throwError(S.errorMessages.OK),!0;var i=[];e.pageLists.forEach(function(t){i.push(t.uid);var e=r._dataStorage.getInterlayerDataSync(t.uid);e&&(r._revokeUrl(e.minData),r._revokeUrl(e.oriData)),r._dataStorage.removeInterlayerDataSync(t.uid),r._dataStorage.getDataAsync(t.uid).then(function(t){t.oriData&&r._revokeUrl(t.oriData),t.minData&&r._revokeUrl(t.oriData)}).catch(function(t){}),r._dataStorage.removeDataAsync(t.uid),r._dataStorage.removeMetadataSync(t.uid)}),e.emptyTab(),this.showTab(e.uid);var n=this.getSelectedIndexes();return this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,n),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,n),this._pagerChanged(),t&&this._dataPubSub.emit(S.modelEvent.REMOVE_ALL_SYNC,this.uid,e,i),this.getSlidePages(),this._bufferChanged(e,"remove"),this._graphic.clearCanvas(),this.emit(S.uiEvent.SET_SCROLLER_SIZE,{width:1,height:1,x:1,y:1}),this._throwError(S.errorMessages.OK),!0},s.prototype.setSelectedBoxes=function(t,e){var r=this.getCurrentTab();if(!r)return!1;var i=r.getCurrentPage();if(void 0===i)return!1;var n=null;w.isArray(t)?n=t:w.isObject(t)&&(n=[t]),e||0<i.cropManager.cropBoxes.length&&(i.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,r.getCurrentIndex()));for(var o=n.length,s=0;s<o;s++){var a=n[s];if(!this._checkCropBox(a,i.naturalWidth,i.naturalHeight))return!1;i.cropManager.addBox([a.left,a.top,a.left+a.width,a.top,a.left+a.width,a.top+a.height,a.left,a.top+a.height],"bottomRight")}this.renderSelectedBoxes();var h=i.cropManager.getRectArr();return 0<h.length&&this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_SELECTED,r.getCurrentIndex(),h),this._throwError(S.errorMessages.OK),!0},s.prototype._checkCropBox=function(t,e,r){return w.isNumber(t.left)&&w.isNumber(t.top)&&w.isNumber(t.width)&&w.isNumber(t.height)?!(t.left<0||t.top<0||t.width<0||t.height<0)&&!(t.left>e||t.top>r||t.left+t.width>e||t.top+t.height>r)||(this._throwError(S.errorMessages.PARAMETER_RANGE),!1):(this._throwError(S.errorMessages.PARAMETER_INVALID),!1)},s.prototype.clearSelectedBoxes=function(t){var e=this.getCurrentTab();if(!e)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;var r=e.getCurrentPage();return r?(0<r.cropManager.cropBoxes.length&&this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,e.getCurrentIndex()),r.cropManager.removeBox(t),this.renderSelectedBoxes(),this._throwError(S.errorMessages.OK),!0):(this._throwError(S.errorMessages.PAGE_NOT_EXIST),!1)},s.prototype._clearSelectedBoxes=function(){var t=this.getCurrentTab();if(!t)return!1;var e=t.getCurrentPage();return void 0!==e&&(0<e.cropManager.cropBoxes.length&&this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,t.getCurrentIndex()),e.cropManager.removeBox(),!0)},s.prototype.setFreeSelectedBox=function(t){var e=this.getCurrentTab();if(!e)return!1;var r=e.getCurrentPage();if(void 0===r)return!1;r.cropManager.addFreeBox(t),this.render();var i=r.cropManager.getRectArr();return 0<i.length&&this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_SELECTED,e.getCurrentIndex(),i),this._throwError(S.errorMessages.OK),!0},s.prototype.nextPage=function(t){void 0===t&&(t=!0);var e=this.getCurrentTab();if(!e)return this._throwError(S.errorMessages.IMG_NOT_EXIST),-1;var r,i=e.getCurrentIndex(),n=e.nextPage();if(-1===n)return this._throwError(S.errorMessages.IMG_NOT_EXIST),-1;i!==e.totalPages-1&&((r=e.getPageByIndex(i))&&0<r.cropManager.cropBoxes.length&&(r.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,e.getCurrentIndex())),this._pagerChanged(),this.render(!0),this.getSlidePages(),t&&this._dataPubSub.emit(S.modelEvent.NEXT_PAGE,this.uid),this._bufferChanged(e,"shift"));var o=this.getSelectedIndexes();return this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,o),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,o),this._throwError(S.errorMessages.OK),n},s.prototype.prevPage=function(t){void 0===t&&(t=!0);var e=this.getCurrentTab();if(!e)return this._throwError(S.errorMessages.IMG_NOT_EXIST),-1;var r,i=e.getCurrentIndex(),n=e.prevPage();if(-1===n)return this._throwError(S.errorMessages.IMG_NOT_EXIST),-1;0!==i&&((r=e.getPageByIndex(i))&&0<r.cropManager.cropBoxes.length&&(r.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,e.getCurrentIndex())),this._pagerChanged(),this.render(!0),this.getSlidePages(),t&&this._dataPubSub.emit(S.modelEvent.PREV_PAGE,this.uid),this._bufferChanged(e,"shift"));var o=this.getSelectedIndexes();return this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,o),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,o),this._throwError(S.errorMessages.OK),n},s.prototype.firstPage=function(t){void 0===t&&(t=!0);var e=this.getCurrentTab();if(!e)return this._throwError(S.errorMessages.IMG_NOT_EXIST),-1;var r,i=e.getCurrentIndex(),n=e.firstPage();if(-1===n)return this._throwError(S.errorMessages.IMG_NOT_EXIST),-1;0!==i&&((r=e.getPageByIndex(i))&&0<r.cropManager.cropBoxes.length&&(r.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,e.getCurrentIndex())),this._pagerChanged(),this.render(!0),this.getSlidePages(),t&&this._dataPubSub.emit(S.modelEvent.FIRST_PAGE,this.uid),this._bufferChanged(e,"shift"));var o=this.getSelectedIndexes();return this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,o),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,o),this._throwError(S.errorMessages.OK),n},s.prototype.lastPage=function(t){void 0===t&&(t=!0);var e=this.getCurrentTab();if(!e)return this._throwError(S.errorMessages.IMG_NOT_EXIST),-1;var r,i=e.getCurrentIndex(),n=e.lastPage();if(-1===n)return this._throwError(S.errorMessages.IMG_NOT_EXIST),-1;i!==e.totalPages-1&&((r=e.getPageByIndex(i))&&0<r.cropManager.cropBoxes.length&&(r.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,e.getCurrentIndex())),this._pagerChanged(),this.render(!0),this.getSlidePages(),t&&this._dataPubSub.emit(S.modelEvent.LAST_PAGE,this.uid),this._bufferChanged(e,"shift"));var o=this.getSelectedIndexes();return this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,o),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,o),this._throwError(S.errorMessages.OK),n},s.prototype.gotoPage=function(t,e){if(void 0===e&&(e=!0),!this._checkIndex(t))return-1;var r=this.getCurrentTab();if(!r)return this._throwError(S.errorMessages.IMG_NOT_EXIST),-1;var i,n=r.getCurrentUid(),o=this.getUidByIndex(t),s=r.gotoPage(t);if(-1===s)return this._throwError(S.errorMessages.IMG_NOT_EXIST),-1;o!==n&&((i=r.getCurrentPage())&&0<i.cropManager.cropBoxes.length&&(i.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,r.getCurrentIndex())),this._pagerChanged(),this.render(!0),this.getSlidePages(),e&&this._dataPubSub.emit(S.modelEvent.GOTO_PAGE,this.uid,t),this._bufferChanged(r,"shift"));var a=this.getSelectedIndexes();return this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,a),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,a),this._throwError(S.errorMessages.OK),s},s.prototype.updateSelectedIndex=function(){var t=this.getSelectedIndexes();this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,t),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,t),this._pagerChanged(),this.render()},s.prototype._pagerChanged=function(){var t=this.getCurrentTab(),e={currentPage:-1,totalPages:0};t&&(e={currentPage:t.currentPage,totalPages:t.totalPages}),this._innerPubSub.emit(S.uiEvent.PAGER_CHANGED,e)},s.prototype.changeTag=function(t){this._innerPubSub.emit(S.modelEvent.TAG_CHANGED,t)},s.prototype.removePageTag=function(t,e){var r=this._tabManager.getTab(e);if(!r)return!1;if(r.remove(t),r.uid===this._tabManager.selectedTabId){this.showTab(r.uid);var i=this.getSelectedIndexes();return this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,i),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,i),this._pagerChanged(),this.getSlidePages(),this._bufferChanged(r,"remove"),0===r.pageLists.length&&this._graphic.clearCanvas(),!0}},s.prototype.addPageTag=function(t,e){var r=this._tabManager.getTab(e);if(!r)return!1;var i=this._dataStorage.getMetadataSync(t);if(!i)return!1;var n,o=new g.Page({uid:t,naturalWidth:i.width,naturalHeight:i.height});r.pageLists.push(o),r.totalPages++,this.showLatestImage&&(r.currentPage=r.pageLists.length-1),r.uid===this._tabManager.selectedTabId&&(this.showTab(r.uid),n=this.getSelectedIndexes(),this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,n),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,n),this._pagerChanged(),this.getSlidePages(),this._bufferChanged(r,"add"))},s.prototype.emptyTag=function(t){var e=this._tabManager.getTab(t);if(!e)return!1;e.emptyTab()},s.prototype.renameTag=function(t,e,r){var i=this._tabManager.getTab(r);if(!i)return!1;i.name=e,this._innerPubSub.emit(S.uiEvent.TAB_CHANGED,{selectedTabId:this._tabManager.selectedTabId,tabs:this._tabManager.tabLists})},s.prototype.openTag=function(t,e){var n=this,o=null,r=null,i=null,s="filter";if(e){if(!(o=this.getCurrentTab()))return;s="add",i=t.children.slice(o.pageLists.length),r=t.children.length,o.totalPages+=i.length}else{if(o=this._tabManager.getTab(t.uid))return!0;r=t.children.length,o=this._tabManager.addTab({uid:t.uid,name:t.name,type:"tag",pageLists:[],currentPage:this.showLatestImage&&0<r-1?r-1:0,totalPages:r}),i=t.children}i.forEach(function(t,e){var r=n._dataStorage.getMetadataSync(t);r.width>o.maxWidth&&(o.maxWidth=r.width),r.height>o.maxHeight&&(o.maxHeight=r.height);var i=new g.Page({uid:t,naturalWidth:r.width,naturalHeight:r.height});o.pageLists.push(i)}),this.showLatestImage&&(o.currentPage=0<r-1?r-1:0),this._tabManager.setCurrentTab(t.uid);var a={selectedTabId:t.uid,tabs:this._tabManager.tabLists};this._innerPubSub.emit(S.uiEvent.TAB_CHANGED,a),this._dataPubSub.emit(S.uiEvent.TAB_CHANGED,a),this.showTab(t.uid),0===r&&this._graphic.clearCanvas(),this.showLatestImage?this._setSelectedIndexes([0<r-1?r-1:0],s):this._setSelectedIndexes([o.currentPage],s)},s.prototype.switchPage=function(t,e,r){void 0===r&&(r=!0);var i=this.getCurrentTab();if(!i)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;if(!this._checkIndex(t)||!this._checkIndex(e))return!1;if(!i.switchPage(t,e))return!1;this._showCurrentTab();var n=this.getSelectedIndexes();return this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,n),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,n),this._pagerChanged(),r&&this._dataPubSub.emit(S.modelEvent.SWITCH_PAGE,this.uid,i,t,e),this.getSlidePages(),this._bufferChanged(i,"shift"),this._throwError(S.errorMessages.OK),!0},s.prototype.movePage=function(t,e,r){void 0===r&&(r=!0);var i=this.getCurrentTab();if(!i)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;if(!this._checkIndex(t)||!this._checkIndex(e))return!1;if(!i.movePage(t,e))return!1;this._showCurrentTab();var n=this.getSelectedIndexes();return this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,n),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,n),this._pagerChanged(),r&&this._dataPubSub.emit(S.modelEvent.SWITCH_PAGE,this.uid,i,t,e),this.getSlidePages(),this._bufferChanged(i,"shift"),!0},s.prototype.reorderPage=function(t,e){var r,i=this.getCurrentTab(),n=i.getCurrentPage();i&&(i.reorder(t,e)&&this._showThumbnail(i),this.setSelectedIndexes(e,!1),r=i.getCurrentPage(),n&&r&&n.uid!==r.uid&&0<n.cropManager.cropBoxes.length&&(n.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,i.getCurrentIndex())))},s.prototype.getIndexByUid=function(t){var e=this.getCurrentTab();if(!e)return this._throwError(S.errorMessages.IMG_NOT_EXIST),null;if(!this._checkString(t))return null;for(var r=e.pageLists.length,i=0;i<r;i++)if(e.pageLists[i].uid===t)return this._throwError(S.errorMessages.OK),i;return this._throwError(S.errorMessages.PARAMETER_INVALID),null},s.prototype.getUidByIndex=function(t){if(!this._checkIndex(t))return null;var e=this.getCurrentTab();return e?(this._throwError(S.errorMessages.OK),e.pageLists[t].uid):(this._throwError(S.errorMessages.IMG_NOT_EXIST),null)},s.prototype.getRealTimeMetadataByIndex=function(t){if(void 0!==t&&!this._checkIndex(t))return null;var e=this.getCurrentTab();if(!e)return this._throwError(S.errorMessages.IMG_NOT_EXIST),null;var r=e.getCurrentPage();if(void 0!==t&&(r=e.getPageByIndex(t)),!r)return this._throwError(S.errorMessages.IMG_NOT_EXIST),null;var i=this._dataStorage.getMetadataSync(r.uid);return i?((i=Object.assign({},i)).width=r.naturalWidth,i.height=r.naturalHeight,this._throwError(S.errorMessages.OK),i):null},s.prototype.getMetadataByIndex=function(t){if(!this._checkIndex(t))return null;var e=this.getUidByIndex(t);if(!e)return null;this._throwError(S.errorMessages.OK);var r=this._dataStorage.getMetadataSync(e);return r?Object.assign({},r):null},s.prototype.setMetadataByIndex=function(t,e){if(!this._checkIndex(t))return!1;if(!w.isObject(e))return this._throwError(S.errorMessages.PARAMETER_TYPE),!1;var r=this.getUidByIndex(t);return!!r&&(this._throwError(S.errorMessages.OK),this._dataStorage.updateMetadataSync(r,e))},s.prototype.getCurrentIndex=function(){var t=this._tabManager.getCurrentTab();return t?(this._throwError(S.errorMessages.OK),t.getCurrentIndex()):(this._throwError(S.errorMessages.IMG_NOT_EXIST),-1)},s.prototype.setCurrentIndex=function(t,e){if(void 0===e&&(e=!0),!this._checkIndex(t))return!1;var r=this._tabManager.getCurrentTab();if(!r)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;var i,n=r.getCurrentUid(),o=!1;return this.getUidByIndex(t)!==n&&((i=r.getCurrentPage())&&0<i.cropManager.cropBoxes.length&&(i.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,r.getCurrentIndex())),o=!0),!!r.setCurrentIndex(t)&&(this._pagerChanged(),this.render(o),this.getSlidePages(),this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,[t]),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,[t]),e&&this._dataPubSub.emit(S.modelEvent.SET_CURRENT_INDEX,this.uid,t),this._bufferChanged(r,"shift"),this._throwError(S.errorMessages.OK),!0)},s.prototype._setSelectedIndexes=function(t,e){var r=this,i=this.getCurrentTab();if(!i)return!1;var n=[];t.forEach(function(t){var e=r.getUidByIndex(t);n.push(e)}),i.setSelectedPages(n),this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,t),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,t),this._bufferChanged(i,e),this._pagerChanged()},s.prototype.setSelectedIndexes=function(t,e){var r=this;if(void 0===e&&(e=!0),!w.isArray(t))return this._throwError(S.errorMessages.PARAMETER_TYPE),!1;var i=t.length;0===i&&this._throwError(S.errorMessages.PARAMETER_INVALID);for(var n=0;n<i;n++){var o=t[n];if(!this._checkIndex(o))return!1}var s=this.getCurrentTab();if(!s)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;var a=s.getCurrentUid(),h=[];t.forEach(function(t){var e=r.getUidByIndex(t);h.push(e)});var u=s.getSelectedPages();if(h.length===u.length){for(var l=h.length,c=!1,n=0;n<l;n++)if(u[n]!==h[n]){c=!0;break}if(!c)return this._throwError(S.errorMessages.OK),!0}var d,p=!1;return a!==h[i-1]&&((d=s.getCurrentPage())&&0<d.cropManager.cropBoxes.length&&(d.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,s.getCurrentIndex())),p=!0),s.setSelectedPages(h),this._innerPubSub.emit(S.uiEvent.IMAGE_SELECTED,t),this._innerPubSub.emit(S.viewerEvent.IMAGE_SELECTED,t),this._pagerChanged(),this.render(p),this.getSlidePages(),e&&this._dataPubSub.emit(S.privateEvent.SET_SELECTED_INDEXES,this.uid,t),this._bufferChanged(s,"shift"),this._throwError(S.errorMessages.OK),!0},s.prototype.getCustomDataByIndex=function(t){if(!this._checkIndex(t))return null;var e=this.getUidByIndex(t);if(!e)return this._throwError(S.errorMessages.IMG_NOT_EXIST),null;var r=this._dataStorage.getInterlayerDataSync(e);return r?(this._throwError(S.errorMessages.OK),r.customData):(this._throwError(S.errorMessages.IMG_NOT_EXIST),null)},s.prototype.getSelectedIndexes=function(){var r=this,t=this.getCurrentTab();if(!t)return this._throwError(S.errorMessages.IMG_NOT_EXIST),null;var e=t.getSelectedPages(),i=[];return e.forEach(function(t){var e=r.getIndexByUid(t);i.push(e)}),this._throwError(S.errorMessages.OK),i},s.prototype.selectAll=function(){var t=this.getCurrentTab();if(!t)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;for(var e=[],r=t.pageLists.length,i=0;i<r;i++)e.push(i);return this.setSelectedIndexes(e)},s.prototype.zoomIn=function(){return"single"===this.tabMode&&(this._tabManager.tabItemDefaultConfig.fitType="none"),this._graphic.zoomIn()},s.prototype.zoomOut=function(){return"single"===this.tabMode&&(this._tabManager.tabItemDefaultConfig.fitType="none"),this._graphic.zoomOut()},s.prototype.zoomTo=function(t,e,r){return!w.isNumber(t)||void 0!==e&&!w.isNumber(e)||void 0!==r&&!w.isNumber(r)?(this._throwError(S.errorMessages.PARAMETER_TYPE),-1):("single"===this.tabMode&&(this._tabManager.tabItemDefaultConfig.zoom=t,this._tabManager.tabItemDefaultConfig.fitType="none"),this._throwError(S.errorMessages.OK),this._graphic.zoomTo(t,!1,e,r))},s.prototype.flip=function(t){var e=this.getCurrentTab();if(!e)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;var r=e.getCurrentPage();if(!r)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;this._clearSelectedBoxes(),this._graphic.flip(t);var i=this._dataStorage.getInterlayerDataSync(r.uid);i&&this._revokeUrl(i.minData),i.minData=null,i.minType=null,i.activeMin=!1;var n=e.getCurrentIndex();return this._onShowThumbnail([n]),this.getSlidePages(),this.render(),!0},s.prototype.reset=function(){var i=this,t=this.getCurrentTab();return t&&t.getCurrentPage()?(this._clearSelectedBoxes(),t.pageLists.forEach(function(t,e){var r;0<t.editor2d.allStepsStack.length&&((r=i._dataStorage.getInterlayerDataSync(t.uid))&&i._revokeUrl(r.minData),r.minData=null,r.minType=null,r.activeMin=!1,i._onShowThumbnail([e]))}),this._graphic.reset(),this.getSlidePages(),this.render(),this._throwError(S.errorMessages.OK),!0):(this._throwError(S.errorMessages.IMG_NOT_EXIST),!1)},s.prototype.rotate=function(t,e){var r=this,i=this.getCurrentTab();if(!i)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;if(!w.isNumber(t))return this._throwError(S.errorMessages.PARAMETER_TYPE),!1;if(void 0!==e){if(!w.isNumber(e)&&!w.isArray(e))return this._throwError(S.errorMessages.PARAMETER_TYPE),!1;if(w.isArray(e))for(var n=e.length,o=0;o<n;o++)if(!this._checkIndex(e[o]))return!1}this._clearSelectedBoxes(),this._graphic.rotate(t,e);var s=[],a=i.getCurrentPage();return(s=void 0===e?[i.getCurrentIndex()]:w.isNumber(e)?[e]:e.slice()).forEach(function(t){a=i.pageLists[t];var e=r._dataStorage.getInterlayerDataSync(a.uid);e&&r._revokeUrl(e.minData),e.minData=null,e.minType=null,e.activeMin=!1}),this._onShowThumbnail(s),this.getSlidePages(),this.render(),this._throwError(S.errorMessages.OK),!0},s.prototype.crop=function(t,e,r,i){var n=this.getCurrentTab();if(!n)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;var o=n.getCurrentPage();if(!o)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;if(!(w.isNumber(t)&&w.isNumber(e)&&w.isNumber(r)&&w.isNumber(i)))return this._throwError(S.errorMessages.PARAMETER_TYPE),!1;var s=o.naturalWidth,a=o.naturalHeight;if(t<0||s<t||e<0||a<e||r<0||i<0||s<t+r||a<e+i)return this._throwError(S.errorMessages.PARAMETER_RANGE),!1;this._clearSelectedBoxes(),this._graphic.crop(t,e,r,i);var h=this._dataStorage.getInterlayerDataSync(o.uid);h&&this._revokeUrl(h.minData),h.minData=null,h.minType=null,h.activeMin=!1;var u=n.getCurrentIndex();return this._onShowThumbnail([u]),this.getSlidePages(),this.render(),this._throwError(S.errorMessages.OK),!0},s.prototype.erase=function(t,e,r,i,n){var o=this.getCurrentTab();if(!o)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;var s=o.getCurrentPage();if(!s)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;if(!(w.isNumber(t)&&w.isNumber(e)&&w.isNumber(r)&&w.isNumber(i)))return this._throwError(S.errorMessages.PARAMETER_TYPE),!1;var a=s.naturalWidth,h=s.naturalHeight;if(t<0||a<t||e<0||h<e||r<0||i<0||a<t+r||h<e+i)return this._throwError(S.errorMessages.PARAMETER_RANGE),!1;this._clearSelectedBoxes(),this._graphic.erase(t,e,r,i,n);var u=this._dataStorage.getInterlayerDataSync(s.uid);u&&this._revokeUrl(u.minData),u.minData=null,u.minType=null,u.activeMin=!1;var l=o.getCurrentIndex();return this._onShowThumbnail([l]),this.getSlidePages(),this.render(),this._throwError(S.errorMessages.OK),!0},s.prototype.overlay=function(t,e,r,i,n,o,s){if(!this._checkIndex(t))return!1;var a=this.getCurrentTab();if(!a)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;var h=a.getPageByIndex(t);if(!h)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;if(!(w.isNumber(e)&&w.isNumber(r)&&w.isNumber(i)&&w.isNumber(n)))return this._throwError(S.errorMessages.PARAMETER_TYPE),!1;var u=h.naturalWidth,l=h.naturalHeight;if(e<0||u<e||r<0||l<r||i<0||n<0||u<e+i||l<r+n)return this._throwError(S.errorMessages.PARAMETER_RANGE),!1;var c=this._dataStorage.getInterlayerDataSync(h.uid),d={type:"overlay",left:e,top:r,width:i,height:n,color:o,opacity:s};return c.overlays.push(d),c&&this._revokeUrl(c.minData),c.minData=null,c.minType=null,c.activeMin=!1,this._onShowThumbnail([t]),this.getSlidePages(),this._clearSelectedBoxes(),this._dataPubSub.emit(S.modelEvent.OVERLAY_RECTANGLE,t),this._throwError(S.errorMessages.OK),!0},s.prototype.changePageSize=function(t,e){if(t<=0||e<=0)return this._throwError(S.errorMessages.PARAMETER_INVALID),!1;var r=this.getCurrentTab();if(!r)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;var i=r.getCurrentPage();if(!i)return this._throwError(S.errorMessages.IMG_NOT_EXIST),!1;if(!w.isNumber(t)||!w.isNumber(e))return this._throwError(S.errorMessages.PARAMETER_TYPE),!1;this._clearSelectedBoxes(),this._graphic.changePageSize(t,e);var n=this._dataStorage.getInterlayerDataSync(i.uid);n&&this._revokeUrl(n.minData),n.minData=null,n.minType=null,n.activeMin=!1;var o=r.getCurrentIndex();return this._onShowThumbnail([o]),this.getSlidePages(),this.render(),this._throwError(S.errorMessages.OK),!0},s.prototype.setSaveType=function(t){return-1===["image/png","image/jpeg"].indexOf(t)?(this._throwError(S.errorMessages.PARAMETER_INVALID),!1):(this.saveType=t,this._graphic.canvasManager.setSaveType(t),this._throwError(S.errorMessages.OK),!0)},s.prototype.getSaveType=function(){return this.saveType},s.prototype.setSaveQuality=function(t){return t<0||1<t?(this._throwError(S.errorMessages.PARAMETER_RANGE),!1):(this.saveQuality=t,this._throwError(S.errorMessages.OK),!0)},s.prototype.getSaveQuality=function(){return this.saveQuality},s.prototype.setRotateMode=function(t){return w.isNumber(t)||this._throwError(S.errorMessages.PARAMETER_TYPE),-1===[0,1,2].indexOf(t)?(this._throwError(S.errorMessages.PARAMETER_INVALID),!1):(this._graphic.rotateMode=t,this._throwError(S.errorMessages.OK),!0)},s.prototype.getRotateMode=function(){return this._graphic.rotateMode},s.prototype.setSaveBackgroundColor=function(t){return this._throwError(S.errorMessages.OK),this._graphic.setSaveBackgroundColor(t)},s.prototype.getSaveBackgroundColor=function(){return this._graphic.saveBackgroundColor},s.prototype.saveTransformation=function(){var o=this,t=this.getCurrentTab();if(!t)return Promise.reject(S.errorMessages.IMG_NOT_EXIST);for(var s=t.getCurrentUid(),r=t.pageLists,i=[],e=0;e<r.length;e++)!function(t){var e,n=r[t];0<n.editor2d.allStepsStack.length&&(e=new Promise(function(r,t){var i=!0;s===n.uid&&(i=!1);var e=o._dataStorage.getInterlayerDataSync(n.uid);e.img?o._saveToBlob(n.uid,e.img,n,i).then(function(t){r(t)}):e.oriData?o._getImage(n.uid,e.oriData,n,i).then(function(t){r(t)}):o._dataStorage.getDataAsync(n.uid).then(function(t){var e=o._createUrl(t.oriData);o._getImage(n.uid,e,n,i).then(function(t){r(t)})}).catch(function(t){})}),i.push(e))}(e);return Promise.all(i)},s.prototype._bufferChanged=function(t,e){var r={action:e,uids:t.getUids(),currentUid:t.getCurrentUid(),selectedUids:t.getSelectedPages()};this._innerPubSub.emit(S.viewerEvent.BUFFER_CHANGED,r)},s.prototype._getImage=function(i,n,o,s){var a=this;return new Promise(function(e,t){var r=new Image;a.allowCrossOrigin&&(r.crossOrigin="anonymous"),r.src=n.data,r.onload=function(){a._saveToBlob(i,r,o,s).then(function(t){e(t)}),"object"===n.type&&a._revokeUrl(n.data),r.onload=null,r.src=""}})},s.prototype._saveToBlob=function(i,t,e,r){var n=this,o=this._graphic.canvasManager.getNewSaveCanvas(),s=this._dataStorage.getMetadataSync(i),a=this._dataStorage.getInterlayerDataSync(i),h=a.customData,u=a.tags;return s.width=e.naturalWidth,s.height=e.naturalHeight,o.reset(),o.render(i,t,e),new Promise(function(r,t){o.canvas.toBlob(function(e){n._dataPubSub.emit(S.modelEvent.UPDATE_SYNC,i,{oriData:e,minData:null,metadata:s,customData:h,tags:u},!0),o.reset(),n._dataStorage.getDataAsync(i).then(function(t){r(e)})},n.saveType,n.saveQuality)})},s.prototype.getMinPageData=function(){var t=this.getCurrentTab();return t&&t.getCurrentPage()?this._graphic.getMinPageData():(this._throwError(S.errorMessages.IMG_NOT_EXIST),null)},s.prototype.setCropLineColor=function(t){this._graphic.cropLineColor=t,this.renderSelectedBoxes()},s.prototype.getCropLineColor=function(){return this._graphic.cropLineColor},s.prototype.on=function(t,e){this._innerPubSub.on(t,e)},s.prototype.emit=function(t){for(var e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];(e=this._innerPubSub).emit.apply(e,n([t],r))},s.prototype.off=function(t,e){this._innerPubSub.off(t,e)},s.prototype._throwError=function(t){this._dataPubSub.emit(S.privateEvent.UPDATE_ERROR_MESSAGE,t)},s.prototype._ok=function(){this._innerPubSub.emit("dvs_error",S.errorMessages.OK)},s.prototype._getImageUrlByUid=function(t){var e=t.length,r=[];if(0===e)return[];for(var i=0;i<e;i++){var n=this._dataStorage.getInterlayerDataSync(t[i]);r.push(n)}return r},s.prototype._createUrl=function(t){var e=Object.prototype.toString.call(t);return"[object Blob]"===e?{type:"object",data:this._blobToImg(t)}:/\[object ArrayBuffer\]|\[object \w+Array\]/.test(e)?{type:"object",data:this._ArrayBufferToImg(t)}:(/data:image\/\w+;base64/.test(t),{type:"string",data:t})},s.prototype._revokeUrl=function(t){var e=window.URL||window.webkitURL;if(/^blob:/.test(t))return e.revokeObjectURL(t)},s.prototype._blobToImg=function(t){return(window.URL||window.webkitURL).createObjectURL(t)},s.prototype._ArrayBufferToImg=function(t){var e=new Blob([t]);return this._blobToImg(e)},s.prototype._checkArray=function(t){return!!w.isArray(t)||(this._throwError(S.errorMessages.PARAMETER_TYPE),!1)},s.prototype._checkString=function(t){return!!w.isString(t)||(this._throwError(S.errorMessages.PARAMETER_TYPE),!1)},s.prototype._checkIndex=function(t){return w.isNumber(t)?!(t<0||t>=this.getCurrentPageCounts())||(this._throwError(S.errorMessages.PARAMETER_RANGE),!1):(this._throwError(S.errorMessages.PARAMETER_TYPE),!1)},s.prototype._checkColor=function(t){return w.isString(t)&&(!!/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(t)||!!/^[rR][gG][Bb][Aa]?[\(]([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),){2}[\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),?[\s]*(0\.\d{1,2}|1|0)?[\)]{1}$/g.test(t))||(this._throwError(S.errorMessages.PARAMETER_TYPE),!1)},s.prototype.setKeepZoom=function(t){this._graphic.keepZoom=t},s.prototype.getFitType=function(){return this._graphic.fitType},s.prototype.setFitType=function(t){if(!this._checkString(t))return!1;if(-1===["window","width","height"].indexOf(t))return this._throwError(S.errorMessages.PARAMETER_INVALID),!1;this._graphic.fitType=t;var e=this.getCurrentTab();return e&&(e.fitType=t),"single"===this.tabMode&&(this._tabManager.tabItemDefaultConfig.fitType=t),this.render(!0),this._throwError(S.errorMessages.OK),!0},s.prototype.setZoom=function(t){"single"===this.tabMode&&(this._tabManager.tabItemDefaultConfig.zoom=t,this._tabManager.tabItemDefaultConfig.fitType="none");var e=this.getCurrentTab();return e&&(e.zoom=t),this._graphic.setZoom(t)},s.prototype.getZoom=function(){return this._graphic.getZoom()},s.prototype.setMinZoom=function(t){return this._graphic.minZoom=t,!0},s.prototype.getMinZoom=function(){return this._graphic.minZoom},s.prototype.setMaxZoom=function(t){return this._graphic.maxZoom=t,!0},s.prototype.getMaxZoom=function(){return this._graphic.maxZoom},s.prototype.setOperationMode=function(t){var e,r=this.getCurrentTab();r&&(r.operationMode,(e=r.getCurrentPage())&&0<e.cropManager.cropBoxes.length&&(e.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,r.getCurrentIndex()))),this._graphic.operationMode=t,"single"===this.tabMode&&(this._tabManager.tabItemDefaultConfig.operationMode=t)},s.prototype.getOperationMode=function(){return this._graphic.operationMode},s.prototype.setDisplayMode=function(t){var e,r=this.getCurrentTab();r&&(r.setDisplayMode(t),(e=r.getCurrentPage())&&0<e.cropManager.cropBoxes.length&&(e.cropManager.clear(),this.renderSelectedBoxes(),this._innerPubSub.emit(S.viewerEvent.PAGE_AREA_UNSELECTED,r.getCurrentIndex()))),this._tabManager.tabItemDefaultConfig.displayMode=t,this._graphic.displayMode=t,this.render(!0),this.getSlidePages()},s.prototype.setAspectRatio=function(e){this._graphic.aspectRatio=e;var t=this.getCurrentTab();t&&t.pageLists.forEach(function(t){t.cropManager.setAspectRatio(e)})},s.prototype.getAspectRatio=function(){return this._graphic.aspectRatio},s.prototype.setKeepAspectRatio=function(e){this._graphic.keepAspectRatio=e;var t=this.getCurrentTab();t&&t.pageLists.forEach(function(t){t.cropManager.setKeepAspectRatio(e)})},s.prototype.getKeepAspectRatio=function(){return this._graphic.keepAspectRatio},s.prototype.setPageMargin=function(t){return this._graphic.pageMargin=t,!0},s.prototype.getPageMargin=function(){return this._graphic.pageMargin},s.prototype.setZoomDelta=function(){},s.prototype.getZoomDelta=function(){},s.prototype.setAllowSlide=function(t){this._graphic.setAllowSlide(t)},s.prototype.getAllowSlide=function(){return this._graphic.allowSlide},s.prototype._initEvent=function(){var r=this;this._innerPubSub.on(S.modelEvent.APPEND_SYNC,this._onAppendSync.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_VISIBILITY_CHANGED,this._onSetCanvasVisibility.bind(this)),this._innerPubSub.on(S.privateEvent.BIND_SLIDE_COMPONENT,this._onBindSlide.bind(this)),this._innerPubSub.on(S.privateEvent.UNBIND_SLIDE_COMPONENT,this._onUnbindSlide.bind(this)),this._innerPubSub.on(S.privateEvent.BIND_CANVAS,this._onBindCanvas.bind(this)),this._innerPubSub.on(S.privateEvent.UNBIND_CANVAS,this._onUnbindCanvas.bind(this)),this._innerPubSub.on(S.privateEvent.SET_CANVAS_SIZE,this._onSetCanvasSize.bind(this)),this._innerPubSub.on(S.privateEvent.DISPLAYED_IMAGE_CHANGED,this._onShowThumbnailByUids.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_MOUSE_DOWN,this._onCanvasMousedown.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_MOUSE_MOVE,this._onCanvasMousemove.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_MOUSE_UP,this._onCanvasMouseup.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_MOUSE_OVER,this._onCanvasMouseover.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_MOUSE_OUT,this._onCanvasMouseout.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_TOUCH_START,this._onCanvasTouchstart.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_TOUCH_MOVE,this._onCanvasTouchmove.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_TOUCH_END,this._onCanvasTouchend.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_SCROLL,this._onCanvasScroll.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_WHEEL,this._onCanvasWheel.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_CLICK,this._onCanvasClick.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_DOUBLE_CLICK,this._onCanvasDoubleClick.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_RIGHT_CLICK,this._onCanvasRightClick.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_RIGHT_CLICK,this._onCanvasContextmenu.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_KEY_DOWN,this._onCanvasKeyDown.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_KEY_UP,this._onCanvasKeyUp.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_RESIZE,this._onCanvasResize.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_DRAG_START,this._onCanvasDragStart.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_DRAG_MOVE,this._onCanvasDragMove.bind(this)),this._innerPubSub.on(S.privateEvent.CANVAS_DRAG_DONE,this._onCanvasDragDone.bind(this)),this._innerPubSub.on(S.privateEvent.DOCUMENT_MOVE,this._onDocumentMousemove.bind(this)),this._innerPubSub.on(S.privateEvent.DOCUMENT_UP,this._onDocumentMouseup.bind(this)),this._innerPubSub.on(S.privateEvent.SET_SELECTED_INDEXES,function(t){r.setSelectedIndexes(t,!1),r._dataPubSub.emit(S.privateEvent.SET_SELECTED_INDEXES,r.uid,t)}),this._innerPubSub.on(S.privateEvent.REORDER_THUMBNAIL,function(t,e){r._dataPubSub.emit(S.privateEvent.REORDER_THUMBNAIL,t,e)}),this._innerPubSub.on(S.privateEvent.CANVAS_DEFAULT_CURSOR,function(t){void 0===t&&(t="default"),r._graphic.defaultCursor=t}),this._innerPubSub.on("_onRender",function(){r.render()}),this._innerPubSub.on("_onRenderBoxes",function(){r.renderSelectedBoxes()}),this._innerPubSub.on("_getSlidePages",function(){r.getSlidePages()})},s.prototype._onAppendSync=function(t,e){this._dataPubSub.emit(S.modelEvent.APPEND_SYNC,t,e)},s.prototype._onSetCanvasVisibility=function(t){},s.prototype._onBindSlide=function(t){this._graphic.bindSlide(t)},s.prototype._onUnbindSlide=function(){this._graphic.unbindSlide()},s.prototype._onBindCanvas=function(t){this._graphic.bindCanvas(t)},s.prototype._onUnbindCanvas=function(t){this._graphic.unbindCanvas(t)},s.prototype._onSetCanvasSize=function(t){var e=t.width,r=t.height;t.isChange,this._graphic.setCanvasOffsetSize(e,r),"single"===this._graphic.displayMode&&(this.render(!1,!1),this.renderSelectedBoxes(),this.getSlidePages())},s.prototype.setScrollbarWidth=function(t){this._graphic.scrollbarWidth=t},s.prototype.showThumbnail=function(t,e){var n,o,r,s,a=this,h=this._tabManager.getCurrentTab();!h||(n=h.pageLists[t])&&(o=n.uid,(r=this._dataStorage.getInterlayerDataSync(o))&&(r.activeMin||(r.activeMin=!0,s=w.uid(11),r.taskUid=s,r.minData||this._dataStorage.getDataAsync(o).then(function(t){var e=a._dataStorage.getInterlayerDataSync(o);if(e&&e.taskUid===s){var r=t.minData;if(!r||0<n.editor2d.allStepsStack.length||0<e.overlays.length)return a.generateMinPic(o,t.oriData,s).then(function(t){var e=a._dataStorage.getInterlayerDataSync(o);if(e&&e.taskUid===s){var r=a._createUrl(t);e.minData=r.data,e.minType=r.type,e.optimization=!1;var i=a._tabManager.getCurrentTab();return a._dataPubSub.emit(S.modelEvent.UPDATE_THUMBNAIL_PAGE,i),a._setSlidePages(),!0}}).catch(function(t){return!1});var i=a._createUrl(r);return e.minData=i.data,e.minType=i.type,e.optimization=!1,a._dataPubSub.emit(S.modelEvent.UPDATE_THUMBNAIL_PAGE,h),a._setSlidePages(),!0}}).catch(function(t){}))))},s.prototype._onShowThumbnail=function(t){for(var e=t.length,r=0;r<e;r++)this.showThumbnail(t[r])},s.prototype._onShowThumbnailByUids=function(t){for(var e=t.length,r=0;r<e;r++){var i=this.getIndexByUid(t[r]);null!==i&&this.showThumbnail(i)}},s.prototype.updateMinPage1=function(t,e,r,i,n,o){var s=this.getCurrentTab(),a=this.getIndexByUid(n),h=s.pageLists[a];if(!h)return Promise.reject(!1);h.naturalWidth,h.naturalHeight,this.minPicWidth,this.minPicHeight,this._graphic.canvasClientWidth,this._graphic.canvasClientHeight},s.prototype.updateMinPage=function(o){var s,t,a,e,h,r,i,n,u,l,c,d,p,_,g,f,v,m=this;this.useHermite&&("continuous"!==this._graphic.displayMode||(s=this.getCurrentTab())&&(t=this.getIndexByUid(o),!(a=s.pageLists[t])||(e=this._dataStorage.getInterlayerDataSync(o))&&(h=w.uid(11),e.optTaskUid=h,r=a.naturalWidth,i=a.naturalHeight,c=1,(n=(u=r)/(l=i))<=(_=(d=this._graphic.canvasClientWidth)/(p=this._graphic.canvasClientHeight))&&p<i?(c=p/l,u=(l=p)*n):_<=n&&d<r&&(c=d/u,l=(u=d)/n),u*=w.devicePixelRatio(),l*=w.devicePixelRatio(),g=document.createElement("canvas"),(f=g.getContext("2d")).imageSmoothingEnabled=!1,v=null,0<a.editor2d.allStepsStack.length?new Promise(function(i,n){var t,e=m._dataStorage.getInterlayerDataSync(a.uid);e.img?(t=m._saveToMinBlob(a.uid,e.img,a,!1),i(t)):e.oriData?m._getMinImageForOpt(a.uid,e.oriData,a,h).then(function(t){var e=m._dataStorage.getInterlayerDataSync(o);e&&e.optTaskUid===h?i(t):n("task invalid.")}).catch(function(t){n(t)}):m._dataStorage.getDataAsync(a.uid).then(function(t){var e,r=m._dataStorage.getInterlayerDataSync(o);r&&r.optTaskUid===h?(e=m._createUrl(t.oriData),m._getMinImageForOpt(a.uid,e,a,h).then(function(t){var e=m._dataStorage.getInterlayerDataSync(o);e&&e.optTaskUid===h?i(t):n("task invalid.")}).catch(function(t){n(t)})):n("task invalid.")}).catch(function(t){})}).then(function(t){var e,r,i=m._dataStorage.getInterlayerDataSync(o);i&&i.optTaskUid===h&&(v=t,g.width=v.canvas.width,g.height=v.canvas.height,f.drawImage(v.canvas,0,0),((null===(e=m._dataStorage.getInterlayerDataSync(o))||void 0===e?void 0:e.overlays)||[]).forEach(function(t){f.save(),f.globalAlpha=t.opacity,f.fillStyle=t.color,f.fillRect(t.left,t.top,t.width,t.height),f.restore()}),r=s.getCurrentUid(),"continuous"===m._graphic.displayMode&&r===o&&1===m.rows&&1===m.columns&&m._graphic.hermiteMin.resize(g,u,l,null).then(function(t){var e,r,i=m._dataStorage.getInterlayerDataSync(o);!i||i.optTaskUid!==h||(e=m.getIndexByUid(o))===m.getCurrentIndex()&&(r={data:t,uid:o,index:e,width:u,height:l},m.emit(S.privateEvent.UPDATE_INNER_THUMBNAIL_PAGE,r))}).catch(function(t){}))}).catch(function(t){}):this._dataStorage.getDataAsync(o).then(function(t){var i,n,e=m._dataStorage.getInterlayerDataSync(o);e&&e.optTaskUid===h&&(i=m._createUrl(t.oriData),n=new Image,m.allowCrossOrigin&&(n.crossOrigin="anonymous"),n.src=i.data,n.onload=function(){var t,e,r=m._dataStorage.getInterlayerDataSync(o);r&&r.optTaskUid===h&&(g.width=n.naturalHeight,g.height=n.naturalWidth,f.drawImage(n,0,0),"object"===i.type&&m._revokeUrl(i.data),((null===(t=m._dataStorage.getInterlayerDataSync(o))||void 0===t?void 0:t.overlays)||[]).forEach(function(t){f.save(),f.globalAlpha=t.opacity,f.fillStyle=t.color,f.fillRect(t.left*c,t.top*c,t.width*c,t.height*c),f.restore()}),e=s.getCurrentUid(),"continuous"===m._graphic.displayMode&&e===o&&1===m.rows&&1===m.columns&&m._graphic.hermiteMin.resize(g,u,l,null).then(function(t){var e,r,i=m._dataStorage.getInterlayerDataSync(o);!i||i.optTaskUid!==h||(e=m.getIndexByUid(o))===m.getCurrentIndex()&&(r={data:t,uid:o,index:e,width:u,height:l},m.emit(S.privateEvent.UPDATE_INNER_THUMBNAIL_PAGE,r))}).catch(function(t){}))},n.onerror=function(){})}).catch(function(t){}))))},s.prototype.generateMinPic=function(h,t,u){var l=this,n=this.getCurrentTab(),e=this.getIndexByUid(h),s=n.pageLists[e];if(!s)return Promise.reject(!1);var r=s.naturalWidth,i=s.naturalHeight,o=r/i,a=this.minPicWidth/this.minPicHeight,c=r,d=i,p=r,_=i,g=this._graphic.canvasClientWidth,f=this._graphic.canvasClientHeight,v=g/f;o<=v&&f<i?p=(_=f)*o:v<=o&&g<r&&(_=(p=g)/o),p*=w.devicePixelRatio(),_*=w.devicePixelRatio(),o<a&&i>this.minPicHeight?(this.minPicHeight,d=this.minPicHeight,c=d*o):a<o&&r>this.minPicWidth&&(this.minPicWidth,c=this.minPicWidth,d=c/o);var m=document.createElement("canvas"),E=document.createElement("canvas"),y=m.getContext("2d"),b=E.getContext("2d");y.imageSmoothingEnabled=!1,b.imageSmoothingEnabled=!1;var T=null;return"single"===this._graphic.displayMode&&(T=this._graphic.canvasManager.getOffCanvas()).uid===h?new Promise(function(r,i){var t,e;m.width=c,m.height=d,E.width=T.canvas.width,E.height=T.canvas.height,b.drawImage(T.canvas,0,0),((null===(t=l._dataStorage.getInterlayerDataSync(h))||void 0===t?void 0:t.overlays)||[]).forEach(function(t){b.save(),b.globalAlpha=t.opacity,b.fillStyle=t.color,b.fillRect(t.left,t.top,t.width,t.height),b.restore()}),y.drawImage(E,0,0,c,d),m.toBlob(function(t){var e=l._dataStorage.getInterlayerDataSync(h);e&&e.taskUid===u?r(t):i("task invalid.")},"image/png",1),l.useHermite&&(e=n.getCurrentUid(),"continuous"===l._graphic.displayMode&&e===h&&1===l.rows&&1===l.columns&&l._graphic.hermiteMin.resize(E,p,_,null).then(function(t){var e,r,i=l._dataStorage.getInterlayerDataSync(h);!i||i.taskUid!==u||(e=l.getIndexByUid(h))===l.getCurrentIndex()&&(r={data:t,uid:h,index:e,width:p,height:_},l.emit(S.privateEvent.UPDATE_INNER_THUMBNAIL_PAGE,r))}).catch(function(t){}))}):0<s.editor2d.allStepsStack.length?new Promise(function(n,o){new Promise(function(i,n){var t,e=l._dataStorage.getInterlayerDataSync(s.uid);e.img?(t=l._saveToMinBlob(s.uid,e.img,s,!1),i(t)):e.oriData?l._getMinImage(s.uid,e.oriData,s,u).then(function(t){var e=l._dataStorage.getInterlayerDataSync(h);e&&e.taskUid===u?i(t):n("task invalid.")}).catch(function(t){n(t)}):l._dataStorage.getDataAsync(s.uid).then(function(t){var e,r=l._dataStorage.getInterlayerDataSync(h);r&&r.taskUid===u?(e=l._createUrl(t.oriData),l._getMinImage(s.uid,e,s,u).then(function(t){var e=l._dataStorage.getInterlayerDataSync(h);e&&e.taskUid===u?i(t):n("task invalid.")}).catch(function(t){n(t)})):n("task invalid.")}).catch(function(t){})}).then(function(t){var e,r,i=l._dataStorage.getInterlayerDataSync(h);i&&i.taskUid===u?(T=t,m.width=c,m.height=d,E.width=T.canvas.width,E.height=T.canvas.height,b.drawImage(T.canvas,0,0),((null===(e=l._dataStorage.getInterlayerDataSync(h))||void 0===e?void 0:e.overlays)||[]).forEach(function(t){b.save(),b.globalAlpha=t.opacity,b.fillStyle=t.color,b.fillRect(t.left,t.top,t.width,t.height),b.restore()}),y.drawImage(E,0,0,c,d),m.toBlob(function(t){var e=l._dataStorage.getInterlayerDataSync(h);e&&e.taskUid===u?n(t):o("task invalid.")},"image/png",1),l.useHermite&&(r=l._tabManager.getCurrentTab().getCurrentUid(),"continuous"===l._graphic.displayMode&&r===h&&1===l.rows&&1===l.columns&&l._graphic.hermiteMin.resize(E,p,_,null).then(function(t){var e,r,i=l._dataStorage.getInterlayerDataSync(h);i&&i.taskUid===u?(e=l.getIndexByUid(h))===l.getCurrentIndex()&&(r={data:t,uid:h,index:e,width:p,height:_},l.emit(S.privateEvent.UPDATE_INNER_THUMBNAIL_PAGE,r)):o("task invalid.")}).catch(function(t){}))):o("task invalid.")})}):new Promise(function(i,n){E.width=c,E.height=d,m.width=c,m.height=d;var o=!1,s=l._createUrl(t);"object"===s.type&&(o=!0);var a=new Image;l.allowCrossOrigin&&(a.crossOrigin="anonymous"),a.src=s.data,a.onload=function(){var t,e,r=l._dataStorage.getInterlayerDataSync(h);r&&r.taskUid===u?(E.width=a.naturalWidth,E.height=a.naturalHeight,b.drawImage(a,0,0,a.naturalWidth,a.naturalHeight),a.src="",(((a.onload=null)===(t=l._dataStorage.getInterlayerDataSync(h))||void 0===t?void 0:t.overlays)||[]).forEach(function(t){b.save(),b.globalAlpha=t.opacity,b.fillStyle=t.color,b.fillRect(t.left,t.top,t.width,t.height),b.restore()}),y.drawImage(E,0,0,c,d),m.toBlob(function(t){var e=l._dataStorage.getInterlayerDataSync(h);o&&l._revokeUrl(s.data),e&&e.taskUid===u?i(t):n("task invalid.")},"image/png",1),l.useHermite&&(e=l._tabManager.getCurrentTab().getCurrentUid(),"continuous"===l._graphic.displayMode&&e===h&&1===l.rows&&1===l.columns&&l._graphic.hermiteMin.resize(E,p,_,null).then(function(t){var e,r,i=l._dataStorage.getInterlayerDataSync(h);!i||i.taskUid!==u||(e=l.getIndexByUid(h))===l.getCurrentIndex()&&(r={data:t,uid:h,index:e,width:p,height:_},l.emit(S.privateEvent.UPDATE_INNER_THUMBNAIL_PAGE,r))}).catch(function(t){}))):n("task invalid.")}})},s.prototype._getMinImage=function(o,s,a,h){var u=this;return new Promise(function(r,i){var n=new Image;u.allowCrossOrigin&&(n.crossOrigin="anonymous"),n.src=s.data,n.onload=function(){var t,e=u._dataStorage.getInterlayerDataSync(o);e&&e.taskUid===h?((t=u._graphic.canvasManager.getNewSaveCanvas()).reset(),t.render(o,n,a),"object"===s.type&&u._revokeUrl(s.data),n.onload=null,n.src="",r(t)):i("task invalid.")},n.onerror=function(){i("load img failed.")}})},s.prototype._getMinImageForOpt=function(o,s,a,h){var u=this;return new Promise(function(r,i){var n=new Image;u.allowCrossOrigin&&(n.crossOrigin="anonymous"),n.src=s.data,n.onload=function(){var t,e=u._dataStorage.getInterlayerDataSync(o);e&&e.optTaskUid===h?((t=u._graphic.canvasManager.getNewSaveCanvas()).reset(),t.render(o,n,a),"object"===s.type&&u._revokeUrl(s.data),n.onload=null,n.src="",r(t)):i("task invalid.")},n.onerror=function(){i("load img failed.")}})},s.prototype._saveToMinBlob=function(t,e,r,i){var n=this._graphic.canvasManager.getNewSaveCanvas();return n.reset(),n.render(t,e,r),n},s.prototype._getOutEvent=function(t){var e,r,i=null,n=-1,o=-1,s=-1,a=null==t?void 0:t.clientX,h=null==t?void 0:t.clientY,u=this.getCurrentTab();return u&&(i=u.getCurrentPage()),i&&(n=this.getIndexByUid(i.uid)),this._graphic.checkMouseOverPage(t)&&(e=this._graphic.getMouseCoordinate(t),r=this._graphic.toPageCoordinate(e.x,e.y),o=Math.floor(r.x),s=Math.floor(r.y)),{index:n,imageX:o,imageY:s,pageX:a,pageY:h}},s.prototype._onCanvasMousedown=function(t,e){var r=this.getCurrentTab();r&&r.getCurrentPage()&&this._graphic.onCanvasMousedown(t),e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_MOUSE_DOWN,e,t)},s.prototype._onCanvasMousemove=function(t,e){e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_MOUSE_MOVE,e,t)},s.prototype._onCanvasMouseup=function(t,e){e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_MOUSE_UP,e,t)},s.prototype._onCanvasMouseover=function(t,e){e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_MOUSE_OVER,e,t)},s.prototype._onCanvasMouseout=function(t,e){e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_MOUSE_OUT,e,t)},s.prototype._onCanvasTouchstart=function(t,e){var r=this.getCurrentTab();r&&r.getCurrentPage()&&this._graphic.onCanvasTouchstart(t),e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_MOUSE_DOWN,e,t)},s.prototype._onCanvasTouchmove=function(t,e){var r=this.getCurrentTab();r&&r.getCurrentPage()&&this._graphic.onCanvasTouchmove(t),e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_MOUSE_MOVE,e,t)},s.prototype._onCanvasTouchend=function(t,e){e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_MOUSE_UP,e,t)},s.prototype._onCanvasScroll=function(t,e){var r=this.getCurrentTab();r&&r.getCurrentPage()&&this._graphic.onCanvasScroll(t)},s.prototype._onCanvasWheel=function(t,e){var r=this.getCurrentTab();r&&r.getCurrentPage()&&this._graphic.onCanvasWheel(t)},s.prototype._onCanvasClick=function(t,e){e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_CLICK,e,t),this._innerPubSub.emit(S.privateEvent.UPDATE_FOCUS,{viewerId:this.uid,thumbnailId:void 0}),w.stopBubble(t)},s.prototype._onCanvasDoubleClick=function(t,e){e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_DOUBLE_CLICK,e,t)},s.prototype._onCanvasRightClick=function(t,e){e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_RIGHT_CLICK,e,t)},s.prototype._onCanvasContextmenu=function(t,e){e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.PAGE_CONTEXTMENU,e,t)},s.prototype._onCanvasKeyDown=function(t){this._innerPubSub.emit(S.viewerEvent.KEY_DOWN,t)},s.prototype._onCanvasKeyUp=function(t){this._innerPubSub.emit(S.viewerEvent.KEY_UP,t)},s.prototype._onCanvasResize=function(t,e){this._innerPubSub.emit(S.viewerEvent.RESIZE,t,e)},s.prototype._onCanvasDragStart=function(t,e){e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.DRAG_START,e,t)},s.prototype._onCanvasDragMove=function(t,e){e=e||this._getOutEvent(t),this._innerPubSub.emit(S.viewerEvent.DRAG_MOVE,e,t)},s.prototype._onCanvasDragDone=function(t){this._innerPubSub.emit(S.viewerEvent.DRAG_DONE,t)},s.prototype._onDocumentMousemove=function(t){var e=this.getCurrentTab();e&&e.getCurrentPage()&&this._graphic.onDocumentMousemove(t)},s.prototype._onDocumentMouseup=function(t){var e=this.getCurrentTab();e&&e.getCurrentPage()&&this._graphic.onDocumentMouseup(t)},s);function s(t,e,r,i,n,o){var s=this;this.showLatestImage=!0,this.isMainViewVisible=!0,this.isThumbnailVisible=!0,this.thumbnailViews=[],this.tabMode="single",this.autoOpen=!0,this.keepZoom=!0,this.allowCrossOrigin=!0,this.minPicWidth=800,this.minPicHeight=800,this.saveType="image/jpeg",this.saveQuality=1,this.useHermite=!0,this.rows=1,this.columns=1,this.uid=i,this._dataPubSub=r,this._dataStorage=t.dataStorage,this._innerPubSub=e,this._tabManager=new a.Tab(t),(w.isIE()||w.isMobile())&&(this.useHermite=!1),this._graphic=new h.Graphic(t,this._dataStorage,this._innerPubSub,i,this.useHermite,n,o),this._initEvent(),this._graphic._slide.bindCallback(function(t){"prev"===t?(s.prevPage(),s.setFitType("window"),s.getSlidePages()):"next"===t&&(s.nextPage(),s.setFitType("window"),s.getSlidePages())})}e.ViewModel=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tab=void 0;var n=r(26),i=(o.prototype.addTab=function(t){if(-1!==this.checkTab(t.uid))return null;var e,r=Object.assign(this.tabItemDefaultConfig,t),i=new n.TabItem(r);return"single"===this.tabMode?(0===this.tabLists.length?this.tabLists.push(i):(e=this.tabLists[0],i.fitType=e.fitType,i.displayMode=e.displayMode,i.operationMode=e.operationMode,i.zoom=e.zoom,this.tabLists=[i]),this.selectedTabStack=[i.uid]):(this.tabLists.push(i),this.selectedTabStack.push(i.uid)),i},o.prototype.getTab=function(t){var e=this.checkTab(t);return-1===e?null:this.tabLists[e]},o.prototype.checkTab=function(t){var e=this.tabLists.length;if(!e)return-1;for(var r=0;r<e;r++)if(this.tabLists[r].uid===t)return r;return-1},o.prototype.getCurrentTab=function(){return this.getTab(this.selectedTabId)},o.prototype.setCurrentTab=function(t){var e=this.checkTab(t),r=this.selectedTabStack.indexOf(t);return-1!==e&&-1!==r&&(this._moveToTop(this.selectedTabStack,r),this.selectedTabId=t,!0)},o.prototype.closeTab=function(t){var e=this.checkTab(t);return-1!==e&&(this.selectedTabStack.pop(),this.tabLists.splice(e,1),0===this.tabLists.length?this.selectedTabId=null:this.selectedTabId=this.selectedTabStack[this.selectedTabStack.length-1],!0)},o.prototype.setTabMode=function(t){return("single"===t||"multiple"===t)&&(this.tabMode=t,!0)},o.prototype._moveToTop=function(t,e){if(e>=t.length||e<0)return!1;var r=t[e];t.splice(e,1),t.push(r)},o.prototype.nextPage=function(){this.getCurrentTab()},o.prototype.removePage=function(e){this.tabLists.forEach(function(t){t.remove(e)})},o);function o(t){this.tabMode="single",this.selectedTabStack=[],this.zoomInDelta=1.2,this.zoomOutDelta=1.2,this.zoomDelta=.05,this.fitType="window",this.displayMode="single",this.operationMode=0,this.tabItemDefaultConfig={zoom:1,maxWidth:0,maxHeight:0,scrollLeft:0,scrollTop:0,fitType:"window",displayMode:"single",operationMode:0,alignItem:0,readDirection:0,padding:0,showPageNumber:!0,showSelectBox:!0,showThumbnail:!0,fullThumbnail:!1,selectMode:0,viewMode:{},thbWidth:0,thbHeight:0,thbScrollLeft:0,thbScrollTop:0,thbMargin:0},this.tabMode="single",this.tabLists=[]}e.Tab=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabItem=void 0;var i=r(0),n=r(27),o=(s.prototype._init=function(t){for(var e in t)void 0!==e&&(this[e]=t[e])},s.prototype.getImageCounts=function(){return this.pageLists.length},s.prototype.getUids=function(){var e=[];return this.pageLists.forEach(function(t){e.push(t.uid)}),e},s.prototype.getCurrentUid=function(){var t=this.selectedPages.length;return t?this.selectedPages[t-1]:null},s.prototype.getCurrentIndex=function(){return this.currentPage},s.prototype.setCurrentIndex=function(t){var e=this.pageLists.length;if(t<0||e<=t)return!1;this.currentPage=t;var r=this.pageLists[t].uid;return this.setSelectedPages([r]),!0},s.prototype.remove=function(t){var e=this.pageLists.length;if(0===e)return!1;if(1===e)return this.pageLists[0].uid===t&&(this.currentPage=0,this.totalPages=0,this.selectedPages=[],this.pageLists=[],!0);for(var r=-1,i=0;i<e;i++)if(this.pageLists[i].uid===t){r=i;break}return-1!==r&&((r===this.currentPage&&r===this.totalPages-1||r<this.currentPage)&&this.currentPage--,this.pageLists.splice(r,1),this.pageLists[this.currentPage]?this.selectedPages=[this.pageLists[this.currentPage].uid]:this.selectedPages=[],this.totalPages--,!0)},s.prototype.insertImage=function(t,e){this.pageLists.splice(t,0,e)},s.prototype.emptyTab=function(){return this.pageLists=[],this.selectedPages=[],this.currentPage=0,!(this.totalPages=0)},s.prototype.getSelectedPages=function(){return this.selectedPages.slice()},s.prototype.setSelectedPages=function(t){var e,r=(this.selectedPages=t).length;if(0===r)return!1;for(var i=t[r-1],n=0;n<this.totalPages;n++)if((null===(e=this.pageLists[n])||void 0===e?void 0:e.uid)===i)return this.currentPage=n,!0;return!1},s.prototype.getCurrentPage=function(){return this.pageLists[this.currentPage]},s.prototype.getPageByIndex=function(t){return this.pageLists[t]},Object.defineProperty(s.prototype,"totalPageCount",{get:function(){return this.pageLists.length},enumerable:!1,configurable:!0}),s.prototype.setFitType=function(t){this.fitType=t},s.prototype.getFitType=function(){return this.fitType},s.prototype.setDisplayMode=function(t){this.displayMode=t},s.prototype.getDisplayMode=function(){return this.displayMode},s.prototype.createThumbnailView=function(t){var e={uid:i.uid(11),location:t.location||this.thbLocation,size:t.size,columns:t.columns||1,rows:t.rows||1,scrollDirection:t.scrollDirection,margin:t.margin,background:t.background,border:t.border,allowSlide:t.allowSlide,allowKeyboardControl:t.allowKeyboardControl,allowDrag:t.allowDrag,showPageNumber:t.showPageNumber,thumbnailBackground:t.thumbnailBackground,thumbnailBorder:t.thumbnailBorder,hoverBackground:t.hoverBackground,hoverBorder:t.hoverBorder,placeholderBackground:t.placeholderBackground,selectedImageBorder:t.selectedImageBorder,selectedImageBackground:t.selectedImageBackground};return this.thumbnailViews.push(e),e},s.prototype.removeThumbnailView=function(t){if(!t)return this.thumbnailViews=[],!0;for(var e=null,r=0;r<this.thumbnailViews.length;r++)if(this.thumbnailViews[r].uid===t){e=r;break}return null!==e&&(this.thumbnailViews.splice(e,1),!0)},s.prototype.getThumbnailViewById=function(t){for(var e=0;e<this.thumbnailViews.length;e++)if(this.thumbnailViews[e].uid===t)return this.thumbnailViews[e];return null},s.prototype.addThumbnailItem=function(t){this.thumbnail.addItem(t)},s.prototype.getThumbnailContents=function(){return this.thumbnail.data},s.prototype.getThumbnailItem=function(t){return this.thumbnail.getItem(t)},s.prototype.setThumbnailContents=function(t){var r=this;this.thumbnail.clear(),t.forEach(function(t){var e={uid:t.uid,data:t.minData,tags:t.tags,matrix:t.matrix};r.thumbnail.addItem(e)})},s.prototype.movePage=function(t,e){if(t===e)return!0;var r=this.pageLists.splice(t,1);if(this.pageLists.splice(e,0,r[0]),!this.thumbnail.move(t,e))return!1;var i=this.pageLists[e].uid;return this.setSelectedPages([i]),!0},s.prototype.switchPage=function(t,e){if(t===e)return!0;var r=this.pageLists[t];return this.pageLists[t]=this.pageLists[e],this.pageLists[e]=r,!!this.thumbnail.switch(t,e)&&(this.currentPage===t?this.setSelectedPages([this.pageLists[e].uid]):this.currentPage===e&&this.setSelectedPages([this.pageLists[t].uid]),!0)},s.prototype.reorder=function(t,e){var r=0,i=t.length;if(0===t.length||this.pageLists.length!==i)return!1;for(var n=0;n<i;n++)t[n]===n&&r++;if(r===i)return!1;this.thumbnail.reorder(t);for(var o=[],s=0;s<i;s++)o[s]=this.pageLists[t[s]];for(n=0;n<i;n++)this.pageLists[n]=o[n];o=[];for(var a=0;a<this.thumbnail.data.length;a++)o.push(this.thumbnail.data[a]);return this.selectedPages=o,!0},s.prototype.nextPage=function(){return 0===this.totalPages?-1:(1<this.totalPages-this.currentPage&&this.currentPage<this.totalPages&&this.currentPage++,this.selectedPages=[this.pageLists[this.currentPage].uid],this.currentPage)},s.prototype.prevPage=function(){return 0===this.totalPages?-1:(0<this.currentPage&&this.currentPage--,this.selectedPages=[this.pageLists[this.currentPage].uid],this.currentPage)},s.prototype.firstPage=function(){return 0===this.totalPages?-1:(this.currentPage=0,this.selectedPages=[this.pageLists[this.currentPage].uid],0)},s.prototype.lastPage=function(){return 0===this.totalPages?-1:(this.currentPage!==this.totalPages-1&&(this.currentPage=this.totalPages-1),this.selectedPages=[this.pageLists[this.currentPage].uid],this.currentPage)},s.prototype.gotoPage=function(t){return 0===this.totalPages?-1:(t!==this.currentPage&&(t=this._checkPage(t),this.currentPage=t),this.selectedPages=[this.pageLists[this.currentPage].uid],this.currentPage)},s.prototype._checkPage=function(t){return t<this.totalPages?0<=t?t:0:this.totalPages-1},s);function s(t){this.uid=i.uid(11),this.zoom=1,this.selectedPages=[],this.pageLists=[],this.loadedImages=[],this.totalPages=0,this.currentPage=0,this.maxWidth=0,this.maxHeight=0,this.virtualWidth=0,this.virtualHeight=0,this.outerWidth=0,this.outerHeight=0,this.fitType="window",this.displayMode="single",this.operationMode=0,this.pageMargin=0,this.outMargin=0,this.pageBorderWidth=0,this.thumbnailViews=[],this.boxSizeMode=0,this.thumbnail=new n.Thumbnail,this._init(t)}e.TabItem=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Thumbnail=void 0;var i=(n.prototype.getContents=function(){return this.data},n.prototype.addItem=function(t){return this.data.push(t),this.counts++,!0},n.prototype.getItem=function(t){if(0===this.data.length)return null;for(var e=0;e<this.data.length;e++)if(this.data[e].uid===t)return this.data[e];return null},n.prototype.clear=function(){this.counts=0,this.data=[]},n.prototype.remove=function(t){return 0<=t&&t<=this.counts&&(window.URL.revokeObjectURL(this.data[t]),this.data.splice(t,1),this.counts--,!0)},n.prototype.removeByUid=function(t){if(0===this.data.length)return!1;for(var e=0;e<this.data.length;e++)if(this.data[e].uid===t)return this.data.splice(e,1),this.counts--,!0;return!1},n.prototype.reorder=function(t){var e=this.data.length,r=[];if(0===t.length||t.length!==e)return!1;for(var i=0;i<e;i++)r[i]=this.data[t[i]];for(var n=0;n<e;n++)this.data[n]=r[n];return!0},n.prototype.switch=function(t,e){var r=this.data.length;if(r<=t||r<=e||t<0||e<0||t===e)return!1;var i=this.data[t];return this.data[t]=this.data[e],this.data[e]=i,!0},n.prototype.move=function(t,e){var r=this.data.length;if(r<=t||r<=e||t<0||e<0||t===e)return!1;var i=this.data.splice(t,1);return this.data.splice(e,0,i[0]),!0},n);function n(){this.counts=0,this.data=[]}e.Thumbnail=i},function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.Graphic=void 0;var m=r(0),M=r(1),h=r(10),u=r(29),l=r(34),c=r(35),i=(o.prototype.setAllowSlide=function(t){this.allowSlide=t},o.prototype.setSlidePages=function(t){var e;null!==(e=this._slide)&&void 0!==e&&e.setSlidePages(t)},o.prototype.checkDisplay=function(t,e){if("single"!==e.displayMode)return!0;var r=e.getCurrentPage();return!(!r||t!==r.uid)},o.prototype.initGraphic=function(t){var e=t.uid;this.currentPageList=t.pageLists,e!==this.currentTabId&&(this.currentTabId=e,this._initState(t))},o.prototype._initState=function(t){this.tabItem=t,this.maxWidth=t.maxWidth||0,this.maxHeight=t.maxHeight||0,this.virtualHeight=t.virtualHeight||0,this.virtualWidth=t.virtualWidth||0,this.fitType=t.fitType,this.isClickToZoom=t.isClickToZoom,this.isFreeCrop=t.isFreeCrop,this.scrollLeft=t.scrollLeft,this.scrollTop=t.scrollTop,this.zoom=t.zoom,this.pageMargin=t.pageMargin,this.outMargin=t.outMargin,this.pageBorderWidth=t.pageBorderWidth,this.alignItem=t.alignItem,this.readDirection=t.readDirection,this.displayMode=t.displayMode,this.operationMode=t.operationMode},o.prototype.renderDefaultLoading=function(t){var e=this.canvasManager.getMainCanvasContext();e&&e.clearRect(0,0,this.canvasInnerWidth,this.canvasInnerHeight)},o.prototype.render=function(e){var t,r,i,n,o,s,a,h,u,l,c,d,p=this;this.tabItem&&(t=this.tabItem.getCurrentUid(),e===t&&(r=this._dataStorage.getInterlayerDataSync(e),i=(null==r?void 0:r.overlays)||[],(n=r.img).naturalWidth,n.naturalHeight,(o=this._getPage(e))&&(s=o.page,a=o.index,(h=this.canvasManager.getOffCanvas()).render(e,n,s),u=Math.round(s.style.left-this.scrollLeft+s.style.width/2),l=Math.round(s.style.top-this.scrollTop+s.style.height/2),(c=this.canvasManager.getMainCanvasContext())&&(c.imageSmoothingEnabled=!1,this.renderTaskUid=m.uid(11),this.hermite&&(this.hermite.taskUid=this.renderTaskUid),c.clearRect(0,0,this.canvasInnerWidth,this.canvasInnerHeight),c.save(),c.scale(this.devicePixelRatio,this.devicePixelRatio),c.translate(u,l),d=h.canvas,this.workerTimer&&clearTimeout(this.workerTimer),this.useHermite&&this.zoom<1&&this.hermite&&(this.workerTimer=setTimeout(function(){var t;null!==(t=p.hermite)&&void 0!==t&&t.resize(d,s.style.width*p.devicePixelRatio,s.style.height*p.devicePixelRatio,p.renderTaskUid).then(function(t){p._dataStorage.getInterlayerDataSync(e)&&(c.save(),c.clearRect(0,0,p.canvasInnerWidth,p.canvasInnerHeight),t.forEach(function(t){c.putImageData(t.target,Math.round(0+(s.style.left-p.scrollLeft)*p.devicePixelRatio),Math.round(t.start_y+(s.style.top-p.scrollTop)*p.devicePixelRatio))}),c.restore(),c.save(),c.scale(p.devicePixelRatio,p.devicePixelRatio),c.translate(u,l),i.forEach(function(t){0<s.style.width-t.width*p.zoom&&0<s.style.height-t.height*p.zoom&&(c.save(),c.globalAlpha=t.opacity,c.fillStyle=t.color,c.fillRect(-s.style.width/2+t.left*p.zoom,-s.style.height/2+t.top*p.zoom,Math.min(s.style.width-t.left*p.zoom,t.width*p.zoom),Math.min(s.style.height-t.top*p.zoom,t.height*p.zoom)),c.restore())}),c.restore())}).catch(function(t){})},100)),c.drawImage(d,0,0,d.width,d.height,Math.round(-s.style.width/2),Math.round(-s.style.height/2),s.style.width,s.style.height),i.forEach(function(t){0<s.style.width-t.width*p.zoom&&0<s.style.height-t.height*p.zoom&&(c.save(),c.globalAlpha=t.opacity,c.fillStyle=t.color,c.fillRect(-s.style.width/2+t.left*p.zoom,-s.style.height/2+t.top*p.zoom,Math.min(s.style.width-t.left*p.zoom,t.width*p.zoom),Math.min(s.style.height-t.top*p.zoom,t.height*p.zoom)),c.restore())}),c.restore(),this.emit(M.viewerEvent.VIEWER_PAGE_RENDERED,a)))))},o.prototype.renderSelectedBoxes=function(t){var e,s,a=this,r=this._getPage(t);r&&(e=r.page,(s=this.canvasManager.getCropperCanvasContext())&&(s.imageSmoothingEnabled=!1,s.clearRect(0,0,this.canvasInnerWidth,this.canvasInnerHeight),s.save(),s.scale(this.devicePixelRatio,this.devicePixelRatio),1===this.operationMode&&e.cropManager.cropBoxes.forEach(function(t){for(var e=t.probePoints.slice(0,8),r=t.midpoints.slice(0,8),i=0;i<4;i++){var n=a.toCanvasCoordinate(e[2*i],e[2*i+1]),o=a.toCanvasCoordinate(r[2*i],r[2*i+1]);e[2*i]=n.x,e[2*i+1]=n.y,r[2*i]=o.x,r[2*i+1]=o.y}for(s.lineWidth=+t.lineWidth,s.fillStyle=t.pointFillColor,s.save(),i=0;i<4;i++)s.strokeStyle=a.cropLineColor,s.beginPath(),s.rect(e[2*i]-t.sensorRadius,e[2*i+1]-t.sensorRadius,2*t.sensorRadius*1,2*t.sensorRadius*1),s.closePath(),s.stroke(),s.fill();for(i=0;i<4;i++)s.strokeStyle=a.cropLineColor,s.beginPath(),s.rect(r[2*i]-t.sensorRadius,r[2*i+1]-t.sensorRadius,2*t.sensorRadius*1,2*t.sensorRadius*1),s.closePath(),s.stroke(),s.fill();try{s.setLineDash([+t.dashLine[0],+t.dashLine[1]])}catch(t){}s.strokeStyle=a.cropLineColor,s.lineWidth=+t.lineWidth,s.beginPath(),s.moveTo(e[0],e[1]),s.lineTo(e[2],e[3]),s.lineTo(e[4],e[5]),s.lineTo(e[6],e[7]),s.closePath(),s.stroke(),s.restore()}),s.restore()))},o.prototype.clearCanvas=function(){var t=this.canvasManager.getMainCanvasContext();t&&t.clearRect(0,0,this.canvasInnerWidth,this.canvasInnerHeight)},o.prototype._layoutSingle=function(t,e,r){t.outMargin,t.pageMargin,t.pageBorderWidth;var i,n,o,s,a,h,u,l,c,d,p,_,g,f,v,m,E,y,b,T,S,w=(this.canvasInnerWidth,this.canvasInnerHeight,t.getCurrentPage());!w||(i=this._dataStorage.getMetadataSync(w.uid))&&(n=w.editor2d.allStepsStack,o=i.width,s=i.height,a=i.width,h=i.height,l=u=null,c=!1,n.forEach(function(t){"rotate"===t.type?(0===t.mode&&(l=w.editor2d.rotateRectangle(0,0,a,h,t.calcAngle),c=!0),null!==u&&u!==t.mode&&(a=o,h=s),u=t.mode,c&&(o=l.width,s=l.height)):"crop"!==t.type&&"changeSize"!==t.type||(o=t.width,s=t.height,a=t.width,h=t.height)}),w.naturalWidth=o,w.naturalHeight=s,d=(null==w?void 0:w.naturalWidth)||0,p=(null==w?void 0:w.naturalHeight)||.1,g=(_=this._calcZoom(t,d,p)).zoom,f=_.canvasWidth,v=_.canvasHeight,m=_.virtualWidth,E=_.virtualHeight,this.setCanvasSize(f,v),g=g||1,this._zoom=g,w.cropManager.setZoom(g),this.virtualWidth=m,this.virtualHeight=E,r||this.emit(M.uiEvent.SET_SCROLLER_SIZE,{width:this.virtualWidth,height:this.virtualHeight,x:this.scrollLeft,y:this.scrollTop}),y=this.virtualWidth,b=this.virtualHeight,T=(this.canvasClientWidth-y)/2,S=(this.canvasClientHeight-b)/2,T<0&&(e&&(this._scrollLeft=Math.abs(T)),T=0),S<0&&(e&&(this._scrollTop=Math.abs(S)),S=0),w.setBorder(t.pageBorderWidth),w.setSize(y,b),w.setPosition(T,S),t.virtualWidth=y,t.virtualHeight=b,this.setVirtualSize(y,b),this._zoomTo(g,!1),r||this.emit(M.uiEvent.SET_SCROLLER_SIZE,{width:y,height:b,x:this.scrollLeft,y:this.scrollTop}))},o.prototype._calcZoom=function(t,e,r){return"window"===t.fitType?this._calFitWindow(e,r):"width"===t.fitType?this._calcFitWidth(e,r):"height"===t.fitType?this._calcFitHeight(e,r):this.keepZoom&&"none"===t.fitType?this._calcKeepZoom(e,r):this._calFitWindow(e,r)},o.prototype.calcZoomForSlide=function(t,e){var r=this._calFitWindow(t,e).zoom;return r=Math.min(Math.max(this.minZoom,r),this.maxZoom)},o.prototype._calcKeepZoom=function(t,e){var r=this.zoom,i=this.canvasOffsetWidth,n=this.canvasOffsetHeight,o=t*r,s=e*r;return i<o&&(n-=this.scrollbarWidth),n<s&&(i-=this.scrollbarWidth),{zoom:r,canvasWidth:i,canvasHeight:n,virtualWidth:o,virtualHeight:s}},o.prototype._calcFitWidth=function(t,e){var r=1,i=0,n=this.canvasOffsetWidth,o=this.canvasOffsetHeight;return o<(i=e*(r=t<=this.canvasOffsetWidth?1:this.canvasOffsetWidth/t))&&(i=e*(r=t<=this.canvasOffsetWidth-this.scrollbarWidth?1:(this.canvasOffsetWidth-this.scrollbarWidth)/t))>this.canvasOffsetHeight&&(n-=this.scrollbarWidth),{zoom:r,canvasWidth:n,canvasHeight:o,virtualWidth:t*r,virtualHeight:i}},o.prototype._calcFitHeight=function(t,e){var r=1,i=0,n=0,o=this.canvasOffsetWidth,n=this.canvasOffsetHeight;return o<(i=t*(r=e<=this.canvasOffsetHeight?1:this.canvasOffsetHeight/e))&&(i=t*(r=e<=this.canvasOffsetHeight-this.scrollbarWidth?1:(this.canvasOffsetHeight-this.scrollbarWidth)/e))>this.canvasOffsetWidth&&(n-=this.scrollbarWidth),{zoom:r,canvasWidth:o,canvasHeight:n,virtualWidth:i,virtualHeight:e*r}},o.prototype._calFitWindow=function(t,e){return t<=this.canvasClientWidth&&e<=this.canvasClientHeight||t>this.canvasClientWidth&&e<=this.canvasClientHeight||!(t<=this.canvasClientWidth&&e>this.canvasClientHeight)&&t/this.canvasClientWidth>=e/this.canvasClientHeight?this._calcFitWidth(t,e):this._calcFitHeight(t,e)},o.prototype._getPage=function(t){for(var e=this.currentPageList.length,r=0;r<e;r++)if(this.currentPageList[r].uid===t)return{page:this.currentPageList[r],index:r}},o.prototype.setFitType=function(t){this.fitType=t,this.tabItem&&(this.tabItem.fitType=t)},o.prototype._setValidArea=function(){this.setValidArea(this.canvasClientWidth,this.canvasClientHeight,this.virtualWidth,this.virtualHeight)},o.prototype._setScrollerPosition=function(){var t=this.canvasManager.getCanvas().canvas,e={left:0,top:0,right:0,bottom:0,width:0,height:0};try{e=t.getBoundingClientRect()}catch(t){}this.setPosition(e.left+window.pageXOffset+(null==t?void 0:t.clientLeft)||0,e.top+window.pageYOffset+(null==t?void 0:t.clientTop)||0)},o.prototype.bindSlide=function(t){var e;null!==(e=this._slide)&&void 0!==e&&e.bindSlide(t)},o.prototype.unbindSlide=function(){var t;null!==(t=this._slide)&&void 0!==t&&t.unbindSlide()},o.prototype.bindCanvas=function(t){this.canvasManager.bindCanvas(t)},o.prototype.unbindCanvas=function(t){this.canvasManager.unbindCanvas(t)},o.prototype.setCanvasOffsetSize=function(t,e){var r;this.canvasOffsetWidth=t,this.canvasOffsetHeight=e,this.canvasClientWidth=t,this.canvasClientHeight=e,this.canvasInnerWidth=t*this.devicePixelRatio,this.canvasInnerHeight=e*this.devicePixelRatio,this.canvasManager.setCanvasSize(t,e),null!==(r=this._slide)&&void 0!==r&&r.setSlideSize(t),this._setScrollerPosition()},o.prototype.setCanvasSize=function(t,e){this.canvasClientWidth=t,this.canvasClientHeight=e,this.canvasInnerWidth=t*this.devicePixelRatio,this.canvasInnerHeight=e*this.devicePixelRatio,this.canvasManager.setCanvasSize(t,e)},o.prototype.setVirtualSize=function(t,e){this.virtualWidth=t||0,this.virtualHeight=e||0,this._setValidArea()},o.prototype.setZoom=function(t){return this.zoom=t,this._zoomTo(t,!1),this.setFitType("none"),this.emit("_onRender"),0===this._maxScrollLeft&&0===this._maxScrollTop&&this.emit("_getSlidePages"),!0},o.prototype.getZoom=function(){return this.zoom},o.prototype.zoomTo=function(t,e,r,i){return this.zoom=t,this._zoomTo(t,e,r,i),this.setFitType("none"),this.emit("_onRender"),0===this._maxScrollLeft&&0===this._maxScrollTop&&this.emit("_getSlidePages"),this._zoom},o.prototype.scrollTo=function(t,e,r,i){this._scrollTo(t,e,!1),this.emit("_onRender")},o.prototype.zoomIn=function(){var t=this.zoom;return t*=this.zoomInDelta,this._zoomTo(t,!1),this.setFitType("none"),this.emit("_onRender"),0===this._maxScrollLeft&&0===this._maxScrollTop&&this.emit("_getSlidePages"),t},o.prototype.zoomOut=function(){var t=this.zoom;return t/=this.zoomInDelta,this._zoomTo(t,!1),this.setFitType("none"),this.emit("_onRender"),0===this._maxScrollLeft&&0===this._maxScrollTop&&this.emit("_getSlidePages"),t},o.prototype.crop=function(t,e,r,i){if(!this.tabItem)return!1;var n=this.tabItem.getCurrentPage();if(!n)return!1;var o=this.canvasManager.getOffCanvas(),s=n.editor2d.crop(t,e,r,i);return o.crop(s,n),!0},o.prototype.rotate=function(r,t){var i=this;if(!this.tabItem)return!1;var n=this.rotateMode,o=null,s=this.canvasManager.getOffCanvas(),a=this.tabItem.getCurrentPage().uid;if(void 0!==t)return m.isNumber(t)&&(t=[t]),t.forEach(function(t){var e=(o=i.tabItem.pageLists[t]).editor2d.rotate(r,0,0,n);o.uid===a&&s.rotate(e,o)}),!0;if(!(o=this.tabItem.getCurrentPage()))return!1;var e=o.editor2d.rotate(r,0,0,n);return s.rotate(e,o),!0},o.prototype.reset=function(){return!(!this.tabItem||!this.tabItem.getCurrentPage()||(this.tabItem.pageLists.forEach(function(t){t.editor2d.reset()}),this.canvasManager.getOffCanvas().uid=null))},o.prototype.flip=function(t){if(!this.tabItem)return!1;var e=this.tabItem.getCurrentPage();if(!e)return!1;void 0===t&&(t=0);var r=e.editor2d.flip(t);return this.canvasManager.getOffCanvas().flip(r,e),!0},o.prototype.erase=function(t,e,r,i,n){if(!this.tabItem)return!1;var o=this.tabItem.getCurrentPage();if(!o)return!1;var s=o.editor2d.erase(t,e,r,i,n);return this.canvasManager.getOffCanvas().erase(s,o),!0},o.prototype.changePageSize=function(t,e){if(!this.tabItem)return!1;var r=this.tabItem.getCurrentPage();if(!r)return!1;var i=this.canvasManager.getOffCanvas(),n=r.editor2d.changePageSize(t,e);return i.changePageSize(n,r),!0},o.prototype.getMinPageData=function(){var t=document.createElement("canvas"),e=t.getContext("2d"),r=this.canvasManager.getOffCanvas(),i=r.innerWidth,n=r.innerHeight,o=i/n;return(800<i||800<n)&&(1<=o?n=(i=800)/o:i=(n=800)*o),t.width=i,t.height=n,e.drawImage(r.canvas,0,0,i,n),e.getImageData(0,0,i,n)},o.prototype.setSaveBackgroundColor=function(t){this.saveBackgroundColor=t,this.canvasManager.setSaveBackgroundColor(t)},o.prototype.onCanvasTouchstart=function(t){var e;if(t.preventDefault(),!(t.touches[0]&&t.touches[0].target&&t.touches[0].target.tagName.match(/input|textarea|select/i))&&"single"===this.displayMode&&"single"===this.displayMode&&this.tabItem&&0!==this.tabItem.totalPageCount&&(this._mousedown=!0,!t.target.tagName.match(/input|textarea|select/i))){var r=t.touches[0].pageX,i=t.touches[0].pageY;if(0===this.operationMode){if(this._pageX=r,this._pageY=i,this.allowSlide&&0===this._maxScrollLeft&&0===this._maxScrollTop&&null!==(e=this._slide)&&void 0!==e&&e.startHandler(t),this.isSliding)return;1<t.targetTouches.length&&(this._startDistance=this._calDistance(t.targetTouches)),this.startHandler(t.targetTouches,t.timeStamp)}else if(1===this.operationMode){if(this.checkMouseOverPage(t)){var n=this.tabItem.getCurrentPage();if(!n)return;var o=this.getMouseCoordinate(t),s=this.toPageCoordinate(o.x,o.y),a=!1;!0===t.ctrlKey&&(a=!0);var h=this.tabItem.currentPage;null===n.cropManager.checkSelect(s.x,s.y)&&(a||0<n.cropManager.cropBoxes.length&&this.emit(M.viewerEvent.PAGE_AREA_UNSELECTED,h)),n.cropManager.onStartHandler(s.x,s.y,a)}}else 2===this.operationMode&&this.checkMouseOverPage(t)&&(this.setFitType("none"),this._zoomTo(this._zoom*this.zoomInDelta,!1,r-this._outerLeft,i-this._outerTop),this.emit("_onRender"))}},o.prototype.onCanvasTouchmove=function(t){var e;if("single"===this.displayMode&&this.tabItem&&this.tabItem.getCurrentPage()&&this._mousedown){if(0===this.operationMode)if(this.allowSlide&&0===this._maxScrollTop&&0===this._maxScrollLeft&&1===t.targetTouches.length)null!==(e=this._slide)&&void 0!==e&&e.moveHandler(t);else{if(this.isSliding)return;var r=1;1<t.targetTouches.length&&(r=this._calDistance(t.targetTouches)/this._startDistance,this.fitType="none",this.tabItem.fitType="none",t.scale&&(r=t.scale)),this.moveHandler(t.targetTouches,t.timeStamp,r),this.emit("_onRender"),0===this._maxScrollLeft&&0===this._maxScrollTop&&this.emit("_getSlidePages")}this._mousedown=!0}},o.prototype.onCanvasTouchend=function(t){},o.prototype.onDocumentTouchend=function(t){},o.prototype.onCanvasMousedown=function(t){var e;if("single"===this.displayMode&&this.tabItem&&0!==this.tabItem.totalPageCount&&(this._mousedown=!0,t.preventDefault(),!t.target.tagName.match(/input|textarea|select/i)))if(0===this.operationMode)this._pageX=t.pageX,this._pageY=t.pageY,this.allowSlide&&0===this._maxScrollLeft&&0===this._maxScrollTop?null!==(e=this._slide)&&void 0!==e&&e.startHandler(t):this.startHandler([{pageX:t.pageX,pageY:t.pageY}],t.timeStamp);else if(1===this.operationMode){if(this.checkMouseOverPage(t)){var r=this.tabItem.getCurrentPage();if(!r)return;var i=this.getMouseCoordinate(t),n=this.toPageCoordinate(i.x,i.y),o=!1;!0===t.ctrlKey&&(o=!0);var s=this.tabItem.currentPage;null===r.cropManager.checkSelect(n.x,n.y)&&(o||0<r.cropManager.cropBoxes.length&&this.emit(M.viewerEvent.PAGE_AREA_UNSELECTED,s)),r.cropManager.onStartHandler(n.x,n.y,o)}}else 2===this.operationMode&&this.checkMouseOverPage(t)&&(this.setFitType("none"),this._zoomTo(this._zoom*this.zoomInDelta,!1,t.pageX-this._outerLeft,t.pageY-this._outerTop),this.emit("_onRender"),0===this._maxScrollLeft&&0===this._maxScrollTop&&this.emit("_getSlidePages"))},o.prototype.onCanvasMousemove=function(t){this._mousedown&&(t.preventDefault(),"single"===this.displayMode&&this.tabItem&&this.tabItem.totalPageCount)},o.prototype.onCanvasMouseup=function(t){},o.prototype.onDocumentMousemove=function(t){var e,r,i,n,o,s,a;"single"===this.displayMode&&(!this.tabItem||(r=this.tabItem.getCurrentPage())&&(i=this.getMouseCoordinate(t),n=this.toPageCoordinate(i.x,i.y),this._mousedown?(1===this.operationMode?void 0!==this.checkMouseOverPage(t)&&(!(o=!1)===t.ctrlKey&&(o=!0),!0===t.shiftKey?r.cropManager.setKeepAspectRatio(!0):r.cropManager.setKeepAspectRatio(this.keepAspectRatio),r.cropManager.onMoveHandler(n.x,n.y,o),this.emit("_onRenderBoxes")):0===this.operationMode&&(t.touches||(this.allowSlide&&0===this._maxScrollTop&&0===this._maxScrollLeft?null!==(e=this._slide)&&void 0!==e&&e.moveHandler(t):0===this._maxScrollLeft&&0===this._maxScrollTop||(this.moveHandler([{pageX:t.pageX,pageY:t.pageY}],t.timeStamp),this.emit("_onRender")))),this._mousedown=!0):0<r.cropManager.cropBoxes.length&&(null!==(s=r.cropManager.checkSelectForCursor(n.x,n.y))?(a=null,"move"===s.position?a="move":"nw"!==s.position&&"se"!==s.position&&"ne"!==s.position&&"sw"!==s.position&&"e"!==s.position&&"w"!==s.position&&"n"!==s.position&&"s"!==s.position||(a=s.position+"-resize"),this.emit(M.uiEvent.CHANGE_CANVAS_CURSOR,a)):this.emit(M.uiEvent.CHANGE_CANVAS_CURSOR,this.defaultCursor))))},o.prototype._calDistance=function(t){return Math.sqrt(Math.pow(t[0].pageX-t[1].pageX,2)+Math.pow(t[0].pageY-t[1].pageY,2))},o.prototype.onDocumentMouseup=function(t){var e,r,i,n,o,s,a;this._mousedown&&(1===this.operationMode?!this.tabItem||"single"!==this.tabItem.displayMode||(r=this.tabItem.getCurrentPage())&&(i=this.getMouseCoordinate(t),n=this.toPageCoordinate(i.x,i.y),r.cropManager.onEndHandler(n.x,n.y),o=this.tabItem.currentPage,0<(s=r.cropManager.getRectArr()).length&&this.emit(M.viewerEvent.PAGE_AREA_SELECTED,o,s),this.emit("_onRenderBoxes")):0===this.operationMode&&(this.isClickToZoom&&this._pageX===t.pageX&&this._pageY===t.pageY&&(a=this.getPosition(),this._zoomTo(this.zoom*this.zoomInDelta,!1,t.pageX-a.left,t.pageY-a.top),this.emit("_onRender")),this.allowSlide&&0===this._maxScrollTop&&0===this._maxScrollLeft?null!==(e=this._slide)&&void 0!==e&&e.endHandler(t):this.endHandler(t.timeStamp)),this._mousedown=!1)},o.prototype.onCanvasWheel=function(t){this.isSliding||this._onWheelHandler(t)},o.prototype.onCanvasScroll=function(t){t&&t.target&&(this._scrollTo(t.target.scrollLeft,t.target.scrollTop,!1),this.emit("_onRender"),this.emit("_onRenderBoxes"))},o.prototype._onWheelHandler=function(t){t.preventDefault();var e=1,r=0,e=t.wheelDelta?t.wheelDelta:-t.deltaY;t.ctrlKey?(r=0<e?1.05:.95,this.fitType="none",this.tabItem.fitType="none",this.zoomHandler(e,t.timeStamp,t.pageX,t.pageY),this.emit("_onRender"),this.emit("_onRenderBoxes"),0===this._maxScrollLeft&&0===this._maxScrollTop&&this.emit("_getSlidePages")):t.shiftKey?0!==this._maxScrollLeft&&(r=e<0?30:-30,(0!==this._scrollLeft&&r<0||this._scrollLeft!==this._maxScrollLeft&&0<r)&&(this._scrollTo(this.scrollLeft+r,this.scrollTop,!1),this.emit("_onRender"),this.emit("_onRenderBoxes"))):0!==this._maxScrollTop&&(r=e<0?30:-30,(0!==this._scrollTop&&r<0||this._scrollTop!==this._maxScrollTop&&0<r)&&(this._scrollTo(this.scrollLeft,this.scrollTop+r,!1),this.emit("_onRender"),this.emit("_onRenderBoxes")))},o.prototype.checkMouseOverPage=function(t){if(!this.tabItem)return!1;var e=this.tabItem.getCurrentPage();if(!e)return!1;var r=this.getMouseCoordinate(t),i=this.toPageCoordinate(r.x,r.y),n=i.x,o=i.y;return 0<=n&&n<=e.naturalWidth&&0<=o&&o<=e.naturalHeight},o.prototype.toCanvasCoordinate=function(t,e){var r=this.tabItem.getCurrentPage();return r.style.left,this.scrollLeft,r.style.width,r.style.top,this.scrollTop,r.style.height,{x:t=t*this.zoom+r.style.left-this.scrollLeft,y:e=e*this.zoom+r.style.top-this.scrollTop}},o.prototype.toPageCoordinate=function(t,e){var r=this.tabItem.getCurrentPage();return{x:t=(t-r.style.left+this.scrollLeft)/this.zoom,y:e=(e-r.style.top+this.scrollTop)/this.zoom}},o.prototype.getMouseCoordinate=function(t){var e=this.canvasManager.getCanvas().canvas.getBoundingClientRect(),r=void 0!==t.clientX?t.clientX:t.changedTouches[0].clientX,i=void 0!==t.clientY?t.clientY:t.changedTouches[0].clientY;return{x:r-e.left,y:i-e.top}},o.prototype._initAnimation=function(){this._time=Date.now||function(){return+new Date},this._fps=60,this._running={},this._counter=1},o.prototype._initScroller=function(){this.callback=function(t,e,r){this.scrollLeft=t,this.scrollTop=e,this.zoom=r,this.tabItem&&(this.tabItem.scrollLeft=t,this.tabItem.scrollTop=e,this.tabItem.zoom=r)}.bind(this),this._setValidArea(),this._setScrollerPosition()},o.prototype.setValidArea=function(t,e,r,i){t===+t&&(this._outerWidth=t),e===+e&&(this._outerHeight=e),r===+r&&(this._innerWidth=r),i===+i&&(this._innerHeight=i),this.calcMaxScrollValue()},o.prototype.calcMaxScrollValue=function(t){var e,r,i;void 0===t&&(t=this._zoom),!this.tabItem||(e=this.tabItem.getCurrentPage())&&(this._dataStorage.getMetadataSync(e.uid),r=(e.naturalWidth||0)*t,i=(e.naturalHeight||.1)*t,this._maxScrollLeft=Math.round(Math.max(r-this._outerWidth,0)),this._maxScrollTop=Math.round(Math.max(i-this._outerHeight,0)))},o.prototype.setPosition=function(t,e){this._outerLeft=t||0,this._outerTop=e||0},o.prototype.getPosition=function(){return{left:this._outerLeft||0,top:this._outerTop||0}},o.prototype.setSnapSize=function(t,e){this._snapWidth=t,this._snapHeight=e},o.prototype.activatePull=function(t,e,r,i){this._pullHeight=t,this._pullStart=i,this._pullActivate=e,this._pullDeactivate=r},o.prototype.emitPull=function(){this.publish(this._scrollLeft,-this._pullHeight,this._zoom,!0),this._pullStart&&this._pullStart()},o.prototype.endPull=function(){this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate(),this._scrollTo(this._scrollLeft,this._scrollTop,!0)},o.prototype.getCurScrollValues=function(){return{scrollLeft:this._scrollLeft,scrollTop:this._scrollTop,zoom:this._zoom}},o.prototype.getMaxScrollValues=function(){return{maxScrollLeft:this._maxScrollLeft,maxScrollTop:this._maxScrollTop}},o.prototype._zoomTo=function(t,e,r,i,n){if(!this.zooming)return!1;if("continuous"===this.displayMode)return!1;n&&(this._zoomComplete=n),this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),void 0===r&&(r=this._outerWidth/2),void 0===i&&(i=this._outerHeight/2);var o=this._zoom;if(t=Math.max(Math.min(t,this.maxZoom),this.minZoom),"single"===this.displayMode){this.calcMaxScrollValue(t);var s=(r+this._scrollLeft)*t/o-r,a=(i+this._scrollTop)*t/o-i;return s>this._maxScrollLeft?s=this._maxScrollLeft:s<0&&(s=0),a>this._maxScrollTop?a=this._maxScrollTop:a<0&&(a=0),this._innerWidth<this._outerWidth&&(s=this._maxScrollLeft/2),this._innerHeight<this._outerHeight&&(a=this._maxScrollTop/2),this.publish(s,a,t,e),!0}},o.prototype._zoomBy=function(t,e,r,i,n){return this._zoomTo(this._zoom*t,e,r,i,n)},o.prototype._scrollTo=function(t,e,r,i){this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),void 0!==i&&i!==this._zoom?this.zooming&&(t*=i,e*=i,this.calcMaxScrollValue(i)):i=this._zoom,this.scrollX?this.paging?t=Math.round(t/this._outerWidth)*this._outerWidth:this.snaping&&(t=Math.round(t/this._snapWidth)*this._snapWidth):t=this._scrollLeft,this.scrollY?this.paging?e=Math.round(e/this._outerHeight)*this._outerHeight:this.snaping&&(e=Math.round(e/this._snapHeight)*this._snapHeight):e=this._scrollTop,t=Math.max(Math.min(this._maxScrollLeft,t),0),e=Math.max(Math.min(this._maxScrollTop,e),0),t===this._scrollLeft&&e===this._scrollTop&&(r=!1),this._isProcessing||this.publish(t,e,i,r)},o.prototype._scrollBy=function(t,e,r){var i=this._isAnimating?this._futureLeft:this._scrollLeft,n=this._isAnimating?this._futureTop:this._scrollTop;this._scrollTo(i+(t||0),n+(e||0),r)},o.prototype.startHandler=function(t,e){var r,i;void 0!==t.length&&(e instanceof Date&&(e=e.valueOf()),this._interruptedAnimation=!0,this._isDecelerating&&(this._stop(this._isDecelerating),this._isDecelerating=!1),this._isAnimating&&(this._stop(this._animationId),this._isAnimating=!1),this._isSingleTouch=1===t.length,i=this._isSingleTouch?(r=t[0].pageX,t[0].pageY):(r=Math.abs(t[0].pageX+t[1].pageX)/2,Math.abs(t[0].pageY+t[1].pageY)/2),this._startTouchLeft=r,this._startTouchTop=i,this._startZoom=this._zoom,this._lastTouchLeft=r,this._lastTouchTop=i,this._lastScale=1,this._lastTouchMove=e,this._enableScrollX=!this._isSingleTouch&&this.scrollX,this._enableScrollY=!this._isSingleTouch&&this.scrollY,this._isProcessing=!0,this._isDecelerationComplete=!1,this._isDragging=!this._isSingleTouch,this._position=[])},o.prototype.moveHandler=function(t,e,r){var i,n,o,s,a,h,u,l,c,d,p,_,g,f;void 0!==t.length&&(e instanceof Date&&(e=e.valueOf()),this._isProcessing&&(n=1===t.length?(i=t[0].pageX,t[0].pageY):(i=Math.abs(t[0].pageX+t[1].pageX)/2,Math.abs(t[0].pageY+t[1].pageY)/2),o=this._position,this._isDragging?(s=i-this._lastTouchLeft,a=n-this._lastTouchTop,c=this._scrollLeft,d=this._scrollTop,p=this._zoom,void 0!==r&&this.zooming&&(p=(h=p)/this._lastScale*r,h!==(p=Math.max(Math.min(p,this.maxZoom),this.minZoom))&&(c=((u=i-this._outerLeft)+c)*p/h-u,d=((l=n-this._outerTop)+d)*p/h-l,this.calcMaxScrollValue(p))),this._enableScrollX&&((c-=s*this.speedDelta)>this._maxScrollLeft||c<0)&&(this.bouncing?c+=s/2*this.speedDelta:c=Math.max(Math.min(this._maxScrollLeft,c),0)),this._enableScrollY&&((d-=a*this.speedDelta)>this._maxScrollTop||d<0)&&(this.bouncing?(d+=a/2*this.speedDelta,this._enableScrollX||null==this._pullHeight||(!this._pullActive&&d<=-this._pullHeight?(this._pullActive=!0,this._pullActivate&&this._pullActivate()):this._pullActive&&d>-this._pullHeight&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))):d=Math.max(Math.min(this._maxScrollTop,d),0)),60<o.length&&o.splice(0,30),o.push(c,d,e),this.publish(c,d,p)):(_=this.locking?3:0,g=Math.abs(i-this._startTouchLeft),f=Math.abs(n-this._startTouchTop),this._enableScrollX=this.scrollX&&_<=g,this._enableScrollY=this.scrollY&&_<=f,o.push(this._scrollLeft,this._scrollTop,e),this._isDragging=(this._enableScrollX||this._enableScrollY)&&(5<=g||5<=f),this._isDragging&&(this._interruptedAnimation=!1)),this._lastTouchLeft=i,this._lastTouchTop=n,this._lastTouchMove=e,this._lastScale=r))},o.prototype.endHandler=function(t){if(t instanceof Date&&(t=t.valueOf()),this._isProcessing){if(this._isProcessing=!1,this._isDragging)if(this._isDragging=!1,this._isSingleTouch&&this.animating&&t-this._lastTouchMove<=100){for(var e,r,i,n=this._position,o=n.length-1,s=o,a=o;0<a&&n[a]>this._lastTouchMove-100;a-=3)s=a;s!==o?(e=n[o]-n[s],r=this._scrollLeft-n[s-2],i=this._scrollTop-n[s-1],this._decelerationVelocityX=r/e*(1e3/60),this._decelerationVelocityY=i/e*(1e3/60),1<Math.abs(this._decelerationVelocityX)||1<Math.abs(this._decelerationVelocityY)?this._startDeceleration(t):this._scrollComplete&&this._scrollComplete()):this._scrollComplete&&this._scrollComplete()}else 100<t-this._lastTouchMove&&this._scrollComplete&&this._scrollComplete();this._isDecelerating||(this._pullActive&&this._pullStart?(this.publish(this._scrollLeft,this._scrollTop,this._zoom),this._pullStart()):((this._interruptedAnimation||this._isDragging)&&this._scrollComplete&&this._scrollComplete(),this._scrollTo(this._scrollLeft,this._scrollTop,!0,this._zoom),this._pullActive&&(this._pullActive=!1,this._pullDeactivate&&this._pullDeactivate()))),this._position.length=0}},o.prototype.zoomHandler=function(t,e,r,i){var n=0<t?1.05:.95;return this._zoomTo(this._zoom*n,!1,r-this._outerLeft,i-this._outerTop)},o.prototype.publish=function(i,n,o,t){var s,a,h,u,l,c,d=this;this._isAnimating&&(this._stop(this._isAnimating),this._isAnimating=!1),t&&this.animating?(this._futureLeft=i,this._futureTop=n,this._futureZoom=o,s=this._scrollLeft,a=this._scrollTop,h=this._zoom,u=i-s,l=n-a,c=o-h,this._isAnimating=this._start(function(t,e,r){r&&(d._scrollLeft=s+u*t,d._scrollTop=a+l*t,d._zoom=h+c*t,d.callback&&d.callback(i,n,o))},function(t){return d._isAnimating===t},function(t,e,r){e===d._isAnimating&&(d._isAnimating=!1),(d._isDecelerationComplete||r)&&d._scrollComplete&&d._scrollComplete(),d.zooming&&(d.calcMaxScrollValue(),d._zoomComplete&&(d._zoomComplete(),d._zoomComplete=null))},this.animationDuration,this._isAnimating?this._easeOut:this._easeInOut)):(this._futureLeft=this._scrollLeft=i,this._futureTop=this._scrollTop=n,this._futureZoom=this._zoom=o,this.callback&&this.callback(i,n,o),this.zooming&&(this.calcMaxScrollValue(),this._zoomComplete&&(this._zoomComplete(),this._zoomComplete=null)))},o.prototype._easeOut=function(t){return Math.pow(t-1,3)+1},o.prototype._easeInOut=function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},o.prototype._startDeceleration=function(t){var e,r,i,n,c=this;this.paging?(e=Math.max(Math.min(this._scrollLeft,this._maxScrollLeft),0),r=Math.max(Math.min(this._scrollTop,this._maxScrollTop),0),i=this._outerWidth,n=this._outerHeight,this._minDecelerationScrollLeft=Math.floor(e/i)*i,this._minDecelerationScrollTop=Math.floor(r/n)*n,this._maxDecelerationScrollLeft=Math.ceil(e/i)*i,this._maxDecelerationScrollTop=Math.ceil(r/n)*n):(this._minDecelerationScrollLeft=0,this._minDecelerationScrollTop=0,this._maxDecelerationScrollLeft=this._maxScrollLeft,this._maxDecelerationScrollTop=this._maxScrollTop);var o=this.snaping?4:.001;this._isDecelerating=this._start(function(t,e,r){var i,n,o,s,a,h,u=c._scrollLeft+c._decelerationVelocityX,l=c._scrollTop+c._decelerationVelocityY;c.bouncing||(i=Math.max(Math.min(c._maxDecelerationScrollLeft,u),c._minDecelerationScrollLeft),n=Math.max(Math.min(c._maxDecelerationScrollTop,l),c._minDecelerationScrollTop),i!==u&&(u=i,c._decelerationVelocityX=0),n!==l&&(l=n,c._decelerationVelocityY=0)),r?c.publish(u,l,c._zoom):(c._scrollLeft=u,c._scrollTop=l),c.paging||(c._decelerationVelocityX*=.95,c._decelerationVelocityY*=.95),c.bouncing&&(s=o=0,a=c.penetrationAcceleration,h=c.penetrationDeceleration,u<c._minDecelerationScrollLeft?o=c._minDecelerationScrollLeft-u:u>c._maxDecelerationScrollLeft&&(o=c._maxDecelerationScrollLeft-u),l<c._minDecelerationScrollTop?s=c._minDecelerationScrollTop-l:l>c._maxDecelerationScrollTop&&(s=c._maxDecelerationScrollTop-l),0!=o&&(o*c._decelerationVelocityX<=0?c._decelerationVelocityX+=o*h:c._decelerationVelocityX=o*a),0!=s&&(s*c._decelerationVelocityY<=0?c._decelerationVelocityY+=s*h:c._decelerationVelocityY=s*a))},function(){return Math.abs(c._decelerationVelocityX)>=o||Math.abs(c._decelerationVelocityY)>=o||!(c._isDecelerationComplete=!0)},function(t,e,r){c._isDecelerating=!1,c._scrollComplete&&c._scrollComplete(),c._scrollTo(c._scrollLeft,c._scrollTop,c.snaping)})},o.prototype._stop=function(t){var e=null!=this._running[t];return e&&(this._running[t]=null),e},o.prototype._isRunning=function(t){return null!=this._running[t]},o.prototype._start=function(s,a,h,u,l){var c=this,d=this._time(),p=d,_=0,g=0,f=this._counter++;if(f%16==0){var t={};for(var e in this._running)t[e]=!0;this._running=t}var v=function(t){var e=!0!==t,r=c._time();if(!c._running[f]||a&&!a(f))return c._running[f]=null,void(h&&h(c._fps-g/((r-d)/1e3),f,!1));if(e)for(var i=Math.round((r-p)/(1e3/c._fps))-1,n=0;n<Math.min(i,4);n++)v(!0),g++;u&&1<(_=(r-d)/u)&&(_=1);var o=l?l(_):_;!1!==s(o,r,e)&&1!==_||!e?e&&(p=r,m.requestAnimationFrame(v)):(c._running[f]=null,h&&h(c._fps-g/((r-d)/1e3),f,1===_||null==u))};return this._running[f]=!0,m.requestAnimationFrame(v),f},o.prototype.on=function(t,e){this._innerPubsub.on(t,e)},o.prototype.emit=function(t){for(var e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];(e=this._innerPubsub).emit.apply(e,n([t],r))},o.prototype.off=function(t,e){this._innerPubsub.off(t,e)},o);function o(t,e,r,i,n,o,s){var a=this;this.uid=null,this.pageWidth=0,this.pageHeight=0,this.canvasOffsetWidth=0,this.canvasOffsetHeight=0,this.canvasClientWidth=0,this.canvasClientHeight=0,this.canvasInnerWidth=0,this.canvasInnerHeight=0,this.devicePixelRatio=1,this.maxWidth=0,this.maxHeight=0,this.virtualHeight=0,this.virtualWidth=0,this._mousedown=!1,this.fitType="window",this.keepZoom=!0,this.isClickToZoom=!1,this.isFreeCrop=!1,this._touchPointDistance=0,this._pageX=0,this._pageY=0,this.zoom=1,this.zoomInDelta=1.2,this.zoomOutDelta=1.2,this.zoomDelta=1.2,this.scrollLeft=0,this.scrollTop=0,this.keepOriginSize=!0,this.displayMode="single",this.operationMode=0,this.currentTabId=null,this.currentPageList=[],this.pageMargin=10,this.outMargin=10,this.pageBorderWidth=0,this.rotateMode=1,this.saveBackgroundColor="#ffffff",this.aspectRatio=0,this.keepAspectRatio=!1,this._startDistance=0,this.useWebWorker=!1,this.renderTaskUid=null,this.workerTimer=null,this.useHermite=!0,this.scrollbarWidth=0,this.loadingTimer=null,this.allowSlide=!0,this.slideStart=0,this.slideLeft=0,this.slideStartTime=0,this._slide=null,this.isSliding=!1,this.zooming=h.ZOOMING,this.scrollX=h.SCROLLX,this.scrollY=h.SCROLLY,this.animating=h.ANIMATING,this.bouncing=h.BOUNCING,this.paging=h.PAGING,this.snaping=h.SNAPING,this.animationDuration=h.ANIMATION_DURATION,this.locking=h.LOCKING,this.minZoom=h.SCROLL_MIN_ZOOM,this.maxZoom=h.SCROLL_MAX_ZOOM,this.speedDelta=h.SPEED_DELTA,this._outerWidth=0,this._outerHeight=0,this._innerWidth=0,this._innerHeight=0,this._outerLeft=0,this._outerTop=0,this._snapWidth=0,this._snapHeight=0,this._pullHeight=0,this._pullActive=!1,this._maxScrollLeft=0,this._maxScrollTop=0,this._scrollLeft=0,this._scrollTop=0,this._zoom=1,this._futureLeft=0,this._futureTop=0,this._futureZoom=0,this._zoomComplete=null,this._isSingleTouch=!0,this._isDecelerating=!1,this._isProcessing=!1,this._isDragging=!1,this._isAnimating=!1,this._interruptedAnimation=!1,this._position=[],this._startTouchLeft=0,this._startTouchTop=0,this._startZoom=1,this._lastTouchLeft=0,this._lastTouchTop=0,this._lastScale=1,this._enableScrollX=!0,this._enableScrollY=!0,this._fps=60,this._running={},this._counter=1,this.cropLineColor="rgba(0,0,0,1)",this.defaultCursor=null,this.uid=i,this.devicePixelRatio=m.devicePixelRatio(),this._innerPubsub=r,this._dataStorage=e,this.fitType=t.fitType,this.maxZoom=t.maxZoom,this.minZoom=t.minZoom,this.operationMode=t.operationMode,this.pageMargin=t.pageMargin,this.scrollX=t.scrollX,this.scrollY=t.scrollY,this.zoomInDelta=t.zoomInDelta,this.zoomOutDelta=t.zoomOutDelta,this.zoomDelta=t.zoomDelta,this.zooming=t.zooming,this.useWebWorker=t.useWebWorker,this.useHermite=n,this.scrollbarWidth=s,this.canvasManager=new u.CanvasManager,this.canvasManager.setSaveBackgroundColor(this.saveBackgroundColor),this._initAnimation(),this._initScroller(),this._slide=new l.Slide,this._slide.stateCallback=function(t){a.isSliding=t},this.useHermite&&(this.workerBlobURL||(this.workerBlobURL=o),this.hermite=new c.Hermite(this.useWebWorker,this.workerBlobURL),this.hermiteMin=new c.Hermite(this.useWebWorker,this.workerBlobURL))}e.Graphic=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasManager=void 0;var i=r(30),n=r(31),o=r(32),s=r(33),a=r(0),h=(u.prototype.getNewSaveCanvas=function(){var t=new s.OffCanvas({devicePixelRatio:this._devicePixelRatio},"save");return this._initCanvas(t),t.saveColor=this.saveColor,t},u.prototype._initCanvas=function(t){var e=document.createElement("canvas");t.bindCanvas(e)},u.prototype.setSaveBackgroundColor=function(t){this.saveColor=t,this._offCanvas.saveColor=t,this._saveCanvas.saveColor=t},u.prototype.setSaveType=function(t){this._saveCanvas.saveType=t,this._offCanvas.saveType=t},u.prototype.bindCanvas=function(t){var e=t.main,r=t.annotation,i=t.cropper;e&&this._mainCanvas.bindCanvas(e),r&&this._annotationCanvas.bindCanvas(r),i&&this._cropperCanvas.bindCanvas(i)},u.prototype.unbindCanvas=function(t){"main"===t&&this._mainCanvas.unbindCanvas(),"annotation"===t&&this._annotationCanvas.unbindCanvas(),"cropper"===t&&this._cropperCanvas.unbindCanvas()},u.prototype.setCanvasSize=function(t,e){this._mainCanvas.setCanvasSize(t,e),this._annotationCanvas.setCanvasSize(t,e),this._cropperCanvas.setCanvasSize(t,e)},u.prototype.getMainCanvasContext=function(){return this._mainCanvas.getContext()},u.prototype.getAnnotationCanvasContext=function(){return this._annotationCanvas.getContext()},u.prototype.getCropperCanvasContext=function(){return this._cropperCanvas.getContext()},u.prototype.getOffCanvasContext=function(){return this._cropperCanvas.getContext()},u.prototype.getCanvas=function(){return this._mainCanvas},u.prototype.getCropperCanvasCanvas=function(){return this._cropperCanvas},u.prototype.getOffCanvas=function(){return this._offCanvas},u.prototype.getSaveCanvas=function(){return this._saveCanvas},u);function u(){this.saveColor="#ffffff",this._devicePixelRatio=a.devicePixelRatio(),this._mainCanvas=new o.MainCanvas({devicePixelRatio:this._devicePixelRatio}),this._annotationCanvas=new i.AnnotationCanvas({devicePixelRatio:this._devicePixelRatio}),this._cropperCanvas=new n.CropperCanvas({devicePixelRatio:this._devicePixelRatio}),this._offCanvas=new s.OffCanvas({devicePixelRatio:this._devicePixelRatio},"off"),this._saveCanvas=new s.OffCanvas({devicePixelRatio:this._devicePixelRatio},"save"),this._initCanvas(this._offCanvas),this._initCanvas(this._saveCanvas)}e.CanvasManager=h},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationCanvas=void 0;var o,s=r(3),a=(o=s.BaseCanvas,n(h,o),h);function h(t){return o.call(this,t)||this}e.AnnotationCanvas=a},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.CropperCanvas=void 0;var o,s=r(3),a=(o=s.BaseCanvas,n(h,o),h.prototype.setMaskColor=function(t){this.maskColor=t},h.prototype.getMaskColor=function(){return this.maskColor},h);function h(t){var e=o.call(this,t)||this;return e.maskColor="rgba(200,200,200,0.5)",e.isMask=!0,e}e.CropperCanvas=a},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MainCanvas=void 0;var o,s=r(3),a=(o=s.BaseCanvas,n(h,o),h.prototype.setBackGroundColor=function(t){this.canvas.style.background=t},h);function h(t){return o.call(this,t)||this}e.MainCanvas=a},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.OffCanvas=void 0;var o,s=r(3),a=(o=s.BaseCanvas,n(h,o),h.prototype.setCanvasSize=function(t,e){this.canvas.width=t,this.canvas.height=e,this.cssWidth=t,this.cssHeight=e,this.innerWidth=t,this.innerHeight=e},h.prototype._fillRect=function(t,e,r){return"image/png"!==this.saveType&&(t.save(),t.fillStyle=this.saveColor,t.fillRect(0,0,e,r),t.restore(),!0)},h.prototype.rotate=function(t,e,r){var i=this.canvasContext,n=!1,o=null;0===t.mode&&(o=e.editor2d.rotateRectangle(0,0,this.tempCanvas.width,this.tempCanvas.height,t.calcAngle),n=!0),null!==this.currentOperationType&&this.currentOperationType!==t.mode&&(this.tempCanvas.width=this.innerWidth,this.tempCanvas.height=this.innerHeight,this.tempCtx.drawImage(this.canvas,0,0,this.innerWidth,this.innerHeight)),this.currentOperationType=t.mode,n&&this.setCanvasSize(o.width,o.height),i.clearRect(0,0,this.innerWidth,this.innerHeight),i.save(),this._fillRect(i,this.innerWidth,this.innerHeight),i.translate(this.innerWidth/2,this.innerHeight/2),e.editor2d.setTransform(i),i.drawImage(this.tempCanvas,-this.tempCanvas.width/2,-this.tempCanvas.height/2,this.tempCanvas.width,this.tempCanvas.height),i.restore(),n&&e.setNaturalSize(o.width,o.height)},h.prototype.flip=function(t,e,r){var i=this.canvasContext;i.clearRect(0,0,this.innerWidth,this.innerHeight),i.save(),this._fillRect(i,this.innerWidth,this.innerHeight),i.translate(this.innerWidth/2,this.innerHeight/2),e.editor2d.setTransform(i),i.drawImage(this.tempCanvas,-this.tempCanvas.width/2,-this.tempCanvas.height/2,this.tempCanvas.width,this.tempCanvas.height),i.restore()},h.prototype.crop=function(t,e){var r=this.canvasContext;this.tempCanvas.width=t.width,this.tempCanvas.height=t.height,this.tempCtx.drawImage(this.canvas,t.left,t.top,t.width,t.height,0,0,t.width,t.height),this.setCanvasSize(t.width,t.height),r.drawImage(this.tempCanvas,0,0),e.setNaturalSize(t.width,t.height)},h.prototype.erase=function(t,e){var r=this.canvasContext;this.tempCtx.save(),this.tempCtx.fillStyle=t.color||"#ffffff",this.tempCtx.fillRect(t.left,t.top,t.width,t.height),this.tempCtx.restore(),r.save(),r.fillStyle=t.color||"#ffffff",r.fillRect(t.left,t.top,t.width,t.height),r.restore()},h.prototype.changePageSize=function(t,e){var r=this.canvasContext;this.tempCanvas.width=t.width,this.tempCanvas.height=t.height,this.tempCtx.save(),this.tempCtx.drawImage(this.canvas,0,0,t.width,t.height),this.tempCtx.restore(),this.setCanvasSize(t.width,t.height),r.drawImage(this.tempCanvas,0,0),e.setNaturalSize(t.width,t.height)},h.prototype.render=function(t,e,r){var i,n,o=this;return t!==this.uid&&(this.uid=t,this.img=e,this.setCanvasSize(e.naturalWidth,e.naturalHeight),this.tempCanvas.width=e.naturalWidth,this.tempCanvas.height=e.naturalHeight,this.tempCtx.save(),this.tempCtx.drawImage(e,0,0,e.naturalWidth,e.naturalHeight),this.tempCtx.restore(),(i=this.canvasContext).save(),i.drawImage(e,0,0,e.naturalWidth,e.naturalHeight),i.restore(),n=r.editor2d.allStepsStack,r.editor2d.reset(),n.forEach(function(t){var e;"rotate"===t.type?(r.editor2d.rotate(t.angle,0,0,t.mode),e=r.editor2d.getLatestResult(),o.rotate(t,r,e)):"flip"===t.type?(r.editor2d.flip(t.direction),e=r.editor2d.getLatestResult(),o.flip(t,r,e)):"crop"===t.type?(r.editor2d.crop(t.left,t.top,t.width,t.height),o.crop(t,r)):"erase"===t.type?(r.editor2d.erase(t.left,t.top,t.width,t.height,t.color),o.erase(t,r)):"changeSize"===t.type&&(r.editor2d.changePageSize(t.width,t.height),o.changePageSize(t,r))}),i.save(),i.restore()),this.canvas},h.prototype.reset=function(){this.setCanvasSize(1,1),this.tempCanvas.width=1,this.tempCanvas.height=1,this.uid=null,this.currentOperationType=null},h);function h(t,e){var r=o.call(this,t)||this;return r.uid=null,r.img=null,r.imgData=null,r.tempCanvas=null,r.tempCtx=null,r.saveColor=null,r.saveType="image/jpeg",r.currentOperationType=null,r.useType=null,r.tempCanvas=document.createElement("canvas"),r.tempCtx=r.tempCanvas.getContext("2d"),r.tempCtx.imageSmoothingEnabled=!1,r.useType=e,r}e.OffCanvas=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Slide=void 0;var i=(n.prototype.setSlidePages=function(t){var i=this;this.wrapper&&(clearTimeout(this.timer1),this.timer1=setTimeout(function(){i.wrapper&&(i.pages=t).forEach(function(t,e){var r=i.wrapper.children[e].children[0];r.src!==t.url&&(r.onerror=function(){},r.src=t.url),r.style.width=t.width+"px",r.style.height=t.height+"px"})},220))},n.prototype.startHandler=function(t){this.isDragging||(clearTimeout(this.timer),this.startTime=t.timeStamp,t.touches?(this.touchNum=t.touches.length,this.startX=t.touches[0].pageX):this.startX=t.pageX,1<this.touchNum?this.isStart=!1:this.isStart=!0)},n.prototype.moveHandler=function(t){var e,r;this.isStart&&(2<this.touchNum||(r=(t.touches?t.touches[0].pageX:t.pageX)-this.startX,Math.abs(r)>this.triggerDist&&(this.isDragging=!0,null!==(e=this.stateCallback)&&void 0!==e&&e.call(this,!0),this.wrapper.style.visibility="visible",r>this.width?r=this.width:r<-this.width&&(r=-this.width)),this.wrapper.style.transform="translateX("+r+"px)"))},n.prototype.endHandler=function(t){var r,i,n,o=this;this.isStart&&(r=!0,t.touches&&1<this.touchNum&&(r=!1),t.touches&&1!==t.changedTouches.length&&(r=!1),this.isStart=!1,i=t.pageX-this.startX,n=t.timeStamp-this.startTime,this.wrapper.style.transition="transform 0.2s linear",i>this.minDist&&r||n<this.minTime&&i>this.triggerDist&&r?this.callbackHandler("prev"):i<-this.minDist&&r||n<this.minTime&&i<-this.triggerDist&&r?this.callbackHandler("next"):this.callbackHandler(""),setTimeout(function(){var t;o.isDragging=!1,null!==(t=o.stateCallback)&&void 0!==t&&t.call(o,!1)},210),this.timer=setTimeout(function(){var t,e;o.wrapper.style.visibility="hidden",(i>o.minDist&&r||n<o.minTime&&i>o.triggerDist&&r)&&-1!==(null===(t=o.pages[0])||void 0===t?void 0:t.index)?o.reorder("prev"):(i<-o.minDist&&r||n<o.minTime&&i<-o.triggerDist&&r)&&-1!==(null===(e=o.pages[2])||void 0===e?void 0:e.index)&&o.reorder("next")},200),setTimeout(function(){o.wrapper.style.transition="",o.wrapper.style.transform="translateX(0px)"},200))},n.prototype.callbackHandler=function(t){var e,r,i=this;"prev"===t&&-1!==(null===(e=this.pages[0])||void 0===e?void 0:e.index)?(setTimeout(function(){var t;null!==(t=i.callback)&&void 0!==t&&t.call(i,"prev")},200),this.wrapper.style.transform="translateX("+this.width+"px)"):"next"===t&&-1!==(null===(r=this.pages[2])||void 0===r?void 0:r.index)?(setTimeout(function(){var t;null!==(t=i.callback)&&void 0!==t&&t.call(i,"next")},200),this.wrapper.style.transform="translateX("+-this.width+"px)"):this.wrapper.style.transform="translateX(0px)"},n.prototype.reorder=function(t){if(this.wrapper){for(var e=[],r=0;r<3;r++){var i=this.wrapper.children[r].children[0];this.wrapper.children[r].removeChild(i),e.push(i)}for(var n=0;n<3;n++)"prev"===t?this.wrapper.children[n].appendChild(e[(n+2)%3]):"next"===t&&this.wrapper.children[n].appendChild(e[(n+1)%3]);e=null}},n.prototype.bindCallback=function(t){this.callback=t},n.prototype.bindSlide=function(t){this.wrapper=t;for(var e=0;e<3;e++)this.wrapper.children[e].style.border="1px solid #c2c2c2"},n.prototype.unbindSlide=function(){this.wrapper=null},n.prototype.setSlideSize=function(t){if(!this.wrapper)return!1;t<120&&(this.minDist=t/2),this.width=t,this.wrapper.style.width=3*t+"px",this.wrapper.style.left=-t+"px";for(var e=0;e<3;e++)this.wrapper.children[e].style.width=t+"px"},n);function n(){this.wrapper=null,this.isDragging=!1,this.isStart=!1,this.startX=0,this.timer=null,this.startTime=0,this.width=0,this.triggerDist=10,this.minDist=60,this.minTime=300,this.timer1=null,this.pages=[{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1},{width:0,height:0,url:"",uid:"",index:-1}],this.callback=null,this.stateCallback=null,this.touchNum=1}e.Slide=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hermite=void 0;var i=(n.prototype.resize=function(t,e,r,i){return this.useWorker?this.resizeWithWorker(t,e,r,i):this.resizeWithoutWorker(t,e,r,i)},n.prototype.resizeWithoutWorker=function(t,e,r,i){var n=t.width,o=t.height;e=Math.round(e);for(var s=o/(r=Math.round(r)),a=t.getContext("2d"),h=[],u=2*Math.ceil(o/this.cores/2),l=[],c=-1,d=0;d<this.cores;d++){var p,_=c+1;o<=_||(c=_+u-1,c=Math.min(c,o-1),p=u,p=Math.min(u,o-_),h[d]={},h[d].source=a.getImageData(0,_,n,u),h[d].target=!0,h[d].start_y=Math.ceil(_/s),h[d].height=p,et={width_source:n,height_source:h[d].height,width:e,height:Math.ceil(h[d].height/s),core:d,source:h[d].source.data.buffer||h[d].source.data},l[d]=et)}for(var g=l.length,f=[],v=0;v<g;v++){for(var m=l[v],E=m.core,y=m.width_source,b=m.height_source,T=m.width,S=m.height,w=y/T,M=b/S,P=Math.ceil(w/2),C=Math.ceil(M/2),A=new Uint8ClampedArray(m.source),I=(A.length,T*S*4),O=new ArrayBuffer(I),R=new Uint8ClampedArray(O,0,I),D=0;D<S;D++)for(var x=0;x<T;x++){for(var L=4*(x+D*T),N=0,k=0,B=0,F=0,U=0,j=0,G=0,V=D*M,H=Math.floor(x*w),W=Math.ceil((x+1)*w),z=Math.floor(D*M),Y=Math.ceil((D+1)*M),W=Math.min(W,y),Y=Math.min(Y,b),K=z;K<Y;K++)for(var X=Math.abs(V-K)/C,Z=x*w,q=X*X,Q=H;Q<W;Q++){var $,J=Math.abs(Z-Q)/P,tt=Math.sqrt(q+J*J);1<=tt||(G+=(N=2*tt*tt*tt-3*tt*tt+1)*A[3+($=4*(Q+K*y))],B+=N,A[3+$]<255&&(N=N*A[3+$]/250),F+=N*A[$],U+=N*A[1+$],j+=N*A[2+$],k+=N)}R[L]=F/k,R[1+L]=U/k,R[2+L]=j/k,R[3+L]=G/B}var et={core:E,target:R};f.push(et)}for(var rt=0;rt<g;rt++){var it=f[rt],nt=Math.ceil(h[rt].height/s);if(h[rt].target=a.createImageData(e,nt),h[rt].target.data.set)h[rt].target.data.set(it.target);else for(var ot=h[rt].target.data.length,st=0;st<ot;st++)h[rt].target.data[st]=it.target[st]}return Promise.resolve(h)},n.prototype.resizeWithWorker=function(t,l,e,c){var d=this,n=((new Date).getTime(),t.width),r=t.height;l=Math.round(l);var p=r/(e=Math.round(e));if(0<this.workers_archive.length)for(var i=0;i<this.cores;i++)null!=this.workers_archive[i]&&(this.workers_archive[i].terminate(),delete this.workers_archive[i]);this.workers_archive=new Array(this.cores);for(var _=t.getContext("2d"),g=[],o=2*Math.ceil(r/this.cores/2),s=-1,a=0;a<this.cores;a++){var h,u=s+1;r<=u||(s=u+o-1,s=Math.min(s,r-1),h=o,h=Math.min(o,r-u),g[a]={},g[a].source=_.getImageData(0,u,n,o),g[a].target=!0,g[a].start_y=Math.ceil(u/p),g[a].height=h)}for(var f=[],v=this,m=0;m<this.cores;m++)!function(t){if(null!=g[t]){var e=new Worker(v.workerBlobURL);v.workers_archive[t]=e;var r=new Promise(function(h,u){e.onmessage=function(t){var e,r;if(c!==d.taskUid){if(0<d.workers_archive.length)for(var i=0;i<d.cores;i++)null!=d.workers_archive[i]&&(null!==(e=d.workers_archive[i])&&void 0!==e&&e.terminate(),delete d.workers_archive[i]);d.workers_archive=new Array(d.cores),u(!1)}var n=t.data.core;null!==(r=d.workers_archive[n])&&void 0!==r&&r.terminate(),delete d.workers_archive[n];var o=Math.ceil(g[n].height/p);if(g[n].target=_.createImageData(l,o),g[n].target.data.set)g[n].target.data.set(t.data.target);else for(var s=g[n].target.data.length,a=0;a<s;a++)g[n].target.data[a]=t.data.target[a];h(n)}});f.push(r);var i={width_source:n,height_source:g[t].height,width:l,height:Math.ceil(g[t].height/p),core:t,source:g[t].source.data.buffer||g[t].source.data};try{e.postMessage(i,[i.source])}catch(t){e.postMessage(i)}}}(m);return Promise.all(f).then(function(t){return Promise.resolve(g)}).catch(function(t){return Promise.reject(t)})},n);function n(t,e){this.useWorker=!0,this.workers_archive=[],this.taskUid=null,this.useWorker=t,this.cores=navigator.hardwareConcurrency||4,this.workerBlobURL=e}e.Hermite=i},function(t,e,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.ThumbnailView=void 0;var o=r(0),s=r(1),i=r(2),a=(h.prototype._init=function(r,i){var n=this;void 0===i&&(i=[]),Object.keys(r).forEach(function(t){var e=n[t];void 0!==e&&e!==r[t]&&(n[t]=r[t],e===n[t]&&i.push(t))})},h.prototype._throwError=function(t){this._dataPubsub.emit(s.privateEvent.UPDATE_ERROR_MESSAGE,t)},Object.defineProperty(h.prototype,"size",{get:function(){return this._size},set:function(t){o.isSize(t)?(this._size=t,this._notifyUi({size:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"mouseShape",{get:function(){return this._mouseShape},set:function(t){o.isString(t)?(this._mouseShape=t,this._notifyUi({mouseShape:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"scrollDirection",{get:function(){return this._scrollDirection},set:function(t){o.isString(t)?(this._scrollDirection=t,this._notifyUi({scrollDirection:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"sequence",{get:function(){return this._sequence},set:function(t){o.isNumber(t)?(this._sequence=t,this._notifyUi({sequence:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"location",{get:function(){return this._location},set:function(t){o.isString(t)?(this._location=t,this._notifyUi({location:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"showThumbnail",{get:function(){return this._showThumbnail},set:function(t){o.isBoolean(t)?(this._showThumbnail=t,this._notifyUi({showThumbnail:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"showPageNumber",{get:function(){return this._showPageNumber},set:function(t){o.isBoolean(t)?(this._showPageNumber=t,this._notifyUi({showPageNumber:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"showSelectBox",{get:function(){return this._showSelectBox},set:function(t){o.isBoolean(t)?(this._showSelectBox=t,this._notifyUi({showSelectBox:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"showRemoveBtn",{get:function(){return this._showRemoveBtn},set:function(t){o.isBoolean(t)?(this._showRemoveBtn=t,this._notifyUi({showRemoveBtn:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"fullThumbnail",{get:function(){return this._fullThumbnail},set:function(t){o.isBoolean(t)?(this._fullThumbnail=t,this._notifyUi({fullThumbnail:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"rows",{get:function(){return this._rows},set:function(t){o.isNumber(t)?t<=0?this._throwError(s.errorMessages.PARAMETER_RANGE):(this._rows=t,this._notifyUi({rows:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"columns",{get:function(){return this._columns},set:function(t){o.isNumber(t)?t<=0?this._throwError(s.errorMessages.PARAMETER_RANGE):(this._columns=t,this._notifyUi({columns:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"background",{get:function(){return this._background},set:function(t){o.isColor(t)?(this._background=t,this._notifyUi({background:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"border",{get:function(){return this._border},set:function(t){o.isBorder(t)?(this._border=t,this._notifyUi({border:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"pageBackground",{get:function(){return this._pageBackground},set:function(t){o.isColor(t)?(this._pageBackground=t,this._notifyUi({pageBackground:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"pageBorder",{get:function(){return this._pageBorder},set:function(t){o.isBorder(t)?(this._pageBorder=t,this._notifyUi({pageBorder:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"selectedPageBackground",{get:function(){return this._selectedPageBackground},set:function(t){o.isColor(t)?(this._selectedPageBackground=t,this._notifyUi({selectedPageBackground:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"selectedPageBorder",{get:function(){return this._selectedPageBorder},set:function(t){o.isBorder(t)?(this._selectedPageBorder=t,this._notifyUi({selectedPageBorder:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"hoverPageBackground",{get:function(){return this._hoverPageBackground},set:function(t){o.isColor(t)?(this._hoverPageBackground=t,this._notifyUi({hoverPageBackground:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"hoverPageBorder",{get:function(){return this._hoverPageBorder},set:function(t){o.isBorder(t)?(this._hoverPageBorder=t,this._notifyUi({hoverPageBorder:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.BORDER_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"placeholderBackground",{get:function(){return this._placeholderBackground},set:function(t){o.isColor(t)?(this._placeholderBackground=t,this._notifyUi({placeholderBackground:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.COLOR_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"pageMargin",{get:function(){return this._pageMargin},set:function(t){o.isSize(t)?(this._pageMargin=t,this._notifyUi({pageMargin:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.SIZE_INVALID)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"allowPageDragging",{get:function(){return this._allowPageDragging},set:function(t){o.isBoolean(t)?(this._allowPageDragging=t,this._notifyUi({allowPageDragging:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"allowResizing",{get:function(){return this._allowResizing},set:function(t){o.isBoolean(t)?(this._allowResizing=t,this._notifyUi({allowResizing:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"allowKeyboardControl",{get:function(){return this._allowKeyboardControl},set:function(t){o.isBoolean(t)?(this._allowKeyboardControl=t,this._notifyUi({allowKeyboardControl:t}),this._throwError(s.errorMessages.OK)):this._throwError(s.errorMessages.PARAMETER_TYPE)},enumerable:!1,configurable:!0}),h.prototype.scrollTo=function(t){this.emit(s.uiEvent.SCROLL_TO,t,!1)},h.prototype.setViewMode=function(t,e){return o.isNumber(t)&&o.isNumber(e)?t<0||e<0?(this._throwError(s.errorMessages.PARAMETER_RANGE),!1):(this._rows=e,this._columns=t,this.emit(s.uiEvent.SET_VIEW_MODE,t,e),!0):(this._throwError(s.errorMessages.PARAMETER_TYPE),!1)},h.prototype.on=function(t,e){return o.isString(t)&&o.isFunction(e)?(this.pubsub.on(t,e),!0):(this._throwError(s.errorMessages.PARAMETER_TYPE),!1)},h.prototype.emit=function(t){for(var e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return o.isString(t)?((e=this.pubsub).emit.apply(e,n([t],r)),!0):(this._throwError(s.errorMessages.PARAMETER_TYPE),!1)},h.prototype.off=function(t,e){return o.isString(t)?(this.pubsub.off(t,e),!0):(this._throwError(s.errorMessages.PARAMETER_TYPE),!1)},h.prototype._notifyUi=function(t){this.emit(s.uiEvent.UPDATE_THUMBNAIL_PROP,t)},h.prototype.test=function(){},h);function h(t,e){var r=this;this.pubsub=null,this._dataPubsub=null,this.uid=null,this._size=180,this._mouseShape="pointer",this._scrollDirection="vertical",this._sequence=-1,this._location="horizontal",this._showThumbnail=!0,this._showPageNumber=!1,this._showSelectBox=!1,this._showRemoveBtn=!1,this._fullThumbnail=!1,this._allowPageDragging=!0,this._allowResizing=!0,this._allowKeyboardControl=!1,this._rows=4,this._columns=1,this._background="rgba(67,66,70,1)",this._border="1px solid rgba(27,27,29,1)",this._pageBackground="rgba(0,0,0,0)",this._pageBorder="1px solid rgba(128,128,128,1)",this._selectedPageBackground="rgba(127,133,251,1)",this._selectedPageBorder="1px solid rgba(255,0,0,1)",this._hoverPageBackground="rgba(196,250,248,1)",this._hoverPageBorder="1px solid rgba(255,255,0,1)",this._placeholderBackground="rgba(255,192,203,1)",this._pageMargin=10,this.uid="-"+o.uid(11),this._dataPubsub=e,this.pubsub=new i.PublishSubscribe,this._init(t),this.pubsub.on(s.privateEvent.CHANGE_THUMBNAIL_VIEW_PROP,function(t){for(var e in t)r[e]=t[e]})}e.ThumbnailView=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Editor2d=void 0;var i=(n.prototype.matrixMultiplication3x3=function(t,e){for(var r=[],i=0;i<3;i++)for(var n=0;n<3;n++){var o=t[3*i+0]*e[n]+t[3*i+1]*e[n+3]+t[3*i+2]*e[n+6];r.push(o)}return r},n.prototype.rotateMatrix=function(t,e,r){t=t/180*Math.PI;var i=Math.sin(t),n=Math.cos(t);return[n,-i,(1-n)*e+r*i,i,n,(1-n)*r-e*i,0,0,1]},n.prototype.moveMatrix=function(t,e){return[1,0,t,0,1,e,0,0,1]},n.prototype.scaleMatrix=function(t){return[t,0,0,0,t,0,0,0,1]},n.prototype.flipMatrix=function(t,e){return[1-2*Math.pow(t,2),-2*t*e,0,-2*t*e,1-2*Math.pow(e,2),0,0,0,1]},n.prototype.toCanvasMatrix=function(t){for(var e=[0,3,1,4,2,5],r=0;r<e.length;r++)e[r]=t[e[r]];return e},n.prototype.getLatestResult=function(){return 0!==this.resultStack.length?this.resultStack[this.resultStack.length-1].slice():null},n.prototype.rotatePoint=function(t,e,r,i,n){return n=n/180*Math.PI,{x:(t-r)*Math.cos(n)-(e-i)*Math.sin(n)+r,y:(t-r)*Math.sin(n)+(e-i)*Math.cos(n)+i}},n.prototype.rotateRectangle=function(t,e,r,i,n){var o=t+r/2,s=e+i/2,a=this.rotatePoint(t,e,o,s,n),h=this.rotatePoint(t+r,e,o,s,n),u=this.rotatePoint(t+r,e+i,o,s,n),l=this.rotatePoint(t,e+i,o,s,n),c=[h.x,a.x,l.x,u.x].sort(function(t,e){return t-e}),d=[h.y,a.y,l.y,u.y].sort(function(t,e){return t-e});return{x:c[0],y:d[0],width:c[3]-c[0],height:d[3]-d[0]}},n.prototype.calcLineEquation=function(t,e){var r=e.y-t.y,i=t.x-e.x,n=e.x*t.y-t.x*e.y,o=r*r+i*i,s=[];return s.push((i*i-r*r)/o,-2*r*i/o,-2*r*n/o,-2*r*i/o,(r*r-i*i)/o,-2*i*n/o,0,0,1/o),s},n.prototype.setTransform=function(e){var r=this;this.rotateAndFlipStack.forEach(function(t){t=r.toCanvasMatrix(t),e.transform.apply(e,t)})},n.prototype.setPointTransform=function(t,e){for(var r,i=0;i<this.rotateAndFlipStack.length;i++){var n=t*(r=this.rotateAndFlipStack[i])[0]+e*r[3],o=t*r[1]+e*r[4];t=n,e=o}return{x:t,y:e}},n.prototype.crop=function(t,e,r,i){this.clearIntermediateState();var n={type:"crop",left:t,top:e,width:r,height:i};return this.pushAllStepsStack(n),n},n.prototype.erase=function(t,e,r,i,n){this.clearIntermediateState();var o={type:"erase",left:t,top:e,width:r,height:i,color:n};return this.pushAllStepsStack(o),o},n.prototype.changePageSize=function(t,e){this.clearIntermediateState();var r={type:"changeSize",width:t,height:e};return this.pushAllStepsStack(r),r},n.prototype.flip=function(t){this.flipNum+=1;var e=this.totalAngle/180*Math.PI,r=Math.cos(e),i=-Math.sin(e),n=-Math.sin(e),o=-Math.cos(e);this.flipNumX%2&&(n=-n,o=-o),this.flipNumY%2&&(r=-r,i=-i);var s={x:r,y:i},a={x:n,y:o},h={x:0,y:0},u=null;if(0===t)this.flipNumX+=1,u=this.calcLineEquation(s,h);else{if(1!==t)return;this.flipNumY+=1,u=this.calcLineEquation(a,h)}var l={type:"flip",matrix:u,direction:t};this.pushAllStepsStack(l),this.pushRotateAndFlipStack(u);var c=(c=this.getLatestResult())?this.matrixMultiplication3x3(u,c):u;return this.pushResultStack(c),l},n.prototype.calcFlipMatrix=function(t,e){return[1-2*t*t,-2*t*e,0,-2*t*e,1-2*e*e,0,0,0,1]},n.prototype.rotate=function(t,e,r,i){var n=!1;null!==this.currentMode&&(n=this.currentMode===i||(this.clearIntermediateState(),!1)),this.currentMode=i,this.flipNum%2?(this.totalAngle-=t,t=-t):this.totalAngle+=t;var o=t,s=this.rotateMatrix(t,e||0,r||0);n&&(o=this.totalAngle);var a={type:"rotate",matrix:s,mode:i,angle:t,calcAngle:o};this.pushAllStepsStack(a),this.pushRotateAndFlipStack(s);var h=(h=this.getLatestResult())?this.matrixMultiplication3x3(s,h):s;return this.pushResultStack(h),a},n.prototype.translate=function(t,e){var r=this.moveMatrix(t,e);this.pushRotateAndFlipStack(r),this.pushAllStepsStack(r);var i=(i=this.getLatestResult())?this.matrixMultiplication3x3(r,i):r;this.pushResultStack(i)},n.prototype.addAngle=function(t){this.angle+=t},n.prototype.calcTranslateDis=function(t,e){var r=this.totalAngle/180*Math.PI,i=t*Math.cos(r),n=-t*Math.sin(r),o=e*Math.sin(r),s=e*Math.cos(r);return this.flipNumX%2&&(o=-o,s=-s),this.flipNumY%2&&(i=-i,n=-n),{x:i+o,y:n+s}},n.prototype.pushRotateAndFlipStack=function(t){this.rotateAndFlipStack.push(t)},n.prototype.popRotateAndFlipStack=function(){return this.rotateAndFlipStack.pop()},n.prototype.clearRotateAndFlipStack=function(){this.rotateAndFlipStack=[]},n.prototype.pushAllStepsStack=function(t){this.allStepsStack.push(t)},n.prototype.popAllStepsStack=function(){return this.allStepsStack.pop()},n.prototype.clearAllStepsStack=function(){this.allStepsStack=[]},n.prototype.pushResultStack=function(t){this.resultStack.push(t)},n.prototype.popResultStack=function(){return this.resultStack.pop()},n.prototype.clearResultStack=function(){this.resultStack=[]},n.prototype.reset=function(){this.clearAllStepsStack(),this.clearResultStack(),this.clearRotateAndFlipStack(),this.totalAngle=0,this.flipNumX=0,this.flipNumY=0,this.flipNum=0,this.currentMode=null},n.prototype.clearIntermediateState=function(){this.clearResultStack(),this.clearRotateAndFlipStack(),this.totalAngle=0,this.flipNumX=0,this.flipNumY=0,this.flipNum=0},n);function n(){this.rotateAndFlipStack=[],this.allStepsStack=[],this.resultStack=[],this.angle=0,this.flipNum=0,this.flipNumX=0,this.flipNumY=0,this.totalAngle=0,this.currentMode=null}e.Editor2d=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultConfig=void 0,e.getDefaultConfig=function(){return{container:"",ifAllowSlide:!0,useWebWorker:!0,zoomInDelta:1.2,zoomOutDelta:1.2,zoomDelta:.05,fitType:"window",tabMode:"single",displayMode:"single",operationMode:"0",zooming:!0,scrollX:!0,scrollY:!0,minZoom:.01,maxZoom:8,keepZoom:!0,showLatestPage:!0,pageMargin:10,uiConfig:{toolbars:{header:!0,topMenu:!0,asideMenu:!1,bottomMenu:!0},groups:{topMenuRight:{visibility:!0,location:"topMenu",sequence:1}},buttons:{},buttonResize:{ifResize:!1,minSize:24,maxSize:26},tipsConfig:{},thumbnail:{size:180,mouseShape:"pointer",scrollDirection:"vertical",sequence:-1,location:"horizontal",showThumbnail:!0,showPageNumber:!1,showSelectBox:!1,fullThumbnail:!1,allowDragDrop:!0,allowResizing:!1,allowKeyboardControl:!1,background:"rgba(67,66,70,1)",border:"1px solid rgba(27,27,29,1)",pageBackground:"rgba(0,0,0,0)",pageBorder:"1px solid rgba(128,128,128,1)",selectedPageBackground:"rgba(127,133,251,1)",selectedPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgba(196,250,248,1)",hoverPageBorder:"1px solid rgba(255,255,0,1)",placeholderBackground:"rgba(255,192,203,1)",pageMargin:10},canvasConfig:{canvasMouseShape:"default",canvasBackground:"#434246",canvasBorder:"1px solid #1b1b1d",pageBorder:"1px solid rgba(128,128,128,1)",pageMargin:"10",pageBackground:"rgba(0,0,0,0)",selectedPageBorder:"1px solid rgba(255,0,0,1)",selectedPageBackground:"rgba(127,133,251,1)",hoverPageBorder:"1px solid rgba(255,0,0,1)",hoverPageBackground:"rgb(196,250,248)",placeholderBackground:"pink",allowPageDragging:!0,allowKeyboardControl:!1,showPageNumber:!1,selectedBoxLineColor:"rgba(0,0,0,1)"},tree:{visibility:!0,iconClass:"ds-dvs-ui-tree",selectedColor:"#0000ff"},tag:{visibility:!0,iconClass:"ds-dvs-ui-tags",selectedColor:"#0000ff",displayMode:""},useOuterDrop:!1,headerColor:"#2a292b",topMenuColor:"#3a393b",topMenuBorder:"1px solid #1b1b1d",showSidebar:!1,showMain:!0,footerColor:"#434246",showViewer:!0,showVideoContainer:!1,outerBorder:"1px solid #1b1b1d",sidebarWidth:"180",width:"100%",height:"100%"}}}},function(t,e,r){"use strict";var i=this&&this.__awaiter||function(t,s,a,h){return new(a=a||Promise)(function(r,e){function i(t){try{o(h.next(t))}catch(t){e(t)}}function n(t){try{o(h.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?r(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,n)}o((h=h.apply(t,s||[])).next())})},n=this&&this.__generator||function(r,i){var n,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(r,a)}catch(t){e=[6,t],o=0}finally{n=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.File=void 0;var s=r(1),o=r(40),a=r(0),h=(u.prototype._initEvent=function(){var h=this;this._pubSub.on(s.modelEvent.APPEND_TO_OPEN_ALL,function(t){h._pubSub.emit(s.modelEvent.OPEN_ALL,h._all,t)}),this._pubSub.on(s.modelEvent.APPEND_FOR_FILE,function(t,e){var r=h._dirTree.findChild(h._dirTree.currentNode,t),i=!0;r||(r=h._dirTree.addNewNode(t,"file",[]),i=!1),e.forEach(function(t){r.children.push(t.uid),h._all.children.push(t.uid)}),i||h._pubSub.emit(s.privateEvent.DIRECTORY_CHANGED,h._dirTree.currentNode),h.autoOpen&&h._pubSub.emit(s.modelEvent.APPEND_FOR_VIEWER,r)}),this._pubSub.on(s.modelEvent.INSERT_FOR_FILE,function(t,e,r){var i=r,n=h._dirTree.findChild(h._dirTree.currentNode,t),o=!0;n||(n=h._dirTree.addNewNode(t,"file",[]),o=!1),e.forEach(function(t){n.children.splice(r++,0,t.uid),h._all.children.push(t.uid)}),o||h._pubSub.emit(s.privateEvent.DIRECTORY_CHANGED,h._dirTree.currentNode),h.autoOpen&&h._pubSub.emit(s.modelEvent.INSERT_FOR_VIEWER,n,i)}),this._pubSub.on(s.modelEvent.REMOVE_FROM_ALL,function(t){t.forEach(function(t){var e=h._all.children.indexOf(t);-1!==e&&h._all.children.splice(e,1)}),h._dirTree.remove(t)}),this._pubSub.on(s.modelEvent.REMOVE_FROM_FILE,function(t,e){var r,i=h._findNodeByUid(t,h._dirTree.rootNode);i&&(r=i.children,e.forEach(function(t){var e=r.indexOf(t);r.splice(e,1)}))}),this._pubSub.on(s.modelEvent.SWITCH_FOR_FILE,function(t,e,r){var i,n,o=h._findNodeByUid(t,h._dirTree.rootNode);o&&(n=(i=o.children)[e],i[e]=i[r],i[r]=n)}),this._pubSub.on(s.modelEvent.SWITCH_FOR_ALL,function(t,e){var r=h._all.children,i=r[t];r[t]=r[e],r[e]=i}),this._pubSub.on(s.modelEvent.MOVE_FOR_FILE,function(t,e,r){var i,n,o=h._findNodeByUid(t,h._dirTree.rootNode);o&&(n=(i=o.children).splice(e,1)[0],i.splice(r,0,n))}),this._pubSub.on(s.modelEvent.MOVE_FOR_ALL,function(t,e){var r=h._all.children,i=r.splice(t,1)[0];r.splice(e,0,i)}),this._pubSub.on(s.modelEvent.REORDER_FOR_ALL,function(t){var e=h._all.children,r=e.length,i=[];if(0===t.length||t.length!==r)return!1;for(var n=0;n<r;n++)i[n]=e[t[n]];for(var o=0;o<r;o++)e[o]=i[o]}),this._pubSub.on(s.modelEvent.REORDER_FOR_FILE,function(t,e){var r=h._findNodeByUid(t,h._dirTree.rootNode);if(r){var i=r.children,n=i.length,o=[];if(0===e.length||e.length!==n)return!1;for(var s=0;s<n;s++)o[s]=i[e[s]];for(var a=0;a<n;a++)i[a]=o[a]}})},u.prototype.openAll=function(){return this._pubSub.emit(s.modelEvent.OPEN_ALL,this._all),this._all.children.slice()},u.prototype.getAllContents=function(){return this._all.children.slice()},u.prototype.addFile=function(){},u.prototype.removeFile=function(){},u.prototype.removeFileByPath=function(t){},u.prototype.openFile=function(t){},u.prototype.openFileByPath=function(t){return i(this,void 0,void 0,function(){return n(this,function(t){return[2]})})},u.prototype.renameFile=function(t,e){},u.prototype.addFolder=function(){},u.prototype.removeFolder=function(){},u.prototype.removeFolderByPath=function(t){},u.prototype.openFolder=function(){},u.prototype.openFolderByPath=function(t){},u.prototype.renameFolder=function(t,e){},u.prototype.backToPrevious=function(){},u.prototype._findNodeByUid=function(t,e){for(var r=e.children,i=r.length,n=0;n<i;n++){if(r[n].treeId===t)return r[n];if(r[n].children){var o=this._findNodeByUid(t,r[n]);if(o)return o}}},u);function u(t){this.autoOpen=!0,this._pubSub=t.pubsub,this._dirTree=new o.DirectoryTree,this._all={uid:a.uid(11),name:t.defaultFileName||"All",children:[]},this._initEvent()}e.File=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DirectoryTree=void 0;var i,n,h=r(41),u=r(0),o=r(1);(n=i=i||{}).ROOT="root",n.FOLDER="folder",n.SINGLE="single",n.MULTIPLE="multiple";var s=(a.prototype.remove=function(t,e){void 0===e&&(e=this.rootNode);for(var r=e.children,i=r.length,n=0;n<i;n++){var o=r[n];u.isString(o)?-1!==t.indexOf(o)&&(r.splice(n,1),n--,i--):this.remove(t,o)}},a.prototype.append=function(t){var e=t.fileName,r=(t.data,this.findChild(this.currentNode,e)),i=!0;r||(r=this.addNewNode(e,"file",[]),i=!1),r.treeId,i||this._pubSub.emit(o.privateEvent.DIRECTORY_CHANGED,this.currentNode)},a.prototype.generateDirectory=function(){},a.prototype.backToPreviousNode=function(){var t=this.currentNode.parentNode;return!!t&&(this.currentNode=t,!0)},a.prototype.enterNodeFromCurrent=function(t){var e=this.findChild(this.currentNode,t);return this._checkNode(e)},a.prototype.enterFile=function(t){var e=this._findNode(this.currentNode,t,"file");return!!e&&(this.selectedNodeId=e.treeId,e)},a.prototype.enterFileByPath=function(t){var e=this._pathResolve(t);this.currentPath=t;for(var r=this.rootNode,i=e.length,n=0;n<i-1;n++)if(!(r=this._findNode(r,e[n],"folder")))return!1;return!!(r=this._findNode(r,e[i],"file"))&&(this.selectedNodeId=r.treeId,r)},a.prototype.enterFolder=function(t){var e=this._findNode(this.currentNode,t,"folder");return!!e&&(this.currentNode=e,!0)},a.prototype.enterFolderByPath=function(t){var e=this._pathResolve(t);this.currentPath=t;for(var r=this.rootNode,i=0,n=e.length;i<n;i++)if(!(r=this._findNode(r,e[i],"folder")))return!1;this.currentNode=r},a.prototype._findNode=function(t,e,r){if(!e)return!1;if(0<=t.children.length){var i=t.children.filter(function(t){return t.name===e&&t.type===r});return!!i.length&&i[0]}return!1},a.prototype.enterNode=function(t){var e=this._pathResolve(t);this.currentPath=t;for(var r=this.rootNode,i=0,n=e.length;i<n;i++)r=this.findChild(r,e[i]);return this._checkNode(r)},a.prototype._checkNode=function(t){return!t||"folder"!==t.type&&"root"!==t.type?(this.selectedNodeId=t.treeId,t):(this.currentNode=t,"folder")},a.prototype.addNewNode=function(t,e,r){for(var i=t,n=1;this._checkChildren(this.currentNode,i,e);)i=t+"("+n+")",n++;var o,s=u.uid(11),a=new h.TreeNode({treeId:s,name:i,type:e,parentNode:this.currentNode,children:r||[]});return"folder"===e?this.currentNode.children.unshift(a):(o=this._getSpiltIndex(this.currentNode.children),this.currentNode.children.splice(o,0,a)),a},a.prototype._getSpiltIndex=function(t){for(var e=t.length,r=0;r<e;r++)if("folder"!==t[r].type)return r;return e},a.prototype.removeFromCurrentNode=function(t){return this.currentNode.removeChildren(t,"file")},a.prototype.removeFile=function(t){return this.currentNode.removeChildren(t,"file")},a.prototype.removeFileByPath=function(t){for(var e=this._pathResolve(t),r=this.rootNode,i=e.length,n=0;n<i-1;n++)r=this._findNode(r,e[n],"folder");return this.currentNode.name===e[i-1]&&(this.currentNode=r),!!r&&r.removeChildren(e[i-1],"file")},a.prototype.removeFolder=function(t){return this.currentNode.removeChildren(t,"folder")},a.prototype.removeFolderByPath=function(t){for(var e=this._pathResolve(t),r=this.rootNode,i=e.length,n=0;n<i-1;n++)r=this._findNode(r,e[n],"folder");return this.currentNode.name===e[i-1]&&(this.currentNode=r),!!r&&r.removeChildren(e[i-1],"folder")},a.prototype.removeNode=function(t){for(var e=this._pathResolve(t),r=this.rootNode,i=e.length,n=0;n<i-1;n++)r=this.findChild(r,e[n]);return r.parentNode&&this.currentNode.parentNode&&r.parentNode.name===this.currentNode.parentNode.name&&r.name===this.currentNode.name&&(this.currentNode=this.currentNode.parentNode),!!r&&r.removeChildren(e[i-1],"file")},a.prototype.renameNode=function(t,e,r){var i=this._findNode(this.currentNode,t,r);return!!i&&(i.setName(e),!0)},a.prototype.addToNode=function(t,e){for(var r=this._pathResolve(t),i=this.rootNode,n=r.length,o=0;o<n;o++)i=this.findChild(i,r[o]);var s=new h.TreeNode({treeId:e.treeId,name:e.name,type:e.type,parentNode:i,children:e.children});i.children.push(s)},a.prototype._pathResolve=function(t){u.isString(t);var r=[];return t.replace(/([\w+\.|\w+]+)/g,function(t,e){return r.push(e),t}),r},a.prototype._checkChildren=function(t,e,r){for(var i=t.children,n=i.length,o=0;o<n;o++)if(i[o].name===e&&i[o].type===r)return!0;return!1},a.prototype.findChild=function(t,e){if(!e)return!1;if(0<=t.children.length){var r=t.children.filter(function(t){return t.name===e});return!!r.length&&r[0]}return!1},a.prototype.getSelectedNode=function(){for(var t=this.currentNode.children,e=0,r=t.length;e<r;e++)if(t[e].treeId===this.selectedNodeId&&("single"===t[e].type||"multiple"===t[e].type))return t[e];return null},a);function a(){this.root="root",this.rootNode=new h.TreeNode({treeId:u.uid(11),name:"root",type:i.ROOT,parentNode:null,children:[]}),this.currentNode=this.rootNode,this.selectedNodeId=null}e.DirectoryTree=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TreeNode=void 0;var i=(n.prototype.removeImg=function(t){if(0===this.children.length)return!1;var e=this.children.indexOf(t);return-1!==e&&(this.children.splice(e,1),!0)},n.prototype.emptyChildren=function(){this.children=[]},n.prototype.removeChildren=function(t,e){var r=this.children.length;if(r){for(var i=0;i<r;i++){var n=this.children[i];if(n.name===t&&n.type===e)return this.children.splice(i,1)[0]}return!1}return!1},n.prototype.setName=function(t){this.name=t},n.prototype.reorder=function(t){if("file"!==this.type)return!1;var e=t.length,r=[],i=0;if(this.children.length!==e||0===e)return!1;for(var n=0;n<e;n++)t[n]===n&&i++;if(i===e)return!0;for(var o=0;o<e;o++)r[o]=this.children[t[o]];for(var s=0;s<e;s++)this.children[s]=r[s];return!0},n);function n(t){this.treeId=t.treeId,this.name=t.name,this.type=t.type,this.parentNode=t.parentNode,this.children=t.children}e.TreeNode=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;var o=r(1),s=r(0),i=r(43),n=(a.prototype._initEvent=function(){var n=this;this._pubSub.on(o.modelEvent.APPEND_TO_OPEN_TAG,function(t,e){var r=n._tagManager.getTag(t);r&&n._pubSub.emit(o.modelEvent.OPEN_TAG,r,e)}),this._pubSub.on(o.modelEvent.APPEND_FOR_TAG,function(t){n._tagManager.appendOrInsert(t);var e,r=!1;t.forEach(function(t){var e;0<(null===(e=null==t?void 0:t.imgData)||void 0===e?void 0:e.tags.length)&&(r=!0)}),r&&(e=n._tagManager.getTagList(),n._pubSub.emit(o.modelEvent.TAG_CHANGED,e))}),this._pubSub.on(o.modelEvent.INSERT_FOR_TAG,function(t){n._tagManager.appendOrInsert(t);var e,r=!1;t.forEach(function(t){var e;0<(null===(e=null==t?void 0:t.imgData)||void 0===e?void 0:e.tags.length)&&(r=!0)}),r&&(e=n._tagManager.getTagList(),n._pubSub.emit(o.modelEvent.TAG_CHANGED,e))}),this._pubSub.on(o.modelEvent.REMOVE_FROM_TAG,function(t,r){n._tagManager.getTagList().forEach(function(e){r.forEach(function(t){e.removeImg(t)})})}),this._pubSub.on(o.modelEvent.SWITCH_FOR_TAG,function(t,e,r){var i=n._tagManager.getTagById(t);i&&i.switchPage(e,r)}),this._pubSub.on(o.modelEvent.MOVE_FOR_TAG,function(t,e,r){var i=n._tagManager.getTagById(t);i&&i.movePage(e,r)}),this._pubSub.on(o.modelEvent.REORDER_FOR_TAG,function(t,e){var r=n._tagManager.getTagById(t);r&&r.reorder(e)})},a.prototype.addTag=function(t){return s.isString(t)?!!this._tagManager.addTag(t)||(this._throwErr(o.errorMessages.TAG_HAVE_EXIST),!1):(this._throwErr(o.errorMessages.PARAMETER_TYPE),!1)},a.prototype.removeTag=function(e){var r=this,t=this._tagManager.getTag(e);return t?(t.children.forEach(function(t){r.removePageTag(t,e)}),this._throwErr(o.errorMessages.OK),this._tagManager.removeTag(e)):(this._throwErr(o.errorMessages.TAG_NOT_EXIST),!1)},a.prototype.emptyTag=function(t){if(!s.isString(t))return this._throwErr(o.errorMessages.PARAMETER_TYPE),!1;var e=this._tagManager.getTagById(t);if(!t)return this._throwErr(o.errorMessages.TAG_NOT_EXIST),!1;var r=e.children.slice();return this._pubSub.emit(o.modelEvent.EMPTY_TAG,t,r,e.uid),this._throwErr(o.errorMessages.OK),this._tagManager.emptyTag(t)},a.prototype.openTag=function(t){var e=this._tagManager.getTag(t);return e||(this._throwErr(o.errorMessages.TAG_NOT_EXIST),e=this._tagManager.emptyItem),this._tagManager.setDefaultTag(t),this._tagManager.selectedTagId=e.uid,this._pubSub.emit(o.modelEvent.OPEN_TAG,e),this._throwErr(o.errorMessages.OK),e.children.slice()},a.prototype.getCurrentTag=function(){return this._tagManager.getCurrentTag()},a.prototype.getTagContents=function(t){return this._tagManager.getTagContents(t)},a.prototype.getDefaultTag=function(){return this._tagManager.getDefaultTag()},a.prototype.setDefaultTag=function(t){return this._tagManager.setDefaultTag(t)},a.prototype.addPageTag=function(t,e){s.isString(t)&&s.isString(e)||this._throwErr(o.errorMessages.PARAMETER_TYPE);var r,i=this._tagManager.getTag(e);return i?(-1===i.children.indexOf(t)&&(i.children.push(t),this._pubSub.emit(o.modelEvent.ADD_PAGE_TAG,t,e,i.uid),r=this._tagManager.getTagList(),this._pubSub.emit(o.modelEvent.TAG_CHANGED,r)),this._throwErr(o.errorMessages.OK),!0):(this._throwErr(o.errorMessages.TAG_NOT_EXIST),!1)},a.prototype.removePageTag=function(e,t){var r=this;if(s.isString(e)||this._throwErr(o.errorMessages.PARAMETER_TYPE),void 0===t)this._tagManager.getTagList().forEach(function(t){t.removeImg(e),r._pubSub.emit(o.modelEvent.REMOVE_PAGE_TAG,e,t.name,t.uid)});else{s.isString(t)||this._throwErr(o.errorMessages.PARAMETER_TYPE);var i=this._tagManager.getTag(t);if(!i)return this._throwErr(o.errorMessages.TAG_NOT_EXIST),!1;if(!i.removeImg(e))return this._throwErr(o.errorMessages.PAGE_NOT_EXIST),!1;this._pubSub.emit(o.modelEvent.REMOVE_PAGE_TAG,e,t,i.uid)}var n=this._tagManager.getTagList();return this._pubSub.emit(o.modelEvent.TAG_CHANGED,n),!0},a.prototype.renameTag=function(t,e){if(!s.isString(t)||!s.isString(e))return this._throwErr(o.errorMessages.PARAMETER_TYPE),!1;var r=this._tagManager.getTag(e);if(!this._tagManager.getTag(t))return this._throwErr(o.errorMessages.TAG_NOT_EXIST),!1;if(r)return this._throwErr(o.errorMessages.TAG_HAVE_EXIST),!1;this._tagManager.renameTag(t,e);var i=this._tagManager.getTag(e).children.slice();return this._pubSub.emit(o.modelEvent.RENAME_TAG,t,e,i),this._throwErr(o.errorMessages.OK),!0},a.prototype._throwErr=function(t){this._pubSub.emit(o.privateEvent.UPDATE_ERROR_MESSAGE,t)},a);function a(t){this._pubSub=t.pubsub,this._tagManager=new i.TagManager(t),this._initEvent()}e.Tag=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagManager=void 0;var n=r(44),i=r(0),o=(s.prototype.appendOrInsert=function(t){for(var i=this,n=t,e=n.length,o=this,r=0;r<e;r++)!function(t){var r=n[t],e=r.imgData;e.tags||(e.tags=[]),o.defaultTagName&&-1===e.tags.indexOf(o.defaultTagName)&&e.tags.push(o.defaultTagName),e.tags.forEach(function(t){i.addTag(t);var e=i.getTag(t);e&&e.children.push(r.uid)})}(r)},s.prototype.initDefaultTag=function(){var t=new n.TagItem({tagId:i.uid(11),name:this.defaultTagName,color:this.defaultTagColor,children:[]});this._tagList.push(t),this.selectedTagId=t.uid},s.prototype.getCurrentTag=function(){return this.getTagById(this.selectedTagId)},s.prototype.addTag=function(t,e,r){if(-1!==this.checkTag(t))return!1;var i=new n.TagItem({name:t,color:e||this.defaultTagColor,children:r||[]});return this._tagList.push(i),!0},s.prototype.removeTag=function(t){var e=this.checkTag(t);return-1!==e&&(t===this.defaultTagName&&(this.defaultTagName=null),this._tagList.splice(e),!0)},s.prototype.emptyTag=function(t){return this._tagList=[],!0},s.prototype.getTagContents=function(t){var e=this.checkTag(t);return-1===e?null:this._tagList[e].children.slice()},s.prototype.getDefaultTag=function(){return this.defaultTagName},s.prototype.setDefaultTag=function(t){if(!t)return this.defaultTagName=null,!(this.defaultTagId=null);var e=this.checkTag(t);if(-1===e)return!1;var r=this._tagList[e];return this.defaultTagName=t,this.defaultTagId=r.uid,!0},s.prototype.renameTag=function(t,e){t===this.defaultTagName&&(this.defaultTagName=t);var r=this.getTag(t),i=this.getTag(e);return!(!r||i||(r.name=e,0))},s.prototype.checkTag=function(t){var e=this._tagList.length;if(!e)return-1;for(var r=0;r<e;r++)if(this._tagList[r].name===t)return r;return-1},s.prototype.getTagList=function(){return this._tagList},s.prototype.getTag=function(t){var e=this.checkTag(t);return-1===e?null:this._tagList[e]},s.prototype.getTagById=function(t){for(var e=this._tagList.length,r=0;r<e;r++)if(this._tagList[r].uid===t)return this._tagList[r];return null},s.prototype.filterByTag=function(t){var e=this.checkTag(t);return-1===e?null:this._tagList[e].children},s);function s(t){this._tagList=[],this.defaultTagColor="#4c4d4a",this.defaultTagName=null,this.defaultTagId=null,this.selectedTagId=null,this.emptyItem=new n.TagItem({name:"defaultTag",color:this.defaultTagColor,children:[]})}e.TagManager=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TagItem=void 0;var i=r(0),n=(o.prototype.addImg=function(t){this.children.push(t)},o.prototype.removeImg=function(t){if(0===this.children.length)return!0;var e=this.children.indexOf(t);return-1===e||0<this.children.splice(e,1).length},o.prototype.emptyTag=function(){this.children=[]},o.prototype.switchPage=function(t,e){if(t===e)return!0;var r=this.children[t];return this.children[t]=this.children[e],this.children[e]=r,!0},o.prototype.movePage=function(t,e){if(t===e)return!0;var r=this.children.splice(t,1);return this.children.splice(e,0,r[0]),!0},o.prototype.reorder=function(t){var e=t.length,r=[],i=0;if(this.children.length!==e||0===e)return!1;for(var n=0;n<e;n++)t[n]===n&&i++;if(i===e)return!0;for(var o=0;o<e;o++)r[o]=this.children[t[o]];for(var s=0;s<e;s++)this.children[s]=r[s];return!0},o);function o(t){this.name=t.name,this.color=t.color,this.children=t.children||[],this.uid=t.uid||i.uid(11)}e.TagItem=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataStorage=void 0;var i,n=r(46),o=r(47),s=r(10);(i={})[i.SUCCESS=0]="SUCCESS",i[i.FAILURE=1]="FAILURE",i[i.OVERFLOW=2]="OVERFLOW",i[i.TIMEOUT=3]="TIMEOUT";var a=(h.prototype.addDataAsync=function(t,e,r,i){return this.DBManager.addDataAsync(t,e,r||this.databaseName,i||this.documentTableName)},h.prototype.getDataAsync=function(t,e,r){return this.DBManager.getDataAsync(t,e||this.databaseName,r||this.documentTableName)},h.prototype.removeDataAsync=function(t,e,r){return this.DBManager.removeDataAsync(t,e||this.databaseName,r||this.documentTableName)},h.prototype.updateDataAsync=function(t,e,r,i){return this.DBManager.updateDataAsync(t,e,r||this.databaseName,i||this.documentTableName)},h.prototype.addInterlayerDataSync=function(t,e){return this.interlayer.addDataSync(t,e)},h.prototype.getInterlayerDataSync=function(t){return this.interlayer.getDataSync(t)},h.prototype.removeInterlayerDataSync=function(t){return this.interlayer.removeDataSync(t)},h.prototype.updateInterlayerDataSync=function(t,e){return this.interlayer.updateDataSync(t,e)},h.prototype.addMetadataSync=function(t,e){return this.metadataManager.addDataSync(t,e)},h.prototype.getMetadataSync=function(t){return this.metadataManager.getDataSync(t)},h.prototype.removeMetadataSync=function(t){return this.metadataManager.removeDataSync(t)},h.prototype.updateMetadataSync=function(t,e){return this.metadataManager.updateDataSync(t,e)},h.prototype.addDocumentSync=function(t,e){return this.docManager.addDataSync(t,e)},h.prototype.getDocumentSync=function(t){return this.docManager.getDataSync(t)},h.prototype.removeDocumentSync=function(t){return this.docManager.removeDataSync(t)},h.prototype.updateDocumentSync=function(t,e){return this.docManager.updateDataSync(t,e)},h);function h(){this.databaseName=s.DEFAULT_DATABASE_NAME,this.documentTableName=s.DEFAULT_DOCUMENT_TABLE_NAME,this.imageTableName=s.DEFAULT_IMAGE_TABLE_NAME,this.annotationTableName=s.DEFAULT_ANNOTATION_NAME,this.docManager=new n.CommonStorage,this.interlayer=new n.CommonStorage,this.metadataManager=new n.CommonStorage,this.DBManager=new o.AsyncDB(this.databaseName,this.documentTableName)}e.DataStorage=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonStorage=void 0;var i=(n.prototype.addDataSync=function(t,e){return!this._check(t)&&(this.data[t]=e,!0)},n.prototype.getDataSync=function(t){return this.data[t]},n.prototype.removeDataSync=function(t){return!!this._check(t)&&(delete this.data[t],!0)},n.prototype.updateDataSync=function(t,e){return!!this._check(t)&&(this.data[t]=e,!0)},n.prototype._check=function(t){return void 0!==this.data[t]},n);function n(){this.data={}}e.CommonStorage=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncDB=e.DBOperator=void 0;var i=(n.prototype.openDB=function(i,n){var o=this;return new Promise(function(e,r){var t=o.indexedDB.open(i,n);t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){e(t.target.result)},t.onerror=function(t){r(t.currentTarget.error.message)}})},n.prototype.deleteDB=function(i){var n=this;return new Promise(function(t,e){var r=n.indexedDB.deleteDatabase(i);r.onsuccess=function(t){},r.onerror=function(t){}})},n.prototype.creatStore=function(r,s,a,h){var i=this;return new Promise(function(o,e){var t=i.indexedDB.open(r);t.onupgradeneeded=function(t){var e=t.target.result,r=a.autoIncrement;a.autoIncrement=null==r||r;var i=e.createObjectStore(s,a);if(h)for(var n=0;n<h.length;n++)i.createIndex.apply(i,h[n]);o(i)},t.onerror=function(t){e(t.currentTarget.error.message)}})},n.prototype.getStore=function(i,n,o){var s=this;return new Promise(function(r,e){var t=s.indexedDB.open(i,o);t.onsuccess=function(t){var e=t.target.result.transaction(n,"readwrite").objectStore(n);r(e)},t.onerror=function(t){e(t.currentTarget.error.message)}})},n.prototype.getStoreCount=function(e,i){var n=this;return new Promise(function(t,r){n.indexedDB.open(e).onsuccess=function(t){var e=t.target.result.transaction(i,"readwrite").objectStore(i).count();e.onsuccess=function(){},e.onerror=function(t){r(t.currentTarget.error.message)}}})},n.prototype.clearStore=function(t,n){var e=this;return new Promise(function(r,i){e.indexedDB.open(t).onsuccess=function(t){var e=t.target.result.transaction(n,"readwrite").objectStore(n).clear();e.onsuccess=function(){r("clear success！")},e.onerror=function(t){i(t.currentTarget.error.message)}}})},n.prototype.getAllData=function(t,s){var e=this;return new Promise(function(n,o){e.indexedDB.open(t).onsuccess=function(t){var e=t.target.result,r=[],i=e.transaction(s,"readwrite").objectStore(s).openCursor();i.onsuccess=function(t){var e=t.target.result;e?(r.push(e.value),e.continue()):n(r)},i.onerror=function(t){o("error")}}})},n.prototype.getRangeData=function(t,h,u,l){var e=this;return new Promise(function(s,a){e.indexedDB.open(t).onsuccess=function(t){var e=t.target.result,r=[],i=e.transaction(h,"readwrite").objectStore(h),n=IDBKeyRange.bound(u,l),o=i.openCursor(n);o.onsuccess=function(t){var e=t.target.result;e?(r.push(e.value),e.continue()):s(r)},o.onerror=function(t){a("error")}}})},n.prototype.addOneData=function(t,n,o){var e=this;return new Promise(function(r,i){e.indexedDB.open(t).onsuccess=function(t){var e=t.target.result.transaction(n,"readwrite").objectStore(n).add(o);e.onsuccess=function(){r("success")},e.onerror=function(t){i(t.currentTarget.error.message)}}})},n.prototype.putOneData=function(t,o,s){var e=this;return new Promise(function(i,n){e.indexedDB.open(t).onsuccess=function(t){var e=t.target.result.transaction(o,"readwrite").objectStore(o),r=e.get(s.id);r.onsuccess=function(){e.put(s),i(e)},r.onerror=function(t){n(t.currentTarget.error.message)}}})},n.prototype.getData=function(e,i,n){var o=this;return new Promise(function(t,r){o.indexedDB.open(e).onsuccess=function(t){var e=t.target.result.transaction(i,"readwrite").objectStore(i).get(n);e.onsuccess=function(){},e.onerror=function(t){r(t.currentTarget.error.message)}}})},n.prototype.deleteData=function(e,i,n){var o=this;return new Promise(function(t,r){o.indexedDB.open(e).onsuccess=function(t){var e=t.target.result.transaction(i,"readwrite").objectStore(i).delete(n);e.onsuccess=function(){},e.onerror=function(t){r(t.currentTarget.error.message)}}})},n);function n(){var t=window;this.indexedDB=t.indexedDB||t.webkitIndexedDB||t.mozIndexedDB||t.msIndexedDB,indexedDB}e.DBOperator=i;var o=(s.prototype.createDataBase=function(t,e){this.data[t]={},this.data[t][e]={}},s.prototype.addDataAsync=function(r,i,n,o){var s=this;return new Promise(function(t,e){return s._checkDBName(n)?s._checkTableName(n,o)?s._checkId(n,o,r)?e("The "+r+" already exists."):(s.data[n][o][r]=i,void t("Save "+r+" to database successful.")):e("The table "+o+" dose not exist."):e("The database "+n+" dose not exist.")})},s.prototype.getDataAsync=function(r,i,n){var o=this;return new Promise(function(t,e){return o._checkDBName(i)?o._checkTableName(i,n)?o._checkId(i,n,r)?void t(o.data[i][n][r]):e("The "+r+" dose not exist."):e("The table "+n+" dose not exist."):e("The database "+i+" dose not exist.")})},s.prototype.removeDataAsync=function(r,i,n){var o=this;return new Promise(function(t,e){return o._checkDBName(i)?o._checkTableName(i,n)?(delete o.data[i][n][r],void t("Remove "+r+" successful.")):e("The table "+n+" dose not exist."):e("The database "+i+" dose not exist.")})},s.prototype.updateDataAsync=function(r,i,n,o){var s=this;return new Promise(function(t,e){return s._checkDBName(n)?s._checkTableName(n,o)?s._checkId(n,o,r)?(s.data[n][o][r]=i,void t("Update "+r+" successful.")):e("The "+r+" dose not exist."):e("The table "+o+" dose not exist."):e("The database "+n+" dose not exist.")})},s.prototype._checkDBName=function(t){return void 0!==this.data[t]},s.prototype._checkTableName=function(t,e){return void 0!==this.data[t][e]},s.prototype._checkId=function(t,e,r){return void 0!==this.data[t][e][r]},s);function s(t,e){this.data={},this.createDataBase(t,e)}e.AsyncDB=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorManager=void 0;var i=r(1),n=(o.prototype.updateErrorMessage=function(t){this.errorCode=t.code,this.errorMessage=t.message},o);function o(t){this.errorMessage="ok",this.errorCode=0,this._pubsub=t.pubsub,this._pubsub.on(i.privateEvent.UPDATE_ERROR_MESSAGE,this.updateErrorMessage.bind(this))}e.ErrorManager=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Log=void 0;var i=r(1),n=r(0),o=(s.prototype.updateLogMessage=function(t){this.allowLog&&this.logs.push(this._formatLog(t))},s.prototype._formatLog=function(t){return n.formatTime("yyyy-MM-dd hh:mm:ss")+" DVS: "+t},s.prototype.clear=function(){this.logs=[]},s);function s(t){this.logs=[],this.allowLog=!0,this.logs.push(this._formatLog("Initialize DVS object.")),this.logs.push(this._formatLog("Initialize DVS object.")),this._pubsub=t.pubsub,this._pubsub.on(i.privateEvent.UPDATE_LOG_MESSAGE,this.updateLogMessage.bind(this)),this.logs.push(this._formatLog("Complete Log object initialization."))}e.Log=o}]);var Dynamsoft=window.Dynamsoft||{Lib:{}};(function(b){var a=b.WebTwainEnv||(b.WebTwainEnv={});a.initQueue=[];b.initOrder=b.initOrder||[];b.unloadQueue=b.unloadQueue||[];})(Dynamsoft);
Dynamsoft.WebTwainEnv.IfUseActiveXForIE10Plus=false;var Dynamsoft=Dynamsoft||{};(function(e,b,a){var c=20200521;if(b._preDefine_ver){if(b._preDefine_ver>=c){return}}b._preDefine_ver=c;var d=function(g,j){for(var h in j){if(j.hasOwnProperty(h)){g[h]=j[h]}}return g},f=function(j){if(null==j||"object"!=typeof j){return j}var k,h,g;if(j instanceof Date){k=new Date();k.setTime(j.getTime());return k}else{if(j instanceof Array){k=[];g=j.length;for(h=0;h<g;h++){k[h]=f(j[h])}return k}else{if(j instanceof Object){k={};for(h in j){if(j.hasOwnProperty(h)){k[h]=f(j[h])}}return k}else{return 0}}}};if(!b.Lib){b.Lib={}}d(b.Lib,{win:e,doc:e.document,debug:!1,nil:a,mix:d,clone:f,keys:Object.keys,guid:function(l){var k=[],g="0123456789abcdef",j,h;for(j=0;j<8;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");for(j=0;j<4;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-4");for(j=0;j<3;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");h=g.substr(Math.floor(Math.random()*16),1);h=g.substr((h&3)|8,1);k.push(h);for(j=0;j<3;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");for(j=0;j<8;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.unshift(l);return k.join("")},now:Date.now||function(){return +new Date()},noop:function(){}})})(typeof window!=="undefined"?window:this,Dynamsoft);(function(d){var b=!({toString:1}.propertyIsEnumerable("toString")),c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function a(f,e){return({}).hasOwnProperty.call(f,e)}d.keys=Object.keys||function(h){var e=[],g,f;for(g in h){if(a(h,g)){e.push(g)}}if(b){for(f=c.length-1;f>=0;f--){g=c[f];if(a(h,g)){e.push(g)}}}return e}})(Dynamsoft.Lib);(function(j,k){var f=20200716;if(j._isXXX_ver){if(j._isXXX_ver>=f){return}}j._isXXX_ver=f;var o=j.mix,l,g,i=!1,e=!0,d=i,c={}.hasOwnProperty,n={},m=(typeof HTMLElement==="object");function h(p){return p===k}function a(p){return p!==k}o(j,{isDef:a,isUndef:h,isUndefined:h,isNull:function(p){return(p===null)},isNaN:function(p){return isNaN(p)},type:function(p){if(p===null||p===k){return String(p)}return n[{}.toString.call(p)]||"object"},isPlainObject:function(s){if(!s||j.type(s)!=="object"||s.nodeType||s.window==s){return i}var p,q;try{if((q=s.constructor)&&!c(s,"constructor")&&!c(q.prototype,"isPrototypeOf")){return i}}catch(r){return i}for(p in s){}return(h(p)||c(s,p))},isDOM:function(p){return m?(p instanceof HTMLElement):p&&typeof p==="object"&&(p.nodeType===1||p.nodeType===9)&&typeof p.nodeName==="string"},isDOMInBody:function(q){var p=q;if(j.isDOM(q)){while(!p&&p!=document.body){p=p.parentNode}}else{p=0}return !!p}});function b(p,q){n["[object "+p+"]"]=(q=p.toLowerCase());j["is"+p]=function(r){return j.type(r)===q}}b("Function");j.each=l=function(t,v,p){if(t){var w,r,x,u=0,q=t.length,s=h(q)||j.isFunction(t);p=p||null;if(s){x=j.keys(t);for(;u<x.length;u++){w=x[u];if(v.call(p,t[w],w,t)===i){break}}}else{for(r=t[0];u<q;r=t[++u]){if(v.call(p,r,u,t)===i){break}}}}return t};g=["String","Object","Boolean","Number"];if(Array.isArray){j.isArray=Array.isArray}else{g.push("Array")}l(g,b)})(Dynamsoft.Lib);(function(c){var a=c.mix,b=c.win,e;var d=20200521;if(c._log_ver){if(c.isNumber(c._log_ver)&&c._log_ver>=d){return}}c._log_ver=d;if(c.isDef(b.console)){e=b.console;if(!c.isFunction(e.log)||!c.isFunction(e.error)){e=false}}a(c,{log:function(f){if(c.debug&&e){e.log(f)}},error:function(f){if(c.debug&&e){e.error(f)}},getLogger:function(){var f=c.log;return{warn:f,log:f,info:f,debug:f}}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._random_ver){if(b._random_ver>=a){return}}b._random_ver=a;b.getRandom=function(){var d=b.now()%10000,c=[],f;for(var e=0;e<5;e++){f=Math.floor(Math.random()*10);if(e==0&&f==0){e=-1;continue}c.push(f)}if(d<10){c.push("000")}else{if(d<100){c.push("00")}else{if(d<1000){c.push("0")}}}c.push(d);return c.join("")}})(Dynamsoft.Lib);(function(b){var a=20201013;if(b._strUtil_ver){if(b.isNumber(b._strUtil_ver)&&b._strUtil_ver>=a){return}}b._strUtil_ver=a;b.mix(b,{startsWith:function(d,c){return d.lastIndexOf(c,0)===0},endsWith:function(e,d){var c=e.length-d.length;return c>=0&&e.indexOf(d,c)===c},replaceAll:function(e,d,c){return e.replace(new RegExp(d,"gi"),c)},upperCaseFirst:function(c){return c.charAt(0).toUpperCase()+c.substr(1)},removeNonPrintableChar:function(c){if(b.isString(c)){return c.replace(/[^\x20-\x7E]/g,"")}else{return c}},makeArray:function(h){if(h==null){return[]}if(b.isArray(h)){return h}var c=typeof h.length,g=typeof h;if(c!=="number"||h.alert||g==="string"||(g==="function"&&!("item" in h&&c==="number"))){return[h]}var e=[];for(var f=0,d=h.length;f<d;f++){e[f]=h[f]}return e}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._extend_ver){if(b.isNumber(b._extend_ver)&&b._extend_ver>=a){return}}b._extend_ver=a;b.extend=function(c,d){var e=function(){c.apply(this,arguments);if(d){d.apply(this,arguments)}};b.each(c.prototype,function(g,f){e.prototype[f]=g});e.prototype.constructor=e;return e}})(Dynamsoft.Lib);(function(c){var a=20200521;if(c._attribute_ver){if(c.isNumber(c._attribute_ver)&&c._attribute_ver>=a){return}}c._attribute_ver=a;function b(e){var d=this,f=d.constructor;d.__attrs={};d.__attrVals={};d.userConfig=e;while(f){d.addAttrs(f.ATTRS);f=f.superclass?f.superclass.constructor:null}c.mix(d.__attrs,e)}c.mix(b.prototype,{get:function(e){var d=this;if(e in d.__attrs){return d.__attrs[e]}return""},set:function(f,e){var d=this;if(f in d.__attrs){d.__attrs[f]=e}},addAttrs:function(d){c.mix(this.__attrs,d)}});b.extend=function(f){var d=this,g,e;f=f||{};if(f.constructor){g=f.constructor}e=c.extend(d,g);c.mix(e,f);return e};c.Attributes=b})(Dynamsoft.Lib);(function(h){var m=20200521;if(h._json_ver){if(h._json_ver>=m){return}}h._json_ver=m;var j=h.win.JSON;if(j&&j.parse&&j.stringify){h.parse=j.parse;h.stringify=j.stringify;return}var l=(function(){var q={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},p={},r=/["\b\f\n\r\t\x00-\x1f]/g,o=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;h.each(q,function(s,t){p[s]=t});p["\\/"]="/";p["\\\\"]="\\";return{quote:function(s){return'"'+s.replace(r,function(t){var u;if(!(u=q[t])){u="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(0-4)}return u})+'"'},unQuote:function(s){return s.slice(1,s.length-1).replace(o,function(t){var u;if(!(u=p[t])){u=String.fromCharCode(parseInt(t.slice(2),16))}return u})}}})(),i;function b(o){return o<10?"0"+o:o}function f(F,z,r,E,D,t){var u=t;t+=E;var v,q,x=0,s;if(r!==undefined){v=r}else{v=h.keys(F)}var C=[];for(q=v.length;x<q;x++){s=v[x];var o=i(s,F,z,r,E,D,t);if(o!==undefined){var w=l.quote(s);w+=":";if(E){w+=" "}w+=o;C[C.length]=w}}var A;if(!C.length){A="{}"}else{if(!E){A="{"+C.join(",")+"}"}else{var y=",\n"+t;var B=C.join(y);A="{\n"+t+B+"\n"+u+"}"}}return A}function n(B,t,p,A,z,q){var r=q;q+=A;var y=[];var v=B.length;var u=0;while(u<v){var o=i(String(u),B,t,p,A,z,q);if(o===undefined){y[y.length]="null"}else{y[y.length]=o}++u}var w;if(!y.length){w="[]"}else{if(!A){w="["+y.join(",")+"]"}else{var s="\n,"+q;var x=y.join(s);w="[\n"+q+x+"\n"+r+"]"}}return w}i=function(r,q,u,s,v,p,o){var t=q[r];if(t&&typeof t==="object"){if(typeof t.toJSON==="function"){t=t.toJSON(r)}else{if(t instanceof Date){t=isFinite(t.valueOf())?t.getUTCFullYear()+"-"+b(t.getUTCMonth()+1)+"-"+b(t.getUTCDate())+"T"+b(t.getUTCHours())+":"+b(t.getUTCMinutes())+":"+b(t.getUTCSeconds())+"Z":null}else{if(t instanceof String||t instanceof Number||t instanceof Boolean){t=t.valueOf()}}}}if(u!==undefined){t=u.call(q,r,t)}switch(typeof t){case"number":return isFinite(t)?String(t):"null";case"string":return l.quote(t);case"boolean":return String(t);case"object":if(!t){return"null"}if(h.isArray(t)){return n(t,u,s,v,p,o)}return f(t,u,s,v,p,o)}return undefined};h.stringify=function(r,o,q){var t="";var p,s;if(o){if(typeof o==="function"){s=o}else{if(h.isArray(o)){p=o}}}if(typeof q==="number"){q=Math.min(10,q);t=new Array(q+1).join(" ")}else{if(typeof q==="string"){t=q.slice(0,10)}}return i("",{"":r},s,p,t,[],"")};var c={},d={SHIFT_TYPE:1,REDUCE_TYPE:2,ACCEPT_TYPE:0,TYPE_INDEX:0,PRODUCTION_INDEX:1,TO_INDEX:2},a;c.yy={unQuote:l.unQuote};a=function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)};a.prototype={constructor:function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)},resetInput:function(o){h.mix(this,{input:o,matched:"",stateStack:[a.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var o=this,p=o.stateStack[o.stateStack.length-1],q=[];p=o.mapState(p);h.each(o.rules,function(s){var t=s.state||s[3];if(!t){if(p==a.STATIC.INITIAL){q.push(s)}}else{if(h.inArray(p,t)){q.push(s)}}});return q},pushState:function(o){this.stateStack.push(o)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var q=this,s=a.STATIC.DEBUG_CONTEXT_LIMIT,o=q.matched,r=q.match,p=q.input;o=o.slice(0,o.length-r.length);var u=(o.length>s?"...":"")+o.slice(-s).replace(/\n/," "),t=r+p;t=t.slice(0,s)+(t.length>s?"...":"");return u+t+"\n"+new Array(u.length+1).join("-")+"^"},mapSymbol:function(q){var o=this,p=o.symbolMap;if(!p){return q}return p[q]||(p[q]=(++o.symbolId))},mapReverseSymbol:function(p){var o=this,r=o.symbolMap,q,s=o.reverseSymbolMap;if(!s&&r){s=o.reverseSymbolMap={};h.each(r,function(u,t){s[u]=t})}if(s){return s[p]}else{return p}},mapState:function(q){var o=this,p=o.stateMap;if(!p){return q}return p[q]||(p[q]=(++o.stateId))},lex:function(){var y=this,w=y.input,r,v,o,t,z,x=y.getCurrentRules();y.match=y.text="";if(!w){return y.mapSymbol(a.STATIC.END_TAG)}for(r=0;r<x.length;r++){v=x[r];var u=v.regexp||v[1],p=v.token||v[0],q=v.action||v[2]||undefined;if((o=w.match(u))){z=o[0].match(/\n.*/g);if(z){y.lineNumber+=z.length}h.mix(y,{firstLine:y.lastLine,lastLine:y.lineNumber+1,firstColumn:y.lastColumn,lastColumn:z?z[z.length-1].length-1:y.lastColumn+o[0].length});var s;s=y.match=o[0];y.matches=o;y.text=s;y.matched+=s;t=q&&q.call(y);if(t===undefined){t=p}else{t=y.mapSymbol(t)}w=w.slice(s.length);y.input=w;if(t){return t}else{return y.lex()}}}h.error("lex error at line "+y.lineNumber+":\n"+y.showDebugInfo());return undefined}};a.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var e=new a({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});c.lexer=e;e.symbolMap={"$EOF":1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,"$START":13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20};c.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return this.$1==="true"}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){this.$1[this.$1.length]=this.$3;return this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var o={};o[this.$1.key]=this.$1.value;return o}],[20,[20,3,19],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]];c.table={gotos:{"0":{"14":7,"15":8,"16":9,"17":10},"2":{"15":12,"16":9,"17":10,"18":13},"3":{"19":16,"20":17},"18":{"15":23,"16":9,"17":10},"20":{"15":24,"16":9,"17":10},"21":{"19":25}},action:{"0":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"1":{"1":[2,2,0],"3":[2,2,0],"6":[2,2,0],"8":[2,2,0]},"2":{"2":[1,0,1],"5":[1,0,2],"6":[1,0,11],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"3":{"2":[1,0,14],"8":[1,0,15]},"4":{"1":[2,3,0],"3":[2,3,0],"6":[2,3,0],"8":[2,3,0]},"5":{"1":[2,6,0],"3":[2,6,0],"6":[2,6,0],"8":[2,6,0]},"6":{"1":[2,7,0],"3":[2,7,0],"6":[2,7,0],"8":[2,7,0]},"7":{"1":[0,0,0]},"8":{"1":[2,1,0]},"9":{"1":[2,4,0],"3":[2,4,0],"6":[2,4,0],"8":[2,4,0]},"10":{"1":[2,5,0],"3":[2,5,0],"6":[2,5,0],"8":[2,5,0]},"11":{"1":[2,10,0],"3":[2,10,0],"6":[2,10,0],"8":[2,10,0]},"12":{"3":[2,8,0],"6":[2,8,0]},"13":{"3":[1,0,18],"6":[1,0,19]},"14":{"4":[1,0,20]},"15":{"1":[2,15,0],"3":[2,15,0],"6":[2,15,0],"8":[2,15,0]},"16":{"3":[2,13,0],"8":[2,13,0]},"17":{"3":[1,0,21],"8":[1,0,22]},"18":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"19":{"1":[2,11,0],"3":[2,11,0],"6":[2,11,0],"8":[2,11,0]},"20":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"21":{"2":[1,0,14]},"22":{"1":[2,16,0],"3":[2,16,0],"6":[2,16,0],"8":[2,16,0]},"23":{"3":[2,9,0],"6":[2,9,0]},"24":{"3":[2,12,0],"8":[2,12,0]},"25":{"3":[2,14,0],"8":[2,14,0]}}};c.parse=function g(y){var A=this,o=A.lexer,t,F,E,I=A.table,B=I.gotos,s=I.action,r=A.productions,u=[null],v=[0];o.resetInput(y);while(1){t=v[v.length-1];if(!F){F=o.lex()}if(!F){h.log("it is not a valid input: "+y,"error");return false}E=s[t]&&s[t][F];if(!E){var w=[],D;if(s[t]){h.each(s[t],function(L,M){w.push(A.lexer.mapReverseSymbol(M))})}D="Syntax error at line "+o.lineNumber+":\n"+o.showDebugInfo()+"\nexpect "+w.join(", ");h.log(D);return false}switch(E[d.TYPE_INDEX]){case d.SHIFT_TYPE:v.push(F);u.push(o.text);v.push(E[d.TO_INDEX]);F=null;break;case d.REDUCE_TYPE:var J=r[E[d.PRODUCTION_INDEX]],z=J.symbol||J[0],q=J.action||J[2],C=J.rhs||J[1],H=C.length,G=0,K,x=u[u.length-H];A.$$=x;K=undefined;for(;G<H;G++){A["$"+(H-G)]=u[u.length-1-G]}if(q){K=q.call(A)}if(K!==undefined){x=K}else{x=A.$$}if(H){v=v.slice(0,-1*H*2);u=u.slice(0,-1*H)}v.push(z);u.push(x);var p=B[v[v.length-2]][v[v.length-1]];v.push(p);break;case d.ACCEPT_TYPE:return x}}};function k(w,o,x){var s=w[o],t,v,u;if(typeof s==="object"){if(h.isArray(s)){t=0;v=s.length;var r=[];while(t<v){u=k(s,String(t),x);if(u!==undefined){r[r.length]=u}}s=r}else{var y=h.keys(s);t=0;for(v=y.length;t<v;t++){var q=y[t];u=k(s,q,x);if(u===undefined){delete s[q]}else{s[q]=u}}}}return x.call(w,o,s)}h.parse=function(q,o){var p=c.parse(String(q));if(o){return k({"":p},"",o)}else{return p}}})(Dynamsoft.Lib);(function(e){var d=20200521;if(e._array_ver){if(e._array_ver>=d){return}}e._array_ver=d;var c=Array.prototype,b=c.indexOf,a=c.filter;if(!e.isFunction(b)){b=function(h,i){var g;if(this==null){return -1}var j=Object(this);var f=j.length>>>0;if(f===0){return -1}var l=+i||0;if(Math.abs(l)===Infinity){l=0}if(l>=f){return -1}g=Math.max(l>=0?l:f-Math.abs(l),0);while(g<f){if(g in j&&j[g]===h){return g}g++}return -1}}e.mix(e,{filter:a?function(f,h,g){return a.call(f,h,g||this)}:function(f,i,h){var g=[];e.each(f,function(l,k,j){if(i.call(h||this,l,k,j)){g.push(l)}});return g},indexOf:function(g,f){return b.call(f,g)},uniq:function(l){var k=[],f=l.length;for(var h=0;h<f;h++){for(var g=h+1;g<f;g++){if(l[h]===l[g]){h++;g=h}}k.push(l[h])}return k}})})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._function_ver){if(d._function_ver>=c){return}}d._function_ver=c;var b=Array.prototype,a=Function.prototype;if(!d.isFunction(a.bind)){a.bind=function(g){var f=this;if(1<arguments.length){var e=b.slice.call(arguments,1);return function(){return f.apply(g,arguments.length?e.concat(b.slice.call(arguments)):e)}}return function(){return arguments.length?f.apply(g,arguments):f.call(g)}}}})(Dynamsoft.Lib);(function(f){var d=20200521;if(f._string_ver){if(f._string_ver>=d){return}}f._string_ver=d;var b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,e=String.prototype,c="",a=e.trim;if(!a){a=e.trim=function(){return this.replace(b,c)}}f.trim=function(g){return g==null?c:a.call(g)}})(Dynamsoft.Lib);(function(g,c){var t="",j=!1,f=!0,s=g.getLogger(),l=g.isDef,a=g.each,k="&",m="=",p=16,d={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},o={},h,i,b=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;a(d,function(v,u){o[v]=u});function r(v){var u=typeof v;return v==null||(u!=="object"&&u!=="function")}function q(){if(h){return h}var u=t;a(d,function(v){u+=v+"|"});u=u.slice(0,-1);h=new RegExp(u,"g");return h}function n(){if(i){return i}var u=t;a(o,function(v){u+=v+"|"});u+="&#(\\d{1,5});";i=new RegExp(u,"g");return i}function e(u){return encodeURIComponent(String(u))}g.mix(g,{urlEncode:e,urlDecode:function(u){return decodeURIComponent(u.replace(/\+/g," "))},fromUnicode:function(u){return u.replace(/\\u([a-f\d]{4})/ig,function(v,w){return String.fromCharCode(parseInt(w,p))})},escapeHtml:function(u){return(u+"").replace(q(),function(v){return o[v]})},escapeRegExp:function(u){return u.replace(b,"\\$&")},unEscapeHtml:function(u){return u.replace(n(),function(v,w){return d[v]||String.fromCharCode(+w)})},param:function(y,x,v,u){x=x||k;v=v||m;if(g.isUndef(u)){u=f}var w=[];a(y,function(B,z){var A=e(z);if(r(B)){w.push(A);if(l(B)){w.push(v,e(B+t))}w.push(x)}else{if(g.isArray(B)&&B.length){a(B,function(C){if(r(C)){w.push(A,(u?e("[]"):t));if(l(C)){w.push(v,e(C+t))}w.push(x)}})}}});w.pop();return w.join(t)},unparam:function(B,F,E){if(!g.isString(B)||!(B=g.trim(B))){return{}}F=F||k;E=E||m;var A={},C,u=g.urlDecode,v=B.split(F),D,w,x=0,y=v.length;for(;x<y;++x){C=g.indexOf(E,v[x]);if(C===-1){D=u(v[x]);w=c}else{D=u(v[x].substring(0,C));w=v[x].substring(C+1);try{w=u(w)}catch(z){s.error("decodeURIComponent error : "+w);s.error(z)}if(g.endsWith(D,"[]")){D=D.substring(0,D.length-2)}}if(D in A){if(g.isArray(A[D])){A[D].push(w)}else{A[D]=[A[D],w]}}else{A[D]=w}}return A}})})(Dynamsoft.Lib);(function(d){var c=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function b(j,e){var g=[];for(var f=0;f<j.length;f++){var h=j[f];if(!h||h==="."){continue}if(h===".."){if(g.length&&g[g.length-1]!==".."){g.pop()}else{if(e){g.push("..")}}}else{g.push(h)}}return g}var a=d.Path={resolve:function(){var h="",f,g,e=(arguments),j,k=0;for(g=e.length-1;g>=0&&!k;g--){j=e[g];if(d.isString(j)&&!!j){h=j+"/"+h;k=j.charAt(0)==="/"}}f=b(d.filter(h.split("/"),function(i){return !!i}),!k).join("/");return((k?"/":"")+f)||"."},normalize:function(f){var g=f.charAt(0)==="/",e=f.slice(-1)==="/";f=b(d.filter(f.split("/"),function(h){return !!h}),!g).join("/");if(!f&&!g){f="."}if(f&&e){f+="/"}return(g?"/":"")+f},join:function(){var e=d.makeArray(arguments);return a.normalize(d.filter(e,function(f){return f&&(d.isString(f))}).join("/"))},relative:function(l,k){l=a.normalize(l);k=a.normalize(k);var j=d.filter(l.split("/"),function(m){return !!m}),i=[],f,g,e=d.filter(k.split("/"),function(m){return !!m}),h=Math.min(j.length,e.length);for(f=0;f<h;f++){if(j[f]!==e[f]){break}}g=f;while(f<j.length){i.push("..");f++}i=i.concat(e.slice(g));return i.join("/")},basename:function(h,f){var e=h.match(c)||[],g;g=e[3]||"";if(f&&g&&g.slice(-1*f.length)===f){g=g.slice(0,-1*f.length)}return g},dirname:function(h){var e=h.match(c)||[],f=e[1]||"",g=e[2]||"";if(!f&&!g){return"."}if(g){g=g.substring(0,g.length-1)}return f+g},extname:function(e){return(e.match(c)||[])[4]||""}}})(Dynamsoft.Lib);(function(d,c){function b(e){if(!e._queryMap){e._queryMap=d.unparam(e._query)}}function a(e){this._query=e||""}a.prototype={constructor:a,clone:function(){return new a(this.toString())},reset:function(f){var e=this;e._query=f||"";e._queryMap=null;return e},count:function(){var e=this,f=0;b(e);d.each(e._queryMap,function(g){if(d.isArray(g)){f+=g.length}else{f++}});return f},has:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return f in g}else{return !d.isEmptyObject(g)}},get:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return g[f]}else{return g}},keys:function(){var e=this;b(e);return d.keys(e._queryMap)},set:function(f,g){var e=this,h;b(e);h=e._queryMap;if(d.isString(f)){e._queryMap[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(j,i){h[i]=j})}return e},remove:function(f){var e=this;b(e);if(f){delete e._queryMap[f]}else{e._queryMap={}}return e},add:function(f,h){var e=this,i,g;if(d.isString(f)){b(e);i=e._queryMap;g=i[f];if(d.isUndef(g)){g=h}else{g=[].concat(g).concat(h)}i[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(l,j){e.add(j,l)})}return e},toString:function(e){var f=this;b(f);return d.param(f._queryMap,c,c,e)}};d.uriQuery=a})(Dynamsoft.Lib);(function(j){var h=j.uriQuery,l=j.each,f=j.Path,n=j.getLogger(),o=/[#\/\?@]/g,c=/[#\?]/g,k=/[#@]/g,e=/#/g,g={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},b=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function a(p){return p.length===1?"0"+p:p}function i(q,p){return q.toLowerCase()===p.toLowerCase()}function m(q,p){return encodeURI(q).replace(p,function(r){return"%"+a(r.charCodeAt(0).toString(16))})}function d(r){if(r instanceof d){return r.clone()}var q,p=this;j.mix(p,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""});q=d.getComponents(r);l(q,function(s,t){s=s||"";if(t==="query"){p.query=new h(s)}else{try{s=j.urlDecode(s)}catch(u){n.error(u+"urlDecode error : "+s)}p[t]=s}});return p}d.prototype={constructor:d,clone:function(){var q=new d(),p=this;l(g,function(r,s){q[s]=p[s]});q.query=q.query.clone();return q},resolve:function(t){if(j.isString(t)){t=new d(t)}var r=this,s=0,q,p=["scheme","userInfo","hostname","port","path","query","fragment"],u=r.clone();l(p,function(w){if(w==="path"){if(s){u[w]=t[w]}else{var v=t.path;if(v){s=1;if(!j.startsWith(v,"/")){if(u.hostname&&!u.path){v="/"+v}else{if(u.path){q=u.path.lastIndexOf("/");if(q!==-1){v=u.path.slice(0,q+1)+v}}}}u.path=f.normalize(v)}}}else{if(w==="query"){if(s||t.query.toString()){u.query=t.query.clone();s=1}}else{if(s||t[w]){u[w]=t[w];s=1}}}});return u},getScheme:function(){return this.scheme},setScheme:function(p){this.scheme=p;return this},getHostname:function(){return this.hostname},setHostname:function(p){this.hostname=p;return this},setUserInfo:function(p){this.userInfo=p;return this},getUserInfo:function(){return this.userInfo},setPort:function(p){this.port=p;return this},getPort:function(){return this.port},setPath:function(p){this.path=p;return this},getPath:function(){return this.path},setQuery:function(p){if(j.isString(p)){if(j.startsWith(p,"?")){p=p.slice(1)}p=new h(m(p,k))}this.query=p;return this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(q){var p=this;if(j.startsWith(q,"#")){q=q.slice(1)}p.fragment=q;return p},isSameOriginAs:function(p){var q=this;return i(q.hostname,p.hostname)&&i(q.scheme,p.scheme)&&i(q.port,p.port)},toString:function(s){var r=[],x=this,p,v,y,q,t,u,w;if((p=x.scheme)){r.push(m(p,o));r.push(":")}if((v=x.hostname)){r.push("//");if((w=x.userInfo)){r.push(m(w,o));r.push("@")}r.push(encodeURIComponent(v));if((q=x.port)){r.push(":");r.push(q)}}if((y=x.path)){if(v&&!j.startsWith(y,"/")){y="/"+y}y=f.normalize(y);r.push(m(y,c))}if((u=(x.query.toString.call(x.query,s)))){r.push("?");r.push(u)}if((t=x.fragment)){r.push("#");r.push(m(t,e))}return r.join("")}};d.getComponents=function(s){var r="";s=s||r;var p=s.match(b)||[],q={};l(g,function(t,u){q[u]=p[t]});return q};j.Uri=d})(Dynamsoft.Lib);(function(c,b){var e=c.Lib,d=e.win,a=20200716;if(e._promise_ver){if(e.isNumber(e._promise_ver)&&e._promise_ver>=a){return}}e._promise_ver=a;if(e.isFunction(d.__zone_symbol__Promise)){e.nativePromise=d.__zone_symbol__Promise}if(self&&self.Promise){e.Promise=self.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}else{if(d&&d.Promise){e.Promise=d.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}}!function(f){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=f()}else{if("function"==typeof define&&define.amd){define([],f)}else{var g;"undefined"!=typeof window?g=window:"undefined"!=typeof global?g=global:"undefined"!=typeof self&&(g=self),g.Promise=f()}}}(function(){var f,h,i;return function g(l,m,q){function p(o,t){if(!m[o]){if(!l[o]){var v="function"==typeof _dereq_&&_dereq_;if(!t&&v){return v(o,!0)}if(k){return k(o,!0)}var n=new Error("Cannot find module '"+o+"'");throw n.code="MODULE_NOT_FOUND",n}var r=m[o]={exports:{}};l[o][0].call(r.exports,function(s){var u=l[o][1][s];return p(u?u:s)},r,r.exports,g,l,m,q)}return m[o].exports}for(var k="function"==typeof _dereq_&&_dereq_,j=0;j<q.length;j++){p(q[j])}return p}({1:[function(C,y,q){function j(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new x(16),this._normalQueue=new x(16),this._haveDrainedQueues=!1;var l=this;this.drainQueues=function(){l._drainQueues()},this._schedule=k}function m(l,o,p){this._lateQueue.push(l,o,p),this._queueTick()}function w(l,o,p){this._normalQueue.push(l,o,p),this._queueTick()}function A(l){this._normalQueue._pushOne(l),this._queueTick()}function D(l){for(;l.length()>0;){z(l)}}function z(l){var p=l.shift();if("function"!=typeof p){p._settlePromises()}else{var s=l.shift(),o=l.shift();p.call(s,o)}}var v;try{throw new Error}catch(B){v=B}var k=C("./schedule"),x=C("./queue");j.prototype.setScheduler=function(l){var n=this._schedule;return this._schedule=l,this._customScheduler=!0,n},j.prototype.hasCustomScheduler=function(){return this._customScheduler},j.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},j.prototype.fatalError=function(l,n){n?(process.stderr.write("Fatal "+(l instanceof Error?l.stack:l)+"\n"),process.exit(2)):this.throwLater(l)},j.prototype.throwLater=function(l,o){if(1===arguments.length&&(o=l,l=function(){throw o}),"undefined"!=typeof setTimeout){setTimeout(function(){l(o)},0)}else{try{this._schedule(function(){l(o)})}catch(p){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}}},j.prototype.invokeLater=m,j.prototype.invoke=w,j.prototype.settlePromises=A,j.prototype._drainQueues=function(){D(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,D(this._lateQueue)},j.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},j.prototype._reset=function(){this._isTickUsed=!1},y.exports=j,y.exports.firstLineError=v},{"./queue":17,"./schedule":18}],2:[function(j,k,l){k.exports=function(y,v,q,m){var p=!1,u=function(n,o){this._reject(o)},x=function(n,o){o.promiseRejectionQueued=!0,o.bindingPromise._then(u,u,null,this,n)},z=function(n,o){0===(50397184&this._bitField)&&this._resolveCallback(o.target)},w=function(n,o){o.promiseRejectionQueued||this._reject(n)};y.prototype.bind=function(r){p||(p=!0,y.prototype._propagateFrom=m.propagateFromFunction(),y.prototype._boundValue=m.boundValueFunction());var n=q(r),o=new y(v);o._propagateFrom(this,1);var t=this._target();if(o._setBoundTo(n),n instanceof y){var s={promiseRejectionQueued:!1,promise:o,target:t,bindingPromise:n};t._then(v,x,void 0,o,s),n._then(z,w,void 0,o,s),o._setOnCancel(n)}else{o._resolveCallback(t)}return o},y.prototype._setBoundTo=function(n){void 0!==n?(this._bitField=2097152|this._bitField,this._boundTo=n):this._bitField=-2097153&this._bitField},y.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},y.bind=function(o,r){return y.resolve(r).bind(o)}}},{}],3:[function(k,m,q){function l(){try{Promise===j&&(Promise=p)}catch(n){}return j}var p;"undefined"!=typeof Promise&&(p=Promise);var j=k("./promise")();j.noConflict=l,m.exports=j},{"./promise":15}],4:[function(j,k,l){k.exports=function(u,x,t,v){var p=j("./util"),m=p.tryCatch,q=p.errorObj,w=u._async;u.prototype["break"]=u.prototype.cancel=function(){if(!v.cancellation()){return this._warn("cancellation is disabled")}for(var o=this,r=o;o._isCancellable();){if(!o._cancelBy(r)){r._isFollowing()?r._followee().cancel():r._cancelBranched();break}var s=o._cancellationParent;if(null==s||!s._isCancellable()){o._isFollowing()?o._followee().cancel():o._cancelBranched();break}o._isFollowing()&&o._followee().cancel(),o._setWillBeCancelled(),r=o,o=s}},u.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},u.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},u.prototype._cancelBy=function(n){return n===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},u.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},u.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),w.invoke(this._cancelPromises,this,void 0))},u.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},u.prototype._unsetOnCancel=function(){this._onCancelField=void 0},u.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},u.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},u.prototype._doInvokeOnCancel=function(o,y){if(p.isArray(o)){for(var z=0;z<o.length;++z){this._doInvokeOnCancel(o[z],y)}}else{if(void 0!==o){if("function"==typeof o){if(!y){var s=m(o).call(this._boundValue());s===q&&(this._attachExtraTrace(s.e),w.throwLater(s.e))}}else{o._resultCancelled(this)}}}},u.prototype._invokeOnCancel=function(){var n=this._onCancel();this._unsetOnCancel(),w.invoke(this._doInvokeOnCancel,this,n)},u.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},u.prototype._resultCancelled=function(){this.cancel()}}},{"./util":21}],5:[function(j,k,l){k.exports=function(s){function u(o,v,r){return function(C){var n=r._boundValue();o:for(var x=0;x<o.length;++x){var A=o[x];if(A===Error||null!=A&&A.prototype instanceof Error){if(C instanceof A){return p(v).call(n,C)}}else{if("function"==typeof A){var z=p(A).call(n,C);if(z===m){return z}if(z){return p(v).call(n,C)}}else{if(q.isObject(C)){for(var y=t(A),B=0;B<y.length;++B){var w=y[B];if(A[w]!=C[w]){continue o}}return p(v).call(n,C)}}}}return s}}var q=j("./util"),t=j("./es5").keys,p=q.tryCatch,m=q.errorObj;return u}},{"./es5":10,"./util":21}],6:[function(j,k,l){k.exports=function(p){function s(){this._trace=new s.CapturedTrace(q())}function v(){return u?new s:void 0}function q(){var n=m.length-1;return n>=0?m[n]:void 0}var u=!1,m=[];return p.prototype._promiseCreated=function(){},p.prototype._pushContext=function(){},p.prototype._popContext=function(){return null},p._peekContext=p.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,m.push(this._trace))},s.prototype._popContext=function(){if(void 0!==this._trace){var n=m.pop(),o=n._promiseCreated;return n._promiseCreated=null,o}return null},s.CapturedTrace=null,s.create=v,s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var x=p.prototype._pushContext,r=p.prototype._popContext,o=p._peekContext,t=p.prototype._peekContext,w=p.prototype._promiseCreated;s.deactivateLongStackTraces=function(){p.prototype._pushContext=x,p.prototype._popContext=r,p._peekContext=o,p.prototype._peekContext=t,p.prototype._promiseCreated=w,u=!1},u=!0,p.prototype._pushContext=s.prototype._pushContext,p.prototype._popContext=s.prototype._popContext,p._peekContext=p.prototype._peekContext=q,p.prototype._promiseCreated=function(){var n=this._peekContext();n&&null==n._promiseCreated&&(n._promiseCreated=this)}},s}},{}],7:[function(j,k,l){k.exports=function(a7,aW,aR,aV){function a2(m,n){return{promise:n}}function bb(){return !1}function aQ(m,q,u){var p=this;try{m(q,u,function(n){if("function"!=typeof n){throw new TypeError("onCancel must be a function, got: "+ad.toString(n))}p._attachCancellationCallback(n)})}catch(s){return s}}function a9(m){if(!this._isCancellable()){return this}var n=this._onCancel();void 0!==n?ad.isArray(n)?n.push(m):this._setOnCancel([n,m]):this._setOnCancel(m)}function aY(){return this._onCancelField}function aP(m){this._onCancelField=m}function aU(){this._cancellationParent=void 0,this._onCancelField=void 0}function a6(m,o){if(0!==(1&o)){this._cancellationParent=m;var p=m._branchesRemainingToCancel;void 0===p&&(p=0),m._branchesRemainingToCancel=p+1}0!==(2&o)&&m._isBound()&&this._setBoundTo(m._boundTo)}function a3(m,n){0!==(2&n)&&m._isBound()&&this._setBoundTo(m._boundTo)}function a8(){var m=this._boundTo;return void 0!==m&&m instanceof a7?m.isFulfilled()?m.value():void 0:m}function bc(){this._trace=new au(this._peekContext())}function aO(m,p){if(aS(m)){var q=this._trace;if(void 0!==q&&p&&(q=q._parent),void 0!==q){q.attachExtraTrace(m)}else{if(!m.__stackCleaned__){var o=ax(m);ad.notEnumerableProp(m,"stack",o.message+"\n"+o.stack.join("\n")),ad.notEnumerableProp(m,"__stackCleaned__",!0)}}}}function aL(){this._trace=void 0}function a4(F,B,w,m,v){if(void 0===F&&null!==B&&t){if(void 0!==v&&v._returnedNonUndefined()){return}if(0===(65535&m._bitField)){return}w&&(w+=" ");var y="",D="";if(B._trace){for(var G=B._trace.stack.split("\n"),C=ay(G),x=C.length-1;x>=0;--x){var E=C[x];if(!an.test(E)){var q=E.match(ac);q&&(y="at "+q[1]+":"+q[2]+":"+q[3]+" ");break}}if(C.length>0){for(var A=C[0],x=0;x<G.length;++x){if(G[x]===A){x>0&&(D="\n"+G[x-1]);break}}}}var z="a promise was created in a "+w+"handler "+y+"but was not returned from it, see http://goo.gl/rRqMUw"+D;m._warn(z,!0,B)}}function aX(m,o){var p=m+" is deprecated and will be removed in a future version.";return o&&(p+=" Use "+o+" instead."),ba(p)}function ba(q,v,s){if(aI.warnings){var u,p=new az(q);if(v){s._attachExtraTrace(p)}else{if(aI.longStackTraces&&(u=a7._peekContext())){u.attachExtraTrace(p)}else{var m=ax(p);p.stack=m.message+"\n"+m.stack.join("\n")}}aE("warning",p)||af(p,"",!0)}}function aA(m,o){for(var p=0;p<o.length-1;++p){o[p].push("From previous event:"),o[p]=o[p].join("\n")}return p<o.length&&(o[p]=o[p].join("\n")),m+"\n"+o.join("\n")}function aN(m){for(var n=0;n<m.length;++n){(0===m[n].length||n+1<m.length&&m[n][0]===m[n+1][0])&&(m.splice(n,1),n--)}}function aZ(y){for(var v=y[0],q=1;q<y.length;++q){for(var m=y[q],p=v.length-1,u=v[p],x=-1,z=m.length-1;z>=0;--z){if(m[z]===u){x=z;break}}for(var z=x;z>=0;--z){var w=m[z];if(v[p]!==w){break}v.pop(),p--}v=m}}function ay(p){for(var s=[],v=0;v<p.length;++v){var q=p[v],u="    (No stack trace)"===q||aJ.test(q),m=u&&av(q);u&&!m&&(ab&&" "!==q.charAt(0)&&(q="    "+q),s.push(q))}return s}function a1(m){for(var p=m.stack.replace(/\s+$/g,"").split("\n"),q=0;q<p.length;++q){var o=p[q];if("    (No stack trace)"===o||aJ.test(o)){break}}return q>0&&"SyntaxError"!=m.name&&(p=p.slice(q)),p}function ax(m){var o=m.stack,p=m.toString();return o="string"==typeof o&&o.length>0?a1(m):["    (No stack trace)"],{message:p,stack:"SyntaxError"==m.name?o:ay(o)}}function af(m,q,u){if("undefined"!=typeof console){var p;if(ad.isObject(m)){var s=m.stack;p=q+aK(s,m)}else{p=q+String(m)}"function"==typeof aB?aB(p,u):("function"==typeof console.log||"object"==typeof console.log)&&console.log(p)}}function aM(p,s,v,q){var u=!1;try{"function"==typeof s&&(u=!0,"rejectionHandled"===p?s(q):s(v,q))}catch(m){ar.throwLater(m)}"unhandledRejection"===p?aE(p,v,q)||u||af(v,"Unhandled rejection "):aE(p,q)}function ai(m){var q;if("function"==typeof m){q="[function "+(m.name||"anonymous")+"]"}else{q=m&&"function"==typeof m.toString?m.toString():ad.toString(m);var u=/\[object [a-zA-Z0-9$_]+\]/;if(u.test(q)){try{var p=JSON.stringify(m);q=p}catch(s){}}0===q.length&&(q="(empty array)")}return"(<"+ah(q)+">, no stack trace)"}function ah(m){var n=41;return m.length<n?m:m.substr(0,n-3)+"..."}function ak(){return"function"==typeof aF}function al(m){var n=m.match(aD);return n?{fileName:n[1],line:parseInt(n[2],10)}:void 0}function aC(z,w){if(ak()){for(var q,m,p=(z.stack||"").split("\n"),v=(w.stack||"").split("\n"),y=-1,A=-1,x=0;x<p.length;++x){var u=al(p[x]);if(u){q=u.fileName,y=u.line;break}}for(var x=0;x<v.length;++x){var u=al(v[x]);if(u){m=u.fileName,A=u.line;break}}0>y||0>A||!q||!m||q!==m||y>=A||(av=function(n){if(aw.test(n)){return !0}var o=al(n);return o&&o.fileName===q&&y<=o.line&&o.line<=A?!0:!1})}}function au(m){this._parent=m,this._promisesCreated=0;var n=this._length=1+(void 0===m?0:m._length);aF(this,au),n>32&&this.uncycle()}var am,ao,aB,ae,ar=a7._async,az=j("./errors").Warning,ad=j("./util"),aj=j("./es5"),aS=ad.canAttachTrace,aw=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,an=/\((?:timers\.js):\d+:\d+\)/,ac=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,aJ=null,aK=null,ab=!1,ap=!(0==ad.env("BLUEBIRD_DEBUG")||!ad.env("BLUEBIRD_DEBUG")&&"development"!==ad.env("NODE_ENV")),aq=!(0==ad.env("BLUEBIRD_WARNINGS")||!ap&&!ad.env("BLUEBIRD_WARNINGS")),aa=!(0==ad.env("BLUEBIRD_LONG_STACK_TRACES")||!ap&&!ad.env("BLUEBIRD_LONG_STACK_TRACES")),t=0!=ad.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(aq||!!ad.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){function m(){for(var n=0;n<o.length;++n){o[n]._notifyUnhandledRejection()}p()}function p(){o.length=0}var o=[];ae=function(n){o.push(n),setTimeout(m,1)},aj.defineProperty(a7,"_unhandledRejectionCheck",{value:m}),aj.defineProperty(a7,"_unhandledRejectionClear",{value:p})}(),a7.prototype.suppressUnhandledRejections=function(){var m=this._target();m._bitField=-1048577&m._bitField|524288},a7.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),ae(this))},a7.prototype._notifyUnhandledRejectionIsHandled=function(){aM("rejectionHandled",am,void 0,this)},a7.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},a7.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},a7.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var m=this._settledValue();this._setUnhandledRejectionIsNotified(),aM("unhandledRejection",ao,m,this)}},a7.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},a7.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},a7.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},a7.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},a7.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},a7.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},a7.prototype._warn=function(m,o,p){return ba(m,o,p||this)},a7.onPossiblyUnhandledRejection=function(m){var o=a7._getContext();ao=ad.contextBind(o,m)},a7.onUnhandledRejectionHandled=function(m){var o=a7._getContext();am=ad.contextBind(o,m)};var a5=function(){};a7.longStackTraces=function(){if(ar.haveItemsQueued()&&!aI.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}if(!aI.longStackTraces&&ak()){var m=a7.prototype._captureStackTrace,n=a7.prototype._attachExtraTrace,p=a7.prototype._dereferenceTrace;aI.longStackTraces=!0,a5=function(){if(ar.haveItemsQueued()&&!aI.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}a7.prototype._captureStackTrace=m,a7.prototype._attachExtraTrace=n,a7.prototype._dereferenceTrace=p,aW.deactivateLongStackTraces(),aI.longStackTraces=!1},a7.prototype._captureStackTrace=bc,a7.prototype._attachExtraTrace=aO,a7.prototype._dereferenceTrace=aL,aW.activateLongStackTraces()}},a7.hasLongStackTraces=function(){return aI.longStackTraces&&ak()};var aT={unhandledrejection:{before:function(){var m=ad.global.onunhandledrejection;return ad.global.onunhandledrejection=null,m},after:function(m){ad.global.onunhandledrejection=m}},rejectionhandled:{before:function(){var m=ad.global.onrejectionhandled;return ad.global.onrejectionhandled=null,m},after:function(m){ad.global.onrejectionhandled=m}}},a0=function(){var m=function(q,r){if(!q){return !ad.global.dispatchEvent(r)}var s;try{return s=q.before(),!ad.global.dispatchEvent(r)}finally{q.after(s)}};try{if("function"==typeof CustomEvent){var o=new CustomEvent("CustomEvent");return ad.global.dispatchEvent(o),function(s,v){s=s.toLowerCase();var q={detail:v,cancelable:!0},u=new CustomEvent(s,q);return aj.defineProperty(u,"promise",{value:v.promise}),aj.defineProperty(u,"reason",{value:v.reason}),m(aT[s],u)}}if("function"==typeof Event){var o=new Event("CustomEvent");return ad.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=new Event(s,{cancelable:!0});return q.detail=u,aj.defineProperty(q,"promise",{value:u.promise}),aj.defineProperty(q,"reason",{value:u.reason}),m(aT[s],q)}}var o=document.createEvent("CustomEvent");return o.initCustomEvent("testingtheevent",!1,!0,{}),ad.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=document.createEvent("CustomEvent");return q.initCustomEvent(s,!1,!0,u),m(aT[s],q)}}catch(p){}return function(){return !1}}(),aH=function(){return ad.isNode?function(){return process.emit.apply(process,arguments)}:ad.global?function(m){var o="on"+m.toLowerCase(),p=ad.global[o];return p?(p.apply(ad.global,[].slice.call(arguments,1)),!0):!1}:function(){return !1}}(),aG={promiseCreated:a2,promiseFulfilled:a2,promiseRejected:a2,promiseResolved:a2,promiseCancelled:a2,promiseChained:function(m,o,p){return{promise:o,child:p}},warning:function(m,n){return{warning:n}},unhandledRejection:function(m,o,p){return{reason:o,promise:p}},rejectionHandled:a2},aE=function(m){var p=!1;try{p=aH.apply(null,arguments)}catch(q){ar.throwLater(q),p=!0}var o=!1;try{o=a0(m,aG[m].apply(null,arguments))}catch(q){ar.throwLater(q),o=!0}return o||p};a7.config=function(o){if(o=Object(o),"longStackTraces" in o&&(o.longStackTraces?a7.longStackTraces():!o.longStackTraces&&a7.hasLongStackTraces()&&a5()),"warnings" in o){var q=o.warnings;aI.warnings=!!q,t=aI.warnings,ad.isObject(q)&&"wForgottenReturn" in q&&(t=!!q.wForgottenReturn)}if("cancellation" in o&&o.cancellation&&!aI.cancellation){if(ar.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use")}a7.prototype._clearCancellationData=aU,a7.prototype._propagateFrom=a6,a7.prototype._onCancel=aY,a7.prototype._setOnCancel=aP,a7.prototype._attachCancellationCallback=a9,a7.prototype._execute=aQ,ag=a6,aI.cancellation=!0}if("monitoring" in o&&(o.monitoring&&!aI.monitoring?(aI.monitoring=!0,a7.prototype._fireEvent=aE):!o.monitoring&&aI.monitoring&&(aI.monitoring=!1,a7.prototype._fireEvent=bb)),"asyncHooks" in o&&ad.nodeSupportsAsyncResource){var m=aI.asyncHooks,p=!!o.asyncHooks;m!==p&&(aI.asyncHooks=p,p?aR():aV())}return a7},a7.prototype._fireEvent=bb,a7.prototype._execute=function(m,p,q){try{m(p,q)}catch(o){return o}},a7.prototype._onCancel=function(){},a7.prototype._setOnCancel=function(m){},a7.prototype._attachCancellationCallback=function(m){},a7.prototype._captureStackTrace=function(){},a7.prototype._attachExtraTrace=function(){},a7.prototype._dereferenceTrace=function(){},a7.prototype._clearCancellationData=function(){},a7.prototype._propagateFrom=function(m,n){};var ag=a3,av=function(){return !1},aD=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;ad.inherits(au,Error),aW.CapturedTrace=au,au.prototype.uncycle=function(){var B=this._length;if(!(2>B)){for(var x=[],q={},m=0,p=this;void 0!==p;++m){x.push(p),p=p._parent}B=this._length=m;for(var m=B-1;m>=0;--m){var w=x[m].stack;void 0===q[w]&&(q[w]=m)}for(var m=0;B>m;++m){var z=x[m].stack,C=q[z];if(void 0!==C&&C!==m){C>0&&(x[C-1]._parent=void 0,x[C-1]._length=1),x[m]._parent=void 0,x[m]._length=1;var y=m>0?x[m-1]:this;B-1>C?(y._parent=x[C+1],y._parent.uncycle(),y._length=y._parent._length+1):(y._parent=void 0,y._length=1);for(var v=y._length+1,A=m-2;A>=0;--A){x[A]._length=v,v++}return}}}},au.prototype.attachExtraTrace=function(m){if(!m.__stackCleaned__){this.uncycle();for(var q=ax(m),u=q.message,p=[q.stack],s=this;void 0!==s;){p.push(ay(s.stack.split("\n"))),s=s._parent}aZ(p),aN(p),ad.notEnumerableProp(m,"stack",aA(u,p)),ad.notEnumerableProp(m,"__stackCleaned__",!0)}};var aF=function(){var p=/^\s*at\s*/,s=function(n,o){return"string"==typeof n?n:void 0!==o.name&&void 0!==o.message?o.toString():ai(o)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,aJ=p,aK=s;var v=Error.captureStackTrace;return av=function(n){return aw.test(n)},function(n,o){Error.stackTraceLimit+=6,v(n,o),Error.stackTraceLimit-=6}}var q=new Error;if("string"==typeof q.stack&&q.stack.split("\n")[0].indexOf("stackDetection@")>=0){return aJ=/@/,aK=s,ab=!0,function(n){n.stack=(new Error).stack}}var u;try{throw new Error}catch(m){u="stack" in m}return"stack" in q||!u||"number"!=typeof Error.stackTraceLimit?(aK=function(n,o){return"string"==typeof n?n:"object"!=typeof o&&"function"!=typeof o||void 0===o.name||void 0===o.message?ai(o):o.toString()},null):(aJ=p,aK=s,function(n){Error.stackTraceLimit+=6;try{throw new Error}catch(o){n.stack=o.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(aB=function(m){console.warn(m)},ad.isNode&&process.stderr.isTTY?aB=function(m,o){var p=o?"[33m":"[31m";console.warn(p+m+"[0m\n")}:ad.isNode||"string"!=typeof(new Error).stack||(aB=function(m,n){console.warn("%c"+m,n?"color: darkorange":"color: red")}));var aI={warnings:aq,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return aa&&a7.longStackTraces(),{asyncHooks:function(){return aI.asyncHooks},longStackTraces:function(){return aI.longStackTraces},warnings:function(){return aI.warnings},cancellation:function(){return aI.cancellation},monitoring:function(){return aI.monitoring},propagateFromFunction:function(){return ag},boundValueFunction:function(){return a8},checkForgottenReturns:a4,setBounds:aC,warn:ba,deprecated:aX,CapturedTrace:au,fireDomEvent:a0,fireGlobalEvent:aH}}},{"./errors":9,"./es5":10,"./util":21}],8:[function(j,k,l){k.exports=function(m){function o(){return this.value}function p(){throw this.reason}m.prototype["return"]=m.prototype.thenReturn=function(q){return q instanceof m&&q.suppressUnhandledRejections(),this._then(o,void 0,void 0,{value:q},void 0)},m.prototype["throw"]=m.prototype.thenThrow=function(n){return this._then(p,void 0,void 0,{reason:n},void 0)},m.prototype.catchThrow=function(n){if(arguments.length<=1){return this._then(void 0,p,void 0,{reason:n},void 0)}var s=arguments[1],q=function(){throw s};return this.caught(n,q)},m.prototype.catchReturn=function(t){if(arguments.length<=1){return t instanceof m&&t.suppressUnhandledRejections(),this._then(void 0,o,void 0,{value:t},void 0)}var q=arguments[1];q instanceof m&&q.suppressUnhandledRejections();var s=function(){return q};return this.caught(t,s)}}},{}],9:[function(w,J,C){function z(l,m){function o(n){return this instanceof o?(A(this,"message","string"==typeof n?n:m),A(this,"name",l),void (Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new o(n)}return q(o,Error),o}function B(l){return this instanceof B?(A(this,"name","OperationalError"),A(this,"message",l),this.cause=l,this.isOperational=!0,void (l instanceof Error?(A(this,"message",l.message),A(this,"stack",l.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new B(l)}var F,N,x=w("./es5"),L=x.freeze,E=w("./util"),q=E.inherits,A=E.notEnumerableProp,I=z("Warning","warning"),G=z("CancellationError","cancellation error"),K=z("TimeoutError","timeout error"),O=z("AggregateError","aggregate error");try{F=TypeError,N=RangeError}catch(k){F=z("TypeError","type error"),N=z("RangeError","range error")}for(var j="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),H=0;H<j.length;++H){"function"==typeof Array.prototype[j[H]]&&(O.prototype[j[H]]=Array.prototype[j[H]])}x.defineProperty(O.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),O.prototype.isOperational=!0;var D=0;O.prototype.toString=function(){var m=Array(4*D+1).join(" "),s="\n"+m+"AggregateError of:\n";D++,m=Array(4*D+1).join(" ");for(var v=0;v<this.length;++v){for(var p=this[v]===this?"[Circular AggregateError]":this[v]+"",u=p.split("\n"),l=0;l<u.length;++l){u[l]=m+u[l]}p=u.join("\n"),s+=p+"\n"}return D--,s},q(B,Error);var M=Error.__BluebirdErrorTypes__;M||(M=L({CancellationError:G,TimeoutError:K,OperationalError:B,RejectionError:B,AggregateError:O}),x.defineProperty(Error,"__BluebirdErrorTypes__",{value:M,writable:!1,enumerable:!1,configurable:!1})),J.exports={Error:Error,TypeError:F,RangeError:N,CancellationError:M.CancellationError,OperationalError:M.OperationalError,TimeoutError:M.TimeoutError,AggregateError:M.AggregateError,Warning:I}},{"./es5":10,"./util":21}],10:[function(C,y,q){var j=function(){return void 0===this}();if(j){y.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:j,propertyIsWritable:function(l,o){var p=Object.getOwnPropertyDescriptor(l,o);return !(p&&!p.writable&&!p.set)}}}else{var m={}.hasOwnProperty,w={}.toString,A={}.constructor.prototype,D=function(l){var o=[];for(var p in l){m.call(l,p)&&o.push(p)}return o},z=function(l,n){return{value:l[n]}},v=function(l,o,p){return l[o]=p.value,l},B=function(l){return l},k=function(l){try{return Object(l).constructor.prototype}catch(n){return A}},x=function(l){try{return"[object Array]"===w.call(l)}catch(n){return !1}};y.exports={isArray:x,keys:D,names:D,defineProperty:v,getDescriptor:z,freeze:B,getPrototypeOf:k,isES5:j,propertyIsWritable:function(){return !0}}}},{}],11:[function(j,k,l){k.exports=function(A,v,m){function t(o,p,r){this.promise=o,this.type=p,this.handler=r,this.called=!1,this.cancelPromise=null}function x(n){this.finallyHandler=n}function C(n,o){return null!=n.cancelPromise?(arguments.length>1?n.cancelPromise._reject(o):n.cancelPromise._cancel(),n.cancelPromise=null,!0):!1}function E(){return w.call(this,this.promise._target()._settledValue())}function B(n){return C(this,n)?void 0:(z.e=n,z)}function w(r){var G=this.promise,n=this.handler;if(!this.called){this.called=!0;var p=this.isFinallyHandler()?n.call(G._boundValue()):n.call(G._boundValue(),r);if(p===m){return p}if(void 0!==p){G._setReturnedNonUndefined();var s=v(p,G);if(s instanceof A){if(null!=this.cancelPromise){if(s._isCancelled()){var F=new q("late cancellation observer");return G._attachExtraTrace(F),z.e=F,z}s.isPending()&&s._attachCancellationCallback(new x(this))}return s._then(E,B,void 0,this,void 0)}}}return G.isRejected()?(C(this),z.e=r,z):(C(this),r)}var D=j("./util"),q=A.CancellationError,z=D.errorObj,y=j("./catch_filter")(m);return t.prototype.isFinallyHandler=function(){return 0===this.type},x.prototype._resultCancelled=function(){C(this.finallyHandler)},A.prototype._passThrough=function(o,s,u,p){return"function"!=typeof o?this.then():this._then(u,p,void 0,new t(this,s,o),void 0)},A.prototype.lastly=A.prototype["finally"]=function(n){return this._passThrough(n,0,w,w)},A.prototype.tap=function(n){return this._passThrough(n,1,w)},A.prototype.tapCatch=function(F){var J=arguments.length;if(1===J){return this._passThrough(F,1,void 0,w)}var H,I=new Array(J-1),u=0;for(H=0;J-1>H;++H){var p=arguments[H];if(!D.isObject(p)){return A.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+D.classString(p)))}I[u++]=p}I.length=u;var G=arguments[H];return this._passThrough(y(I,G,this),1,void 0,w)},t}},{"./catch_filter":5,"./util":21}],12:[function(j,k,l){k.exports=function(s,u,q,t,p){var m=j("./util");m.canEvaluate,m.tryCatch,m.errorObj;s.join=function(){var n,w=arguments.length-1;if(w>0&&"function"==typeof arguments[w]){n=arguments[w];var v}var x=[].slice.call(arguments);n&&x.pop();var v=new u(x).promise();return void 0!==n?v.spread(n):v}}},{"./util":21}],13:[function(j,k,l){k.exports=function(u,w,t,v,p){var m=j("./util"),q=m.tryCatch;u.method=function(n){if("function"!=typeof n){throw new u.TypeError("expecting a function but got "+m.classString(n))}return function(){var x=new u(w);x._captureStackTrace(),x._pushContext();var y=q(n).apply(this,arguments),s=x._popContext();return p.checkForgottenReturns(y,s,"Promise.method",x),x._resolveFromSyncValue(y),x}},u.attempt=u["try"]=function(s){if("function"!=typeof s){return v("expecting a function but got "+m.classString(s))}var x=new u(w);x._captureStackTrace(),x._pushContext();var z;if(arguments.length>1){p.deprecated("calling Promise.try with more than 1 argument");var n=arguments[1],o=arguments[2];z=m.isArray(n)?q(s).apply(o,n):q(s).call(o,n)}else{z=q(s)()}var y=x._popContext();return p.checkForgottenReturns(z,y,"Promise.try",x),x._resolveFromSyncValue(z),x},u.prototype._resolveFromSyncValue=function(n){n===m.errorObj?this._rejectCallback(n.e,!1):this._resolveCallback(n,!0)}}},{"./util":21}],14:[function(B,x,q){function j(l){return l instanceof Error&&A.getPrototypeOf(l)===Error.prototype}function m(p){var r;if(j(p)){r=new v(p),r.name=p.name,r.message=p.message,r.stack=p.stack;for(var u=A.keys(p),s=0;s<u.length;++s){var l=u[s];k.test(l)||(r[l]=p[l])}return r}return z.markAsOriginatingFromRejection(p),p}function w(l,n){return function(t,s){if(null!==l){if(t){var p=m(C(t));l._attachExtraTrace(p),l._reject(p)}else{if(n){var o=[].slice.call(arguments,1);l._fulfill(o)}else{l._fulfill(s)}}l=null}}}var z=B("./util"),C=z.maybeWrapAsError,y=B("./errors"),v=y.OperationalError,A=B("./es5"),k=/^(?:name|message|stack|cause)$/;x.exports=w},{"./errors":9,"./es5":10,"./util":21}],15:[function(j,k,l){k.exports=function(){function ai(){}function af(m,n){if(null==m||m.constructor!==ah){throw new am("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}if("function"!=typeof n){throw new am("expecting a function but got "+aq.classString(n))}}function ah(m){m!==t&&af(this,m),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(m),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function an(m){this.promise._resolveCallback(m)}function av(m){this.promise._rejectCallback(m,!1)}function ae(m){var n=new ah(t);n._fulfillmentHandler0=m,n._rejectionHandler0=m,n._promise0=m,n._receiver0=m}var at=function(){return new am("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},ak=function(){return new ah.PromiseInspection(this._target())},ad=function(m){return ah.reject(new am(m))},ag={},aq=j("./util");aq.setReflectHandler(ak);var ao=function(){var m=process.domain;return void 0===m?null:m},ar=function(){return null},aw=function(){return{domain:ao(),async:null}},ac=aq.isNode&&aq.nodeSupportsAsyncResource?j("async_hooks").AsyncResource:null,Z=function(){return{domain:ao(),async:new ac("Bluebird::Promise")}},ap=aq.isNode?aw:ar;aq.notEnumerableProp(ah,"_getContext",ap);var aj=function(){ap=Z,aq.notEnumerableProp(ah,"_getContext",Z)},au=function(){ap=aw,aq.notEnumerableProp(ah,"_getContext",aw)},W=j("./es5"),ab=j("./async"),al=new ab;W.defineProperty(ah,"_async",{value:al});var V=j("./errors"),am=ah.TypeError=V.TypeError;ah.RangeError=V.RangeError;var Q=ah.CancellationError=V.CancellationError;ah.TimeoutError=V.TimeoutError,ah.OperationalError=V.OperationalError,ah.RejectionError=V.OperationalError,ah.AggregateError=V.AggregateError;var t=function(){},aa={},D={},z=j("./thenables")(ah,t),G=j("./promise_array")(ah,t,z,ad,ai),I=j("./context")(ah),Y=(I.create,j("./debuggability")(ah,I,aj,au)),M=(Y.CapturedTrace,j("./finally")(ah,z,D)),J=j("./catch_filter")(D),K=j("./nodeback"),X=aq.errorObj,q=aq.tryCatch;return ah.prototype.toString=function(){return"[object Promise]"},ah.prototype.caught=ah.prototype["catch"]=function(p){var u=arguments.length;if(u>1){var w,s=new Array(u-1),v=0;for(w=0;u-1>w;++w){var m=arguments[w];if(!aq.isObject(m)){return ad("Catch statement predicate: expecting an object but got "+aq.classString(m))}s[v++]=m}if(s.length=v,p=arguments[w],"function"!=typeof p){throw new am("The last argument to .catch() must be a function, got "+aq.toString(p))}return this.then(void 0,J(s,p,this))}return this.then(void 0,p)},ah.prototype.reflect=function(){return this._then(ak,ak,void 0,this,void 0)},ah.prototype.then=function(m,o){if(Y.warnings()&&arguments.length>0&&"function"!=typeof m&&"function"!=typeof o){var p=".then() only accepts functions but was passed: "+aq.classString(m);arguments.length>1&&(p+=", "+aq.classString(o)),this._warn(p)}return this._then(m,o,void 0,void 0,void 0)},ah.prototype.done=function(m,o){var p=this._then(m,o,void 0,void 0,void 0);p._setIsFinal()},ah.prototype.spread=function(m){return"function"!=typeof m?ad("expecting a function but got "+aq.classString(m)):this.all()._then(m,void 0,void 0,aa,void 0)},ah.prototype.toJSON=function(){var m={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(m.fulfillmentValue=this.value(),m.isFulfilled=!0):this.isRejected()&&(m.rejectionReason=this.reason(),m.isRejected=!0),m},ah.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new G(this).promise()},ah.prototype.error=function(m){return this.caught(aq.originatesFromRejection,m)},ah.getNewLibraryCopy=k.exports,ah.is=function(m){return m instanceof ah},ah.fromNode=ah.fromCallback=function(m){var p=new ah(t);p._captureStackTrace();var s=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,o=q(m)(K(p,s));return o===X&&p._rejectCallback(o.e,!0),p._isFateSealed()||p._setAsyncGuaranteed(),p},ah.all=function(m){return new G(m).promise()},ah.cast=function(m){var n=z(m);return n instanceof ah||(n=new ah(t),n._captureStackTrace(),n._setFulfilled(),n._rejectionHandler0=m),n},ah.resolve=ah.fulfilled=ah.cast,ah.reject=ah.rejected=function(m){var n=new ah(t);return n._captureStackTrace(),n._rejectCallback(m,!0),n},ah.setScheduler=function(m){if("function"!=typeof m){throw new am("expecting a function but got "+aq.classString(m))}return al.setScheduler(m)},ah.prototype._then=function(H,A,v,m,x){var E=void 0!==x,L=E?x:new ah(t),C=this._target(),w=C._bitField;E||(L._propagateFrom(this,3),L._captureStackTrace(),void 0===m&&0!==(2097152&this._bitField)&&(m=0!==(50397184&w)?this._boundValue():C===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,L));var F=ap();if(0!==(50397184&w)){var o,y,B=C._settlePromiseCtx;0!==(33554432&w)?(y=C._rejectionHandler0,o=H):0!==(16777216&w)?(y=C._fulfillmentHandler0,o=A,C._unsetRejectionIsUnhandled()):(B=C._settlePromiseLateCancellationObserver,y=new Q("late cancellation observer"),C._attachExtraTrace(y),o=A),al.invoke(B,C,{handler:aq.contextBind(F,o),promise:L,receiver:m,value:y})}else{C._addCallbacks(H,A,L,m,F)}return L},ah.prototype._length=function(){return 65535&this._bitField},ah.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},ah.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},ah.prototype._setLength=function(m){this._bitField=-65536&this._bitField|65535&m},ah.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},ah.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},ah.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},ah.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},ah.prototype._isFinal=function(){return(4194304&this._bitField)>0},ah.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},ah.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},ah.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},ah.prototype._setAsyncGuaranteed=function(){if(!al.hasCustomScheduler()){var m=this._bitField;this._bitField=m|(536870912&m)>>2^134217728}},ah.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},ah.prototype._receiverAt=function(m){var n=0===m?this._receiver0:this[4*m-4+3];return n===ag?void 0:void 0===n&&this._isBound()?this._boundValue():n},ah.prototype._promiseAt=function(m){return this[4*m-4+2]},ah.prototype._fulfillmentHandlerAt=function(m){return this[4*m-4+0]},ah.prototype._rejectionHandlerAt=function(m){return this[4*m-4+1]},ah.prototype._boundValue=function(){},ah.prototype._migrateCallback0=function(m){var s=(m._bitField,m._fulfillmentHandler0),v=m._rejectionHandler0,p=m._promise0,u=m._receiverAt(0);void 0===u&&(u=ag),this._addCallbacks(s,v,p,u,null)},ah.prototype._migrateCallbackAt=function(p,u){var w=p._fulfillmentHandlerAt(u),s=p._rejectionHandlerAt(u),v=p._promiseAt(u),m=p._receiverAt(u);void 0===m&&(m=ag),this._addCallbacks(w,s,v,m,null)},ah.prototype._addCallbacks=function(s,v,x,u,w){var p=this._length();if(p>=65531&&(p=0,this._setLength(0)),0===p){this._promise0=x,this._receiver0=u,"function"==typeof s&&(this._fulfillmentHandler0=aq.contextBind(w,s)),"function"==typeof v&&(this._rejectionHandler0=aq.contextBind(w,v))}else{var m=4*p-4;this[m+2]=x,this[m+3]=u,"function"==typeof s&&(this[m+0]=aq.contextBind(w,s)),"function"==typeof v&&(this[m+1]=aq.contextBind(w,v))}return this._setLength(p+1),p},ah.prototype._proxy=function(m,n){this._addCallbacks(void 0,void 0,n,m,null)},ah.prototype._resolveCallback=function(u,x){if(0===(117506048&this._bitField)){if(u===this){return this._rejectCallback(at(),!1)}var y=z(u,this);if(!(y instanceof ah)){return this._fulfill(u)}x&&this._propagateFrom(y,2);var w=y._target();if(w===this){return void this._reject(at())}var p=w._bitField;if(0===(50397184&p)){var o=this._length();o>0&&w._migrateCallback0(this);for(var v=1;o>v;++v){w._migrateCallbackAt(this,v)}this._setFollowing(),this._setLength(0),this._setFollowee(y)}else{if(0!==(33554432&p)){this._fulfill(w._value())}else{if(0!==(16777216&p)){this._reject(w._reason())}else{var m=new Q("late cancellation observer");w._attachExtraTrace(m),this._reject(m)}}}}},ah.prototype._rejectCallback=function(p,u,w){var s=aq.ensureErrorObject(p),v=s===p;if(!v&&!w&&Y.warnings()){var m="a promise was rejected with a non-error: "+aq.classString(p);this._warn(m,!0)}this._attachExtraTrace(s,u?v:!1),this._reject(p)},ah.prototype._resolveFromExecutor=function(m){if(m!==t){var p=this;this._captureStackTrace(),this._pushContext();var s=!0,o=this._execute(m,function(n){p._resolveCallback(n)},function(n){p._rejectCallback(n,s)});s=!1,this._popContext(),void 0!==o&&p._rejectCallback(o,!0)}},ah.prototype._settlePromiseFromHandler=function(s,v,x,u){var w=u._bitField;if(0===(65536&w)){u._pushContext();var p;v===aa?x&&"number"==typeof x.length?p=q(s).apply(this._boundValue(),x):(p=X,p.e=new am("cannot .spread() a non-array: "+aq.classString(x))):p=q(s).call(v,x);var m=u._popContext();w=u._bitField,0===(65536&w)&&(p===D?u._reject(x):p===X?u._rejectCallback(p.e,!1):(Y.checkForgottenReturns(p,m,"",u,this),u._resolveCallback(p)))}},ah.prototype._target=function(){for(var m=this;m._isFollowing();){m=m._followee()}return m},ah.prototype._followee=function(){return this._rejectionHandler0},ah.prototype._setFollowee=function(m){this._rejectionHandler0=m},ah.prototype._settlePromise=function(o,v,u,n){var m=o instanceof ah,p=this._bitField,w=0!==(134217728&p);0!==(65536&p)?(m&&o._invokeInternalOnCancel(),u instanceof M&&u.isFinallyHandler()?(u.cancelPromise=o,q(v).call(u,n)===X&&o._reject(X.e)):v===ak?o._fulfill(ak.call(u)):u instanceof ai?u._promiseCancelled(o):m||o instanceof G?o._cancel():u.cancel()):"function"==typeof v?m?(w&&o._setAsyncGuaranteed(),this._settlePromiseFromHandler(v,u,n,o)):v.call(u,n,o):u instanceof ai?u._isResolved()||(0!==(33554432&p)?u._promiseFulfilled(n,o):u._promiseRejected(n,o)):m&&(w&&o._setAsyncGuaranteed(),0!==(33554432&p)?o._fulfill(n):o._reject(n))},ah.prototype._settlePromiseLateCancellationObserver=function(o){var s=o.handler,u=o.promise,p=o.receiver,m=o.value;"function"==typeof s?u instanceof ah?this._settlePromiseFromHandler(s,p,m,u):s.call(p,m,u):u instanceof ah&&u._reject(m)},ah.prototype._settlePromiseCtx=function(m){this._settlePromise(m.promise,m.handler,m.receiver,m.value)},ah.prototype._settlePromise0=function(m,s,v){var p=this._promise0,u=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(p,m,u,s)},ah.prototype._clearCallbackDataAtIndex=function(m){var n=4*m-4;this[n+2]=this[n+3]=this[n+0]=this[n+1]=void 0},ah.prototype._fulfill=function(m){var o=this._bitField;if(!((117506048&o)>>>16)){if(m===this){var p=at();return this._attachExtraTrace(p),this._reject(p)}this._setFulfilled(),this._rejectionHandler0=m,(65535&o)>0&&(0!==(134217728&o)?this._settlePromises():al.settlePromises(this),this._dereferenceTrace())}},ah.prototype._reject=function(m){var n=this._bitField;if(!((117506048&n)>>>16)){return this._setRejected(),this._fulfillmentHandler0=m,this._isFinal()?al.fatalError(m,aq.isNode):void ((65535&n)>0?al.settlePromises(this):this._ensurePossibleRejectionHandled())}},ah.prototype._fulfillPromises=function(p,u){for(var w=1;p>w;w++){var s=this._fulfillmentHandlerAt(w),v=this._promiseAt(w),m=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(v,s,m,u)}},ah.prototype._rejectPromises=function(p,u){for(var w=1;p>w;w++){var s=this._rejectionHandlerAt(w),v=this._promiseAt(w),m=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(v,s,m,u)}},ah.prototype._settlePromises=function(){var m=this._bitField,p=65535&m;if(p>0){if(0!==(16842752&m)){var s=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,s,m),this._rejectPromises(p,s)}else{var o=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,o,m),this._fulfillPromises(p,o)}this._setLength(0)}this._clearCancellationData()},ah.prototype._settledValue=function(){var m=this._bitField;return 0!==(33554432&m)?this._rejectionHandler0:0!==(16777216&m)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&W.defineProperty(ah.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),ah.defer=ah.pending=function(){Y.deprecated("Promise.defer","new Promise");var m=new ah(t);return{promise:m,resolve:an,reject:av}},aq.notEnumerableProp(ah,"_makeSelfResolutionError",at),j("./method")(ah,t,z,ad,Y),j("./bind")(ah,t,z,Y),j("./cancel")(ah,G,ad,Y),j("./direct_resolve")(ah),j("./synchronous_inspection")(ah),j("./join")(ah,G,z,t,al),ah.Promise=ah,ah.version="3.7.2",aq.toFastProperties(ah),aq.toFastProperties(ah.prototype),ae({a:1}),ae({b:2}),ae({c:3}),ae(1),ae(function(){}),ae(void 0),ae(!1),ae(new ah(t)),Y.setBounds(ab.firstLineError,aq.lastLineError),ah}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21,async_hooks:void 0}],16:[function(j,k,l){k.exports=function(v,q,m,p,u){function x(n){switch(n){case -2:return[];case -3:return{};case -6:return new Map}}function y(n){var o=this._promise=new v(q);n instanceof v&&(o._propagateFrom(n,3),n.suppressUnhandledRejections()),o._setOnCancel(this),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var w=j("./util");w.isArray;return w.inherits(y,u),y.prototype.length=function(){return this._length},y.prototype.promise=function(){return this._promise},y.prototype._init=function t(z,B){var r=m(this._values,this._promise);if(r instanceof v){r=r._target();var A=r._bitField;if(this._values=r,0===(50397184&A)){return this._promise._setAsyncGuaranteed(),r._then(t,this._reject,void 0,this,B)}if(0===(33554432&A)){return 0!==(16777216&A)?this._reject(r._reason()):this._cancel()}r=r._value()}if(r=w.asArray(r),null===r){var o=p("expecting an array or an iterable object but got "+w.classString(r)).reason();return void this._promise._rejectCallback(o,!1)}return 0===r.length?void (-5===B?this._resolveEmptyArray():this._resolve(x(B))):void this._iterate(r)},y.prototype._iterate=function(A){var E=this.getActualLength(A.length);this._length=E,this._values=this.shouldCopyValues()?new Array(E):this._values;for(var C=this._promise,z=!1,r=null,B=0;E>B;++B){var D=m(A[B],C);D instanceof v?(D=D._target(),r=D._bitField):r=null,z?null!==r&&D.suppressUnhandledRejections():null!==r?0===(50397184&r)?(D._proxy(this,B),this._values[B]=D):z=0!==(33554432&r)?this._promiseFulfilled(D._value(),B):0!==(16777216&r)?this._promiseRejected(D._reason(),B):this._promiseCancelled(B):z=this._promiseFulfilled(D,B)}z||C._setAsyncGuaranteed()},y.prototype._isResolved=function(){return null===this._values},y.prototype._resolve=function(n){this._values=null,this._promise._fulfill(n)},y.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},y.prototype._reject=function(n){this._values=null,this._promise._rejectCallback(n,!1)},y.prototype._promiseFulfilled=function(o,r){this._values[r]=o;var s=++this._totalResolved;return s>=this._length?(this._resolve(this._values),!0):!1},y.prototype._promiseCancelled=function(){return this._cancel(),!0},y.prototype._promiseRejected=function(n){return this._totalResolved++,this._reject(n),!0},y.prototype._resultCancelled=function(){if(!this._isResolved()){var o=this._values;if(this._cancel(),o instanceof v){o.cancel()}else{for(var r=0;r<o.length;++r){o[r] instanceof v&&o[r].cancel()}}}},y.prototype.shouldCopyValues=function(){return !0},y.prototype.getActualLength=function(n){return n},y}},{"./util":21}],17:[function(j,l,p){function k(s,v,x,u,w){for(var q=0;w>q;++q){x[q+u]=s[q+v],s[q+v]=void 0}}function m(n){this._capacity=n,this._length=0,this._front=0}m.prototype._willBeOverCapacity=function(n){return this._capacity<n},m.prototype._pushOne=function(o){var q=this.length();this._checkCapacity(q+1);var r=this._front+q&this._capacity-1;this[r]=o,this._length=q+1},m.prototype.push=function(s,v,x){var u=this.length()+3;if(this._willBeOverCapacity(u)){return this._pushOne(s),this._pushOne(v),void this._pushOne(x)}var w=this._front+u-3;this._checkCapacity(u);var q=this._capacity-1;this[w+0&q]=s,this[w+1&q]=v,this[w+2&q]=x,this._length=u},m.prototype.shift=function(){var n=this._front,o=this[n];return this[n]=void 0,this._front=n+1&this._capacity-1,this._length--,o},m.prototype.length=function(){return this._length},m.prototype._checkCapacity=function(n){this._capacity<n&&this._resizeTo(this._capacity<<1)},m.prototype._resizeTo=function(r){var s=this._capacity;this._capacity=r;var v=this._front,u=this._length,q=v+u&s-1;k(this,0,this,s,q)},l.exports=m},{}],18:[function(x,u,m){var j,k=x("./util"),q=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},w=k.getNativePromise();if(k.isNode&&"undefined"==typeof MutationObserver){var y=global.setImmediate,v=process.nextTick;j=k.isRecentNode?function(l){y.call(global,l)}:function(l){v.call(process,l)}}else{if("function"==typeof w&&"function"==typeof w.resolve){var p=w.resolve();j=function(l){p.then(l)}}else{j="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList" in document.documentElement?function(){var s=document.createElement("div"),A={attributes:!0},C=!1,z=document.createElement("div"),B=new MutationObserver(function(){s.classList.toggle("foo"),C=!1});B.observe(z,A);var l=function(){C||(C=!0,z.classList.toggle("foo"))};return function(t){var o=new MutationObserver(function(){o.disconnect(),t()});o.observe(s,A),l()}}():"undefined"!=typeof setImmediate?function(l){setImmediate(l)}:"undefined"!=typeof setTimeout?function(l){setTimeout(l,0)}:q}}u.exports=j},{"./util":21}],19:[function(j,k,l){k.exports=function(q){function w(n){void 0!==n?(n=n._target(),this._bitField=n._bitField,this._settledValueField=n._isFateSealed()?n._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}w.prototype._settledValue=function(){return this._settledValueField};var y=w.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},v=w.prototype.error=w.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},x=w.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},p=w.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},m=w.prototype.isPending=function(){return 0===(50397184&this._bitField)},u=w.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};w.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},q.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},q.prototype._isCancelled=function(){return this._target().__isCancelled()},q.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},q.prototype.isPending=function(){return m.call(this._target())},q.prototype.isRejected=function(){return p.call(this._target())},q.prototype.isFulfilled=function(){return x.call(this._target())},q.prototype.isResolved=function(){return u.call(this._target())},q.prototype.value=function(){return y.call(this._target())},q.prototype.reason=function(){var n=this._target();return n._unsetRejectionIsUnhandled(),v.call(n)},q.prototype._value=function(){return this._settledValue()},q.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},q.PromiseInspection=w}},{}],20:[function(j,k,l){k.exports=function(y,v){function m(n,p){if(B(n)){if(n instanceof y){return n}var s=x(n);if(s===w){p&&p._pushContext();var u=y.reject(s.e);return p&&p._popContext(),u}if("function"==typeof s){if(A(n)){var u=new y(v);return n._then(u._fulfill,u._reject,void 0,u,null),u}return C(n,s,p)}}return n}function t(n){return n.then}function x(n){try{return t(n)}catch(o){return w.e=o,w}}function A(n){try{return q.call(n,"_promise0")}catch(o){return !1}}function C(J,n,E){function F(o){K&&(K._resolveCallback(o),K=null)}function H(o){K&&(K._rejectCallback(o,D,!0),K=null)}var K=new y(v),I=K;E&&E._pushContext(),K._captureStackTrace(),E&&E._popContext();var D=!0,G=z.tryCatch(n).call(J,F,H);return D=!1,K&&G===w&&(K._rejectCallback(G.e,!0,!0),K=null),I}var z=j("./util"),w=z.errorObj,B=z.isObject,q={}.hasOwnProperty;return m}},{"./util":21}],21:[function(an,aC,at){function ap(){try{var j=K;return K=null,j.apply(this,arguments)}catch(k){return aj.e=k,aj}}function ar(j){return K=j,ap}function ay(j){return null==j||j===!0||j===!1||"string"==typeof j||"number"==typeof j}function aG(j){return"function"==typeof j||"object"==typeof j&&null!==j}function ao(j){return ay(j)?new Error(al(j)):j}function aE(j,l){var p,k=j.length,m=new Array(k+1);for(p=0;k>p;++p){m[p]=j[p]}return m[p]=l,m}function av(j,l,m){if(!ac.isES5){return{}.hasOwnProperty.call(j,l)?j[l]:void 0}var k=Object.getOwnPropertyDescriptor(j,l);return null!=k?null==k.get&&null==k.set?k.value:m:void 0}function am(j,l,m){if(ay(j)){return j}var k={value:m,configurable:!0,enumerable:!1,writable:!0};return ac.defineProperty(j,l,k),j}function aq(j){throw j}function aB(k){try{if("function"==typeof k){var m=ac.names(k.prototype),s=ac.isES5&&m.length>1,l=m.length>0&&!(1===m.length&&"constructor"===m[0]),p=ah.test(k+"")&&ac.names(k).length>0;if(s||l||p){return !0}}return !1}catch(j){return !1}}function az(j){function l(){}function m(){return typeof k.foo}l.prototype=j;var k=new l;return m(),m(),j}function aD(j){return ab.test(j)}function aH(j,l,p){for(var k=new Array(j),m=0;j>m;++m){k[m]=l+m+p}return k}function al(j){try{return j+""}catch(k){return"[no string representation]"}}function ai(j){return j instanceof Error||null!==j&&"object"==typeof j&&"string"==typeof j.message&&"string"==typeof j.name}function aA(j){try{am(j,"isOperational",!0)}catch(k){}}function au(j){return null==j?!1:j instanceof Error.__BluebirdErrorTypes__.OperationalError||j.isOperational===!0}function aF(j){return ai(j)&&ac.propertyIsWritable(j,"stack")}function af(j){return{}.toString.call(j)}function ak(l,p,u){for(var m=ac.names(l),s=0;s<m.length;++s){var k=m[s];if(u(k)){try{ac.defineProperty(p,k,ac.getDescriptor(l,k))}catch(j){}}}}function aw(j){return aa?process.env[j]:void 0}function ad(){if("function"==typeof Promise){try{var j=new Promise(function(){});if("[object Promise]"===af(j)){return Promise}}catch(k){}}}function ax(j,l){if(null===j||"function"!=typeof l||l===ae){return l}null!==j.domain&&(l=j.domain.bind(l));var m=j.async;if(null!==m){var k=l;l=function(){var n=new Array(2).concat([].slice.call(arguments));return n[0]=k,n[1]=this,m.runInAsyncScope.apply(m,n)}}return l}var ac=an("./es5"),G="undefined"==typeof navigator,aj={e:{}},K,J="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,W=function(j,l){function m(){this.constructor=j,this.constructor$=l;for(var o in l.prototype){k.call(l.prototype,o)&&"$"!==o.charAt(o.length-1)&&(this[o+"$"]=l.prototype[o])}}var k={}.hasOwnProperty;return m.prototype=l.prototype,j.prototype=new m,j.prototype},X=function(){var j=[Array.prototype,Object.prototype,Function.prototype],l=function(o){for(var p=0;p<j.length;++p){if(j[p]===o){return !0}}return !1};if(ac.isES5){var m=Object.getOwnPropertyNames;return function(v){for(var x=[],y=Object.create(null);null!=v&&!l(v);){var u;try{u=m(v)}catch(p){return x}for(var w=0;w<u.length;++w){var A=u[w];if(!y[A]){y[A]=!0;var n=Object.getOwnPropertyDescriptor(v,A);null!=n&&null==n.get&&null==n.set&&x.push(A)}}v=ac.getPrototypeOf(v)}return x}}var k={}.hasOwnProperty;return function(t){if(l(t)){return[]}var s=[];j:for(var r in t){if(k.call(t,r)){s.push(r)}else{for(var p=0;p<j.length;++p){if(k.call(j[p],r)){continue j}}s.push(r)}}return s}}(),ah=/this\s*\.\s*\S+\s*=/,ab=/^[a-z$_][a-z$_0-9]*$/i,Y=function(){return"stack" in new Error?function(j){return aF(j)?j:new Error(al(j))}:function(j){if(aF(j)){return j}try{throw new Error(al(j))}catch(k){return k}}}(),Z=function(j){return ac.isArray(j)?j:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var ag="function"==typeof Array.from?function(j){return Array.from(j)}:function(j){for(var l,m=[],k=j[Symbol.iterator]();!(l=k.next()).done;){m.push(l.value)}return m};Z=function(j){return ac.isArray(j)?j:null!=j&&"function"==typeof j[Symbol.iterator]?ag(j):null}}var z="undefined"!=typeof process&&"[object process]"===af(process).toLowerCase(),aa="undefined"!=typeof process&&"undefined"!=typeof process.env,ae,q={setReflectHandler:function(j){ae=j},isClass:aB,isIdentifier:aD,inheritedDataKeys:X,getDataPropertyOrDefault:av,thrower:aq,isArray:ac.isArray,asArray:Z,notEnumerableProp:am,isPrimitive:ay,isObject:aG,isError:ai,canEvaluate:G,errorObj:aj,tryCatch:ar,inherits:W,withAppended:aE,maybeWrapAsError:ao,toFastProperties:az,filledRange:aH,toString:al,canAttachTrace:aF,ensureErrorObject:Y,originatesFromRejection:au,markAsOriginatingFromRejection:aA,classString:af,copyDescriptors:ak,isNode:z,hasEnvVariables:aa,env:aw,global:J,getNativePromise:ad,contextBind:ax};q.isRecentNode=q.isNode&&function(){var j;return process.versions&&process.versions.node?j=process.versions.node.split(".").map(Number):process.version&&(j=process.version.split(".").map(Number)),0===j[0]&&j[1]>10||j[0]>0}(),q.nodeSupportsAsyncResource=q.isNode&&function(){var k=!1;try{var l=an("async_hooks").AsyncResource;k="function"==typeof l.prototype.runInAsyncScope}catch(j){k=!1}return k}(),q.isNode&&q.toFastProperties(process);try{throw new Error}catch(M){q.lastLineError=M}aC.exports=q},{"./es5":10,async_hooks:void 0}]},{},[3])(3)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);e.Promise=Promise;if(!e.nativePromise){e.nativePromise=e.Promise}})(Dynamsoft);(function(b){var a=20201126;if(b._navInfo_ver){if(b.isNumber(b._navInfo_ver)&&b._navInfo_ver>=a){return}}b._navInfo_ver=a;b.getNavInfoSync=function(){var p=!1,l=!0,o=b.win,r=b.doc,e=r.location.protocol,n=(e==="https:"),k=(e!=="https:"&&e!=="http:"),f=false,h=false,s=true,m=true,g=false,j=0,q=0,d=o.JSON,i;if(Dynamsoft.navInfo){i=Dynamsoft.navInfo}else{b.getNavInfo();var c=navigator;i=b.getNavInfoByUserAgent(c.userAgent,c.platform)}if("userAgentData" in navigator){g=i.bMobile||navigator.userAgentData.mobile}else{var i=Dynamsoft.navInfo;f=i.bIE;h=i.bEdge;m=i.bGecko;g=i.bMobile||i.bPad||i.bChromeOS;if(f){j=i.strBrowserVersion;q=i.IEMode}s=i.bHTML5Edition}return{host:o,bSSL:n,bFileSystem:k,bIE:f,bEdge:h,bGecko:m,bMobile:g,IEVersion:j,IEMode:q,bHTML5Edition:s,nodejs:p}};b.getNavInfoByUserAgent=function(O,M){var P="",ab=!1,F=!0,U=b.win,j=b.doc,ah=j&&j.documentElement,W,T=O.toLowerCase(),D=M.toLowerCase(),X=(/cros/).test(T),w=(/android/g).test(T),Z=(/iphone/g).test(T)||(/iphone/g).test(D),k=(/macintosh/).test(T),x=(/ipad/g).test(T)||((k||(D=="macintel"))&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1),p=(/ucweb|ucbrowser/g).test(T),K=!p&&(/nexus/g).test(T)&&(/version\/[\d.]+.*safari\//g).test(T),af=(/playbook/g).test(T),R=(/hp-tablet/g).test(T),C=(/blackberry|bb10/g).test(T),q=(/symbian/g).test(T),E=(/windows phone/g).test(T),G=(/mobile/g).test(T);var s=af||x||R,V=Z||K||C||q||E||w||G,c=!V&&!s&&!X,Q=c&&(/win32|win64|windows/).test(D),n=Q&&(/win64|x64/).test(T),I=c&&(/mac68k|macppc|macintosh|macintel/).test(T),ae=c&&(/linux/).test(D),o=(D=="win64")||(/wow64|x86_64|win64|x64/).test(T),m=(/wow64/g).test(T),A=T.indexOf("msie "),J=T.indexOf("trident"),H=T.indexOf("rv:"),v=ab,r=(/opera|opr/g).test(T),L=(/360se/g).test(T),S=(/maxthon/g).test(T),y=(/tencenttraveler|qqbrowser/g).test(T),N=(/the world/g).test(T),Y=(/metasr/g).test(T),h=(/avant/g).test(T),B=(/firefox|fxios/g).test(T),t=!B&&(/edge\/|edga\/|edgios\/|edg\//g).test(T),f=!(C||af||p||r||t)&&(/chrome|crios/g).test(T),e=Q&&!B&&!t&&!f&&(A!=-1||J!=-1||H!=-1),l="",d=0,u=(/gecko/g).test(T),g=V||s,aa=P,z=ab,ad=U.JSON;if((I||Z||x||Q||C||af||K)&&!p&&!r&&!t&&!e&&!B){W=T.match(/version\/([\d.]+).*safari\//);if(W){if(C||af||K){}else{v=F;f=ab}aa=W[1]}}if(t){var ag=T.indexOf("edge/");if(ag>-1){ag+=5}else{ag=T.indexOf("edg/");if(ag>-1){ag+=4}else{ag=T.indexOf("edga/");if(ag>-1){ag+=5}else{ag=T.indexOf("edgios/");if(ag>-1){ag+=7}}}}if(ag>-1){aa=T.slice(ag);W=aa.indexOf(" ");if(W>-1){aa=aa.slice(0,W)}}g=F}else{if(B){W=T.indexOf("firefox/");g=F;if(W>-1){W=T.slice(W+8);var ac=W.indexOf(" ");if(ac>-1){W=W.slice(0,ac)}aa=W;ac=W.indexOf(".");if(ac>-1){W=aa.slice(0,ac)}if(W<27){g=ab}}else{if(Z||x){W=T.indexOf("fxios/");if(W>-1){W=T.slice(W+6);W=W.slice(0,W.indexOf(" "));aa=W}}}}else{if(e){if(A!=-1){W=T.slice(A+5);W=W.slice(0,W.indexOf(";"));l=W}else{if(H!=-1){W=T.slice(H+3);W=W.slice(0,W.indexOf(";"));W=W.slice(0,W.indexOf(")"));l=W}else{if(J!=-1){W=T.slice(J+7);W=W.slice(0,W.indexOf(";"));l=W}}}if(l===""||l>8){g=F}aa=W}else{if(v){W=aa.indexOf(".");g=F;if(W>-1){W=aa.slice(0,W);if(W<7){g=ab}}}else{if(p){W=T.indexOf("ucweb");if(W>-1){aa=T.slice(W+5)}else{W=T.indexOf("ucbrowser/");if(W>-1){aa=T.slice(W+10);W=aa.indexOf(" ");if(W>-1){aa=aa.slice(0,W)}}}g=F}else{if(r){W=T.indexOf("version/");if(W>-1){aa=T.slice(W+8)}else{W=T.indexOf("opr/");if(W>-1){aa=T.slice(W+4)}}g=F}else{if(q){W=T.indexOf("browserng/");if(W>-1){aa=T.slice(W+10)}g=F}else{if(E){W=T.indexOf("iemobile/");if(W>-1){aa=T.slice(W+9)}g=F}else{if(f){var i=T.indexOf("chrome/");if(i>-1){aa=T.slice(i+7);W=aa.indexOf(" ");if(W>-1){aa=aa.slice(0,W)}}else{i=T.indexOf("crios/");if(i>-1){aa=T.slice(i+6);W=aa.indexOf(" ");if(W>-1){aa=aa.slice(0,W)}}}g=F;W=aa.indexOf(".");if(W>-1){W=aa.slice(0,W);if(W<27){g=ab}}}}}}}}}}}if(t||e){if(j.documentMode){d=j.documentMode}else{d=5;if(j.compatMode){if(j.compatMode=="CSS1Compat"){d=7}}}}if(ah&&ah.querySelector&&(!e||e&&(aa>8))){z=F}if(e&&aa<9){ad=null}return{bWin:Q,bMac:I,bLinux:ae,bMobile:V,bPad:s,bChromeOS:X,bAndroid:w,biPhone:Z,biPad:x,bWin64:n,bWOW64:m,bOSx64:o,bIE:e,bEdge:t,bChrome:f,bFirefox:B,bSafari:v,bOpera:r,bNexus:K,bUC:p,b360SE:L,bMaxthon:S,bTencentTraveler:y,bTheWorld:N,bMetaSr:Y,bAvant:h,bGecko:u,bHTML5Edition:g,strBrowserVersion:aa,IEMode:d,bQuerySelectorSupported:z,nativeJson:ad,scrollBarWidth:ab}};b.getNavInfoByUAData=function(d){var c=function(l){var g=navigator.userAgentData,i=g.mobile,k,p,h=l.platform.toLowerCase(),n=l.platformVersion,j=l.architecture.toLowerCase(),f=false,m=(h.indexOf("mac")>=0);if(!i){var e=navigator.userAgent.toLowerCase();if((/mobile/g).test(e)){i=true}}if("brands" in g&&b.isArray(g.brands)&&g.brands.length>0){k=g.brands[0].brand.toLowerCase();p=g.brands[0].version}else{if("uaList" in g&&b.isArray(g.uaList)&&g.uaList.length>0){k=g.uaList[0].brand.toLowerCase();p=g.uaList[0].version}}if(m){var o=n.split("_");if(o.length>0&&o[0]>=15){f=true}}else{if(j.indexOf("win64")>=0||j.indexOf("x86_64")>=0||j.indexOf("x64")>=0){f=true}}return{bWin:(h=="windows"),bMac:m,bLinux:(h=="linux"),bAndroid:false,bMobile:i,bPad:false,bChromeOS:false,bOSx64:f,bIE:false,bEdge:false,bChrome:true,bFirefox:false,bSafari:false,bOpera:false,bGecko:true,bHTML5Edition:true,strBrowserVersion:p,IEMode:false,bQuerySelectorSupported:true,nativeJson:true,scrollBarWidth:false}};if(d){return Promise.resolve(function(){return c(d)})}return navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture"]).then(c)};b.asyncGetNavInfo=function(){if(Dynamsoft.navInfo){return Promise.resolve(Dynamsoft.navInfo)}if("userAgentData" in navigator){return b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d;return d})}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Promise.resolve(Dynamsoft.navInfo)}};b.getNavInfo=function(){if(Dynamsoft.navInfo){return Dynamsoft.navInfo}if("userAgentData" in navigator){b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d});return false}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Dynamsoft.navInfo}};Dynamsoft.navInfoSync=b.getNavInfoSync()})(Dynamsoft.Lib);(function(a,h){var g=a.Lib,b=a.navInfoSync,c=20200521;if(g._ls_ver){if(g.isNumber(g._ls_ver)&&g._ls_ver>=c){return}}g._ls_ver=c;var i=false,f=false,j;if((b.bEdge&&b.bFileSystem)||(b.bIE&&b.IEVersion<8)){}else{try{f=window.localStorage;i=f?true:false}catch(d){f=false}}g.LS={isSupportLS:function(){return i},item:function(k,l,e){var m=null;if(this.isSupportLS()){if(l){f.setItem(k,l);m=l}else{m=f.getItem(k)}if(m===null){return e}return m}else{return e}},removeItem:function(e){if(this.isSupportLS()){f.removeItem(e)}else{return false}return true}}})(Dynamsoft);(function(lib,nil){var _utilities_ver=20200708;if(lib._utilities_ver){if(lib._utilities_ver>=_utilities_ver){return}}lib._utilities_ver=_utilities_ver;var AP=Array.prototype,win=lib.win,doc=lib.doc,navInfoSync=Dynamsoft.navInfoSync,EMPTY_STR="",FALSE=!1,TRUE=!0,mix=lib.mix;var RE_TRIM=/^[\s\xa0]+|[\s\xa0]+$/g,indexOf=AP.indexOf,lastIndexOf=AP.lastIndexOf,filter=AP.filter,every=AP.every,some=AP.some,map=AP.map;var logger=lib.getLogger(),location=win.location,bDomReady=0,callbacks=[],POLL_RETIRES=500,POLL_INTERVAL=40,RE_ID_STR=/^#?([\w-]+)$/,RE_NOT_WHITESPACE=/\S/,standardEventModel=!!(doc&&doc.addEventListener),DOM_READY_EVENT="DOMContentLoaded",READY_STATE_CHANGE_EVENT="readystatechange",LOAD_EVENT="load",COMPLETE="complete",addEventListener=standardEventModel?function(el,type,fn){el.addEventListener(type,fn,false)}:function(el,type,fn){el.attachEvent("on"+type,fn)},removeEventListener=standardEventModel?function(el,type,fn){el.removeEventListener(type,fn,false)}:function(el,type,fn){el.detachEvent("on"+type,fn)};lib.mix(lib,{isWindow:function(obj){return obj!=null&&obj==obj.window},globalEval:function(data){if(data&&RE_NOT_WHITESPACE.test(data)){if(win.execScript){win.execScript(data)}else{(function(data){win.eval.call(win,data)})(data)}}},domReady:function(fn){if(bDomReady){try{fn(lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}else{callbacks.push(fn)}return this}});lib.ready=lib.domReady;function fireReady(){for(var i=0;i<callbacks.length;i++){try{callbacks[i](lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}}lib.checkDomReady=function(){if(!bDomReady){bDomReady=1;lib.asyncGetNavInfo().then(function(navInfo){if(doc&&!navInfoSync.nodejs){removeEventListener(win,LOAD_EVENT,lib.checkDomReady)}fireReady()})}};function bindReady(){if(!doc||doc.readyState===COMPLETE){lib.checkDomReady();return}addEventListener(win,LOAD_EVENT,lib.checkDomReady);if(standardEventModel){var fnDomReady=function(){removeEventListener(doc,DOM_READY_EVENT,fnDomReady);lib.checkDomReady()};addEventListener(doc,DOM_READY_EVENT,fnDomReady)}else{var stateChange=function(){if(doc.readyState===COMPLETE){removeEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);lib.checkDomReady()}};addEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);var notframe,docElem=doc&&doc.documentElement,doScroll=docElem&&docElem.doScroll;try{notframe=(win.frameElement===null)}catch(e){notframe=false}if(doScroll&&notframe){var readyScroll=function(){try{doScroll("left");setTimeout(lib.checkDomReady,30)}catch(ex){setTimeout(readyScroll,POLL_INTERVAL)}};readyScroll()}}}bindReady();if(Dynamsoft.navInfoSync.bIE){try{doc.execCommand("BackgroundImageCache",false,true)}catch(e){}}})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._domUtil_ver){if(d._domUtil_ver>=c){return}}d._domUtil_ver=c;var b="",a="none";d.mix(d,{get:function(e){return d.doc.getElementById(e)},hide:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=a}},show:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=b}},toggle:function(f){var e=d.isString(f)?d.get(f):f;if(e){if(e.style.display===a){e.style.display=b}else{e.style.display=a}}},empty:function(e){if(!e){return}while(e.firstChild){e.removeChild(e.firstChild)}}})})(Dynamsoft.Lib);(function(a){var c=a.Lib;var b=20200521;if(c._color_ver){if(c.isNumber(c._color_ver)&&c._color_ver>=b){return}}c._color_ver=b;c.colorStrToInt=function(h){var d="0x",f,e;if(/^(rgb|RGB)/.test(h)){var g=h.replace(/[^\d,.]/g,"").split(",");for(e=0;e<3;++e){f=Number(g[e]).toString(16);if(f.length==1){f="0"+f}d+=f}if(g.length==4){f=Math.round(Number(g[e])*255).toString(16);if(f.length==1){f="0"+f}d+=f}else{d+="ff"}}else{if(h=="transparent"){d+="00000000"}else{if(/^#[0-9a-fA-f]{6}$/.test(h)){d+=h.replace(/#/,"")+"ff"}else{if(/^#[0-9a-fA-f]{3}$/.test(h)){for(e=0;e<3;++e){d+=h[e]+h[e]}d+="ff"}else{d="-1"}}}}return Number(d)};c.IntToColorStr=function(d){if(d>4294967295||d<0){return null}var e;if(!Dynamsoft.navInfoSync.bHTML5Edition){if(d%256==0){e="transparent"}else{e=Math.floor(d/256).toString(16);while(e.length!=6){e="0"+e}e="#"+e}}else{e="rgba("+Math.floor(d/16777216)+","+Math.floor(d/65536)%256+","+Math.floor(d/256)%256+","+(d%256)/255+")"}return e}})(Dynamsoft);(function(b,a){var d=b.Lib,c=20210112;if(d._ajax_ver){if(d.isNumber(d._ajax_ver)&&d._ajax_ver>=c){return}}d._ajax_ver=c;d.asyncGetNavInfo().then(function(h){var s=h.bIE&&(parseInt(h.strBrowserVersion)<=9),u=h.bIE&&(parseInt(h.strBrowserVersion)<=10),p=d.win,n=d.each,m=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,A=1,H=2,g=3,K=200,f=204,l=300,w=304,r=404,j=1223,x=500,C="open error: ",z="send error: ",k=new d.Uri(location.href),G=k&&m.test(k.getScheme()),I=false,o=function(){try{return new p.XMLHttpRequest()}catch(M){}},B=function(){try{var M=false;n(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(O){try{return(M=new p.ActiveXObject(O))}catch(P){d.error("new xhr error: "+P.message)}});return M}catch(N){}},v=(!G&&p.XMLHttpRequest)?("withCredentials" in (o()||[])):false,E=p.ActiveXObject?function(M){if(s){return B()}if(!v&&M&&I){return new I()}return !G&&o()||B()}:o,t=function(M){return I&&(M instanceof I)},q=/^(?:GET|HEAD)$/,e=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,L={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},D=a,F;if(self&&self.fetch){F=self.fetch}else{F=p.fetch}if(u){D=d.noop}function J(){}d.mix(J.prototype,{url:false,onSuccess:false,onError:false,onComplete:false,method:"GET",async:true,xhrFields:false,mimeType:false,username:false,password:false,data:false,dataType:"text",headers:false,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:false,afterSend:false,timeout:0,cache:true,crossDomain:false,retry:0,setRequestHeader:function(N,O){var M=this;M.headers[N]=O;return M},getAllResponseHeaders:function(){var M=this;return M.state===H?M.responseHeadersString:null},getNativeXhr:function(){var M=this;return M.nativeXhr},getResponseHeader:function(O){var N,M=this,P;O=O.toLowerCase();if(M.state===H){if(!(P=M.responseHeaders)){P=M.responseHeaders={};while((N=e.exec(M.responseHeadersString))){P[N[1].toLowerCase()]=N[2]}}N=P[O]}return N===undefined?null:N},overrideMimeType:function(N){var M=this;if(!M.state){M.mimeType=N}return M},abort:function(N){var M=this;N=N||"abort";M.state=g;M.status=0;M.statusText=N;if(M.nativeXhr){M.nativeXhr.abort()}M._callback();return M},_ioReady:function(N,Q){var O=this,M=false;if(O.state===H||O.state===g){return}if(O.state===A){O.state=H}O.readyState=4;if(N>=K&&N<l||N===w){if(N===w){Q="not modified";M=true}else{Q="success";M=true}}else{if(N<0){N=0}}try{if(N>=K){O.handleResponseData()}}catch(P){d.error(P.stack||P,"error");Q=P.message||"parser error"}if(N<K||!M){if(O.retry>0){O.retry=O.retry-1;setTimeout(function(){O.sendInternal()},200);return}}O.status=N;O.statusText=Q;O._callback(M)},_callback:function(M){var N=this,O=N.timeoutTimer;if(O){clearTimeout(O);N.timeoutTimer=0}n([M?N.onSuccess:N.onError,N.onComplete],function(P){if(d.isFunction(P)){P.apply(N.context,[N.responseData,N.statusText,N])}});N.responseData=null},handleResponseData:function(){var T=this,U,S=T.dataType,R=T.nativeXhr;if(S==="blob"||S==="arraybuffer"){if(s){var Q,O;if("responseBody" in R){Q=R.responseBody;O=dsVbsBinGetLength(Q);U=(new VBArray(dsVbsBinGetBytes(Q,0,O))).toArray()}else{var M;U=[];Q=R.responseText;O=Q.length;for(M=0;M<O;++M){U.push(Q.charCodeAt(M)&255)}}Q=null}else{if(!!p.Blob){U=R.response}else{if("responseBody" in R){U=R.responseBody}else{U=R.responseText}}}}else{if(S=="json"){if(R.responseType&&R.responseType.toLowerCase()=="json"){U=R.response}else{U=R.responseText?(((p.JSON&&p.JSON.parse)?p.JSON.parse:d.parse)(R.responseText)):{}}}else{if(S==="user-defined"){U=R.response!==undefined?R.response:R.responseText}else{T.responseText=U=R.responseText||"";try{var N=R.responseXML;if(N&&N.documentElement){T.responseXML=N}}catch(P){}}}}T.responseData=U},sendInternal:function(M){var T=this,ac,X,N,O,V,Y,W,ab,P,U,ad,R;ac=T._setup(M);N=ac.method;if(d.isString(N)){N=N.toUpperCase()}if(N=="POST"){Y=ac.contentType}else{Y=false}O=ac.url;V=ac.dataType;P=ac.mimeType;if(!d.isString(O)){return}T.nativeXhr=W=E(ac.crossDomain);if(!W){return}try{T.state=A;if(ac.username){W.open(N,O,ac.async,ac.username,ac.password)}else{W.open(N,O,ac.async)}if((ac.async||h.bIE)&&V&&V!="user-defined"&&("responseType" in W)){try{W.responseType=V}catch(aa){}}}catch(Z){if(T.state<2){d.error(Z.stack||Z,"error");T._ioReady(-1,C+(d.isNumber(Z.number)?"("+Z.number+")":"")+(Z.message||""))}else{d.error(Z)}return}ab=ac.xhrFields||{};if("withCredentials" in ab){if(!v){delete ab.withCredentials}}n(ab,function(ag,ae){try{W[ae]=ag}catch(af){d.error(af)}});if(P&&W.overrideMimeType){W.overrideMimeType(P)}U=ac.headers||{};var Q=U["X-Requested-With"];if(Q===false){delete U["X-Requested-With"]}if("setRequestHeader" in W){if(Y){W.setRequestHeader("Content-Type",ac.contentType)}W.setRequestHeader("Accept",V&&L[V]?L[V]+(V==="*"?"":", */*; q=0.01"):L["*"]);n(U,function(af,ae){W.setRequestHeader(ae,af)})}if(!ac.cache){W.setRequestHeader("If-Modified-Since","0");W.setRequestHeader("Cache-Control","no-cache")}ad=!q.test(ac.method);R=ad&&ac.data||null;if(ad&&s){R=ac.data}if(ac.async&&ac.timeout>0){if(ac.timeout<300){ac.timeout=300}T.timeoutTimer=setTimeout(function(){T.abort("timeout")},ac.timeout)}try{T.state=A;if(d.isFunction(T.beforeSend)){var S=T.beforeSend(W,T);if(S===false){T.abort("cancel");return}}W.send(R);R=null;ac.data=null;if(d.isFunction(T.afterSend)){T.afterSend(T)}}catch(aa){if(T.state<2){d.error(aa.stack||aa,"error");T._ioReady(-1,z+(aa.message||""))}else{d.error(aa)}}if(!ac.async||W.readyState===4){T._xhrCallback()}else{if(t(W)){W.onload=function(){W.readyState=4;W.status=K;T._xhrCallback()};W.onerror=function(){W.readyState=4;W.status=x;T._xhrCallback()}}else{W.onreadystatechange=function(){T._xhrCallback()}}}},_xhrCallback:function(N,S){var O=this,P=O.nativeXhr;try{if(P.readyState===4||S){if(t(P)){P.onerror=D;P.onload=D}else{P.onreadystatechange=D}if(S){if(P.readyState!==4){P.abort()}}else{if(!t(P)){O.responseHeadersString=P.getAllResponseHeaders()}var M=P.status,R;try{R=P.statusText}catch(Q){d.error("xhr statusText error: ");d.error(Q);R=""}O._ioReady(M,R)}}}catch(Q){d.error(Q.stack||Q,"error");P.onreadystatechange=D;if(!S){O._ioReady(-1,Q.message||"process error")}}},_setup:function(Q){var N=this,M,P,S,O,R;if(Q){N.context=Q.context;delete Q.context;if(Q instanceof J){Q=Q.config}N.config=Q;O=Q.url;if(d.startsWith(O,"http://")||d.startsWith(O,"https://")){R=new d.Uri(O)}else{if(d.startsWith(O,"//")){Q.url=O="http:"+O}R=k.resolve(O)}if(!Q.dataType){M="text"}else{M=Q.dataType.toLowerCase()}Q.dataType=M;if(!Q.method){Q.method="GET"}else{Q.method=Q.method.toUpperCase()}if(!("crossDomain" in Q)){Q.crossDomain=!R.isSameOriginAs(k)}S=Q.headers;for(P in S){if(d.isUndefined(S[P])){delete S[P]}}d.mix(N,Q)}N.state=A;return N}});function i(N){if(!N||!d.isString(N.url)){d.log("the url is error.");return}var M=new J();M.sendInternal(N);return M}d.mix(d,{ajax:i,io:{get:function(N,O,P,M){return i({method:"GET",url:N,onSuccess:O,onError:P,dataType:M})},post:function(N,P,O,Q,M){return i({method:"POST",data:P,url:N,onSuccess:O,onError:Q,dataType:M})},put:function(N,P,O,Q,M){return i({method:"PUT",data:P,url:N,onSuccess:O,onError:Q,dataType:M})}}});if(F){d.fetch=function(P,O){var M="text",R=!1;if(O){if(O.dataType){M=O.dataType}if(O.fetchRaw){R=!0}}var N,Q;N=F(P,O);if(Promise!=d.nativePromise){Q=Promise;Promise=d.nativePromise;N=N.then(function(S){Promise=Q;if(S.ok){return S}else{throw {httpCode:S.status,errorString:S.statusText}}})}else{N=N.then(function(S){if(S.ok){return S}else{throw {httpCode:S.status,errorString:S.statusText}}})}if(R){return N}if(M=="blob"){N=N.then(function(S){return S.blob()})}else{if(M=="json"){N=N.then(function(S){return S.json()})}else{if(M=="arraybuffer"){N=N.then(function(S){return S.arrayBuffer()})}else{N=N.then(function(S){return S.text()})}}}return N}}else{if(s){d.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join(""))}var y;if(Promise!=d.nativePromise){y=Promise;Promise=d.nativePromise}d.fetch=function(N,M){return new Promise(function(S,Q){var P=function(W,U,V){if(y){Promise=y}S(W)},T=function(W,U,V){if(y){Promise=y}Q({httpCode:V.status,errorString:U})},O={url:N,onSuccess:P,onError:T,dataType:"text"},R=false;if(M){if(M.method){O.method=M.method}if(M.body){O.data=M.body}if(M.headers){n(M.headers,function(V,U){if(U.toLowerCase()=="content-type"){R=true}O.headers[U]=V})}if(M.dataType){O.dataType=M.dataType}}if(R){O.contentType=false}if(O.dataType=="blob"&&s){O.mimeType="text/plain; charset=x-user-defined"}d.ajax(O)})}}})})(Dynamsoft);(function(c){var b=20200521;if(c._customEvt_ver){if(c.isNumber(c._customEvt_ver)&&c._customEvt_ver>=b){return}}c._customEvt_ver=b;var a={fire:function(f){var d=this,e;d.exec=d.exec||{};f=f.toLowerCase();e=Array.prototype.slice.call(arguments,1);c.each(d.exec[f]||[],function(i){var h=i.f,g=i.c||d;try{h.apply(g,e)}catch(j){c.log(j)}})},on:function(g,f,d){var e=this;e.exec=e.exec||{};g=g.toLowerCase();e.exec[g]=e.exec[g]||[];e.exec[g].push({f:f,c:d})},off:function(j,h,k){var f=this,e=f.exec;if(!e){return}if(!j){f.exec=null;return}j=j.toLowerCase();if(!h){e[j]=null;return}var d=e[j]||[];for(var g=d.length-1;g>=0;g--){if(d[g]===h){d.splice(g,1)}}}};c.obj={customEvent:a}})(Dynamsoft.Lib);(function(b){var g=b.Lib,e=!1,c=!0,f=g.win.document,d;var a=20200521;if(g._evtBase_ver){if(g.isNumber(g._evtBase_ver)&&g._evtBase_ver>=a){return}}g._evtBase_ver=a;d=function(h){return(Dynamsoft.navInfoSync.bGecko&&"mousewheel"===h)?"DOMMouseScroll":h};g.mix(g,{addEventListener:f.addEventListener?function(i,k,j){var h=d(k);if(i){i.addEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.attachEvent("on"+h,j)}},removeEventListener:f.removeEventListener?function(i,k,j){var h=d(k);if(i){i.removeEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.detachEvent("on"+h,j)}},stopPropagation:function(h){var i=h||window.event;if(i.preventDefault){i.preventDefault()}if(i.stopPropagation){i.stopPropagation()}i.returnValue=false;i.cancelBubble=true},fireEvent:function(h,i){var j;if(f.createEvent){j=f.createEvent("HTMLEvents");j.initEvent(h,c,c);if(i.dispatchEvent){i.dispatchEvent(j)}}else{if(f.createEventObject){j=f.createEventObject();j.bubbles=c;j.cancelable=c;i.fireEvent(h,j)}else{j=new Event(h);if(i.dispatchEvent){i.dispatchEvent(j)}}}}})})(Dynamsoft);(function(f,b){var e=20200716;if(f._loadbase64_ver){if(f._loadbase64_ver>=e){return}}f._loadbase64_ver=e;var d={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};f.base64={UTF16ToUTF8:function(n){var l=[],h=n.length,j,g;for(var k=0;k<h;k++){var m=n.charCodeAt(k);if(m>0&&m<=127){l.push(n.charAt(k))}else{if(m>=128&&m<=2047){j=192|((m>>6)&31);g=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g))}else{if(m>=2048&&m<=65535){j=224|((m>>12)&15);g=128|((m>>6)&63);var o=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g),String.fromCharCode(o))}else{if(m>=65536&&m<=2097151){}else{if(m>=2097152&&m<=67108863){}else{}}}}}}return l.join("")},UTF8ToUTF16:function(m){var l=[],k=m.length,j,p,o,g,q,n,h;for(j=0;j<k;j++){g=m.charCodeAt(j);if(((g>>7)&255)==0){l.push(m.charAt(j))}else{if(((g>>5)&255)==6){q=m.charCodeAt(++j);p=(g&31)<<6;o=q&63;h=p|o;l.push(String.fromCharCode(h))}else{if(((g>>4)&255)==14){q=m.charCodeAt(++j);n=m.charCodeAt(++j);p=(g<<4)|((q>>2)&15);o=((q&3)<<6)|(n&63);h=((p&255)<<8)|o;l.push(String.fromCharCode(h))}else{if(((g>>3)&255)==30){}else{if(((g>>2)&255)==62){}else{}}}}}}return l.join("")},encode:function(o){var n=this.UTF16ToUTF8(o),j=[],l=0,g=n.length,m,k,h;while(l<g){m=n.charCodeAt(l++)&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n.charCodeAt(l++);if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n.charCodeAt(l++);j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},encodeArray:function(n){var j=[],l=0,g=n.length,m,k,h;while(l<g){m=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n[l++]&255;j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},decode:function(p){var n=this,k=[],m=0,o=p.length,l,j,h,g;while(m<o){do{l=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&l==-1);if(l==-1){break}do{j=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&j==-1);if(j==-1){break}k.push(String.fromCharCode((l<<2)|((j&48)>>4)));do{h=p.charCodeAt(m++)&255;if(h==61){return n.UTF8ToUTF16(k.join(""))}h=d.decodeChars[h]}while(m<o&&h==-1);if(h==-1){break}k.push(String.fromCharCode(((j&15)<<4)|((h&60)>>2)));do{g=p.charCodeAt(m++)&255;if(g==61){return n.UTF8ToUTF16(k.join(""))}g=d.decodeChars[g]}while(m<o&&g==-1);if(g==-1){break}k.push(String.fromCharCode(((h&3)<<6)|g))}return n.UTF8ToUTF16(k.join(""))}};f.utf8={fromUTF16:function(k){var h=[],j=0,g=k.length,l;while(j<g){l=k.charCodeAt(j);if((l>=1)&&(l<=127)){h.push(k.charAt(j))}else{if(l>2047){h.push(String.fromCharCode(224|((l>>12)&15)));h.push(String.fromCharCode(128|((l>>6)&63)));h.push(String.fromCharCode(128|((l>>0)&63)))}else{h.push(String.fromCharCode(192|((l>>6)&31)));h.push(String.fromCharCode(128|((l>>0)&63)))}}j++}return h.join("")},toUTF16:function(m){var h=[],k=0,g=m.length,n,l,j;while(k<g){n=m.charCodeAt(k++);switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:h.push(m.charAt(k-1));break;case 12:case 13:l=m.charCodeAt(k++);h.push(String.fromCharCode(((n&31)<<6)|(l&63)));break;case 14:l=m.charCodeAt(k++);j=m.charCodeAt(k++);h.push(String.fromCharCode(((n&15)<<12)|((l&63)<<6)|((j&63)<<0)));break}}return h.join("")}};var c=typeof exports!="undefined"?exports:typeof self!="undefined"?self:$.global;function a(g){this.message=g}a.prototype=new Error();a.prototype.name="InvalidCharacterError";f.btoa=c.btoa?(function(g){return c.btoa(g)}):(function(j){var m=String(j);for(var l,h,g=0,k=d.encodeChars,i="";m.charAt(g|0)||(k="=",g%1);i+=k.charAt(63&l>>8-g%1*8)){h=m.charCodeAt(g+=3/4);if(h>255){throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.")}l=l<<8|h}return i});f.atob=c.atob?(function(g){return c.atob(g)}):(function(j){var m=String(j).replace(/[=]+$/,"");if(m.length%4==1){throw new a("'atob' failed: The string to be decoded is not correctly encoded.")}for(var l=0,k,h,g=0,i="";h=m.charAt(g++);~h&&(k=l%4?k*64+h:h,l++%4)?i+=String.fromCharCode(255&k>>(-2*l&6)):0){h=d.encodeChars.indexOf(h)}return i})})(Dynamsoft.Lib);(function(h){var f=20210108;if(h._loadjs_ver){if(h._loadjs_ver>=f){return}}h._loadjs_ver=f;var b="",d=!0,g=h.doc,a=g&&g.documentElement,c=g.getElementsByTagName("head")[0]||a,e=g.createElement("script").readyState?function(j,k){var i=j.onreadystatechange;j.onreadystatechange=function(){var l=j.readyState;if(l==="loaded"||l==="complete"){j.onreadystatechange=null;if(i){i()}k.call(this,true)}else{if(l==="loading"){}else{k.call(this,false)}}}}:function(j,k){var i=!1;j.addEventListener("load",k,i);j.addEventListener("error",k,i)};h.scriptOnload=e;h.getScript=function(j,l,m){var k,i;if(!h.isFunction(m)){m=function(){}}if(!h.isString(j)||j==b){m();return}k=g.createElement("script");i=["",j].join(b);k.src=i;if(l){k.async=d}k.charset="utf-8";e(k,m);c.insertBefore(k,c.firstChild);return k};h.getScripts=function(k,j,m){if(!h.isArray(k)){m();return}var l=k.length,i=function(n){if(n){l--}else{m()}if(l<=0){m("ok")}};if(l<=0){m("ok");return}h.each(k,function(n){h.getScript(n,j,i)})};h.getCss=function(i,l){var j,k=l;if(!h.isFunction(k)){k=!1}if(!h.isString(i)||i==b){if(k){k()}return}j=g.createElement("link");j.href=i;j.rel="stylesheet";j.async=d;if(k){e(j,k)}c.insertBefore(j,c.firstChild);return j};h.getAllCss=function(l,k){if(!h.isArray(l)){k();return}var j=l.length,i=function(m){if(m){j--}else{k()}if(j<=0){k("ok")}};h.each(l,function(m){h.getCss(m,i)})};h.addScript=function(i){var k,j;j=i.body;if(!h.isString(j)||j==b){return}k=g.createElement("script");k.charset="utf-8";if(Dynamsoft.navInfoSync.bIE){k.text=j}else{k.appendChild(g.createTextNode(j))}if(i.language){k.language=i.language}else{k.language="javascript"}if(i.type){k.type=i.type}else{k.type="text/javascript"}c.insertBefore(k,c.firstChild)};h.addJS=function(i){h.addScript({body:i})};h.addVBS=function(i){h.addScript({body:i,language:"vbscript",type:"text/vbscript"})}})(Dynamsoft.Lib);(function(a){var c=a.Lib,b=20200521;if(c._asyncQueue_ver){if(c.isNumber(c._asyncQueue_ver)&&c._asyncQueue_ver>=b){return}}c._asyncQueue_ver=b;var d={queue:[],doNextStarted:false,timer:false,pushToDo:function(g,f,e){d.queue.push({obj:g,method:f,args:e})},doNext:function(){if(!d.doNextStarted){clearTimeout(d.timer);d.timer=false;return}if(d.queue.length==0){d.timer=setTimeout(d.doNext,500);return}var h=d.queue[0],j=h.obj,k=h.method,f=h.args;d.queue.splice(0,1);if(c.isFunction(j[k])){if(f.length>2){var g=f[f.length-2],e=f[f.length-1];f[f.length-2]=function(){try{g.apply(j,arguments)}catch(l){}d.timer=setTimeout(d.doNext,0)};f[f.length-1]=function(){try{e.apply(j,arguments)}catch(l){}d.timer=setTimeout(d.doNext,0)}}try{j[k].apply(j,f)}catch(i){}return}else{c.log("not invoke a function: "+k);d.timer=setTimeout(d.doNext,0)}},start:function(){if(!d.doNextStarted){d.doNextStarted=true;d.timer=setTimeout(d.doNext,0)}},stop:function(){clearTimeout(d.timer);d.doNextStarted=false;d.queue=[]}};c.asyncQueue=d})(Dynamsoft);(function(f){var d=20200521;if(f._sprintf_ver){if(f._sprintf_ver>=d){return}}f._sprintf_ver=d;var e,i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function g(m,l){if("_".repeat){return m.repeat(l)}var k=0,j=[];for(;k<l;k++){j.push(m)}return j.join("")}function c(s,r){var w=1,u=s.length,x,l="",p,n,q,m,t,v,o,j;for(p=0;p<u;p++){if(typeof s[p]==="string"){l+=s[p]}else{if(typeof s[p]==="object"){q=s[p];if(q.keys){x=r[w];for(n=0;n<q.keys.length;n++){if(x==undefined){throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',q.keys[n],q.keys[n-1]))}x=x[q.keys[n]]}}else{if(q.param_no){x=r[q.param_no]}else{x=r[w++]}}if(i.not_type.test(q.type)&&i.not_primitive.test(q.type)&&x instanceof Function){x=x()}if(i.numeric_arg.test(q.type)&&(typeof x!=="number"&&isNaN(x))){throw new TypeError(e("[sprintf] expecting number but found %T",x))}if(i.number.test(q.type)){o=x>=0}switch(q.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,q.width?parseInt(q.width):0);break;case"e":x=q.precision?parseFloat(x).toExponential(q.precision):parseFloat(x).toExponential();break;case"f":x=q.precision?parseFloat(x).toFixed(q.precision):parseFloat(x);break;case"g":x=q.precision?String(Number(x.toPrecision(q.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x);x=(q.precision?x.substring(0,q.precision):x);break;case"t":x=String(!!x);x=(q.precision?x.substring(0,q.precision):x);break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase();x=(q.precision?x.substring(0,q.precision):x);break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf();x=(q.precision?x.substring(0,q.precision):x);break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase();break}if(i.json.test(q.type)){l+=x}else{if(i.number.test(q.type)&&(!o||q.sign)){j=o?"+":"-";x=x.toString().replace(i.sign,"")}else{j=""}t=q.pad_char?q.pad_char==="0"?"0":q.pad_char.charAt(1):" ";v=q.width-(j+x).length;m=q.width?(v>0?g(t,v):""):"";l+=q.align?j+x+m:(t==="0"?j+m+x:m+j+x)}}}}return l}var h=Object.create?Object.create(null):{};function a(j){if(h[j]){return h[j]}var m=j,n,p=[],o=0;while(m){if((n=i.text.exec(m))!==null){p.push(n[0])}else{if((n=i.modulo.exec(m))!==null){p.push("%")}else{if((n=i.placeholder.exec(m))!==null){if(n[2]){o|=1;var q=[],l=n[2],k=[];if((k=i.key.exec(l))!==null){q.push(k[1]);while((l=l.substring(k[0].length))!==""){if((k=i.key_access.exec(l))!==null){q.push(k[1])}else{if((k=i.index_access.exec(l))!==null){q.push(k[1])}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}n[2]=q}else{o|=2}if(o===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}p.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}else{throw new SyntaxError("[sprintf] unexpected placeholder")}}}m=m.substring(n[0].length)}h[j]=p;return p}e=function(j){return c(a(j),arguments)};function b(k,j){return e.apply(null,[k].concat(j||[]))}f.sprintf=e;f.vsprintf=b})(Dynamsoft.Lib);(function(f,i){var c=Dynamsoft.managerEnv,k=f.LS,h=Dynamsoft.navInfoSync.host,d,a,g=20200914,j=function(){if(Dynamsoft.dcp){var l=Dynamsoft.dcp.dcpJSVer;if(f.isNumber(l)){return l>=g}}return false};if(!c){Dynamsoft.managerEnv={};c=Dynamsoft.managerEnv}c.resourcesPath=c.resourcesPath||"Resources";c.IfUpdateService=c.IfUpdateService?true:false;if(j()){j=i;g=i;return}a={dcpStatus:0,bConnected:false,connectedResult:"",curPortIndex:0,bConnectNumLimited:true,IMAXCONNECTCOUNT:3,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}};var b=[],e=0;Dynamsoft.dcp=d={host:"127.0.0.1",ports:[[18625,18626]],win64Port:[18627,18628],ifCheck64bitServiceFirst:false,dcpJSVer:g,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],DWASMVer14:[14,3,1,"0115"],managerVersion:[16,2,0,"0112"],managerVersionMac:[16,2,0,"0112"],managerVersionLinux:[16,2,0,"0112"],serviceVersion:[1,6,2,"0112"],serviceVersionMac:[1,6,2,"0112"],serviceVersionLinux:[1,6,2,"0112"],detect:a,strSID:"",bEnhancedMode:false,b64bit:false,onReadys:[],getManagerVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.managerVersionMac}else{if(l.bLinux){return d.managerVersionLinux}}}return d.managerVersion},getServiceVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.serviceVersionMac}else{if(l.bLinux){return d.serviceVersionLinux}}}return d.serviceVersion},versionInfo:function(p,l){var o=0,n=function(t){if(f.isArray(t)&&t.length>0&&t[0]){a.curPort=d.ports[o%d.ports.length];var w=t[0];if(f.isString(w)&&d._compareVersion(w.split(","),d.oldDWASMVer)){var v=f.isString(t[1])&&t[1].toLowerCase(),u="",s=false,q=false;if(t.length>4){u=f.isString(t[2])?t[2]:"";s=f.isString(t[3])&&(t[3]==="true");q=f.isString(t[4])&&(t[4]==="64")}d.strSID=u;d.bEnhancedMode=s;d.b64bit=q;a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.Connected;d._sendStatusEvent(false,w);if(f.isFunction(p)){setTimeout(function(){p(u,s)},0)}return true}}return false},m=function(r,s,q){++o;a.curPortIndex=o%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&o>=a.IMAXCONNECTCOUNT){setTimeout(function(){p(r,s,q)},0);return true}return false};a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,l,n,m)},_checkOldManagerVersion:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,i,m,l)},_checkManagerVersion:function(l,n,m){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",false,l,n,m)},_checkService:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingServiceVer;this._postBase("DSVersion",false,i,m,l)},_checkUpdateFile:function(m,l){this._postBase("CheckUpdateFile",false,i,m,l)},_updateService:function(m,l){this._postBase("UpdateService",false,i,m,l)},_postBase:function(n,r,o,t,s){var q,l;if(r){q=d.oldDWASMVerStr}else{q="dwasm2_"+d._getModuleVer()}l={id:"1",method:n,version:q,parameter:[]};if(o){if(f.startsWith(o,"http://")||f.startsWith(o,"https://")){if(Dynamsoft.managerEnv.ifCheckRemoteProductKey){var p=this,m=o;f.ajax({method:"GET",url:m,onSuccess:function(u){l.productKey=u;p._postBaseV2(n,r,l,t,s)},onError:s});return true}}else{l.productKey=o}}this._postBaseV2(n,r,l,t,s);return true},_postBaseV2:function(r,w,m,A,z){var x,B,t,u=f.stringify(m);if(!f.isFunction(A)||!f.isFunction(z)){return}if(d.detect.bConnected&&r=="VersionInfo"){A(d.detect.connectedResult);return}B=function(D,E,C){s--;if(s==0){if(z(D,E,C)){return}}};t=function(D,F,C){var E=d._getJSON(D);if(E&&"result" in E){s=-1;if(d.detect.bConnected){return}d.detect.bConnected=true;d.detect.connectedResult=E.result;d.detect.dcpStatus=d.detect.EnumDCP_DetectStatus.Connected;d.detect.curPort=d.ports[C.index];d.ports=[d.detect.curPort];d.detect.curPortIndex=0;if(k.isSupportLS()){k.item("DCP_port",d.detect.curPort[1])}if(A(E.result)){return}}B(D,F,C)};var p,s=d.ports.length;if(s>1&&k.isSupportLS()){var n=k.item("DCP_port");if(f.isString(n)&&n!==""){for(p=1;p<s;p++){var l=d.ports[p],y,v;y=l[0];v=l[1];if(v==n){d.ports[p][0]=d.ports[0][0];d.ports[p][1]=d.ports[0][1];d.ports[0][0]=y;d.ports[0][1]=v}break}}}if(d.detect.bConnected){s=1}b=[];d.detect.bConnected=false;for(p=0;p<s;p++){var o=[d._getPreUrl(p),w?"dcp/":d._getModuleName(),w?d.oldDWASMVerStr:d._getModuleVer(),"/",r,"?type=1&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");b.push({method:"POST",url:o,timeout:200,data:u,onSuccess:t,onError:B})}for(p=0;p<s;p++){var q=f.ajax(b[p]);q.index=p}},loadZip:function(l,q,p,r){var o,n=q,m=p;if(n===100){n=0;m=function(s){if(f.isString(s)){s=s.replace('"result" : [ 0,','"result" : [ 100,')}p(s)}}if(Dynamsoft.managerEnv.IfUpdateService){o=[d._getPreUrl(a.curPortIndex),d._getModuleName(),d._getModuleVer(),"/LoadZipFromBytes?type=",n,"&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}else{o=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}f.ajax({method:"POST",url:o,async:true,data:l,onSuccess:m,onError:r})},oldLoadZip:function(l,m,o,p){var n=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");f.ajax({method:"POST",url:n,async:true,data:l,onSuccess:o,onError:p})},_getPreUrl:function(o){var l,m;if(Dynamsoft.navInfoSync.bSSL){m="https://";l=d.ports[o][1]}else{m="http://";l=d.ports[o][0]}return[m,d.host,":",l,"/"].join("")},_getJSON:function(l){return l?f.parse(l):!1},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return d.getManagerVersion().join("")},_compareVersion:function(m,l){var n=f.isLocalIP(d.host);if(!n){return true}if(f.isArray(m)&&m.length==4&&f.isArray(l)&&l.length>=4){return m[0]>l[0]||m[0]==l[0]&&m[1]>l[1]||m[0]==l[0]&&m[1]==l[1]&&m[2]>l[2]||m[0]==l[0]&&m[1]==l[1]&&m[2]==l[2]&&parseInt(m[3])>=parseInt(l[3])}else{if(f.isArray(m)&&m.length==1&&f.isArray(l)&&l.length>=1){return parseInt(m[0])>=parseInt(l[0])}}return false},_getDSUpdateZipUrl:function(){var m=Dynamsoft.Lib.getNavInfo(),n,l,o="";n="Win";if(m.bMac){n="Mac"}else{if(m.bLinux){n="Linux"}}if(Dynamsoft.navInfoSync.bFileSystem){l=""}else{l="?t="+f.now()}if(m.bWin&&d.b64bit){o="_x64"}return[Dynamsoft.managerEnv.resourcesPath,"/dist/serviceupdate/",n,"DSUpdate_",d.getManagerVersion().join("."),o,".zip",l].join("")},getPorts:function(l,p,o){var n="GetPorts",q="dwasm2_"+d._getModuleVer(),m={id:"1",method:n,version:q,parameter:[l]};this._postBaseV2(n,false,m,p,o)},checkDcpForUpdate:function(q,l,s,t,o,n,D,v){var r=false,F=true,B=3,m=0,y=function(J){if(!(f.isArray(J)&&J.length>0&&J[0])){return false}var K=J[0].split(",");var H=false;if(J.length>4){H=f.isString(J[4])&&(J[4]==="64")}d.b64bit=H;if(!Dynamsoft.managerEnv.IfUpdateService){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{if(d._compareVersion(K,d.oldDWASMVer)){var G=d._getDSUpdateZipUrl();r=true;var M=function(N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadedZip;d._sendStatusEvent();var O=0;d.oldLoadZip(N,O,function(){setTimeout(function(){d._checkManagerVersion(v,u,p)},5000)},L);N=null},L=function(O,P,N){d._funUpdateFailed(o,n,O,N.status);setTimeout(D,0)},I=function(N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(o){o()}var O="The update package can't be downloaded. The error code is "+N.httpCode+".";if(n){n(true,O)}d._sendStatusEvent(true,O);setTimeout(D,0)};if(s){s()}if(t){t()}a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.fetch(G,{mode:"cors",dataType:"arraybuffer"}).then(M,I)}else{if(F){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;if(s){s()}if(q){q()}d._sendStatusEvent();F=false}}}return true},x=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;d._sendStatusEvent()}else{setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},u=function(G){if(!(f.isArray(G)&&G.length>0&&G[0])){return false}var H=G[0].split(",");if(d._compareVersion(H,d.getManagerVersion())){if(Dynamsoft.managerEnv.IfUpdateService){if(r){setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}return true}return false},p=function(I,J,H){var G=1000;if(B<3){G=500}B--;if(B<0){d._funShowUpgradeDialogWhenUpdateFailed(o,n);setTimeout(D,0)}else{setTimeout(function(){d._checkManagerVersion(v,u,p)},G)}return true},E=function(H){if(!(f.isArray(H)&&H.length>0&&H[0])){if(s){s()}return false}var G=H[0].split(",");if(d._compareVersion(G,d.getServiceVersion())){a.bConnected=true;if(o){o()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,H[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}return true},w=function(H,I,G){d._funUpdateFailed(o,n,H,G.status);setTimeout(D,0);return true};var A=false,C=function(I){if(!(f.isArray(I)&&I.length>0&&I[0])){return false}var L=I[0];if(f.isString(L)&&d._compareVersion(L.split(","),d.oldDWASMVer)){var K=f.isString(I[1])&&I[1].toLowerCase(),J="",H=false,G=false;if(I.length>4){A=true;J=f.isString(I[2])?I[2]:"";H=f.isString(I[3])&&(I[3]==="true");G=f.isString(I[4])&&(I[4]==="64")}d.strSID=J;d.bEnhancedMode=H;d.b64bit=G;a.curPort=d.ports[m%d.ports.length];if(!Dynamsoft.managerEnv.IfUpdateService){a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{m=0;a.curPortIndex=0;if(F){if(s){s()}if(q){q()}F=false}setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},z=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(F){if(s){s()}if(q){q(G,H)}F=false}if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){m=0;a.curPortIndex=0;setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}else{setTimeout(function(){d._checkManagerVersion(v,C,z)},1000)}return true};if(l){l()}d._checkManagerVersion(v,C,z)},_checkUpdateZip:function(p,v,o,x,q){var r=function(B,C,A){var D=-1;if(A){D=A.status}if(D==0){setTimeout(function(){d._checkService(u,s)},5000);return true}var z=d._getDSUpdateZipUrl();a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.fetch(z,{mode:"cors",dataType:"arraybuffer"}).then(l,w);return true},w=function(z){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(v){v()}var A="The update package can't be downloaded. The error code is "+z.httpCode+".";if(o){o(true,A)}d._sendStatusEvent(true,A);setTimeout(x,0);return true},t=function(A){if(!(f.isArray(A)&&A.length>1)){return false}if(A[1]==true){a.dcpStatus=a.EnumDCP_DetectStatus.VerifiedZip;d._sendStatusEvent();a.dcpStatus=a.EnumDCP_DetectStatus.UpdatingService;d._sendStatusEvent();setTimeout(function(){d._checkService(u,s)},5000)}else{var z=0;if("exception" in A){z=A.exception}if(z==-2373){d._funUpdateFailed(v,o,A,200);setTimeout(x,0);return true}setTimeout(r,0)}return true},l=function(z){var A=1;Dynamsoft.dcp.loadZip(z,A,function(B){var D,C;try{if(f.isString(B)){C=f.parse(B.replace(/\0/g,""));if("result" in C){D=C.result}}}catch(E){}if(f.isArray(D)&&D.length>2&&D[2]==true){setTimeout(function(){d._checkService(u,s)},5000);return}d._funUpdateFailed(v,o,B,200);setTimeout(x,0)},n);z=null},n=function(A,B,z){var C=-1;if(z){C=z.status}if(C==0){setTimeout(function(){d._checkService(u,s)},5000)}else{d._funUpdateFailed(v,o,A,z.status);setTimeout(x,0)}return true},y=function(z){if(!(f.isArray(z)&&z.length>0)){return false}if(z[0]==true){setTimeout(function(){d._checkService(u,s)},5000)}else{d._funUpdateFailed(v,o,z,200);setTimeout(x,0)}return true},m=3,u=function(A){if(!(f.isArray(A)&&A.length>0&&A[0])){return false}var z=A[0].split(",");if(d._compareVersion(z,d.getServiceVersion())){a.bConnected=true;if(v){v()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,A[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(x,0);return true}return false},s=function(A,B){var z=1000;if(m<3){z=500}m--;if(m<0){d._funShowUpgradeDialogWhenUpdateFailed(v,o);setTimeout(x,0);return true}setTimeout(function(){d._checkService(u,s)},z);return true};if(p){p()}a.dcpStatus=a.EnumDCP_DetectStatus.VerifyingZip;d._sendStatusEvent();d._checkUpdateFile(t,r)},_getStatusString:function(p,o){var m,l,n="";if(p==a.EnumDCP_DetectStatus.Init){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.Connected){if(o){n=o}return"Getting manager version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.DownloadingZip){return"Downloading the update package"}else{if(p==a.EnumDCP_DetectStatus.DownloadedZip){return"Update package downloaded"}else{if(p==a.EnumDCP_DetectStatus.DownloadFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"Update package failed to download"+m+l}else{if(p==a.EnumDCP_DetectStatus.CheckingManagerVer){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.CheckingServiceVer){return"Getting service version"}else{if(p==a.EnumDCP_DetectStatus.NotInstalled){return"Dynamsoft Service Not Installed"}else{if(p==a.EnumDCP_DetectStatus.UpdateSkipped){return"Update skipped"}else{if(p==a.EnumDCP_DetectStatus.CheckedService){if(o){n=o}return"Getting service version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.VerifyingZip){return"Verifying the update package"}else{if(p==a.EnumDCP_DetectStatus.VerifiedZip){return"Update package verified"}else{if(p==a.EnumDCP_DetectStatus.UpdatingService){return"Updating the service"}else{if(p==a.EnumDCP_DetectStatus.UpdateSucceed){return"Update succeeded"}else{if(p==a.EnumDCP_DetectStatus.UpdateFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"The update failed"+m+l}}}}}}}}}}}}}}}return""},_sendStatusEvent:function(m,n){var l=m?true:false;if(f.isFunction(h.OnGetServiceUpdateStatus)){h.OnGetServiceUpdateStatus(l,a.dcpStatus,d._getStatusString(a.dcpStatus,n))}},_getErr:function(m){var n,l="";try{if(f.isString(m)){n=m.replace(/\0/g,"");n=f.parse(n)}else{if(m){n=m}}if("description" in n){l=n.description}}catch(o){}return l},_funShowUpgradeDialogWhenUpdateFailed:function(m,l){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}if(l){l()}d._sendStatusEvent(true);return true},_funUpdateFailed:function(m,l,n,q){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}var o,p;if(q==200){o="The update failed.";p=d._getStatusString(a.dcpStatus,d._getErr(n))}else{o="The update failed. The error code is "+q;p=o}if(l){l(true,o)}d._sendStatusEvent(true,p);return true},getDSPath:function(l,n){var p=Dynamsoft.managerEnv.resourcesPath,o=n;if(Dynamsoft.Lib.isString(p)&&p.length>0){if(p[p.length-1]!="/"){p=p+"/"}}else{p="Resources/"}if(!o){var m=Dynamsoft.Lib.getNavInfo();if(m.bMac){o=".pkg"}else{if(m.bLinux){o=".deb"}else{o=".msi"}}}return[p,"dist/DynamsoftServiceSetup",o].join("")},getLinuxHTML5DebPath:function(){return Dynamsoft.dcp.getDSPath(false,".deb")},getLinuxHTML5RpmPath:function(){return Dynamsoft.dcp.getDSPath(false,".rpm")}};j=i;g=i;c=i;f.domReady(function(){if(d.onReadys.length>0){f.each(d.onReadys,function(l){if(f.isFunction(l)){l()}})}});Dynamsoft.Ready=function(l){return f.asyncGetNavInfo().then(function(){try{l(f)}catch(m){f.log(m.stack||m,"error");throw m}})}})(Dynamsoft.Lib);(function(b){var f=b.Lib,e=f.doc;var d=20200521;if(f._evt_ver){if(f.isNumber(f._evt_ver)&&f._evt_ver>=d){return}}f._evt_ver=d;f.Events={registedClass:[],registedObjs:[]};var c=function(g){var i=g||window.event;var h=true;f.each(f.Events.registedObjs,function(j){f.each(f.Events.registedClass,function(k){if(j instanceof k){if(j.bFocus&&j.handlerKeyDown){h=j.handlerKeyDown(i);if(!h){return false}}}})});return h};f.ready(function(){f.addEventListener(e.documentElement,"keydown",c)});f.mix(f,{getWheelDelta:function(g){g=g||window.event;var j,i=g.wheelDelta,h=g.detail;if(i){j=i/120}if(h){j=-(h%3===0?h/3:h)}return j}});var a={LEFT:0,MIDDLE:1,RIGHT:2};f.EnumMouseButton=a;f.detectButton=function(g){var h=g||window.event;if(h.which==null){return(h.button<2)?a.LEFT:((h.button==4)?a.MIDDLE:a.RIGHT)}else{return(h.which<2)?a.LEFT:((h.which==2)?a.MIDDLE:a.RIGHT)}}})(Dynamsoft);(function(b){var a=20200521;if(b._ui_eventWhich_ver){if(b.isNumber(b._ui_eventWhich_ver)&&b._ui_eventWhich_ver>=a){return}}b._ui_eventWhich_ver=a;b.switchEvent=function(c){c=c||window.event;if(c.which==null){c.which=(c.button<2)?1:((c.button==4)?2:3)}else{c.which=(c.which<2)?1:((c.which==2)?2:3)}return c}})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._ui_style_ver){if(b.isNumber(b._ui_style_ver)&&b._ui_style_ver>=a){return}}b._ui_style_ver=a;b.currentStyle=function(f,g){var e=b.win,d=e.doc,c;if(f.currentStyle){return f.currentStyle[g]}else{if(e.getComputedStyle){c=g.replace(/([A-Z])/g,"-$1");c=g.toLowerCase();return d.defaultView.getComputedStyle(f,null)[g]}}return null}})(Dynamsoft.Lib);(function(f,h){var m=Array.prototype,i=!0,t=!1,l=f.Lib,b=f.navInfoSync,o=l.isString,v=l.each,s=m.slice,n=" ",p=(b.bIE&&b.IEMode<10),r=/[\n\t\r\.]/g;var d=20200521;if(l._ui_nodelist_ver){if(l.isNumber(l._ui_nodelist_ver)&&l._ui_nodelist_ver>=d){return}}l._ui_nodelist_ver=d;function w(z,A,y){var x=this;if(!(x instanceof w)){return new w(z,A,y)}if(!z){return x}if(typeof z==="string"){l.error("Err 4001.");return x}if(l.isArray(z)||z.isNodeList){Array.prototype.push.apply(x,l.makeArray(z));return x}x[0]=z;x.length=1;return x}w.prototype={isNodeList:true,length:0,item:function(y){var x=this;if(l.isNumber(y)){if(y>=x.length){return null}else{return new w(x[y])}}else{return new w(y)}},slice:function(){return new w(s.apply(this,arguments))},getDOMNodes:function(){return s.call(this)},each:function(z,y){var x=this;v(x,function(B,A){B=new w(B);return z.call(y||B,B,A,x)});return x},getEL:function(){var x=this;return(x.length>0)?x[0]:h},all:function(x){var z,y=this;if(y.length>0){z=l.all(x,y)}else{z=new w()}return z},one:function(x){var y=this,A=y.all(x),z=A.length?A.slice(0,1):A;return z}};function j(x){return o(x)&&(x=l.trim(x))&&x.length>=3&&l.startsWith(x,"<")&&l.endsWith(x,">")}function g(x){return(n+x+n).replace(r,n)}function u(x){return(x).replace(r,"")}function a(B){var y=B.innerHTML;if(!document.all){return y}var A=/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/ig;var z=/"'([^'"]*)'"/ig;y=y.replace(A,'$1="$2"').replace(z,'"$1"');var x=y.replace(/<(\/?)(\w+)([^>]*)>/g,function(D,C,F,E){if(C){return"</"+F.toLowerCase()+">"}return("<"+F.toLowerCase()+E+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(M,H,N,L,K,J,G,I){if(K){return'="'+K+'"'+J}return M})});return x.replace(/<\/?([^>]+)>/g,function(C){return C})}var q=function(B,D){var A=B.className,x,y=D.length,C,z,E;if(A){x=g(A);C=A;z=0;for(;z<y;z++){E=u(D[z]);if(x.indexOf(n+E+n)<0){C+=n+E}}C=l.trim(C)}else{C=D.join(" ")}B.className=C},k=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;while(A.indexOf(C)>=0){A=A.replace(C,n)}}B.className=l.trim(A)}},c=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;if(A.indexOf(C)<0){return t}}return i}return t};l.mix(w.prototype,{before:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.insertBefore(A,z.childNodes[0])})}},append:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.appendChild(A)})}},html:function(y){var x=this.getEL();if(x){if(l.isUndef(y)){return a(x)}x.innerHTML="";v(l.parseHTML(y),function(z){x.appendChild(z)})}},attr:function(z,x){var y=this.getEL();if(y){if(l.isUndef(x)){if(z==="readonly"){return y.readOnly?"readonly":""}if(z==="style"||!p){y=y.attributes[z];if(y){y=y.value}}else{y=y[z]}return y}if(z=="class"){y.className=x}else{y[z]=x}}},style:function(z,x){var y=this.getEL();if(y){return l.style(y,z,x)}},css:function(x){v(this,function(y){v(x,function(z,A){l.style(y,A,z)})})},addClass:function(x){var y=this.getEL();if(y){q(y,x.split(n))}},removeClass:function(x){var y=this.getEL();if(y){k(y,x.split(n))}},hasClass:function(x){var y=this.getEL();if(y){return c(y,x.split(n))}},parent:function(){var x=this.getEL();if(x){x=x.parentNode}return new w(x)},remove:function(){var x=this.getEL();if(x){x.parentNode.removeChild(x)}},offset:function(){var x=this.getEL();return l.DOM.getElDimensions(x,i)}});function e(x,z){var y=z;if(y&&y.isNodeList){y=y.getEL()}if(o(x)){if(j(x)){l.err("Err 4002.")}return new w(l.sizzle(x,y))}if(x.isNodeList){return x}return new w(x)}l.mix(l,{all:e,one:function(x,y){var z=e(x,y);return z.length?z.slice(0,1):z},isNodeList:function(x){return x instanceof w}});l.ready(function(){l.all=e})})(Dynamsoft);(function(e){var d=e.win,c=e.doc,b=isNaN;var a=20200521;if(e._dom_ver){if(e.isNumber(e._dom_ver)&&e._dom_ver>=a){return}}e._dom_ver=a;e.DOM={getOffset:function(p,j,l){p=p||d.event;var g=l||p.target,o=0,n=0,k=0,m=0,f,i,h=false;while(g&&!b(g.offsetLeft)&&!b(g.offsetTop)){i=g.scrollLeft;f=g.scrollTop;if(g.tagName==="BODY"){if(h){i=0;f=0}else{i=i|c.documentElement.scrollLeft;f=f|c.documentElement.scrollTop}}else{if(g.style.position==="fixed"){h=true}}o+=g.offsetLeft-i;n+=g.offsetTop-f;g=g.offsetParent}if(j){k=j.Left;m=j.Top}o=p.clientX-o-k;n=p.clientY-n-m;return{x:o,y:n}},getElDimensions:function(g,i){var f,h;if(!g){return{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}f=g.style.display;g.style.display="";h=i?{offsetTop:g.offsetTop,offsetLeft:g.offsetLeft,offsetWidth:g.offsetWidth,offsetHeight:g.offsetHeight}:{clientTop:g.clientTop,clientLeft:g.clientLeft,clientWidth:g.clientWidth?g.clientWidth:(parseInt(g.style.width)?parseInt(g.style.width):0),clientHeight:g.clientHeight?g.clientHeight:(parseInt(g.style.height)?parseInt(g.style.height):0)};g.style.display=f;return h}};e.getElDimensions=e.DOM.getElDimensions})(Dynamsoft.Lib);(function(g,h){var i=20210113,k=g.Lib;if(k._dialog_ver){if(k.isNumber(k._dialog_ver)&&k._dialog_ver>=i){return}}k._dialog_ver=i;k.loaderBarClassName="ds-dwt-loaderBar";k.loaderBarWidth="230px";k.loaderBarHeight="240px";k.loaderBarSource="data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6oUhQwDSYmDTBPHiyshyydsEwUJgslCiIFCgkPcpcJvIYJv8BJBy4okW8r0kceIM97LIvTRw0Cq5ojBNtGqt9uC08qGisnBA9g4loHAt8jESpKJhT6VqqJMALn3AiYsE7QAneIFCVRkelbiYZFKDhooanAinxWHFyDKABXEhMJ0VFiAkMBqwITQE6hEAGinhRKBg3UlEim/pENzwQcyAKDn00AJ3wKucMxUogKGIsc2DlqhIMsGjgcBRBC6dI0Cla9IaHBKxEHKTWRyGKCqjsUZpeqOFArTFwiK9JGIsDW7TcOd7FU0HuIL5asWwVELfPo2wOiELYuCHzFQ4FnIzRkoYCBsCYGVz3lZZVuMRQNLiGyGOrpQORRClZuHv2tgAPKWNBA0KvgdhkPJzzrYfDBNB0uKwowYDCCQYETMHA78RDB7x6P42J4MFFhhQPWgA4YKJGWAQgHxrObkdXhhAAOHDK4wKd+GgUKHu5Lr8+/v///AAYo4IAEAgODBhNoYFKBdVCgAQkKMDdCcwq40EB6DDoBAwbW/rUhwgMLZlhFA7vxMkICmolIxQEhCLeHUCpK4YEzNvkiIhomOGACDKYNdhQDFWR4wAMCiMKAAA+AZ8QBFR2VgZIBwsACJHswwEKIRAi0FSKmDEjBLtiEYwQFJGzZBgb7eWICabIN4QEBZiKFISxAsRLBkmBumQCU/pXASwZL0rjlagMaNQqgRbwZpzoDnsDLnRmVaSYJaVoygGeTHKHlVgV5mWcvMjG5JQR8/icllcOBgCURKaDqDgM4MXgAAgJAciQCpbopqDs2ZugBDDnaYhwMF7jYxggwxihFAxm4OAIEKSq77AMdIoJBA9JW4UEDLkQ4IYUWzpmtEgcmuOq4/uimq+66/qHhwAQfVDABGOxGodECFyjnBgMoZBAAM/UuAcMJl6HDAQniZiuMVt9AAHDAQ1AwAcPuCIAtxENo0JRNECTs664QjUApxg7EycHFp/x64XpNbjVCAJVS4cAGJQhggR9kaFCtRecCsqmHk2mxgqtbFdAmIw5Y94EWNcUJAKyWeFDnISF4fIQFTrcRZCUw+BmJCNFagXXWWzdSFE9HUzG1mQwYYIkKYx+iQK5RPGAsKyKEVkkK1r2SRdJOh4ByIx48ZEgJdEfhwcYuJ/UJBSu0UIAIEriQuBQVxFnAALBsR68ZBzBuEwExC0hBBzt31LMRKqRAAAEpAESgYgfU2sSB3kscsOueBXqQnDshxOTECocsXeDpokeCImWv7QFBhlxUEIIIEx7LgAgQoBeF13sgeqMJD7gAAgEurPAwFHYb8hjGT4iqB6nsPyELkSWAWHr8+Oev//789+8/u0EAACH5BAkJADEALAAAAABkAGQAAAb+wJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+0uPY1JJ+XQeLxob2OhYAAAjNaika5fKYPL6M0HjC4DFHaDUSYofYgAKCaEjUweAomJAmeOlkYOe5J9Iw6Xn0MEm4kEoJ8UCqOICoKmUB4aJiYNrU4UHKp9HLWuSwcBAhwoBQolFZVMFC25fC28vUceFQWSIyEOz0gWzG8W0EoeLm6jIilNmdyeUBQNsg3IXhXjqhyMX5G5lK8uF8IKJ3S8HKDGjQU8JA5wjeKgzkmDEprejECBrYsLbm/KJXOgJ9Gfik5g4EtUwJ4WSBjfLDiIpEGENm8YKIgQ0NaKiKRYVtGgEGP+Ahi2NExIkWKChmy+QKgKUROLA4IYBTQddCCEqpJbBhxKKQCoowMXVC3aokFCSgAsDljycELVhalWUKZ0gTQNBQPzEI2IUJdKBZxiB3xSsQHwm65dPFhlNmKDzkEwXIjowwAC3CxPmbXwCspDCgICLrBYoRYNhRRQPba4bImChwMHPPTVYoLFZEQcInD+tjbFAgglSrAgYeIxb0KvYcA4MPu48+fQo0ufTr269evYs1t3DaOBdxiytXOB8VnBixEiJJwwsFt8lQEl8vJhUEKweyoUKvTcxMFA8/tG5HdbLiJU8B+AQzSwXy4csDYdBTBoAMOBF521gHYutcBBCBv+OCgEDANiVEB70lHgQAs4tRBIEvKcBUcF1x1QgiQllHbEAi6+EcF16HjUkBHb5OiNdRiMgkESSgl5HQmjkJAEji7uxaNhfvxYRItnMQCjdQeM1IcANhoBoosjXodHKn2oOBuUKV2YXQMnhCBBCAAxoWBKDYoHoYQHCshNgQciKER+CybCgYGCRuFAfJLQZ2WiIVVAgAQijPCCBARUQCKktnjQ3XfhcSrqqKSWauqpqBbhqSwTppqMCScoUIAIBRTQAgm0uGqEBw5AQCUcAAWaKAUPpLaJAiClSsEKL2AkwaOknmZsLkyl2oCXGFkgrHb5/aoKAx7aQcG2T3gwY47+ALgAigoYXCBHuFIc4G0urDThGmyhTqHCYm+gYJ8WDqD7RgHhHjABBhFYAEIEGEwQ5hMBJFICuUoYIDAAIpi06wolTFtACSsYF80yej1sRQUXZ3wEOyHIhwgDTAXqAZqImFzFBBcTvOsEhW6CwgSBioIbxUnAcLEEB5loFp7JKqHBVhkhelLP3IAgJrbcXGDzEb3uEUIKIktBAQnzbjLCv0NEIPCOnXqQ7xYN0JwSBM+Mia4Im4JCrMtXPfpA2aOM8IBzB5wAeEYrPENBAhcDkADRaHhAAN+IFBCymCQLvNlzKjygwK8jCJACUnderAC8l7CDweecQKBpXWU1zoFdBiWCYUIFKZgQ22xxN346qR6EdbEAKpQqtMCllDrB4dVMYCoF/LoYAuTVpUD5t+acKnmOJ4QtKAwgMD8CC3mPWvj180WwdakeIICi2S0g4P2o7KwgAE6hr5ArKEEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPzarPy+dPz27PzSnPymRPy2ZPzGhPyWJPzu3PzixPzOnPyiRPzevPzChPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzetPzCfPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPzatPy+fPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweAydRCyVjyUyIbujkwYGQK9jGu23Xtkg1f8AJA17hEYdLSKAdSItHYWPMA0Jin8Jg5CEA4mUdCIlmIQRnH8OoGUvJSUHeVAlm5yepkwTLyMaIrgMCQWrT5KjAJaySh0OK5QiGBmsS4evgCIBjsNHZhrAApdNfZyCVRPTYS/HwAAszEq0JM8iguhNcQYrGiwO71oj5XQMEWURIAIqrLk36wSDPyIWhNsy4Zo+ACgIisngEGG/Lg0OPqxwoFCAZ3a8OAA5StieDhY4aViYxdXDYNreTDDACQJLLC806hPQkdD+A5IAQHiZ8OGhCAkSxZFDmOELBaCAQjR91KCCRhEJ2Hw5oKAcI1AHEKBA8QAPmAkZKowSAaInqAlJtcRhobNOiBYvqOkxY0FAghUCUMTUK/NAhgYp4hJezLix48eQI0ueTLmy5cuYM397kaFEhheKNS+Z4ICDAA0mNAjgYE/0lA4oQigSEQLFTdd8BJTLhrvJCxZQF7HI2zvJBA/B/zBQEVov3OYHILwM5jZyBw8QQkDwcLuIg+l0SklOseBVwhRL8oEfMdmB7D8ELiahCd6A5AkXKD1IigI8APuRTfCAfkkF4B97kkXwnl3yIfEdeOJFdoAE5klQ3REHTPJSAhf+PnZddtt1R8QEKtQ1ynLNUQNOir8lB4AIwxW3RAO6YTOYjEd0YMCCf9QmIo5EFCOBABBoAIEAEjjwI5BF0JJKCaAxKeWUVFZp5ZVYPgHOCy8kluURL5yAAgYkCICBAWWN8VwHHcAFSgoPJGDiiyZIEGUXHTSgAgYmMMCABiBEcKceHZSgITAhULBkFAdcIN1sHyi61wmP6sPAA4s68ducPbaQ4hUlVPRQCB58ikQHfujDSKZXZOgfAARESEUHC0yXqKlwGPgqABiwikQJJoAnAHFgvFCpf7HMKgGyJ4hBAacvcVBFA0X5ZwGuTsy0ax0QYAtDCTy+tBIYB8yxLaz+Nzox0qsMZFqMCi20oIKSS7yg1rkhfDLFusj+SIstDOCSiwYjDFoEjecCkC8VA7jwKgESdUCBqIpowB2GqW4bQrrbHDqdAgR18AC0yu1nSErnjjvFASC8ylw1Jb7kQqlGjOAiMBhYcUK45ZjUpAPBTmdCa0RkQMC5DUrRQcsvMXDBPSnQVx9L2u66gq9INHAsMCx0KEQGPOvjwo0NhF0OAxR4S4ShXmFArBEIbIuAESTejBAKXk/RAAhhi0CABOglwcK2LOT4gNmzWZA3FSkUYEECIYjAQAgfJLlkta9WcKoKR59t4Rd5luCAAyWYxcRS/q1g3AAKBFfBCVi7kbFpfyQ0U0ILkIcQAgH0OODlYhxsK20THXAGZeyhbJt0cS9Q/JAGb8sooN2LmCzlC+a+pED0QJaw9SgQTEVlHB8kJ8IKplv5ggS3zKaBnV/CUOgICiRAAAEJKDBCCcj3NsEBDThMA3qBiSAAACH5BAkJAC8ALAAAAABkAGQAhfyOFPzKjPyuVPzmxPyeNPy+dPzarPz27PzSnPymRPy2ZPzGhPyWJPzu3PzOnPyiRPzChPzixPz+/PzWrPyqVPy6dPzOlPyyXPzq1PyiPPzCfPzevPz69PzWpPyqTPy6bPyaLPySHPzKlPyuXPzmzPyePPy+fPzatPz29PzSpPymTPy2bPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+wJdwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum4sS1yYg2rgk53gzIgDYQ5SIfI9sJOyAAAkNfIVCEgWBgSZwhnsNKoqAKoSOchh/koIYlnKQmoKVnU4SHByNUoghmoyjTRwRDiwBKSSoUA0PkoOuTC4VBKsAIRkWKFN0gHh6vUouI5ohEAepaiIBbreppdpeHB+gww7dcQ0LCSUFtmERBOEAKtSFB3WADwNgEg7vw5yFKZJWkMPCYQE/ABsMXZAEYuAVDiwOJiwETlEJh1YkpBAGKoSoPScktfpCIsM7AfL4cFgRiMLHLhJEMAAFYgNGMhIiFKgwISX+GBQaOAICkYJDszIHHCQQFmLEBqNHy0g4QGJDhAYHbkbdyrWr169gw4odS7as2bNow3BwgcEF1LRVOJwoQCHBgwQUCpx4C7fJ1BPBopXoqRWuBAwrhEZbgaEw1QEkfH5t4EFxRw8v0TQokAGE5wcFGhR2hKLeQUAjJA9BkcKdJAIpVPfiUMAyvxAF+AopaPvOAt29NoA4zXDiEAkTZr5r0WF0HBQmeh80wZfyacxRG5gkLimDKAknpAcKccK5mQjcoxmXYJD4AvNlEKTXlGLISu4rgFuKOF9RAPsVnfaBfo6I0J8iLBwHAXcQEGgIQAcCUt8h4Z1GHnxkoBfhMMz+CGHdQS5lt92B3hGBXAv8MIchGSgkEqEJkvEWTgi/cSXcgQQYRwRrrikC2zFc0dZfCBUQKMFmnXmWQWgrxnEABfN5IFsRLpAQAQkujPXhQSF44E9fSByW2G2MNSmWBChMUIJtIQyWFZhOyEVXAhngpZeDcCpxAFsuTJnnn4AGKuigUJRyAgsfrLDABG+MUYoLDTTgliMSkGCCcoooEAGQXhyQQgEjJKDCBRA8pVIKI2oCwjQwRTACpoAQ8EFmY3AgAoq3KYBnFBykMFw4GXSIkwOwvhMCdVqcUKwmJdBKUgnpMdAcFgek+s6AZHBgQn8jZHmFBdzVRMYBy3Kp4xT+B0TCHbJiTPCimS+Q0ONp3Y6x4IEe7LrEjdzxIkaA82WgrxIn/Eqcv0uU0kAEKaRw1SlMsHRgCQMn0U56FHjrzAkCCBWCACf4KcS2+FaMhAuZEFeByC808EG5ADAwqxIQ9odtFYhwx0AKGLmggnjwaGxEAxFOAG/LBvOTmp6m8YNSmAvNl8CXVlgANAAgCGuErVffIcJA/BIXgggmKwGdeAwggNGW1zl7NncXCH3FASIkrUwGey1RIXfkJeGCAl2X2EUDJqhQAggElOCBBXIfAVF/LDhIG8x2MHCBs1hMNcAGG5DA6RLf9FekEr2+KkkICYjQeCcoSJzeCiynsYFdBgJkUIIABUzQQNlnCDkfu0yUYoopR4uhT3/jDBqB3fxkTegBUROnAMtwXXxajoQe4sDVISSf/QsQUR5z5N/bd4IKyzKgQt7lE+GpAnXhpUBs7YcJKQYH8F6/IUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSnPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWrPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzSpPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrVqv2Kx2y+16v+CweEwum5EUynkd7Uwuo0mHTVemTCEAIGRK1f9FFyJ6eiIjUhQdBygBJgQLIA0daoBPFAWEhCeUTm4qDJmFJCAHnJVKBy6hAAwHTwcLeauEDCoNp0yXq5tOLxWDs6EfGbhLI8CFh00HHsHBw6bFRAd4enyuuQHOzirYXB0ZICgN0VEHb3FzTS+y26sMIOVWvgUMLgUt8lBpUC3uzgLUZWmAKRQGb2QObPjn7FaWDghmGdLnxUE7hqFYaMlwMROJF2ZAgMK4SoMWFKpmJSBW5gEykoRUaOEwctVKMw9qwtTjQQv+wWAQEIoRuTPTAi0UTMxiwIJilxIdYYLY0gGCThcBnHbp8KGoHgYgtxx4IGBDAggG6LDwCkCFQKQvSmQoRUdh0RATtErbR5SkiAhv92LpkBOjiApCBWMZqzPY4bCKvxk4sS1EgMSRs1AYKyCECwagQyRoQS6zGAoZULB4AKKEH9OwY8ueTbu27duyOzRAYQJDAgwmxgXGHYVCgxYFQ+ErTbz4BAHuBOS1xM82BQ7JtxWYroTCCwcXTDxw8EJvsRIpGYYo0X0CBmQMMHCH3YHETgzDh6DITqgAB9koNPYPAyggwY4zIUAWGUReITAcBRq4o4F5dWQggVc3FXHACu7+rIBZMRNEpd4ERmSw0DYbsBSZAenB5EJaRZjozgkqKhagVwzAOE0C7iTwIS4heoWXERC6YwKFdGTAY1EZFnFgMAnSB0GD+cGw3ywFFBjbjTDBkwQF7tUU33ymHWAfTCRUKYR3DoygwQjkIVlJCQIiyF4TaciJC5j8BbOdnriBacFLoYhgAZnN4dnAAn0CsBygicKgGwe9/RbcC2pGqummnHbq6aeghlpcnqJa8p0CLWjwwASSkKFbBhmUd8oLCghA6AYBZAApniAgkIAEG6ygwp11NGCVYxY4sOuXDRBA6B6XLUtFA0tWxoG0RVDgQLWzfLTGC2f+E4JDWbxgwT/+BGBrSWEYEZApFC7944IDZrwAHUknDPBQo7OooG4TEzzrTj5YZCCwSgqCQcEDRXnwmhUoHLzKBsSGQUEERXl7RcQYUYyInEllnPAUJUgcSgLkMnFACRMowAIHJfxIBAUjFNXNYiLOAsG7QnTggAonIHOCB3IwEfBOC/DcRAUMiaAREx2MwO8JF7wrI0khaInFT9Hp1UEEJgMAWHcthJ3JzkiBwK8eTSrBsTsi/KdEBueO+A0HXa0iggoD6HVA3v98IDOYOWcyURfe4SHC4gwUwAJdTIDQ4jYvLsFnZSMoTYXPE0xQApJFkjSh5RlU0GcIGCibWQcqwORWEz4HUAFdBhioAMnDkaUQEUkOWpLCCy8coDkgFDBNUgX/mnaMYQGUOgRUGK3n/JqtM+TB8IkesDYhG4wsKpjc2oSo8xSUAMGzIkBQAvabJsIB0CGEcIIKciTf3AHeT69/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1ICzf9kLCVWeoWGRnwTgIsACoOHkIYHAoyMAgeRmXgPlZUPmqBdL3GdiyF3oalXDyKliyKfqrJFFBiujBiEs7MvLLeLLKhYFMS6u2olHL+AHCVXFC8lJw8PFQ4NxsdZJSjLfyjOSC8qGKRjDCAB2Npayd5zzUgZAgyvCifZ7EYvCu9yCsKGUHAgphODB/n0CbTlbwyEbIluicCnEAmnhrCMHFjR6haLBqAodMjQoEPCfea8nTIiod4vEQE6ZDrQwqUBFSeLXPSWkVb+gncfI1Fo0fGcBC0HSLy7ZKSDi3cMHERK4VIOiZwCSyj6pcBBvgYNcUIqwQxkFj5+SolwlJCsvxFY1WRgFhDLm5R/6tQl4vbdhbhdOhSUswIwkQMbLCiDZ+EEpiQvGlYwvIWCh6IAGJjtsiSDhCcLpGSogkXwuxBShUrAwGHChwwKKUR4h2HvoRePKw7AaxBhxVkdZv8SYPu3phckMDMyANv4rgYClP/hcNT5sQYmeJ9b8cj6sQ4lIgwGECKBBNLe2RE7kCHDC5Pp48ufT7++/fv48+vfn17kAfj8aQKNBAGY8IEJI2zwAmUBnlWBAE/J4QIJHsjUYB4paFDVHwz+RJDbhWq88FMpdmxxgAMbOFCcfR0Q5YoILViYBAUFgGBACAYIQNF+DWhnymZHdPBAhGQcJCN+wv2iwRUlaBdCOPh10M0yKBxZRAuMtKBfBj4yEkJzRyi1CAn6ObChK1ElwRAgGJR5ZilpIoHlIlrmx6VKYBrRJCBP6ielN1UmISSRY7jwgJX2aeDNks8UIMCNKAhQAIPO9fhLCEBC5oAEKjbYonSAwIgoiFgckACocohQIqlqZPhmkRp8yCoXFKgA4RwuCCDWrHu8sMEIBByY4IK86uEfgMUmq+yyzDbr7LPQRqveqNIicYAEF0SgwQgnZFotER2sFkJRISiAQBr+qXQQzQMqjEZpJiks8CoAqq6jyQEBTDnGPejq08ECpdR2nAWAMDCCrLtsMO8cdULy6SIM7HjMAWt2shIkBFWiAMKqnNDlHw0XQsEIpUA5y8ioAvLQIR0QUEoF2gS3DAj96tEBwZ2oELOiv4DAMRsdBFBKaruMvMxVkLRUiQErItGBA9kucIEE1B5RwcJ/RBDJARBUMkLVR5RQTkciGICByVc00M+LaBfSQFpziGBB00V04IGPIagA9hCsuFKYJhlAkJIBC9BNBAUeLy2xoCuUokCeW//6gQUPOLB33WtrfDkMDVT8R1fvqtFBCshyccItJ2gBTQvjxv1a6No07ndgFw2MgAEIIJCwQHf3UZB5JwqEnsLP9VGwWCkcwH4hJa6Q+S0Mc5YSsrQZpEyGCJBHS8EHpVigPIgvQICqCBAY3mwDFrzJgAXZP39ABQmQUkcFxH/r3wH4l/78/vz3T0QQACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp9QZad08lBOpUN0y+1CDyoMx8UQhVAYldbLbnMnDpAIQK/TRSDJxM3vIzsUDHaDdQwUHX6JfRMUIYSPACEUe4qVXSUKkJAKJZaeUB0EmpoEiJ+nShkuo5AMGahsGRQBEREXFGtLCKyaKrBREx0nJCFlcyIMKCslpkgQvJAQv09wAnOaIgQNlEYc0I8c003CBt8CA9xEjt+DBuMlFA8PHg4pihMn5ewsr0Yo7IPCKZlQYgUHYwwMWDiRjg0cfQBZ5BqCAaAdDEoORBD0SESCbW5SWLBYR0NDFSTp+EJyQBQrCw3cFEhJx0AnIhk4AnSFZML+iGusEjR7I4AmABER0nWoQJKAvSMlvEETcYJNiXU0BcTEKfUbpz8RAIKYGEWFzpQoBhRhhJWVpIZDGoAAaMCBlwVAUzLYYATQ2VaHkmRoy4vBSi4mjN6hcGSCBBZ57YhgoUdJicisRIzwklixiAJJwGBAYcwFBxJqmJT4m3lzlwCYAbqQsOQAFQoeTgx4yiQDRGiGvARSzOGmpRdF2RX30uA3SQxkE/mMDWnFUGAJjIp4ADdRAxbfGKhl44A6Lw5bP00owPpR0jYdVqTc3l1Rhwft62SLzqVBcnYirFBfJcIoEBsHI/DWBhzgfSMCBun9MkEDD5BgAAMJWRBBCQP+vpFBJrwECJI4QkzwQgYllJDBiJUcsAAK1DHAgQodkojKBBksIMAYyITAQQIPsGjjkEO8UIIEJ5wgQQkKEunkk1BGKeWUVFZp5ZVYZvlGCjVq6UcHDrTwAQQftODAdV76QRAGIQBlBgYcpplIBwWYZwiacr5xAmGEhFBAlyUaKWSe30HDQoQ9NbAChgysMKiWEwTAzgg1vlDRRS/kCcMBXZ3X5FoqRCYCjXm+YB4hImSaRAedDWICnleWYJFxR4TySCl5ZmBRPz2ZNYhhgEZpKoCqJvECCYOQUGyaKYAIjQL8EWFiBYxW8EKwUU7QwqSATujAtZrG1SArh4brxXr+fA7iJ6zmjjMcYOy228SabZkBQZzytpFCmBWQ2YIEn+br0AHxCmzwwQgnrPDCDDfs8MMQRywxlPhoAAEGBKQ28R8SyCGZASoU7EYHDaQI7pMdqJDuURFEy0cDC4DAAQcCjCDyJxKsTAcDNltygMf6vUrkBHOxYgCifMTXEaVDnnBqHRFUchUkAiw7jQlP06FAJe8SshyJE1xaGLZO+PqITTaGHR7ZTTiwMghIw8IUNAIlcsB/kkVwsyIUZA0AAZasRgjcRB7gXEd2VUKQAMUwEEICLg/UwAgGiqDACI8qEeooIgjtyb5WMPOGA+PWwYID2HawESQiQBC3lRkUTQhgP1+MwGfnr1fJ6iieO0FyBCxgyIEJZ+b6jyYo8LoxDOVxnvjyzPPy/PKCa8IArRsjN0rV0AtxX34McNe9EAd8gJkIH0QesbYw3oFCC2wzjOMDC0TwQAbxj6///vz3v38QACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPyeNPzarPz27Py2ZPymRPzSpPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/Py6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69Py6bPyqTPzWpPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29Py2bPymTPzGjPyWLPzy5PzWrP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj8ikcslsOp/QqHRKrUI7pcmk1LF6v9ZOxlNgmBmFSqYLbruRjQgDQK/TGZrGe/92YeyAdCIkLnyGYRWBigAVbIePThQXc4uADBcUkJpLDR+Vih96m6NGKJSfdgwopFMUHQcZEw4NBx2ZSx0LqIoLjqxMFA0KAiKpHigut0gHCLuBCAe/TR0vFsWKDBgOSgckzoAk0dJKFAstuxsoykXM33bQTi4vASwKa3wdLNe7IS/rQx0iuKvTawmFEipEFFMoIsEEX14ogDjnbkMJJKYGqsKloMAiBgsKgWmwYiAdBP+EdBoYasmLEJ9EsIDY6sE+dyIyHKEw4ub+JwYjUhJx4REVgwlfOpQ0SccEkg4evnmgSYSCiW8JhEI54NPdCqowXJDoameQyCQulu4ScdFKCaZ1Cpw10kDDKUsmRClxUHTtAy8c4NIpoDOJGBVlzhTwUEJrkZfuFniZIBgA4SYHsmwR5wQFTGcyvWSofGKuoRInvolQ4OXAXZaO2xzwBFovlQ7N4F4YZdOZii8UXrx2xsD2oxS0PxVo60UsUw2x3zhIXamFArBRKPAdKMA4JAoZMAwHcOIF9ikGPu/6wJxVBwUWToQIUWCFBtNggm/YJaDxOCEHDIACCrNEV8VBHpAFQAgRePcfKeAtsMIJBRRwwgcKNGDgg5r+UOBCA7RsyOGIJJZoIoQUiHjiHh5OcMECESwwwgTJrDiKCyYkEMI+IoSQgAn42ejGARf0pUiPF3AmZBsuRAVaBUEuOcUBEJgEj5RhaKBgJSJocJ6JWJiwwgYrmOAAWMGpN1AL/mB5kDeAiNBfSgf8IRgGStpYwn6LWGTEBFuuhdSSDViASndFEFAZHQQsmU+gAIiwwDrUVbYBoQk4s4JtkK6lIikTUGTUNkMsWkeeJaLgziqlmgoAqiSq+g2rQnSKighfjuPAeIGEQKoQfJJGqFqfJGBbIos2KuSjt7KwDqCViTCokA0IcKhxdVaGJ5YDBBvIBgMYkSZc/Xz6y0H+xMQ55xEB2VpWBLmS2IEDJnywwQdmntfOQCrAimUUDSQImgcO/ivFASMYGUiPI/hr8BQuaLBCCKcwEEKZDj9MhYccPMDCAiw8gIy5GkORIsklp6zyyiy37PLLMMcs88wcvvKhC7bQLAV4ERQVQgUToCyFGA3E26EDxNIRggJCR4KCAAVsgEFhHGaQHCAFcPAIBQrcxADV43SgwScCRPlFCgoDgIDRfBxQqSIhTLvHW98WvEkDkL5wCGWBXPZfA7uwZohrgQjA9h4uqBkIA1obUk6cckvTAbKLtHTIASxQUgDTHFIwgeJ1iBDUdwfIckDTQlBwwOkbd7S4CaifW0JlACp4EIB/Oz/9GQMfjJ7yC2+XV4ULE7wAAgpFq7wdICG0pzMuuT1z+MwNZKqIsc83kYEEi0gAdvbLXG2HBRmDL4Q+C7NgPhPOAVL2+kwEzEAxDBAMfzxamH3//vz37///AFxREAAAO2l6MlNnMjJPaEJTY1lvVkpORFI0dmF6ek1tK1ZrditmL1VXWmxseUxSc0NPYk4vVU5kVVRWeThHRmlpUWNqNWQ=";var f=k.win,x=k.doc,j=!0,p=!1,r,d,n=500000,a=1000;function b(y){var B,A,z;B=x.body.scrollTop||x.documentElement.scrollTop;if(f.innerHeight){z=f.innerHeight}else{z=x.documentElement.clientHeight}A=B+(z-y.offsetHeight)/2;y.style.top=A+"px";y._dlgInfo.isTopOverridden=j}function o(y,A){for(var z=0;z<y.length;++z){if(y[z]==A){return j}}return p}function s(B){for(var C=0;C<x.styleSheets.length;++C){var H=x.styleSheets[C],E=p,z=p,G,I;try{E=H.cssRules;z=x.querySelectorAll}catch(D){}if(E&&z){for(var A=0;A<E.length;++A){G=E[A];I=p;try{I=z(G.selectorText)}catch(D){}if(I&&o(I,B)){var y=G.style.getPropertyValue("top"),F=G.style.getPropertyValue("bottom");if((y&&y!="auto")||(F&&F!="auto")){return j}}}}}return p}function t(z){var y=p;if(f.getComputedStyle){y=f.getComputedStyle(z)}else{if(z.currentStyle){y=z.currentStyle}}if(y&&y.position!="absolute"){return p}if((z.style.top!="auto"&&z.style.top!="")||(z.style.bottom!="auto"&&z.style.bottom!="")){return p}return !s(z)}function v(z){var y=x.createEvent("MouseEvents");y.initMouseEvent(z.type,z.bubbles,z.cancelable,f,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.button,z.relatedTarget);return y}function c(y){x.body.dispatchEvent(v(y))}function w(){r=x.createElement("div");d=r.style;d.position="fixed";d.display="block";d.left=d.top=d.margin=d.padding=0;d.backgroundColor="#000";d.filter="alpha(opacity=30)";d.opacity=d.MozOpacity=0.3;d.zIndex=n;d.width=d.height="100%";if(x.createEvent){k.addEventListener(r,"click",c)}}function l(){if(r===h){w()}if(!x.body.contains(r)){x.body.appendChild(r)}}function u(){if(r!==h){k.removeEventListener(r,"click",c);x.body.removeChild(r);r=h}}var e={pendingDialogStack:[],_updateStacking:function(B){var D=this,y,A,z,C;A=D.pendingDialogStack;if(A.length==0){u();return}if(B!=true){l()}C=n;k.each(A,function(E){C++;E._dlgInfo.mask.style.zIndex=C++;E.style.zIndex=C})},pushDialog:function(z,B){var C=this,y,A=z.getBoundingClientRect();if(C.pendingDialogStack.length>=a){k.error("Too many modal dialogs.");return}y=x.createElement("div");y.className="dynamsoft-backdrop";if(B==true){y.style.left=(A.x|A.left)+"px";y.style.top=(A.y|A.top)+"px";y.style.width=A.width+"px";y.style.height=A.height+"px"}if(x.createEvent){k.addEventListener(y,"click",function(D){if(z.dispatchEvent){var E=v(D);z.dispatchEvent(E)}})}z.parentNode.insertBefore(y,z.nextSibling);z._dlgInfo.mask=y;C.pendingDialogStack.push(z);C._updateStacking(B)},removeDialog:function(A){var B=this,z,y;z=k.isArray(B.pendingDialogStack)?k.indexOf(A,B.pendingDialogStack):-1;if(z==-1){return}B.pendingDialogStack.splice(z,1);y=A._dlgInfo.mask;y.parentNode.removeChild(y);A._dlgInfo.mask=null;B._updateStacking()}};function m(A,z){var B=this,y;if(B.open){k.error("showDialog called on open dialog.");return}B.open=j;B.removeAttribute("closed");B.setAttribute("open","open");if(t(B)){b(B)}if(A){B._dlgInfo.modal=j;e.pushDialog(B,z)}}function q(y){var z=this;if(!z.open){k.error("closeDialog called on closed dialog.")}z.open=p;z.removeAttribute("open");z.setAttribute("closed","closed");if(typeof y!="undefined"){z.returnValue=y}if(z._dlgInfo.isTopOverridden){z.style.top="auto"}if(z._dlgInfo.modal){e.removeDialog(z)}return z.returnValue}k.dialog={setup:function(y,z){y.show=m.bind(y,p,z);y.showModal=m.bind(y,j,z);y.close=q.bind(y);y._dlgInfo={}}};k.mask={container:false,bConfined:false,dlgMask:false,preOnresize:false,preOnscroll:false};k.showMask=function(){if(k.mask.dlgMask){return}var A=k.mask.bConfined,z=k.mask.container,y;if(z){y=z.getBoundingClientRect();var D=z.firstChild;while(D){if(k.isFunction(D.getBoundingClientRect)){y=D.getBoundingClientRect();break}D=D.nextSibling}}var B=document.createElement("div");B.className="dynamsoft-dialog-wrap";if(!window.onresize){k.mask.preOnresize=false}else{k.mask.preOnresize=window.onresize}if(!window.onscroll){k.mask.preOnscroll=false}else{k.mask.preOnscroll=window.onscroll}if(A&&y){window.onresize=window.onscroll=function(){y=z.getBoundingClientRect();var E=z.firstChild;while(E){if(k.isFunction(E.getBoundingClientRect)){y=E.getBoundingClientRect();break}E=E.nextSibling}B.style.left=(y.x|y.left)+"px";B.style.top=(y.y|y.top)+"px";B.style.width=y.width+"px";if(y.width<470){k.loaderBarWidth=(y.width-10)+"px"}B.style.height=k.loaderBarHeight=y.height+"px";if(k.mask.dlgMask){k.mask.dlgMask.close();k.mask.dlgMask.showModal()}};window.onscroll()}var C=['<div align="center" ','class="',k.loaderBarClassName,'" ','style="margin:0 auto;width:',k.loaderBarWidth,";height:",k.loaderBarHeight,";line-height:",k.loaderBarHeight,'"><img src="',k.loaderBarSource,'" /></div>'].join("");B.innerHTML=C;document.body.appendChild(B);k.mask.dlgMask=B;k.dialog.setup(k.mask.dlgMask,A);k.mask.dlgMask.showModal()};k.hideMask=function(){var y=k.mask.dlgMask;if(y){y.close();document.body.removeChild(y);k.mask.dlgMask=false}if(!k.mask.preOnresize){window.onresize=null}else{window.onresize=k.mask.preOnresize}k.mask.preOnresize=false;if(!k.mask.preOnscroll){window.onscroll=null}else{window.onscroll=k.mask.preOnscroll}k.mask.preOnscroll=false}})(Dynamsoft);(function(t){var w=20200521;if(t._sizzle_ver){if(t.isNumber(t._sizzle_ver)&&t._sizzle_ver>=w){return}}t._sizzle_ver=w;var aq,g=RegExp,ae,ab,d,k,u,al,Y,U,s,v,o,p,ao=!0,f,M,b,S,am="dws_"+1*new Date(),an=window.document,K=0,y=0,ai,aj,G,z,A=function(i,e){if(i===e){s=true}return 0},I=[],V=I.pop,aa=I.push,ak=I.push,F=I.slice,H=function(ax,aw){var av=0,e=ax.length;for(;av<e;av++){if(ax[av]===aw){return av}}return -1},ag="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Q="[\\x20\\t\\r\\n\\f]",C="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ad=["\\[",Q,"*(",C,")(?:",Q,"*([*^$|!~]?=)",Q,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(",C,"))|)",Q,"*\\]"].join(""),E=new g(Q+"+","g"),ah=new g(["^",Q,"+|((?:^|[^\\\\])(?:\\\\.)*)",Q,"+$"].join(""),"g"),m=new g(["^",Q,"*,",Q,"*"].join("")),X=new g(["^",Q,"*([>+~]|",Q,")",Q,"*"].join("")),h=new g("^"+C+"$"),W={ID:new g("^#("+C+")"),CLASS:new g("^\\.("+C+")"),TAG:new g("^("+C+"|[*])"),ATTR:new g("^"+ad),needsContext:new g(["^",Q,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(",Q,"*((?:-\\d)?\\d*)",Q,"*\\)|)(?=[^-]|$)"].join(""),"i")},L=/^[^{]+\{\s*\[native \w/,ac=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,c=/^(?:#([\w-]+)|(\w+)|\.([\w-]+)) .*$/,R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,l=function(i,e){if(e){if(i==="\0"){return"\uFFFD"}return i.slice(0,-1)+"\\"+i.charCodeAt(i.length-1).toString(16)+" "}return"\\"+i},q=function(){v()};function au(){var i=[];function e(av,aw){if(i.push(av+" ")>ab.cacheLength){delete e[i.shift()]}return(e[av+" "]=aw)}return e}function a(ax){var aw=0,av=ax.length,e="";for(;aw<av;aw++){e+=ax[aw].value}return e}ai=au();aj=au();G=au();z=au();try{ak.apply((I=F.call(an.childNodes)),an.childNodes);var r=I[an.childNodes.length].nodeType}catch(at){ak={apply:I.length?function(i,e){aa.apply(i,F.call(e))}:function(ax,aw){var e=ax.length,av=0;while((ax[e++]=aw[av++])){}ax.length=e-1}}}function af(aB,av,aE,aH){var az,aF,ay,e,aG,ax,aC,aw=av&&av.ownerDocument,aD=av?av.nodeType:9;aE=aE||[];if(typeof aB!=="string"||!aB||aD!==1&&aD!==9&&aD!==11){return aE}if(!aH){if((av?av.ownerDocument||av:an)!==o){v(av)}av=av||o;if(aD!==11){if((aG=ac.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){aE.push(ay);return aE}}else{return aE}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){aE.push(ay);return aE}}}else{if(aG[2]){ak.apply(aE,av.getElementsByTagName(aB));return aE}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));return aE}}}}else{if((aG=c.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){av=ay}}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){av=ay}}az="#"+az+" "}else{if((az=aG[2])){ak.apply(aE,av.getElementsByTagName(aB));av=aE[0];az=az+" "}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));av=aE[0];az=az+" "}}}aB=aB.replace(az,"")}}}if(ae.qsa&&!z[aB+" "]&&(!f||!f.test(aB))){if(aD!==1){aw=av;aC=aB}else{if(av.nodeName.toLowerCase()!=="object"){if((e=av.getAttribute("id"))){e=e.replace(R,l)}else{av.setAttribute("id",(e=am))}ax=k(aB);aF=ax.length;while(aF--){ax[aF]="#"+e+" "+a(ax[aF])}aC=ax.join(",");aw=av}}if(aC){try{ak.apply(aE,aw.querySelectorAll(aC));return aE}catch(aA){z(aB,!0)}finally{if(e===am){av.removeAttribute("id")}}}}}return al(aB.replace(ah,"$1"),av,aE,aH)}function ap(e){e[am]=true;return e}function Z(av){var i=o.createElement("fieldset");try{return !!av(i)}catch(aw){return false}finally{if(i.parentNode){i.parentNode.removeChild(i)}i=null}}function B(e,i){}function j(i,e){var aw=e&&i,av=aw&&i.nodeType===1&&e.nodeType===1&&i.sourceIndex-e.sourceIndex;if(av){return av}if(aw){while((aw=aw.nextSibling)){if(aw===e){return -1}}}return i?1:-1}function T(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}ae=af.support={};v=af.setDocument=function(av){var e,i,aw=av?av.ownerDocument||av:an;if(aw===o||aw.nodeType!==9||!aw.documentElement){return o}o=aw;p=o.documentElement;if(an!==o&&(i=o.defaultView)&&i.top!==i){if(i.addEventListener){i.addEventListener("unload",q,false)}else{if(i.attachEvent){i.attachEvent("onunload",q)}}}ae.attributes=Z(function(ax){ax.className="i";return !ax.getAttribute("className")});ae.getElementsByTagName=Z(function(ax){ax.appendChild(o.createComment(""));return !ax.getElementsByTagName("*").length});ae.getElementsByClassName=L.test(o.getElementsByClassName);ae.getById=Z(function(ax){p.appendChild(ax).id=am;return !o.getElementsByName||!o.getElementsByName(am).length});if(ae.getById){ab.filter.ID=function(ay){var ax=ay;return function(az){return az.getAttribute("id")===ax}}}else{ab.filter.ID=function(ay){var ax=new g(["^",ay,"$"].join(""),"g");return function(aA){var az=typeof aA.getAttributeNode!=="undefined"&&aA.getAttributeNode("id");return az&&ax.test(az.value)}}}ab.find.TAG=ae.getElementsByTagName?function(ax,ay){if(typeof ay.getElementsByTagName!=="undefined"){return ay.getElementsByTagName(ax)}else{if(ae.qsa){return ay.querySelectorAll(ax)}}}:function(ax,aB){var aC,aA=[],az=0,ay=aB.getElementsByTagName(ax);if(ax==="*"){while((aC=ay[az++])){if(aC.nodeType===1){aA.push(aC)}}return aA}return ay};ab.find.CLASS=ae.getElementsByClassName&&function(ay,ax){if(typeof ax.getElementsByClassName!=="undefined"){return ax.getElementsByClassName(ay)}};M=[];f=[];if((ae.qsa=L.test(o.querySelectorAll))){Z(function(ax){p.appendChild(ax).innerHTML="<a id='"+am+"'></a><select id='"+am+"-\r\\' msallowcapture=''><option selected=''></option></select>";if(ax.querySelectorAll("[msallowcapture^='']").length){f.push("[*^$]="+Q+"*(?:''|\"\")")}if(!ax.querySelectorAll("[selected]").length){f.push("\\["+Q+"*(?:value|"+ag+")")}if(!ax.querySelectorAll("[id~="+am+"-]").length){f.push("~=")}if(!ax.querySelectorAll(":checked").length){f.push(":checked")}if(!ax.querySelectorAll("a#"+am+"+*").length){f.push(".#.+[+~]")}});Z(function(ay){ay.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ax=o.createElement("input");ax.setAttribute("type","hidden");ay.appendChild(ax).setAttribute("name","D");if(ay.querySelectorAll("[name=d]").length){f.push("name"+Q+"*[*^$|!~]?=")}if(ay.querySelectorAll(":enabled").length!==2){f.push(":enabled",":disabled")}p.appendChild(ay).disabled=true;if(ay.querySelectorAll(":disabled").length!==2){f.push(":enabled",":disabled")}ay.querySelectorAll("*,:x");f.push(",.*:")})}if((ae.matchesSelector=L.test((b=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)))){Z(function(ax){ae.disconnectedMatch=b.call(ax,"*");b.call(ax,"[s!='']:x")})}f=f.length&&new g(f.join("|"));M=M.length&&new g(M.join("|"));e=L.test(p.compareDocumentPosition);S=e||L.test(p.contains)?function(ay,ax){var aA=ay.nodeType===9?ay.documentElement:ay,az=ax&&ax.parentNode;return ay===az||!!(az&&az.nodeType===1&&(aA.contains?aA.contains(az):ay.compareDocumentPosition&&ay.compareDocumentPosition(az)&16))}:function(ay,ax){if(ax){while((ax=ax.parentNode)){if(ax===ay){return true}}}return false};A=e?function(ay,ax){if(ay===ax){s=true;return 0}var az=!ay.compareDocumentPosition-!ax.compareDocumentPosition;if(az){return az}az=(ay.ownerDocument||ay)===(ax.ownerDocument||ax)?ay.compareDocumentPosition(ax):1;if(az&1||(!ae.sortDetached&&ax.compareDocumentPosition(ay)===az)){if(ay===o||ay.ownerDocument===an&&S(an,ay)){return -1}if(ax===o||ax.ownerDocument===an&&S(an,ax)){return 1}return U?(H(U,ay)-H(U,ax)):0}return az&4?-1:1}:function(ay,ax){if(ay===ax){s=true;return 0}var aE,aB=0,aD=ay.parentNode,aA=ax.parentNode,az=[ay],aC=[ax];if(!aD||!aA){return ay===o?-1:ax===o?1:aD?-1:aA?1:U?(H(U,ay)-H(U,ax)):0}else{if(aD===aA){return j(ay,ax)}}aE=ay;while((aE=aE.parentNode)){az.unshift(aE)}aE=ax;while((aE=aE.parentNode)){aC.unshift(aE)}while(az[aB]===aC[aB]){aB++}return aB?j(az[aB],aC[aB]):az[aB]===an?-1:aC[aB]===an?1:0};return o};af.matches=function(i,e){return af(i,null,null,e)};af.matchesSelector=function(av,ax){if((av.ownerDocument||av)!==o){v(av)}if(ae.matchesSelector&&!z[ax+" "]&&(!M||!M.test(ax))&&(!f||!f.test(ax))){try{var i=b.call(av,ax);if(i||ae.disconnectedMatch||av.document&&av.document.nodeType!==11){return i}}catch(aw){z(ax,!0)}}return af(ax,o,null,[av]).length>0};af.contains=function(e,i){if((e.ownerDocument||e)!==o){v(e)}return S(e,i)};af.escape=function(e){return(e+"").replace(R,l)};af.error=function(e){throw new Error("Syntax error: "+e)};af.uniqueSort=function(aw){var ax,ay=[],e=0,av=0;s=!ae.detectDuplicates;U=!ae.sortStable&&aw.slice(0);aw.sort(A);if(s){while((ax=aw[av++])){if(ax===aw[av]){e=ay.push(av)}}while(e--){aw.splice(ay[e],1)}}U=null;return aw};d=af.getText=function(ay){var ax,av="",aw=0,e=ay.nodeType;if(!e){while((ax=ay[aw++])){av+=d(ax)}}else{if(e===1||e===9||e===11){if(typeof ay.textContent==="string"){return ay.textContent}else{for(ay=ay.firstChild;ay;ay=ay.nextSibling){av+=d(ay)}}}else{if(e===3||e===4){return ay.nodeValue}}}return av};ab=af.selectors={cacheLength:50,match:W,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[3]=(e[3]||e[4]||e[5]||"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)}},filter:{TAG:function(i){var e=i.toLowerCase();return i==="*"?function(){return true}:function(av){return av.nodeName&&av.nodeName.toLowerCase()===e}},CLASS:function(e){var i=ai[e+" "];return i||(i=new g("(^|"+Q+")"+e+"("+Q+"|$)"))&&ai(e,function(av){return i.test(typeof av.className==="string"&&av.className||typeof av.getAttribute!=="undefined"&&av.getAttribute("class")||"")})},ATTR:function(av,i,e){return function(ax){var aw=af.attr(ax,av);if(aw==null){return i==="!="}if(!i){return true}aw+="";return i==="="?aw===e:i==="!="?aw!==e:i==="^="?e&&aw.indexOf(e)===0:i==="*="?e&&aw.indexOf(e)>-1:i==="$="?e&&aw.slice(-e.length)===e:i==="~="?(" "+aw.replace(E," ")+" ").indexOf(e)>-1:i==="|="?aw===e||aw.slice(0,e.length+1)===e+"-":false}}}};function D(){}D.prototype=ab.filters=ab.pseudos;ab.setFilters=new D();k=af.tokenize=function(ax,aC){var i,ay,aA=[],aB,az,av,e,aw=aj[ax+" "];if(aw){return aC?0:aw.slice(0)}az=ax;av=[];e=ab.preFilter;while(az){if(!i||(ay=m.exec(az))){if(ay){az=az.slice(ay[0].length)||az}av.push((aA=[]))}i=false;if((ay=X.exec(az))){i=ay.shift();aA.push({value:i,type:ay[0].replace(ah," ")});az=az.slice(i.length)}for(aB in ab.filter){if((ay=W[aB].exec(az))&&(!e[aB]||(ay=e[aB](ay)))){i=ay.shift();aA.push({value:i,type:aB,matches:ay});az=az.slice(i.length)}}if(!i){break}}return aC?az.length:az?af.error(ax):aj(ax,av).slice(0)};function O(az,ax,ay){var e=ax.dir,aw=ax.next,av=aw||e,aA=ay&&av==="parentNode",i=y++;return ax.first?function(aD,aC,aB){while((aD=aD[e])){if(aD.nodeType===1||aA){return az(aD,aC,aB)}}return false}:function(aG,aE,aD){var aH,aB,aF,aC=[K,i];if(aD){while((aG=aG[e])){if(aG.nodeType===1||aA){if(az(aG,aE,aD)){return true}}}}else{while((aG=aG[e])){if(aG.nodeType===1||aA){aF=aG[am]||(aG[am]={});aB=aF[aG.uniqueID]||(aF[aG.uniqueID]={});if(aw&&aw===aG.nodeName.toLowerCase()){aG=aG[e]||aG}else{if((aH=aB[av])&&aH[0]===K&&aH[1]===i){return(aC[2]=aH[2])}else{aB[av]=aC;if((aC[2]=az(aG,aE,aD))){return true}}}}}}return false}}function x(e){return e.length>1?function(ay,ax,av){var aw=e.length;while(aw--){if(!e[aw](ay,ax,av)){return false}}return true}:e[0]}function J(av,ay,ax){var aw=0,e=ay.length;for(;aw<e;aw++){af(av,ay[aw],ax)}return ax}function N(e,av,aw,ax,aA){var ay,aD=[],az=0,aB=e.length,aC=av!=null;for(;az<aB;az++){if((ay=e[az])){if(!aw||aw(ay,ax,aA)){aD.push(ay);if(aC){av.push(az)}}}}return aD}function ar(av,i,ax,aw,ay,e){if(aw&&!aw[am]){aw=ar(aw)}if(ay&&!ay[am]){ay=ar(ay,e)}return ap(function(aJ,aG,aB,aI){var aL,aH,aD,aC=[],aK=[],aA=aG.length,az=aJ||J(i||"*",aB.nodeType?[aB]:aB,[]),aE=av&&(aJ||!i)?N(az,aC,av,aB,aI):az,aF=ax?ay||(aJ?av:aA||aw)?[]:aG:aE;if(ax){ax(aE,aF,aB,aI)}if(aw){aL=N(aF,aK);aw(aL,[],aB,aI);aH=aL.length;while(aH--){if((aD=aL[aH])){aF[aK[aH]]=!(aE[aK[aH]]=aD)}}}if(aJ){if(ay||av){if(ay){aL=[];aH=aF.length;while(aH--){if((aD=aF[aH])){aL.push((aE[aH]=aD))}}ay(null,(aF=[]),aL,aI)}aH=aF.length;while(aH--){if((aD=aF[aH])&&(aL=ay?H(aJ,aD):aC[aH])>-1){aJ[aL]=!(aG[aL]=aD)}}}}else{aF=N(aF===aG?aF.splice(aA,aF.length):aF);if(ay){ay(null,aG,aF,aI)}else{ak.apply(aG,aF)}}})}function P(aA){var av,ay,aw,az=aA.length,aD=ab.relative[aA[0].type],aE=aD||ab.relative[" "],ax=aD?1:0,aB=O(function(i){return i===av},aE,true),aC=O(function(i){return H(av,i)>-1},aE,true),e=[function(aH,aG,aF){var i=(!aD&&(aF||aG!==Y))||((av=aG).nodeType?aB(aH,aG,aF):aC(aH,aG,aF));av=null;return i}];for(;ax<az;ax++){if((ay=ab.relative[aA[ax].type])){e=[O(x(e),ay)]}else{ay=ab.filter[aA[ax].type].apply(null,aA[ax].matches);if(ay[am]){aw=++ax;for(;aw<az;aw++){if(ab.relative[aA[aw].type]){break}}return ar(ax>1&&x(e),ax>1&&a(aA.slice(0,ax-1).concat({value:aA[ax-2].type===" "?"*":""})).replace(ah,"$1"),ay,ax<aw&&P(aA.slice(ax,aw)),aw<az&&P((aA=aA.slice(aw))),aw<az&&a(aA))}e.push(ay)}}return x(e)}function n(aw,av){var e=av.length>0,ax=aw.length>0,i=function(aH,aB,aG,aF,aK){var aC,aD,aI,aM=0,aE="0",ay=aH&&[],aN=[],aL=Y,aA=aH||ax&&ab.find.TAG("*",aK),az=(K+=aL==null?1:Math.random()||0.1),aJ=aA.length;if(aK){Y=aB===o||aB||aK}for(;aE!==aJ&&(aC=aA[aE])!=null;aE++){if(ax&&aC){aD=0;if(!aB&&aC.ownerDocument!==o){v(aC);aG=!ao}while((aI=aw[aD++])){if(aI(aC,aB||o,aG)){aF.push(aC);break}}if(aK){K=az}}if(e){if((aC=!aI&&aC)){aM--}if(aH){ay.push(aC)}}}aM+=aE;if(e&&aE!==aM){aD=0;while((aI=av[aD++])){aI(ay,aN,aB,aG)}if(aH){if(aM>0){while(aE--){if(!(ay[aE]||aN[aE])){aN[aE]=V.call(aF)}}}aN=N(aN)}ak.apply(aF,aN);if(aK&&!aH&&aN.length>0&&(aM+av.length)>1){af.uniqueSort(aF)}}if(aK){K=az;Y=aL}return ay};return e?ap(i):i}u=af.compile=function(e,aw){var ax,av=[],az=[],ay=G[e+" "];if(!ay){if(!aw){aw=k(e)}ax=aw.length;while(ax--){ay=P(aw[ax]);if(ay[am]){av.push(ay)}else{az.push(ay)}}ay=G(e,n(az,av));ay.selector=e}return ay};al=af.select=function(e,az,ay,av){var ax,aA=typeof e==="function"&&e,aw=!av&&k((e=aA.selector||e));ay=ay||[];(aA||u(e,aw))(av,az,!ao,ay,!az||az);return ay};ae.sortStable=am.split("").sort(A).join("")===am;ae.detectDuplicates=!!s;v();ae.sortDetached=Z(function(e){return e.compareDocumentPosition(o.createElement("fieldset"))&1});if(!Z(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){B("type|href|height|width",function(i,e){return i.getAttribute(e,e.toLowerCase()==="type"?1:2)})}if(!ae.attributes||!Z(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){B("value",function(i,e){if(i.nodeName.toLowerCase()==="input"){return i.defaultValue}})}if(!Z(function(e){return e.getAttribute("disabled")==null})){B(ag,function(i,e){var av;return i[e]===true?e.toLowerCase():(av=i.getAttributeNode(e))&&av.specified?av.value:null})}t.support=ae;t.sizzle=af})(Dynamsoft.Lib);(function(j){var aa=Array.prototype,t=aa.slice,f=j.doc,U=j.each,d=f.documentElement;var y=20200521;if(j._ui_nodelistExt_ver){if(j.isNumber(j._ui_nodelistExt_ver)&&j._ui_nodelistExt_ver>=y){return}}j._ui_nodelistExt_ver=y;var M=j.support,Q=j.sizzle;var b,S,T,I,r,k,K=f.createElement("div"),Y=f.createElement("div");function p(){var ad,ac;d.appendChild(K);Y.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";b=T=k=false;S=r=true;if(window.getComputedStyle){ac=window.getComputedStyle(Y);b=(ac||{}).top!=="1%";k=(ac||{}).marginLeft==="2px";T=(ac||{width:"4px"}).width==="4px";Y.style.marginRight="50%";S=(ac||{marginRight:"4px"}).marginRight==="4px";ad=Y.appendChild(document.createElement("div"));ad.style.cssText=Y.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";ad.style.marginRight=ad.style.width="0";Y.style.width="1px";r=!parseFloat((window.getComputedStyle(ad)||{}).marginRight);Y.removeChild(ad)}Y.style.display="none";I=Y.getClientRects().length===0;if(I){Y.style.display="";Y.innerHTML="<table><tr><td></td><td>t</td></tr></table>";Y.childNodes[0].style.borderCollapse="separate";ad=Y.getElementsByTagName("td");ad[0].style.cssText="margin:0;border:0;padding:0;display:none";I=ad[0].offsetHeight===0;if(I){ad[0].style.display="";ad[1].style.display="none";I=ad[0].offsetHeight===0}}d.removeChild(K)}if(!Y.style){return}Y.style.cssText="float:left;opacity:.5";M.opacity=Y.style.opacity==="0.5";M.cssFloat=!!Y.style.cssFloat;Y.style.backgroundClip="content-box";Y.cloneNode(true).style.backgroundClip="";M.clearCloneStyle=Y.style.backgroundClip==="content-box";K=document.createElement("div");K.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";Y.innerHTML="";K.appendChild(Y);M.boxSizing=Y.style.boxSizing===""||Y.style.MozBoxSizing===""||Y.style.WebkitBoxSizing==="";j.mix(M,{reliableHiddenOffsets:function(){if(b==null){p()}return I},boxSizingReliable:function(){if(b==null){p()}return T},pixelMarginRight:function(){if(b==null){p()}return S},pixelPosition:function(){if(b==null){p()}return b},reliableMarginRight:function(){if(b==null){p()}return r},reliableMarginLeft:function(){if(b==null){p()}return k}});var i,g,x=(/^margin/),q=/^(top|right|bottom|left)$/,Z=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source,J=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),o=new RegExp("^("+Z+")(.*)$","i");if(window.getComputedStyle){i=function(ae){var ad,ac;ad=j.isFunction(ae.getEL)?ae.getEL():ae;ac=ad.ownerDocument.defaultView;if(!ac||!ac.opener){ac=window}return ac.getComputedStyle(ad)};g=function(aj,ad,ai){var ag,af,ah,ac,ae=aj.style;ai=ai||i(aj);ac=ai?ai.getPropertyValue(ad)||ai[ad]:undefined;if((ac===""||ac===undefined)&&!Q.contains(aj.ownerDocument,aj)){ac=j.style(aj,ad)}if(ai){if(!M.pixelMarginRight()&&J.test(ac)&&x.test(ad)){ag=ae.width;af=ae.minWidth;ah=ae.maxWidth;ae.minWidth=ae.maxWidth=ae.width=ac;ac=ai.width;ae.width=ag;ae.minWidth=af;ae.maxWidth=ah}}return ac===undefined?ac:ac+""}}else{if(d.currentStyle){i=function(ac){return ac.currentStyle};g=function(ai,af,ah){var aj,ad,ac,ae,ag=ai.style;ah=ah||i(ai);ae=ah?ah[af]:undefined;if(ae==null&&ag&&ag[af]){ae=ag[af]}if(J.test(ae)&&!q.test(af)){aj=ag.left;ad=ai.runtimeStyle;ac=ad&&ad.left;if(ac){ad.left=ai.currentStyle.left}ag.left=af==="fontSize"?"1em":ae;ae=ag.pixelLeft+"px";ag.left=aj;if(ac){ad.left=ac}}return ae===undefined?ae:ae+""||"auto"}}}var e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,n=(/<([\w:-]+)/),c=(/^\s+/),u=/<|&#?\w+;/,E=/<tbody/i,G=/^-ms-/,z=/-([\da-z])/gi,A=/^(none|table(?!-c[ea]).+)/,O=(/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/),L={position:"absolute",visibility:"hidden",display:"block"},D={letterSpacing:"0",fontWeight:"400"},a=["Top","Right","Bottom","Left"];var R={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:M.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};var C,X=["Webkit","O","Moz","ms"],H="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";var V=document.createElement("div");if(!V.style){return}C=V.style;M.cssFloat=!!V.style.cssFloat;var B=function(ac,ad){return ad.toUpperCase()};var v={type:j.type,cssHooks:{},htmlPrefilter:function(ac){return ac.replace(e,"<$1></$2>")},nodeName:function(ad,ac){return ad.nodeName&&ad.nodeName.toLowerCase()===ac.toLowerCase()},merge:function(ag,ae){var ac=+ae.length,ad=0,af=ag.length;while(ad<ac){ag[af++]=ae[ad++]}if(ac!==ac){while(ae[ad]!==undefined){ag[af++]=ae[ad++]}}ag.length=af;return ag},camelCase:function(ac){return ac.replace(G,"ms-").replace(z,B)},cssProps:{"float":M.cssFloat?"cssFloat":"styleFloat"},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true}};function N(ac){if(ac in C){return ac}var ae=ac.charAt(0).toUpperCase()+ac.slice(1),ad=X.length;while(ad--){ac=X[ad]+ae;if(ac in C){return ac}}}function m(af,ac){var ad,ag,ae=0,ah=typeof af.getElementsByTagName!=="undefined"?af.getElementsByTagName(ac||"*"):typeof af.querySelectorAll!=="undefined"?af.querySelectorAll(ac||"*"):undefined;if(!ah){ah=[];for(ad=af.childNodes||af;(ag=ad[ae])!=null;ae++){if(!ac||v.nodeName(ag,ac)){ah.push(ag)}else{v.merge(ah,m(ag,ac))}}}return ac===undefined||ac&&v.nodeName(af,ac)?v.merge([af],ah):ah}function W(ae){var ad=H.split("|"),ac=ae.createDocumentFragment();if(ac.createElement){while(ad.length){ac.createElement(ad.pop())}}return ac}function h(ad,af){var ak,ah,aj,am,ao,an,ae,ai=ad.length,ag=W(af),ac=[],al=0;for(;al<ai;al++){ah=ad[al];if(ah||ah===0){if(j.type(ah)==="object"){v.merge(ac,ah.nodeType?[ah]:ah)}else{if(!u.test(ah)){ac.push(af.createTextNode(ah))}else{am=am||ag.appendChild(af.createElement("div"));ao=(n.exec(ah)||["",""])[1].toLowerCase();ae=R[ao]||R._default;am.innerHTML=ae[1]+v.htmlPrefilter(ah)+ae[2];ak=ae[0];while(ak--){am=am.lastChild}if(!M.leadingWhitespace&&c.test(ah)){ac.push(af.createTextNode(c.exec(ah)[0]))}if(!M.tbody){ah=ao==="table"&&!E.test(ah)?am.firstChild:ae[1]==="<table>"&&!E.test(ah)?am:0;ak=ah&&ah.childNodes.length;while(ak--){if(v.nodeName((an=ah.childNodes[ak]),"tbody")&&!an.childNodes.length){ah.removeChild(an)}}}v.merge(ac,am.childNodes);am.textContent="";while(am.firstChild){am.removeChild(am.firstChild)}am=ag.lastChild}}}}if(am){ag.removeChild(am)}al=0;while((ah=ac[al++])){if(ah.tagName!=="SCRIPT"){aj=Q.contains(ah.ownerDocument,ah);ag.appendChild(ah)}}am=null;return ag}var F=function(ah,ag,ai,af){var ae,ad,ac={};U(ag,function(ak,aj){ac[aj]=ah.style[aj];ah.style[aj]=ag[aj]});ae=ai.apply(ah,af||[]);U(ag,function(ak,aj){ah.style[aj]=ac[aj]});return ae};function s(ag,ad,ac,ai,af){var ae=ac===(ai?"border":"content")?4:ad==="width"?1:0,ah=0;for(;ae<4;ae+=2){if(ac==="margin"){ah+=j.css(ag,ac+a[ae],true,af)}if(ai){if(ac==="content"){ah-=j.css(ag,"padding"+a[ae],true,af)}if(ac!=="margin"){ah-=j.css(ag,"border"+a[ae]+"Width",true,af)}}else{ah+=j.css(ag,"padding"+a[ae],true,af);if(ac!=="padding"){ah+=j.css(ag,"border"+a[ae]+"Width",true,af)}}}return ah}function ab(ag,ad,ac){var af=true,ah=ad==="width"?ag.offsetWidth:ag.offsetHeight,ae=i(ag),ai=M.boxSizing&&j.css(ag,"boxSizing",false,ae)==="border-box";if(ah<=0||ah==null){ah=g(ag,ad,ae);if(ah<0||ah==null){ah=ag.style[ad]}if(J.test(ah)){return ah}af=ai&&(M.boxSizingReliable()||ah===ag.style[ad]);ah=parseFloat(ah)||0}return(ah+s(ag,ad,ac||(ai?"border":"content"),af,ae))}function P(ac){var ad=new RegExp("^(?:([+-])=|)("+Z+")([a-z%]*)$","i");return ad.exec(ac)}function w(ac,ae,af){var ad=o.exec(ae);return ad?Math.max(0,ad[1]-(af||0))+(ad[2]||"px"):ae}function l(ad,ac,ag,al){var am,ae=1,ai=20,ak=al?function(){return al.cur()}:function(){return j.css(ad,ac,"")},ah=ak(),aj=ag&&ag[3]||(v.cssNumber[ac]?"":"px"),af=(v.cssNumber[ac]||aj!=="px"&&+ah)&&P(j.css(ad,ac));if(af&&af[3]!==aj){aj=aj||af[3];ag=ag||[];af=+ah||1;do{ae=ae||".5";af=af/ae;j.style(ad,ac,af+aj)}while(ae!==(ae=ak()/ah)&&ae!==1&&--ai)}if(ag){af=+af||+ah||0;am=ag[1]?af+(ag[1]+1)*ag[2]:+ag[2];if(al){al.unit=aj;al.start=af;al.end=am}}return am}U(["height","width"],function(ac,ad){v.cssHooks[ac]={get:function(ag,af,ae){if(af){return A.test(j.css(ag,"display"))&&ag.offsetWidth===0?F(ag,L,function(){return ab(ag,ac,ae)}):ab(ag,ac,ae)}},set:function(ag,ah,ae){var af=ae&&i(ag);return w(ag,ah,ae?s(ag,ac,ae,M.boxSizing&&j.css(ag,"boxSizing",false,af)==="border-box",af):0)}}});j.style=function(ae,ad,aj,af){if(!ae||ae.nodeType===3||ae.nodeType===8||!ae.style){return}var ah,ai,ak,ag=v.camelCase(ad),ac=ae.style;ad=v.cssProps[ag]||(v.cssProps[ag]=N(ag)||ag);ak=v.cssHooks[ad]||v.cssHooks[ag];if(aj!==undefined){ai=typeof aj;if(ai==="string"&&(ah=P(aj))&&ah[1]){aj=l(ae,ad,ah);ai="number"}if(aj==null||aj!==aj){return}if(ai==="number"){aj+=ah&&ah[3]||(v.cssNumber[ag]?"":"px")}if(!M.clearCloneStyle&&aj===""&&ad.indexOf("background")===0){ac[ad]="inherit"}if(!ak||!("set" in ak)||(aj=ak.set(ae,aj,af))!==undefined){ac[ad]=aj}}else{if(ak&&"get" in ak&&(ah=ak.get(ae,false,af))!==undefined){return ah}return ac[ad]+""}};j.css=function(ai,ag,ad,ah){var af,aj,ac,ae=v.camelCase(ag);ag=v.cssProps[ae]||(v.cssProps[ae]=N(ae)||ae);ac=v.cssHooks[ag]||v.cssHooks[ae];if(ac&&"get" in ac){aj=ac.get(ai,true,ad)}if(aj===undefined){aj=g(ai,ag,ah)}if(aj==="normal"&&ag in D){aj=D[ag]}if(ad===""||ad){af=parseFloat(aj);return ad===true||isFinite(af)?af||0:aj}return aj};j.parseHTML=function(ae,ad){if(!ae||typeof ae!=="string"){return[]}if(typeof ad==="boolean"){ad=false}ad=ad||document;var ac=O.exec(ae);if(ac){return[ad.createElement(ac[1])]}ac=h([ae],ad);return v.merge([],ac.childNodes)}})(Dynamsoft.Lib);Dynamsoft.Ready(function(h,i){var b="",f="[bio]: ",c=!0,g=!1;var e=h.win,j=e&&e.FormData;function a(l){var k=this;k.__attrs={};h.mix(k.__attrs,{action:b,data:{},bChunkedSendData:c,blockSize:0,ajaxConfig:{value:{},type:"post",processData:g,cache:g,dataType:"text",async:c,contentType:g,retry:0,headers:{"X-Requested-With":g}},ajax:b,formData:b,CORS:g,bOnlyEmptyIsOK:c});h.mix(k.__attrs,l);k._setWithCredentials()}h.mix(a,{event:{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"},status:{SUCCESS:"success",ERROR:"error"}});h.mix(a.prototype,h.obj.customEvent);h.mix(a.prototype,{get:function(l){var k=this;if(l in k.__attrs){return k.__attrs[l]}return""},set:function(m,l){var k=this;if(m in k.__attrs){k.__attrs[m]=l}},_setWithCredentials:function(){var k=this;var m=k.get("CORS");var l=k.get("ajaxConfig");h.mix(l,{xhrFields:{withCredentials:false}});return l},uploadToServer:function(n){var k=this,m=k.get("blockSize"),l;if(m>0&&n&&n.size>0){l=k._chunkedUpload(n)}else{l=k._fullUpload(n)}return l},uploadFilesToServer:function(k){return this._fullUploadFiles(k)},_fullUpload:function(o){var k=this,m=k.get("ajaxConfig"),l=true,n=function(s){var r="";if(s){if(s&&h.isArray(s)&&s.length>1){r=s[0]}else{if(h.isString(s)){r=s}}}r=k._processResponse(r);k.fire(a.event.SUCCESS,r)},q=function(v,s,u){var r,t;l=false;if(v&&h.isArray(v)&&v.length>2){r=v[1];t=v[2]}else{r=s;t=u}k._errorHandler(t,r,o)};k._setFormData();if(o&&o.size>0){k._addFileData(o);if(!h.isString(o.name)||o.name==""){k.name=o.fileName}else{k.name=o.name}}h.mix(m,{data:k.get("formData"),url:k.get("action"),beforeSend:function(t,s,r){t.upload.addEventListener("progress",function(u){k.fire(a.event.PROGRESS,{loaded:u.loaded,total:u.total,name:k.name})},false)}});h.mix(m,{method:"POST",onSuccess:n,onError:q});var p=h.ajax(m);k.set("formData",null);if(m.async){k.set("ajax",p);return true}else{k.set("ajax",false);return l}},_fullUploadFiles:function(q){var k=this,m=k.get("ajaxConfig"),l=true,o=[],n=function(t){var s="";o=[];if(t){if(t&&h.isArray(t)&&t.length>1){s=t[0]}else{if(h.isString(t)){s=t}}}s=k._processResponse(s);k.fire(a.event.SUCCESS,s)},r=function(w,t,v){var s,u;l=false;o=[];if(w&&h.isArray(w)&&w.length>2){s=w[1];u=w[2]}else{s=t;u=v}k._errorHandler(u,s,q)};k._setFormData();h.each(q,function(s){if(s&&s.size>0){k._addFileData(s);if(!h.isString(s.name)||s.name==""){o.push(s.fileName)}else{o.push(s.name)}}else{o.push("")}});h.mix(m,{data:k.get("formData"),url:k.get("action"),beforeSend:function(u,t,s){u.upload.addEventListener("progress",function(v){k.fire(a.event.PROGRESS,{loaded:v.loaded,total:v.total,name:""})},false)}});h.mix(m,{method:"POST",onSuccess:n,onError:r});k.name="";var p=h.ajax(m);k.set("formData",null);if(m.async){k.set("ajax",p);return true}else{k.set("ajax",false);return l}},_chunkedUpload:function(m){var s=this;var q=s.get("ajaxConfig"),o=function(v){var u="";if(v){if(v&&h.isArray(v)&&v.length>1){u=v[0]}else{if(h.isString(v)){u=v}}}u=s._processResponse(u);s.fire(a.event.SUCCESS,u)},l=function(y,v,x){var u,w;if(y&&h.isArray(y)&&y.length>2){u=y[1];w=y[2]}else{u=v;w=x}s._errorHandler(w,u,m)};h.mix(q,{url:s.get("action")});var t=m.size;var n=0;var k=s.get("blockSize")||t;var p=m.slice||m.webkitSlice||m.mozSlice;function r(w){var v=p.call(m,n,n+k,m.type);var x=v.size,u=m.name;s._setContentRange(n,x,t);s._setFormData();if(w){s.set("data",[])}if(!h.isString(u)||u==""){u=m.fileName}v.name=u;s.name=u;s._addFileData(v);h.mix(q,{data:s.get("formData")});h.mix(q,{method:"POST",onSuccess:function(A,y,z){n=s._getUploadedBytes(z)||n+x;s.fire(a.event.PROGRESS,{loaded:n,total:t,name:s.name});if(n<t){r(false)}else{o(A)}},onError:l});h.ajax(q);s.set("formData",null)}r(true)},abort:function(){var k=this,l=k.get("ajax");if(!h.isObject(l)){h.log(f+"abort(), the value of io invalid!");return k}l.abort();k.set("ajax",false);return k},_setFormData:function(){var k=this,l=k.get("data"),n;if(!j){h.log(f+"the browser does not support ajax.");return}if(l instanceof j){k.set("formData",l)}else{n=new j();try{h.each(l,function(p,o){n.append(o,p)});k.set("formData",n)}catch(m){h.log(f+"something error when reset FormData.")}}},setRequestHeader:function(m,n){var k=this;var l=k.get("ajaxConfig");l.headers[m]=n;k.set("ajaxConfig",l);return n},_addFileData:function(m){if(!h.isObject(m)){h.log(f+"_addFileData(), file parameter invalid!");return false}var l=this;var n=l.get("formData");var o=m.name,k=m.remoteFilename;if(!k){k="RemoteFile"}n.append(k,m,o);l.set("formData",n);return n},_errorHandler:function(p,o,q){var n=this,m=a.status.ERROR,l=n.name,k={status:m,msg:o,response:false,name:l};if(p){k.httpStatus=p.status;k.response=p.responseText}n.fire(m,k)},_getUploadedBytes:function(m){var k=m.getResponseHeader("Range");var n=k&&k.split("-");var l=n&&n.length>1&&parseInt(n[1],10);return l&&l+1},_setContentRange:function(n,q,m){var p="bytes "+n+"-"+(n+q-1)+"/"+m;var k=this;var l=k.get("ajaxConfig");var o=l.headers;o["Content-Range"]=p;return p},_processResponse:function(p){var t=this,v,l,k,r=false,m=t.name,n=a.status.SUCCESS,s=a.event.ERROR;h.log("Response from server: "+p);if(!t.get("bOnlyEmptyIsOK")){return{status:n,msg:false,json:false,response:p,name:m}}if(h.isUndefined(p)||p===""){v={status:n,msg:false,json:false,response:"",name:m}}else{if(h.isString(p)){try{for(l=0;l<p.length;l++){if(l>10){break}k=p[l];if(k=="{"){r=true;break}else{if(k==" "||k=="\r"||k=="\n"||k=="\t"){}else{break}}}if(r){var q=h.parse(p);if(q.status==1){v={status:n,msg:false,json:q,response:p,name:m}}else{v={status:s,msg:false,json:q,response:p,name:m}}}}catch(o){r=false;h.log(o)}if(!r){var u=String(p);u=u.replace(/( |\t|\r|\n)/g,"");if(u==""){v={status:n,msg:false,json:false,response:p,name:m}}else{v={status:s,msg:false,json:false,response:p,name:m}}}}else{v={status:n,msg:false,json:false,response:"",name:m}}}return v}});function d(l){var k=this;k.__attrs={};h.mix(k.__attrs,{action:b,retry:0,timeout:0,CORS:g,async:c,dataType:"text",fileStatus:b,uploadType:g,data:{},bOnlyEmptyIsOK:c});h.mix(k.__attrs,l);k._init()}h.mix(d,{event:{SUCCESS:"success",ERROR:"error",PROGRESS:"progress"}});h.mix(d.prototype,h.obj.customEvent);h.mix(d.prototype,{get:function(l){var k=this;if(l in k.__attrs){return k.__attrs[l]}return""},set:function(m,l){var k=this;if(m in k.__attrs){k.__attrs[m]=l}},upload:function(k){var l=this,o=l.get("uploadType");if(k){if(h.isArray(k)){var n=k;return o.uploadFilesToServer(n)}else{if(h.isObject(k)){var m=k;if(!m.size){m.size=0}else{if(!m.id){m.id=h.guid("file-")}if(m.size){m.textSize=l._convertByteSize(m.size)}}return o.uploadToServer(m)}}}return o.uploadToServer(k)},abort:function(){var k=this,l=k.get("uploadType");l.abort();return true},setRequestHeader:function(l,n){var k=this,m=k.get("uploadType");m.setRequestHeader(l,n)},_convertByteSize:function(k){var l=-1;do{k=k/1024;l++}while(k>99&&l<4);return Math.max(k,0.1).toFixed(1)+["KB","MB","GB","TB"][l]},_init:function(){var k=this;var n={action:k.get("action"),data:k.get("data"),CORS:k.get("CORS"),bOnlyEmptyIsOK:k.get("bOnlyEmptyIsOK")},m=new a(n);var l=m.get("ajaxConfig");if(l){l.dataType=k.get("dataType");l.async=k.get("async");l.retry=k.get("retry")}m.on(a.event.SUCCESS,k._uploadCompleteHandler,k);m.on(a.event.ERROR,k._uploadCompleteHandler,k);m.on(a.event.PROGRESS,k._uploadProgressHandler,k);k.set("uploadType",m);return m},_uploadProgressHandler:function(l){var k=this;k.fire(d.event.PROGRESS,l)},_uploadCompleteHandler:function(o){var l=this,k=o.status,n=o.msg,m=l.get("file");h.mix(o,{file:m});if(k==="success"){l.fire(d.event.SUCCESS,o)}else{if(n===false){}else{if(n==="abort"){h.mix(o,{canceled:true})}else{if(n==="timeout"){h.mix(o,{timeout:true})}}}l.fire(d.event.ERROR,o)}}});h.BIO=d});(function(a){a.DWT={defaultEnv:{JSVersion:"16,2,0,0112",ServerVersionInfo:"16,2,0,0112",ServerLinuxVersionInfo:"16,2,0,0112",ServerMacVersionInfo:"16,2,0,0112",ActiveXVersion:"16,2,0,0112",PluginVersion:"11,1,0,0",PdfVersion:"11.1.0.0112",ProductName:"Dynamic Web TWAIN 16.2",Containers:[],DynamicContainers:[],ContainerMap:{},Trial:false,ResourcesPath:"Resources",Debug:false,IfUpdateService:false,AutoLoad:true,ReConnectToService:true,OnWebTwainReady:false,UseDefaultInstallUI:true,OnWebTwainNotFound:false,OnWebTwainOldPluginNotAllowed:false,OnWebTwainNeedUpgrade:false,OnWebTwainNeedUpgradeWebJavascript:false,OnWebTwainInitMessage:false,IfUseViewer:true,ViewerJSIntegerited:true,ActiveXIntegerited:true,ActiveXInstallWithCAB:false,IfUseActiveXForIE10Plus:false,IfCheck64bitServiceFirst:false,IfDownload64bitService:false,IfInstallDWTModuleWithZIP:false,IfUseEmbeddedDownloadNoticeForActiveX:false,IfCheckDCP:false,IfCheckDWT:true,IfDisableDefaultSettings:false,OnWebTwainWillInit:false,IfAddMD5InUploadHeader:false,IfAlwaysFocusOnPopupWindow:true,IfConfineMaskWithinTheViewer:false,IfUseWSPool:false,UseDefaultViewer:true,fetchOptions:{mode:"cors",credentials:"same-origin"},CustomizableDisplayInfo:{loaderBarClassName:"ds-dwt-loaderBar",loaderBarSource:"data:image/gif;base64,R0lGODlhZABkAKUAAPyOFPzKjPyuVPzmxPy+dPyeNPzarPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPyiRPzevPz+/PzWrPy6dPyqVPzOlPyyXPzq1PzCfPyiPPzetPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPyePPzatPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQAxACwAAAAAZABkAAAG/sCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9hslXI4aEwHFUVLLicpjUBrBACMFKTG2Ewne1Khtl4fSnnqgFYUFSJ7hgAiFXOBjE8mDIeHIyaNlUweGZGRGX+WnkYTL5qHIhOfp0MubKN7Iy6opx4srIcsnU1eJiYNMIuwTR4JtIYJt2cNDxAKBSIKJQsmvr9JHiDDeyzSRh4rCquGHC4HgFwmDwQnKxrGSxHftK5LKgTvkSUNdB4TAu8jBNFNJhS6VkrJgQX1NJUYR4bCigKaWjjQZkRFpmsZVJwxIOoaABcUp1CYAHGUAhhNTCSURCkJDAEe2xRoieUATFobmgwaqClR/kghKVayivATygChewowXOKhQp5IISqwK0LhREw9JVBiIXFthAMnHhq4WNPmDQkNRWN4eHqVg4YsBLqugMLlgK4waYV44HC1jQiaVuIOY1DBkgcJfREBrvLgGoPFgDzcvCrhLRYNSPUUmFqHgovEGbRe8SB41Ii5nhxAijniQV4nGlqwSrC00oFZMRVYzkLBgYJIIzKg/dS75LDTr59QgHFCBIMRIxgUWHEguZ0Kq1mNOME5ywEHKyqY6O7pISsREchPIzcBRMdWJSrUXu+p3IIMElAIONGhF/31FFDgQYDW/WfggQgmqOCCDDbo4INRwKDBBBqIBiEdFGjgggLP/kHHgAIBNKDehRFiwBMpD1hIIhUNQJCZGwnstqIUNsV0wXxHoGGCAybAMCKCsvRVjEEPCCAKAwI8gCOD2PVFmEssZNcGAyyouOABJSQGQAZLUmANcNk8KJCWBRlhAi2QIUgBCS+OgoE2EeDk4DxatnGCRkVcNEoJDh4gTJ20GZElKwL0+aeWLOAYJys5NUhnnQRMpZJpXzW4Zp0AkKANBYfWUiAqYyZWphEwRGkIAyBYqeABel4FwZJCHICAAJAgiQCsCqYgpWMpMAXDjrv8eGCQVw05YxQ2tenGjcdOoYGL8ECAT7NTwEDCiYaIgMG01E4R1oYdRgfHOt1mISGF/qqWq+667LYLiF0dVFBBBw7I4S5daWSAwnMAvFCAABEMIKy7HmCAAlIFnJDuvTGgAYFHHADEcBENTHYNBxN8uqIHD/fVgoz3UoABoANDEZZ/qDSAQp0jmGJHCgRcUMIGldanCqYZaIwEBQu8h4jLlsAwaJ0igFzFB5GIUHMjAxinJQMIZOGBbJFsULIVumLaRgRZaOD0HllZUoHWbViQhQnY6iHAwmWMTbbZNf0WiQVXV2GAsoxq8RkpvVpCktataVGjIS7UXUUDVBO99BUHuCCBCAUosILOVFCwgdYtGL6EXePBYsLXVxU2sQdWadkCrgaqADMBKeDJBAygDyNCZwqU29ZpoE04wFdMIrj2INKGfADWBInTMp3mn3S8BwTKNdBpRB3U7kmrbWQQhQcOZFAAv24wIEJU1ZHYmCEPiNTACgucAIILDwwgPSqsLo/6xDnC8EAJSaJM//789+///wAMoACxEAQAIfkECQkAMQAsAAAAAGQAZAAABv7AmHBILBqPyKRyyWw6n9CodEqtWq/YrHbL7S49jUkn5dB4vGhvY6FgAACM1qKRrl8pg8vozQeMLgMUdoNRJih9iAAoJoSNTB4CiYkCZ46WRg57kn0jDpefQwSbiQSgnxQKo4gKgqaOFByqfRytThQNJiZmrlAULbJ8LbVfFSUKBSgcAgEHvE6iwAAWTRQOIZqIKB+VaWC5DcNNDtEAnkwpIqoMAdxdDScKHBwXLu2PkbKUTCaxsi8fXqqhwOYnA50nDvpt4mBOiQcW5Ao042KiwKYSMJ5U05Poj4NwR9CRA+CCiwdokkasAKmkQYQ2bxgoiHDwy4KRAPRpafBrFP4IFVEoaJiQIsUEDSyPwEiAk4OGLQMOjQoxsVEDfBEbYjGk6kJVQjCwRkMxYMtVVQTs2TkAcSSHmlgoRCDYh0GKpGgouMCpU0vYlBu+NnIgFdiICmoyuOHDwEXGUxvobgqhNsuBFSwECLDQoXIjGD1VFdDahcKB0x7wNtIQQhWKu84uwYigkI8IFoxif/JggkSCEiUSREjhWTch0zBgHChuvLnz59CjS59Ovbr169iz9/IAo4F3GKm1b4GRgoCCFyNESDhh4LF4KwNKLEbEoETZ91MoVKgtiYMB1fgZoV86wIhQAYBCUACDBjAg6FwD/KnyFhMutcBBCBvAVd1NOP4toAQFJqTSRwuBWAeDRTgV4J4RB4jFRwmCRVfBfOQclkQmKZEW3Vw4+RFBEiSMgoF1IPT4xjRIBLkJCdZZYKQ0N0rmh47Q8YjTCD8i0aIkAsQI3Yw9MgAQEtWE9gaJDjpzAIEjibDiEe+EIEEIJ2hIHYcjeciEggymaRyEbtkZIJkVsKmKgX4GqF+EiHBw4KBROCCfJPVRCSkTMFRAgAQijPCCBARU8OalGnHnXQPgJUrqqqy26uqrsBqnYC7gxUpNAyQogEIBIhSgAAEmqArpLSfQyAkEDjDHKgUTmLlJAQ8IK54DIgLzwkq2xtBAayMVABusFBTZYwiCZkGBtP5ZNCClLCN8gG4Ss7UgAAZAfbLXkyUoG0VUI3ppiweoOYjKk374m18JiTApxQETPBABCBZEgMEEBgvRAIpPWjrFAZJRBoUHK5SAMR8FlPBBvUeYYGiPBmxxgCQK6JvgtsYi8gc4KY/cI2JawEKKEx5MUJgsHEwAkgY64zTBFgP2UUC5RVTD6CgMheOBBASPAPUUHqTQ2ggQ3Iepi9F4ZYS4RnIg83YehOdEBARnScQA66oyAgnvjrdym29SAIGRCmxtCQIE+/EAJkmrE61uFDBVeALhULDC3puMQADKzoBWOAAtjEoBAonTl1ZzDWBdeOBHUJCCADW/MYICD2Aem24GU5PjFJkwfJABQa8/gLNzMFT7JOpJUACwCSlUYEKq0alANl+yX4rSk6W4OkHd7C7tqi8Eh5C3dCm0LotdsXpwgpEnrP0eDCxgzwkLo7p6wAbi1xVYtkN48AC3KbWAgPqXukUFBMA7Aazgd58IAgAh+QQJCQAwACwAAAAAZABkAIX8jhT8yoz8rlT85sT8njT82qz8vnT89uz80pz8pkT8tmT8xoT8liT87tz84sT8zpz8okT83rz8woT8/vz81qz8qlT8unT8zpT8slz86tT8ojz83rT8wnz8+vT81qT8qkz8umz8miz8khz8ypT8rlz85sz8njz82rT8vnz89vT80qT8pkz8tmz8xoz8liz88uT///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG/kCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9isdsvter/gsHgMnUQslY8lMiG7o5MGBkCvYxrtt17ZINX/ACQNe4RGHS0igHUiLR2FjzANCYp/CYOQhAOJlHQiJZiEEZx/DqB7JZucnlITByUlL3mmTZKjAJZPrRQJDCIiDBoBsbNLh6mAIgGOTRMZCsd1HxHLYh2yUn2cgk8NArYabGATDiwaKwZ4rC8kxyKC10oTLLZ0Ky9fHRLHDCfwTh0RQAiosMafkggM6NEZ8SUCNAAaMhSaYEAhHQgGr8xRlKzQgQoWATC4tKWDCU4WqL2pZVFEKS4dJlEykDEMS4WrusxTxOCB/keQLe91yfAwgdA9E/RZrFCzipkEmxhUIEmoQQicFMRleGCAg4oDoBYoVABWzISmbw5YsFUhA1piWg60uIqMRTq4K1EIWJGggoFweJF2aJAhxdvAiBMrXsy4sePHkCNLnky5smU9E15kKJFh2GUr4zgI0GBCgwAODg5/NoSC7h8RIVCoXM2kGz0BVGknecHiYd2jTM6qhjvBg2+eKt52oAAhBAQPsxkfgBDyVtkk+VKJWJACsoPqdF4mceCaDoEIkEeAB8AwyYQHlB4Mx1QRvIF48BXJf1y/+v2D5QEQAnqPqQdee0mkwIF2HHT32HfgiYedB81pAF1kB8hkUQLX/i0xgTWTTaBCQgoxkJxuSvB23CIsAIfiEbbZgtuLTHRgQIB0xBYdjUd04AAHJGigAQQCSODAjjwikdkrsMyX5JNQRinllGO08sILIFKJRAMPWKCAACRggMIJLk6ZGQcmkPiHCwk8gOQbH3ZgzVn4UICjIgmU4CQWcUTAAgQMMGACBio08OYUHTygJj0abHBoF8sJ4FsCF5RJRXEugKfBJ25MMJctDLSYhQMErGcdGcZYhIGDVXSwkakB7FmGndU1YgUqpl5k6RYveFMdAZxSwUGudDCQVRgnrMiJBI+6Rx2xANAkDgimfpAbN3dWh0GHMGlgagjBRlFCtiEJsOsQ/j6q0EILKhzZRAeLhuQSFeNCC8BUSr4wQpq++ALMCJ4h0YGyqkgIhVX2btsjBd6OYuGbE5S6HrhUdNAwsSkZ8V68lPSE5ASvVpeARFSEvJ4ICA6BaUgmGiSiqSCwKoUoxBJAssoOnFSdCanBqKFFIZxgRUzEogCPjaYasGOiHI+SsVMUNE1PCNdmQO4oLlwrBG8hQaB1FCmgQDAyJxaBALEI7GYyJQkMEJcFY+fo5hE7mcqCEvlIrEgIIHxNxQESSP0HASog+QGxFRTjwAIVhNBLCAlYcILMWnRQAFCUiKCAnkmsQOwK7zZQggMOlNAA5VxMkIIDIGgQwusEQLBAYwmP+pErCY118AJnAS8xbK4cPEmzqQTy+MLF1Wlw7meJxr3Ifk++oAB4GCxPWwbPKgTBzVDGsYKyIqxw15QvLKDBQyJoIIH1PHZQwggKJEAAAQkoMALtWmp8AGENNHCArFsIAgAh+QQJCQAvACwAAAAAZABkAIX8jhT8yoz8rlT85sT8njT8vnT82qz89uz80pz8pkT8tmT8xoT8liT87tz8zpz8okT8woT84sT8/vz81qz8qlT8unT8zpT8slz86tT8ojz8wnz83rz8+vT81qT8qkz8umz8miz8khz8ypT8rlz85sz8njz8vnz82rT89vT80qT8pkz8tmz8xoz8liz88uT///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG/sCXcEgsGo/IpHLJbDqf0Kh0Sq1ar9isdsvter/gsHhMLpuLEtcmINq4JOd4MyIA2EOUiHyPbCTsgAAJDXyFQhImgYEFcIZ7DSqKgCqEjnIYf5KCGJZykJqClZ1mEgUhmiaNUhIcHKqjTQ0ZkoNTEiQpASwOERywTnSAeHpSByIZp3YEFS5lEqyvq2oiAW7RTSgaDJojzWG3FSUJLKJ8Eg7JmhW+YBEPgQIHhgeZoATEXhIrkimGGKCBHFzLIgGEJAWGNgAEtIBdFwkEJH1IuNAOC4dcEEk6YahBOk0hUgzM0sCDMAUY5RyoAzADCTEcJnwosGEkqQ0GNTEQYfPX/hYOKXIGCmEChc8yHDaMSBYigQN5R50daLBhA4YDPaNq3cq1q9evYMOKHUu2rBkOLjC4SGmWCocTBSgkeJCAQoETbNsykXBgQomPwkoYwKq3iQQMKwBLCrECQ9bCJRWD9FDO6wESA0hAVYKCZcVAIzZvldCgQAYQqB8UaDCSg6nPikIUyAsLRYqIkgikED1kA27YgUBs2MphgeQ7F4twSARckgnajiRM2LaQwYRXDUo0l5Sh8qiSsCkTiXAcOD5Y0ssPPaEKwXZN/XxyYNGchSr67xUFOMrhQ/MPDgWQn3787QPcCg6lMGAg8f1SXHMLqBLBgnecN0p6sIXA3hCy/lBYgnedNEABbBSUgwJzA84WlQQdtFBRCx1E49uABAynVXHlhdCQERxUoB5I63B1QFCa6GbUEQeYtB0FvK3YgAmnoZbBaj1hoORnIYgXlgskRECCN0scllhFjDlW2F4HGPAXSCVMQNiZTrwVVwIZ1HUXdHAucUBaLjSZ55+ABirooOa4MMECK3zAAl6PBcpBBBfoZAIJjYaBVgMNrFVpMRAIpUkGKeBp6QYQXKBCAiMU0IGfV3CgwI8AtCCCqF408IGndjAwQgSbMrEcrLkKdEYEswAEQqgEpUAdcCW8VEYDvwHEAEdYuDBCfqmQgYJ/sGXAKhQbAKsIA99ugRNw/iGIcEUpC04wxnLbqVCuryMOCMEYLngGGwHOulVsfiuM4cd2wlnBgXYDBhwmBw1EkEIKETTgSiz1wAYCtW5d+Z4Jep4gwEchCHDCvC80oO9n9xhcwYINHmHrsuN+ACIRKKzcXAJg2tLBgCHM/IILKvyoQs5GSKBsc9lagUl+F9C2EnDxKGEtcCD4/AQHIohrR8FHSJA1ujwpEQGuIDmghQuRoltUHxp/piUSEiAA82ImkPxEdhkqQDQRBmgNgIZLvIXMYiCIcOQWDVww97jPJTFffsnpaYEHGRAAQgYqrAaGCyJEstgIHRx+RH/5BdnEZVV92esqDUxQgAAlZCAAWgQRvKGngdutYHchrLTie5woIk1rWefkJ+ygYxNsIaAHpA2cArubFUG0C6VM6CHoYHn89S/Mt3ggDETOvRBvqbA4AyrgNb4RQyogV10K7LZ+Emk0cNXw88MSBAAh+QQJCQAwACwAAAAAZABkAIX8jhT8yoz8rlT85sT8vnT8njT82qz89uz8tmT8pkT80pz8xoT8liT87tz84sT8zpz8smT8woT8okT83rz8/vz8unT8qlT8zpT8slz86tT8wnz8ojz83rT8+vT8umz8qkz81qz8miz8khz8ypT8rlz85sz8vnz8njz82rT89vT8tmz8pkz80qT8xoz8liz88uT///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG/kCYcEgsGo/IpHLJbDqf0Kh0Sq1ar9isdsvter/gsHhMLpuRFMp5He1MLqNJh01XpkwhACBkStWnFB0NIAsEBAEoBx1qURcienoiI39QFAcgJI+Qei4qclAdJ5t6J4yUTA0qDKOjIQsHTymrowywp0sZH6y7IhUvThQFrKW3SRQNK7vKIh62TCOakZPFSAcIytgAI6ZKB3h6fM7URBQgs9msIb9NKW8PE+JSxyggGXNcHQLo2C2V91UUWhRwwaCALy4N9mHbEE/MAQysCjTYwkKhshAOzFCAtgvBvysaLO5iAMLMCxLKCmTQokIkKwYPzGTYoIwBCi0eXI4SEbNM/oYEylxw0LJA5yYXJcscgJByYhYQRiEVKKGRxblNJrhZeXHV5YePYygEcLGJgcctHVpGZUHHAIQEG0g8aGiFwoQ8OhnSsZShxAutWTpEiKbQJuBxVw5UIJyNwQWwiLO88MB45NzIXw60wKvshAHImLUca5EgBEEGBS0oOHA4NJcUJUA8UICiRGvXuHPr3s27t+/fdAShMIEhAQYTKBqABl6pgcBdBVo0uM1ciV192QRMoF7diF1h+wpw4I45DXkhJTjvc0GVN4UXDh6YuODgr5IOEF1iWI7YDYRzDGCwXRIodLWPTbtNAN4o4iHRwTVGnYXbC+q1sk4RGUgQVQIr/rlGQUjZaADYXVGFMAFuBySTzQoNGUCWUS4YgFsGomSzQYdEmBMVAzK6NhM6J+A4BIlGmYiiitgk0NBPGwoZGQUmoCOiER0wFSF/xVCIjTpIGGAgOgjqhsKCmxRwExIpoOQSCVhS4wYG0QQ4YBLpiRRCe7u958AIGoxQH3ffKWTmeYiZ94RdFlQGiQgWzNndoQ0sQKZUC0z36BTCEWcccspd6umnoIYq6qiklkqJeYSaCgMFGUzwgAYLsPCnqsY4twFjAihw4R/vZZBBp2DY9YGiAAToVB0lqPDBBhIkgAAIqR5KZDYJHKvRASNUCEAvlm7RgLbKYLArGQ3kp0wC/g5Eex8BIsGkLkAV7GPBuFWUMCk6AtALhgMvZiPCBVkEpJMIJ5JBgVrhtdnEATnp9MC7UiBjkQhOTnGSURFAHEUJNCkkwplbqelSVpW8y/HEIFdxAMIibbNwCRMowAIHJdCFRANAeYwnQEXpVPB9DnhQIykqOKAwDPhZFIIfWKDQr0ISWHtEByPcq0cBjzXBArGjVKBF0hO3gKVg+0SgMAUWhCe1FQ6Au4sFaxeBAteLDsVEhtkUAO0WG9HNiaNHHKCLQh/YTM4AKij6wSevZZs34Ee4aFGMTVjCQgEiZC4CH/Z5QYEDGDxNCgEZABqlSFM60UGrE5TAtEMoRKACYgYQeNCC0U2k5ZIKR59iyQsvpJDqgy5JaCoF8YpUgca9BeD3otPQWqdCd9IqRAcN7+NB75e+MPRC+pZqV87nQk4rBSVAUJkIEJTAPaiBTKDCCSGEcIIni1jPxAHh6+8/qUEAACH5BAkJADAALAAAAABkAGQAhfyOFPzKjPyuVPzmxPy+dPzarPyeNPz27PzSnPy2ZPymRPzGhPyWJPzu3PzixPzOnPyyZPzChPzevPyiRPz+/PzWrPy6dPzOlPyyXPzq1PzCfPzetPyiPPz69PzWpPy6bPyqTPyaLPySHPzKlPyuXPzmzPy+fPzatPyePPz29PzSpPy2bPymTPzGjPyWLPzy5P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAb+QJhwSCwaj0gk5dDYPBaRx6ZxoCSv2Kx2yx2mThYDYExGfU6prnrN5r5WIbKcHFq92vg8m1JiieaAYyAlVnqGh0Z8CoGMABOEiJGHBwKNjQIHkpp4D5aWD5uhXS9xnowhd6KqVw9/poEioKuzRRQYr40QhbR7FL5aLyy4jAqpvFwUDQ4VDwgnJS+7RyUow4EcJcdbyS0gDHIhGCrGRiUc1oAo2dpYFCcKroAMAhlI5uhz2OxXFK2mBg6kCXmxCB+ZYvuUnPj2CpvADhAMktGV8EiDgrg+ZCrSSWKsiolaxHvFQIIRUhJRaaHQoUGGDgIPNRCGbkXMjvhktVNRDYD+iwUbIzlgaM1FByOU8JEIekUCUQAiWsTEQ0GFxAaJSkywpgASlg4k5KVBRCGAxHW1+uAaNNVIg3OA0BqicOFskjelTtlxA3dOPbIVJJJDusFCTzkoLKDpQmEFIANHheYdBrkdEydQpFBpe6XBUwYqOLN5ERZdBNGiMqxQwEGABNRrKCB4+m8ASBgvBkt6UQmXCBORb6/KMNkSBt3CQ0noy0iEAKzJafFZQZuOBujRpR+QkGCygQglxmbXxvJFhgxVYI9fz769+/fw48ufT79+og4HYNrfROGFhAAmfGDCCBtEs98hVZFAmwskeKDegUkcEEF1ZDAQAVMQuuGYKXv+ZchFByK9ElVw9B3gwAYOIOdWcZaEgJ187oBgQAgGCHACahqgowF9HTzgwhwMPEBiER0chgsKQ7pXAosAhCBXEcShE8Jf8bXQSAtJDIUOAw7MV1ogJGRJoSVczncLIxgkEaU1U85nJSNYIlEkOkjOt2QgTl6RozU7ztfjj3K4IGRnTJ7yYnwUFCDAjDUWgBqIIzUy4n4mSpDiFgesECkgInToIRcHaDAmAAxogOGnWnSgggCAVkhCaKju8cIGIxAgIIEGxkoVfvrp6uuvwAYr7LDEFmvseL0em0UDJ1xgQgQXSHCqskL0qECrIoQjQZLGJpPApmMwsIB4CS2RgQr+DwzwAreHvBCRJwuwO0sHJ2xVRgDTGvKmJwxskFAKI1BogYp4oPQKBvmK4s6YIsQryb6mhHACOwdgFAhAkdhizQgPHlKCKRd0jEUKIFgTgbybBOYJcIgcUPIwJ2tjlScWoMzYl69wrI0DpgRgcxcagBsIAxV86MAFESwQ7c9FvCBGIy6YFEkJQgOiwKFJlIBBCK6IYAAGT341giUQJLzHhvzqdEUHHhQaggpMC3HAB+CCQGUkF5mSwM/uFDqGATe60cLTY4QAAdYISmDxHCJggLgRHSweiAJxV3u0rQSarQcFGdA9UrYLNKDeCbhMrAYFKaRQeR58RIABCCBAEMBY40ig7ckKlGp+BAWSEyNyhhTYawoHv2fYmykCUAsDxJbEqWwGVZMhwt3dfmCKBcV76K7QIkBAMLEZWFAdAxbQbuwBFXRX+AoV6F4sSwfEn1/2ytdvv69BAAAh+QQJCQAwACwAAAAAZABkAIX8jhT8yoz8rlT85sT8vnT82qz8njT89uz80pz8tmT8pkT8xoT8liT87tz84sT8zpz8smT8woT83rz8/vz81qz8unT8qlT8zpT8slz86tT8wnz83rT8ojz8+vT81qT8umz8qkz8miz8khz8ypT8rlz85sz8vnz82rT8njz89vT80qT8tmz8pkz8xoz8liz88uT///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG/kCYcEgsGo/IpHLJbDqfUGVqcKJ4TqVOdMvtQg8qDCokYrg4GNXBy253Jw6WCECv00Ugx8TN7yM7FAx2g3UMFFp+iXwTFCGEjwAhFHuKlV0lCpCQHCWWnlAdBJqaBIifp0kZLqOQLhmosEcqrJoqTQcUFxERARSvsVwYtJAQSh0lKwYMcyJlISQbKZTATRzDjxxIEw0Ec5oiAnqWKQ4eDw8UJdNKjteDBkfHAtcGJ6aLJyDKzQwcK+pLULgbhOJIhkzuDBRY52UbBG+EGCxYk0TYwDoYjBxgcREACnFtGoCgRSBFEgQd6dgiMkFDSgAWKHrpkGCYiBEMh2QQdJHB/q8hJQy8FFGgzQmIrDj9qdCxJMsFL+kIyPnkwEh3Ee4RwTRQQSciLyxEjfSViwOh7kA00EZh1TBJDIOOZbCSiwqe10L8NAIIryYGHrTCOOF26AIvI5DSYlD2yAQJChTXEcFCAlUKki+a8HIh89/GSMCIWSbiDAk1SQp4dre5S6CBBvYqOVCiypUBJpVI8NtRRAsvJQS6E/DiUwlrUQ3NXOFOxAOqfQ5YfGlgrZcBvDWxsO5pQuKoCaA7mRBhGIOFqBog7+3AzYFuoxg8hzXhwepRHwRzSTFivR08kwDTwQcdCcCdGxOUEIEAyjBgAAYPNCCeJQ085A4LIPnRQQMZ/pRQQgYvTNhdAwQOo0AGIlLTnQocZHcHChOpKCNLLzyQAAchLBMCCgK0gOKMQBKRQgkSnHCCBCUUF+SSTDbp5JNQRinllEBOIA2VKnbgQAsfQPBBCw7oh6UfCWJAxmQhYADQmIp0oNpfh7BJ5gntaBICenK60QBHtGyXZxETvFCChE1MEIA7OP0JwzYrMODoCoTO5l9SueX5wnR0YKBkEi/cN4gIm7I5gQqKiaDChCVcBBqWoTxigphCZHCRbFimIAohpSjRaXOhjjkqb3RNeABCJlYq5wskDEJCr0ZM0AKiKT4ZaAWOMlBBiEzsOYyfigqxjQPYFlpAnZDcGW23/kn0BSes6I5Xgpn/hQDBmu22QU4LFXjZggTG1rvIAez6K/DABBds8MEIJ6zwwgw37LDDYBCAAQQanHDuwh2oYABSIlggQcALH6CBZyEgAPIpgXrYwMlddDCCi3WEIMGSLgvAAQcgLHBgIg2gNQoIFyfSgQkcgyBTIuXRIsIJM3qX2QosQ0EsKxrM+MI8j4SwahsTwEwIBEHzERwkgCnS9TUYhO2GXI/QVcmkpMwoUrntKXIrKyJQMGMHEWRGwtF9OOApAAYADszcgzBmydD3mQrFNiNEJoICI0QaxQEQhOACAyEIQK8iFXrGQFZPwMGnHRiqDcMxFFDgQL+VNEA0bSEhjGC4EgdBAgKtrDpAQIsuKBDByqCYMIoGsD+cgXCQoMC7w4KPIkLdDxPhAC3UVy9ECV4DoLj2Q1w9CnHgD9HBAzDLp/rAB3wgmQgf3K69syjw5GAL6xs8QQYXLBDBAz8qnwAHSMACGrAPQQAAIfkECQkAMAAsAAAAAGQAZACF/I4U/MqM/K5U/ObE/L50/J40/Nqs/Pbs/LZk/KZE/NKk/MaE/JYk/O7c/OLE/M6c/LJk/MKE/KJE/N68/P78/Lp0/KpU/M6U/LJc/OrU/MJ8/KI8/N60/Pr0/Lps/KpM/Nak/Jos/JIc/MqU/K5c/ObM/L58/J48/Nq0/Pb0/LZs/KZM/MaM/JYs/PLk/Nas////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABv5AmHBILBqPyKRyyWw6n9CodEqtQjulyaTUsXq/1k7GU2CYGYVKpgtuu5GNCANAr9MZmsZ7/3Zh7IB0IiQufIZhFYGKABVsh49OFBdzi4AMFxSQmksNH5WKH3qbo0YolJ92DCikrEIdC6iKC45JFB0HDQ4TGQcdma1PBwixgQgHShQuKB6nACICCg2/wEsHJMSAJMdJDhjNdiIWILRvFCUKLAEvhU3C2HbGSBQoJ7EtC9NtHRMJIv7ODBCUyHekQ4R3dWYdofAiBDYRLMhZObBAxKICCiQWMYVQFZISGxCGGAfmlcVKLQxw8vQu1MJhCAGsEOVlwjdFBdjJG3FzEf6DEQSFZIgp6EHQKBQSYDNxdEgHFdg8aIRhgiidBFOflDgZ64NOJC5IcFU06CuRDiusOttW5cHYTwUmMGlgoicABiZoGnFRQC2AEl5gYQuxiokYFWXOFPAwUEmGvmo5eGHxjjCUA1m2sHUM2apcKy/eVjoBGJKLemozeGkgetGHzYYosCTKAPYUqLFEPBh1QS2CrFo7V7Jg21CDFrRfNL2iwC6dEwNIUdBAlJC+FydEM4CQYTmfBgIQnnDgXYoLEysKhAhxAlp5QyXSEguhkk8yBwZQlCg+ylx4VBsoRw01cThEFmPvDRhbAwpYcEIBBZywwgLdKWihEBTgwkuCF/526OGHIIYIAwUkighMMhNcsEAEC4wwgQscmljFeQmEwJUIISRgglkytnHABcIFguMF/PU4hQsePFQBj0ZKcQAEMcWTRAcOoLfBCiYMANyHHWjQ2iciaKCROWIFQkJjPTJkYEwtCFgESJVsUJqMB/yhFgawgYeKAHqFOMGXxIjwGYYVoSICPjIm4hcABBDRgFKxzCRjSIueQIQDzqXigIkdAPoQESi8U1iIByxaB6iimliqqQBcmmkdDGwqIgWsiuCofKi4ZCJqfm1ABAWFgomoiYr6VUERDViwZ58g/umXCLISMQClishppB9+YcAjmUKeGeOJDVkVgptGdDCACf4fbPCBCQ5s6aFBnpIVgbtNJnEAbu+oUGS9TTTgQbyCeMAsv1EcMIKNlYhQwAj7EvwEjSGcwkAIWDLpMBUoPsDCAiw8gAKMF8dWYsgkl2zyySinrPLKLJtoiwswu0Bvy0ZQMEEFBm6gQYU0R6LAmnWsQN67DayxCQdA2/GBahdmgMEG7aHwbRQu/LeImBZm0IwICkz9xARJA3JCw488FUgBKRzyQiwDj9IAtXbMuYcCbCuYAa92DLoHB5mGYPEmHVgNK9lUNICrIo1Y6Kwdw9o3wpchTOC1GxT8fAcLhFdBgQmiYTT5iAcc8PkQFKSgC8iaUDDCB5SEIIDUU5gTgGIKHgSA5sUUZIDCCy+8WAV2dpzwQs9QOBB2CNESr0QHMBUzM82PLpJA28oPkYEEi0jAdPVIHDAbIAL8zT0MLIgG0fhKVG2m+Og3UAED/jAgMPpNuKAF+/Tnr//+/PfvPzVBAAA7Nmo4bnNja3BCRFQ2c1haVTBIaU0xYUlrVjJ3KzRNeUtSci9KZ3h2NnJaMGFKQ2pvVVBKRFJHK2loWEdWRTJ1Mg==",errorMessages:{ERR_MODULE_NOT_INSTALLED:"Error: The Dynamic Web TWAIN module is not installed.",ERR_BROWSER_NOT_SUPPORT:"Error: This browser is currently not supported.",ERR_CreateID_MustNotInContainers:"Error: Duplicate ContainerId detected for creating Dynamic Web TWAIN objects, please check and modify.",ERR_CreateID_NotContainer:"Error: The ID of the DIV for creating the new DWT object is invalid.",ERR_CreateID_WasmEnvNotLoaded:"Error: The wasm env not loaded.",ERR_DWT_NOT_DOWNLOADED:"Error: Failed to download the Dynamic Web TWAIN module.",limitReachedForZoomIn:"Error: You have reached the limit for zooming in",limitReachedForZoomOut:"Error: You have reached the limit for zooming out",insufficientParas:"Error: Not enough parameters.",invalidAngle:"Error: The angle you entered is invalid.",invalidIndex:"Error: The index you entered is invalid.",invalidHeightOrWidth:"Error: The height or width you entered is invalid.",imageNotChanged:"Error: You have not changed the current image."},generalMessages:{checkingDWTVersion:"Checking WebTwain version ...",updatingDService:"Dynamsoft Service is updating ...",downloadingDWTModule:"Downloading the Dynamic Web TWAIN module.",refreshNeeded:"Please REFRESH your browser.",downloadNeeded:"Please download and install the Dynamic Web TWAIN.",DWTmoduleLoaded:"The Dynamic Web TWAIN module is loaded."},customProgressText:{upload:"Uploading...",download:"Downloading...",load:"Loading...",decode:"Decoding...",decodeTIFF:"Decoding tiff...",decodePDF:"Decoding pdf...",encode:"Encoding...",encodeTIFF:"Encoding tiff...",encodePDF:"Encoding pdf...",canvasLoading:"Loading ..."},buttons:{titles:{previous:"Previous Image",next:"Next Image",print:"Print Image",scan:"Scan Documents",load:"Load Local Images",rotateleft:"Rotate Left",rotate:"Rotate",rotateright:"Rotate Right",deskew:"Deskew",crop:"Crop Selected Area",cut:"Cut Selected Area",changeimagesize:"Change Image Size",flip:"Flip Image",mirror:"Mirror Image",zoomin:"Zoom In",originalsize:"Show Original Size",zoomout:"Zoom Out",stretch:"Stretch Mode",fit:"Fit Window",fitw:"Fit Horizontally",fith:"Fit Vertically",hand:"Hand Mode",rectselect:"Select Mode",zoom:"Click to Zoom In",restore:"Restore Original Image",save:"Save Changes",close:"Close the Editor",removeall:"Remove All Images",removeselected:"Remove All Selected Images"},bShowAllButtons:true,visibility:{scan:true,load:true,print:true,removeall:true,removeselected:true,rotateleft:true,rotate:true,rotateright:true,deskew:true,crop:true,cut:true,changeimagesize:true,flip:true,mirror:true,zoomin:true,originalsize:true,zoomout:true,stretch:true,fit:true,fitw:true,fith:true,hand:true,rectselect:true,zoom:true,restore:true,save:true,close:true}},dialogText:{dlgRotateAnyAngle:["Angle :","Interpolation:","Keep size","  OK  ","Cancel"],dlgChangeImageSize:["New Height :","New Width :","Interpolation method:","  OK  ","Cancel"],saveChangedImage:["You have changed the image. Do you want to keep the change(s)?","  Yes  ","  No  "],selectSource:["Select Source:","Select","Cancel","There is no source available!"]}}}};a.MSG={Loading:"Decoding...",LoadingTiff:"Decoding tiff...",LoadingPdf:"Decoding pdf...",Encoding:"Encoding...",ConvertingToBlob:"Converting to blob...",ConvertingToBase64:"Converting to base64...",SavingPdf:"Saving pdf...",SavingTiff:"Saving tiff...",Downloading:"Downloading...",Uploading:"Uploading...",Wasm_Initializing:"Initializing...",Init_LookingLicense:"Looking for license...",Init_LoadingViewerJs:"Loading the viewer script...",Init_AllJsLoaded:"All scripts loaded.",Init_FireBeforeInitEvt:"OnWebTwainWillInit triggered.",Init_InitActiveX:"Initializing the ActiveX...",Init_InitH5:"Initializing...",Init_InitWasm:"Initializing WebAssembly mode...",Init_DownloadingWasm:"Downloading WebAssembly code...",Init_CompilingWasm:"Compiling WebAssembly code...",Init_InitDynamsoftService:"Initializing the Service mode...",Init_CheckDWT:"Looking for the service module...",Init_CheckDWTVersion:"Checking the service module...",Init_CreatingDWT:"Creating a WebTwain instance...",Init_ConfiguringDWT:"Configuring the WebTwain instance...",Init_SetLicenseForDWT:"Activating the WebTwain instance...",Init_GetLicenseInfoForDWT:"Decoding the license...",Init_CheckingLicense:"Checking the license...",Err_BrowserNotSupportWasm:"It looks like your browser doesn't support the WebAssembly technology which is required to use the library."}})(Dynamsoft);Dynamsoft.OnWebTwainNotFoundOnWindowsCallback=Dynamsoft.OnWebTwainNotFoundOnWindowsCallback||false;Dynamsoft.OnWebTwainNotFoundOnMacCallback=Dynamsoft.OnWebTwainNotFoundOnMacCallback||false;Dynamsoft.OnWebTwainNotFoundOnLinuxCallback=Dynamsoft.OnWebTwainNotFoundOnLinuxCallback||false;Dynamsoft.OnWebTwainOldPluginNotAllowedCallback=Dynamsoft.OnWebTwainOldPluginNotAllowedCallback||false;Dynamsoft.OnWebTwainNeedUpgradeCallback=Dynamsoft.OnWebTwainNeedUpgradeCallback||false;Dynamsoft.OnWebTwainPreExecuteCallback=Dynamsoft.OnWebTwainPreExecuteCallback||false;Dynamsoft.OnWebTwainPostExecuteCallback=Dynamsoft.OnWebTwainPostExecuteCallback||false;Dynamsoft.OnWebTwainShowUpdatingDialog=Dynamsoft.OnWebTwainShowUpdatingDialog||false;Dynamsoft.OnWebTwainCloseUpdatingDialog=Dynamsoft.OnWebTwainCloseUpdatingDialog||false;Dynamsoft.OnRemoteWebTwainNotFoundCallback=Dynamsoft.OnRemoteWebTwainNotFoundCallback||false;Dynamsoft.OnRemoteWebTwainNeedUpgradeCallback=Dynamsoft.OnRemoteWebTwainNeedUpgradeCallback||false;Dynamsoft.OnWebTWAINDllDownloadSuccessful=Dynamsoft.OnWebTWAINDllDownloadSuccessful||false;Dynamsoft.OnWebTWAINDllDownloadFailure=Dynamsoft.OnWebTWAINDllDownloadFailure||false;Dynamsoft.OnWebTWAINModuleDownloadManually=Dynamsoft.OnWebTWAINModuleDownloadManually||false;var Dynamsoft_ChangeConfig=Dynamsoft_ChangeConfig||false,Dynamsoft_OnLoad=Dynamsoft_OnLoad||false,Dynamsoft_OnNotReady=Dynamsoft_OnNotReady||false,Dynamsoft_OnReady=Dynamsoft_OnReady||false;(function(b){var c={},a=Dynamsoft.dcp;b.mix(c,Dynamsoft.DWT.defaultEnv);b.mix(c,Dynamsoft.WebTwainEnv);c.RegisterEvent=function(d,e){if((d==="OnWebTwainReady"||!Dynamsoft.WebTwainEnv.UseDefaultInstallUI)&&b.isFunction(e)){Dynamsoft.WebTwainEnv[d]=e}else{if((d==="OnWebTwainInitMessage")&&b.isFunction(e)){Dynamsoft.WebTwainEnv[d]=e}}return true};Dynamsoft.WebTwainEnv=c;a.onReadys.push(function(){a.ifCheck64bitServiceFirst=Dynamsoft.WebTwainEnv.IfCheck64bitServiceFirst})})(Dynamsoft.Lib);(function(o){var k=!0,q=!1,u=document.location.protocol,e=location.hostname,a=Dynamsoft.navInfoSync,p=a.bSSL,j=a.bHTML5Edition,c=q,h=q,w=q,t=0,g=location.pathname,f=0,b,l;b={config:{debug:q,devMode:q,usingMainMode:q,bDiscardBlankImage:q,msg:[],msgPrefix:'<span style="color:#cE5E04"><b>',msgSuffix:"</b></span><br />"},detect:{ssl:p,dcpStatus:0,dcpCallbackType:0,arySTwains:[],arySTwainsByIP:[],aryWSPool:[],bFirst:k,bOK:q,__dialog:q,scriptLoaded:q,wasmScriptLoaded:q,wasmLoad:q,cssLoaded:q,viewerScriptLoaded:q,bNoControlEvent:q,bNeedUpgradeEvent:q,StartWSTimeoutId:q,StartWSByIPTimeoutId:q,bPromptJSOrServerOutdated:q,detectType:p?1:(u==="http:"||e==="")?0:-1,tryTimes:0,ports:[{port:18623,ssl:k},{port:18622,ssl:q}],win64Ports:[{port:18621,ssl:k},{port:18620,ssl:q}],cUrlIndex:0,urls:[],onNoControl:q,needUpgrade:q,onNotAllowedForChrome:q,OnDetectNext:q,OnCreatWS:q,bMaskShow:q},page:{bUnload:q,OnUnload:q},tmp:{IfAllowLocalCache:k,EmptyFunction:function(){}}};b.appendMessage=function(x){if(typeof(x)==="string"){b.config.msg.push(x)}else{if(Object.prototype.toString.call(x)==="[object Array]"){Dynamsoft.Lib.each(x,function(y){b.appendMessage(y)})}}};b.appendRichMessage=function(x){b.appendMessage([b.config.msgPrefix,x,b.config.msgSuffix])};b.clearMessage=function(){var x=Dynamsoft.navInfoSync;if(x.bIE&&x.IEVersion==8){b.config.msg.splice(0,b.config.msg.length)}else{b.config.msg.splice(0)}return k};b.getRealPath=function(x){if(x===undefined){return""}if(b.env.pathType==1){return b.env.basePath+x}return b.env.basePath+x.replace(new RegExp("/","g"),"\\\\")};b.getHex=function(y){var x;x=Number(y).toString(16).toUpperCase();if(x.length==1){x=["0",x].join("")}return x};b.getColor=function(z){var y,x,B,A;A=z>>16;B=(z&65280)>>8;x=z&255;y=["#",b.getHex(A),b.getHex(B),b.getHex(x)].join("");return y};b.RGB2BGR=function(y){var B,x,A,z;z=y>>16;A=(y&65280);x=y&255;B=(x<<16)|A|z;return B};b.BGR2RGB=b.RGB2BGR;b.isLocalIP=function(x){return x&&(x==="127.0.0.1"||x==="localhost"||x==="local.dynamsoft.com")};var n=navigator,i=n.userAgent.toLowerCase(),d=n.platform.toLowerCase(),s=!a.bMobile&&(/win32|win64|windows/).test(d),v=s&&(/win64|x64/).test(i),m="",r="";if(i.indexOf("mac os x")>-1){m=i.match(/mac os x [\d._]*/gi);m=(m+"").replace(/[^0-9|_.]/ig,"").replace(/_/ig,".")}if(i.indexOf("cpu os")>-1){r=i.match(/cpu os [\d._]*/gi);r=(r+"").replace(/[^0-9|_.]/ig,"").replace(/_/ig,".")}if(i.indexOf("cpu iphone os")>-1){r=i.match(/cpu os [\d._]*/gi);r=(r+"").replace(/[^0-9|_.]/ig,"").replace(/_/ig,".")}if(e===""){if(s&&g.lastIndexOf("\\")>1){g=g.substring(1,g.lastIndexOf("\\")).replace(/%20/g," ")}else{f=1;g=g.substring(1,g.lastIndexOf("/")).replace(/%20/g," ")}}else{f=1;g=g.substring(0,g.lastIndexOf("/"))}if(a.bIE){t=a.IEVersion;if(t===""||t>8){if(t>=10&&Dynamsoft.WebTwainEnv.IfUseActiveXForIE10Plus==false){j=k}else{j=q;w=k}}else{h=k}}else{if(!j){c=k}}b.env={bIE:a.bIE,bEdge:a.bEdge,bWin64:v,osVersion:r,macOSX:m,bFileSystem:a.bFileSystem,bMobile:a.bMobile,strIEVersion:a.IEVersion,basePath:g,pathType:f,isDesktopViewer:function(){return Dynamsoft.navInfo.bWin||Dynamsoft.navInfo.bLinux||Dynamsoft.navInfo.bMac},isPadViewer:function(){return Dynamsoft.navInfo.bPad||Dynamsoft.navInfo.bChromeOS},isMobileViewer:function(){return Dynamsoft.navInfo.bMobile}};b.product={name:"Dynamic Web TWAIN",bHTML5Edition:j,bPluginEdition:c||w,bActiveXEdition:h,host:Dynamsoft.dcp.host,wsProtocol:"dwt_command",_iImageCaptureDriverType:3,_iBrokerProcessType:1,getChromeEditionPath:Dynamsoft.dcp.getDSPath,getPKGPath:function(){var x="/dist/mac/DynamicWebTWAINMacEdition.pkg";return Dynamsoft.WebTwainEnv.ResourcesPath+x},getMSIPath:function(){var x="/dist/win/DynamicWebTWAINPlugIn.msi";return Dynamsoft.WebTwainEnv.ResourcesPath+x},getActiveXCABx86Path:function(){var x="/dist/win/ActiveX/DynamicWebTWAIN.cab";return Dynamsoft.WebTwainEnv.ResourcesPath+x},getActiveXCABx64Path:function(){var x="/dist/win/ActiveX/DynamicWebTWAINx64.cab";return Dynamsoft.WebTwainEnv.ResourcesPath+x},strMIMEType:"Application/DynamicWebTwain-Plugin",strFullClassID:"E7DA7F8D-27AB-4EE9-8FC0-3FEC9ECFE758",scripts:{},bChromeEdition:j};b.getShadowRoot=function(y){var x=y;if(o.win.ShadowRoot){while(x){if(x instanceof o.win.ShadowRoot){return x}x=x.parentNode}}return false};b.isShadowRoot=function(x){if(o.win.ShadowRoot){if(x instanceof o.win.ShadowRoot){return true}}return false};o.mix(o,b);o.Addon_Events=[];o.Addon_Sendback_Events=[]})(Dynamsoft.Lib);Dynamsoft.Ready(function(m,g){var h=!0,r=!1,d=m.getNavInfo(),a=Dynamsoft.navInfoSync,w=navigator.userAgent.toLowerCase(),v=document.location.protocol,e=location.hostname,p=a.bSSL,s=d.bMac,z=d.bLinux,u=d.bWin,j=d.bOSx64,k=d.bSafari,l=d.bFirefox,n=d.bEdge,q=d.bChrome,t=d.bIE,y=parseFloat(d.strBrowserVersion),o=r,f=0,c,i;var b={getServerVersionInfo:function(B){var A=Dynamsoft.WebTwainEnv.ServerVersionInfo;if(d.bWin||d.bWin64){}else{if(d.bMac){A=Dynamsoft.WebTwainEnv.ServerMacVersionInfo}else{if(d.bLinux){A=Dynamsoft.WebTwainEnv.ServerLinuxVersionInfo}else{}}}if(B){return A}return m.replaceAll(A,",","")},getDWTPrefix:function(){var A=Dynamsoft.WebTwainEnv;if(A.CustomMode===true){return"dwtc_"}return"dwt_"}};m.mix(m.product,b);var x={bChrome:q,bFirefox:l,bSafari:k,bWin:u,bWin64:(w.indexOf("win64")!=-1||w.indexOf("x64")!=-1),bMac:s,bLinux:z,isX64:j,iPluginLength:(d.bIE||d.bEdge)?0:navigator.plugins.length,strChromeVersion:d.bChrome?y:"",strFirefoxVersion:d.bFirefox?y:""};m.mix(m.env,x)});Dynamsoft.Ready(function(f,b){var e=f.getNavInfo(),d=!0,h=!1,a=!1,c={ActiveX:0,Plugin:1,HTML5:2,WinMacLinux:3,Barcode1D:4,Barcode2D:5,BarcodeWriter:6,OCR:7,Webcam:8,PDFRasterizer:9,OCRPro:10,QR:50,PDF417:51,DataMatrix:52},g={WinMacLinux:1,Barcode1D:2,Barcode2D:3,OCR:4,Webcam:6,PDFRasterizer:9};f.License={checkProductKey:function(Q,G,N,v){var r,t=Dynamsoft.WebTwainEnv,D=v,A;r=Q.__licenseInfo;if(!f.isString(t.ProductKey)||t.ProductKey==""||t.ProductKey=="******"||!r||!f.isArray(r.Detail)||(r.Detail.length==0)){f.Errors.LicenseEmptyOrInvalid(Q);f.License.ShowInvalidLicense("",true);return h}var O=0,j=0,M=[],k=[],y=h,R=h,B=h,H=h,p=h,s=h,F,L,E,q;if(!this.isBindDomainOK(r.Domain)){f.Errors.LicenseBadDomain(Q);if(D){f.License.promptLicenseErr(Q)}return h}if(r.Detail.length>0){E=r.Detail[0];if(E.Trial=="FALSE"){A=false}else{A=true}}for(L=1;L<r.Detail.length;L++){E=r.Detail[L];if(E.Trial=="FALSE"&&A||E.Trial=="TRUE"&&!A){f.Errors.LicenseTrialFullMixed(Q);if(D){f.License.promptLicenseErr(Q)}return h}}if(G.Core){for(L=0;L<r.Detail.length;L++){E=r.Detail[L];q=this.getEnumLicenseType(E.EnumLicenseType);if(q.Core){var P=this.getLicenseType(E.LicenseType);if(f.product.bHTML5Edition){if(P.ActiveX&&!P.Html5){continue}k.push(E)}else{if(!P.ActiveX&&P.Html5){continue}k.push(E)}}}}else{k=r.Detail}for(L=0;L<k.length;L++){var w=d;E=k[L];q=this.getEnumLicenseType(E.EnumLicenseType);if(G.Core||this.isAllowLicenseType(q,G)){F=E.ExpireDate.replace(/-/g,"/");var S=(E.Trial!="FALSE");if(!this.isExpiredOrFuture(F,S)){if(q.Core&&parseInt(E.Version)>=15||!q.Core){if(G.Wasm){var K=false;if(G.Core&&q.Core){K=true}else{if(G.PDFRasterizer&&q.PDFRasterizer){K=true}else{if(G.Webcam&&q.Webcam){K=true}else{}}}if(K){if(E.OS.toLowerCase().indexOf("wasm")>-1){if(this.isBrowserOK(E.Browser)||N){O++;w=h}else{R=d}}else{if(G.PDFRasterizer){p=d}else{if(G.Webcam){s=d}else{H=d}}}}}else{if(this.isOSOK(E.OS,Q)){if(this.isBrowserOK(E.Browser)||N){O++;w=h}else{R=d}}else{y=d}}}else{B=d}}else{M.push(F)}if(w){j++}}}if(O>0){return d}if(j==0){this.setNoAllowedLicenseTypeError(Q,G);if(D){f.License.promptLicenseErr(Q)}return h}if(M.length>0){var x=0,u=100000000000000000000,J="",m=(new Date()).getTime(),z;F="";for(L=0;L<M.length;L++){z=this.parseDateFromString(M[L]);if(z.getTime()<m&&z.getTime()>x){x=z.getTime();F=M[L]}else{if(z.getTime()>m&&z.getTime()<u){u=z.getTime();J=M[L]}}}if(F!=""){z=this.parseDateFromString(F);F=this.getLicenseDateString(z);f.Errors.LicenseExpired(Q,F);D=false;f.License.ShowInvalidLicense(F,A)}else{if(J!=""){z=this.parseDateFromString(J);J=this.getLicenseDateString(z);f.Errors.LicenseIsFuture(Q,J)}else{f.Errors.LicenseExpired(Q,"");D=false;f.License.ShowInvalidLicense()}}if(D){f.License.promptLicenseErr(Q)}return h}if(B){f.Errors.LicenseLower(Q);if(D){f.License.promptLicenseErr(Q)}return h}if(R){if(e.bEdge){f.Errors.LicenseNoEdge(Q)}else{if(e.bChrome){f.Errors.LicenseNoChrome(Q)}else{if(e.bFirefox){f.Errors.LicenseNoFirefox(Q)}else{if(e.bIE){f.Errors.LicenseNoIE(Q)}else{if(e.bSafari){f.Errors.LicenseNoSafari(Q)}else{f.Errors.LicenseNotSupportBorwser(Q)}}}}}if(D){f.License.promptLicenseErr(Q)}return h}if(y){var I=Q,l=false,C=false,n=false;if(I._bRemoteMode){if(I.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumWindow){n=true}else{if(I.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumLinux){C=true}else{if(I.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumMac){l=true}}}}else{l=e.bMac;C=e.bLinux;n=e.bWin||e.bWin64}if(n){f.Errors.LicenseNotSupportWindows(Q)}else{if(l){f.Errors.LicenseNotSupportMAC(Q)}else{if(C){f.Errors.LicenseNotSupportLinux(Q)}else{f.Errors.LicenseNotSupportOS(Q)}}}if(D){f.License.promptLicenseErr(Q)}return h}if(H){f.Errors.LicenseNotSupportWasm(Q);if(D){f.License.promptLicenseErr(Q)}return h}if(p){f.Errors.LicenseNotSupportPdfRWasm(Q);if(D){f.License.promptLicenseErr(Q)}return h}if(s){f.Errors.LicenseNotSupportWasmWasm(Q);if(D){f.License.promptLicenseErr(Q)}return h}f.Errors.LicenseEmptyOrInvalid(Q);if(D){this.promptLicenseErr(Q)}return h},promptLicenseErr:function(j){if(j.ErrorCode<0){var i=['<div class="dynamsoft-dwt-dlg-tips" style="text-align:left">',j.ErrorString,"</div>",'<div style="padding-top:35px"></div>'];Dynamsoft.WebTwainEnv.ShowDialog(365,0,i.join(""))}},ShowInvalidLicense:function(m,o){if(f.detect.needUpgrade){return}var k=[],l="is not valid",n=screen.width,j=n>680?680:(n-10);if(m&&m!=""){if(m.indexOf("on")==-1){l="has expired on "+m}else{l="has expired "+m}}k.push('<div style="padding:15px;border:1px solid #CCCCCC;background:#FFFFFF">');if(f.env.bMobile){k.push("The <strong>ProductKey</strong> is not valid.");if(o){k.push(" Please <br /><ol><li>1. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense' target='_blank'>Request a trial license</a>.</li>");k.push("<li>2. <a class='dynamsoft-major-color' href='https://www.dynamsoft.com/web-twain/docs/indepth/development/upgrade.html#update-the-product-key' target='_blank'>Update the ProductKey</a>.</li>")}}else{k.push("You are seeing this dialog because the <strong>ProductKey</strong> ");k.push(l);if(o){k.push(". Please follow the steps below <br />");k.push("<ol><li>Request a <strong>Dynamic Web TWAIN</strong> trial license <strong><a class='dynamsoft-major-color' href='https://www.dynamsoft.com/customer/license/trialLicense' target='_blank'>here</a></strong></li>");k.push("<li>Refer to this <strong><a class='dynamsoft-major-color' href='https://www.dynamsoft.com/web-twain/docs/indepth/development/upgrade.html#update-the-product-key' target='_blank'>article</a></strong> to update the ProductKey</li>");k.push("<li>Do a <strong>hard refresh</strong> or clear cache in your browser to make sure the new ProductKey is used</li>");k.push("<li>If the issue persists, please contact us at <a class='dynamsoft-major-color' href='mailto:support@dynamsoft.com'>support@dynamsoft.com</a></li>")}else{k.push(".<br />")}}k.push("</div>");f.ShowLicenseDialog(k.join(""),{width:j,height:0,bClose:false,seconds:100});if(f.env.bMobile){var i=f.one(".ds-dwt-ui-dlg-license-wrap");if(i&&i.length>0){i[0].style.fontSize="1.5em";i[0].style.lineHeight="1.5em"}}},isBindDomainOK:function(p){if(f.isUndefined(p)||p==null||p==""||p=="*"||p=="*.*"){return d}var s=location.hostname,j=h;if(s==""){return d}var t=s.toLowerCase().split("."),k=t.length,n=p.toLowerCase().split(";");for(var o=0;o<n.length;o++){var m=n[o];if(m=="*.*"){j=d;break}var r=m.split("."),u=r.length;if(u>0&&u-1<=k){var q=d;for(var l=u-1;l>0;l--){if(r[l].indexOf("*")>-1){j=d;break}if(l+k-u>=0){if(t[l+k-u]!=r[l]){q=h;break}}else{if(r[l]!="*"){q=h;break}}}if(q){if(r[0]=="*"||k>=u&&t[k-u]==r[0]){j=d;break}}}}return j},isExpiredOrFuture:function(j,m){if(j==""){return h}if(!m){var i=j.length;if(i>2&&j[i-2]=="/"&&j[i-1]=="0"){return h}}var l=this.parseDateFromString(j),k=(new Date()).getTime(),n=k+(60*24*3600000);if(l.getTime()<k){return d}else{if(m&&(l.getTime()>n)){return d}}return h},isOSOK:function(k,m){var o=m,n=false,j=false,l=false,i=false;if(k==""||k=="0"){return d}if(o._bRemoteMode){if(o.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumWindow){l=true}else{if(o.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumLinux){j=true}else{if(o.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumMac){n=true}}}}else{n=e.bMac;j=e.bLinux;l=e.bWin||e.bWin64;i=f.env.bMobile}k=k.toLowerCase();if(k.indexOf("windows")>-1&&l){return d}else{if(k.indexOf("mac")>-1&&n){return d}else{if(k.indexOf("linux")>-1&&j){return d}else{if(k.indexOf("mobile")>-1&&i){return d}}}}return h},isBrowserOK:function(k){if(f.isString(k)){if(k==""||k=="0"){return d}k=k.toLowerCase();var i=k.split(";"),j=h;f.each(i,function(l){if(f.trim(l)=="chrome"&&(e.bChrome||e.bSafari)){j=d}else{if(f.trim(l)=="ie"&&(e.bIE||e.bEdge)){j=d}else{if(f.trim(l)=="firefox"&&e.bFirefox){j=d}}}});return j}return h},parseDateFromString:function(j){var k,i=j;i=i.replace(/-/g,"/");k=Date.parse(i);if(isNaN(k)){k=0}return new Date(k)},getEnumLicenseType:function(m){var j=h,q=h,o=h,l=h,r=h,p=h,n=h,k=h,i=h;if(f.isString(m)){f.each(m.split(";"),function(t){var s=t*1;if(s==c.HTML5||s==c.WinMacLinux||s==c.ActiveX||s==c.Plugin){j=d}else{if(s==c.Barcode1D){q=d}else{if(s==c.QR){o=d}else{if(s==c.PDF417){l=d}else{if(s==c.DataMatrix){r=d}else{if(s==c.OCR){p=d}else{if(s==c.Webcam){n=d}else{if(s==c.PDFRasterizer){k=d}else{if(s==c.OCRPro){i=d}}}}}}}}}})}return{Core:j,PDFRasterizer:k,Webcam:n,barcode1D:q,QR:o,PDF417:l,DataMatrix:r,OCR:p,OCRPro:i}},getLicenseType:function(m){var n=h,r=h,k=h,p=h,l=h,s=h,q=h,o=h,j=h,i=h;if(m&&m!=""){m=m.toLowerCase();if(m=="html5;activex;oldie"){k=d}else{if(m=="html5"||m=="win=(aph) or mac=(ph) or linux(h)"){n=d}else{if(m=="html5;activex"){n=d;k=d}else{if(m=="1d barcode reader"){r=d}else{if(m=="2d barcode reader(qrcode)"){p=d}else{if(m=="2d barcode reader(pdf417)"){l=d}else{if(m=="2d barcode reader(data matrix)"){s=d}else{if(m=="ocr"){q=d}else{if(m=="webcam"){o=d}else{if(m=="pdf rasterizer"){j=d}else{if(m=="proocr"){i=d}}}}}}}}}}}}return{Html5:n,PDFRasterizer:j,Webcam:o,barcode1D:r,QR:p,PDF417:l,DataMatrix:s,OCR:q,OCRPro:i,ActiveX:k}},isAllowLicenseType:function(i,j){if(j.Core){return i.Core}else{if(j.PDFRasterizer){return i.PDFRasterizer}else{if(j.Webcam){return i.Webcam}else{if(j.barcode1D){return i.barcode1D}else{if(j.QR){return i.QR}else{if(j.PDF417){return i.PDF417}else{if(j.DataMatrix){return i.DataMatrix}else{if(j.OCR){return i.OCR}else{if(j.OCRPro){return i.OCRPro}}}}}}}}}return i.Core},setNoAllowedLicenseTypeError:function(j,i){if(i.Core){if(i.Wasm){f.Errors.LicenseNotSupportWasm(j)}else{f.Errors.LicenseNoCore(j)}}else{if(i.PDFRasterizer){if(i.Wasm){f.Errors.LicenseNotSupportPdfRWasm(j)}else{f.Errors.LicenseNoPDF(j)}}else{if(i.Webcam){if(i.Wasm){f.Errors.LicenseNotSupportWebcamWasm(j)}else{f.Errors.LicenseNoWebcam(j)}}else{if(i.barcode1D){f.Errors.LicenseNo1D(j)}else{if(i.QR){f.Errors.LicenseNo2DQR(j)}else{if(i.PDF417){f.Errors.LicenseNo2DPDF417(j)}else{if(i.DataMatrix){f.Errors.LicenseNo2DDataMatrix(j)}else{if(i.OCR){f.Errors.LicenseNoOCR(j)}else{if(i.OCRPro){f.Errors.LicenseNoOCRPro(j)}else{f.Errors.LicenseEmptyOrInvalid(j)}}}}}}}}}},getLicenseDateString:function(i){var k=i.getFullYear(),j,m,l;j=i.getMonth()+1;if(j>=10){m=""+j}else{m="0"+j}if(i.getDate()>=10){l=""+i.getDate()}else{l="0"+i.getDate()}return[m,"/",l,"/",k].join("")},hasPDFRProductKey:function(i){if(i._isMobileMode()){if(!f.License.checkProductKey(i,{PDFRasterizer:true,Wasm:true},true)){i._resetErr();return false}}else{if(!f.License.checkProductKey(i,{PDFRasterizer:true},true)){i._resetErr();return false}}return true},checkPDFProductKeyWhenNeeds:function(k,l){if(l==EnumDWT_ImageType.IT_PDF||l==EnumDWT_ImageType.IT_MULTIPAGE_PDF){var i=1,j;if(f.product.bHTML5Edition){if(k.__addon&&k.__addon.PDF){j=k.__addon.PDF.GetConvertMode()}}else{if(k.Addon&&k.Addon.PDF){j=k.Addon.PDF.GetConvertMode()}}if(j==i){if(f.isFunction(k._isMobileMode)&&k._isMobileMode()){return this.checkProductKey(k,{PDFRasterizer:true,Wasm:true},true)}else{return this.checkProductKey(k,{PDFRasterizer:true},true)}}}return d}}});Dynamsoft.Ready(function(c,a){var b=!0,d=!1,e={Errors:{FilePathSyntaxIncorrect:function(f){f._errorCode=-3123;f._errorString="The filename, directory name, or volume label syntax is incorrect."}},checkFilePath:function(g,f){if(!c.isString(f)||f.length==0){c.Errors.InvalidFile(g);return d}if(c.startsWith(f,"http://")||c.startsWith(f,"https://")||c.startsWith(f,"ftp://")){c.File.Errors.FilePathSyntaxIncorrect(g);return d}return b}};e.checkFolder=e.checkFilePath;c.File=e});(function(a,b){a.install={_divInstallBody:"dwt-InstallBody",_divDWTNonInstallContainerID:"dwt-NonInstallContainerID",_divDWTemessageContainer:"",_dlgInstall:false};a.install._strDynamsoftWithClose=['<div class="dynamsoft-dwt-dlg-header">','<div class="dynamsoft-dialog-close"></div>',"</div>"].join("");a.install._strDynamsoftWithoutClose=['<div style="height:40px;"></div>'].join("");a.install._strNonInstallDIV=['<div style="text-align:center;" id="',a.install._divDWTNonInstallContainerID,'"></div>'].join("");b.CloseDialog=function(){var e=a.install._dlgInstall;if(e){var d=a.all(".dynamsoft-dialog-close");a.each(d,function(f,g){a.removeEventListener(f,"click",DCP_DWT_OnClickCloseInstall)});if(e.open){e.close()}if(a.install._dlgFromImageEditor){if(a.one(".D_ImageUIEditor")[0]){var c=a.one(".D_ImageUIEditor")[0].parentNode;c.removeChild(e)}else{document.body.removeChild(e)}}else{document.body.removeChild(e)}a.install._dlgInstall=false}};b.ShowDialog=function(h,k,l,c,i){var f=a.install,o;if(!a.get("dynamsoft_waiting")){var d=document.createElement("div");d.className="dynamsoft-dialog-wrap";d.style.width="100%";o=['<div id="dynamsoft_waiting" style="border:0;position:relative;z-index:9999;background:transparent;margin:0 auto">','<iframe frameborder="0" marginheight="0" marginwidth="0" scrolling="no" src="javascript:\'\'"',' style="width:100%;height:100%;border:0;background:transparent;position:absolute;left:0;top:0;z-index:-1">',"</iframe>",'<div class="dynamsoft-dialog dynamsoft-dialog2" style="border:1px solid #CCCCCC;">','<div id="',f._divInstallBody,'"></div></div></div>'];d.innerHTML=o.join("");if(c){if(a.one(".D_ImageUIEditor")[0]){var e=a.one(".D_ImageUIEditor")[0].parentNode;e.appendChild(d)}else{document.body.appendChild(d)}}else{document.body.appendChild(d)}f._dlgFromImageEditor=c;f._dlgInstall=d;a.dialog.setup(f._dlgInstall)}if(l===false){return}var j=Dynamsoft.Lib.one(".dynamsoft-dialog");if(j&&j.getEL()){j[0].style.width=h+"px";if(k&&k>0){j[0].style.height=k+"px"}}if(c){a.get(f._divInstallBody).innerHTML=['<div class="dynamsoft-dwt-dialog-body">',l,"</div>"].join("")}else{var m=(i?f._strDynamsoftWithoutClose:f._strDynamsoftWithClose);a.get(f._divInstallBody).innerHTML=['<div class="dynamsoft-dwt-dialog-body">',m,l,"</div>"].join("")}var n=a.get("dynamsoft_waiting");n.style.width=h;if(f._dlgInstall.open){f._dlgInstall.close()}f._dlgInstall.showModal();var g=a.all(".dynamsoft-dialog-close");a.each(g,function(p,q){a.addEventListener(p,"click",DCP_DWT_OnClickCloseInstall)})};b.OnWebTwainPreExecute=function(){Dynamsoft.Lib.detect.OnWebTwainPreExecute(Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer)};b.OnWebTwainPostExecute=function(){Dynamsoft.Lib.detect.OnWebTwainPostExecute()}})(Dynamsoft.Lib,Dynamsoft.WebTwainEnv);var DCP_DWT_OnClickCloseInstall=function(e){var c=Dynamsoft.Lib,f=c.install._dlgInstall;Dynamsoft.WebTwainEnv.CloseDialog();var b=c.get(c.install._divDWTNonInstallContainerID);if(b){b.parentNode.removeChild(b)}if(e&&c.isDOM(e)){c.show(e)}if(e&&c.isString(e)){c.show(e)}else{var a,d;d=Dynamsoft.WebTwainEnv.Containers;if(d){for(a=0;a<d.length;a++){if(d[a].ContainerId){c.show(d[a].ContainerId)}}}d=Dynamsoft.WebTwainEnv.DynamicContainers;if(d){for(a=0;a<d.length;a++){if(d[a].ContainerId){c.show(d[a].ContainerId)}}}d=null}if(c.install._divDWTemessageContainer!=""){c.show(c.install._divDWTemessageContainer)}};(function(b){var a=b.win;a.DCP_DWT_OnClickCloseInstall=DCP_DWT_OnClickCloseInstall;b.detect.showMask=function(){b.detect.bMaskShow=true;if(!Dynamsoft.WebTwainEnv.ScanDirectly){if(b.isFunction(Dynamsoft.OnWebTwainPreExecuteCallback)){Dynamsoft.OnWebTwainPreExecuteCallback()}else{b.detect.OnWebTwainPreExecute(Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer)}}};b.detect.OnWebTwainPreExecute=function(f){var e=f,c,d;if(Dynamsoft.WebTwainEnv.Containers.length>0){d=Dynamsoft.Lib.get(Dynamsoft.WebTwainEnv.Containers[0].ContainerId)}if(d){c=d.getBoundingClientRect();if(d.firstChild&&d.firstChild.getBoundingClientRect){c=d.firstChild.getBoundingClientRect()}}if(c==undefined||Dynamsoft.WebTwainEnv.Containers.length>1||(Dynamsoft.WebTwainEnv.Containers.length==1&&(c.width==0||c.height==0))){e=false}b.mask.bConfined=e;b.mask.container=d;b.showMask()};b.detect.hideMask=function(){b.detect.bMaskShow=false;if(!Dynamsoft.WebTwainEnv.ScanDirectly){if(b.isFunction(Dynamsoft.OnWebTwainPostExecuteCallback)){Dynamsoft.OnWebTwainPostExecuteCallback()}else{b.detect.OnWebTwainPostExecute()}}};b.detect.OnWebTwainPostExecute=b.hideMask})(Dynamsoft.Lib);(function(a){a.install._dlgLicense=false;a._gb_xkz_dhk=function(){var c=a.install._dlgLicense;if(c){var b=a.one(".dynamsoft-dialog-close",c);if(b.getEL()){a.removeEventListener(b.getEL(),"click",a._gb_xkz_dhk)}if(c.open){c.close()}document.body.removeChild(c);a.install._dlgLicense=false}};a._zdgb_xkz_dhk=function(){var c=a.install._dlgLicense;if(c){var d=a.one(".dynamsoft-dialog-closeTimer",c);if(d.getEL()){var b=parseInt(d.getEL().style.width);b-=1;if(b<=0){a._gb_xkz_dhk()}else{d.getEL().style.width=b+"%";setTimeout(a._zdgb_xkz_dhk,100)}}}};a.ShowLicenseDialog=function(c,f){var k=a.install,s,e="dynamsoft-dialog-license",r="ds-dwt-ui-dlg-license-wrap",b=screen.width,j,m,g,n,t,o;if(f){j=f.width;m=f.height;g=f.seconds;n=f.bClose}if(!j){j=b>600?600:(b-10)}else{if(j>(b-10)){j=b-10}}if(!m){m="100%"}if(!g){g=10}if(a.one("."+e).length==0){var l=document.createElement("div"),h=document.createElement("div"),d=document.createElement("iframe");l.className=e;if(j==600){l.style.width="100%"}else{var i;if(window.parent==window){i=(b-j)/2}else{i=(document.body.clientWidth-j)/2}if(i>0){l.style.left=i+"px"}l.style.width=j+"px"}l.style.position="absolute";h.className=r;h.innerHTML=c;h.style.margin="auto";h.style.backgroundColor="white";h.style.zIndex="9999";h.style.position="relative";h.style.border="0";d.frameborder="0";d.marginheight="0";d.marginwidth="0";d.scrolling="no";d.style.border="0";d.style.backgroundColor="transparent";d.style.position="absolute";d.style.left=0;d.style.top=0;d.style.width="100%";d.style.height="100%";d.style.margin="auto";d.style.zIndex=-1;d.src='javascript:""';h.appendChild(d);if(n){t=document.createElement("div");t.className="dynamsoft-dialog-close";h.insertBefore(t,h.firstChild);o=document.createElement("div");o.className="dynamsoft-dialog-closeTimer";o.style.width="100%";o.style.height="2px";o.style.marginTop="-2px";o.style.backgroundColor="#fe8e14";h.insertBefore(o,h.firstChild)}l.appendChild(h);document.body.appendChild(l);k._dlgLicense=l;a.dialog.setup(k._dlgLicense)}var q=a.one("."+r);if(q&&q.getEL()){q[0].style.width=j+"px";if(a.isNumber(m)&&m>0){q[0].style.height=m+"px"}else{q[0].style.height="100%"}}if(k._dlgLicense.open){k._dlgLicense.close()}k._dlgLicense.showModal();if(n){t=a.one(".dynamsoft-dialog-close",k._dlgLicense);if(t.getEL()){a.addEventListener(t.getEL(),"click",a._gb_xkz_dhk);setTimeout(a._zdgb_xkz_dhk,100)}}};a.openLoadingMsg=function(){if(!a.product.bHTML5Edition){return}var c=Dynamsoft.WebTwainEnv.UseLocalService;if(a.isUndefined(c)&&!a.env.bMobile||c==true){return}var f,e,g;if(!a.dlgLoading){var h=a.loaderBarClassName+"-noserver",d=a.loaderBarClassName+"-noserver-parent";g=[];g.push('<dialog class="dynamsoft-loadingMsg" closed="closed" style="top:30%">');g.push(['<div class="',d,'">'].join(""));g.push(['<div class="',h,'">'].join(""));g.push(['<img src="',a.loaderBarSource,'" />'].join(""));g.push('</div><h3 class="dynamsoft-loadingMsg-msg"> </h3>');g.push('<p class="dynamsoft-loadingMsg-desc"> </p>');g.push("</div></dialog>");e=a.one(".dynamsoft-loadingMsg");if(e&&e.getEL()){e.remove()}var b=a.parseHTML(g.join(""));if(b&&b.length>0){document.body.appendChild(b[0])}e=a.one(".dynamsoft-loadingMsg");if(e&&e.getEL()){a.dlgLoading=e[0];a.dialog.setup(a.dlgLoading)}}a.dlgLoading.showModal();a.dlgLoadingShowStatus=true};a.showLoadingMsg=function(h,g,f){if(a.dlgLoadingShowStatus==false){return}var b=a.one(".dynamsoft-loadingMsg"),d=a.one(".dynamsoft-loadingMsg-msg"),e=a.one(".dynamsoft-loadingMsg-desc");if(d&&d.getEL()){d.html(g)}if(e&&e.getEL()){if(a.env.bMobile){var c=e.getEL();c.style.fontSize="1.4em"}e.html(f)}};a.closeLoadingMsg=function(b){a.log("closeLoadingMsg:"+b);if(a.dlgLoadingShowStatus==true){if(a.dlgLoading){a.dlgLoading.close()}a.dlgLoadingShowStatus=false}}})(Dynamsoft.Lib);(function(b){b.domReady(function(){var e=document.createElement("style"),d=["dialog{position:absolute;left:0;right:0;top:30%;margin:auto;padding:6px;color:black;width:-moz-fit-content;display:none;-webkit-box-sizing:content-box;box-sizing:content-box}dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-dwt-dialogProgress{width:300px;background:#FFF}.dynamsoft-finalMessage{margin:0 0 15px 0;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-desc{margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.dynamsoft-status{color:#555;font:14px/22px Arial,sans-serif;margin-bottom:5px}.dynamsoft-progressBar{-webkit-appearance:none;width:280px;margin-bottom:20px;height:14px}.dynamsoft-progressBar,.dynamsoft-progressBar::-webkit-progress-bar{background-color:#e7e7e7;border-radius:7px}.dynamsoft-progressBar::-webkit-progress-value,.dynamsoft-progressBar::-moz-progress-bar{background-color:#50a8e1;border-radius:7px}.dynamsoft-loadingMsg{position:absolute;left:0;right:0;top:30%;width:240px;height:240px;margin:auto;color:black;display:none;box-sizing:content-box}dialog[open]{display:block}dialog[closed]{display:none}.dynamsoft-loadingMsg-msg{margin:0 0 15px 25px;color:#3a3a3a;font:20px Arial,sans-serif}.dynamsoft-loadingMsg-desc{text-align:center;margin:0 0 15px 0;color:#3a3a3a;font:14px Arial,sans-serif}.ds-dwt-loaderBar-noserver-parent{background:#FFF;height:100%;}.ds-dwt-loaderBar-noserver{margin: 0 auto;padding-top: 35px;text-align: center;}.ds-dwt-loaderBar-noserver img{height: 100px}"].join("");e.type="text/css";try{e.appendChild(document.createTextNode(d))}catch(c){e.styleSheet.cssText=d}document.body.appendChild(e)});var a=true;b._funsAfterConfigLoaded=[];b._safePromptCustomMsg=function(d){if(!b.isUndefined(Dynamsoft.WebTwainEnv.ProductKey)){if(a){var c={},e=Dynamsoft.WebTwainEnv.CustomizableDisplayInfo;b.mix(c,Dynamsoft.DWT.defaultEnv.CustomizableDisplayInfo);if(e){if(e.loaderBarClassName){c.loaderBarClassName=e.loaderBarClassName}if(e.loaderBarSource){c.loaderBarSource=e.loaderBarSource}if(e.loaderBarWidth){c.loaderBarWidth=e.loaderBarWidth}if(e.loaderBarHeight){c.loaderBarHeight=e.loaderBarHeight}if(e.errorMessages){b.mix(c.errorMessages,e.errorMessages)}if(e.generalMessages){b.mix(c.generalMessages,e.generalMessages)}if(e.customProgressText){b.mix(c.customProgressText,e.customProgressText)}if(e.buttons){if(e.buttons.titles){b.mix(c.buttons.titles,e.buttons.titles)}if(e.buttons.bShowAllButtons){b.mix(c.buttons.bShowAllButtons,e.buttons.bShowAllButtons)}if(e.buttons.visibility){b.mix(c.buttons.visibility,e.buttons.visibility)}}if(e.dialogText){b.mix(c.dialogText,e.dialogText)}}Dynamsoft.WebTwainEnv.CustomizableDisplayInfo=c;a=false}if(d){d()}}else{if(d){b._funsAfterConfigLoaded.push(d)}}}})(Dynamsoft.Lib);Dynamsoft.Ready(function(b){a.Orientation={Horizontal:0,Vertical:1};a.Direction={LeftToRight:0,RightToLeft:1,TopToBottom:0,BottomToTop:1};a.CreationType={Replace:0,AppendChild:1};a.AnimationStyle={None:0,Static:1,StaticFull:2,Custom:3,CustomFull:4,Flickering1:10,Flickering2:11,Flickering3:12,LeftToRight1:20,LeftToRight2:21,RightToLeft1:22,RightToLeft2:23,TwoWay:24};function a(g,d){var h=this,e=0,f;if(b.isString(g)){f=document.getElementById(g)}else{f=g}h.isLoaded=false;h.displayType=0;h.progress=0;h.progressPosition=0;h.borderWidth={left:0,right:0,top:0,bottom:0};h.orientation=(d.orientation||a.Orientation.Horizontal);h.direction=(d.direction||a.Direction.LeftToRight);h.creationType=(d.creationType||a.CreationType.Replace);h.value=0;h.initialValue=(d.value||0);h.minValue=(d.minValue||0);h.maxValue=(d.maxValue||100);h.showLabel=(typeof d.showLabel=="undefined"?true:d.showLabel);h.labelText=(d.labelText||"");h.width=(d.width||280);h.height=(d.height||20);h.borderRadius=(d.borderRadius||10);if(h.orientation==a.Orientation.Horizontal&&h.borderRadius>h.height/2){h.borderRadius=Math.round(h.height/2)}if(h.orientation==a.Orientation.Vertical&&h.borderRadius>h.width/2){h.borderRadius=Math.round(h.width/2)}h.backColor=(d.backColor||"");h.color=(d.color||"#50a8e1");h.animationStyle=0;h.animationInterval=(d.animationInterval||100);var c=["parent","background","wrapper","left","middle","right","horizontalText","verticalText","marker"];h.extraClassName={};for(e=0;e<c.length;e++){if(!d.extraClassName){h.extraClassName[c[e]]=""}else{if(typeof d.extraClassName=="string"){h.extraClassName[c[e]]=d.extraClassName}else{h.extraClassName[c[e]]=(d.extraClassName[c[e]]||"")}}}h.onLoad=(d.onLoad||null);h.onValueChanged=(d.onValueChanged||null);h.onAnimate=(d.onAnimate||null);if(h.creationType==a.CreationType.Replace){h.parentElement=f}else{h.parentElement=document.createElement("DIV");f.appendChild(h.parentElement)}h.finishLoading()}a.prototype.finishLoading=function(){var h=this,e="",g;h.wrapperElement=null;h.backgroundElement=null;h.valueElement=null;h.leftElement=null;h.middleElement=null;h.rightElement=null;h.backgroundElement=document.createElement("DIV");h.backgroundElement.className="progressbar_background"+(h.extraClassName.background?" ":"")+h.extraClassName.background;h.backgroundElement.style.cssText=h.backgroundElement.style.cssText+a._createBorderRadiusCss(h.borderRadius);h.parentElement.appendChild(h.backgroundElement);var d=["border-radius","border-bottom-right-radius","-moz-border-radius-bottomright","-webkit-border-bottom-right-radius","-khtml-border-radius-bottomright","-khtml-border-bottom-right-radius"];var f=0,c="";for(f=0;f<d.length;f++){c=a._elementCurrentStyle(h.backgroundElement,d[f]);if(c||typeof c=="string"){break}}if(c!=""&&a._parseInt(c)!=h.borderRadius){h.borderRadius=a._parseInt(c)}if((h.orientation==a.Orientation.Horizontal)||(h.orientation==a.Orientation.Vertical)){h.displayType=0}else{h.displayType=1}h.parentElement.className=(h.parentElement.className!=""?" ":"")+"progressbar_parent dynamsoft-progressBar"+(h.extraClassName.parent?" ":"")+h.extraClassName.parent;if(h.displayType==0){g=h.wrapperElement=document.createElement("DIV");g.style.border="1px solid #A0A0A0";g.style.cssFloat="left";g.style.display="inline-block";g.style.width=h.width+"px";g.style.height=h.height+"px";g.style.left="0px";g.style.top=(-h.height)+"px";g.style.backgroundColor=h.backColor;g.style.backgroundRepeat="no-repeat";g.style.position="relative";g.style.cssText=g.style.cssText+a._createBorderRadiusCss(h.borderRadius);h.parentElement.appendChild(g);h.borderWidth={left:a._parseInt(a._elementCurrentStyle(g,"border-left-width")),right:a._parseInt(a._elementCurrentStyle(g,"border-right-width")),top:a._parseInt(a._elementCurrentStyle(g,"border-top-width")),bottom:a._parseInt(a._elementCurrentStyle(g,"border-bottom-width"))}}else{if(h.displayType==1){if(h.orientation==a.Orientation.Horizontal){if(h.borderRadius>h.width/2){h.borderRadius=h.width}}else{if(h.orientation==a.Orientation.Vertical){if(h.borderRadius>h.height/2){h.borderRadius=h.height}}}h.valueElement=document.createElement("DIV");h.valueElement.className="";h.leftElement=document.createElement("DIV");h.middleElement=document.createElement("DIV");h.rightElement=document.createElement("DIV");h.leftElement.style.border="1px solid #A0A0A0";h.leftElement.style.cssFloat="left";h.leftElement.style.display="inline-block";h.leftElement.style.backgroundColor=h.backColor;h.leftElement.style.backgroundRepeat="no-repeat";h.leftElement.style.position="relative";h.rightElement.style.border="1px solid #A0A0A0";h.rightElement.style.cssFloat="left";h.rightElement.style.display="inline-block";h.rightElement.style.backgroundColor=h.backColor;h.rightElement.style.backgroundRepeat="no-repeat";h.rightElement.style.position="relative";h.middleElement.style.border="1px solid #A0A0A0";h.middleElement.style.cssFloat="left";h.middleElement.style.display="inline-block";h.middleElement.style.overflow="hidden";h.middleElement.style.position="relative";h.valueElement.style.backgroundColor=h.backColor;h.valueElement.style.position="relative";if(h.orientation==a.Orientation.Horizontal){h.leftElement.style.width=h.borderRadius+"px";h.leftElement.style.height=h.height+"px";h.leftElement.style.top=-h.height+"px";h.leftElement.style.left="0px";h.leftElement.style.borderRight="none";h.leftElement.style.cssText=h.leftElement.style.cssText+a._createBorderRadiusCss(h.borderRadius,0,0,h.borderRadius);h.rightElement.style.width=h.borderRadius+"px";h.rightElement.style.height=h.height+"px";h.rightElement.style.top=-h.height+"px";h.rightElement.style.borderLeft="none";h.rightElement.style.cssText=h.rightElement.style.cssText+a._createBorderRadiusCss(0,h.borderRadius,h.borderRadius,0);h.middleElement.style.width=(h.width-(h.borderRadius*2))+"px";h.middleElement.style.height=h.height+"px";h.middleElement.style.top=-h.height+"px";h.middleElement.style.borderLeft="none";h.middleElement.style.borderRight="none";h.valueElement.style.width="0px";h.valueElement.style.height=h.height+"px"}else{if(h.orientation==a.Orientation.Vertical){h.leftElement.style.width=h.width+"px";h.leftElement.style.height=h.borderRadius+"px";h.leftElement.style.top=(-h.height)+"px";h.leftElement.style.left="0px";h.leftElement.style.borderBottom="none";h.leftElement.style.cssText=h.leftElement.style.cssText+a._createBorderRadiusCss(h.borderRadius,h.borderRadius,0,0);h.rightElement.style.width=h.width+"px";h.rightElement.style.height=h.borderRadius+"px";h.rightElement.style.top=(-h.height)+"px";h.rightElement.style.left="0px";h.rightElement.style.borderTop="none";h.rightElement.style.cssText=h.rightElement.style.cssText+a._createBorderRadiusCss(0,0,h.borderRadius,h.borderRadius);h.middleElement.style.width=h.width+"px";h.middleElement.style.height=h.height-h.borderRadius*2+"px";h.middleElement.style.top=(-h.height)+"px";h.middleElement.style.left="0px";h.middleElement.style.borderTop="none";h.middleElement.style.borderBottom="none";h.valueElement.style.width=h.width+"px";h.valueElement.style.height="0px"}}h.middleElement.appendChild(h.valueElement);h.parentElement.appendChild(h.leftElement);h.parentElement.appendChild(h.middleElement);h.parentElement.appendChild(h.rightElement);if(h.orientation==a.Orientation.Horizontal){h.borderWidth={left:a._parseInt(a._elementCurrentStyle(h.leftElement,"border-left-width")),right:a._parseInt(a._elementCurrentStyle(h.rightElement,"border-right-width")),top:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-top-width")),bottom:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-bottom-width"))}}else{if(h.orientation==a.Orientation.Vertical){h.borderWidth={left:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-left-width")),right:a._parseInt(a._elementCurrentStyle(h.middleElement,"border-right-width")),top:a._parseInt(a._elementCurrentStyle(h.leftElement,"border-top-width")),bottom:a._parseInt(a._elementCurrentStyle(h.rightElement,"border-bottom-width"))}}}}}h.parentElement.style.width=(h.width+h.borderWidth.left+h.borderWidth.right)+"px";h.parentElement.style.height=(h.height+h.borderWidth.top+h.borderWidth.bottom)+"px";h.backgroundElement.style.cssFloat="left";h.backgroundElement.style.display="inline-block";h.backgroundElement.style.width=(h.width+h.borderWidth.left+h.borderWidth.right)+"px";h.backgroundElement.style.height=h.height+"px";h.backgroundElement.style.backgroundColor="#FFFFFF";h.backgroundElement.style.position="relative";if(h.displayType==0){h.backgroundElement.style.width=(h.width+h.borderWidth.left+h.borderWidth.right)+"px"}h.backgroundElement.style.top=h.borderWidth.top+"px";h.markerElement=document.createElement("DIV");h.markerElement.style.display="inline-block";h.markerElement.style.zoom="1.0";h.markerElement.style.width=h.width+"px";h.markerElement.style.height=h.height+"px";h.markerElement.style.top=(-h.height*2-h.borderWidth.top)+"px";h.markerElement.style.left=h.borderWidth.left+"px";h.markerElement.style.backgroundColor=h.color;h.markerElement.style.lineHeight=(h.height)+"px";h.markerElement.style.position="relative";h.parentElement.appendChild(h.markerElement);h.isLoaded=true;h.setValue(h.initialValue);if(h.onLoad!=null){h.onLoad()}};a.prototype.setValue=function(e){var i=this;if(e!==null&&e<i.minValue){e=i.minValue}if(e!==null&&e>i.maxValue){e=i.maxValue}if(e===null){}else{i.value=e}if(i.isLoaded){var d=0,h;if(i.orientation==a.Orientation.Horizontal){d=(i.value/i.maxValue)*i.width;i.progressPosition=d;if(i.displayType==0){if(i.direction==a.Direction.LeftToRight){}else{}}else{if(i.displayType==1){if(i.direction==a.Direction.LeftToRight){if(d<=i.borderRadius){i.valueElement.style.width="0px"}else{if(d>=i.width-i.borderRadius){i.valueElement.style.width=i.middleElement.style.width}else{i.valueElement.style.width=(d-i.borderRadius)+"px"}}}else{if(d<=i.borderRadius){i.valueElement.style.width="0px"}else{if(d>=i.width-i.borderRadius){i.valueElement.style.left="0px";i.valueElement.style.width=i.middleElement.style.width}else{i.valueElement.style.left=(i.width-d-i.borderRadius)+"px";i.valueElement.style.width=(d-i.borderRadius)+"px"}}}}}if(d>0){if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.width=d+"px"}else{i.markerElement.style.width=i.width+"px"}i.markerElement.style.visibility="visible"}else{i.markerElement.style.width=i.width+"px";if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.visibility="hidden"}}if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){if(i.direction==a.Direction.LeftToRight){i.markerElement.style.left=i.borderWidth.left+"px"}else{i.markerElement.style.left=(i.width-d+i.borderWidth.left)+"px"}}else{i.markerElement.style.left=i.borderWidth.left+"px"}var l=(-i.height*2-i.height-i.borderWidth.top);var n=(-i.height*2-i.borderWidth.top);if(d==0||i.width==d){i.markerElement.style.top=n+"px";i.markerElement.style.height=i.height+"px";i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius)}else{if(d<i.borderRadius){var m=i.height-2.25*(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-d,2)));var j=n+(i.height/2)-(m/2);var c=l-2*(n-j);i.markerElement.style.top=j+"px";i.markerElement.style.height=m+"px";if(i.direction==a.Direction.LeftToRight){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,0,0,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,i.borderRadius,i.borderRadius,0)}}else{if(i.width-d<i.borderRadius){h=((i.borderRadius-(i.width-d))*2+(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-(i.width-d),2))))/3;if(i.direction==a.Direction.LeftToRight){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,h,h,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(h,i.borderRadius,i.borderRadius,h)}}else{i.markerElement.style.top=n+"px";i.markerElement.style.height=i.height+"px";if(i.direction==a.Direction.LeftToRight){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,0,0,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,i.borderRadius,i.borderRadius,0)}}}}}else{if(i.orientation==a.Orientation.Vertical){d=(i.value/i.maxValue)*i.height;i.progressPosition=d;if(i.displayType==0){if(i.direction==a.Direction.TopToBottom){}else{}}else{if(i.displayType==1){if(i.direction==a.Direction.TopToBottom){if(d<=i.borderRadius){i.valueElement.style.height="0px"}else{if(d>=i.height-i.borderRadius){i.valueElement.style.height=i.middleElement.style.height}else{i.valueElement.style.height=(d-i.borderRadius)+"px"}}}else{if(d<=i.borderRadius){i.valueElement.style.height="0px"}else{if(d>=i.height-i.borderRadius){i.valueElement.style.top="0px";i.valueElement.style.height=i.middleElement.style.height}else{i.valueElement.style.top=(i.height-d-i.borderRadius)+"px";i.valueElement.style.height=(d+i.borderRadius*2)+"px"}}}}}if(d>0){if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.height=d+"px"}else{i.markerElement.style.height=i.height+"px";i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius)}i.markerElement.style.visibility="visible"}else{i.markerElement.style.height=0+"px";if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){i.markerElement.style.visibility="hidden"}}var g=i.borderWidth.left,k=i.borderWidth.left;if(d==0||i.height==d){i.markerElement.style.left=k+"px";i.markerElement.style.width=i.width+"px";i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius)}else{if(d<i.borderRadius){var f=2.5*d;if(f>i.width){f=i.width}var o=k+(i.width/2)-(f/2);i.markerElement.style.left=o+"px";i.markerElement.style.width=f+"px";if(i.direction==a.Direction.BottomToTop){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,0,i.borderRadius,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,i.borderRadius,0,0)}}else{if(i.height-d<i.borderRadius){h=((i.borderRadius-(i.height-d))*2+(i.borderRadius-Math.sqrt(Math.pow(i.borderRadius,2)-Math.pow(i.borderRadius-(i.height-d),2))))/3;if(i.direction==a.Direction.BottomToTop){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(h,h,i.borderRadius,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,i.borderRadius,h,h)}}else{i.markerElement.style.left=k+"px";i.markerElement.style.width=i.width+"px";if(i.direction==a.Direction.BottomToTop){i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(0,0,i.borderRadius,i.borderRadius)}else{i.markerElement.style.cssText=i.markerElement.style.cssText+a._createBorderRadiusCss(i.borderRadius,i.borderRadius,0,0)}}}}if(i.animationStyle!=a.AnimationStyle.StaticFull&&i.animationStyle!=a.AnimationStyle.CustomFull){if(i.direction==a.Direction.TopToBottom){i.markerElement.style.top=(-i.height*2-i.borderWidth.top)+"px"}else{i.markerElement.style.top=(-i.height-d-i.borderWidth.top)+"px"}}else{i.markerElement.style.top=(-i.height*2-i.borderWidth.top)+"px"}}}i.progress=(i.value/i.maxValue)}if(i.onValueChanged!=null){i.onValueChanged()}};a._elementCurrentStyle=function(f,e){if(f.currentStyle){var d=0,c="",g=false;for(d=0;d<e.length;d++){if(e[d].toString()!="-"){c+=(g?e[d].toString().toUpperCase():e[d].toString());g=false}else{g=true}}e=c;return f.currentStyle[e]}else{return getComputedStyle(f,null).getPropertyValue(e)}};a._parseInt=function(d){var c=parseInt(d);if(isNaN(c)){c=0}return c};a._createBorderRadiusCss=function(c,e,d,f){if(c!=null&&e==null&&d==null&&f==null){return"; -moz-border-radius: "+c+"px; -ms-border-radius: "+c+"px; -o-border-radius: "+c+"px; -webkit-border-radius: "+c+"px; -khtml-border-radius: "+c+"px; border-radius: "+c+"px;"}else{c=(c||0);e=(e||0);d=(d||0);f=(f||0);return"; -moz-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -ms-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -o-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -webkit-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; -khtml-border-radius: "+c+"px "+e+"px "+d+"px "+f+"px; border-radius: "+c+"px "+e+"px "+d+"px "+f+"px;"}};b.ProgressBar=a});(function(c){var d=[c,Dynamsoft],b=0;for(;b<2;b++){var a=d[b];a.EnumDWT_PixelType={TWPT_BW:0,TWPT_GRAY:1,TWPT_RGB:2,TWPT_PALLETE:3,TWPT_CMY:4,TWPT_CMYK:5,TWPT_YUV:6,TWPT_YUVK:7,TWPT_CIEXYZ:8,TWPT_LAB:9,TWPT_SRGB:10,TWPT_SCRGB:11,TWPT_INFRARED:16};a.EnumDWT_BorderStyle={TWBS_NONE:0,TWBS_SINGLEFLAT:1,TWBS_SINGLE3D:2};a.EnumDWT_MessageType={TWQC_GET:1,TWQC_SET:2,TWQC_GETDEFAULT:4,TWQC_GETCURRENT:8,TWQC_RESET:16};a.EnumDWT_Cap={CAP_NONE:0,CAP_XFERCOUNT:1,ICAP_COMPRESSION:256,ICAP_PIXELTYPE:257,ICAP_UNITS:258,ICAP_XFERMECH:259,CAP_AUTHOR:4096,CAP_CAPTION:4097,CAP_FEEDERENABLED:4098,CAP_FEEDERLOADED:4099,CAP_TIMEDATE:4100,CAP_SUPPORTEDCAPS:4101,CAP_EXTENDEDCAPS:4102,CAP_AUTOFEED:4103,CAP_CLEARPAGE:4104,CAP_FEEDPAGE:4105,CAP_REWINDPAGE:4106,CAP_INDICATORS:4107,CAP_SUPPORTEDCAPSEXT:4108,CAP_PAPERDETECTABLE:4109,CAP_UICONTROLLABLE:4110,CAP_DEVICEONLINE:4111,CAP_AUTOSCAN:4112,CAP_THUMBNAILSENABLED:4113,CAP_DUPLEX:4114,CAP_DUPLEXENABLED:4115,CAP_ENABLEDSUIONLY:4116,CAP_CUSTOMDSDATA:4117,CAP_ENDORSER:4118,CAP_ALARMS:4120,CAP_ALARMVOLUME:4121,CAP_AUTOMATICCAPTURE:4122,CAP_TIMEBEFOREFIRSTCAPTURE:4123,CAP_TIMEBETWEENCAPTURES:4124,CAP_CLEARBUFFERS:4125,CAP_MAXBATCHBUFFERS:4126,CAP_DEVICETIMEDATE:4127,CAP_POWERSUPPLY:4128,CAP_CAMERAPREVIEWUI:4129,CAP_SERIALNUMBER:4132,CAP_PRINTER:4134,CAP_PRINTERENABLED:4135,CAP_PRINTERINDEX:4136,CAP_PRINTERMODE:4137,CAP_PRINTERSTRING:4138,CAP_PRINTERSUFFIX:4139,CAP_LANGUAGE:4140,CAP_FEEDERALIGNMENT:4141,CAP_FEEDERORDER:4142,CAP_REACQUIREALLOWED:4144,CAP_BATTERYMINUTES:4146,CAP_BATTERYPERCENTAGE:4147,CAP_CAMERASIDE:4148,CAP_SEGMENTED:4149,CAP_CAMERAENABLED:4150,CAP_CAMERAORDER:4151,CAP_MICRENABLED:4152,CAP_FEEDERPREP:4153,CAP_FEEDERPOCKET:4154,CAP_AUTOMATICSENSEMEDIUM:4155,CAP_CUSTOMINTERFACEGUID:4156,ICAP_AUTOBRIGHT:4352,ICAP_BRIGHTNESS:4353,ICAP_CONTRAST:4355,ICAP_CUSTHALFTONE:4356,ICAP_EXPOSURETIME:4357,ICAP_FILTER:4358,ICAP_FLASHUSED:4359,ICAP_GAMMA:4360,ICAP_HALFTONES:4361,ICAP_HIGHLIGHT:4362,ICAP_IMAGEFILEFORMAT:4364,ICAP_LAMPSTATE:4365,ICAP_LIGHTSOURCE:4366,ICAP_ORIENTATION:4368,ICAP_PHYSICALWIDTH:4369,ICAP_PHYSICALHEIGHT:4370,ICAP_SHADOW:4371,ICAP_FRAMES:4372,ICAP_XNATIVERESOLUTION:4374,ICAP_YNATIVERESOLUTION:4375,ICAP_XRESOLUTION:4376,ICAP_YRESOLUTION:4377,ICAP_MAXFRAMES:4378,ICAP_TILES:4379,ICAP_BITORDER:4380,ICAP_CCITTKFACTOR:4381,ICAP_LIGHTPATH:4382,ICAP_PIXELFLAVOR:4383,ICAP_PLANARCHUNKY:4384,ICAP_ROTATION:4385,ICAP_SUPPORTEDSIZES:4386,ICAP_THRESHOLD:4387,ICAP_XSCALING:4388,ICAP_YSCALING:4389,ICAP_BITORDERCODES:4390,ICAP_PIXELFLAVORCODES:4391,ICAP_JPEGPIXELTYPE:4392,ICAP_TIMEFILL:4394,ICAP_BITDEPTH:4395,ICAP_BITDEPTHREDUCTION:4396,ICAP_UNDEFINEDIMAGESIZE:4397,ICAP_EXTIMAGEINFO:4399,ICAP_MINIMUMHEIGHT:4400,ICAP_MINIMUMWIDTH:4401,ICAP_AUTODISCARDBLANKPAGES:4404,ICAP_FLIPROTATION:4406,ICAP_BARCODEDETECTIONENABLED:4407,ICAP_SUPPORTEDBARCODETYPES:4408,ICAP_BARCODEMAXSEARCHPRIORITIES:4409,ICAP_BARCODESEARCHPRIORITIES:4410,ICAP_BARCODESEARCHMODE:4411,ICAP_BARCODEMAXRETRIES:4412,ICAP_BARCODETIMEOUT:4413,ICAP_ZOOMFACTOR:4414,ICAP_PATCHCODEDETECTIONENABLED:4415,ICAP_SUPPORTEDPATCHCODETYPES:4416,ICAP_PATCHCODEMAXSEARCHPRIORITIES:4417,ICAP_PATCHCODESEARCHPRIORITIES:4418,ICAP_PATCHCODESEARCHMODE:4419,ICAP_PATCHCODEMAXRETRIES:4420,ICAP_PATCHCODETIMEOUT:4421,ICAP_FLASHUSED2:4422,ICAP_IMAGEFILTER:4423,ICAP_NOISEFILTER:4424,ICAP_OVERSCAN:4425,ICAP_AUTOMATICBORDERDETECTION:4432,ICAP_AUTOMATICDESKEW:4433,ICAP_AUTOMATICROTATE:4434,ICAP_JPEGQUALITY:4435,ICAP_FEEDERTYPE:4436,ICAP_ICCPROFILE:4437,ICAP_AUTOSIZE:4438,ICAP_AUTOMATICCROPUSESFRAME:4439,ICAP_AUTOMATICLENGTHDETECTION:4440,ICAP_AUTOMATICCOLORENABLED:4441,ICAP_AUTOMATICCOLORNONCOLORPIXELTYPE:4442,ICAP_COLORMANAGEMENTENABLED:4443,ICAP_IMAGEMERGE:4444,ICAP_IMAGEMERGEHEIGHTTHRESHOLD:4445,ICAP_SUPPORTEDEXTIMAGEINFO:4446};a.EnumDWT_CapType={TWON_NONE:0,TWON_ARRAY:3,TWON_ENUMERATION:4,TWON_ONEVALUE:5,TWON_RANGE:6};a.EnumDWT_TransferMode={TWSX_NATIVE:0,TWSX_FILE:1,TWSX_MEMORY:2};a.EnumDWT_FileFormat={TWFF_TIFF:0,TWFF_PICT:1,TWFF_BMP:2,TWFF_XBM:3,TWFF_JFIF:4,TWFF_FPX:5,TWFF_TIFFMULTI:6,TWFF_PNG:7,TWFF_SPIFF:8,TWFF_EXIF:9,TWFF_PDF:10,TWFF_JP2:11,TWFF_JPN:12,TWFF_JPX:13,TWFF_DEJAVU:14,TWFF_PDFA:15,TWFF_PDFA2:16};a.EnumDWT_TIFFCompressionType={TIFF_AUTO:0,TIFF_NONE:1,TIFF_RLE:2,TIFF_FAX3:3,TIFF_T4:3,TIFF_FAX4:4,TIFF_T6:4,TIFF_LZW:5,TIFF_JPEG:7,TIFF_PACKBITS:32773};a.EnumDWT_InterpolationMethod={IM_NEARESTNEIGHBOUR:1,IM_BILINEAR:2,IM_BICUBIC:3,IM_BESTQUALITY:5};a.EnumDWT_ImageType={IT_BMP:0,IT_JPG:1,IT_TIF:2,IT_PNG:3,IT_PDF:4,IT_ALL:5,IT_MULTIPAGE_PDF:7,IT_MULTIPAGE_TIF:8,IT_J2K:14};a.EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX4:2,PDF_LZW:3,PDF_JPEG:5,PDF_JP2000:6,PDF_JBIG2:7};a.EnumDWT_ShowMode={SW_ACTIVE:0,SW_MAX:1,SW_MIN:2,SW_CLOSE:3,SW_IFLIVE:4};a.EnumDWT_CapValueType={TWTY_INT8:0,TWTY_INT16:1,TWTY_INT32:2,TWTY_UINT8:3,TWTY_UINT16:4,TWTY_int:5,TWTY_BOOL:6,TWTY_FIX32:7,TWTY_FRAME:8,TWTY_STR32:9,TWTY_STR64:10,TWTY_STR128:11,TWTY_STR255:12};a.EnumDWT_UnitType={TWUN_INCHES:0,TWUN_CENTIMETERS:1,TWUN_PICAS:2,TWUN_POINTS:3,TWUN_TWIPS:4,TWUN_PIXELS:5,TWUN_MILLIMETERS:6};a.EnumDWT_DUPLEX={TWDX_NONE:0,TWDX_1PASSDUPLEX:1,TWDX_2PASSDUPLEX:2};a.EnumDWT_CapLanguage={TWLG_DAN:0,TWLG_DUT:1,TWLG_ENG:2,TWLG_FCF:3,TWLG_FIN:4,TWLG_FRN:5,TWLG_GER:6,TWLG_ICE:7,TWLG_ITN:8,TWLG_NOR:9,TWLG_POR:10,TWLG_SPA:11,TWLG_SWE:12,TWLG_USA:13,TWLG_USERLOCALE:-1,TWLG_AFRIKAANS:14,TWLG_ALBANIA:15,TWLG_ARABIC:16,TWLG_ARABIC_ALGERIA:17,TWLG_ARABIC_BAHRAIN:18,TWLG_ARABIC_EGYPT:19,TWLG_ARABIC_IRAQ:20,TWLG_ARABIC_JORDAN:21,TWLG_ARABIC_KUWAIT:22,TWLG_ARABIC_LEBANON:23,TWLG_ARABIC_LIBYA:24,TWLG_ARABIC_MOROCCO:25,TWLG_ARABIC_OMAN:26,TWLG_ARABIC_QATAR:27,TWLG_ARABIC_SAUDIARABIA:28,TWLG_ARABIC_SYRIA:29,TWLG_ARABIC_TUNISIA:30,TWLG_ARABIC_UAE:31,TWLG_ARABIC_YEMEN:32,TWLG_BASQUE:33,TWLG_BYELORUSSIAN:34,TWLG_BULGARIAN:35,TWLG_CATALAN:36,TWLG_CHINESE:37,TWLG_CHINESE_HONGKONG:38,TWLG_CHINESE_PRC:39,TWLG_CHINESE_SINGAPORE:40,TWLG_CHINESE_SIMPLIFIED:41,TWLG_CHINESE_TAIWAN:42,TWLG_CHINESE_TRADITIONAL:43,TWLG_CROATIA:44,TWLG_CZECH:45,TWLG_DANISH:0,TWLG_DUTCH:1,TWLG_DUTCH_BELGIAN:46,TWLG_ENGLISH:2,TWLG_ENGLISH_AUSTRALIAN:47,TWLG_ENGLISH_CANADIAN:48,TWLG_ENGLISH_IRELAND:49,TWLG_ENGLISH_NEWZEALAND:50,TWLG_ENGLISH_SOUTHAFRICA:51,TWLG_ENGLISH_UK:52,TWLG_ENGLISH_USA:13,TWLG_ESTONIAN:53,TWLG_FAEROESE:54,TWLG_FARSI:55,TWLG_FINNISH:4,TWLG_FRENCH:5,TWLG_FRENCH_BELGIAN:56,TWLG_FRENCH_CANADIAN:3,TWLG_FRENCH_LUXEMBOURG:57,TWLG_FRENCH_SWISS:58,TWLG_GERMAN:6,TWLG_GERMAN_AUSTRIAN:59,TWLG_GERMAN_LUXEMBOURG:60,TWLG_GERMAN_LIECHTENSTEIN:61,TWLG_GERMAN_SWISS:62,TWLG_GREEK:63,TWLG_HEBREW:64,TWLG_HUNGARIAN:65,TWLG_ICELANDIC:7,TWLG_INDONESIAN:66,TWLG_ITALIAN:8,TWLG_ITALIAN_SWISS:67,TWLG_JAPANESE:68,TWLG_KOREAN:69,TWLG_KOREAN_JOHAB:70,TWLG_LATVIAN:71,TWLG_LITHUANIAN:72,TWLG_NORWEGIAN:9,TWLG_NORWEGIAN_BOKMAL:73,TWLG_NORWEGIAN_NYNORSK:74,TWLG_POLISH:75,TWLG_PORTUGUESE:10,TWLG_PORTUGUESE_BRAZIL:76,TWLG_ROMANIAN:77,TWLG_RUSSIAN:78,TWLG_SERBIAN_LATIN:79,TWLG_SLOVAK:80,TWLG_SLOVENIAN:81,TWLG_SPANISH:11,TWLG_SPANISH_MEXICAN:82,TWLG_SPANISH_MODERN:83,TWLG_SWEDISH:12,TWLG_THAI:84,TWLG_TURKISH:85,TWLG_UKRANIAN:86,TWLG_ASSAMESE:87,TWLG_BENGALI:88,TWLG_BIHARI:89,TWLG_BODO:90,TWLG_DOGRI:91,TWLG_GUJARATI:92,TWLG_HARYANVI:93,TWLG_HINDI:94,TWLG_KANNADA:95,TWLG_KASHMIRI:96,TWLG_MALAYALAM:97,TWLG_MARATHI:98,TWLG_MARWARI:99,TWLG_MEGHALAYAN:100,TWLG_MIZO:101,TWLG_NAGA:102,TWLG_ORISSI:103,TWLG_PUNJABI:104,TWLG_PUSHTU:105,TWLG_SERBIAN_CYRILLIC:106,TWLG_SIKKIMI:107,TWLG_SWEDISH_FINLAND:108,TWLG_TAMIL:109,TWLG_TELUGU:110,TWLG_TRIPURI:111,TWLG_URDU:112,TWLG_VIETNAMESE:113};a.EnumDWT_CapSupportedSizes={TWSS_NONE:0,TWSS_A4LETTER:1,TWSS_B5LETTER:2,TWSS_USLETTER:3,TWSS_USLEGAL:4,TWSS_A5:5,TWSS_B4:6,TWSS_B6:7,TWSS_USLEDGER:9,TWSS_USEXECUTIVE:10,TWSS_A3:11,TWSS_B3:12,TWSS_A6:13,TWSS_C4:14,TWSS_C5:15,TWSS_C6:16,TWSS_4A0:17,TWSS_2A0:18,TWSS_A0:19,TWSS_A1:20,TWSS_A2:21,TWSS_A4:1,TWSS_A7:22,TWSS_A8:23,TWSS_A9:24,TWSS_A10:25,TWSS_ISOB0:26,TWSS_ISOB1:27,TWSS_ISOB2:28,TWSS_ISOB3:12,TWSS_ISOB4:6,TWSS_ISOB5:29,TWSS_ISOB6:7,TWSS_ISOB7:30,TWSS_ISOB8:31,TWSS_ISOB9:32,TWSS_ISOB10:33,TWSS_JISB0:34,TWSS_JISB1:35,TWSS_JISB2:36,TWSS_JISB3:37,TWSS_JISB4:38,TWSS_JISB5:2,TWSS_JISB6:39,TWSS_JISB7:40,TWSS_JISB8:41,TWSS_JISB9:42,TWSS_JISB10:43,TWSS_C0:44,TWSS_C1:45,TWSS_C2:46,TWSS_C3:47,TWSS_C7:48,TWSS_C8:49,TWSS_C9:50,TWSS_C10:51,TWSS_USSTATEMENT:52,TWSS_BUSINESSCARD:53,TWSS_MAXSIZE:54};a.EnumDWT_CapFeederAlignment={TWFA_NONE:0,TWFA_LEFT:1,TWFA_CENTER:2,TWFA_RIGHT:3};a.EnumDWT_CapFeederOrder={TWFO_FIRSTPAGEFIRST:0,TWFO_LASTPAGEFIRST:1};a.EnumDWT_CapPrinter={TWPR_IMPRINTERTOPBEFORE:0,TWPR_IMPRINTERTOPAFTER:1,TWPR_IMPRINTERBOTTOMBEFORE:2,TWPR_IMPRINTERBOTTOMAFTER:3,TWPR_ENDORSERTOPBEFORE:4,TWPR_ENDORSERTOPAFTER:5,TWPR_ENDORSERBOTTOMBEFORE:6,TWPR_ENDORSERBOTTOMAFTER:7};a.EnumDWT_CapPrinterMode={TWPM_SINGLESTRING:0,TWPM_MULTISTRING:1,TWPM_COMPOUNDSTRING:2};a.EnumDWT_CapBitdepthReduction={TWBR_THRESHOLD:0,TWBR_HALFTONE:1,TWBR_CUSTHALFTONE:2,TWBR_DIFFUSION:3};a.EnumDWT_CapBitOrder={TWBO_LSBFIRST:0,TWBO_MSBFIRST:1};a.EnumDWT_CapFilterType={TWFT_RED:0,TWFT_GREEN:1,TWFT_BLUE:2,TWFT_NONE:3,TWFT_WHITE:4,TWFT_CYAN:5,TWFT_MAGENTA:6,TWFT_YELLOW:7,TWFT_BLACK:8};a.EnumDWT_CapFlash={TWFL_NONE:0,TWFL_OFF:1,TWFL_ON:2,TWFL_AUTO:3,TWFL_REDEYE:4};a.EnumDWT_CapFlipRotation={TWFR_BOOK:0,TWFR_FANFOLD:1};a.EnumDWT_CapImageFilter={TWIF_NONE:0,TWIF_AUTO:1,TWIF_LOWPASS:2,TWIF_BANDPASS:3,TWIF_HIGHPASS:4,TWIF_TEXT:3,TWIF_FINELINE:4};a.EnumDWT_CapLightPath={TWLP_REFLECTIVE:0,TWLP_TRANSMISSIVE:1};a.EnumDWT_CapLightSource={TWLS_RED:0,TWLS_GREEN:1,TWLS_BLUE:2,TWLS_NONE:3,TWLS_WHITE:4,TWLS_UV:5,TWLS_IR:6};a.EnumDWT_MagType={TWMD_MICR:0,TWMD_RAW:1,TWMD_INVALID:2};a.EnumDWT_CapNoiseFilter={TWNF_NONE:0,TWNF_AUTO:1,TWNF_LONEPIXEL:2,TWNF_MAJORITYRULE:3};a.EnumDWT_CapORientation={TWOR_ROT0:0,TWOR_ROT90:1,TWOR_ROT180:2,TWOR_ROT270:3,TWOR_PORTRAIT:0,TWOR_LANDSCAPE:3,TWOR_AUTO:4,TWOR_AUTOTEXT:5,TWOR_AUTOPICTURE:6};a.EnumDWT_CapOverscan={TWOV_NONE:0,TWOV_AUTO:1,TWOV_TOPBOTTOM:2,TWOV_LEFTRIGHT:3,TWOV_ALL:4};a.EnumDWT_CapPixelFlavor={TWPF_CHOCOLATE:0,TWPF_VANILLA:1};a.EnumDWT_CapPlanarChunky={TWPC_CHUNKY:0,TWPC_PLANAR:1};a.EnumDWT_DataSourceStatus={TWDSS_CLOSED:0,TWDSS_OPENED:1,TWDSS_ENABLED:2,TWDSS_ACQUIRING:3};a.EnumDWT_FitWindowType={enumFitWindow:0,enumFitWindowHeight:1,enumFitWindowWidth:2};a.EnumDWT_PlatformType={enumUnknown:-1,enumWindow:0,enumMac:1,enumLinux:2};a.EnumDWT_UploadDataFormat={Binary:0,Base64:1};a.EnumDWT_MouseShape={Default:0,Hand:1,Crosshair:2,Zoom:3,NWResize:4,EResize:5,NResize:6,Resize:7,Move:8};a.EnumDWT_Language={English:0,French:1,Arabic:2,Spanish:3,Portuguese:4,German:5,Italian:6,Russian:7,Chinese:8};a.EnumDWT_InitMsg={Info:1,Error:2,NotInstalledError:3,DownloadError:4,DownloadNotRestartError:5};a.EnumDWT_Driver={TWAIN:0,ICA:3,SANE:3,TWAIN_AND_ICA:4,TWAIN_AND_TWAIN64:4,TWAIN64:5};a.EnumDWT_CompressionType={TWCP_NONE:0,TWCP_PACKBITS:1,TWCP_GROUP31D:2,TWCP_GROUP31DEOL:3,TWCP_GROUP32D:4,TWCP_GROUP4:5,TWCP_JPEG:6,TWCP_LZW:7,TWCP_JBIG:8,TWCP_PNG:9,TWCP_RLE4:10,TWCP_RLE8:11,TWCP_BITFIELDS:12,TWCP_ZIP:13,TWCP_JPEG2000:14}}})(window);var EnumDWT_Error={ModuleNotExists:-2371};(function(){function a(b){if(Dynamsoft.Lib.isString(b)){return b}var c;if("errorMessage" in b){c=b.errorMessage}if("message" in b){c=b.message}if(!Dynamsoft.Lib.isString(c)){c=""}if("errorCode" in b&&c.indexOf("(")==-1){c+="("+b.errorCode+")"}if("code" in b&&c.indexOf("(")==-1){c+="("+b.code+")"}return c}Dynamsoft.Lib.Errors={OutOfRange:function(b){b._errorCode=-1010;b._errorString="Data parameter out of supported range."},InvalidIndex:function(b){b._errorCode=-1033;b._errorString="Invalid index."},InvalidValue:function(b){b._errorCode=-1034;b._errorString="Invalid value."},NoImage:function(b){b._errorCode=-1035;b._errorString="There is no image."},UnrecognizedExt:function(b){b._errorCode=-1110;b._errorString="Unrecognized file extension."},SourceHasNothingToCapture:function(b){b._errorCode=-1029;b._errorString="Source has nothing to capture."},Server_Restarted:function(b){b._errorCode=-2208;b._errorString="The connection with the local Dynamsoft Service encountered a problem and has been reset."},HTML5NotSupport:function(b){b._errorCode=-2209;b._errorString="The HTML5 edition does not support this method or property."},CannotCallUIMethodWhenNotBindDefaultViewer:function(b){b._errorCode=-2210;b._errorString="You cannot call this method on this WebTwain instance because it does not use the default viewer."},HttpServerCannotEmpty:function(b){b._errorCode=-2300;b._errorString="Http upload error: the HTTP Server name/ip cannot be empty."},NetworkError:function(b){b._errorCode=-2301;b._errorString="Network error."},InvalidResultFormat:function(b){b._errorCode=-2302;b._errorString="The result format is invalid."},UploadError:function(e,d,c,b){if(d){e._errorCode=-2303;e._errorString="Upload cancelled."}else{e._errorCode=-2003;if(b&&b>0){e._errorString="HTTP process error: "+b+"."}else{e._errorString="HTTP process error."}if(c){e._errorString+=" "+c}}},HttpDownloadUrlError:function(b){b._errorCode=-2304;b._errorString="Http download error: the url is invalid."},HttpDownloadError:function(e,d,c,b){if(d){e._errorCode=-2305;e._errorString="User cancelled the operation."}else{e._errorCode=-2003;if(b&&b>0){e._errorString="HTTP process error: "+b+"."}else{e._errorString="HTTP process error."}if(c){e._errorString+=" "+c}}},UploadFileCannotEmpty:function(b){b._errorCode=-2306;b._errorString="Upload Error: the upload file cannot be empty."},InvalidWidthOrHeight:function(b){b._errorCode=-2307;b._errorString="The width or height you entered is invalid."},Server_Invalid:function(b){if(b._errorCode==0){b._errorCode=-2308;b._errorString="The local Dynamsoft Service has been stopped."}},InvalidLocalFilename:function(c,b){c._errorCode=-2309;c._errorString="The LocalFile is empty in the name "+b+" Function."},BarCode_InvalidIndex:function(c,b){c._errorCode=-2310;c._errorString="The index is out of range."},BarCode_InvalidRemoteFilename:function(b){b._errorCode=-2311;b._errorString="The RemoteFile field is empty in the Barcode Download Function."},ImageFileLengthCannotZero:function(b){b._errorCode=-2312;b._errorString="The file length is empty."},UploadExceededMaxSize:function(b){b._errorCode=-2313;b._errorString="The size of the images you are about to upload has exceeded the limit."},ParameterCannotEmpty:function(b){b._errorCode=-2314;b._errorString="The parameter cannot be empty."},Webcam_InvalidIndex:function(c,b){c._errorCode=-2315;c._errorString="The index is out of range."},Webcam_InvalidRemoteFilename:function(b){b._errorCode=-2316;b._errorString="The RemoteFile field is empty in the Webcam Download Function."},Pdf_InvalidRemoteFilename:function(b){b._errorCode=-2317;b._errorString="The RemoteFile field is empty in the Pdf Download Function."},InvalidDestination:function(b){b._errorCode=-2318;b._errorString="Invalid destination file."},InvalidSourceFile:function(b){b._errorCode=-2319;b._errorString="Invalid source file."},InvalidFile:function(b){b._errorCode=-2320;b._errorString="Invalid file."},hasLicenseError:function(b){return(b._errorCode>=-2348&&b._errorCode<=-2325)},OCR_InvalidIndex:function(c,b){c._errorCode=-2321;c._errorString="The index is out of range."},OCR_InvalidLeftOrTopOrRightOrBottom:function(b){b._errorCode=-2322;b._errorString="The left or top or right or bottom you entered is invalid."},OCR_InvalidOutputFormat:function(b){b._errorCode=-2323;b._errorString="The OCR output format is not supported."},OCR_InvalidPageSetMode:function(b){b._errorCode=-2324;b._errorString="The OCR page set mode is not supported."},LicenseEmptyOrInvalid:function(b){b._errorCode=-2325;b._errorString="The current product key is empty or invalid."},LicenseExpired:function(c,b){c._errorCode=-2326;var d="";if(b&&b!=""){if(b.indexOf("on")==-1){d=" on "+b}}c._errorString="The current product key has expired"+d+", please contact the site administrator."},LicenseNoChrome:function(b){b._errorCode=-2327;b._errorString="The current product key does not support Chrome, please contact the site administrator."},LicenseNoFirefox:function(b){b._errorCode=-2328;b._errorString="The current product key does not support Firefox, please contact the site administrator."},LicenseNoIE:function(b){b._errorCode=-2329;b._errorString="The current product key does not support IE, please contact the site administrator."},LicenseNoEdge:function(b){b._errorCode=-2330;b._errorString="The current product key does not support Edge, please contact the site administrator."},LicenseNoSafari:function(b){b._errorCode=-2392;b._errorString="The current product key does not support Safari, please contact the site administrator."},LicenseNoCore:function(b){b._errorCode=-2333;b._errorString="The current product key is missing the core license, please contact the site administrator."},LicenseNo1D:function(b){b._errorCode=-2334;b._errorString="The current product key does not include a license for reading 1D barcode, please contact the site administrator."},LicenseNo2DQR:function(b){b._errorCode=-2335;b._errorString="The current product key does not include a license for reading QRcode barcode, please contact the site administrator."},LicenseNo2DPDF417:function(b){b._errorCode=-2336;b._errorString="The current product key does not include a license for reading PDF417 barcode, please contact the site administrator."},LicenseNo2DDataMatrix:function(b){b._errorCode=-2337;b._errorString="The current product key does not include a license for reading DataMatrix barcode, please contact the site administrator."},LicenseNoWebcam:function(b){b._errorCode=-2338;b._errorString="The current product key does not support Webcam, please contact the site administrator."},LicenseNoPDF:function(b){b._errorCode=-2339;b._errorString="The current product key does not support pdf rasterizer, please contact the site administrator."},LicenseNoOCR:function(b){b._errorCode=-2340;b._errorString="The current product key does not support OCR, please contact the site administrator."},LicenseNoOCRPro:function(b){b._errorCode=-2341;b._errorString="The current product key does not support OCR pro, please contact the site administrator."},LicenseBadDomain:function(b){b._errorCode=-2342;b._errorString="The domain of your current site does not match the domain bound in the current product key, please contact the site administrator."},LicenseNotSupportBorwser:function(b){b._errorCode=-2343;b._errorString="The current product key does not support your browser, please contact the site administrator."},LicenseNotSupportWindows:function(b){b._errorCode=-2344;b._errorString="The current product key does not support Windows OS, please contact the site administrator."},LicenseNotSupportMAC:function(b){b._errorCode=-2345;b._errorString="The current product key does not support MAC OS, please contact the site administrator."},LicenseNotSupportLinux:function(b){b._errorCode=-2346;b._errorString="The current product key does not support Linux OS, please contact the site administrator."},LicenseNotSupportOS:function(b){b._errorCode=-2347;b._errorString="The current product key does not support your OS, please contact the site administrator."},LicenseLower:function(b){b._errorCode=-2348;b._errorString="The current product key is invalid because it's generated with the licenses of a different major version."},BarcodeLicenseEmpty:function(b){b._errorCode=-2349;b._errorString="The current product key does not include a license for reading barcode, please contact the site administrator."},IndicesCannotEmpty:function(b){b._errorCode=-2350;b._errorString="The indices cannot be empty."},UploadIndexMoreThanOne:function(b){b._errorCode=-2351;b._errorString="You cannot upload more than one image when the format is BMP, JPG or PNG"},IndicesOutOfRange:function(b){b._errorCode=-2352;b._errorString="The indices are out of range."},HttpHeaderNotAllowed:function(b){b._errorCode=-2353;b._errorString="The header name being used is a protected keyword and is not allowed."},HttpHeaderIsEmpty:function(b){b._errorCode=-2354;b._errorString="The header name cannot be empty."},HttpHeaderIsNull:function(b){b._errorCode=-2355;b._errorString="The header name cannot be null."},HttpHeaderIsUndefined:function(b){b._errorCode=-2356;b._errorString="The header name cannot be undefined."},HttpHeaderIsInvalid:function(b){b._errorCode=-2357;b._errorString="The header name you entered is invalid."},IndicesNotArray:function(b){b._errorCode=-2358;b._errorString="The type of the parameter indices must be an Array."},IndexOutOfRange:function(b){b._errorCode=-2359;b._errorString="The index is out of range."},IndexNullOrUndefined:function(b){b._errorCode=-2360;b._errorString="The index is null or undefined."},ConvertBase64IndexMoreThanOne:function(b){b._errorCode=-2361;b._errorString="You cannot convert more than one image to base64 string when the format is BMP, JPG or PNG."},InvalidImageType:function(b){b._errorCode=-2362;b._errorString="The image type is not supported."},InvalidDataFormat:function(b){b._errorCode=-2363;b._errorString="The data format is not supported."},InvalidUploadInSegments:function(b){b._errorCode=-2364;b._errorString="Please use a Boolean value for the parameter bUploadInSegments."},InvalidUrl:function(b){b._errorCode=-2365;b._errorString="The url is invalid."},ConvertBase64Failed:function(b){b._errorCode=-2366;b._errorString="Converting images to a base64 string failed."},InvalidSegmentUploadThreshold:function(b){b._errorCode=-2367;b._errorString="Invalid value for the parameter segmentUploadThreshold."},InvalidModuleSize:function(b){b._errorCode=-2368;b._errorString="Invalid value for the parameter moduleSize."},LicenseNotSupportWasm:function(b){b._errorCode=-2369;b._errorString="The current product key does not support Wasm, please contact the site administrator."},LicenseNotSupportPdfRWasm:function(b){b._errorCode=-2370;b._errorString="The current product key does not support Pdf Rasterizer Wasm, please contact the site administrator."},MustUpgradeService:function(b){b._errorCode=-2207;b._errorString="The Dynamsoft Service installed on your computer is outdated and no longer works with the JavaScript code on the website."},WebTwainModuleDownloadFailure:function(b){b._errorCode=-2369;b._errorString="The module for Dynamic Web TWAIN has failed to download."},LicenseIsFuture:function(c,b){c._errorCode=-2370;c._errorString="The current product key is invalid, please contact the site administrator."},WebTwainModuleNotExist:function(b){b._errorCode=EnumDWT_Error.ModuleNotExists;b._errorString="Dynamic Web TWAIN scanner module is not installed and it is also missing on the server, please contact the site administrator."},ConvertBinaryIndexMoreThanOne:function(b){b._errorCode=-2372;b._errorString="You cannot convert more than one image to binary when the format is BMP, JPG or PNG."},Overlay_InvalidLeftOrTopOrRightOrBottom:function(b){b._errorCode=-2375;b._errorString="The left or top or right or bottom you entered is invalid."},GenerateURL_InvalidRetFromServer:function(b){b._errorCode=-2376;b._errorString="The generate url failed."},ImageCaptureDriverTypeError:function(b){b._errorCode=-2377;b._errorString="Failed to set Image Capture Driver Type."},InvalidTiffTagError:function(b){b._errorCode=-2378;b._errorString="Invalid value for the tiff tag code."},OCR_InvalidRemoteFilename:function(b){b._errorCode=-2379;b._errorString="The RemoteFile field is empty in the OCR Download Function."},Uploader_ModuleError:function(b){b._errorCode=-2380;b._errorString="Please make sure the Uploader Module has been installed."},ScanUploader_InvalidScanSetup:function(b){b._errorCode=-2381;b._errorString="scanSetup is invalid."},ScanUploader_InvalidTransferMode:function(b){b._errorCode=-2382;b._errorString="Scanner setup error: Invalid Transfer Mode."},ScanUploader_InvalidFileXfer:function(b){b._errorCode=-2383;b._errorString="Scanner setup error: fileXfer is invalid."},ScanUploader_InvalidFileXferFilename:function(b){b._errorCode=-2384;b._errorString="Scanner setup error: Invalid fileName in fileXfer."},ScanUploader_InvalidFileXferFileFormat:function(b){b._errorCode=-2385;b._errorString="Scanner setup error: Invalid fileFormat in fileXfer."},ScanUploader_InvalidHttpParams:function(b){b._errorCode=-2386;b._errorString="Output setup error: Invalid httpParams in outputSetup."},ScanUploader_InvalidHttpType:function(b){b._errorCode=-2387;b._errorString="Output setup error: Invalid type in outputSetup."},ScanUploader_InvalidHttpUrl:function(b){b._errorCode=-2388;b._errorString="Output setup error: Invalid url in outputSetup.httpParams."},ScanUploader_InvalidHttpFilename:function(b){b._errorCode=-2389;b._errorString="Output setup error: Invalid fileName in outputSetup.httpParams."},ScanUploader_InvalidOutputFormat:function(b){b._errorCode=-2390;b._errorString="Output setup error: Invalid format in outputSetup."},InvalidImageID:function(b){b._errorCode=-1034;b._errorString="Invalid image ID."},InvalidEventName:function(b){b._errorCode=-2391;b._errorString="Invalid event name."},ConvertBlobIsEmpty:function(b){b._errorCode=-2393;b._errorString="Failed to convert the data to blob."},InvalidTagName:function(b){b._errorCode=-2394;b._errorString="Invalid tag name."},MobileNotSupport:function(c,b){c._errorCode=-2400;c._errorString=b+" doesn't work under current settings."},LoadImageFailed:function(c,b){c._errorCode=-2401;c._errorString="Failed to load image: "+a(b)},RotateFailed:function(c,b){c._errorCode=-2402;c._errorString="Failed to rotate image: "+a(b)},FlipFailed:function(c,b){c._errorCode=-2403;c._errorString="Failed to flip image: "+a(b)},MirrorFailed:function(c,b){c._errorCode=-2404;c._errorString="Failed to mirror image: "+a(b)},EraseFailed:function(c,b){c._errorCode=-2405;c._errorString="Failed to erase image: "+a(b)},InvertFailed:function(c,b){c._errorCode=-2406;c._errorString="Failed to invert image: "+a(b)},SaveImageFailed:function(c,b){c._errorCode=-2407;c._errorString="Failed to save image: "+a(b)},ChangeImageSizeFailed:function(c,b){c._errorCode=-2408;c._errorString="Failed to change image size: "+a(b)},CropFailed:function(c,b){c._errorCode=-2409;c._errorString="Failed to crop image: "+a(b)},SkewAngleFailed:function(c,b){c._errorCode=-2410;c._errorString="Failed to skew angle: "+a(b)},ConvertToGrayScaleFailed:function(c,b){c._errorCode=-2411;c._errorString="Failed to convert to gray scale: "+a(b)},ConvertToBWScaleFailed:function(c,b){c._errorCode=-2412;c._errorString="Failed to convert to black and white scale: "+a(b)},SetDPIFailed:function(c,b){c._errorCode=-2413;c._errorString="Failed to set dpi: "+a(b)},SetImageWidthFailed:function(c,b){c._errorCode=-2414;c._errorString="Failed to set image width: "+a(b)},GetLicenseInfoFailed:function(c,b){c._errorCode=-2415;c._errorString="Failed to get license info: "+a(b)},InvalidParameter:function(b){b._errorCode=-2416;b._errorString="Invalid parameter type."},MobileServer_InvalidLeftOrTopOrRightOrBottom:function(b){b._errorCode=-2417;b._errorString="The left or top or right or bottom you entered is invalid."},MobileServer_InvalidWidth:function(b){b._errorCode=-2418;b._errorString="The width you entered is invalid."},MobileServer_InvalidHeight:function(b){b._errorCode=-2419;b._errorString="The height you entered is invalid."},MobileServer_InvalidXResolution:function(b){b._errorCode=-2420;b._errorString="The x resolution you entered is invalid."},MobileServer_InvalidYResolution:function(b){b._errorCode=-2421;b._errorString="The y resolution you entered is invalid."},MobileServer_InvalidImage:function(b){b._errorCode=-2422;b._errorString="The image source is invalid."},MobileServer_InvalidIndex:function(b){b._errorCode=-2423;b._errorString="The index is invalid."},GetMD5Failed:function(c,b){c._errorCode=-2424;c._errorString="Failed to get MD5: "+a(b)},ConvertFromBase64Failed:function(b){b._errorCode=-2425;b._errorString="Converting image from a base64 string failed."},LicenseTrialFullMixed:function(b){b._errorCode=-2426;b._errorString="You have used a full license with a trial license which is not permitted. Please check and update Dynamsoft.WebTwainEnv.ProductKey."},BarcodeReaderError:function(c,b){c._errorCode=-2427;c._errorString=b},TiffTagCountExceedError:function(b){b._errorCode=-2428;b._errorString="Tiff tag count has exceeded the limit."},SelectSourceMustAsync:function(b){b._errorCode=-2429;b._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when ImageCaptureDriverType is set to TWAIN_AND_ICA or TWAIN_AND_TWAIN64."},HttpLicenseInvalid:function(b){b._errorCode=-2430;b._errorString="The current product key is invalid."},LicenseNotSupportWasmWasm:function(b){b._errorCode=-2431;b._errorString="The current product key does not support Webcam Wasm, please contact the site administrator."},InvalidParameterInCallback:function(b){b._errorCode=-2432;b._errorString="Invalid parameter."},ActiveXNotSupport:function(b){b._errorCode=-2433;b._errorString="The ActiveX edition does not support this method or property."},DetectCallbackErr:function(b){b._errorCode=-2434},PerspectiveCallback:function(b){b._errorCode=-2435},webtwain_id_not_string:function(){return'Error: The "WebTwainId" is not a string.'},container_id_not_string:function(){return'Error: The argument you passed to the parameter "conatinerId" is not a string.'},container_id_not_exist:function(b){return'Error: The element specified by the id "'+b+"\" doesn't exist."},StartScanFailed:function(b){b._errorCode=-2436;b._errorString="Operation in progress, please try again when the current operation has finished."},ImageEditorOpenCannotPlayVideo:function(b){b._errorCode=-2437;b._errorString="The video can not be played while the Image Editor is open."},SelectSourceMustAsyncWhenRemote:function(b){b._errorCode=-2438;b._errorString="The method SelectSource() must be invoked asynchronously (i.e. with callback functions) when the scanning is done on a remote machine."},CannotBindViewerWhenNoViewerJS:function(b){b._errorCode=-2439;b._errorString="You cannot call the method bindViewer() when Dynamsoft.WebTwainEnv.UseDefaultViewer is set to false."},ImageEditorExist:function(b){b._errorCode=-2500;b._errorString="An ImageEditor already exists."},ThumbnailViewerExist:function(b){b._errorCode=-2501;b._errorString="A ThumbnailViewer already exists."},CustomElementExist:function(b){b._errorCode=-2502;b._errorString="A CustomElement already exists."},ImageEditorNotExist:function(b){b._errorCode=-2503;b._errorString="This ImageEditor doesn't exist."},ImageEditorDispose:function(b){b._errorCode=-2504;b._errorString="The ImageEditor object has been disposed."},ThumbnailViewerNotExist:function(b){b._errorCode=-2505;b._errorString="This ThumbnailViewer doesn't exist."},ThumbnailViewerDispose:function(b){b._errorCode=-2506;b._errorString="The ThumbnailViewer object has been disposed."},CustomElementNotExist:function(b){b._errorCode=-2507;b._errorString="This CustomElement doesn't exist."},CustomElementDispose:function(b){b._errorCode=-2508;b._errorString="The CustomElement object has been disposed."},EventNotExist:function(b){b._errorCode=-2509;b._errorString="The specified event doesn't exist."},CallbackNotAFunction:function(b){b._errorCode=-2510;b._errorString="The callback is not a function."},ElementRequired:function(b){b._errorCode=-2511;b._errorString="Parameter 'element' is required."},ElementNotExist:function(b){b._errorCode=-2512;b._errorString="Parameter 'element' doesn't exist."},Destroyed:function(b){b._errorCode=-2513;b._errorString="The WebTwain instance has been destroyed and can not be used anymore."},InvalidPropertyValue:function(b){b._errorCode=-2514;b._errorString="Invalid property value. "},HostNotAvailable:function(c,b){c._errorCode=-2515;c._errorString="The Dynamsoft Service is not configured correctly on "+b+". Please check."},CameraRequired:function(b){b._errorCode=-2516;b._errorString="The camera addon is required."},OldTagNameRequired:function(b){b._errorCode=-2517;b._errorString="Old tag name is required."},NewTagNameRequired:function(b){b._errorCode=-2518;b._errorString="New tag name is required."},CursorInvalidMode:function(b){b._errorCode=-2519;b._errorString="The current mode does not support setting the cursor to zoom-in."},SystemExceptionError:function(b,c){b._errorCode=-2520;b._errorString=c},WebviewerError:function(d,c,b){if(b){d._errorCode=b}else{d._errorCode=-2600}d._errorString=c},ClearErrorInfo:function(b){b._errorCode=0;b._errorString=""},__last:false}})();Dynamsoft.Ready(function(a){a.LS={isSupportLS:function(){var c=Dynamsoft.navInfoSync,b=false;if(c.bEdge&&c.bFileSystem){}else{try{b=(window.localStorage)?true:false}catch(d){}}return b},item:function(c,d,b){var e=null;if(this.isSupportLS()){if(d){localStorage.setItem(c,d);e=d}else{e=localStorage.getItem(c)}if(e===null){return b}return e}else{return b}},removeItem:function(b){if(this.isSupportLS()){localStorage.removeItem(b)}else{return false}return true}}});Dynamsoft.Ready(function(o,g){o.html5=o.html5||{};if(!o.product.bHTML5Edition){return}var y=1,d,s=!1,i=!0,f=0,a=1,l=1,x=2,e=Dynamsoft.WebTwainEnv;d=o.html5.Funs={notSupportProperty:function(B){},notSupportMethod:function(B){},getRandom:function(){var C=new Date().getTime()%10000,B=[],E;for(var D=0;D<5;D++){E=Math.floor(Math.random()*10);if(D==0&&E==0){D=-1;continue}B.push(E)}if(C<10){B.push("000")}else{if(C<100){B.push("00")}else{if(C<1000){B.push("0")}}}B.push(C);return B.join("")},generateCmdId:function(){y++;return y},cformat:function(J,E){if(o.isString(J)){var I=J.indexOf("<%"),H,F,D,C,B;if(I==-1){return J}F=J.substring(0,I);H=J.indexOf(">",F);if(I+2<H){D=J.substring(I+1,H)}else{return J}C=J.substring(H+1);try{B=o.sprintf(D,E)}catch(G){B=""}return[F,B,C].join("")}return""},sendData:function(C,N,H,L){var M,G,D,E,B,K,F,I;if(!L){try{C.send(N)}catch(J){o.log(J)}return s}E=new ArrayBuffer(12);G=H&&H.size?H.size:0;I=new Blob([N]);M=I.size;D=M+G;B=new DataView(E);for(F=0;F<8;F++){if(D){B.setUint8(F,D%256);D=parseInt(D/256)}else{break}}for(F=0;F<4;F++){if(M){B.setUint8(8+F,M%256);M=parseInt(M/256)}else{break}}K=new Blob([E,I]);C.send(K);if(G>0){C.send(H)}E=null;I=null;K=null;B=null;return i},__pushElement:function(C,B){if(o.isString(B)){C.push('"');C.push(B);C.push('"')}else{if(o.isArray(B)){var D=i;C.push("[");o.each(B,function(E){if(D){D=s}else{C.push(",")}d.__pushElement(C,E)});C.push("]")}else{if(B===undefined){C.push('""')}else{C.push(B)}}}},makeParams:function(){var C=arguments;if(C===undefined||C.length===0){return undefined}else{var B=[],E,D;if(C.length===1){E=C[0];B.push("[");d.__pushElement(B,E);B.push("]")}else{if(C.length===2){E=C[0];D=C[1];B.push("[");d.__pushElement(B,E);B.push(",");d.__pushElement(B,D);B.push("]")}else{d.__pushElement(B,Array.prototype.slice.call(C))}}return B.join("")}},getJson:function(G,C,H,B){var F=[];F.push("{");F.push('"id":"');F.push(G.clientId);F.push('"');if(B){F.push(',"cmdId":"');F.push(B);F.push('"')}F.push(',"method":"');F.push(C);F.push('"');F.push(',"module":"dwt","version":"');var E=Dynamsoft.WebTwainEnv,D=[o.product.getDWTPrefix(),o.product.getServerVersionInfo()].join("");F.push(D);F.push('"');if(H!==undefined&&H!==null){F.push(',"parameter":');F.push(H)}F.push("}");return F.join("")},refreshImageAfterInvokeFun:function(B,D,C){return(C==1)},loadHttpBlob:function(G,N,F,H,O,B,M,C){var E="loadHttpBlob",P,J,L=s;J={method:N,dataType:"blob"};if(C){J.headers=C}if(G.HTTPUserName!=""){J.username=G.HTTPUserName;J.password=G.HTTPPassword}if(H&&N=="get"){o.fetch(F,J).then(function(R){O(R);R=null},function(){o.Errors.HttpDownloadUrlError(G);if(o.isFunction(B)){B()}});return true}else{if(H&&N=="post"){J.onSuccess=O;if(o.isFunction(M)){J.beforeSend=function(R){R.addEventListener("progress",function(S){delete (S.totalSize);delete (S.position);M(S)},s)}}L=i}else{if(Dynamsoft.navInfoSync.bIE){J.dataType="arraybuffer";J.onSuccess=function(V,U,T){var W,S,R;W=V||T.responseData;if(W){R=new Uint8Array(W)}G._errorCode=0;G._errorString="";O(R);R=null;L=i}}else{J.dataType="text";J.contentType="text/plain; charset=x-user-defined";J.mimeType="text/plain; charset=x-user-defined";J.onSuccess=function(W,V,U){var X,S,R;X=U.responseText;S=X.length;R=new Uint8Array(S);for(var T=0;T<S;T++){R[T]=X.charCodeAt(T)}G._errorCode=0;G._errorString="";O(R);R=null;L=i}}if(J.headers){o.mix(J.headers,{"X-Requested-With":s})}else{J.headers={"X-Requested-With":s}}}}if(N=="post"){var I=G.httpFormFields,D;if(I){try{D=new FormData();o.each(I,function(S,R){if(S instanceof Blob){var T=S.name;D.append(R,S,T)}else{D.append(R,S)}});o.mix(J,{data:D,processData:s,contentType:s})}catch(K){}}}P=function(W,T,V){var S,U;if(W&&o.isArray(W)&&W.length>2){S=W[1];U=W[2]}else{S=T;U=V}if(U.state==2&&U.status==0){if(U.statusText==="abort"){var R=i;o.Errors.HttpDownloadError(G,R)}else{o.Errors.HttpDownloadUrlError(G)}}else{o.Errors.HttpDownloadError(G,s,S,U.status)}if(o.isFunction(B)){B()}};J.url=F;J.async=H;J.onError=P;J.onComplete=function(){o.bio=s};var Q=o.ajax(J);if(H){o.bio=Q}return L},combineUrl:function(F,C,E){var B=[],D=C;if(D===undefined||E===undefined){return s}if(!o.isString(D)){D=String(C)}if(D.indexOf("http://")==0){D=D.replace("http://","");B.push("http://")}else{if(D.indexOf("https://")==0){D=D.replace("https://","");B.push("https://")}else{if(D.indexOf("//")==0){D=D.replace("//","")}if(F.IfSSL){B.push("https://")}else{B.push("http://")}}}B.push(D);if(D.indexOf(":")<0){if(F.HTTPPort==""){F.HTTPPort=o.detect.ssl?443:80}if((!o.detect.ssl&&F.HTTPPort!=80)||(o.detect.ssl&&F.HTTPPort!=443)){B.push(":");B.push(F.HTTPPort)}}if(E.indexOf("/")!==0){B.push("/")}B.push(E);return B.join("")},httpPostUpload:function(Q,F,I,P,M,K,N,H,R,C,S,B){if(!I||I.size<=0){o.Errors.UploadFileCannotEmpty(Q);if(o.isFunction(B)){B()}return s}var E=Q.MaxUploadImageSize,O=I.size,J=I.type,G,T;if(O>E&&E!=-1){o.Errors.UploadExceededMaxSize(Q);if(o.isFunction(B)){B()}return s}if(J===""||J&&J!=Q.HttpContentTypeFieldValue){var L=I.slice||I.webkitSlice||I.mozSlice,D=I.name;if(!o.isString(D)||D==""){D=I.fileName}G=L.call(I,0,O,Q.HttpContentTypeFieldValue);G.name=D}else{G=I}I=null;G.remoteFilename=Q.__remoteFilename;T=this.httpUploadByBIO(Q,F,G,M,P,K,N,H,R,C,S,B);G=null;return T},httpPostUploadFiles:function(T,F,H,S,O,M,P,I,U,V,B){var E=T.MaxUploadImageSize,G=0,Q;if(!H||!o.isArray(H)||H.length<=0){o.Errors.UploadFileCannotEmpty(T);if(o.isFunction(B)){B()}return s}for(Q=0;Q<H.length;Q++){var K=H[Q];if(!K||K.size<=0){o.Errors.UploadFileCannotEmpty(T);if(o.isFunction(B)){B()}return s}var R=K.size,L=K.type,W;G+=R;if(L===""||L&&L!=T.HttpContentTypeFieldValue){var N=K.slice||K.webkitSlice||K.mozSlice,D=K.name,J=N.call(K,0,R,T.HttpContentTypeFieldValue);if(!o.isString(D)||D==""){D=K.fileName}J.name=this.cformat(D,Q+1);H[Q]=J}H[Q].remoteFilename=this.cformat(T.__remoteFilename,Q+1);K=null}if(G>E&&E!=-1){o.Errors.UploadExceededMaxSize(T);if(o.isFunction(B)){B()}return s}var C=false;W=this.httpUploadByBIO(T,F,H,O,S,M,P,I,U,C,V,B);for(Q=0;Q<H.length;Q++){H[Q]=null}H=null;return W},httpPostUploadString:function(H,B,J,G,N,C,I,D,P,K,Q){var O,F,L,M;if(J==""){o.Errors.UploadFileCannotEmpty(H);if(o.isFunction(Q)){Q()}return s}F=H.MaxUploadImageSize;L=J.length;if(L>F&&F!=-1){o.Errors.UploadExceededMaxSize(H);if(o.isFunction(Q)){Q()}return s}O=new Blob([J],{type:"text/plain"});O.name=G;var E=false;M=this.httpUploadByBIO(H,B,O,N,i,C,I,D,P,E,K,Q);O=null;return M},httpUploadByBIO:function(I,C,B,N,M,D,J,E,P,G,L,Q){var R,H,O,F;O=I.httpFormFields;F=new FormData();o.each(O,function(T,S){if(T instanceof Blob){var U=T.name;F.append(S,T,U)}else{F.append(S,T)}});o.bio=new o.BIO({action:C,data:F,async:M,retry:E,bOnlyEmptyIsOK:P});R=o.bio.get("uploadType");if(R){H=R.get("ajaxConfig");if(H&&H.headers&&D){o.mix(H.headers,D)}if(N>=0){R.set("blockSize",N)}if(I.__withCredentials){o.mix(H.xhrFields,{withCredentials:true})}}I.__HTTPPostResponseString=s;o.bio.on(o.BIO.event.SUCCESS,function(V){o.bio=s;if(V&&o.isString(V.response)){I.__HTTPPostResponseString=V.response}else{I.__HTTPPostResponseString=""}if(o.isFunction(I.__OnHttpUploadStatus)){var T=V.name,U=200,S;S={fileName:T,percentage:100,statusCode:U,responseString:I.__HTTPPostResponseString};I.__OnHttpUploadStatus(S)}if(o.isFunction(L)){L(I.__HTTPPostResponseString)}});o.bio.on(o.BIO.event.ERROR,function(Y){var W=(Y&&Y.canceled),Z=(Y&&Y.timeout),U=s,X=0;o.bio=s;if(Y&&o.isString(Y.response)){I.__HTTPPostResponseString=Y.response}else{I.__HTTPPostResponseString=""}if(!W){if(Y&&Y.msg){U=Y.msg}if(Y&&Y.httpStatus){X=Y.httpStatus}}o.Errors.UploadError(I,W,U,X);if(o.isFunction(I.__OnHttpUploadStatus)){var T=Y.name,V=X,S;S={fileName:T,percentage:100,statusCode:V,responseString:I.__HTTPPostResponseString};I.__OnHttpUploadStatus(S)}if(o.isFunction(Q)){Q(I.__HTTPPostResponseString)}});if(J||o.isFunction(I.__OnHttpUploadStatus)){o.bio.on(o.BIO.event.PROGRESS,function(V){delete (V.totalSize);delete (V.position);var W=(V.total===0)?100:Math.round(V.loaded*100/V.total),X=[V.loaded," / ",V.total].join("");if(o.isFunction(I.__OnHttpUploadStatus)){var T=V.name,U=0,S;if(W>99){W=99}S={fileName:T,percentage:W,statusCode:U,responseString:""};I.__OnHttpUploadStatus(S)}if(J){I._OnPercentDone([0,W,"","http",V.name])}});if(J){I._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"])}if(o.isFunction(I.__OnHttpUploadStatus)){var K="";if(o.isArray(B)&&B.length>0){}else{if(B&&B.name&&B.name!=""){K=B.name}else{if(B&&B.fileName){K=B.fileName}}}I.__OnHttpUploadStatus({fileName:K,percentage:0,statusCode:0,responseString:""})}}if(G&&G.bCancel){G.st=2;if(o.isFunction(Q)){Q(false)}return false}return o.bio.upload(B)},httpPutImage:function(E,B,D,F,J,C,H){var I=i,G={method:"PUT",url:B,hasContent:i,processData:s,async:F,data:D,onSuccess:J,onError:function(){I=s;if(o.isFunction(C)){C()}},onComplete:function(){o.bio=s},beforeSend:function(K){if(o.isFunction(H)){K.upload.addEventListener("progress",function(L){delete (L.totalSize);delete (L.position);H(L)},s)}}};if(E.HTTPUserName!=""){G.username=E.HTTPUserName;G.password=E.HTTPPassword}if(!F){o.mix(G,{headers:{"X-Requested-With":s}})}o.bio=o.ajax(G);return I},dialog:s,dialogRef:0,showMask:function(C){var B=this;o.log("showMask:"+C+"--"+B.dialogRef);if(B.dialogRef==0){o.detect.showMask()}B.dialogRef++},hideMask:function(C){var B=this;o.log("hideMask:"+C+"--"+B.dialogRef);if(B.dialogRef>1){B.dialogRef--}else{if(B.dialogRef<=1){o.detect.hideMask();B.dialog=s;B.dialogRef=0}}},setBtnCancelVisibleForProgress:function(D,C){var B=this;if((o.cancelFrome==0&&D.__IfShowProgressBar==i)||(o.cancelFrome!=0&&D.__IfShowCancelDialogWhenImageTransfer==i)){o.setBtnCancelVisibleForProgress(C)}},EVENTS:["OnPostAllTransfers","OnPostTransfer","OnPostLoad","OnPreTransfer","OnPreAllTransfers","OnResult","OnTransferCancelled","OnTransferError","OnSourceUIClose","OnBitmapChanged","OnGetFilePath","OnPercentDone","OnPostTransferAsync","OnPreAllTransfersAsync","OnRemoteScanStatusAsync"],SEND_BACK_EVENTS:["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnGetFilePath","OnPostLoad"],handleEvent:function(E,C){var G=this,D=C.result[0],B=E._objWS,F=s;o.each(d.EVENTS,function(J,I){if(C.event===J){var H=["_",J].join("");F=i;if(o.isFunction(E[H])){E[H](C.result,C)}return s}});if(F){o.log("handled event:"+C.event);o.each(d.SEND_BACK_EVENTS,function(I,H){if(d.isServerInvalid(E)){return s}if(C.event===I){o.log("sendback event:"+C.event);d.sendData(B,d.getJson(E,C.event,d.makeParams(D),0),s,i);return s}})}else{o.each(o.Addon_Events,function(J,I){if(C.event===J){var H=["_",J].join("");F=i;if(o.isFunction(E[H])){E[H](C.result)}return s}});if(F){o.log("handled addon event:"+C.event);o.each(o.Addon_Sendback_Events,function(I,H){if(d.isServerInvalid(E)){return s}if(C.event===I){o.log("sendback addon event:"+C.event);d.sendData(B,d.getJson(E,C.event,d.makeParams(D),0),s,i);return s}})}}return F},getImageType:function(C){if(C===undefined){return -1}var B=C.length;if(B<4){return -1}var D=C.lastIndexOf(".");if(D===-1){return -1}var E=C.slice(D).toLowerCase();if(E===".bmp"||E===".dib"){return EnumDWT_ImageType.IT_BMP}if(E===".jpg"||E===".jpe"||E===".jpeg"||E===".jfif"){return EnumDWT_ImageType.IT_JPG}if(E===".tif"||E===".tiff"){return EnumDWT_ImageType.IT_TIF}if(E===".png"){return EnumDWT_ImageType.IT_PNG}if(E===".pdf"){return EnumDWT_ImageType.IT_PDF}if(E===".jp2"||E===".j2k"||E===".j2c"){return EnumDWT_ImageType.IT_J2K}return -1},addImageFileExt:function(C,B){var D;var E=C.substring(C.lastIndexOf(".")).toLowerCase();if(E==".bmp"||E==".dib"||E==".jpg"||E==".jpe"||E==".jpeg"||E==".jfif"||E==".tif"||E==".tiff"||E==".png"||E==".pdf"){return C}if(B==EnumDWT_ImageType.IT_BMP){D=[C,".bmp"].join("")}else{if(B==EnumDWT_ImageType.IT_JPG){D=[C,".jpg"].join("")}else{if(B==EnumDWT_ImageType.IT_PNG){D=[C,".png"].join("")}else{if(B==EnumDWT_ImageType.IT_TIF){D=[C,".tif"].join("")}else{if(B==EnumDWT_ImageType.IT_PDF){D=[C,".pdf"].join("")}else{if(B==EnumDWT_ImageType.IT_J2K){D=[C,".jp2"].join("")}}}}}}return D},autoDiscardBlankImage:function(E,B){if(o.config.bDiscardBlankImage){var C=E._ImgManager.getCurrentImageIndex();if(E.IsBlankImage(C)){E.RemoveImage(C)}var D=["Blank Discard (",B,"): ",E.ErrorString].join("");if(o.isFunction(E.__OnPrintMsg)){E.__OnPrintMsg(D)}}},replaceLocalFilename:function(B){var C;if(B===undefined){return""}B=String(B);C=B.replace(/\\/g,"\\\\");if(Dynamsoft.navInfoSync.bFileSystem){C=decodeURI(C)}return C},GetImageInfo:function(C,D){var B=C._ImgManager.convertClientIndexToServerId(D);if(B==-1){o.Errors.IndexOutOfRange(C);return false}return C._innerFun("GetImageInfo",d.makeParams(B))},isServerInvalid:function(C){var E=C,B,D;B=!E.bReady||E._objWS===null;D=E.__bMustUpgradeService;if(B){o.Errors.Server_Invalid(E)}else{if(D){o.Errors.MustUpgradeService(E)}}return B||D||E._errorCode==-2208},isHttpServerInvalid:function(C){var E=C,B,D;B=!E.bReady||E.httpUrl===null;D=E.__bMustUpgradeService;if(B){o.Errors.Server_Invalid(E)}else{if(D){o.Errors.MustUpgradeService(E)}}return B||D||E._errorCode==-2208},getBlobTypeByImageType:function(C){var B="application/octet-stream";switch(C){case 0:B="image/bmp";break;case 1:B="image/jpeg";break;case 2:B="image/tiff";break;case 3:B="image/png";break;case 4:B="application/pdf";break;case 14:B="image/jp2";break}return B},DEF:function(C,B,F,D){var E;if(F!==f&&F!==a){E=F}else{E={};if(F){if(D==l){E.set=function(G){var H=G*1;if(!o.isNumber(H)||isNaN(H)){o.Errors.InvalidValue(C);return s}C._resetErr();if(!C._isValid()){return false}return C._innerFun(B,d.makeParams(H))}}else{if(D==x){E.set=function(G){if(!o.isBoolean(G)){o.Errors.InvalidValue(C);return s}C._resetErr();if(!C._isValid()){return false}return C._innerFun(B,d.makeParams(G))}}else{E.set=function(G){if(!o.isString(G)){o.Errors.InvalidValue(C);return s}C._resetErr();if(!C._isValid()){return false}return C._innerFun(B,d.makeParams(G))}}}}}if(!E.get){E.get=function(){C._resetErr();if(!C._isValid()){return false}return C._innerFun(B)}}if(!(B in C)){Object.defineProperty(C,B,E)}},_DEF_NOT_SUPPORT_MOBILE_A:function(B,E,D){var C={get:function(){return B._mobileNotSupport(E)}};if(D===a||o.isUndef(D)){C.set=C.get}if(!(E in B)){Object.defineProperty(B,E,C)}},DEF_NOT_SUPPORT_MOBILE:function(C,B,D){if(o.isArray(B)){o.each(B,function(E){d._DEF_NOT_SUPPORT_MOBILE_A(C,E,D)})}else{d._DEF_NOT_SUPPORT_MOBILE_A(C,B,D)}},callbacks:[],pushCallback:function(B,E,C){var D={method:B,callback:E,ticks:C};d.callbacks(D)},refreshUIRef:0};var k=function(C,B){return C+B&4294967295},b=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(G,D,C,B,F,E){D=k(k(D,G),k(B,E));return k(D<<F|D>>>32-F,C)}function t(C,E){var D=C[0],B=C[1],G=C[2],F=C[3];D+=(B&G|~B&F)+E[0]-680876936|0;D=(D<<7|D>>>25)+B|0;F+=(D&B|~D&G)+E[1]-389564586|0;F=(F<<12|F>>>20)+D|0;G+=(F&D|~F&B)+E[2]+606105819|0;G=(G<<17|G>>>15)+F|0;B+=(G&F|~G&D)+E[3]-1044525330|0;B=(B<<22|B>>>10)+G|0;D+=(B&G|~B&F)+E[4]-176418897|0;D=(D<<7|D>>>25)+B|0;F+=(D&B|~D&G)+E[5]+1200080426|0;F=(F<<12|F>>>20)+D|0;G+=(F&D|~F&B)+E[6]-1473231341|0;G=(G<<17|G>>>15)+F|0;B+=(G&F|~G&D)+E[7]-45705983|0;B=(B<<22|B>>>10)+G|0;D+=(B&G|~B&F)+E[8]+1770035416|0;D=(D<<7|D>>>25)+B|0;F+=(D&B|~D&G)+E[9]-1958414417|0;F=(F<<12|F>>>20)+D|0;G+=(F&D|~F&B)+E[10]-42063|0;G=(G<<17|G>>>15)+F|0;B+=(G&F|~G&D)+E[11]-1990404162|0;B=(B<<22|B>>>10)+G|0;D+=(B&G|~B&F)+E[12]+1804603682|0;D=(D<<7|D>>>25)+B|0;F+=(D&B|~D&G)+E[13]-40341101|0;F=(F<<12|F>>>20)+D|0;G+=(F&D|~F&B)+E[14]-1502002290|0;G=(G<<17|G>>>15)+F|0;B+=(G&F|~G&D)+E[15]+1236535329|0;B=(B<<22|B>>>10)+G|0;D+=(B&F|G&~F)+E[1]-165796510|0;D=(D<<5|D>>>27)+B|0;F+=(D&G|B&~G)+E[6]-1069501632|0;F=(F<<9|F>>>23)+D|0;G+=(F&B|D&~B)+E[11]+643717713|0;G=(G<<14|G>>>18)+F|0;B+=(G&D|F&~D)+E[0]-373897302|0;B=(B<<20|B>>>12)+G|0;D+=(B&F|G&~F)+E[5]-701558691|0;D=(D<<5|D>>>27)+B|0;F+=(D&G|B&~G)+E[10]+38016083|0;F=(F<<9|F>>>23)+D|0;G+=(F&B|D&~B)+E[15]-660478335|0;G=(G<<14|G>>>18)+F|0;B+=(G&D|F&~D)+E[4]-405537848|0;B=(B<<20|B>>>12)+G|0;D+=(B&F|G&~F)+E[9]+568446438|0;D=(D<<5|D>>>27)+B|0;F+=(D&G|B&~G)+E[14]-1019803690|0;F=(F<<9|F>>>23)+D|0;G+=(F&B|D&~B)+E[3]-187363961|0;G=(G<<14|G>>>18)+F|0;B+=(G&D|F&~D)+E[8]+1163531501|0;B=(B<<20|B>>>12)+G|0;D+=(B&F|G&~F)+E[13]-1444681467|0;D=(D<<5|D>>>27)+B|0;F+=(D&G|B&~G)+E[2]-51403784|0;F=(F<<9|F>>>23)+D|0;G+=(F&B|D&~B)+E[7]+1735328473|0;G=(G<<14|G>>>18)+F|0;B+=(G&D|F&~D)+E[12]-1926607734|0;B=(B<<20|B>>>12)+G|0;D+=(B^G^F)+E[5]-378558|0;D=(D<<4|D>>>28)+B|0;F+=(D^B^G)+E[8]-2022574463|0;F=(F<<11|F>>>21)+D|0;G+=(F^D^B)+E[11]+1839030562|0;G=(G<<16|G>>>16)+F|0;B+=(G^F^D)+E[14]-35309556|0;B=(B<<23|B>>>9)+G|0;D+=(B^G^F)+E[1]-1530992060|0;D=(D<<4|D>>>28)+B|0;F+=(D^B^G)+E[4]+1272893353|0;F=(F<<11|F>>>21)+D|0;G+=(F^D^B)+E[7]-155497632|0;G=(G<<16|G>>>16)+F|0;B+=(G^F^D)+E[10]-1094730640|0;B=(B<<23|B>>>9)+G|0;D+=(B^G^F)+E[13]+681279174|0;D=(D<<4|D>>>28)+B|0;F+=(D^B^G)+E[0]-358537222|0;F=(F<<11|F>>>21)+D|0;G+=(F^D^B)+E[3]-722521979|0;G=(G<<16|G>>>16)+F|0;B+=(G^F^D)+E[6]+76029189|0;B=(B<<23|B>>>9)+G|0;D+=(B^G^F)+E[9]-640364487|0;D=(D<<4|D>>>28)+B|0;F+=(D^B^G)+E[12]-421815835|0;F=(F<<11|F>>>21)+D|0;G+=(F^D^B)+E[15]+530742520|0;G=(G<<16|G>>>16)+F|0;B+=(G^F^D)+E[2]-995338651|0;B=(B<<23|B>>>9)+G|0;D+=(G^(B|~F))+E[0]-198630844|0;D=(D<<6|D>>>26)+B|0;F+=(B^(D|~G))+E[7]+1126891415|0;F=(F<<10|F>>>22)+D|0;G+=(D^(F|~B))+E[14]-1416354905|0;G=(G<<15|G>>>17)+F|0;B+=(F^(G|~D))+E[5]-57434055|0;B=(B<<21|B>>>11)+G|0;D+=(G^(B|~F))+E[12]+1700485571|0;D=(D<<6|D>>>26)+B|0;F+=(B^(D|~G))+E[3]-1894986606|0;F=(F<<10|F>>>22)+D|0;G+=(D^(F|~B))+E[10]-1051523|0;G=(G<<15|G>>>17)+F|0;B+=(F^(G|~D))+E[1]-2054922799|0;B=(B<<21|B>>>11)+G|0;D+=(G^(B|~F))+E[8]+1873313359|0;D=(D<<6|D>>>26)+B|0;F+=(B^(D|~G))+E[15]-30611744|0;F=(F<<10|F>>>22)+D|0;G+=(D^(F|~B))+E[6]-1560198380|0;G=(G<<15|G>>>17)+F|0;B+=(F^(G|~D))+E[13]+1309151649|0;B=(B<<21|B>>>11)+G|0;D+=(G^(B|~F))+E[4]-145523070|0;D=(D<<6|D>>>26)+B|0;F+=(B^(D|~G))+E[11]-1120210379|0;F=(F<<10|F>>>22)+D|0;G+=(D^(F|~B))+E[2]+718787259|0;G=(G<<15|G>>>17)+F|0;B+=(F^(G|~D))+E[9]-343485551|0;B=(B<<21|B>>>11)+G|0;C[0]=D+C[0]|0;C[1]=B+C[1]|0;C[2]=G+C[2]|0;C[3]=F+C[3]|0}function r(C){var D=[],B;for(B=0;B<64;B+=4){D[B>>2]=C.charCodeAt(B)+(C.charCodeAt(B+1)<<8)+(C.charCodeAt(B+2)<<16)+(C.charCodeAt(B+3)<<24)}return D}function u(B){var D=[],C;for(C=0;C<64;C+=4){D[C>>2]=B[C]+(B[C+1]<<8)+(B[C+2]<<16)+(B[C+3]<<24)}return D}function p(J){var D=J.length,B=[1732584193,-271733879,-1732584194,271733878],F,C,I,G,H,E;for(F=64;F<=D;F+=64){t(B,r(J.substring(F-64,F)))}J=J.substring(F-64);C=J.length;I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(F=0;F<C;F+=1){I[F>>2]|=J.charCodeAt(F)<<(F%4<<3)}I[F>>2]|=128<<(F%4<<3);if(F>55){t(B,I);for(F=0;F<16;F+=1){I[F]=0}}G=D*8;G=G.toString(16).match(/(.*?)(.{0,8})$/);H=parseInt(G[2],16);E=parseInt(G[1],16)||0;I[14]=H;I[15]=E;t(B,I);return B}function z(J){var D=J.length,B=[1732584193,-271733879,-1732584194,271733878],F,C,I,G,H,E;for(F=64;F<=D;F+=64){t(B,u(J.subarray(F-64,F)))}J=F-64<D?J.subarray(F-64):new Uint8Array(0);C=J.length;I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(F=0;F<C;F+=1){I[F>>2]|=J[F]<<(F%4<<3)}I[F>>2]|=128<<(F%4<<3);if(F>55){t(B,I);for(F=0;F<16;F+=1){I[F]=0}}G=D*8;G=G.toString(16).match(/(.*?)(.{0,8})$/);H=parseInt(G[2],16);E=parseInt(G[1],16)||0;I[14]=H;I[15]=E;t(B,I);return B}function h(D){var C="",B;for(B=0;B<4;B+=1){C+=b[D>>B*8+4&15]+b[D>>B*8&15]}return C}function j(B){var C;for(C=0;C<B.length;C+=1){B[C]=h(B[C])}return B.join("")}if(j(p("hello"))!=="5d41402abc4b2a76b9719d911017c592"){k=function(B,E){var D=(B&65535)+(E&65535),C=(B>>16)+(E>>16)+(D>>16);return C<<16|D&65535}}if(typeof ArrayBuffer!=="undefined"&&!ArrayBuffer.prototype.slice){(function(){function B(D,C){D=D|0||0;if(D<0){return Math.max(D+C,0)}return Math.min(D,C)}ArrayBuffer.prototype.slice=function(J,K){var C=this.byteLength,E=B(J,C),F=C,G,I,D,H;if(K!==undefined){F=B(K,C)}if(E>F){return new ArrayBuffer(0)}G=F-E;I=new ArrayBuffer(G);D=new Uint8Array(I);H=new Uint8Array(this,E,G);D.set(H);return I}})()}function c(B){if(/[\u0080-\uFFFF]/.test(B)){B=unescape(encodeURIComponent(B))}return B}function m(F,E){var D=F.length,G=new ArrayBuffer(D),B=new Uint8Array(G),C;for(C=0;C<D;C+=1){B[C]=F.charCodeAt(C)}return E?B:G}function q(B){return String.fromCharCode.apply(null,new Uint8Array(B))}function v(E,C,D){var B=new Uint8Array(E.byteLength+C.byteLength);B.set(new Uint8Array(E));B.set(new Uint8Array(C),E.byteLength);return D?B:B.buffer}function w(E){var C=[],D=E.length,B;for(B=0;B<D-1;B+=2){C.push(parseInt(E.substr(B,2),16))}return String.fromCharCode.apply(String,C)}function A(){this.reset()}A.prototype.append=function(B){this.appendBinary(c(B));return this};A.prototype.appendBinary=function(D){this._buff+=D;this._length+=D.length;var C=this._buff.length,B;for(B=64;B<=C;B+=64){t(this._hash,r(this._buff.substring(B-64,B)))}this._buff=this._buff.substring(B-64);return this};A.prototype.end=function(D){var G=this._buff,F=G.length,E,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B;for(E=0;E<F;E+=1){C[E>>2]|=G.charCodeAt(E)<<(E%4<<3)}this._finish(C,F);B=j(this._hash);if(D){B=w(B)}this.reset();return B};A.prototype.reset=function(){this._buff="";this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};A.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}};A.prototype.setState=function(B){this._buff=B.buff;this._length=B.length;this._hash=B.hash;return this};A.prototype.destroy=function(){delete this._hash;delete this._buff;delete this._length};A.prototype._finish=function(C,G){var E=G,D,F,B;C[E>>2]|=128<<(E%4<<3);if(E>55){t(this._hash,C);for(E=0;E<16;E+=1){C[E]=0}}D=this._length*8;D=D.toString(16).match(/(.*?)(.{0,8})$/);F=parseInt(D[2],16);B=parseInt(D[1],16)||0;C[14]=F;C[15]=B;t(this._hash,C)};A.hash=function(C,B){return A.hashBinary(c(C),B)};A.hashBinary=function(D,C){var E=p(D),B=j(E);return C?w(B):B};A.ArrayBuffer=function(){this.reset()};A.ArrayBuffer.prototype.append=function(B){var E=v(this._buff.buffer,B,true),D=E.length,C;this._length+=B.byteLength;for(C=64;C<=D;C+=64){t(this._hash,u(E.subarray(C-64,C)))}this._buff=C-64<D?new Uint8Array(E.buffer.slice(C-64)):new Uint8Array(0);return this};A.ArrayBuffer.prototype.end=function(D){var G=this._buff,F=G.length,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E,B;for(E=0;E<F;E+=1){C[E>>2]|=G[E]<<(E%4<<3)}this._finish(C,F);B=j(this._hash);if(D){B=w(B)}this.reset();return B};A.ArrayBuffer.prototype.reset=function(){this._buff=new Uint8Array(0);this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};A.ArrayBuffer.prototype.getState=function(){var B=A.prototype.getState.call(this);B.buff=q(B.buff);return B};A.ArrayBuffer.prototype.setState=function(B){B.buff=m(B.buff,true);return A.prototype.setState.call(this,B)};A.ArrayBuffer.prototype.destroy=A.prototype.destroy;A.ArrayBuffer.prototype._finish=A.prototype._finish;A.ArrayBuffer.hash=function(B,D){var E=z(new Uint8Array(B)),C=j(E);return D?w(C):C};o.SparkMD5=A});Dynamsoft.Ready(function(e,b){var a=Dynamsoft;if(!e.product.bHTML5Edition){return}var g=e.html5.Funs,d=g.DEF;function f(h){var i=h;d(i,"width",{get:function(){return this._parent._width},set:function(j){this.SetSize(j,false)}});d(i,"height",{get:function(){return this._parent._height},set:function(j){this.SetSize(false,j)}})}function c(j,i,m){var o=j,l=false,n=false,k;if(!o._isBindViewer()){return false}if(e.isString(i)){if(i.length>0){if(i.charAt(i.length-1)==="%"){l=i}}}if(!l&&i){k=parseInt(i);if(k){l=k+"px"}}if(e.isString(m)){if(m.length>0){if(m.charAt(m.length-1)==="%"){n=m}}}if(!n&&m){k=parseInt(m);if(k){n=k+"px"}}if(l){o._width=l}if(n){o._height=n}return g.changeImageUISize(o,l,n)}e.html5.STwainStyle=function(i){var h=this;h._parent=i;f(h)};e.html5.STwainStyle.prototype.SetSize=function(i,j){c(this._parent,i,j)}});Dynamsoft.Ready(function(d,c){if(!d.product.bHTML5Edition){return}function b(){}var a=239514000;b.prototype.convertServerIdToGuid=function(f){var g=this,e;e=1*f+a;return e};b.prototype.convertGuidToServerId=function(f){var g=this,e;e=1*f-a;return e};d.Index=d.Index||{};d.Index.ImageIndexManager=b});Dynamsoft.Ready(function(a,g){var b=Dynamsoft;if(!a.product.bHTML5Edition){return}var i=a.html5.Funs,e=Dynamsoft.dcp,f=!1,d=!0;a.html5.STwain=function(j){var k=this,l=j||{},n=l.bNoViewer,m=l.bLocalService;k._destroy=false;k.config=l;k.clientId=i.getRandom();k._id=l.id;if(l.container){k._containerElement=l.container}else{if(l.containerID){k._containerElement=a.get(l.containerID)}}k._bBindViewer=n?f:d;k._customIP=f;k._ssl=a.detect.ssl;if(l.customIP){k._customIP=d;k._host=l.host}else{k._host=a.product.host}if(k._host==""||a.isLocalIP(k._host)){k._bLocalService=m?d:f;k._bRemoteMode=f}else{k._bLocalService=d;k._bRemoteMode=d}if(l.customIP||e.bEnhancedMode){k._port=l.port}k.bReady=f;k.httpFormFields={};k._objWS=null;k.__wsRetry=0;k.curCommand=[];k.__OnInternetTransferPercentage=l.onInternetTransferPercentage||"";k.__OnInternetTransferPercentageEx=l.onInternetTransferPercentageEx||"";k.__OnReady=l.onReady||null;k.__OnWSReconnect=l.onWSReconnect||null;k.__OnWSClose=l.onWSClose||null;k.__OnWSMessage=l.onWSMessage||null;k.__OnWSError=l.onWSError||null;k.__OnPercentDone=l.onPercentDone||"";k.__OnPrintMsg=l.onPrintMsg||"";k.__OnResult=l.onResult||"";k.HTTPPassword=l.HTTPPassword||"";k.HTTPPort=l.HTTPPort||(a.detect.ssl?443:80);k.HTTPUserName=l.HTTPUserName||"";k.__HTTPPostResponseString="";k.__strHttpContentTypeFieldValue="application/octet-stream";k.__IfShowProgressBar=d;k.__IfShowCancelDialogWhenImageTransfer=d;k._errorCode=0;k._errorString="";k.__bLoadingImage=f;k.__bAcquireImageNow=f;k.__bOpenFileNow=f;k.__backgroundColor=f;k.__addon={};k.__remoteFilename="RemoteFile";k.__sourceName=[];k.__defaultSourceName="";k.__sourceCount=0;k.__icaSourceCount=-1;k.__serverId="";k.__bConnecting=f;k.__bTrial=f;k.__licenseInfo=f;k.__httpHeaderMap=f;k.__bForceClose=f;if(k._bLocalService){k.__strProductName=""}else{k.__strProductName=Dynamsoft.WebTwainEnv.ProductName}k.__versionInfo=Dynamsoft.WebTwainEnv.JSVersion;k.__bMustUpgradeService=f;k.__withCredentials=f;k._moduleSize=1024*1024;if(Dynamsoft.dcp.b64bit){k._segementUploadThreshold=4*1024*1024*1024}else{k._segementUploadThreshold=500*1024*1024}k._driverType=EnumDWT_Driver.TWAIN;k.__IfAppendImage=d;k.__maxImagesInBuffer=32767;k.__maxUploadImageSize=-1;k.__insertingIndex=-1;k.objImageIndexManager=new a.Index.ImageIndexManager(k.__maxImagesInBuffer);k._bServerPercentDone=d;k._aryBitmapCache=[];k._aryTiffTag=[];k._tiffCompressionType=Dynamsoft.EnumDWT_TIFFCompressionType.TIFF_AUTO;k._jpgQuality=80;k._pdfConvertMode=3;k._pdfRealConvertMode=3;k._pdfResolution=200;k._pdfPassword="";k._ifSSL=Dynamsoft.navInfoSync.bSSL;k._bRegistedLoad=false;k._logLevel=0;k._scaleDownThreshold=0;k._pdfWriteSetting={};k.__serverPlatform=Dynamsoft.EnumDWT_PlatformType.enumUnknown;k.bPageFocus=true;k.bServerAlwaysFocusOnPopupWindow=true;h(k,l)};var c=a.html5.STwain.prototype;c.getInstance=function(){return this};c._isMobileMode=function(){if(this._host==""||a.isLocalIP(this._host)){return !this._bLocalService}return false};c._isPC=function(){var j=Dynamsoft.navInfo;return j.bWin||j.bMac||j.bLinux};c._resetErr=function(){this._errorCode=0;this._errorString=""};c._isValid=function(){if(this._destroy){a.Errors.Destroyed(this);return false}return true};c._isBindViewer=function(){return this._bBindViewer};c._isNoViewer=function(){return !this._bBindViewer};c._mobileNotSupport=function(l,j){var k=this;a.Errors.MobileNotSupport(k,l);if(a.isFunction(j)){j(k.ErrorCode,k.ErrorString)}return false};c._mobileNotSupportAsync=function(k){var j=this;a.Errors.MobileNotSupport(j,k);return a.Promise.reject({code:j.ErrorCode,message:j.ErrorString})};c._nouiNotSupport=function(l,j){var k=this;a.Errors.CannotCallUIMethodWhenNotBindDefaultViewer(k,l);if(a.isFunction(j)){j(k.ErrorCode,k.ErrorString)}return false};c._OnRecieveMsg=function(o){var q=this,j;if(o.event){i.handleEvent(q,o);return}if(o.cmdId){var m=q.curCommand.length,n,l=-1;for(n=m-1;n>=0;n--){if(q.curCommand[n].cmdId==o.cmdId){l=n;j=q.curCommand.splice(l,1)[0];break}}if(l<0){return}}else{j=q.curCommand.pop()||{}}if(o.exception!==undefined&&o.description!==undefined){q._errorCode=o.exception;q._errorString=o.description}else{if(o.method!="StartScan"&&o.method!="GetAddOnVersion"){q._errorCode=0;q._errorString=""}}if(o.method=="ReadBarcode"||o.method=="OCRRecognize"||(o.request&&o.request.method=="OCRProRecognize")){if(j.sFun){j.sFun(o)}return}else{if(o.method=="ActiveUI"||o.method=="VersionInfo"||o.method=="ConvertToBase64"||o.method=="SaveSelectedImagesToBase64Binary"||o.method=="ConvertToBlob"){if(j.sFun&&o.result.length>0){j.sFun(o.result);return}}else{if(o.method=="ShowFileDialog"||o.method=="SplitTiff"||o.method=="SplitPDF"||o.method=="EncodeAsBase64"){if(j.sFun){j.sFun(o.result);return}}else{if(o.method=="SetCapabilities"){if("exception" in o&&o.exception!="0"){if(o.result.errorCode&&o.result.errorString){q._errorCode=o.result.errorCode;q._errorString=o.result.errorString}else{q._errorCode=o.exception;q._errorString=o.description}if(j.fFun){j.fFun(o.result)}o=null;return}else{if(j.sFun){j.sFun(o.result)}o=null;return}}}}}if(o.result&&o.result.length&&o.result[0]=="1"){if(j.sFun){j.sFun()}}else{if(o.exception){var p=false;if(j.fFun){p=j.fFun(q._errorString)}if(!p&&o.exception&&o.exception<0&&o.exception!=-2115){if(a.isFunction(q.__OnPrintMsg)){q.__OnPrintMsg(q._errorString)}}}else{if(o.method=="LoadImage"||o.method=="LoadImageEx"||o.method=="LoadImageFromBytes"||o.method=="LoadImageFromBase64Binary"||o.method=="LoadDibFromClipboard"||o.method=="FTPDownload"||o.method=="FTPDownloadEx"){if(j.sFun){j.sFun(o.result)}o=null;return}var k=["result:"];if(j.fFun){j.fFun(i.__pushElement(k,o.result))}}}};c._OnReady=function(r){var q=this,k;a.detect.starting=false;a.detect.bOK=true;q.bReady=true;q.__wsRetry=0;if(q._bLocalService&&Dynamsoft.WebTwainEnv.IfUseWSPool){k=q._objWS;if(k===null){return}k.onopen=null;q.httpUrl=a.getHttpUrl({host:q._host,ssl:q._ssl,port:q._port});k.onmessage=function(v){var w=v.data,o,t;if(typeof(w)==="object"){w=null;v=null;return}var s=w.replace(/\0/g,"");try{s=a.parse(s)}catch(u){a.log(w)}if(s.id){a._deliverMsg(k.url,s);return}s=null};k.onclose=k.onerror=function(o){if(!a.page.bUnload&&!a.detect.starting){setTimeout(a._reconnectWSPool,500);a.detect.starting=true}if(o){a.log("websocket error: "+o)}i.hideMask(true);a.detect.bOK=false};if(r){q._innerActiveUI(function(s){var u=q.__serverId,o,v,t;if(s&&s.length>=6){o=s[1];v=s[2];t=s[5];q.__strProductName=v;if(a.isString(t)){if(t=="win"){q.__serverPlatform=Dynamsoft.EnumDWT_PlatformType.enumWindow}else{if(t=="linux"){q.__serverPlatform=Dynamsoft.EnumDWT_PlatformType.enumLinux}else{if(t=="mac"){q.__serverPlatform=Dynamsoft.EnumDWT_PlatformType.enumMac}}}}}else{if(s&&s.length>=3){o=s[1];v=s[2];q.__strProductName=v}else{if(s&&s.length>=2){o=s[1]}else{a.log("ActiveUI return parameters error.")}}}if(v){v=v.toLowerCase()}q.__serverId=o;a.closeProgress("Reconnect");q.SetProductKeyAsync(Dynamsoft.WebTwainEnv.ProductKey);if(u!=o){a.Errors.Server_Restarted(q);if(q._ImgManager){q._ImgManager.clear();q._ImgManager.OnReady()}}else{if(q._ImgManager){q._innerFunRawV2("HowManyImagesInBuffer").then(function(w){if(w&&w.result&&w.result[0]==0){q._ImgManager.clear()}q._ImgManager.OnReady();q._resetErr()})}}});return}if(a.isLocalIP(q._host)){a.LS.item("DWT_port",q._port);a.LS.item("DWT_ssl",q._ssl?"true":"false")}}else{if(q._bLocalService&&!Dynamsoft.WebTwainEnv.IfUseWSPool){var j,p;k=q._objWS;if(q._customIP){p={host:q._host,ssl:q._ssl,port:q._port}}else{p=a.detect.urls[a.detect.cUrlIndex];p.host=a.product.host}j=a.getHttpUrl(p);if(k===null){return}k.onopen=null;q.httpUrl=j;k.onmessage=function(w){var x=w.data,o,t;if(typeof(x)==="object"){x=null;w=null;return}if(q.__OnWSMessage){q.__OnWSMessage(x)}var s=x.replace(/\0/g,"");if(s.indexOf("Exception:")>=0||s.indexOf("Error")==0){var v=x;o=q.curCommand.pop()||{};t=false;a.log(v+"@"+o.cmd);if(o.fFun){t=o.fFun(v)}if(!t&&a.isFunction(q.__OnPrintMsg)){q.__OnPrintMsg(v)}return}try{s=a.parse(s)}catch(u){a.log(x)}q._OnRecieveMsg(s);s=null};k.onclose=function(){q.bReady=false;q.__wsRetry=0;a.Errors.Server_Invalid(q);if(!q.__bForceClose&&!a.page.bUnload&&!a.detect.starting){setTimeout(function(){a._checkAndReconnect(q._host,q._port)},500);a.detect.starting=true}if(q.__OnWSClose){q.__OnWSClose()}i.hideMask(true);a.detect.bOK=false;q.__bForceClose=false};k.onerror=function(o){q.bReady=false;q.__wsRetry=0;a.Errors.Server_Invalid(q);a.detect.bOK=false;if(!a.page.bUnload&&!a.detect.starting){setTimeout(function(){a._checkAndReconnect(q._host,q._port)},500);a.detect.starting=true}if(o){a.log("websocket error: "+o)}if(q.__OnWSError){q.__OnWSError()}i.hideMask(true)};if(r){q._innerActiveUI(function(t){var v=q.__serverId,o,w,u;if(t&&t.length>=6){o=t[1];w=t[2];u=t[5];q.__strProductName=w;if(a.isString(u)){if(u=="win"){q.__serverPlatform=Dynamsoft.EnumDWT_PlatformType.enumWindow}else{if(u=="linux"){q.__serverPlatform=Dynamsoft.EnumDWT_PlatformType.enumLinux}else{if(u=="mac"){q.__serverPlatform=Dynamsoft.EnumDWT_PlatformType.enumMac}}}}}else{if(t&&t.length>=3){o=t[1];w=t[2];q.__strProductName=w}else{if(t&&t.length>=2){o=t[1]}else{a.log("ActiveUI return parameters error.")}}}if(w){w=w.toLowerCase()}q.__serverId=o;a.closeProgress("Reconnect");q.SetProductKeyAsync(Dynamsoft.WebTwainEnv.ProductKey);if(v!=o){a.Errors.Server_Restarted(q);if(q._ImgManager){q._ImgManager.clear();q._ImgManager.OnReady()}if(a.isFunction(q.__OnWSReconnect)){var s;s=a.getWSUrl(q._host,q._port,q._ssl);q.__OnWSReconnect(s,j)}}else{if(q._ImgManager){q._innerFunRawV2("HowManyImagesInBuffer").then(function(x){if(x&&x.result&&x.result[0]==0){q._ImgManager.clear()}q._ImgManager.OnReady();q._resetErr()})}}});return}if(a.isLocalIP(q._host)){a.LS.item("DWT_port",p.port);a.LS.item("DWT_ssl",p.ssl?"true":"false")}}}a.attachProperty(q);a.html5.ui.init(q,q.config);a.html5.ui.addMethods(q);a.attachPropertyUI(q);q._ImgManager.OnReady();if(q._bLocalService){q._innerActiveUI(function(u){var s,y,v,x=false;if(u&&u.length>=6){s=u[1];y=u[2];v=u[5];q.__strProductName=y;if(a.isString(v)){if(v=="win"){q.__serverPlatform=Dynamsoft.EnumDWT_PlatformType.enumWindow}else{if(v=="linux"){q.__serverPlatform=Dynamsoft.EnumDWT_PlatformType.enumLinux}else{if(v=="mac"){q.__serverPlatform=Dynamsoft.EnumDWT_PlatformType.enumMac}}}}}else{if(u&&u.length>=3){s=u[1];y=u[2];q.__strProductName=y}else{if(u&&u.length>=2){s=u[1];x=true}else{x=true;a.log("ActiveUI return parameters error.")}}}a.attachAddon(q);if(y){y=y.toLowerCase()}q.__serverId=s;q.__bMustUpgradeService=x;if(!x){var o=true;a.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_SetLicenseForDWT);var t,w=Dynamsoft.WebTwainEnv.ProductKey;if(w==""||w=="******"){t=a.Promise.resolve(0)}else{t=q.SetProductKeyAsync(w)}t=t.then(function(){a.closeLoadingMsg();if(a.isFunction(q.__OnReady)){q.__OnReady(q)}if(a.License.checkProductKey(q,{Core:true})||a.License.checkProductKey(q,{Webcam:true},true)){return q._setConvertModeAsync(q._pdfConvertMode)["catch"](function(){})}else{a.License.checkProductKey(q,{Core:true},false,true)}},function(){a.closeLoadingMsg();if(a.License.checkProductKey(q,{Core:true})||a.License.checkProductKey(q,{Webcam:true},true)){}else{a.License.checkProductKey(q,{Core:true},false,true)}})}else{if(a.isFunction(q.__OnReady)){q.__OnReady(q)}}})}else{var l=true;a.attachAddon(q);q.__serverId=1;q.__bMustUpgradeService=false;a.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_SetLicenseForDWT);var m,n=Dynamsoft.WebTwainEnv.ProductKey;if(n==""||n=="******"){m=a.Promise.resolve(0)}else{m=q.SetProductKeyAsync(n)}m.then(function(){a.closeLoadingMsg();if(q.ErrorCode<0){a.License.promptLicenseErr(q);return}if(a.isFunction(q.__OnReady)){q.__OnReady(q)}if(a.License.checkProductKey(q,{Core:true})||a.License.checkProductKey(q,{Webcam:true},true)){if(a.License.checkProductKey(q,{Core:true,Wasm:true},true,true)){if(Dynamsoft.WasmEnv){Dynamsoft.WasmEnv.setLoglevel(q._logLevel)}q._setConvertMode(q._pdfConvertMode)}}else{a.License.checkProductKey(q,{Core:true},false,true)}},function(s){a.closeLoadingMsg();q.errorCode=s.code;q.errorString=s.message;var o=['<div style="padding:30px;border:1px solid #CCCCCC;background:#FFFFFF">',s.message,"</div>"];a.ShowLicenseDialog(o.join(""),{width:390,height:0,bClose:false,seconds:100})})}};c.__unload=function(){var k=this,j;if(k._ImgManager){k._ImgManager.clear()}if(k.bReady){j=k._objWS;if(j){k.__bForceClose=true;if(Dynamsoft.WebTwainEnv.IfUseWSPool){a._removeFromWSPool(k)}else{j.close()}k.curCommand.splice(0);delete k._objWS}k.bReady=false}if(k.__addon){if(k.__addon.Camera&&k.__addon.Camera.getStatus()!=""){k.__addon.Camera.closeSource()["catch"](function(){})}}if(k._isBindViewer()){a.html5.ui.unLoad(k)}k._destroy=true};function h(k,l){var j=l||{};k.__OnAfterOperate=j.onAfterOperate||"";k.__OnBeforeOperate=j.onBeforeOperate||"";k.__OnOperateStatus=j.onOperateStatus||"";k.__OnBitmapChanged=j.onBitmapChanged||"";k.__OnGetFilePath=j.onGetFilePath||"";k.__OnPreAllTransfers=j.onPreAllTransfers||"";k.__OnPreTransfer=j.onPreTransfer||"";k.__OnPostLoad=j.onPostLoad||"";k.__OnPostTransfer=j.onPostTransfer||"";k.__OnPostAllTransfers=j.onPostAllTransfers||"";k.__OnSourceUIClose=j.onSourceUIClose||"";k.__OnTransferCancelled=j.onTransferCancelled||"";k.__OnTransferError=j.onTransferError||"";k.__OnInternetTransferPercentage=j.onInternetTransferPercentage||"";k.__OnInternetTransferPercentageEx=j.onInternetTransferPercentageEx||"";k.__OnRemoteScanStatusAsync=j.onRemoteScanStatusAsync||""}});Dynamsoft.Ready(function(a,D){var v=Dynamsoft;if(!a.product.bHTML5Edition){return}var A=Dynamsoft.WebTwainEnv,B=Dynamsoft.navInfo,C=a.each,b=a.html5.STwain,H=b.prototype;var E={Auto:0,G3:1,G4:2,LZW:3,ZIP:4,JPEG:5};a.MobileFuns={makeParams:function(){return arguments},_innerSaveLocal:function(K,L,O){var M=window,N=Dynamsoft.navInfo,R=M.requestFileSystem||M.webkitRequestFileSystem||M.mozRequestFileSystem;if((N.biPad||N.biPhone)&&!R){if(N.bSafari&&parseFloat(N.strBrowserVersion)<13||!N.bSafari){var P=window.open(K,"","",false);setTimeout(function(){P.document.title=L},100);return true}}var S=document.createElementNS("http://www.w3.org/1999/xhtml","a");S.href=K;S.download=L;S.target="_blank";document.body.appendChild(S);if(N.bEdge){S.click()}else{var Q=document.createEvent("MouseEvents");Q.initMouseEvent("click",true,false);S.dispatchEvent(Q)}document.body.removeChild(S);return true},saveLocal:function(K,M,L){if(a.isString(K)&&(K.indexOf("blob:http://")>-1)){a.MobileFuns._innerSaveLocal(K,M,L)}else{if(K instanceof Blob){a.MobileFuns._innerSaveLocal(URL.createObjectURL(K),M,L)}else{if(K instanceof ArrayBuffer){a.MobileFuns._innerSaveLocal(URL.createObjectURL(new Blob([K])),M,L)}else{a.MobileFuns._innerSaveLocal(K,M,L)}}}},dataURLtoBlob:function(M){var K=M.split(","),O=K[0].match(/:(.*?);/)[1],L,Q,N;try{L=atob(K[1])}catch(P){L="";return false}Q=L.length;N=new Uint8Array(Q);while(Q--){N[Q]=L.charCodeAt(Q)}return new Blob([N],{type:O})},appendTiffPage:function(M,R,S,K){var P=M,O=R,N=S.context.bShowPercentProgress,Q=P._aryTiffTag.length;if(Q>0){S.context.tagIndex=0;if(Q>32){Q=32}for(var L=0;L<Q;L++){O=O.then(function(V){var T=S.context.tagIndex;var U=P._aryTiffTag[T];return S.addTag(U.tag,U.content,U.isBinary)});O=O.then(function(){var T=S.context.tagIndex;S.context.tagIndex=T+1})}}O=O.then(function(){var T=S.context.aryIndex;var U=S.context.cIndex;S.context.revokeUrl=false;return P._ImgManager.getWebViewer().GetImageData(P._ImgManager.getUidByIndex(T[U]))});if(P._scaleDownThreshold<=0){}else{O=O.then(function(U){var T=U&&U.metadata?U.metadata:{};return Dynamsoft.ImageProcWrapper.resize(U.oriData,T.width,T.height,P._scaleDownThreshold)});O=O.then(function(T){S.context.revokeUrl=T.imageData;return{oriData:T.imageData}})}O=O.then(function(V){var U=Dynamsoft.EnumDWT_ImageType.IT_ALL,T=S.context.tiffFormat;return S.appendImage(V.oriData,U,T,P._jpgQuality)});O=O.then(function(T){if(S.context.revokeUrl){a.MobileFuns.revoke(S.context.revokeUrl)}S.context.revokeUrl=false;return T});if(N){O=O.then(function(){var U=S.context.aryIndex;var X=U.length;var W=S.context.cIndex;var V=(W+1);var T=(100*V)/(1*X);P._OnPercentDone([0,T,V+"/"+X,""])})}O=O.then(function(){var T=S.context.cIndex;S.context.cIndex=(T+1);return(T+1)});return O},isPDF:function(L){var K=L;if(L instanceof ArrayBuffer){K=new Uint8Array(L.slice(0,4))}if(K instanceof Uint8Array){if(K[0]==37&&K[1]==80&&K[2]==68&&K[3]==70){return true}}return false},isTIFF:function(L){var K=L;if(L instanceof ArrayBuffer){K=new Uint8Array(L.slice(0,4))}if(K instanceof Uint8Array){if(K[0]==73&&K[1]==73&&K[2]==42&&K[3]==0||K[0]==77&&K[1]==77&&K[2]==0&&K[3]==42){return true}}return false},isJP2:function(L){var K=L;if(L instanceof ArrayBuffer){K=new Uint8Array(L.slice(0,8))}if(K instanceof Uint8Array){if(K[0]==0&&K[1]==0&&K[2]==0&&K[3]==12&&K[4]==106&&K[5]==80&&K[6]==32&&K[7]==32||K[0]==255&&K[1]==79&&K[2]==255&&K[3]==81){return true}}return false},unloadWasm:function(){if(f){f.terminate();f=null}if(a.detect.wasmScriptLoaded&&Dynamsoft.WasmEnv){Dynamsoft.WasmEnv.wasmLoad=false;return Dynamsoft.WasmEnv.unload()}return a.Promise.resolve()},loadCallback:function(N){if(N&&N.customData){var U=N.customData,P=N.fPdfReader,Y=N.imgCore,K=U.src,T=U.imgType,Q=U.index,V=U.password,M=U.resolution,S=U.convertMode,L=false,R,O=Dynamsoft.EnumDWT_ImageType;if(T==O.IT_PDF){if(!P){P=l();L=true}R=function(Z){P.close();if(L){P.terminate()}};return P.open(K,V).then(function(Z){return P.readPage(Q,M,S,Dynamsoft.EnumDWT_ImageType.IT_JPG,false,false)},R).then(function(Z){P.close();if(L){P.terminate()}return Z.imageData},R)}else{if(T==O.IT_TIF){if(!Y){Y=o();L=true}var X=0;R=function(Z){if(L){Y.terminate()}};return Y.openTiff(K).then(function(Z){return Y.readTiff(Q,Dynamsoft.EnumDWT_ImageType.IT_JPG,false)}).then(function(Z){if(L){Y.terminate()}return Z.imageData},R)}else{if(T==O.IT_PNG||T==O.IT_JPG||T==O.IT_BMP){if(!Y){Y=o()}L=true;var W=U.quality;R=function(Z){if(L){Y.terminate()}};return Y.readImage(K,Dynamsoft.EnumDWT_ImageType.IT_JPG,W,false).then(function(Z){if(L){Y.terminate()}return Z.imageData},R)}}}}else{}return a.Promise.resolve()},convertOutputType:function(K){return K},isBlobUrl:function(K){return a.isString(K)&&(K.indexOf("blob:http://")>-1)},revoke:function(K){if(a.MobileFuns.isBlobUrl(K)){return(window.URL||window.webkitURL).revokeObjectURL(K)}return true}};H._innerSendToMobile=function(P,N,L,K,M){var O=this;if(P=="GetLicenseInfo"){a.showMask();return w(O,N).then(function(Q){a.hideMask();if(a.isFunction(K)){K(Q)}},function(Q){a.hideMask();a.Errors.GetLicenseInfoFailed(O,Q);if(M){M(O._errorCode,O._errorString)}})}if(!a.License.checkProductKey(O,{Core:true,Wasm:true},true)){if(M){M(O._errorCode,O._errorString)}return false}if(P=="SaveImage"){i(O,N).then(function(R){var Q=R.blobUrl;if(K){K(Q,R.type)}setTimeout(function(){a.MobileFuns.revoke(Q)},1000)},function(){if(a.isFunction(M)){M(O._errorCode,O._errorString)}})}else{O._innerSendToMobileV2(P,N).then(K,function(){if(a.isFunction(M)){M(O._errorCode,O._errorString)}})}return true};H._innerSendToMobileV2=function(M,K){var L=this;if(M=="GetLicenseInfo"){return w(L,K)}if(!a.License.checkProductKey(L,{Core:true,Wasm:true},true)){return a.Promise.reject({code:L._errorCode,message:L._errorString})}if(M=="LoadImageFromBinary"){return n(L,K)}else{if(M=="RotateEx"){return g(L,K)}else{if(M=="Flip"){return x(L,K)}else{if(M=="Mirror"){return h(L,K)}else{if(M=="Invert"){return G(L,K)}else{if(M=="SaveImage"){return i(L,K)}else{if(M=="Crop"){return F(L,K)}else{if(M=="Erase"){return d(L,K)}else{if(M=="ChangeImageSize"){return m(L,K)}else{if(M=="GetSkewAngleOnly"){return e(L,K)}else{if(M=="GetSkewAngle"){return J(L,K)}else{if(M=="ConvertToGrayScale"){return z(L,K)}else{if(M=="ConvertToBWScale"){return k(L,K)}else{if(M=="SetDPI"){return c(L,K)}else{if(M=="SetImageWidth"){return r(L,K)}else{if(M=="IsTextBasedPDF"){return p(L,K)}else{if(M=="GetMD5"){return I(L,K)}}}}}}}}}}}}}}}}}return a.Promise.reject({code:-1000,message:"invalid method: "+M})};var y=0,f=null;var o=function(){return new Dynamsoft.Imagecore(A.ProductKey,1)},q=function(){return new Dynamsoft.ImageProc(A.ProductKey,1)},l=function(){return new Dynamsoft.PdfReader(A.ProductKey,1)},t=function(){return new Dynamsoft.PdfWriter(A.ProductKey,1)},u=function(){if(!f){f=new Dynamsoft.ImageProc(A.ProductKey,1)}return f},p=function(Q,L){var O=L[0],R,K,M,S,N=Dynamsoft.EnumDWT_ImageType;if(O instanceof FileList){R=O[0]}else{if(O instanceof Blob){R=O}else{if(O instanceof ArrayBuffer||O instanceof Uint8Array){R=new Blob([O]);if(a.MobileFuns.isPDF(O)){S=N.IT_PDF}else{if(a.MobileFuns.isTIFF(O)){S=N.IT_TIF}else{if(a.MobileFuns.isJP2(O)){S=N.IT_J2K}else{S=N.IT_PNG}}}}else{R=O}}}if(a.isUndefined(S)){if(R.type){if(R.type=="application/pdf"){S=N.IT_PDF}}else{S=a.html5.Funs.getImageType(R.name)}}if(S==N.IT_PDF){var P=l();a.showMask();return P.open(R,Q._pdfPassword).then(function(T){a.hideMask();P.close();P.terminate();return T.isTextBased},function(T){a.hideMask();a.Errors.LoadImageFailed(Q,T);P.close();P.terminate();throw {code:Q._errorCode,message:Q._errorString}})}else{a.Errors.LoadImageFailed(Q,"not pdf.");return a.Promise.reject({code:Q._errorCode,message:Q._errorString})}},n=function(S,M){var Q=M[0],T,K,N,X,W=false,O=0,P=Dynamsoft.EnumDWT_ImageType;if(Q instanceof FileList){T=Q[0]}else{if(Q instanceof Blob){T=Q}else{if(Q instanceof ArrayBuffer||Q instanceof Uint8Array){T=new Blob([Q]);if(a.MobileFuns.isPDF(Q)){X=P.IT_PDF}else{if(a.MobileFuns.isTIFF(Q)){X=P.IT_TIF}else{if(a.MobileFuns.isJP2(Q)){X=P.IT_J2K}else{X=P.IT_PNG}}}}else{T=Q}}}if(a.isUndefined(T)){a.Errors.InvalidSourceFile(S);return a.Promise.reject({code:S._errorCode,message:S._errorString})}if(a.isUndefined(X)){if(T.type){if(T.type=="application/pdf"){X=P.IT_PDF}else{if(T.type=="image/png"){X=P.IT_PNG}else{if(T.type=="image/jpeg"){X=P.IT_JPG}else{if(T.type=="image/bmp"){X=P.IT_BMP}else{if(T.type=="image/tiff"){X=P.IT_TIF}else{if(T.type=="image/jp2"){X=P.IT_J2K}else{X=a.html5.Funs.getImageType(T.name)}}}}}}}else{X=a.html5.Funs.getImageType(T.name)}}K="";N=T.name;if(X==P.IT_JPG||X==P.IT_PNG||X==P.IT_BMP||X==P.IT_J2K){var V=S._jpgQuality;W=o();a.showMask();return W.readImage(T,P.IT_JPG,V,false).then(function(aa){var ad={src:aa.imageData,imgType:aa.imageType,dataType:"url"};if(aa){var ac={};ac.width=aa.imageWidth;ac.height=aa.imageHeight;ac.bitDepth=aa.imageBitDepth;ac.resolutionX=aa.imageXResolution;ac.resolutionY=aa.imageYResolution;ad.metadata=ac}y++;var ab=false;try{S._OnBitmapChanged(["10",""+y,1,S._ImgManager.getCurrentImageIndex(),S._ImgManager.count(),ad])}catch(Z){ab=true;a.Errors.SystemExceptionError(S,Z.message)}a.hideMask();if(!ab&&a.isFunction(S.__OnPostLoad)){try{S.__OnPostLoad(K,N,X)}catch(Y){ab=true;a.Errors.SystemExceptionError(S,Y.message)}}W.terminate();if(ab){throw {code:S._errorCode,message:S._errorString}}},function(Y){a.Errors.LoadImageFailed(S,Y);a.hideMask();W.terminate();throw {code:S._errorCode,message:S._errorString}})}else{if(X==P.IT_PDF){var R=l();R.context={};a.showProgress(S);S._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingPdf,""]);return R.open(T,S._pdfPassword).then(function(aa){var Z=aa.PdfCount;S._OnPercentDone([0,0,"0/"+Z,""]);var Y=a.Promise.resolve(0);R.context.cIndex=0;R.context.pdfCount=Z;for(O=0;O<Z;O++){Y=Y.then(function(){var ab=R.context.cIndex;return R.readPage(ab,S._pdfResolution,S._pdfRealConvertMode,Dynamsoft.EnumDWT_ImageType.IT_JPG,false,false)});Y=Y.then(function(ae){var af=R.context.cIndex,aj=R.context.pdfCount,ag=(af+1),ad=(100*ag)/(1*aj),ac={};S._OnPercentDone([0,ad,ag+"/"+aj,""]);if(a.isArray(ae.imageInfos)&&ae.imageInfos.length>0){var ah=ae.imageInfos[0];ac.width=ah.imageWidth;ac.height=ah.imageHeight;ac.bitDepth=ah.imageBitDepth;ac.resolutionX=ah.imageXResolution;ac.resolutionY=ah.imageYResolution}y++;var ab={src:ae.imageData,dataType:"url",imgType:Dynamsoft.EnumDWT_ImageType.IT_PDF,index:ae.pageIndex,metadata:ac,imageId:y};try{S._OnBitmapChanged(["10",""+y,1,S._ImgManager.getCurrentImageIndex(),S._ImgManager.count(),ab])}catch(ai){a.Errors.SystemExceptionError(S,ai.message);throw 0}R.context.cIndex=(af+1)})}return Y.then(function(){a.closeProgress();R.close();R.terminate();if(a.isFunction(S.__OnPostLoad)){S.__OnPostLoad(K,N,X)}},function(ab){a.closeProgress();R.close();R.terminate();if(ab){a.Errors.LoadImageFailed(S,ab)}throw {code:S._errorCode,message:S._errorString}})},function(Y){a.closeProgress();R.close();R.terminate();if(Y){a.Errors.LoadImageFailed(S,Y)}throw {code:S._errorCode,message:S._errorString}})}else{if(X==P.IT_TIF){var U=0;W=o();a.showProgress(S);S._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingTiff,""]);var L=W.openTiff(T);return L.then(function(Z){var Y=Z.pageCount,ac=Z.imageInfos;var ab=a.Promise.resolve(0);S._OnPercentDone([0,0,"0/"+Y,""]);for(var aa=0;aa<Y;aa++){ab=ab.then(function(ad){return W.readTiff(ad,Dynamsoft.EnumDWT_ImageType.IT_JPG,false).then(function(ag){var ah=(ad+1);var ae=(100*ah)/(1*Y);S._OnPercentDone([0,ae,ah+"/"+Y,""]);y++;var ai={src:ag.imageData,dataType:"url",imgType:Dynamsoft.EnumDWT_ImageType.IT_TIF,index:ad,metadata:ac[ad],imageId:y};try{S._OnBitmapChanged(["10",""+y,1,S._ImgManager.getCurrentImageIndex(),S._ImgManager.count(),ai])}catch(af){a.Errors.SystemExceptionError(S,af.message);throw 0}return(ad+1)})})}return ab.then(function(){a.closeProgress();W.closeTiff();W.terminate();if(a.isFunction(S.__OnPostLoad)){S.__OnPostLoad(K,N,X)}},function(ad){a.closeProgress();W.closeTiff();W.terminate();if(ad){a.Errors.LoadImageFailed(S,ad)}throw {code:S._errorCode,message:S._errorString}})},function(Y){a.closeProgress();W.closeTiff();W.terminate();a.Errors.LoadImageFailed(S,Y);throw {code:S._errorCode,message:S._errorString}})}else{a.Errors.LoadImageFailed(S,"invalid image type.");return a.Promise.reject({code:S._errorCode,message:S._errorString})}}}},s=function(S,M){var Q=M[0],T,K,N,X,W=false,O=0,P=Dynamsoft.EnumDWT_ImageType;if(Q instanceof FileList){T=Q[0]}else{if(Q instanceof Blob){T=Q}else{if(Q instanceof ArrayBuffer||Q instanceof Uint8Array){T=new Blob([Q]);if(a.MobileFuns.isPDF(Q)){X=P.IT_PDF}else{if(a.MobileFuns.isTIFF(Q)){X=P.IT_TIF}else{if(a.MobileFuns.isJP2(Q)){X=P.IT_J2K}else{X=P.IT_PNG}}}}else{T=Q}}}if(a.isUndefined(T)){a.Errors.InvalidSourceFile(S);return a.Promise.reject({code:S._errorCode,message:S._errorString})}if(a.isUndefined(X)){if(T.type){if(T.type=="application/pdf"){X=P.IT_PDF}else{if(T.type=="image/png"){X=P.IT_PNG}else{if(T.type=="image/jpeg"){X=P.IT_JPG}else{if(T.type=="image/bmp"){X=P.IT_BMP}else{if(T.type=="image/tiff"){X=P.IT_TIF}else{if(T.type=="image/jp2"){X=P.IT_J2K}else{X=a.html5.Funs.getImageType(T.name)}}}}}}}else{X=a.html5.Funs.getImageType(T.name)}}K="";N=T.name;S._registLoadCallback(a.MobileFuns.loadCallback);if(X==P.IT_JPG||X==P.IT_PNG||X==P.IT_BMP||X==P.IT_J2K){var V=S._jpgQuality;W=o();a.showMask();return W.readImageInfo(T).then(function(aa){var ab={src:T,srcId:Date.now(),dataType:"bin",imgType:X,quality:V,metadata:aa};y++;var Z=false;try{S._OnBitmapChanged(["10",""+y,1,S._ImgManager.getCurrentImageIndex(),S._ImgManager.count(),ab])}catch(Y){Z=true;a.Errors.SystemExceptionError(S,Y.message)}a.hideMask();if(a.isFunction(S.__OnPostLoad)){S.__OnPostLoad(K,N,X)}W.terminate();if(Z){throw {code:S._errorCode,message:S._errorString}}},function(Y){a.Errors.LoadImageFailed(S,Y);a.hideMask();W.terminate();throw {code:S._errorCode,message:S._errorString}})}else{if(X==P.IT_PDF){var R=l();R.context={};a.showProgress(S);S._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingPdf,""]);return R.open(T,S._pdfPassword).then(function(ab){var aa=ab.PdfCount;S._OnPercentDone([0,0,"0/"+aa,""]);var Z={index:0,aryUpdateImageData:[],pdfCount:aa},Y=a.Promise.resolve(Z);for(O=0;O<aa;O++){Y=Y.then(function(ac){return R.readPage(ac.index,S._pdfResolution,S._pdfRealConvertMode,Dynamsoft.EnumDWT_ImageType.IT_JPG,true,false).then(function(af){var ag=(ac.index+1),ae=ac.PdfCount,ad=(100*ag)/(1*ae),ah={};S._OnPercentDone([0,ad,ag+"/"+ae,""]);if(a.isArray(af.imageInfos)&&af.imageInfos.length>0){var ai=af.imageInfos[0];ah.width=ai.imageWidth;ah.height=ai.imageHeight;ah.bitDepth=ai.imageBitDepth;ah.resolutionX=ai.imageXResolution;ah.resolutionY=ai.imageYResolution}y++;ac.index=ac.index+1;ac.aryUpdateImageData.push({src:T,srcId:Date.now(),dataType:"bin",imgType:Dynamsoft.EnumDWT_ImageType.IT_PDF,index:af.pageIndex,password:S._pdfPassword,quality:V,metadata:ah,resolution:S._pdfResolution,convertMode:S._pdfRealConvertMode,outPutType:af.imageType,imageId:y});return ac})})}Y=Y.then(function(ac){R.close();R.context.closed=true;R.terminate();ac.index=0;return ac});for(O=0;O<aa;O++){Y=Y.then(function(ae){var ad=ae.aryUpdateImageData[ae.index];try{S._OnBitmapChanged(["10",""+ad.imageId,1,S._ImgManager.getCurrentImageIndex(),S._ImgManager.count(),ad])}catch(ac){a.Errors.SystemExceptionError(S,ac.message);throw 0}ae.index=ae.index+1;return ae})}return Y.then(function(){if(a.isFunction(S.__OnPostLoad)){S.__OnPostLoad(K,N,X)}a.closeProgress()},function(ac){if(ac){a.Errors.LoadImageFailed(S,ac)}a.closeProgress();if(!R.context.closed){R.close();R.terminate()}throw {code:S._errorCode,message:S._errorString}})},function(Y){a.Errors.LoadImageFailed(S,Y);a.closeProgress();if(!R.context.closed){R.close();R.terminate()}throw {code:S._errorCode,message:S._errorString}})}else{if(X==P.IT_TIF){var U=0;W=o();W.context={};a.showProgress(S);S._OnPercentDone([0,-1,Dynamsoft.MSG.LoadingTiff,""]);var L=W.openTiff(T);return L.then(function(Z){var Y=Z.pageCount,ab=Z.imageInfos;var aa=a.Promise.resolve({index:0,aryUpdateImageData:[]});S._OnPercentDone([0,0,"0/"+Y,""]);for(O=0;O<Y;O++){aa=aa.then(function(ad){var ae=(ad.index+1);var ac=(100*ae)/(1*Y);S._OnPercentDone([0,ac,ae+"/"+Y,""]);y++;ad.aryUpdateImageData.push({src:T,srcId:Date.now(),dataType:"bin",imgType:Dynamsoft.EnumDWT_ImageType.IT_TIF,index:ad.index,metadata:ab[ad.index],imageId:y});ad.index=ad.index+1;return ad})}aa=aa.then(function(ac){W.closeTiff();W.context.closed=true;W.terminate();ac.index=0;return ac});for(O=0;O<Y;O++){aa=aa.then(function(ae){var ad=ae.aryUpdateImageData[ae.index];try{S._OnBitmapChanged(["10",""+ad.imageId,1,S._ImgManager.getCurrentImageIndex(),S._ImgManager.count(),ad])}catch(ac){a.Errors.SystemExceptionError(S,ac.message);throw 0}ae.index=ae.index+1;return ae})}return aa.then(function(){if(a.isFunction(S.__OnPostLoad)){S.__OnPostLoad(K,N,X)}a.closeProgress()},function(ac){if(ac){a.Errors.LoadImageFailed(S,ac)}a.closeProgress();if(!W.context.closed){W.closeTiff();W.context.closed=true;W.terminate()}throw {code:S._errorCode,message:S._errorString}})},function(Y){a.Errors.LoadImageFailed(S,Y);a.closeProgress();if(!W.context.closed){W.closeTiff();W.context.closed=true;W.terminate()}throw {code:S._errorCode,message:S._errorString}})}else{a.Errors.LoadImageFailed(S,"invalid image type.");return a.Promise.reject({code:S._errorCode,message:S._errorString})}}}},g=function(Q,O){var R=O[0],P=O[1],N=O[2],S=O[3],K=O[4];if(a.isUndefined(P)){P=0}if(a.isUndefined(N)){N=true}if(a.isUndefined(S)||S<1||S>3){S=3}if(a.isUndefined(K)){K="FFFFFF"}while(P<0){P+=360}a.showMask();var M=q(),L=Q._ImgManager.convertClientIndexToServerId(R);M.context={};return Q._ImgManager.getWebViewer().GetImageData(Q._ImgManager.getUidByIndex(R)).then(function(T){M.context.metadata=T&&T.metadata?T.metadata:{};return M.initImage(T.oriData)}).then(function(){return M.rotate(P,K,N,S)}).then(function(){return M.getImage()}).then(function(U){if("width" in U){U.imageWidth=U.imageWidth}if("height" in U){U.imageHeight=U.imageHeight}var W={src:U.imageData,imgType:a.MobileFuns.convertOutputType(U.imageType),dataType:"url",metadata:{width:U.imageWidth,height:U.imageHeight}};var V=false;try{Q._OnBitmapChanged(["10",""+L,4,Q._ImgManager.getCurrentImageIndex(),Q._ImgManager.count(),W])}catch(T){V=true;a.Errors.SystemExceptionError(Q,T.message)}a.hideMask();M.terminate();if(V){throw {code:Q._errorCode,message:Q._errorString}}},function(T){a.Errors.RotateFailed(Q,T);a.hideMask();M.terminate();throw {code:Q._errorCode,message:Q._errorString}})},j=function(O,K,N){var M=q(),L=O._ImgManager.convertClientIndexToServerId(K);M.context={};a.showMask();return O._ImgManager.getWebViewer().GetImageData(O._ImgManager.getUidByIndex(K)).then(function(P){M.context.metadata=P&&P.metadata?P.metadata:{};return M.initImage(P.oriData)}).then(function(){return M.flip(N)}).then(function(){return M.getImage()}).then(function(Q){var R={src:Q.imageData,imgType:a.MobileFuns.convertOutputType(Q.imageType),dataType:"url"};try{O._OnBitmapChanged(["10",""+L,4,O._ImgManager.getCurrentImageIndex(),O._ImgManager.count(),R])}catch(P){a.Errors.SystemExceptionError(O,P.message);throw 0}}).then(function(){a.hideMask();M.terminate()},function(P){a.hideMask();if(P){if(N==-1){a.Errors.MirrorFailed(O,P)}else{a.Errors.FlipFailed(O,P)}}M.terminate();throw {code:O._errorCode,message:O._errorString}})},h=function(N,M){var K=M[0];var L=-1;return j(N,K,L)},x=function(N,M){var K=M[0];var L=1;return j(N,K,L)},G=function(O,N){var K=N[0];var M=q(),L=O._ImgManager.convertClientIndexToServerId(K);M.context={};a.showMask();return O._ImgManager.getWebViewer().GetImageData(O._ImgManager.getUidByIndex(K)).then(function(P){M.context.metadata=P&&P.metadata?P.metadata:{};return M.initImage(P.oriData)}).then(function(){return M.invert()}).then(function(){return M.getImage()}).then(function(Q){var R={src:Q.imageData,imgType:a.MobileFuns.convertOutputType(Q.imageType),dataType:"url"};try{O._OnBitmapChanged(["10",""+L,4,O._ImgManager.getCurrentImageIndex(),O._ImgManager.count(),R])}catch(P){a.Errors.SystemExceptionError(O,P.message);throw 0}}).then(function(){a.hideMask();M.terminate()},function(P){a.hideMask();if(P){a.Errors.InvertFailed(O,P)}M.terminate();throw {code:O._errorCode,message:O._errorString}})},F=function(P,O){var Q=O[0],M=O[1],R=O[2],S=O[3],K=O[4];if(!a.isNumber(M)||!a.isNumber(R)||!a.isNumber(S)||!a.isNumber(K)){a.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(P);return a.Promise.reject({code:P._errorCode,message:P._errorString})}var N=q(),L=P._ImgManager.convertClientIndexToServerId(Q);N.context={};a.showMask();return P._ImgManager.getWebViewer().GetImageData(P._ImgManager.getUidByIndex(Q)).then(function(T){N.context.metadata=T&&T.metadata?T.metadata:{};return N.initImage(T.oriData)}).then(function(){return N.crop(M,R,S,K)}).then(function(){return N.getImage()}).then(function(U){var V={src:U.imageData,imgType:a.MobileFuns.convertOutputType(U.imageType),dataType:"url",metadata:{imageData:U.imageData,width:U.imageWidth,height:U.imageHeight}};try{P._OnBitmapChanged(["10",""+L,4,P._ImgManager.getCurrentImageIndex(),P._ImgManager.count(),V])}catch(T){a.Errors.SystemExceptionError(P,T.message);throw 0}}).then(function(){a.hideMask();N.terminate()},function(T){a.hideMask();if(T){a.Errors.CropFailed(P,T)}N.terminate();throw {code:P._errorCode,message:P._errorString}})},d=function(Q,P){var R=P[0],O=P[1],S=P[2],T=P[3],K=P[4],L=P[5];if(!a.isNumber(O)||!a.isNumber(S)||!a.isNumber(T)||!a.isNumber(K)){a.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(Q);return a.Promise.reject({code:Q._errorCode,message:Q._errorString})}if(a.isUndefined(L)){L="FFFFFF"}var N=q(),M=Q._ImgManager.convertClientIndexToServerId(R);N.context={};a.showMask();return Q._ImgManager.getWebViewer().GetImageData(Q._ImgManager.getUidByIndex(R)).then(function(U){N.context.metadata=U&&U.metadata?U.metadata:{};return N.initImage(U.oriData)}).then(function(){return N.erase(O,S,T,K,L)}).then(function(){return N.getImage()}).then(function(V){var W={src:V.imageData,imgType:a.MobileFuns.convertOutputType(V.imageType),dataType:"url",metadata:{imageData:V.imageData,width:V.imageWidth,height:V.imageHeight}};try{Q._OnBitmapChanged(["10",""+M,4,Q._ImgManager.getCurrentImageIndex(),Q._ImgManager.count(),W])}catch(U){a.Errors.SystemExceptionError(Q,U.message);throw 0}}).then(function(){a.hideMask();N.terminate()},function(U){a.hideMask();if(U){a.Errors.EraseFailed(Q,U)}N.terminate();throw {code:Q._errorCode,message:Q._errorString}})},m=function(R,Q){var K=Q[0],O=Q[1],N=Q[2],P=Q[3];if(!a.isNumber(O)){a.Errors.MobileServer_InvalidWidth(R);return a.Promise.reject({code:R._errorCode,message:R._errorString})}if(!a.isNumber(N)){a.Errors.MobileServer_InvalidHeight(R);return a.Promise.reject({code:R._errorCode,message:R._errorString})}if(a.isUndefined(P)){P=5}var M=q(),L=R._ImgManager.convertClientIndexToServerId(K);M.context={};a.showMask();return R._ImgManager.getWebViewer().GetImageData(R._ImgManager.getUidByIndex(K)).then(function(S){M.context.metadata=S&&S.metadata?S.metadata:{};return M.initImage(S.oriData)}).then(function(){return M.resize(O,N,P)}).then(function(){return M.getImage()}).then(function(T){var U={src:T.imageData,imgType:a.MobileFuns.convertOutputType(T.imageType),dataType:"url",metadata:{imageData:T.imageData,width:T.imageWidth,height:T.imageHeight}};try{R._OnBitmapChanged(["10",""+L,4,R._ImgManager.getCurrentImageIndex(),R._ImgManager.count(),U])}catch(S){a.Errors.SystemExceptionError(R,S.message);throw 0}}).then(function(){a.hideMask();M.terminate()},function(S){a.hideMask();if(S){a.Errors.ChangeImageSizeFailed(R,S)}M.terminate();throw {code:R._errorCode,message:R._errorString}})},e=function(P,O){var K=O[0];var M=q(),L=P._ImgManager.convertClientIndexToServerId(K);M.context={};a.showMask();var N=P._ImgManager.getWebViewer().GetMinPageData();if(N){return M.initImage(N.data,true,N.width,N.height).then(function(){return M.getSkewAngle()}).then(function(Q){a.hideMask();delete M.context;M.terminate();return Q},function(Q){a.hideMask();a.Errors.SkewAngleFailed(P,Q);M.terminate();throw {code:P._errorCode,message:P._errorString}})}},J=function(O,N){var K=N[0];var M=q(),L=O._ImgManager.convertClientIndexToServerId(K);M.context={};a.showMask();return O._ImgManager.getWebViewer().GetImageData(O._ImgManager.getUidByIndex(K)).then(function(P){M.context.metadata=P&&P.metadata?P.metadata:{};return M.initImage(P.oriData)}).then(function(){return M.getSkewAngle()}).then(function(P){a.hideMask();delete M.context;M.terminate();return P},function(P){a.hideMask();a.Errors.SkewAngleFailed(O,P);M.terminate();throw {code:O._errorCode,message:O._errorString}})},z=function(O,N){var K=N[0];var M=q(),L=O._ImgManager.convertClientIndexToServerId(K);M.context={};a.showMask();return O._ImgManager.getWebViewer().GetImageData(O._ImgManager.getUidByIndex(K)).then(function(P){M.context.metadata=P&&P.metadata?P.metadata:{};return M.initImage(P.oriData)}).then(function(){return M.toGrayscale(0,25)}).then(function(){return M.getImage()}).then(function(Q){var R={src:Q.imageData,imgType:a.MobileFuns.convertOutputType(Q.imageType),dataType:"url",metadata:{imageData:Q.imageData,width:Q.imageWidth,height:Q.imageHeight,bitDepth:8}};try{O._OnBitmapChanged(["10",""+L,4,O._ImgManager.getCurrentImageIndex(),O._ImgManager.count(),R])}catch(P){a.Errors.SystemExceptionError(O,P.message);throw 0}}).then(function(){a.hideMask();M.terminate()},function(P){a.hideMask();if(P){a.Errors.ConvertToGrayScaleFailed(O,P)}M.terminate();throw {code:O._errorCode,message:O._errorString}})},k=function(O,N){var K=N[0];var M=q(),L=O._ImgManager.convertClientIndexToServerId(K);M.context={};a.showMask();return O._ImgManager.getWebViewer().GetImageData(O._ImgManager.getUidByIndex(K)).then(function(P){M.context.metadata=P&&P.metadata?P.metadata:{};return M.initImage(P.oriData)}).then(function(){return M.toBinary(28,25,10)}).then(function(){return M.getImage()}).then(function(Q){var R={src:Q.imageData,imgType:a.MobileFuns.convertOutputType(Q.imageType),dataType:"url",metadata:{imageData:Q.imageData,width:Q.imageWidth,height:Q.imageHeight,bitDepth:1}};try{O._OnBitmapChanged(["10",""+L,4,O._ImgManager.getCurrentImageIndex(),O._ImgManager.count(),R])}catch(P){a.Errors.SystemExceptionError(O,P.message);throw 0}}).then(function(){a.hideMask();M.terminate()},function(P){a.hideMask();if(P){a.Errors.ConvertToBWScaleFailed(O,P)}M.terminate();throw {code:O._errorCode,message:O._errorString}})},c=function(P,O){var Q=O[0],R=O[1],N=O[2],T=O[3],M=O[4];if(!a.isNumber(R)){a.Errors.MobileServer_InvalidXResolution(P);return a.Promise.reject({code:P._errorCode,message:P._errorString})}if(!a.isNumber(N)){a.Errors.MobileServer_InvalidYResolution(P);return a.Promise.reject({code:P._errorCode,message:P._errorString})}if(a.isUndefined(M)){M=Dynamsoft.EnumDWT_InterpolationMethod.IM_BICUBIC}var L=q(),K=P._ImgManager.convertClientIndexToServerId(Q),U,V,S;L.context={};U=P._ImgManager._UIView.GetMetaDataByIndex(Q);V=U.resolutionX;S=U.resolutionY;a.showMask();return P._ImgManager.getWebViewer().GetImageData(P._ImgManager.getUidByIndex(Q)).then(function(W){L.context.metadata=W&&W.metadata?W.metadata:{};return L.initImage(W.oriData)}).then(function(){return L.setDPI(V,S,R,N,T,M)}).then(function(){return L.getImage()}).then(function(X){var Y={src:X.imageData,imgType:a.MobileFuns.convertOutputType(X.imageType),dataType:"url",metadata:{imageData:X.imageData,width:X.imageWidth,height:X.imageHeight,resolutionX:R,resolutionY:N}};try{P._OnBitmapChanged(["10",""+K,4,P._ImgManager.getCurrentImageIndex(),P._ImgManager.count(),Y])}catch(W){a.Errors.SystemExceptionError(P,W.message);throw 0}}).then(function(){a.hideMask();L.terminate()},function(W){a.hideMask();if(W){a.Errors.SetDPIFailed(P,W)}L.terminate();throw {code:P._errorCode,message:P._errorString}})},r=function(P,O){var L=O[0],K=O[1];if(!a.isNumber(K)){a.Errors.MobileServer_InvalidWidth(P);return a.Promise.reject({code:P._errorCode,message:P._errorString})}var N=q(),M=P._ImgManager.convertClientIndexToServerId(L);N.context={};a.showMask();return P._ImgManager.getWebViewer().GetImageData(P._ImgManager.getUidByIndex(L)).then(function(Q){N.context.metadata=Q&&Q.metadata?Q.metadata:{};return N.initImage(Q.oriData)}).then(function(){return N.setImageWidth(K)}).then(function(){return N.getImage()}).then(function(R){var S={src:R.imageData,imgType:a.MobileFuns.convertOutputType(R.imageType),dataType:"url",metadata:{imageData:R.imageData,width:R.imageWidth,height:R.imageHeight}};try{P._OnBitmapChanged(["10",""+M,4,P._ImgManager.getCurrentImageIndex(),P._ImgManager.count(),S])}catch(Q){a.Errors.SystemExceptionError(P,Q.message);throw 0}}).then(function(){a.hideMask();N.terminate()},function(Q){a.hideMask();if(Q){a.Errors.SetImageWidthFailed(P,Q)}N.terminate();throw {code:P._errorCode,message:P._errorString}})},i=function(aa,ag){var aj=ag[0],M=ag[1],ai=ag[2],af=ag[3],V=ag[4],P,Y,X,T=false,Z=false,ab=Dynamsoft.EnumDWT_ImageType;if(a.isUndefined(aj)){a.Errors.MobileServer_InvalidImage(aa);return a.Promise.reject({code:aa._errorCode,message:aa._errorString})}if(!a.isArray(M)){a.Errors.MobileServer_InvalidIndex(aa);return a.Promise.reject({code:aa._errorCode,message:aa._errorString})}if(a.isUndefined(ai)){ai="jpg"}if(!a.isString(aj)||aj==""){aj="img."+ai}if(ai=="png"||ai=="jpg"||ai=="bmp"){var ah=aa._ImgManager.convertClientIndexToServerId(U),R,U=M[0],ae=aa._jpgQuality;if(af==1){a.showMask()}if(ai=="png"){R=ab.IT_PNG}else{if(ai=="bmp"){R=ab.IT_BMP}else{R=ab.IT_JPG}}var L=aa._ImgManager.getWebViewer().GetImageData(aa._ImgManager.getUidByIndex(U));Z=o();Z.context={};Z.context.bSaveAsBinary=V;if(aa._scaleDownThreshold<=0){L=L.then(function(ak){var al=Z.context.bSaveAsBinary;return Z.saveImage(ak.oriData,R,ae,false,al)})}else{L=L.then(function(al){var ak=al&&al.metadata?al.metadata:{};return Dynamsoft.ImageProcWrapper.resize(al.oriData,ak.width,ak.height,aa._scaleDownThreshold)});L=L.then(function(ak){var al=Z.context.bSaveAsBinary;Z.context.revokeUrl=ak.imageData;return Z.saveImage(ak.imageData,R,ae,false,al)});L=L.then(function(ak){a.MobileFuns.revoke(Z.context.revokeUrl);Z.context.revokeUrl=false;return ak})}return L.then(function(ak){if(af==1){a.hideMask()}if(Z){Z.terminate()}if(T){T.terminate()}return{blobUrl:ak.imageData,type:ai}},function(ak){if(af==1){a.hideMask()}a.Errors.SaveImageFailed(aa,ak);if(Z){Z.terminate()}if(T){T.terminate()}throw {code:aa._errorCode,message:aa._errorString}})}else{if(ai=="pdf"){var S=t(),ad,W=M.length;S.context={};if(af){a.showProgress(aa);if(af==2){aa._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBlob,""])}else{if(af==3){aa._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBase64,""])}else{if(af==4){aa._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,""])}else{aa._OnPercentDone([0,-1,Dynamsoft.MSG.SavingPdf,""])}}}}var K=S.initPdfSetting(aa._pdfWriteSetting);if(aa._scaleDownThreshold>0){T=q();T.context={}}S.context.cIndex=0;S.context.aryIndex=M;S.context.bSaveAsBinary=V;for(ad=0;ad<W;ad++){K=K.then(function(){var al=S.context.cIndex,ak=S.context.aryIndex;return aa._ImgManager.getWebViewer().GetImageData(aa._ImgManager.getUidByIndex(ak[al]))});if(aa._scaleDownThreshold<=0){K=K.then(function(ak){return S.appendPage(ak.oriData)})}else{K=K.then(function(al){var ak=al&&al.metadata?al.metadata:{};return Dynamsoft.ImageProcWrapper.resize(al.oriData,ak.width,ak.height,aa._scaleDownThreshold)});K=K.then(function(ak){S.context.revokeUrl=ak.imageData;return S.appendPage(ak.imageData)});K=K.then(function(ak){if(S.context.revokeUrl){a.MobileFuns.revoke(S.context.revokeUrl)}S.context.revokeUrl=false;return ak})}K=K.then(function(){var an=S.context.cIndex,al=S.context.aryIndex,ao=al.length;if(af){var am=(an+1);var ak=(100*am)/(1*ao);aa._OnPercentDone([0,ak,am+"/"+ao,""])}S.context.cIndex=(an+1)})}return K.then(function(){var ak=S.context.bSaveAsBinary;return S.writePdf(ak)}).then(function(ak){if(af){a.closeProgress()}S.terminate();if(T){T.terminate()}return{blobUrl:ak.pdfData,type:"pdf"}},function(ak){if(af){a.closeProgress()}a.Errors.SaveImageFailed(aa,ak);S.terminate();if(T){T.terminate()}throw {code:aa._errorCode,message:aa._errorString}})}else{if(ai=="tiff"){var N,Q=M.length;Z=o();Z.context={};Z.context.bSaveAsBinary=V;if(aa._scaleDownThreshold>0){T=q();T.context={}}if(af){Z.context.bShowPercentProgress=true;a.showProgress(aa);if(af==2){aa._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBlob,""])}else{if(af==3){aa._OnPercentDone([0,-1,Dynamsoft.MSG.ConvertingToBase64,""])}else{if(af==4){aa._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,""])}else{aa._OnPercentDone([0,-1,Dynamsoft.MSG.SavingTiff,""])}}}}var ac=Z.createTiff(),O=Dynamsoft.EnumDWT_TIFFCompressionType;Z.context.cIndex=0;N=E.Auto;if(aa._tiffCompressionType==O.TIFF_AUTO){N=E.Auto}else{if(aa._tiffCompressionType==O.TIFF_FAX3||aa._tiffCompressionType==O.TIFF_T4){N=E.G3}else{if(aa._tiffCompressionType==O.TIFF_FAX4||aa._tiffCompressionType==O.TIFF_T6){N=E.G4}else{if(aa._tiffCompressionType==O.TIFF_LZW){N=E.LZW}else{if(aa._tiffCompressionType==O.TIFF_JPEG){N=E.JPEG}else{if(aa._tiffCompressionType==O.TIFF_PACKBITS){N=E.ZIP}}}}}}Z.context.tiffFormat=N;Z.context.aryIndex=M;for(ad=0;ad<Q;ad++){ac=a.MobileFuns.appendTiffPage(aa,ac,Z,T)}ac=ac.then(function(){var ak=Z.context.bSaveAsBinary;return Z.getTiff(ak)});return ac.then(function(al){var ak=Z.context.bShowPercentProgress;if(ak){a.closeProgress()}Z.closeTiff();Z.terminate();if(T){T.terminate()}return{blobUrl:al.imageData,type:"tiff"}},function(al){var ak=Z.context.bShowPercentProgress;if(ak){a.closeProgress()}a.Errors.SaveImageFailed(aa,al);Z.closeTiff();Z.terminate();if(T){T.terminate()}throw {code:aa._errorCode,message:aa._errorString}})}else{a.Errors.InvalidImageType(aa);return a.Promise.reject({code:aa._errorCode,message:aa._errorString})}}}},w=function(M,L){var K;if(L.length>0){K=L[0]}else{K=A.ProductKey}if(!Dynamsoft.WasmEnv){a.Errors.GetLicenseInfoFailed(M,"wasm not load.");return a.Promise.reject({code:M._errorCode,message:M._errorString})}return Dynamsoft.WasmEnv.getLicenseInfo(K).then(function(N){if(!N||!N.Detail){a.Errors.LicenseEmptyOrInvalid(M);throw {code:M._errorCode,message:M._errorString}}else{return N}},function(N){a.Errors.GetLicenseInfoFailed(M,N);throw {code:M._errorCode,message:M._errorString}})},I=function(O,M){var L=N,N=M[0];if(N instanceof FileList){L=N[0]}else{if(N instanceof ArrayBuffer||N instanceof Uint8Array){L=new Blob([N])}else{}}var K=o();return K.getMD5(L).then(function(P){K.terminate();return P},function(P){a.Errors.GetMD5Failed(O,P);K.terminate();throw {code:O._errorCode,message:O._errorString}})};H._areaDetectCallback=function(N,M,K){var L=u();return L.initImage(N,true,M,K).then(function(){return L.detectDocument()}).then(function(O){return O.cornerPoints},function(P){a.closeLoadingMsg();var O={_errorString:P};a.Errors.DetectCallbackErr(O);throw {code:O._errorCode,message:O._errorString}})};H._saveImageCallback=function(K){var O=this,L=K,N;if(L instanceof Blob||L instanceof ArrayBuffer){N=a.Promise.resolve(L)}else{if(a.isString(K)){var M={mode:"cors",dataType:"blob"};N=a.fetch(K,M)}else{a.Errors.InvalidSourceFile(O);return a.Promise.reject({code:O._errorCode,message:O._errorString})}}return N.then(function(P){return new a.Promise(function(U,R){var Q=P,S=-1,T=Dynamsoft.EnumDWT_ImageType;if(O._bLocalService){if(a.isString(Q.type)){if(Q.type=="application/pdf"){S=T.IT_PDF}else{if(Q.type=="image/png"){S=T.IT_PNG}else{if(Q.type=="image/jpeg"){S=T.IT_JPG}else{if(Q.type=="image/bmp"){S=T.IT_BMP}else{if(Q.type=="image/tiff"){S=T.IT_TIF}else{if(Q.type=="image/jp2"){S=T.IT_J2K}}}}}}}O.__LoadImageFromBytes(Q,S,"",true,function(){U(Q)},function(W,V){R({code:W,message:V})})}else{O._innerSendToMobile("LoadImageFromBinary",[Q],0,function(){U(Q)},function(W,V){R({code:W,message:V})})}})})};H._perspectiveCallback=function(P,N,M,K){var L=u();if(!a.isArray(N)||N.length!=8){var O={};a.Errors.InvalidParameterInCallback(O);return a.Promise.reject({code:O._errorCode,message:O._errorString})}return L.initImage(P,true,M,K).then(function(){return L.perspective(N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7])}).then(function(){return L.getImage(85,true,true)}).then(function(Q){return Q.imageData},function(R){a.closeLoadingMsg();var Q={_errorString:R};a.Errors.PerspectiveCallback(Q);throw {code:Q._errorCode,message:Q._errorString}})};H._checkWebcamWasmLicense=function(){var K=this;if(!a.License.checkProductKey(K,{Webcam:true},true)){return{code:K._errorCode,message:K._errorString}}if(!a.License.checkProductKey(K,{Webcam:true,Wasm:true},true)){return{code:K._errorCode,message:K._errorString}}return{errorCode:0}}});Dynamsoft.Ready(function(m,h){var f=Dynamsoft;if(!m.product.bHTML5Edition){return}var d=Dynamsoft.navInfo,c=m.html5.Funs,i=!0,p=!1,e=0,a=1,k=1,q=2,n=c.DEF,j=c.DEF_NOT_SUPPORT_MOBILE,s=m.removeNonPrintableChar,b=function(v,t,u){if(u==q){m.each(t,function(x,w){n(v,x,{get:function(){v._resetErr();if(!v._isValid()){return p}return i},set:function(y){v._resetErr();if(!v._isValid()){return p}return i}})})}},r=function(u,t){m.each(t,function(x,w){n(u,x,a,q)})},o=function(u,t){m.each(t,function(x,w){n(u,x,a,k)})},l=function(u,t){m.each(t,function(x,w){n(u,x,e)})},g=function(u,t){m.each(t,function(x,w){n(u,x,a)})};m.DynamicLoadAddonFuns=[];m.attachAddon=function(t){m.each(m.DynamicLoadAddonFuns,function(u){if(m.isFunction(u)){u(t)}})};m.attachProperty=function(t){var z=t;n(z,"ErrorCode",{get:function(){return z._errorCode}});n(z,"ErrorString",{get:function(){if(z._errorCode==-2207){if(z.__bMustUpgradeService){m.Errors.MustUpgradeService(z)}}if(z._errorCode!=0){return z._errorString}return"Successful."}});n(z,"ProductKey",{get:function(){return Dynamsoft.WebTwainEnv.ProductKey},set:function(A){if(!m.isString(A)){m.Errors.InvalidValue(z);return p}z._resetErr();if(!z._isValid()){return false}return z._setProductKey(A,false)}});n(z,"ProductName",{get:function(){return z.__strProductName},set:function(A){z._resetErr();if(!m.isString(A)){m.Errors.InvalidValue(z);return p}z.__strProductName=A;return i}});n(z,"VersionInfo",{get:function(){return z.__versionInfo}});if(z._isMobileMode()){j(z,"DefaultSourceName",e)}else{n(z,"DefaultSourceName",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__defaultSourceName}})}if(z._isMobileMode()){j(z,["ImageCaptureDriverType","IfShowCancelDialogWhenImageTransfer"])}else{n(z,"IfShowCancelDialogWhenImageTransfer",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__IfShowCancelDialogWhenImageTransfer},set:function(A){if(!m.isBoolean(A)){m.Errors.InvalidValue(z);return p}z._resetErr();if(!z._isValid()){return false}return(z.__IfShowCancelDialogWhenImageTransfer=A)}});n(z,"ImageCaptureDriverType",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._driverType},set:function(A){var G=z._driverType,F=false,C=false,E=false;if(z._bRemoteMode){if(z.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumWindow){E=true}else{if(z.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumLinux){C=true}else{if(z.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumMac){F=true}}}}else{F=d.bMac;C=d.bLinux;E=d.bWin}z._resetErr();if(!z._isValid()){return false}if(A!==""){var D=A*1;if(D<Dynamsoft.EnumDWT_Driver.TWAIN||D>Dynamsoft.EnumDWT_Driver.TWAIN64){m.Errors.ImageCaptureDriverTypeError(z);return p}if(E){if(D===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(Dynamsoft.dcp.b64bit){z._driverType=D;z.__icaSourceCount=-1;return i}}else{if(D!=Dynamsoft.EnumDWT_Driver.TWAIN&&D!=Dynamsoft.EnumDWT_Driver.TWAIN64){m.Errors.ImageCaptureDriverTypeError(z);return p}}if(Dynamsoft.dcp.b64bit){z._driverType=D}else{D=Dynamsoft.EnumDWT_Driver.TWAIN;z._driverType=D}}else{if(C){D=Dynamsoft.EnumDWT_Driver.SANE;z._driverType=D;if(D===Dynamsoft.EnumDWT_Driver.SANE){return i}else{m.Errors.ImageCaptureDriverTypeError(z);return p}}else{if(F){if(D===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA){z._driverType=D;z.__icaSourceCount=-1;return i}else{if(D!=Dynamsoft.EnumDWT_Driver.ICA&&D!=Dynamsoft.EnumDWT_Driver.TWAIN&&D!=Dynamsoft.EnumDWT_Driver.TWAIN64){m.Errors.ImageCaptureDriverTypeError(z);return p}}z._driverType=D}}}z.__icaSourceCount=0;z.CloseSourceManager();var B=z._innerFun("ImageCaptureDriverType",c.makeParams(D));z.OpenSourceManager();return B}m.Errors.ImageCaptureDriverTypeError(z);return p}})}if(z._isMobileMode()){j(z,"SourceCount",e)}else{n(z,"SourceCount",{get:function(){var L,K,J,C,H,I,O=[];var E,G,N,F,M="",D=false,B=false,A=false;if(z._bRemoteMode){if(z.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumWindow){A=true}else{if(z.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumLinux){B=true}else{if(z.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumMac){D=true}}}}else{D=d.bMac;B=d.bLinux;A=d.bWin}z._resetErr();if(!z._isValid()){return false}z._resetSources();z.__icaSourceCount=0;if(D&&(z._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA)){K=[];E=z._getSourceNamesSyncV2(Dynamsoft.EnumDWT_Driver.ICA);for(I=0;I<E.length;I++){C=E[I].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(E[I].IsDefaultSource==="true"){J=C}if(E[I].DriverType==="ICA"){O.push("ICA-"+C)}else{O.push(C)}K.push(E[I])}}}if(J===undefined&&E.length>0){C=E[0].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(E[0].DriverType==="ICA"){J="ICA-"+C}else{J=C}}}}N=z._getSourceNamesSyncV2(Dynamsoft.EnumDWT_Driver.TWAIN);for(I=0;I<N.length;I++){C=N[I].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(N[I].IsDefaultSource==="true"){J=C}if(N[I].DriverType==="ICA"){O.push("ICA-"+C)}else{O.push(C)}K.push(N[I])}}}if(J===undefined&&N.length>0){C=N[0].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(N[0].DriverType==="ICA"){J="ICA-"+C}else{J=C}}}}L=K.length;z.__defaultSourceName=J;z.__icaSourceCount=E.length;z.__sourceCount=L;z.__sourceName=O;z.__sourceDetails=K}else{if(A&&Dynamsoft.dcp.b64bit&&(z._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64)){K=[];N=z._getSourceNamesSyncV2(Dynamsoft.EnumDWT_Driver.TWAIN);for(I=0;I<N.length;I++){C=N[I].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(N[I].IsDefaultSource==="true"){J=C}O.push(C);K.push(N[I])}}}if(J===undefined&&N.length>0){C=N[0].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){J=C}}}if(Dynamsoft.dcp.b64bit){G=z._getSourceNamesSyncV2(Dynamsoft.EnumDWT_Driver.TWAIN64);for(I=0;I<G.length;I++){C=G[I].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(G[I].IsDefaultSource==="true"){J=C}if(G[I].DriverType==="TWAIN(64Bit)"){O.push("Twain64-"+C)}else{O.push(C)}K.push(G[I])}}}if(J===undefined&&G.length>0){C=G[0].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(G[0].DriverType==="TWAIN(64Bit)"){J="Twain64-"+C}else{J=C}}}}}else{G=[]}L=K.length;z.__defaultSourceName=J;z.__icaSourceCount=N.length;z.__sourceCount=L;z.__sourceName=O;z.__sourceDetails=K}else{H=z._getSourceNamesSyncV2();z.__defaultSourceName="";if(H&&H.length>=1){for(I=0;I<H.length;I++){C=H[I].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(H[I].IsDefaultSource==="true"){J=C}O.push(C)}}}if(m.isString(J)){z.__defaultSourceName=J}else{C=H[0].ProductName;if(m.isString(C)){C=m.trim(C);if(C!==""){if(H[0].DriverType==="ICA"){z.__defaultSourceName="ICA-"+C}else{z.__defaultSourceName=C}}}}}else{H=[];O=[]}L=H.length;z.__sourceCount=L;if(z._driverType===Dynamsoft.EnumDWT_Driver.ICA&&D){if(L>0){m.each(O,function(R,Q){if(m.isString(R)){var P=m.trim(R);if(P!==""){O[Q]="ICA-"+P}}});if(z.__defaultSourceName!==""){z.__defaultSourceName="ICA-"+z.__defaultSourceName}}}z.__sourceName=O;z.__sourceDetails=H}}if(L<=0){K=[];O=[];z.__sourceName=[];z.__sourceDetails=[];z.__defaultSourceName="";z.__sourceCount=0;return 0}return L}})}n(z,"HowManyImagesInBuffer",{get:function(){if(!z._isValid()){return 0}return z._ImgManager.count()}});n(z,"HTTPPostResponseString",{get:function(){z._resetErr();if(!z._isValid()){return""}if(z.__HTTPPostResponseString){return z.__HTTPPostResponseString}else{return""}}});if(z._isMobileMode()){j(z,["FTPPort","IfShowProgressBar","IfAppendImage"])}else{n(z,"FTPPort",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._innerFun("FTPPort")},set:function(A){z._resetErr();if(!z._isValid()){return false}if(A!==""){var B=A*1;return z._innerFun("FTPPort",c.makeParams(B))}}});n(z,"IfShowProgressBar",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__IfShowProgressBar},set:function(A){z._resetErr();if(!z._isValid()){return false}if(!m.isBoolean(A)){m.Errors.InvalidValue(z);return p}return(z.__IfShowProgressBar=A)}});n(z,"IfAppendImage",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__IfAppendImage},set:function(A){z._resetErr();if(!z._isValid()){return false}if(!m.isBoolean(A)){m.Errors.InvalidValue(z);return p}return(z.__IfAppendImage=A)}})}if(z._isMobileMode()){n(z,"JPEGQuality",{get:function(){z._resetErr();if(!z._isValid()){return false}return z._jpgQuality},set:function(A){var B=A*1;if(B>=100){B=100}else{if(B<0){B=0}}z._resetErr();if(!z._isValid()){return false}z._jpgQuality=B;return true}})}else{n(z,"JPEGQuality",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._innerFun("JPEGQuality")},set:function(A){var B=A*1;if(B>=100){B=100}else{if(B<0){B=0}}z._resetErr();if(!z._isValid()){return false}return z._innerFun("JPEGQuality",c.makeParams(B))}})}if(z._isMobileMode()){n(z,"TIFFCompressionType",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._tiffCompressionType},set:function(A){z._resetErr();if(!z._isValid()){return false}z._tiffCompressionType=A;return true}})}else{n(z,"TIFFCompressionType",a,k)}if(z._isMobileMode()){n(z,"BufferMemoryLimit",{get:function(){z._resetErr();if(!z._isValid()){return 0}return 0},set:function(A){z._resetErr();if(!z._isValid()){return false}return false}})}else{n(z,"BufferMemoryLimit",a,k)}if(z._isMobileMode()){n(z,"LogLevel",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._logLevel},set:function(A){z._resetErr();if(!z._isValid()){return false}var B=A*1;if(B>=14){B=14}else{if(B<0){B=0}}if(Dynamsoft.WasmEnv){Dynamsoft.WasmEnv.setLoglevel(z._logLevel)}z._logLevel=B;return true}})}else{n(z,"LogLevel",a,k)}n(z,"HttpContentTypeFieldValue",{get:function(){z._resetErr();if(!z._isValid()){return""}return z.__strHttpContentTypeFieldValue},set:function(A){z._resetErr();if(!z._isValid()){return false}z.__strHttpContentTypeFieldValue=A;return A}});n(z,"BrokerProcessType",{get:function(){z._resetErr();if(!z._isValid()){return 0}return 1},set:function(A){z._resetErr();if(!z._isValid()){return false}return true}});n(z,"BorderStyle",{get:function(){z._resetErr();if(!z._isValid()){return false}return 0},set:function(A){z._resetErr();if(!z._isValid()){return false}return false}});n(z,"HttpFieldNameOfUploadedImage",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__remoteFilename},set:function(A){z._resetErr();if(!z._isValid()){return false}return(z.__remoteFilename=A)}});n(z,"style",{get:function(){if(!z._isValid()){return""}return z.__style}});n(z,"Addon",{get:function(){return z.__addon}});n(z,"HTTPRequestswithCredentials",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__withCredentials},set:function(A){z._resetErr();if(!z._isValid()){return false}return(z.__withCredentials=A)}});n(z,"ScaleDownThreshold",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z._scaleDownThreshold},set:function(A){z._resetErr();if(!z._isValid()){return false}return(z._scaleDownThreshold=A)}});n(z,"CurrentImageIndexInBuffer",{get:function(){if(!z._isValid()){return 0}return z._ImgManager.getCurrentImageIndex()},set:function(A){var B=A*1;z._resetErr();if(!z._isValid()){return false}if(B>=0&&B<z._ImgManager.count()){z._ImgManager.Go(B);if(z._isBindViewer()){c.__innerRefreshFromUIView(z,z._ImgManager.getCurrentImageIndex())}}return true}});n(z,"SelectedImagesIndices",{get:function(){z._resetErr();if(!z._isValid()){return[]}if(z._ImgManager.count()<=0){return[]}return z._ImgManager.getSelectedClientIndexArray()}});n(z,"MaxImagesInBuffer",{get:function(){z._resetErr();if(!z._isValid()){return 0}return z.__maxImagesInBuffer},set:function(B){var A=B*1;z._resetErr();if(!z._isValid()){return false}if(A>0&&A<32768){z.__maxImagesInBuffer=A}else{m.Errors.OutOfRange(z)}return z.__maxImagesInBuffer}});n(z,"MaxUploadImageSize",{get:function(){z._resetErr();if(!z._isValid()){return false}return z.__maxUploadImageSize},set:function(B){var A=B*1;z._resetErr();if(!z._isValid()){return false}z.__maxUploadImageSize=A;if(z._isMobileMode()){}else{z._innerFun("MaxUploadImageSize",c.makeParams(A))}return z.__maxUploadImageSize}});if(z._isMobileMode()){n(z,"IfSSL",{get:function(){return z._ifSSL},set:function(A){z._ifSSL=A;return true}})}else{n(z,"IfSSL",a,q)}if(z._isMobileMode()){n(z,"IfAllowLocalCache",{get:function(){return false},set:function(A){return false}})}else{n(z,"IfAllowLocalCache",a,q)}n(z,"UseLocalService",{get:function(){return !z._isMobileMode()}});n(z,"PDFCompressionType",{get:function(){z._resetErr();if(!z._isValid()){return false}if(z._isMobileMode()){return z._mobileNotSupport("PDFCompressionType")}return z._innerFun("PDFCompressionType")},set:function(A){var B=A*1;if(B==EnumDWT_PDFCompressionType.PDF_FAX3){B=EnumDWT_PDFCompressionType.PDF_FAX4}z._resetErr();if(!z._isValid()){return false}if(z._isMobileMode()){return z._mobileNotSupport("PDFCompressionType")}return z._innerFun("PDFCompressionType",c.makeParams(B))}});z._getPdfDllname=function(){var A,D=false,B=false,C=false;if(z._bRemoteMode){if(z.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumWindow){C=true}else{if(z.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumLinux){B=true}else{if(z.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumMac){D=true}}}}else{D=d.bMac;B=d.bLinux;C=d.bWin}if(D){if(Dynamsoft.dcp.b64bit){A="libDynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dylib"}else{A="libDynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dylib"}}else{if(B){A="libDynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".so"}else{if(Dynamsoft.dcp.b64bit){A="DynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}else{A="DynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}}}return A};z._setConvertModeInner=function(C){if(!m.License.checkProductKey(z,{Core:true})){return false}var E=C*1,B=1,D=2,A=3;z._resetErr();if(!z._isValid()){return false}if(isNaN(E)){m.Errors.ParameterCannotEmpty(z);return false}if(E!=B&&E!=D&&E!=A){m.Errors.InvalidValue(z);return false}z._pdfConvertMode=E;if(E==D||m.License.hasPDFRProductKey(z)){z._pdfRealConvertMode=E}else{z._pdfRealConvertMode=D}return true};z._setConvertMode=function(E){var C=1,F=2,B=3,D=z._setConvertModeInner(E);if(!D){return false}if(!z._isMobileMode()){var A=z._getPdfDllname();z._innerFun("SetPDFConvertMode",c.makeParams(z._pdfRealConvertMode,A))}if((z._pdfRealConvertMode==F)&&(z._pdfConvertMode==C)){m.Errors.LicenseNoPDF(z);return false}return true};z._setConvertModeAsync=function(F){var C=1,G=2,B=3,E=z._setConvertModeInner(F),D=m.Promise.resolve(true);if(!E){return m.Promise.reject({code:z._errorCode,message:z._errorString})}if(!z._isMobileMode()){var A=z._getPdfDllname();return z._innerFunV2("SetPDFConvertMode",c.makeParams(z._pdfRealConvertMode,A)).then(function(){if((z._pdfRealConvertMode==G)&&(z._pdfConvertMode==C)){m.Errors.LicenseNoPDF(z);throw {code:z._errorCode,message:z._errorString}}return true})}if((z._pdfRealConvertMode==G)&&(z._pdfConvertMode==C)){m.Errors.LicenseNoPDF(z);return m.Promise.reject({code:z._errorCode,message:z._errorString})}return m.Promise.resolve(true)};z._setProductKey=function(E,A,B,H){var D=true,G=E,F=Dynamsoft.WebTwainEnv,I=function(J){if(!J){z.__licenseInfo=false}var K=true;if(!H){K=m.License.checkProductKey(z,{Core:true})}if(m.isFunction(B)){B()}return K};z._resetErr();if(!z._isValid()){return false}if(!m.isString(G)||G=="******"){G=""}F.ProductKey=G;if(G==""){D=false;I()}else{if(z._isMobileMode()){m.showProgressMsg(-1,"",Dynamsoft.MSG.Init_GetLicenseInfoForDWT);z.GetLicenseInfo(function(J){if(Dynamsoft.WasmEnv){Dynamsoft.WasmEnv.setLoglevel(z._logLevel)}z._setConvertMode(z._pdfConvertMode);z._resetErr();I(true)},I);return true}var C=function(J){z._innerFunRaw("ProductKey",c.makeParams(J),A,false,false,function(L){var K=false;if(m.isArray(L)){K=L[0]}else{K=L}if(m.isArray(L)){if(L.length>=3&&L[1]==="1"&&m.isFunction(m.ShowLicenseDialog)){m.ShowLicenseDialog(L[2],{width:510,height:272,bClose:true,seconds:10})}}if(!A){D=K}m.showProgressMsg(-1,"",Dynamsoft.MSG.Init_GetLicenseInfoForDWT);z.GetLicenseInfo(function(){z._setConvertMode(z._pdfConvertMode);I(true)},I)},function(){if(!A){D=false}I()})};if(m.startsWith(G,"http://")||m.startsWith(G,"https://")){m.ajax({method:"GET",url:G,onSuccess:function(J){C(J)}})}else{C(G)}}return D};g(z,["ProxyServer"]);var u=["CapValueString","CapDescription","FTPPassword","FTPUserName","Manufacturer","ProductFamily","PDFAuthor","PDFCreationDate","PDFCreator","PDFKeywords","PDFModifiedDate","PDFProducer","PDFSubject","PDFTitle","PDFVersion"];if(z._isMobileMode()){j(z,u)}else{g(z,u)}l(z,["ImageBitsPerPixel","ImageLength","ImageWidth","ImageXResolution","ImageYResolution"]);var y=["BlankImageCurrentStdDev","CapDefaultIndex","CapDefaultValue","DataSourceStatus","Duplex","PendingXfers","ImageLayoutDocumentNumber","ImageLayoutFrameBottom","ImageLayoutFrameLeft","ImageLayoutFrameNumber","ImageLayoutFrameRight","ImageLayoutFrameTop","ImageLayoutPageNumber","ImagePixelType","MagData","MagType","IfFeederLoaded","IfPaperDetectable","IfUIControllable"];if(z._isMobileMode()){j(z,y,e)}else{l(z,y)}r(z,["AllowPluginAuthentication","IfModalUI","IfScanInNewThread","_AutoCropMethod"]);var w=["CurrentSourceName","IfDisableSourceAfterAcquire","IfDuplexEnabled","IfFeederEnabled","IfShowFileDialog","IfShowUI","IfPASVMode","IfAutoBright","IfAutoDiscardBlankpages","IfAutoFeed","IfAutomaticBorderDetection","IfAutomaticDeskew","IfAutoScan","IfShowIndicator","IfUseTwainDSM","IfTiffMultiPage"];if(z._isMobileMode()){j(z,w)}else{r(z,w)}o(z,["MaxInternetTransferThreads"]);var v=["BlankImageMaxStdDev","BlankImageThreshold","BitDepth","Brightness","PageSize","PixelType","Resolution","Capability","CapCurrentIndex","CapCurrentValue","CapMaxValue","CapMinValue","CapNumItems","CapStepSize","CapType","CapValue","CapValueType","Contrast","PixelFlavor","TransferMode","Unit","XferCount"];if(z._isMobileMode()){j(z,v)}else{o(z,v)}b(z,["AsyncMode","EnableInteractiveZoom","IfThrowException","ImageEditorIfEnableEnumerator","ImageEditorIfReadonly","ImageEditorIfModal","ImageEditorWindowTitle","IfShowPrintUI","VScrollBar"],q);var x=["IfOpenImageWithGDIPlus"];if(z._isMobileMode()){j(z,x)}else{b(z,x)}};if(!m.attachPropertyUI){m.attachPropertyUI=function(){}}});Dynamsoft.Ready(function(c,b){var a=Dynamsoft;if(!c.product.bHTML5Edition){return}var d=Dynamsoft.navInfoSync,f=c.html5.STwain,e=f.prototype,g=c.html5.Funs;e.__innerLoadImage=function(h,o,n,k,l,j,i){var q=this;if(!c.License.checkProductKey(q,{Core:true})){if(c.isFunction(i)){i(q._errorCode,q._errorString)}return false}if(!c.License.checkPDFProductKeyWhenNeeds(q,n)){if(c.isFunction(i)){i(q._errorCode,q._errorString)}return false}if(c.isFunction(j)){return q.__innerAcquireImage(h,o,k,j,i)}else{return q.__innerLoadImageFun(h,o,l)}};e.__innerLoadImageFun=function(k,i,q){var o=this,j,h=true;if(g.isHttpServerInvalid(o)){return false}j=o._innerFunRaw(k,i,false,false,true);if(c.isArray(j.result)&&j.result.length>0){var n="",r=[];if(q){var l=j.result[0];if(c.isObject(l)){n=l.ids;r=l.metaData}else{if(l==-1&&k=="LoadImage"){h=false}}}else{n=j.result.join(",")}if(!c.isArray(r)){r=[]}o._OnBitmapChanged(["c2",n,1,o._ImgManager.getCurrentImageIndex(),o._ImgManager.count(),r]);return h}return false};e.__closeRemoteScanUI=function(h){var j=this;if(j._acquireDivEL){var i=c.one(".ds-img-screen");if(j._acquireDivEL.evtFun){if(i&&i.length>0){c.removeEventListener(i[0],"mouseup",j._acquireDivEL.evtFun)}j._acquireDivEL.evtFun=null}else{if(i&&i.length>0){c.removeEventListener(i[0],"mouseup")}}if(i&&i.length>0){i[0].src=""}if(h){document.body.removeChild(j._acquireDivEL);j._acquireDivEL=null}}};e.__innerAcquireImage=function(i,o,l,k,j){var q=this,h=(i=="LoadImage"||i=="LoadImageEx"||i=="GenerateURLForUploadData");var n=function(m){q.__bLoadingImage=false;q.__bAcquireImageNow=false;q.__bOpenFileNow=false;var p=q._ImgManager.getCurrentImageIndex();if(p>=0){q.OnRefreshUI(p)}if(c.isFunction(j)){j(q.ErrorCode,q.ErrorString)}if(h){Dynamsoft.Lib.closeProgress(i)}else{g.hideMask(i)}if(m){Dynamsoft.Lib.log(m)}q.__closeRemoteScanUI(true);return false};if(g.isServerInvalid(q)){n();return false}if(h){Dynamsoft.Lib.showProgress(q,i,false)}else{g.showMask(i)}q._innerSend(i,o,true,function(){q.__bLoadingImage=false;q.__bOpenFileNow=false;if(h){Dynamsoft.Lib.closeProgress(i);if(q._isBindViewer()){var m=q._ImgManager.getCurrentImageIndex();if(m>=0){q.OnRefreshUI(m)}}}else{g.hideMask(i)}if(c.isFunction(k)){k()}q.__closeRemoteScanUI(true)},n);return true};e.__innerSaveImage=function(h,j,i,l){var k=this;k._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding]);return k.__innerProgressFunction(h,j,false,i,l)};e.__innerFTPDownloadDirectly=function(h,k,j,i,n){var l=this;if(!c.License.checkProductKey(l,{Core:true})){if(c.isFunction(n)){n(l._errorCode,l._errorString)}return false}if(!c.License.checkPDFProductKeyWhenNeeds(l,j)){if(c.isFunction(n)){n(l._errorCode,l._errorString)}return false}c.cancelFrome=4;return l.__innerProgressFunction(h,k,true,i,n)};e.__innerFTPDownload=function(k,i,l,q,h){var n=this,r,o=0;if(!c.License.checkProductKey(n,{Core:true})){if(c.isFunction(h)){h(n._errorCode,n._errorString)}return false}if(!c.License.checkPDFProductKeyWhenNeeds(n,l)){if(c.isFunction(h)){h(n._errorCode,n._errorString)}return false}c.cancelFrome=4;if(c.isFunction(h)){return n.__innerProgressFunction(k,i,true,function(){var m=n._ImgManager.getCurrentImageIndex();if(m>=0){n.OnRefreshUI(m)}if(c.isFunction(q)){q()}},h)}else{r=n.__innerLoadImageFun(k,i,o);var j=n._ImgManager.getCurrentImageIndex();if(j>=0){n.OnRefreshUI(j)}return r}};e.__innerFTPUpload=function(h,j,i,k){Dynamsoft.Lib.cancelFrome=3;return this.__innerProgressFunction(h,j,true,i,k)};e.__innerProgressFunction=function(h,l,i,j,o){var n=this;if(!c.isFunction(o)){return this._innerFun(h,l)}var k=function(m){if(c.isFunction(o)){o(n.ErrorCode,n.ErrorString)}Dynamsoft.Lib.closeProgress(h);if(m){Dynamsoft.Lib.log(m)}return true};Dynamsoft.Lib.showProgress(n,h,i);return this._innerSend(h,l,true,function(){Dynamsoft.Lib.closeProgress(h);if(c.isFunction(j)){j()}},k)};e.__innerGetBarcodeResultAsyncFunction=function(i){var h=Dynamsoft.Lib.NewBarcodeResult();if(i){h._errorCode=i.exception;h._errorString=i.description;h._resultlist=i.result;h._Count=i.result.length}return h};e.__innerGetOCRResultAsyncFunction=function(i){var h=Dynamsoft.Lib.NewOCRResult(this);if(i){h._errorCode=i.exception;h._errorString=i.description;h._resultlist=i.result}return h};e._innerSendCmd=function(h,i){var j=this;if(g.isHttpServerInvalid(j)){return false}j._innerFunRaw(h,i,true,false,true)};e._innerFun=function(h,j){var k=this,i;if(g.isHttpServerInvalid(k)){return false}i=k._innerFunRaw(h,j,false,false,false);if(Dynamsoft.Lib.isArray(i)){return i[0]}return i};e._innerFunRawV2=function(h,l,k){var n=this,j,i="fa/";n._resetErr();if(!n._isValid()){return false}if(g.isHttpServerInvalid(n)){return c.Promise.reject({code:n._errorCode,message:n._errorString})}j={method:"post",body:g.getJson(n,h,l,0),dataType:k};return c.fetch([n.httpUrl,i,h,"?",g.getRandom()].join(""),j).then(function(m){var o=false;try{if(c.isString(m)){o=c.parse(m)}else{o=m}}catch(p){}if(o){if(o instanceof Blob||o instanceof ArrayBuffer){return o}if(o.exception!==undefined&&o.description!==undefined){n._errorCode=o.exception;n._errorString=o.description}else{n._resetErr();return o}}else{Dynamsoft.Lib.Errors.InvalidResultFormat(n)}throw {code:n._errorCode,message:n._errorString}},function(m){Dynamsoft.Lib.Errors.NetworkError(n);if(m){n._errorString=[n._errorString," ",m.errorString," (",m.httpCode,")"].join("")}throw {code:n._errorCode,message:n._errorString}})};e._innerFunV2=function(h,i){var j=this;if(g.isHttpServerInvalid(j)){return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunRawV2(h,i,"text").then(function(k){if(k&&Dynamsoft.Lib.isArray(k.result)&&k.result.length>0){return k.result[0]}return k})};e._innerFunRaw=function(k,j,u,l,v,w,i){var s=this,h,x,r,q="f/",t,o=false;if(g.isHttpServerInvalid(s)){return false}s._resetErr();if(!s._isValid()){return false}if(u){o=true;q="fa/"}h=[s.httpUrl,q,k,"?",g.getRandom()].join("");x=g.getJson(s,k,j,0);r={method:"POST",url:h,data:x,async:o,onSuccess:function(y,p,m){var z=false;try{if(c.isString(y)&&m.getResponseHeader("content-type")==="text/json"){z=c.parse(y)}else{z=y}}catch(A){}if(z){if(z.exception!==undefined&&z.description!==undefined){s._errorCode=z.exception;s._errorString=z.description}else{s._resetErr()}if(v){t=z}else{t=z.result}}else{Dynamsoft.Lib.Errors.InvalidResultFormat(s);t=""}if(c.isFunction(w)){w(t)}},onError:function(){Dynamsoft.Lib.Errors.NetworkError(s);t="";if(c.isFunction(i)){i()}}};if(!o&&l){if(d.bIE){r.dataType="arraybuffer";r.onSuccess=function(F,H,z){var p,B,G=false,D;if(z.responseHeadersString){var y=z.responseHeadersString;if(y.indexOf("text/json")!=-1){G=true}}p=z.responseData;s._resetErr();t=false;if(p){B=new Uint8Array(p);if(G){p=String.fromCharCode.apply(null,B)}else{t=new Blob([B],{type:s.__strHttpContentTypeFieldValue});D=new c.SparkMD5.ArrayBuffer();D.append(B);t.md5=D.end()}}if(!p||G){var E,C,m=false;if(G){E=p}else{E=z.responseText}C=E.length;if(C>0){if(E.charAt(0)=="{"){try{m=c.parse(E);G=true}catch(A){Dynamsoft.Lib.log(E)}}if(G){if(m.exception!==undefined&&m.description!==undefined){s._errorCode=m.exception;s._errorString=m.description;t=false}else{t=true}}else{B=new Uint8Array(E);t=new Blob([B],{type:s.__strHttpContentTypeFieldValue});D=new c.SparkMD5.ArrayBuffer();D.append(B);t.md5=D.end()}}}if(c.isFunction(w)){w(t)}}}else{if(!o){r.dataType="text";r.contentType="text/plain; charset=x-user-defined";r.mimeType="text/plain; charset=x-user-defined"}r.onSuccess=function(E,G,p){var B,y,C;s._resetErr();B=p.responseText;y=B.length;if(y>0){var F=false,m;if(B.charAt(0)=="{"){try{m=c.parse(B);F=true}catch(z){Dynamsoft.Lib.log(B)}}if(F){if(m.exception!==undefined&&m.description!==undefined){s._errorCode=m.exception;s._errorString=m.description;t=false}else{t=true}}else{C=new Uint8Array(y);for(var A=0;A<y;A++){C[A]=B.charCodeAt(A)}t=new Blob([C],{type:s.__strHttpContentTypeFieldValue});var D=new c.SparkMD5.ArrayBuffer();D.append(C);t.md5=D.end()}}else{t=""}if(c.isFunction(w)){w(t)}}}}else{if(o&&l){r={method:"POST",body:x};if(d.bIE){r.dataType="arraybuffer"}else{r.fetchRaw=true}var n=c.fetch(h,r);if(d.bIE){}else{n=n.then(function(m){var p=m.headers.get("content-type");if(p.indexOf("image/")>=0||p.indexOf("application/octet-stream")>=0){return m.arrayBuffer()}return m.json()})}n=n.then(function(y){s._resetErr();if(y instanceof ArrayBuffer){if(c.isFunction(w)){w(y)}y=null;return}else{if(c.isObject(y)){var p=y;if(p.exception!==undefined&&p.description!==undefined){s._errorCode=p.exception;s._errorString=p.description;if(c.isFunction(i)){i()}}else{var m="";if(p.result){m=p.result}if(c.isFunction(w)){w(m)}}}else{Dynamsoft.Lib.Errors.NetworkError(s);if(c.isFunction(i)){i()}}}},function(m){Dynamsoft.Lib.Errors.NetworkError(s);if(c.isFunction(i)){i()}});return true}}if(!o){c.mix(r,{headers:{"X-Requested-With":false}})}if(d.bFileSystem){r.crossDomain=false}c.ajax(r);if(o){return true}return t};e._innerSend=function(l,i,o,r,v){var s=this,j=s._objWS,x=false,q=false,h=false,k=true;if(l=="ActiveUI"){k=false}else{h=g.isServerInvalid(s)}if(h){if(c.isFunction(v)){v()}return true}if(c.isFunction(r)){q=r}if(c.isFunction(v)){x=v}var z=g.generateCmdId(),u;if(l=="SaveSelectedImagesToBytes"||l=="ConvertToBlob"){var y=g.getJson(s,l,i,z),t=true,n=true,w=true;s._innerFunRaw(l,y,t,n,w,q,x);u=true}else{s.curCommand.push({cmd:l,cmdId:z,sFun:q,fFun:x});u=g.sendData(j,g.getJson(s,l,i,z),false,k)}return u};e.__innerConvertToBlob=function(v,j,o,q,t,u,i,r){var s=this;if(s._isMobileMode()){return s.__innerConvertToBlobByMobile(v,j,o,t,u,i,r)}var n=o,m=true,l=",";if(!c.isString(n)||n==""){n="";l=""}var h=["[",v,',"',j.join(","),'"',l,n,"]"].join("");if(q){return s._innerFunRaw("ConvertToBlob",h,true,m,true,function(y){var x=g.getBlobTypeByImageType(v),p=new Blob([y],{type:x});if(Dynamsoft.WebTwainEnv.IfAddMD5InUploadHeader){var z=new c.SparkMD5.ArrayBuffer();z.append(y);if(c.isFunction(u)){u(p,z.end(),r)}}else{if(c.isFunction(u)){u(p,"",r)}}p=null},i)}else{var k=s._innerFunRaw("ConvertToBlob",h,false,m,false),w="";if(s.ErrorCode==0){if(k&&"md5" in k){w=k.md5}return u(k,w,r)}else{i();return false}}};e.__innerConvertToBlobByMobile=function(t,k,n,r,s,j,o){var p=this,m=function(i,u){var v={mode:"cors",dataType:"arraybuffer"};c.fetch(i,v).then(function(x){var y="image/"+u;if(u=="pdf"){y="application/pdf"}var w=new Blob([x],{type:y});if(c.isFunction(s)){s(w,o)}w=null})["catch"](function(w){if(c.isFunction(j)){j(w)}})},h=[],q,l;if(t==EnumDWT_ImageType.IT_BMP){q="bmp";return p._mobileNotSupport("Convert to bmp",j)}else{if(t==EnumDWT_ImageType.IT_JPG){q="jpg"}else{if(t==EnumDWT_ImageType.IT_PNG){q="png"}else{if(t==EnumDWT_ImageType.IT_TIF){q="tiff"}else{if(t==EnumDWT_ImageType.IT_PDF){q="pdf"}else{if(t==EnumDWT_ImageType.IT_J2K){q="jp2"}else{q="png"}}}}}}for(l=0;l<k.length;l++){h.push(p._ImgManager.convertServerIdToClientIndex(k[l]))}return p._innerSendToMobile("SaveImage",Dynamsoft.Lib.MobileFuns.makeParams("",h,q,r,false),0,m,j)};e.__innerConvertToBase64ByMobile=function(k,r,p,q,j){var n=this,m=function(i,s){var t={mode:"cors",dataType:"arraybuffer"};c.fetch(i,t).then(function(v){var u=new FileReader();u.onload=function(y){var z=y.target.result,x=c.isString(z)?z.split(","):[];if(x.length>=2){z=x[1]}if(c.isFunction(q)){q({result:[z,z.length,this.md5]})}};var w="image/"+s;if(s=="pdf"){w="application/pdf"}n._innerSendToMobile("GetMD5",Dynamsoft.Lib.MobileFuns.makeParams(v),0,function(x){u.md5=x;u.readAsDataURL(new Blob([v],{type:w}))},j)},function(u){if(c.isFunction(j)){j(u)}})},h=[],o,l;if(r==EnumDWT_ImageType.IT_BMP){o="bmp";return n._mobileNotSupport("Convert to bmp",j)}else{if(r==EnumDWT_ImageType.IT_JPG){o="jpg"}else{if(r==EnumDWT_ImageType.IT_PNG){o="png"}else{if(r==EnumDWT_ImageType.IT_TIF){o="tiff"}else{if(r==EnumDWT_ImageType.IT_PDF){o="pdf"}else{if(r==EnumDWT_ImageType.IT_J2K){o="jp2"}else{o="png"}}}}}}for(l=0;l<k.length;l++){h.push(n._ImgManager.convertServerIdToClientIndex(k[l]))}return n._innerSendToMobile("SaveImage",Dynamsoft.Lib.MobileFuns.makeParams("",h,o,p,false),0,m,j)};e.__SaveLocalFileToBytes=function(j,h,m,l,o){var n=this,k=true;if(h){n._innerFunRaw("SaveSelectedImagesToBytes",g.makeParams(0,0,j,m),h,k,true,function(p){if(c.isFunction(l)){var q=new Blob([p]);l(q);q=null}},o);return true}else{var i=n._innerFunRaw("SaveSelectedImagesToBytes",g.makeParams(0,0,j,m),h,k,false);if(n.ErrorCode==0){return l(i)}else{o();return false}}};e.__LoadImageFromBytes=function(C,i,A,B,o,r,l,u){var y=this,x="LoadImageFromBytes",s=i||3,v=C.size||C.length,k=C.name||"unknown",w,z=g.isServerInvalid(y),n=true,j=0,q=1;if(!isNaN(l)&&l>=0&&!isNaN(u)&&u>0){q=0}else{l=0;u=0}j=y.__GetLoadEventsNum();w=["[",v,",",0,",",s,',"',A,'",',l,",",u,",",j,",",q,"]"].join("");var h=function(){Dynamsoft.Lib.closeProgress(x);y.__bLoadingImage=false;if(n){var m=y._ImgManager.getCurrentImageIndex();if(m>=0){y.OnRefreshUI(m)}}if(c.isFunction(r)){r(y._errorCode,y._errorString,k)}return false};if(z){n=false;return h()}if(!c.License.checkProductKey(y,{Core:true})&&!c.License.checkProductKey(y,{Webcam:true},true)){n=false;return h()}if(!c.License.checkPDFProductKeyWhenNeeds(y,i)){n=false;return h()}if(v===0){Dynamsoft.Lib.Errors.ImageFileLengthCannotZero(y);n=false;return h()}g.setBtnCancelVisibleForProgress(y,false);return this._innerSendBlob(x,w,C,B,q,function(){if(l+v==u||u<=0||isNaN(u)){Dynamsoft.Lib.closeProgress(x)}y.__bLoadingImage=false;if(y._isBindViewer()){var m=y._ImgManager.getCurrentImageIndex();if(B&&m>=0){y.OnRefreshUI(m)}}if(c.isFunction(o)){setTimeout(function(){o(k)},30)}return true},h)};e._innerSendBlob=function(u,t,A,x,r,i,z){var w=this,l=w._objWS,h=false;if(g.isServerInvalid(w)){if(c.isFunction(z)){z()}return false}if(c.isFunction(z)){h=z}if(x){var q=g.generateCmdId(),j;j=function(){if(c.isFunction(i)){i()}};w.curCommand.push({cmd:u,cmdId:q,sFun:j,fFun:h});g.sendData(l,g.getJson(w,u,t,q),A,true)}else{var B,v=[],k,s,n,y="f/",o="";if(g.isHttpServerInvalid(w)){return false}w._resetErr();if(!w._isValid()){return false}k=[w.httpUrl,y,u,"?",g.getRandom()].join("");s=g.getJson(w,u,t,0);s+="\r\n\r\n";s+=Dynamsoft.Lib.base64.encodeArray(A);n={method:"post",url:k,processData:false,data:s,async:false,onSuccess:function(D,C,m){var E=false,p=false;try{if(c.isString(D)&&m.getResponseHeader("content-type")==="text/json"){E=c.parse(D)}else{E=D}}catch(G){}if(E!==undefined&&E!==null){if(E.exception!==undefined&&E.description!==undefined){w._errorCode=E.exception;w._errorString=E.description}else{w._resetErr()}B=E.result;if(B&&c.isArray(B)&&B.length>=1){if(r){var F=B[0];if(F&&c.isObject(F)){o=F.ids;if(c.isArray(F.metaData)){v=F.metaData}p=true}}else{o=B.join(",");v=[];p=true}}}if(!p){Dynamsoft.Lib.Errors.InvalidResultFormat(w);B="";v=[]}},onError:function(){Dynamsoft.Lib.Errors.NetworkError(w);B="";v=[]}};c.mix(n,{headers:{"X-Requested-With":false}});if(d.bFileSystem){n.crossDomain=false}c.ajax(n);if(w._errorCode==0){if(o.length>0){w._OnBitmapChanged(["c2",o,1,w._ImgManager.getCurrentImageIndex(),w._ImgManager.count(),v])}if(c.isFunction(i)){i()}}else{if(c.isFunction(h)){h()}}return B}};e._innerActiveUI=function(i,h){this._innerSend("ActiveUI",g.makeParams(Dynamsoft.Lib.env.WSVersion,Dynamsoft.Lib.env.WSSession,1),false,i,h)}});Dynamsoft.Ready(function(a,g){var b=Dynamsoft;if(!a.product.bHTML5Edition){return}var f=Dynamsoft.navInfo,k=a.html5.STwain,c=k.prototype,i=a.html5.Funs,j=a.removeNonPrintableChar,h=Dynamsoft.WebTwainEnv,e=["OnPreAllTransfers","OnPreTransfer","OnPostTransfer","OnPostTransferAsync"];c.LoadDibFromClipboard=function(p,m){var q=this,n=1;q._resetErr();if(!q._isValid()){return false}if(q._isMobileMode()){return q._mobileNotSupport("LoadDibFromClipboard",m)}var o=-1,l=0;l=q.__GetLoadEventsNum();return q.__innerLoadImage("LoadDibFromClipboard",i.makeParams(l,n),o,true,n,p,m)};c.LoadImage=function(q,p,l){var r=this,t=1;r._resetErr();if(!r._isValid()){return false}if(r._isMobileMode()){return r._mobileNotSupport("LoadImage",l)}var s=i.replaceLocalFilename(q),o=a.html5.Funs.getImageType(s),n=0,u,m;if(p&&a.isFunction(p)){u=function(){p()}}if(l&&a.isFunction(l)){m=function(){l(r.ErrorCode,r.ErrorString)}}n=r.__GetLoadEventsNum();if(s==""){r.__bOpenFileNow=true}return r.__innerLoadImage("LoadImage",i.makeParams(s,n,t),o,true,t,u,m)};c.LoadImageEx=function(p,q,o,l){var s=this,v=1;s._resetErr();if(!s._isValid()){return false}if(s._isMobileMode()){var t=a.one(".d-loadImage");if(t.length==0){var x=document.createElement("input");x._stwain=s;x.setAttribute("type","file");x.setAttribute("multiple","multiple");x.style="position:absolute;top:-2px;left:-2px;width:1px;height:1px;";x.className="d-loadImage";if(q==Dynamsoft.EnumDWT_ImageType.IT_BMP){x.setAttribute("accept","image/bmp")}else{if(q==Dynamsoft.EnumDWT_ImageType.IT_JPG){x.setAttribute("accept","image/jpeg")}else{if(q==Dynamsoft.EnumDWT_ImageType.IT_TIF){x.setAttribute("accept","image/tiff")}else{if(q==Dynamsoft.EnumDWT_ImageType.IT_PNG){x.setAttribute("accept","image/png")}else{if(q==Dynamsoft.EnumDWT_ImageType.IT_PDF){x.setAttribute("accept",".pdf")}else{if(q==Dynamsoft.EnumDWT_ImageType.IT_J2K){x.setAttribute("accept",".jp2,.j2k,.j2c")}else{if(a.env.bMobile){x.setAttribute("accept","image/jpeg,image/png,image/tiff")}else{x.setAttribute("accept","image/*,.pdf,.jp2,.j2k,.j2c")}}}}}}}x.ondoubleclick=function(){if(this.files.length>0){this._stwain.LoadImageFromBinary(this.files,o,l)}this.value="";this._stwain=null};x.onchange=function(){if(this.files.length>0){this._stwain.LoadImageFromBinary(this.files,o,l)}this.value="";this._stwain=null};document.body.appendChild(x);x.click()}else{if(q==Dynamsoft.EnumDWT_ImageType.IT_BMP){t[0].setAttribute("accept","image/bmp")}else{if(q==Dynamsoft.EnumDWT_ImageType.IT_JPG){t[0].setAttribute("accept","image/jpeg")}else{if(q==Dynamsoft.EnumDWT_ImageType.IT_TIF){t[0].setAttribute("accept","image/tiff")}else{if(q==Dynamsoft.EnumDWT_ImageType.IT_PNG){t[0].setAttribute("accept","image/png")}else{if(q==Dynamsoft.EnumDWT_ImageType.IT_PDF){t[0].setAttribute("accept",".pdf")}else{if(q==Dynamsoft.EnumDWT_ImageType.IT_J2K){t[0].setAttribute("accept",".jp2,.j2k,.j2c")}else{if(a.env.bMobile){t[0].setAttribute("accept","image/jpeg,image/png,image/tiff")}else{t[0].setAttribute("accept","image/*,.pdf,.jp2,.j2k,.j2c")}}}}}}}t[0].value="";t[0]._stwain=s;t[0].click()}return true}var r=i.replaceLocalFilename(p),u=q,n=0,w,m;if(o&&a.isFunction(o)){w=function(){o()}}if(l&&a.isFunction(l)){m=function(){l(s.ErrorCode,s.ErrorString)}}if(u==EnumDWT_ImageType.IT_ALL){u=-1}n=s.__GetLoadEventsNum();if(r==""){s.__bOpenFileNow=true}return s.__innerLoadImage("LoadImageEx",i.makeParams(r,u,n,v),u,true,v,w,m)};c.EnableSource=function(m,n,l){var o=this;o._resetErr();if(!o._isValid()){return false}if(o._isMobileMode()){return o._mobileNotSupport("EnableSource",l)}return o.AcquireImage(m,n,l)};c.AcquireImage=function(w,v,u){var r=this,t=null,m=null,x,s;r._resetErr();if(!r._isValid()){return false}if(a.isUndefined(u)&&(a.isFunction(w)&&a.isFunction(v)||a.isFunction(w)&&a.isUndefined(v)||a.isFunction(w)&&v==null||w==null&&a.isFunction(v))){s={};if(a.isFunction(w)){t=w}if(a.isFunction(v)){m=v}}else{if(a.isUndefined(w)||w==null){s={}}else{s=a.clone(w)}if(a.isFunction(v)){t=function(){v(s)}}if(a.isFunction(u)){m=function(){u(s,r._errorCode,r._errorString)}}}if(!a.License.checkProductKey(r,{Core:true})){if(a.isFunction(m)){m(r.ErrorCode,r.ErrorString)}return false}if(r._isMobileMode()){return r._mobileNotSupport("AcquireImage",m)}if(i.isServerInvalid(r)){if(a.isFunction(m)){m(r.ErrorCode,r.ErrorString)}return false}if(!r._bRemoteMode&&s.RemoteScan){s.RemoteScan=false}if(r._bRemoteMode&&s.RemoteScan){if(!a.isFunction(r.__OnRemoteScanStatusAsync)){r.__OnRemoteScanStatusAsync=function(){}}if(!a.isFunction(r.__OnSourceUIClose)){r.__OnSourceUIClose=function(){}}}var p=0;for(var o=0;o<e.length;o++){var y=["__",e[o]].join("");if(a.isFunction(r[y])){p=p|(1<<o)}}s.EnableEvents=p;r._enableEvents=p;if(r._bRemoteMode&&s.RemoteScan&&(r._isBindViewer()||s.ShowRemoteScanUI)){var l=document.createElement("div");l.style.position="absolute";l.style.zIndex="510000";l.style.left="0";l.style.top="0";var n=document.createElement("img");n.className="ds-img-screen";l.appendChild(n);document.body.appendChild(l);r._acquireDivEL=l}if("SelectSourceByIndex" in s){var q=s.SelectSourceByIndex;delete s.SelectSourceByIndex;return r.SelectSourceByIndexAsync(q).then(function(){x=["[",a.stringify(s),"]"].join("");r.__bAcquireImageNow=true;return r.__innerAcquireImage("AcquireImage",x,false,t,m)},function(z){m(z.code,z.message)})}if(!r._bRemoteMode){if(r.bPageFocus&&h.IfAlwaysFocusOnPopupWindow){if(!r.bServerAlwaysFocusOnPopupWindow){r._OnPageFocus(true)}}else{if(r.bServerAlwaysFocusOnPopupWindow){r._OnPageBlur(true)}}}x=["[",a.stringify(s),"]"].join("");r.__bAcquireImageNow=true;return r.__innerAcquireImage("AcquireImage",x,false,t,m)};c._startScan=function(t,s,r){var o=this,q=null,l=null,u,p;if(a.isUndefined(t)||t==null){p={}}else{p=t}o._resetErr();if(!o._isValid()){return false}if(a.isFunction(s)){q=function(){s(p)}}if(a.isFunction(r)){l=function(x,w){r(x,w,p)}}if(i.isServerInvalid(o)){if(a.isFunction(l)){l(o._errorCode,o._errorString)}return false}if(!a.License.checkProductKey(o,{Core:true})){if(a.isFunction(l)){l(o._errorCode,o._errorString)}return false}var n=0;for(var m=0;m<e.length;m++){var v=["__",e[m]].join("");if(a.isFunction(o[v])){n=n|(1<<m)}}p.EnableEvents=n;u=["[",a.stringify(p),"]"].join("");o.__bAcquireImageNow=true;return o.__innerAcquireImage("StartScan",u,false,q,l)};c.CancelAllPendingTransfers=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CancelAllPendingTransfers")}return this._innerFun("CancelAllPendingTransfers")};c.CloseSource=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CloseSource")}return l._innerFun("CloseSource")};c.CloseSourceManager=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CloseSourceManager")}return l._innerFun("CloseSourceManager")};c.CloseSourceAsync=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("CloseSource")}return l._innerFunV2("CloseSource")};c.CloseSourceManagerAsync=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("CloseSourceManager")}return l._innerFunV2("CloseSourceManager")};c.DisableSource=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("DisableSource")}return l._innerFun("DisableSource")};c.FeedPage=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("FeedPage")}return l._innerFun("FeedPage")};c.GetDeviceType=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("GetDeviceType")}return l._innerFun("GetDeviceType")};c.GetSourceNameItems=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("GetSourceNameItems")}if(m.__sourceCount<0){m.SourceCount=0}if(l<m.__sourceCount&&l>=0){return m.__sourceName[l]}else{return""}};c.SourceNameItems=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("SourceNameItems")}return m.GetSourceNameItems(l)};var d=function(m){var l=JSON.parse(j(m));a.each(l,function(p){if(p.ProductName){var o=p.ProductName;p.ProductName=a.base64.decode(o)}if(p.ProductFamily){var q=p.ProductFamily;p.ProductFamily=a.base64.decode(q)}if(p.Manufacturer){var n=p.Manufacturer;p.Manufacturer=a.base64.decode(n)}if(p.Version&&p.Version.Info){var r=p.Version.Info;p.Version.Info=a.base64.decode(r)}});return l};c._getSourceNamesSyncV2=function(m){var p=this,l=1,o=[],n;n=p._innerFun("GetSourceNames",i.makeParams(l,m));if(p._errorCode!=0&&p._errorCode!=-3032){return[]}if(n!=""){o=d(n)}return o};c._getSourceNamesAsyncV2=function(m){var n=this,l=1;return n._innerFunV2("GetSourceNames",i.makeParams(l,m)).then(function(p){if(n._errorCode!=0&&n._errorCode!=-3032){throw 0}var o=[];if(p!=""){o=d(p)}return o})};c.GetSourceNames=function(l){var n=this,m=n.SourceCount;if(m<=0){m=0}if(l){return n.__sourceDetails}else{return n.__sourceName}};c._resetSources=function(){var l=this;l.__defaultSourceName="";l.__sourceCount=0;l.__icaSourceCount=-1;l.__sourceName=[];l.__sourceDetails=[]};c.getSourceCount=function(){var q=this,n,p=false,m=false,o=false;q._resetErr();if(!q._isValid()){return false}if(q._bRemoteMode){if(q.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumWindow){o=true}else{if(q.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumLinux){m=true}else{if(q.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumMac){p=true}}}}else{p=f.bMac;m=f.bLinux;o=f.bWin}q._resetErr();if(!q._isValid()){return false}q._resetSources();a.showMask();if(p&&(q._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA)){n=q._getSourceNamesAsyncV2(Dynamsoft.EnumDWT_Driver.ICA).then(function(u){var r,t,s;for(s=0;s<u.length;s++){t=u[s];r=t.ProductName;if(a.isString(r)){r=j(a.trim(r));if(r!==""){if(t.DriverType==="ICA"){r="ICA-"+r}if(t.IsDefaultSource==="true"){q.__defaultSourceName=r}q.__sourceName.push(r);q.__sourceDetails.push(t)}}}q.__icaSourceCount=q.__sourceDetails.length}).then(function(){return q._getSourceNamesAsyncV2(Dynamsoft.EnumDWT_Driver.TWAIN)}).then(function(u){var r,t,s;for(s=0;s<u.length;s++){t=u[s];r=t.ProductName;if(a.isString(r)){r=j(a.trim(r));if(r!==""){if(t.DriverType==="ICA"){r="ICA-"+r}if(t.IsDefaultSource==="true"){q.__defaultSourceName=r}q.__sourceName.push(r);q.__sourceDetails.push(t)}}}}).then(function(){var r=q.__sourceDetails.length;q.__sourceCount=r;if(q.__defaultSourceName===""&&q.__sourceName.length>0){q.__defaultSourceName=q.__sourceName[0]}a.hideMask();return r},function(){q._resetSources();q.__icaSourceCount=0;a.hideMask();return 0})}else{if(o&&Dynamsoft.dcp.b64bit&&(q._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64)){n=q._getSourceNamesAsyncV2(Dynamsoft.EnumDWT_Driver.TWAIN).then(function(u){var r,t,s;for(s=0;s<u.length;s++){t=u[s];r=t.ProductName;if(a.isString(r)){r=j(a.trim(r));if(r!==""){if(t.IsDefaultSource==="true"){q.__defaultSourceName=r}q.__sourceName.push(r);q.__sourceDetails.push(t)}}}q.__icaSourceCount=q.__sourceDetails.length});if(Dynamsoft.dcp.b64bit){n=n.then(function(){return q._getSourceNamesAsyncV2(Dynamsoft.EnumDWT_Driver.TWAIN64)}).then(function(r){var s,u,t;for(t=0;t<r.length;t++){u=r[t];s=u.ProductName;if(a.isString(s)){s=a.trim(s);if(s!==""){if(u.DriverType==="TWAIN(64Bit)"){s="Twain64-"+s}if(u.IsDefaultSource==="true"){q.__defaultSourceName=s}q.__sourceName.push(s);q.__sourceDetails.push(u)}}}})}n=n.then(function(){var r=q.__sourceDetails.length;q.__sourceCount=r;if(q.__defaultSourceName===""&&q.__sourceName.length>0){q.__defaultSourceName=q.__sourceName[0]}a.hideMask();return r},function(){q._resetSources();q.__icaSourceCount=0;a.hideMask();return 0})}else{var l=1;n=q._getSourceNamesAsyncV2().then(function(u){var r,t,s;for(s=0;s<u.length;s++){t=u[s];r=t.ProductName;if(a.isString(r)){r=j(a.trim(r));if(r!==""){if(t.DriverType==="ICA"){r="ICA-"+r}if(t.IsDefaultSource==="true"){q.__defaultSourceName=r}q.__sourceName.push(r);q.__sourceDetails.push(t)}}}}).then(function(){var r=q.__sourceDetails.length;q.__sourceCount=r;if(q.__defaultSourceName===""&&q.__sourceName.length>0){q.__defaultSourceName=q.__sourceName[0]}q.__icaSourceCount=0;a.hideMask();return r},function(){q._resetSources();q.__icaSourceCount=0;a.hideMask();return 0})}}return n};c.GetSourceNamesAsync=function(l){var n=this,m;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupportAsync("GetSourceNames")}m=n.getSourceCount();if(l){return m.then(function(o){return n.__sourceDetails})}else{return m.then(function(o){return n.__sourceName})}};c.GetSourceType=function(n){var r=this,p=n*1,l=0,q=false,m=false,o=false;r._resetErr();if(!r._isValid()){return false}if(r._bRemoteMode){if(r.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumWindow){o=true}else{if(r.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumLinux){m=true}else{if(r.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumMac){q=true}}}}else{q=f.bMac;m=f.bLinux;o=f.bWin}if(q&&r._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA){if(r.__icaSourceCount==-1){l=r.SourceCount;if(l<=0){l=0}}if(p>=r.__icaSourceCount){p-=r.__icaSourceCount;r.CloseSourceManager();r._innerFun("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN));r.OpenSourceManager()}else{r.CloseSourceManager();r._innerFun("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.ICA));r.OpenSourceManager()}}else{if(o&&Dynamsoft.dcp.b64bit&&r._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(r.__icaSourceCount==-1){l=r.SourceCount;if(l<=0){l=0}}if(p>=r.__icaSourceCount){p-=r.__icaSourceCount;r.CloseSourceManager();r._innerFun("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN64));r.OpenSourceManager()}else{r.CloseSourceManager();r._innerFun("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN));r.OpenSourceManager()}}}return r._innerFun("GetSourceType",i.makeParams(p))};c.OpenSource=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("OpenSource")}return l._innerFun("OpenSource")};c.OpenSourceManager=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("OpenSourceManager")}return l._innerFun("OpenSourceManager")};c.OpenSourceAsync=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("OpenSource")}return l._innerFunV2("OpenSource")};c.OpenSourceManagerAsync=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("OpenSourceManager")}return l._innerFunV2("OpenSourceManager")};c.ResetImageLayout=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("ResetImageLayout")}return l._innerFun("ResetImageLayout")};c.RewindPage=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("RewindPage")}return l._innerFun("RewindPage")};c.SelectSource=function(l,m){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("SelectSource",m)}if(a.isUndefined(l)){if(n._bRemoteMode&&n.IfShowUI){a.Errors.SelectSourceMustAsyncWhenRemote(n);return false}if(n._driverType==Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64){a.Errors.SelectSourceMustAsync(n);return false}return n._innerFun("SelectSource")}else{n.SelectSourceAsync().then(l,function(){if(a.isFunction(m)){m(n.ErrorCode,n.ErrorString)}});return true}};c.SelectSourceAsync=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupportAsync("SelectSource")}if(l){return m._innerFunV2("SelectSource",i.makeParams(l))}return m.getSourceCount().then(function(x){var y=document,t,w;if(x<=0){var r=h.CustomizableDisplayInfo.dialogText.selectSource[3];alert(r);return a.Promise.reject(r)}if(!a.dialog.selectsourcedlg){var p,q=-1;w=y.createElement("dialog");w.className="dynamsoft-dialog-selectsource";w.style.top="20%";if(f.bIE||f.bEdge){w.style.width="300px"}w.setAttribute("closed","closed");p=[];p.push('<ul id="dynamsoft-dialog-selectsource-sourcelist-ul">');for(t=0;t<m.__sourceCount;t++){var n="";if((m.__defaultSourceName==""&&t==0)||m.__defaultSourceName==m.__sourceName[t]){n=" dynamsoft-dialog-selectsource-sourcelist-li-selected";q=t}p.push('<li class="dynamsoft-dialog-selectsource-item'+n+'" sourceindex='+t+">"+m.__sourceName[t]+"</li>")}p.push("</ul>");p=p.join("");var u=["<p>",h.CustomizableDisplayInfo.dialogText.selectSource[0],"</p>",'<div id="dynamsoft-dialog-selectsource-sourcelist">',p,"</div>",'<div><input type="button" value="',h.CustomizableDisplayInfo.dialogText.selectSource[1],'" class="dynamsoft-dialog-selectsource-button-select">','<input type="button" value="',h.CustomizableDisplayInfo.dialogText.selectSource[2],'" class="dynamsoft-dialog-selectsource-button-cancel"></div>'].join("");w.innerHTML=u;a.dialog.selectsourcedlg=w;y.body.appendChild(a.dialog.selectsourcedlg);a.each(a.all(".dynamsoft-dialog-selectsource-item"),function(A,z){a.addEventListener(A,"click",function(C){var F=C.target,D=F.attributes.sourceindex.value,B=F.parentElement.children;for(var E=0;E<B.length;E++){B[E].className="dynamsoft-dialog-selectsource-item"}F.className="dynamsoft-dialog-selectsource-item dynamsoft-dialog-selectsource-sourcelist-li-selected";a.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",D)})});a.get("dynamsoft-dialog-selectsource-sourcelist-ul").setAttribute("selectedSourceIndex",q.toString());a.dialog.setup(a.dialog.selectsourcedlg)}else{var s=Dynamsoft.Lib.one(".dynamsoft-dialog-selectsource");if(s&&s.length>0){w=s[0]}}a.dialog.selectsourcedlg.showModal();var o=0;if(y.compatMode=="CSS1Compat"){o=y.documentElement.scrollTop}else{o=y.body.scrollTop}if(o>0&&w){var v=a.DOM.getElDimensions(w,true).offsetTop;v+=o;w.style.top=v+"px"}return new a.Promise(function(A,z){a.removeEventListener(a.one(".dynamsoft-dialog-selectsource-button-select")[0],"click");a.removeEventListener(a.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click");a.addEventListener(a.one(".dynamsoft-dialog-selectsource-button-select")[0],"click",function(){var B=parseInt(Dynamsoft.Lib.get("dynamsoft-dialog-selectsource-sourcelist-ul").attributes.selectedSourceIndex.value);m.SelectSourceByIndexAsync(B).then(function(){a.dialog.selectsourcedlg.close();document.body.removeChild(a.dialog.selectsourcedlg);a.dialog.selectsourcedlg=false;A(B)})});a.addEventListener(a.one(".dynamsoft-dialog-selectsource-button-cancel")[0],"click",function(){a.dialog.selectsourcedlg.close();document.body.removeChild(a.dialog.selectsourcedlg);a.dialog.selectsourcedlg=false;z({code:-1032,message:"User cancelled the operation."})})})})};c.SelectSourceByIndex=function(m){var r=this,p=m*1,l=0,q=false,n=false,o=false;if(!r._isValid()){return false}if(r._bRemoteMode){if(r.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumWindow){o=true}else{if(r.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumLinux){n=true}else{if(r.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumMac){q=true}}}}else{q=f.bMac;n=f.bLinux;o=f.bWin}r._resetErr();if(r._isMobileMode()){return r._mobileNotSupport("SelectSourceByIndex")}if(q&&r._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA){if(r.__icaSourceCount==-1){l=r.SourceCount;if(l<=0){l=0}}if(p>=r.__icaSourceCount){p-=r.__icaSourceCount;r.CloseSourceManager();r._innerFun("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN));r.OpenSourceManager()}else{r.CloseSourceManager();r._innerFun("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.ICA));r.OpenSourceManager()}}else{if(o&&Dynamsoft.dcp.b64bit&&r._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(r.__icaSourceCount==-1){l=r.SourceCount;if(l<=0){l=0}}if(p>=r.__icaSourceCount){p-=r.__icaSourceCount;r.CloseSourceManager();r._innerFun("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN64));r.OpenSourceManager()}else{r.CloseSourceManager();r._innerFun("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN));r.OpenSourceManager()}}}return r._innerFun("SelectSourceByIndex",i.makeParams(p))};c._resetImageCaptureDriverType=function(o){var r=this,q,m=o,p=false,l=false,n=false;r._resetErr();if(!r._isValid()){return false}if(r._bRemoteMode){if(r.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumWindow){n=true}else{if(r.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumLinux){l=true}else{if(r.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumMac){p=true}}}}else{p=f.bMac;l=f.bLinux;n=f.bWin}if(p&&r._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA){if(r.__icaSourceCount==-1){q=r.getSourceCount()}else{q=a.Promise.resolve(r.__sourceCount)}q=q.then(function(){return r.CloseSourceManagerAsync()});if(o>=r.__icaSourceCount){m-=r.__icaSourceCount;q=q.then(function(){return r._innerFunV2("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN))})}else{q=q.then(function(){return r._innerFunV2("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.ICA))})}q=q.then(function(){return r.OpenSourceManagerAsync()})}else{if(n&&Dynamsoft.dcp.b64bit&&r._driverType===Dynamsoft.EnumDWT_Driver.TWAIN_AND_TWAIN64){if(r.__icaSourceCount==-1){q=r.getSourceCount()}else{q=a.Promise.resolve(r.__sourceCount)}q=q.then(function(){return r.CloseSourceManagerAsync()});if(o>=r.__icaSourceCount){m-=r.__icaSourceCount;q=q.then(function(){return r._innerFunV2("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN64))})}else{q=q.then(function(){return r._innerFunV2("ImageCaptureDriverType",i.makeParams(Dynamsoft.EnumDWT_Driver.TWAIN))})}q=q.then(function(){return r.OpenSourceManagerAsync()})}else{q=a.Promise.resolve(0)}}return q.then(function(){return m})};c.GetSourceTypeAsync=function(l){var n=this,m=l*1;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupportAsync("GetSourceType")}return n._resetImageCaptureDriverType(m).then(function(o){return n._innerFunV2("GetSourceType",i.makeParams(o))})};c.SelectSourceByIndexAsync=function(l){var n=this,m=l*1;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupportAsync("SelectSourceByIndex")}return n._resetImageCaptureDriverType(m).then(function(o){return n._innerFunV2("SelectSourceByIndex",i.makeParams(o))})};c.SetFileXferInfo=function(m,o){var p=this;p._resetErr();if(!p._isValid()){return false}if(p._isMobileMode()){return p._mobileNotSupport("SetFileXferInfo")}var l,n;if(Dynamsoft.navInfoSync.bFileSystem){l=m.replace(/<%/g,"<%25")}else{l=m}n=i.replaceLocalFilename(l);return p._innerFun("SetFileXferInfo",i.makeParams(n,o))};c.SetImageLayout=function(o,n,m,l){var p=this;p._resetErr();if(!p._isValid()){return false}if(p._isMobileMode()){return p._mobileNotSupport("SetImageLayout")}return p._innerFun("SetImageLayout",i.makeParams(o,n,m,l))};c.CapGet=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGet")}return this._innerFun("CapGet")};c.CapGetCurrent=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGetCurrent")}return this._innerFun("CapGetCurrent")};c.CapGetDefault=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGetDefault")}return this._innerFun("CapGetDefault")};c.CapGetFrameBottom=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("CapGetFrameBottom")}return this._innerFun("CapGetFrameBottom",i.makeParams(l))};c.CapGetFrameLeft=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("CapGetFrameLeft")}return this._innerFun("CapGetFrameLeft",i.makeParams(l))};c.CapGetFrameRight=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("CapGetFrameRight")}return this._innerFun("CapGetFrameRight",i.makeParams(l))};c.CapGetFrameTop=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("CapGetFrameTop")}return this._innerFun("CapGetFrameTop",i.makeParams(l))};c.CapGetHelp=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGetHelp")}return this._innerFun("CapGetHelp")};c.CapGetLabel=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGetLabel")}return this._innerFun("CapGetLabel")};c.CapGetLabels=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapGetLabels")}return this._innerFun("CapGetLabels")};c.CapIfSupported=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("CapIfSupported")}return this._innerFun("CapIfSupported",i.makeParams(l))};c.CapReset=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapReset")}return this._innerFun("CapReset")};c.CapSet=function(){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CapSet")}return this._innerFun("CapSet")};c.CapSetFrame=function(n,p,o,m,l){var q=this;q._resetErr();if(!q._isValid()){return false}if(q._isMobileMode()){return q._mobileNotSupport("CapSetFrame")}return this._innerFun("CapSetFrame",i.makeParams(n,p,o,m,l))};c.GetCapItems=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("GetCapItems")}return this._innerFun("GetCapItems",i.makeParams(l))};c.GetCapItemsString=function(l){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("GetCapItemsString")}return this._innerFun("GetCapItemsString",i.makeParams(l))};c.SetCapItems=function(m,l){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("SetCapItems")}return this._innerFun("SetCapItems",i.makeParams(m,l))};c.SetCapItemsString=function(m,l){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("SetCapItemsString")}return this._innerFun("SetCapItemsString",i.makeParams(m,l))};c.GenerateURLForUploadData=function(w,t,v,u,p){var r=this,l=[];if(t==EnumDWT_ImageType.IT_BMP||t==EnumDWT_ImageType.IT_JPG||t==EnumDWT_ImageType.IT_PNG){if(!a.isArray(w)){a.Errors.IndicesNotArray(r);if(a.isFunction(u)){u(r.ErrorCode,r.ErrorString,"",w,t)}return""}if(w.length>1){a.Errors.UploadIndexMoreThanOne(r);if(a.isFunction(u)){u(r.ErrorCode,r.ErrorString,"",w,t)}return""}if(!r._checkIndices(w)){u(r.ErrorCode,r.ErrorString,"",w,t);return false}var q=r._ImgManager.convertClientIndexToServerId(w[0]);if(q!=-1){l.push(q)}}else{if(t==EnumDWT_ImageType.IT_TIF||t==EnumDWT_ImageType.IT_PDF){var n,o;if(a.isArray(w)){if(!r._checkIndices(w)){u(r.ErrorCode,r.ErrorString,"",w,t);return false}n=w}else{if(w==-1){n=[];for(o=0;o<r._ImgManager.count();o++){n.push(o)}}else{a.Errors.IndicesNotArray(r);if(a.isFunction(u)){u(r.ErrorCode,r.ErrorString,r.__HTTPPostResponseString,w,t)}return""}}a.each(n,function(y){var x=r._ImgManager.convertClientIndexToServerId(y);if(x!=-1){l.push(x)}})}else{if(!a.isArray(w)){a.Errors.IndicesNotArray(r)}else{a.Errors.InvalidImageType(r)}if(a.isFunction(u)){u(r.ErrorCode,r.ErrorString,r.__HTTPPostResponseString,w,t)}return""}}if(a.isFunction(v)&&a.isFunction(u)){var s=function(y,x){v(y,x,t)},m=function(x){u(r.ErrorCode,r.ErrorString,r.__HTTPPostResponseString,x,t)};r._asyncGenerateURLForUploadData(l,t,p,v,m);return true}else{return this._syncGenerateURLForUploadData(l,t,p)}};c._syncGenerateURLForUploadData=function(n,x,s){var v=this,w,r=false,u=Dynamsoft.dcp.managerVersion.join(""),t=s,o=",";if(!a.isString(t)||t==""){t="";o=""}var m=["[",'"dcp","dwasm_'+u,'",',x,',"',n.join(","),'"',o,t,"]"].join("");w=this._innerFunRaw("GenerateURLForUploadData",m,false,false,true);if(w&&a.isArray(w.result)&&w.result.length>1){var y=w.result[0],l=w.result[1];if(y==true){r=["dcp://dwasm_",u,"/file/",l].join("")}}var q=[];if(a.isArray(n)){a.each(n,function(p){var z=v._ImgManager.convertServerIdToClientIndex(p);if(z>-1){q.push(z)}})}if(r==false){a.Errors.GenerateURL_InvalidRetFromServer(v);return""}return r};c._asyncGenerateURLForUploadData=function(m,u,t,z,y){var v=this,x=u,o=function(){if(a.isFunction(y)){var p=[];if(a.isArray(m)){a.each(m,function(A){var B=v._ImgManager.convertServerIdToClientIndex(A);if(B>-1){p.push(B)}})}y(p)}return""},w,n=",";if(x==EnumDWT_ImageType.IT_BMP||x==EnumDWT_ImageType.IT_JPG||x==EnumDWT_ImageType.IT_PNG){if(m.length>1){a.Errors.UploadIndexMoreThanOne(v);o();return""}}else{if(x==EnumDWT_ImageType.IT_TIF||x==EnumDWT_ImageType.IT_PDF){}else{a.Errors.InvalidImageType(v);o();return""}}var q=false,s=Dynamsoft.dcp.managerVersion.join(""),r=t;if(!a.isString(r)||r==""){r="";n=""}var l=["[",'"dcp","dwasm_'+s,'",',x,',"',m.join(","),'"',n,r,"]"].join("");return this._innerFunRaw("GenerateURLForUploadData",l,true,false,true,function(A){if(A&&a.isArray(A.result)&&A.result.length>0){var p=A.result[0];if(p==true&&A.result.length>1){var B=A.result[1];q=["dcp://dwasm_",s,"/file/",B].join("")}else{if(A.exception!==undefined&&A.description!==undefined){v._errorCode=A.exception;v._errorString=A.description}else{a.Errors.GenerateURL_InvalidRetFromServer(v)}}}else{a.Errors.GenerateURL_InvalidRetFromServer(v)}if(q==false){o();return""}if(a.isFunction(z)){var C=[];if(a.isArray(m)){a.each(m,function(D){var E=v._ImgManager.convertServerIdToClientIndex(D);if(E>-1){C.push(E)}})}z(q,C,u)}return q},o)}});Dynamsoft.Ready(function(c,b){var a=Dynamsoft;if(!c.product.bHTML5Edition){return}var e=c.html5.STwain,d=e.prototype,f=c.html5.Funs;d.AddText=function(r,p,o,q,k,s,g,h){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("AddText")}var m=parseInt(r);if(isNaN(m)){c.Errors.InvalidIndex(n);return false}if(m<0||m>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return false}var j=c.RGB2BGR(k),i=c.RGB2BGR(s),l=n._ImgManager.convertClientIndexToServerId(m);if(l==-1){c.Errors.IndexOutOfRange(n);return false}return n._innerFun("AddText",f.makeParams(l,p,o,q,j,i,g,h))};d.CreateTextFont=function(i,u,o,n,q,r,j,s,g,p,k,m,t,h){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CreateTextFont")}return this._innerFun("CreateTextFont",f.makeParams(i,u,o,n,q,r,j,s,g,p,k,m,t,h))};d.CopyToClipboard=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}if(j._isMobileMode()){return j._mobileNotSupport("CopyToClipboard")}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return false}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return false}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return false}return j._innerFun("CopyToClipboard",f.makeParams(g))};d.CopyToClipboardAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}if(j._isMobileMode()){return j._mobileNotSupportAsync("CopyToClipboard")}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("CopyToClipboard",f.makeParams(g))};d._asyncErase=function(u,k,q,t,h,s,l){var o=this,p=function(){f.refreshImageAfterInvokeFun(o,u);if(c.isFunction(s)){setTimeout(s,30)}},j=function(){if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}};var n=parseInt(u),g,m;var i=o.__BackgroundFillColor;if(c.isUndef(i)){i="FFFFFF"}else{if(c.isNumber(i)){i=i.toString(16)}else{if(c.isString(i)){i=i.replace("#","")}}}return o._innerSendToMobile("Erase",Dynamsoft.Lib.MobileFuns.makeParams(n,k,q,t,h,i),0,p,j)};d.Erase=function(s,i,n,q,h,p,o){var m=this;m._resetErr();if(!m._isValid()){return false}var l=parseInt(s),g,k;if(isNaN(l)){c.Errors.InvalidIndex(m);if(c.isFunction(o)){o(m.ErrorCode,m.ErrorString)}return false}if(l<0||l>=m._ImgManager.count()){c.Errors.IndexOutOfRange(m);if(c.isFunction(o)){o(m.ErrorCode,m.ErrorString)}return false}if(m._isMobileMode()){return m._asyncErase(l,i,n,q,h,p,o)}var j=m._ImgManager.convertClientIndexToServerId(l);if(j==-1){c.Errors.IndexOutOfRange(m);if(c.isFunction(o)){o(m.ErrorCode,m.ErrorString)}return false}m._ImgManager.getView().GetWebViewer().clearSelectedAreas();g=m._innerFun("Erase",f.makeParams(j,i,n,q,h));k=(g==1);if(k){if(c.isFunction(p)){p()}}else{if(c.isFunction(o)){o(m.ErrorCode,m.ErrorString)}}return k};d.GetImageBitDepth=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return false}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.bitDepth}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageBitDepth",f.makeParams(h))};d.GetImageWidth=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return -1}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return -1}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.width}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return -1}return k._innerFun("GetImageWidth",f.makeParams(h))};d.GetImageHeight=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return -1}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return -1}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.height}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return -1}return k._innerFun("GetImageHeight",f.makeParams(h))};d.GetImageSize=function(j,i,k){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("GetImageSize")}var h=parseInt(j);if(isNaN(h)){c.Errors.InvalidIndex(l);return -1}if(h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return -1}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return -1}return l._innerFun("GetImageSize",f.makeParams(g,i,k))};d.GetImageSizeWithSpecifiedType=function(i,j){var k=this;k._resetErr();if(!k._isValid()){return false}if(k._isMobileMode()){return k._mobileNotSupport("GetImageSizeWithSpecifiedType")}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(k);return -1}if(h<0||h>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return -1}var g=k._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(k);return -1}return k._innerFun("GetImageSizeWithSpecifiedType",f.makeParams(g,j))};d.GetImageXResolution=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return false}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.resolutionX}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageXResolution",f.makeParams(h))};d.GetImageYResolution=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return false}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return g.resolutionY}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("GetImageYResolution",f.makeParams(h))};d.SelectAllImages=function(){var k=this,g=k.HowManyImagesInBuffer,j,h=[];k._resetErr();if(!k._isValid()){return false}for(j=0;j<g;j++){h.push(j)}k._ImgManager.SetSelectedClientIndexArray(h);return h};d.SelectImages=function(g){var h=this;h._resetErr();if(!h._isValid()){return false}return h._ImgManager.SetSelectedClientIndexArray(g)};d._asyncGetSkewAngleOnly=function(o,n,i){var k=this,m=function(p){f.refreshImageAfterInvokeFun(k,o);if(c.isFunction(n)){setTimeout(function(){n(p)},30)}},h=function(){if(c.isFunction(i)){i(k.ErrorCode,k.ErrorString)}};var l=parseInt(o),g,j;return k._innerSendToMobile("GetSkewAngleOnly",Dynamsoft.Lib.MobileFuns.makeParams(l),0,m,h)};d._asyncGetSkewAngle=function(o,n,i){var k=this,m=function(p){f.refreshImageAfterInvokeFun(k,o);if(c.isFunction(n)){setTimeout(function(){n(p)},30)}},h=function(){if(c.isFunction(i)){i(k.ErrorCode,k.ErrorString)}};var l=parseInt(o),g,j;return k._innerSendToMobile("GetSkewAngle",Dynamsoft.Lib.MobileFuns.makeParams(l),0,m,h)};d.GetSkewAngle=function(k,j,i){var n=this,l,m;n._resetErr();if(!n._isValid()){return false}var h=parseInt(k);if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){return n._asyncGetSkewAngle(h,j,i)}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("GetSkewAngle",f.makeParams(g));if(n.ErrorCode==0){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j(l)}else{return l}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return true};d.GetSkewAngleEx=function(k,m,l,j,g){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("GetSkewAngleEx")}var i=parseInt(k);if(isNaN(i)){c.Errors.InvalidIndex(n);return false}if(i<0||i>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return false}var h=n._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(n);return false}return n._innerFun("GetSkewAngleEx",f.makeParams(h,m,l,j,g))};d.IsBlankImageEx=function(o,h,m,n,g,i){var k=this,l=parseInt(o);k._resetErr();if(!k._isValid()){return false}if(isNaN(l)){c.Errors.InvalidIndex(k);return false}if(l<0||l>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}var j=k._ImgManager.convertClientIndexToServerId(l);if(j==-1){c.Errors.IndexOutOfRange(k);return false}return k._innerFun("IsBlankImageEx",f.makeParams(j,h,m,n,g,i))};d.MirrorAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._innerSendToMobileV2("Mirror",Dynamsoft.Lib.MobileFuns.makeParams(h)).then(function(){f.refreshImageAfterInvokeFun(j,h)})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("Mirror",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h)}else{throw {code:j._errorCode,message:j._errorString}}})};d.Mirror=function(k,j,i){var n=this;n._resetErr();if(!n._isValid()){return false}var h=parseInt(k);if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._innerSendToMobileV2("Mirror",Dynamsoft.Lib.MobileFuns.makeParams(h)).then(function(){f.refreshImageAfterInvokeFun(n,h);if(j){j()}},function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}var l=n._innerFun("Mirror",f.makeParams(g)),m;m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.RemoveAllImages=function(){var n=this,o=!0,k=n._isMobileMode();n._resetErr();if(!n._isValid()){return false}var q=n._ImgManager.GetCurrentTag();if(q==""||q=="All"){if(k){n._OnBitmapChanged(["10","-1",3,-1,0])}else{o=n._innerFun("RemoveAllImages");if(o||n._errorCode==-1033){n._OnBitmapChanged(["0","-1",3,-1,0])}}}else{var j,p=function(){},g=function(){},h=[],r="0";if(k){r="10"}var m=n.HowManyImagesInBuffer;for(j=m-1;j>=0;j--){var l=n._ImgManager.convertClientIndexToServerId(j);if(l>-1){if(k){h.push(l)}else{o=n._innerFunRaw("RemoveImage",f.makeParams(l),true,false,true,p,g);if(o||n._errorCode==-1033){h.push(l)}}}}n._OnBitmapChanged([r,h.join(","),3,n._ImgManager.getCurrentImageIndex(),n._ImgManager.count()])}return o};d.RemoveImage=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j),h=true;if(isNaN(i)){c.Errors.InvalidIndex(k);return false}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return false}var g=k._ImgManager.convertClientIndexToServerId(i);if(g==-1){c.Errors.IndexOutOfRange(k);return false}if(k._isMobileMode()){k._OnBitmapChanged(["10",""+g,3,k._ImgManager.getCurrentImageIndex(),k._ImgManager.count()])}else{h=k._innerFun("RemoveImage",f.makeParams(g));if(h||k._errorCode==-1033){k._OnBitmapChanged(["0",""+g,3,k._ImgManager.getCurrentImageIndex(),k._ImgManager.count()])}}return h};d.RemoveAllImagesAsync=function(){var l=this,n=!0;l._resetErr();if(!l._isValid()){return false}var o=l._ImgManager.GetCurrentTag();if(o==""||o=="All"){if(l._isMobileMode()){l._OnBitmapChanged(["10","-1",3,-1,0]);return c.Promise.resolve(true)}else{return l._innerFunV2("RemoveAllImages").then(function(i){if(i||l._errorCode==-1033){l._OnBitmapChanged(["0","-1",3,-1,0]);return true}return false})}}else{var h,g=[],p,m=l.HowManyImagesInBuffer;for(h=0;h<m;h++){var j=l._ImgManager.convertClientIndexToServerId(h);if(j>-1){g.push(j)}}if(l._isMobileMode()){p=c.Promise.resolve(g.join(","))}else{var k=[];p=c.Promise.resolve(0);for(h=0;h<g.length;h++){p=p.then(function(i){return l._innerFunRawV2("RemoveImage",f.makeParams(g[i])).then(function(q){if(q||l._errorCode==-1033){k.push(g[i])}return i++})})}p=p.then(function(){return k.join(",")})}return p.then(function(i){var q="0";if(l._isMobileMode()){q="10"}if(i!=""){l._OnBitmapChanged([q,i,3,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()])}})}};d.RemoveImageAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){j._OnBitmapChanged(["10",""+g,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()]);return c.Promise.resolve(true)}else{return j._innerFunV2("RemoveImage",f.makeParams(g)).then(function(k){if(k||j._errorCode==-1033){j._OnBitmapChanged(["0",""+g,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()]);return true}return false})}};d._removeImageById=function(h,i,k){var j=this,g=function(){j._OnBitmapChanged(["0",""+h,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()]);if(c.isFunction(i)){i()}};return j._innerFunRaw("RemoveImage",f.makeParams(h),true,false,true,g,k)};d._asyncRotateEx=function(k,i,j,g){var m=this,h=parseInt(k),l=m.__BackgroundFillColor;if(c.isUndef(l)){l="FFFFFF"}else{if(c.isNumber(l)){l="0x"+l.toString(16)}else{if(c.isString(l)){l=l.replace("#","")}}}return m._innerSendToMobileV2("RotateEx",Dynamsoft.Lib.MobileFuns.makeParams(h,i,j,g,l)).then(function(){f.refreshImageAfterInvokeFun(m,k)})};d.Rotate=function(p,i,h,o,n){var l=this;l._resetErr();if(!l._isValid()){return false}var m=parseInt(p),g,k;if(isNaN(m)){c.Errors.InvalidIndex(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){l._asyncRotateEx(m,i,h,-1).then(o,function(){if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}});return true}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}g=l._innerFun("Rotate",f.makeParams(j,i,h));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m);if(c.isFunction(o)){o()}}else{if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}}return k};d.RotateEx=function(q,i,h,p,o,n){var l=this;l._resetErr();if(!l._isValid()){return false}var m=parseInt(q),g,k;if(isNaN(m)){c.Errors.InvalidIndex(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){l._asyncRotateEx(m,i,h,p).then(o,function(){if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}});return true}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}g=l._innerFun("RotateEx",f.makeParams(j,i,h,p));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m);if(c.isFunction(o)){o()}}else{if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}}return k};d.RotateLeft=function(k,j,i){var n=this;n._resetErr();if(!n._isValid()){return false}var h=parseInt(k),l,m;if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncRotateEx(h,-90,true,-1).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("RotateLeft",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.RotateRight=function(k,j,i){var n=this;n._resetErr();if(!n._isValid()){return false}var h=parseInt(k),l,m;if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncRotateEx(h,90,true,-1).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("RotateRight",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.RotateAsync=function(k,i,j){var l=this;l._resetErr();if(!l._isValid()){return false}var h=parseInt(k);if(isNaN(h)){c.Errors.InvalidIndex(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(l._isMobileMode()){return l._asyncRotateEx(h,i,j,-1)}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("Rotate",f.makeParams(g,i,j)).then(function(m){if(m==1){f.refreshImageAfterInvokeFun(l,h)}else{throw {code:l._errorCode,message:l._errorString}}})};d.RotateExAsync=function(l,j,k,g){var m=this;m._resetErr();if(!m._isValid()){return false}var i=parseInt(l);if(isNaN(i)){c.Errors.InvalidIndex(m);return c.Promise.reject({code:m._errorCode,message:m._errorString})}if(i<0||i>=m._ImgManager.count()){c.Errors.IndexOutOfRange(m);return c.Promise.reject({code:m._errorCode,message:m._errorString})}if(m._isMobileMode()){return m._asyncRotateEx(i,j,k,g)}var h=m._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(m);return c.Promise.reject({code:m._errorCode,message:m._errorString})}return m._innerFunV2("RotateEx",f.makeParams(h,j,k,g)).then(function(n){if(n==1){f.refreshImageAfterInvokeFun(m,i)}else{throw {code:m._errorCode,message:m._errorString}}})};d.RotateLeftAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._asyncRotateEx(h,-90,true,-1)}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("RotateLeft",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h)}else{throw {code:j._errorCode,message:j._errorString}}})};d.RotateRightAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._asyncRotateEx(h,90,true,-1)}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("RotateRight",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h)}else{throw {code:j._errorCode,message:j._errorString}}})};d._asyncChangeImageSize=function(p,i,n,o){var k=this;var l=parseInt(p),h=parseInt(i),m=parseInt(n),g,j;return k._innerSendToMobileV2("ChangeImageSize",Dynamsoft.Lib.MobileFuns.makeParams(l,h,m,o)).then(function(){f.refreshImageAfterInvokeFun(k,p)})};d.ChangeImageSize=function(t,h,o,s,q,n){var l=this,m=parseInt(t),p=1*h,k=1*o,g,j;l._resetErr();if(!l._isValid()){return false}if(isNaN(m)){c.Errors.InvalidIndex(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(p<=0||k<=0){c.Errors.InvalidWidthOrHeight(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){l._asyncChangeImageSize(m,h,o,s).then(q,function(){if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}});return true}var i=l._ImgManager.convertClientIndexToServerId(m);if(i==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}return false}g=l._innerFun("ChangeImageSize",f.makeParams(i,p,k,s));j=(g==1);if(j){f.refreshImageAfterInvokeFun(l,m);if(c.isFunction(q)){q()}}else{if(c.isFunction(n)){n(l.ErrorCode,l.ErrorString)}}return j};d.ChangeImageSizeAsync=function(o,g,l,n){var i=this,j=parseInt(o),m=1*g,k=1*l;i._resetErr();if(!i._isValid()){return false}if(isNaN(j)){c.Errors.InvalidIndex(i);return c.Promise.reject({code:i._errorCode,message:i._errorString})}if(j<0||j>=i._ImgManager.count()){c.Errors.IndexOutOfRange(i);return c.Promise.reject({code:i._errorCode,message:i._errorString})}if(m<=0||k<=0){c.Errors.InvalidWidthOrHeight(i);return c.Promise.reject({code:i._errorCode,message:i._errorString})}if(i._isMobileMode()){return i._asyncChangeImageSize(j,g,l,n)}var h=i._ImgManager.convertClientIndexToServerId(j);if(h==-1){c.Errors.IndexOutOfRange(i);return c.Promise.reject({code:i._errorCode,message:i._errorString})}return i._innerFunV2("ChangeImageSize",f.makeParams(h,m,k,n)).then(function(p){if(p==1){f.refreshImageAfterInvokeFun(i,j)}else{throw {code:i._errorCode,message:i._errorString}}})};d._asyncFlip=function(h){var i=this;var g=parseInt(h);return i._innerSendToMobileV2("Flip",Dynamsoft.Lib.MobileFuns.makeParams(g)).then(function(){f.refreshImageAfterInvokeFun(i,h)})};d.Flip=function(k,j,i){var n=this;n._resetErr();if(!n._isValid()){return false}var h=parseInt(k),l,m;if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncFlip(h).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("Flip",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.FlipAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(j._isMobileMode()){return j._asyncFlip(h)}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("Flip",f.makeParams(g)).then(function(k){if(k==1){f.refreshImageAfterInvokeFun(j,h)}else{throw {code:j._errorCode,message:j._errorString}}})};d._asyncCrop=function(j,l,k,i,g){var m=this;var h=parseInt(j);return m._innerSendToMobileV2("Crop",Dynamsoft.Lib.MobileFuns.makeParams(h,l,k,i,g)).then(function(){f.refreshImageAfterInvokeFun(m,j);var o,n;o=m.ErrorCode;n=m.ErrorString;m._ImgManager.getView().GetWebViewer().clearSelectedAreas();m._errorCode=o;m._errorString=n})};d.Crop=function(u,j,p,t,h,s,q){var o=this;o._resetErr();if(!o._isValid()){return false}var n=parseInt(u),g,m;if(isNaN(n)){c.Errors.InvalidIndex(o);if(c.isFunction(q)){q(o.ErrorCode,o.ErrorString)}return false}if(n<0||n>=o._ImgManager.count()){c.Errors.IndexOutOfRange(o);if(c.isFunction(q)){q(o.ErrorCode,o.ErrorString)}return false}if(o._isMobileMode()){o._asyncCrop(n,j,p,t,h).then(s,function(){if(c.isFunction(q)){q(o.ErrorCode,o.ErrorString)}});return true}var l=o._ImgManager.convertClientIndexToServerId(n);if(l==-1){c.Errors.IndexOutOfRange(o);if(c.isFunction(q)){q(o.ErrorCode,o.ErrorString)}return false}g=o._innerFun("Crop",f.makeParams(l,j,p,t,h));m=(g==1);var k,i;k=o.ErrorCode;i=o.ErrorString;o._ImgManager.getView().GetWebViewer().clearSelectedAreas();o._errorCode=k;o._errorString=i;if(m){f.refreshImageAfterInvokeFun(o,n);if(c.isFunction(s)){s()}}else{if(c.isFunction(q)){q(k,i)}}return m};d.CropAsync=function(k,m,l,j,g){var n=this;n._resetErr();if(!n._isValid()){return false}var i=parseInt(k);if(isNaN(i)){c.Errors.InvalidIndex(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}if(i<0||i>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}if(n._isMobileMode()){return n._asyncCrop(i,m,l,j,g)}var h=n._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}return n._innerFunV2("Crop",f.makeParams(h,m,l,j,g)).then(function(q){var p,o;p=n.ErrorCode;o=n.ErrorString;n._ImgManager.getView().GetWebViewer().clearSelectedAreas();n._errorCode=p;n._errorString=o;if(q==1){f.refreshImageAfterInvokeFun(n,i)}else{throw {code:n._errorCode,message:n._errorString}}return true})};d.CropToClipboard=function(p,i,n,o,h){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CropToClipboard")}var m=parseInt(p),g,k;if(isNaN(m)){c.Errors.InvalidIndex(l);return false}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);return false}l._ImgManager.getView().GetWebViewer().clearSelectedAreas();g=l._innerFun("CropToClipboard",f.makeParams(j,i,n,o,h));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m)}return k};d.CutFrameToClipboard=function(p,i,n,o,h){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CutFrameToClipboard")}var m=parseInt(p),g,k;if(isNaN(m)){c.Errors.InvalidIndex(l);return false}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);return false}l._ImgManager.getView().GetWebViewer().clearSelectedAreas();g=l._innerFun("CutFrameToClipboard",f.makeParams(j,i,n,o,h));k=(g==1);if(k){f.refreshImageAfterInvokeFun(l,m)}return k};d.CutToClipboard=function(i){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("CutToClipboard")}var h=parseInt(i),j,k;if(isNaN(h)){c.Errors.InvalidIndex(l);return false}if(h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return false}j=l._innerFun("CutToClipboard",f.makeParams(g));k=(j==1);if(k){l._OnBitmapChanged(["0",""+g,3,l._ImgManager.getCurrentImageIndex(),l._ImgManager.count()])}return k};d.CutFrameToClipboardAsync=function(p,i,n,o,h){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("CutFrameToClipboard")}var m=parseInt(p),g,k;if(isNaN(m)){c.Errors.InvalidIndex(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(m<0||m>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}var j=l._ImgManager.convertClientIndexToServerId(m);if(j==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("CutFrameToClipboard",f.makeParams(j,i,n,o,h)).then(function(q){var s=(q==1);if(s){f.refreshImageAfterInvokeFun(l,m)}else{throw {code:l._errorCode,message:l._errorString}}return s})};d.CropToClipboardAsync=function(k,m,l,j,g){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupportAsync("CropToClipboard")}var i=parseInt(k);if(isNaN(i)){c.Errors.InvalidIndex(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}if(i<0||i>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}var h=n._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(n);return c.Promise.reject({code:n._errorCode,message:n._errorString})}return n._innerFunV2("CropToClipboard",f.makeParams(h,m,l,j,g)).then(function(o){var p=(o==1);if(p){f.refreshImageAfterInvokeFun(n,i)}else{throw {code:n._errorCode,message:n._errorString}}return p})};d.CutToClipboardAsync=function(i){var j=this;j._resetErr();if(!j._isValid()){return false}if(j._isMobileMode()){return j._mobileNotSupportAsync("CutToClipboard")}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}if(h<0||h>=j._ImgManager.count()){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}var g=j._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(j);return c.Promise.reject({code:j._errorCode,message:j._errorString})}return j._innerFunV2("CutToClipboard",f.makeParams(g)).then(function(k){var l=(k==1);if(l){j._OnBitmapChanged(["0",""+g,3,j._ImgManager.getCurrentImageIndex(),j._ImgManager.count()])}else{throw {code:j._errorCode,message:j._errorString}}return l})};d._asyncSetDPI=function(u,m,p,j,r,t,s,l){var o=this,q=function(){f.refreshImageAfterInvokeFun(o,u);if(c.isFunction(s)){setTimeout(s,30)}},i=function(){if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}};var n=parseInt(u),k=parseInt(p),h=parseInt(j),g=parseInt(t);if(isNaN(k)||k<=0||isNaN(h)||h<=0||isNaN(g)||g<0){c.Errors.InvalidParameter(o);if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}return false}return o._innerSendToMobile("SetDPI",Dynamsoft.Lib.MobileFuns.makeParams(n,k,h,r,g),0,q,i)};d.SetDPI=function(s,m,h,n,q,p,o){var l=this,g,k;l._resetErr();if(!l._isValid()){return false}var j=parseInt(s);if(isNaN(j)){c.Errors.InvalidIndex(l);if(c.isFunction(o)){o(l.ErrorCode,l.ErrorString)}return false}if(j<0||j>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);if(c.isFunction(o)){o(l.ErrorCode,l.ErrorString)}return false}var i=l._ImgManager.convertClientIndexToServerId(j);if(i==-1){c.Errors.IndexOutOfRange(l);if(c.isFunction(o)){o(l.ErrorCode,l.ErrorString)}return false}if(l._isMobileMode()){return l._asyncSetDPI(j,i,m,h,n,q,p,o)}g=l._innerFun("SetDPI",f.makeParams(i,m,h,n,q));k=(g==1);if(k){if(c.isFunction(p)){p()}}else{if(c.isFunction(o)){o(l.ErrorCode,l.ErrorString)}}return k};d.MoveImage=function(k,j){var l=this;l._resetErr();if(!l._isValid()){return false}var i=parseInt(k),g=parseInt(j),h;if(isNaN(i)||isNaN(g)){c.Errors.InvalidIndex(l);return false}if(i<0||i>=l._ImgManager.count()||g<0||g>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}return l._ImgManager.MoveImage(i,g)};d.SwitchImage=function(k,j){var l=this;l._resetErr();if(!l._isValid()){return false}var i=parseInt(k),g=parseInt(j),h;if(isNaN(i)||isNaN(g)){c.Errors.InvalidIndex(l);return false}if(i<0||i>=l._ImgManager.count()||g<0||g>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return false}return l._ImgManager.SwitchImage(i,g)};d.CloseWorkingProcess=function(){var g=this;g._resetErr();if(!g._isValid()){return false}if(g._isMobileMode()){return g._mobileNotSupport("CloseWorkingProcess")}return g._innerFun("CloseWorkerProcess")};d.RemoveAllSelectedImages=function(){var m=this,g=m._isMobileMode();m._resetErr();if(!m._isValid()){return false}var h=true,j=m._ImgManager.getCurrentImageIndex(),k=m._ImgManager.getSelectedClientIndexArray(),l=[];if(c.isArray(k)){c.each(k,function(n){var o=m._ImgManager.convertClientIndexToServerId(n);if(o!=-1){l.push(o)}})}if(l.length==0&&j>=0){var i=m._ImgManager.convertClientIndexToServerId(j);l.push(i)}if(!g){h=m._innerFun("RemoveAllSelectedImages",f.makeParams(l.join(",")))}if(h){if(!g){m._HowManyImagesInBuffer=m._innerFun("HowManyImagesInBuffer")}c.each(l,function(n){var o="0";if(m._isMobileMode()){o="10"}m._OnBitmapChanged([o,""+n,3,m._ImgManager.getCurrentImageIndex(),m._ImgManager.count()])})}return h};d.RemoveAllSelectedImagesAsync=function(){var n=this,g=n._isMobileMode();n._resetErr();if(!n._isValid()){return false}var h=true,j=n._ImgManager.getCurrentImageIndex(),l=n._ImgManager.getSelectedClientIndexArray(),m=[],k;if(c.isArray(l)){c.each(l,function(o){var p=n._ImgManager.convertClientIndexToServerId(o);if(p!=-1){m.push(p)}})}if(m.length==0&&j>=0){var i=n._ImgManager.convertClientIndexToServerId(j);m.push(i)}if(g){k=c.Promise.resolve(true)}else{k=n._innerFunV2("RemoveAllSelectedImages",f.makeParams(m.join(","))).then(function(o){return o&&n._innerFunV2("HowManyImagesInBuffer").then(function(p){n._HowManyImagesInBuffer=p;return true})})}k=k.then(function(o){if(o){c.each(m,function(p){var q="0";if(n._isMobileMode()){q="10"}n._OnBitmapChanged([q,""+p,3,n._ImgManager.getCurrentImageIndex(),n._ImgManager.count()])})}});return k};d.TagImages=function(j,i){var k=this;k._resetErr();if(!k._isValid()){return false}var h=!0,g=k._ImgManager.getView().GetWebViewer().GetHowManyImagesInBuffer();if(!c.isArray(j)){c.Errors.IndicesNotArray(k);return false}if(!c.isString(i)||i==""){c.Errors.InvalidTagName(k);return false}c.each(j,function(l){if(isNaN(l)||l<0||l>=g){c.Errors.IndexOutOfRange(k);h=!1;return h}});if(!h){return h}return k._ImgManager.AddImageTag(j,i)};d.ClearImageTags=function(g){var h=this;h._resetErr();if(!h._isValid()){return false}if(g==-1||g>=h.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(h);return false}return h._ImgManager.RemoveImageTag(g)};d.SetDefaultTag=function(g){var h=this;h._resetErr();if(!h._isValid()){return false}return h._ImgManager.SetDefaultTag(g)};d.FilterImagesByTag=function(g,i,h){var j=this;j._resetErr();if(!j._isValid()){return false}return j._ImgManager.ShowImagesByFilter(g,i,h)};d.ClearFilter=function(){var g=this;g._resetErr();if(!g._isValid()){return false}return g._ImgManager.ClearFilter()};d._asyncInvert=function(h){var i=this;var g=parseInt(h);return i._innerSendToMobileV2("Invert",Dynamsoft.Lib.MobileFuns.makeParams(g)).then(function(){f.refreshImageAfterInvokeFun(i,h)})};d.Invert=function(k,j,i){var n=this,h=parseInt(k),l,m;n._resetErr();if(!n._isValid()){return false}if(isNaN(h)){c.Errors.InvalidIndex(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(h<0||h>=n._ImgManager.count()){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){n._asyncInvert(h).then(j,function(){if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}});return true}var g=n._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(n);if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}return false}l=n._innerFun("Invert",f.makeParams(g));m=(l==1);if(m){f.refreshImageAfterInvokeFun(n,h);if(c.isFunction(j)){j()}}else{if(c.isFunction(i)){i(n.ErrorCode,n.ErrorString)}}return m};d.InvertAsync=function(i){var l=this,h=parseInt(i),j,k;l._resetErr();if(!l._isValid()){return false}if(isNaN(h)){c.Errors.InvalidIndex(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(l._isMobileMode()){return l._asyncInvert(h)}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("Invert",f.makeParams(g)).then(function(m){var n=(m==1);if(n){f.refreshImageAfterInvokeFun(l,h)}else{throw {code:l._errorCode,message:l._errorString}}return n})};d.RenameTag=function(g,i){var h=this;h._resetErr();if(!h._isValid()){return false}if(c.isUndefined(g)){c.Errors.ParameterCannotEmpty(h);return false}if(g.length==0){c.Errors.OldTagNameRequired(h);return false}if(c.isUndefined(i)||i.length==0){c.Errors.NewTagNameRequired(h);return false}return h._ImgManager.RenameTag(g,i)};d._registLoadCallback=function(h){var g=this;g._resetErr();if(!g._isValid()){return false}return g._ImgManager.RegistLoadCallback(h)};d.GetImageBitDepthAsync=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.bitDepth)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageBitDepth",f.makeParams(h))};d.GetImageWidthAsync=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.width)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageWidth",f.makeParams(h))};d.GetImageHeightAsync=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.height)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageHeight",f.makeParams(h))};d.GetImageSizeAsync=function(j,i,k){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupportAsync("GetImageSize")}var h=parseInt(j);if(isNaN(h)){c.Errors.InvalidIndex(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}if(h<0||h>=l._ImgManager.count()){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}var g=l._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(l);return c.Promise.reject({code:l._errorCode,message:l._errorString})}return l._innerFunV2("GetImageSize",f.makeParams(g,i,k))};d.GetImageSizeWithSpecifiedTypeAsync=function(i,j){var k=this;k._resetErr();if(!k._isValid()){return false}if(k._isMobileMode()){return k._mobileNotSupportAsync("GetImageSizeWithSpecifiedType")}var h=parseInt(i);if(isNaN(h)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(h<0||h>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}var g=k._ImgManager.convertClientIndexToServerId(h);if(g==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageSizeWithSpecifiedType",f.makeParams(g,j))};d.GetImageXResolutionAsync=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.resolutionX)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageXResolution",f.makeParams(h))};d.GetImageYResolutionAsync=function(j){var k=this;k._resetErr();if(!k._isValid()){return false}var i=parseInt(j);if(isNaN(i)){c.Errors.InvalidIndex(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(i<0||i>=k._ImgManager.count()){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}if(k._isMobileMode()){var g=k._ImgManager._UIView.GetMetaDataByIndex(i);return c.Promise.resolve(g.resolutionY)}var h=k._ImgManager.convertClientIndexToServerId(i);if(h==-1){c.Errors.IndexOutOfRange(k);return c.Promise.reject({code:k._errorCode,message:k._errorString})}return k._innerFunV2("GetImageYResolution",f.makeParams(h))}});Dynamsoft.Ready(function(m,h){var g=Dynamsoft,r="";if(!m.product.bHTML5Edition){return}var j=m,o=m.html5.STwain,l=o.prototype,p=!1,i=!0,d=m.html5.Funs,c=function(v,u){if(v._ImgManager.count()==0){m.Errors.NoImage(v);if(m.isFunction(u)){u(v.ErrorCode,v.ErrorString)}return false}return true},a=function(v,w,u){if(!c(v,u)){return false}if(isNaN(w)||!m.isNumber(w)||w<0||w>=v._ImgManager.count()){m.Errors.IndexOutOfRange(v);if(m.isFunction(u)){u(v.ErrorCode,v.ErrorString)}return false}return true},s=function(y,x,u,w){if(y._ImgManager.count()==0){m.Errors.NoImage(y);if(m.isFunction(w)){w(x)}return false}if(m.isNumber(x)){if(isNaN(x)||x<-2||x>=y._ImgManager.count()){m.Errors.IndexOutOfRange(y);if(m.isFunction(w)){w(x)}return false}}else{if(m.isArray(x)){var v;for(v=0;v<x.length;v++){var z=x[v];if(isNaN(z)||!m.isNumber(z)||z<0||z>=y._ImgManager.count()){m.Errors.IndicesOutOfRange(y);if(m.isFunction(w)){w(x)}return false}}}else{m.Errors.IndexOutOfRange(y);if(m.isFunction(w)){w(x)}return false}}if(u==EnumDWT_ImageType.IT_BMP||u==EnumDWT_ImageType.IT_JPG||u==EnumDWT_ImageType.IT_PNG||u==EnumDWT_ImageType.IT_J2K){if(x==-1&&y._ImgManager.count()>1||m.isArray(x)&&x.length>1){m.Errors.UploadIndexMoreThanOne(y);if(m.isFunction(w)){w(x)}}}else{if(u==EnumDWT_ImageType.IT_TIF||u==EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(y);if(m.isFunction(w)){w(x)}return false}}return true},f=function(x){var y=[],v,u,w;if(x._ImgManager.count()<=0){return y}u=x._ImgManager.getCurrentImageIndex();if(u>=0){v=x._ImgManager.convertClientIndexToServerId(u)}w=x._ImgManager.getSelectedClientIndexArray();if(m.isArray(w)){m.each(w,function(z){var A=x._ImgManager.convertClientIndexToServerId(z);if(A!=-1){y.push(A)}})}if(v!=-1&&y.length==0){y.push(v)}return y},k=function(w){if(w._ImgManager.count()<=0){return[]}var v=w._ImgManager.getSelectedClientIndexArray();if(m.isArray(v)){if(v.length==0){var u=w._ImgManager.getCurrentImageIndex();if(u>=0){v.push(u)}}return v}return[]},e=function(x,v){var w=x._ImgManager.GetAllServerIdList();for(var u=0;u<w.length;u++){v.push(w[u])}},q=function(z,v,u,y,x){try{z(v,u,y,x)}catch(w){}v=u=y=x=null},t=function(x,w,u){try{x(w.ErrorCode,w.ErrorString,u)}catch(v){}w=u=null},b=function(A,x,v,u,z,y){try{A(x.ErrorCode,x.ErrorString,v,u,z,y)}catch(w){}x=v=u=z=y=null};l._asyncSaveImage=function(x,u,B,F,w){var A=this,C=function(H){var I=x;if(!j.isString(I)||I==""){I="img"+j.getRandom()+"."+B}else{I=j.replaceAll(I,"\\\\","_");I=j.replaceAll(I,":","_")}j.MobileFuns.saveLocal(H,I,B);d.refreshImageAfterInvokeFun(A,u);if(m.isFunction(F)){setTimeout(F,30)}},v=function(){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}};var z=window,y=Dynamsoft.navInfo,D=1,E=true,G=z.requestFileSystem||z.webkitRequestFileSystem||z.mozRequestFileSystem;if((y.biPad||y.biPhone)&&!G){if(y.bSafari&&parseFloat(y.strBrowserVersion)<13||!y.bSafari){E=false}}return A._innerSendToMobile("SaveImage",Dynamsoft.Lib.MobileFuns.makeParams(x,u,B,D,E),0,C,v)};l.SaveAllAsMultiPageTIFF=function(v,A,y){var B=this;B._resetErr();if(!B._isValid()){return false}if(!m.License.checkProductKey(B,{Core:true})&&!m.License.checkProductKey(B,{Webcam:true},true)){if(m.isFunction(y)){y(B.ErrorCode,B.ErrorString)}return false}if(!c(B,y)){return false}var x=[],z=d.replaceLocalFilename(v);if(B._isMobileMode()){if(!z||z==""){m.Errors.InvalidFile(B);if(m.isFunction(y)){t(y,B)}return false}var u=[],w=0;for(;w<B.HowManyImagesInBuffer;w++){u.push(w)}return B._asyncSaveImage(v,u,"tiff",A,y)}e(B,x);return B.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",d.makeParams(z,x.join(",")),A,y)};l.SaveAllAsPDF=function(v,A,y){var B=this;B._resetErr();if(!B._isValid()){return false}if(!m.License.checkProductKey(B,{Core:true})&&!m.License.checkProductKey(B,{Webcam:true},true)){if(m.isFunction(y)){y(B.ErrorCode,B.ErrorString)}return false}if(!c(B,y)){return false}var x=[],z=d.replaceLocalFilename(v);if(B._isMobileMode()){if(!z||z==""){m.Errors.InvalidFile(B);if(m.isFunction(y)){t(y,B)}return false}var u=[],w=0;for(;w<B.HowManyImagesInBuffer;w++){u.push(w)}return B._asyncSaveImage(v,u,"pdf",A,y)}e(B,x);return B.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",d.makeParams(z,x.join(",")),A,y)};l.SaveAsBMP=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(A._isMobileMode()){return A._mobileNotSupport("SaveAsBMP",w)}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}var y=d.replaceLocalFilename(v),u;if(!a(A,x,w)){return false}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsBMP",d.makeParams(y,u),z,w)};l.SaveAsJPEG=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}var y=d.replaceLocalFilename(v),u;if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}return A._asyncSaveImage(v,[x],"jpg",z,w)}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsJPEG",d.makeParams(y,u),z,w)};l.SaveAsPDF=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}var y=d.replaceLocalFilename(v),u;if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}return A._asyncSaveImage(v,[x],"pdf",z,w)}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsPDF",d.makeParams(y,u),z,w)};l.SaveAsPNG=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}var y=d.replaceLocalFilename(v),u;if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}return A._asyncSaveImage(v,[x],"png",z,w)}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsPNG",d.makeParams(y,u),z,w)};l.SaveAsTIFF=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}if(!a(A,x,w)){return false}var y=d.replaceLocalFilename(v),u;if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(w)){t(w,A)}return false}return A._asyncSaveImage(v,[x],"tiff",z,w)}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsTIFF",d.makeParams(y,u),z,w)};l.SaveAsGIF=function(v,x,z,w){var A=this;A._resetErr();if(!A._isValid()){return false}if(A._isMobileMode()){m.Errors.HTML5NotSupport(A);if(m.isFunction(w)){t(w,A)}return p}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(w)){w(A.ErrorCode,A.ErrorString)}return false}var y=d.replaceLocalFilename(v),u;if(!a(A,x,w)){return false}u=A._ImgManager.convertClientIndexToServerId(x);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(w)){t(w,A)}return false}return A.__innerSaveImage("SaveAsGIF",d.makeParams(y,u),z,w)};l.SaveSelectedImagesAsMultiPagePDF=function(v,z,x){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(x)){x(A.ErrorCode,A.ErrorString)}return false}var y=d.replaceLocalFilename(v);if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(x)){t(x,A)}return false}var u=k(A);return A._asyncSaveImage(v,u,"pdf",z,x)}var w=f(A);return A.__innerSaveImage("SaveSelectedImagesAsMultiPagePDF",d.makeParams(y,w.join(",")),z,x)};l.SaveSelectedImagesAsMultiPageTIFF=function(v,z,x){var A=this;A._resetErr();if(!A._isValid()){return false}if(!m.License.checkProductKey(A,{Core:true})&&!m.License.checkProductKey(A,{Webcam:true},true)){if(m.isFunction(x)){x(A.ErrorCode,A.ErrorString)}return false}var y=d.replaceLocalFilename(v);if(A._isMobileMode()){if(!y||y==""){m.Errors.InvalidFile(A);if(m.isFunction(x)){t(x,A)}return false}var u=k(A);return A._asyncSaveImage(v,u,"tiff",z,x)}var w=f(A);return A.__innerSaveImage("SaveSelectedImagesAsMultiPageTIFF",d.makeParams(y,w.join(",")),z,x)};l.SaveSelectedImagesToBase64Binary=function(w,v){var x=this;x._resetErr();if(!x._isValid()){return false}if(!m.License.checkProductKey(x,{Core:true})&&!m.License.checkProductKey(x,{Webcam:true},true)){if(m.isFunction(v)){v(x.ErrorCode,x.ErrorString)}return false}if(x._isMobileMode()){return x._mobileNotSupport("SaveSelectedImagesToBase64Binary",v)}var u=f(x);if(m.isFunction(w)){return x._innerSend("SaveSelectedImagesToBase64Binary",d.makeParams(u.join(",")),true,w,v)}return x._innerFun("SaveSelectedImagesToBase64Binary",d.makeParams(u.join(",")))};l.ShowFileDialog=function(y,v,D,C,B,u,x,E){var A=this;A._resetErr();if(!A._isValid()){return false}if(A._isMobileMode()){return A._mobileNotSupport("ShowFileDialog")}var z=d.replaceLocalFilename(B),w=0;w=A.__GetLoadEventsNum();return A._innerSend("ShowFileDialog",d.makeParams(y,v,D,C,z,u,x,E,w),true)};l.FTPDownload=function(z,x,w,u){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPDownload",u)}var v=m.html5.Funs.getImageType(x);return y.__innerFTPDownload("FTPDownload",d.makeParams(z,x),v,w,u)};l.FTPDownloadEx=function(z,x,v,w,u){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPDownloadEx",u)}return y.__innerFTPDownload("FTPDownloadEx",d.makeParams(z,x,v),v,w,u)};l.FTPUpload=function(A,w,y,x,v){var z=this;z._resetErr();if(!z._isValid()){return false}if(z._isMobileMode()){return z._mobileNotSupport("FTPUpload",v)}var u=z._ImgManager.convertClientIndexToServerId(w);if(!a(z,w,v)){return false}if(u==-1){m.Errors.IndexOutOfRange(z);if(m.isFunction(v)){t(v,z)}return false}return z.__innerFTPUpload("FTPUpload",d.makeParams(A,u,y),x,v)};l.FTPUploadEx=function(B,w,z,x,y,v){var A=this;A._resetErr();if(!A._isValid()){return false}if(A._isMobileMode()){return A._mobileNotSupport("FTPUploadEx",v)}var u;if(!a(A,w,v)){return false}u=A._ImgManager.convertClientIndexToServerId(w);if(u==-1){m.Errors.IndexOutOfRange(A);if(m.isFunction(v)){t(v,A)}return false}return A.__innerFTPUpload("FTPUploadEx",d.makeParams(B,u,z,x),y,v)};l.FTPUploadAllAsMultiPageTIFF=function(z,x,w,v){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAllAsMultiPageTIFF",v)}var u=[];e(y,u);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",d.makeParams(z,x,u.join(",")),w,v)};l.FTPUploadAllAsPDF=function(z,x,w,v){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAllAsPDF",v)}var u=[];e(y,u);return y.__innerFTPUpload("FTPUploadAsMultiPagePDF",d.makeParams(z,x,u.join(",")),w,v)};l.FTPUploadAsMultiPagePDF=function(z,x,w,v){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAsMultiPagePDF",v)}var u=f(y);return y.__innerFTPUpload("FTPUploadAsMultiPagePDF",d.makeParams(z,x,u.join(",")),w,v)};l.FTPUploadAsMultiPageTIFF=function(z,x,w,v){var y=this;y._resetErr();if(!y._isValid()){return false}if(y._isMobileMode()){return y._mobileNotSupport("FTPUploadAsMultiPageTIFF",v)}var u=f(y);return this.__innerFTPUpload("FTPUploadAsMultiPageTIFF",d.makeParams(z,x,u.join(",")),w,v)};l.HTTPDownload=function(w,v,y,u){var z=this;z._resetErr();if(!z._isValid()){return m.Promise.reject({code:z.ErrorCode,message:z.ErrorString})}var x=d.getImageType(v);return z.HTTPDownloadThroughGet(w,v,x,y,u)};o.prototype.HTTPDownloadEx=function(w,v,x,y,u){var z=this;z._resetErr();if(!z._isValid()){return m.Promise.reject({code:z.ErrorCode,message:z.ErrorString})}if(z._isMobileMode()){return z._mobileNotSupport("HTTPDownloadEx",u)}return z.HTTPDownloadThroughGet(w,v,x,y,u)};l.HTTPDownloadDirectly=function(H,u,A,G,y){var C=this;C._resetErr();if(!C._isValid()){return false}if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(y)){y(C.ErrorCode,C.ErrorString)}return false}if(C._isMobileMode()){return C._mobileNotSupport("HTTPDownloadDirectly",y)}var v=n.GetHttpHeadersAndClear(C),x=d.combineUrl(C,H,u),w,E,B;if(x===false){m.Errors.ParameterCannotEmpty(C);return false}if(!A||A==""){m.Errors.InvalidLocalFilename(C,"HTTPDownloadDirectly");if(m.isFunction(y)){t(y,C)}return false}w=m.html5.Funs.getImageType(A);if(d.isServerInvalid(C)){if(m.isFunction(y)){t(y,C)}return false}if(!m.License.checkPDFProductKeyWhenNeeds(C,w)){if(m.isFunction(y)){y(C._errorCode,C._errorString)}return false}m.cancelFrome=2;B=d.replaceLocalFilename(A);E="get";m.showProgress(C,"HTTPDownloadDirectly",true);var F=function(I){var J=(I.total===0)?100:Math.round(I.loaded*100/I.total),K=[I.loaded," / ",I.total].join("");C._OnPercentDone([0,J,"","http"])},z=true;C._OnPercentDone([0,-1,Dynamsoft.MSG.Downloading,"http"]);if(!m.isFunction(G)){z=false}var D=d.loadHttpBlob(C,E,x,z,function(I){C._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);var J=3;return C.__LoadImageFromBytes(I,J,B,z,G,y)},function(){m.closeProgress("HTTPDownloadDirectly");if(m.isFunction(y)){t(y,C)}return false},F,v);return D};l.HTTPUploadThroughPostDirectly=function(D,A,u,z,C,y){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostDirectly",y)}var x=d.combineUrl(B,D,u),E=function(){if(m.isFunction(y)){t(y,B,B.__HTTPPostResponseString)}};B.__HTTPPostResponseString="";if(D===""){m.Errors.HttpServerCannotEmpty(B);E();return false}var v=0,w=false;return B._innerUploadDirectly(x,A,z,true,false,v,true,w,C,E)};l._innerUploadDirectly=function(y,E,A,B,D,v,I,x,J,z){var G=this,u=n.GetHttpHeadersAndClear(G),w="HTTPUploadThroughPostDirectly",C=true,F,H;if(y===false||y===""){m.Errors.ParameterCannotEmpty(G);if(m.isFunction(z)){z(G.ErrorCode,G.ErrorString)}return false}if(!m.isFunction(J)){C=false}if(!m.License.checkProductKey(G,{Core:true})){if(m.isFunction(z)){z(G.ErrorCode,G.ErrorString)}return false}m.cancelFrome=1;var K=function(){m.needShowTwiceShowDialog=false;if(B){m.closeProgress(w)}if(m.isFunction(z)){z(G.ErrorCode,G.ErrorString)}return false};m.needShowTwiceShowDialog=true;if(B){m.showProgress(G,w,false)}F=d.replaceLocalFilename(E);if(!F||F==""){m.Errors.InvalidFile(G);K();return false}if(x&&x.bCancel){x.st=2;return K()}H=G.__SaveLocalFileToBytes(F,C,D,function(L){m.needShowTwiceShowDialog=false;if(x&&x.bCancel){x.st=2;return K()}if(L&&(m.dlgRef>0||G.__IfShowCancelDialogWhenImageTransfer==false||C==false||B===false)){if(L instanceof File){L.fileName=A}else{L.name=A}d.setBtnCancelVisibleForProgress(G,true);return d.httpPostUpload(G,y,L,C,0,u,true,v,I,x,function(M){if(B){m.closeProgress(w)}if(m.isFunction(J)){q(J,M)}},K)}else{K();return false}},K);return H};l._innerUploadFilesDirectly=function(B,w,H,G,v,A,K,z,M){var F=this,C=n.GetHttpHeadersAndClear(F),E="HTTPUploadThroughPostDirectly",J=true,x=[],L;if(B===false||B===""){m.Errors.ParameterCannotEmpty(F);if(m.isFunction(M)){M(F.ErrorCode,F.ErrorString,w)}return false}if(!m.isFunction(z)){J=false}if(!m.License.checkProductKey(F,{Core:true})){if(m.isFunction(M)){M(F.ErrorCode,F.ErrorString,w)}return false}m.cancelFrome=1;var u=function(){m.needShowTwiceShowDialog=false;if(G){m.closeProgress(E)}if(m.isFunction(M)){M(w)}return false};m.needShowTwiceShowDialog=true;if(G){m.showProgress(F,E,false)}m.each(w,function(N){var O=d.replaceLocalFilename(N);if(!O||O==""){m.Errors.InvalidFile(F);u();return false}x.push(O)});var y=[],I=x.length,D=0;m.each(x,function(N,O){L=F.__SaveLocalFileToBytes(N,J,v,function(Q){m.needShowTwiceShowDialog=false;if(Q&&(m.dlgRef>0||F.__IfShowCancelDialogWhenImageTransfer==false||J==false||G===false)){var P=d.cformat(H,O+1);if(Q instanceof File){Q.fileName=P}else{Q.name=P}y[O]=Q;D++;if(D==I){d.setBtnCancelVisibleForProgress(F,true);return d.httpPostUploadFiles(F,B,y,J,0,C,G,A,K,function(R){if(G){m.closeProgress(E)}if(m.isFunction(z)){q(z,R)}},function(){if(G){m.closeProgress(E)}if(m.isFunction(u)){u()}})}}else{if(G){m.closeProgress(E)}if(m.isFunction(u)){u()}return false}},function(){if(G){m.closeProgress(E)}if(m.isFunction(u)){u()}})});return L};l.HTTPUploadThroughPost=function(E,F,w,y,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPost",u)}var D=d.getImageType(y),v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}if(!s(B,F,D,x)){return false}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.HTTPUploadThroughPostEx=function(E,F,w,y,D,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostEx",u)}var v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}if(!s(B,F,D,x)){return false}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.innerHTTPUploadPost=function(x,Q,J,O,A,y,H,B){var E=this,D="HTTPUploadThroughPostEx",z=d.combineUrl(E,x,J),I=true,P=false,F=0,v=[],L=function(R){if(m.isFunction(H)){H(R)}return false},M,G,N=false;E.__HTTPPostResponseString="";if(m.isNumber(Q)){if(Q<-2){m.Errors.IndexOutOfRange(E);return L(Q)}}else{if(m.isArray(Q)){}else{m.Errors.IndexOutOfRange(E);return L(Q)}}if(!m.isString(O)||O==""){m.Errors.UploadFileCannotEmpty(E);return L()}if(m.isUndefined(A)){m.Errors.InvalidImageType(E);return L(Q)}if(A==EnumDWT_ImageType.IT_BMP||A==EnumDWT_ImageType.IT_JPG||A==EnumDWT_ImageType.IT_PNG||A==EnumDWT_ImageType.IT_J2K){if(Q==-1&&E._ImgManager.count()>1||m.isArray(Q)&&Q.length>1){m.Errors.UploadIndexMoreThanOne(E);return L(Q)}if(m.isArray(Q)){v.push(Q[0])}else{if(Q==-1){v.push(0)}else{v.push(Q)}}}else{if(A==EnumDWT_ImageType.IT_TIF||A==EnumDWT_ImageType.IT_PDF){if(Q==-1){if(E._ImgManager.count()==0){m.Errors.NoImage(E);return L()}for(G=0;G<E._ImgManager.count();G++){v.push(G)}}else{if(Q==-2){v=E._ImgManager.getSelectedClientIndexArray()}else{if(m.isArray(Q)){for(G=0;G<Q.length;G++){v.push(Q[G])}}else{v.push(Q)}}}}else{m.Errors.InvalidImageType(E);return L(Q)}}if(E._isMobileMode()){I=true}else{if(!m.isFunction(y)){I=false}}if(x===""){m.Errors.HttpServerCannotEmpty(E);return L(v)}if(m.isUndefined(z)||z===""){m.Errors.ParameterCannotEmpty(E);return L(v)}else{if(!m.isString(z)){m.Errors.InvalidUrl(E);return L(v)}}if((z.indexOf("http://")!=0)&&(z.indexOf("https://")!=0)){if(m.detect.ssl){z="https://"+z}else{z="http://"+z}}if(!E._isMobileMode()){if(d.isServerInvalid(E)){return L(v)}}if(!E._checkIndices(v)&&v!=-1){return L(v)}var w=[];if(m.isArray(v)){m.each(v,function(S){var R=E._ImgManager.convertClientIndexToServerId(S);if(R!=-1){w.push(R)}})}E._resetErr();if(!E._isValid()){return false}if(I){M={bOnlyUploadForm:p,method:"HTTPUploadThroughPostEx",_this:E,url:z,serverIds:w,enumImageType:A,saveSetup:N,fileName:O,retry:0,bOnlyEmptyIsOK:true,objUploadFileStatus:false,dataFormat:EnumDWT_UploadDataFormat.Binary,asyncSuccessFunc:y,asyncFailureFunc:L};m._asyncUploadCmd(M);return true}else{m.cancelFrome=1;var u=function(){m.needShowTwiceShowDialog=false;m.closeProgress(D);L(v);return false};m.needShowTwiceShowDialog=true;m.showProgress(E,D,false);var C=n.GetHttpHeadersAndClear(E);var K=4;E._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);E.__innerConvertToBlob(A,w,N,I,K,function(T,Y,U){m.needShowTwiceShowDialog=false;if(T&&(m.dlgRef>0||E.__IfShowCancelDialogWhenImageTransfer==false||I==false)){var S=E.MaxUploadImageSize,R=T.size,V=Dynamsoft.WebTwainEnv;if(R>S&&S!=-1){m.Errors.UploadExceededMaxSize(E);return u()}if(V.IfAddMD5InUploadHeader){if(Y&&Y!=""){C["dwt-md5"]=Y}}if(T instanceof File){T.fileName=O}else{T.name=O}d.setBtnCancelVisibleForProgress(E,true);var X=0,W=false;return d.httpPostUpload(E,z,T,I,0,C,true,X,true,W,function(Z){m.closeProgress(D);P=true;return true},u)}else{return u()}},u);return P}};l._checkIndices=function(x){var y=this,u,v;if(!m.isArray(x)){m.Errors.IndicesNotArray(y);return false}if(x.length==0){m.Errors.IndicesCannotEmpty(y);return false}u=y._ImgManager.count();for(v=0;v<x.length;v++){var w=x[v];if(m.isUndefined(w)||w===null){m.Errors.IndexNullOrUndefined(y);return false}w=parseInt(w);if(isNaN(w)){m.Errors.InvalidIndex(y);return false}if(w<0||w>=u){m.Errors.IndicesOutOfRange(y);return false}}return true};l.SetUploadSegment=function(u,v){var w=this;w._resetErr();if(!w._isValid()){return false}if(w._isMobileMode()){return w._mobileNotSupport("SetUploadSegment")}if(!m.isNumber(u)||u<0){m.Errors.InvalidSegmentUploadThreshold(w);return false}if(!m.isNumber(v)||(v<=0)){m.Errors.InvalidModuleSize(w);return false}w._segementUploadThreshold=u*1024*1024;w._moduleSize=v*1024;return true};l.HTTPUpload=function(w,H,F,G,z,A,u){var E=this;E._resetErr();if(!E._isValid()){return false}if(m.isUndefined(w)){m.Errors.InvalidParameter(E);if(m.isFunction(u)){u(E.ErrorCode,E.ErrorString)}return false}var y,I,D,v=arguments;if(arguments.length<=3){if(m.isFunction(H)){I=function(){H(E.__HTTPPostResponseString,w,v)}}else{I=false}D=function(){if(m.isFunction(F)){b(F,E,E.__HTTPPostResponseString,w,v)}};y={bOnlyUploadForm:i,_this:E,url:w,asyncSuccessFunc:I,asyncFailureFunc:D}}else{var C,x=[],B=false;if(m.isFunction(z)){C="RemoteFile";I=function(K,J){z(E.__HTTPPostResponseString,J,v)};D=function(J){if(m.isFunction(A)){b(A,E,E.__HTTPPostResponseString,J,v)}}}else{if(m.isString(z)){C=z}else{C="RemoteFile"}if(m.isFunction(A)){I=function(K,J){q(A,E.__HTTPPostResponseString,J,v)}}else{I=false}D=function(J){if(m.isFunction(u)){b(u,E,E.__HTTPPostResponseString,J,v)}}}if(!E._checkIndices(H)){D(H);return false}if(m.isArray(H)){m.each(H,function(K){var J=E._ImgManager.convertClientIndexToServerId(K);if(J!=-1){x.push(J)}})}if(x.length==0){m.Errors.InvalidIndex(E);D(H);return false}if(m.isUndefined(F)){m.Errors.InvalidImageType(E);D(H);return false}if(F==EnumDWT_ImageType.IT_BMP||F==EnumDWT_ImageType.IT_JPG||F==EnumDWT_ImageType.IT_PNG){if(x.length>1){m.Errors.UploadIndexMoreThanOne(E);D(H);return false}}else{if(F==EnumDWT_ImageType.IT_TIF||F==EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(E);D(H);return false}}if(m.isUndefined(G)||(G!=EnumDWT_UploadDataFormat.Binary&&G!=EnumDWT_UploadDataFormat.Base64)){m.Errors.InvalidDataFormat(E);D(H);return false}y={bOnlyUploadForm:p,method:"HTTPUpload",_this:E,url:w,serverIds:x,enumImageType:F,saveSetup:B,dataFormat:G,fileName:C,retry:0,bOnlyEmptyIsOK:true,objUploadFileStatus:false,asyncSuccessFunc:I,asyncFailureFunc:D}}m._asyncUploadCmd(y);return true};l._innerHTTPUpload=function(z,x,D,V,X,W,B,R,v,A,M){var K=this,E=parseInt(D),O=parseInt(V),w=X,H="HTTPUpload",C=z,N=true,Y=false,J=K._moduleSize,S=K._segementUploadThreshold,L,Q,F,G;K.__HTTPPostResponseString="";if(m.isUndefined(D)){m.Errors.InvalidImageType(K);if(m.isFunction(M)){M()}return false}m.cancelFrome=1;var U,u=function(){m.needShowTwiceShowDialog=false;m.closeProgress(H);if(m.isFunction(M)){M()}return false};G=function(Z){var aa=(Z.total===0)?100:Math.round(Z.loaded*100/Z.total),ab=[Z.loaded," / ",Z.total].join("");K._OnPercentDone([0,aa,"","http",w])};w=d.addImageFileExt(w,E);m.needShowTwiceShowDialog=true;m.showProgress(K,H,false);if(!K._isMobileMode()){if(d.isServerInvalid(K)){return u()}}if(O==EnumDWT_UploadDataFormat.Binary){var I=0;var P=4;if(v&&v.bCancel){v.st=2;return u()}K._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);Y=K.__innerConvertToBlob(E,x,W,true,P,function(ab,af,ac){U=function(){m.needShowTwiceShowDialog=false;m.closeProgress(H);if(m.isFunction(A)){q(A,ab)}return true};if(v&&v.bCancel){v.st=2;return u()}if(!ab||ab.size<=0){m.Errors.UploadFileCannotEmpty(K);return u()}var aa=K.MaxUploadImageSize,Z=ab.size;if(Z>aa&&aa!=-1){m.Errors.UploadExceededMaxSize(K);return u()}if(K._errorCode!=0){return u()}if(S>0&&ab.size>S){var ag=0,ae=n.GetHttpHeadersAndClear(K),ad=Dynamsoft.WebTwainEnv;if(ad.IfAddMD5InUploadHeader){if(af&&af!=""){ae["dwt-md5"]=af}}K._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",w]);Y=n.UploadBinary(K,C,E,ab,w,ae,ag,J,G,B,R,v,U,u)}else{Y=K.__innnerHTTPUploadBinaryFull(C,af,ab,E,w,B,R,v,U,u)}},u)}else{if(O==EnumDWT_UploadDataFormat.Base64){var T=4,y;Y=K._convertToBase64ByServerIds(x,E,W,T,function(ac){if(!ac||ac.getLength()<=0){m.Errors.UploadFileCannotEmpty(K);return u()}U=function(){m.needShowTwiceShowDialog=false;m.closeProgress(H);if(m.isFunction(A)){q(A,ac)}return true};if(S>0&&ac.getLength()>S){var ad=0,ab=n.GetHttpHeadersAndClear(K),aa=Dynamsoft.WebTwainEnv;y=ac.getMD5();if(aa.IfAddMD5InUploadHeader){ab["dwt-md5"]=y}K._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"]);n.UploadBase64(K,C,E,ac,w,ab,ad,J,G,U,u)}else{var Z;y=ac.getMD5();Z=ac.getData(0,ac.getLength());if(!Z||Z==""){m.Errors.UploadFileCannotEmpty(K);return u()}K.__innnerHTTPUploadBase64Full(C,y,Z,E,w,B,R,U,u)}},u)}}return Y};l._innerFormFieldHTTPUpload=function(v,B,u){var D=this,x,z="HTTPUpload",A=v,C=true,E=false;D.__HTTPPostResponseString="";x=function(){m.needShowTwiceShowDialog=false;m.closeProgress(z);if(m.isFunction(u)){t(u,D,D.__HTTPPostResponseString)}return false};if(m.isUndefined(A)||A===""){m.Errors.ParameterCannotEmpty(D);return x()}else{if(!m.isString(A)){m.Errors.InvalidUrl(D);return x()}}if((A.indexOf("http://")!=0)&&(A.indexOf("https://")!=0)){if(m.detect.ssl){A="https://"+A}else{A="http://"+A}}D.__HTTPPostResponseString="";m.cancelFrome=1;m.showProgress(D,z,false);m.needShowTwiceShowDialog=true;var w=n.GetHttpHeadersAndClear(D);D._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"]);var y=false;E=d.httpUploadByBIO(D,A,p,0,true,w,true,0,true,y,function(F){m.needShowTwiceShowDialog=false;m.closeProgress(z);if(m.isFunction(B)){q(B,F)}},x);return E};var n={UploadBinary:function(L,D,E,z,w,F,y,K,H,C,M,v,x,u){var B,A,I="HttpUpload",J=z.size;B=J-y;if(B>0){if(B>=K){B-=K;A=K}else{A=B;B=0}var G=z.slice(y,y+A);if(!G){m.Errors.UploadFileCannotEmpty(L);return u()}if(m.dlgRef>0||L.__IfShowCancelDialogWhenImageTransfer==false){G.name=w;d.setBtnCancelVisibleForProgress(L,true);F["Content-Range"]=["bytes ",y,"-",y+G.size-1,"/",J].join("");H({total:J,loaded:y});d.httpPostUpload(L,D,G,true,0,F,false,C,M,v,function(N){if(B==0){m.needShowTwiceShowDialog=false;H({total:J,loaded:J});if(m.isFunction(x)){q(x,N)}}else{y+=A;setTimeout(function(){m.cancelFrome=1;n.UploadBinary(L,D,E,z,w,F,y,K,H,C,M,v,x,u)},100)}},u);return true}else{m.Errors.UploadError(L,true);return u()}}else{m.needShowTwiceShowDialog=false;m.closeProgress(I);if(m.isFunction(x)){x("")}}return true},UploadBase64:function(C,y,E,K,z,u,A,D,F,B,I){var w=K.getLength(),x="HttpUpload",H,v,J=0;H=w-A;if(H>0){if(H>=D){H-=D;v=D}else{v=H;H=0}var G=K.getData(A,D);if(!G||G==""){m.Errors.UploadFileCannotEmpty(C);return I()}if(m.dlgRef>0||C.__IfShowCancelDialogWhenImageTransfer==false){d.setBtnCancelVisibleForProgress(C,true);u["Content-Range"]=["bytes ",A,"-",A+v-1,"/",w].join("");F({total:w,loaded:A});d.httpPostUploadString(C,y,G,z,0,u,false,0,true,function(L){if(H==0){m.needShowTwiceShowDialog=false;F({total:w,loaded:w});if(m.isFunction(B)){q(B,L)}}else{A+=v;setTimeout(function(){m.cancelFrome=1;n.UploadBase64(C,y,E,K,z,u,A,D,F,B,I)},100)}},I);return true}else{m.Errors.UploadError(C,true);return I()}}else{m.needShowTwiceShowDialog=false;m.closeProgress(x);if(m.isFunction(B)){B("")}}return true},GetHttpHeadersAndClear:function(v){var u=v.__httpHeaderMap;v.__httpHeaderMap={};if(!u){u=v.__httpHeaderMap}return u}};l.__innnerHTTPUploadBinaryFull=function(z,x,C,F,P,D,O,v,A,u){var K=this,H=n.GetHttpHeadersAndClear(K),I="HTTPUpload",w=P,E=z,M=true,Q=false,J=0,L,N,G;var B=0,y=Dynamsoft.WebTwainEnv;if(y.IfAddMD5InUploadHeader){if(x&&x!=""){H["dwt-md5"]=x}}if(m.dlgRef>0||K.__IfShowCancelDialogWhenImageTransfer==false){if(C instanceof File){C.fileName=w}else{C.name=w}d.setBtnCancelVisibleForProgress(K,true);return d.httpPostUpload(K,E,C,M,J,H,true,D,O,v,function(R){if(m.isFunction(A)){q(A,R)}},u)}else{m.Errors.UploadError(K,true);return u()}return Q};l.__innnerHTTPUploadBase64Full=function(y,w,A,D,N,B,M,z,u){var I=this,F=n.GetHttpHeadersAndClear(I),G="HTTPUpload",v=N,C=y,K=true,O=false,H=0,J,L,E,x=Dynamsoft.WebTwainEnv;if(m.dlgRef>0||I.__IfShowCancelDialogWhenImageTransfer==false){if(x.IfAddMD5InUploadHeader){if(F&&w&&w!=""){F["dwt-md5"]=w}}d.setBtnCancelVisibleForProgress(I,true);return d.httpPostUploadString(I,C,A,v,0,F,true,B,M,function(P){if(m.isFunction(z)){q(z,P)}},u)}else{m.Errors.UploadError(I,true);return u()}return O};l.ConvertToBase64=function(H,G,A,u){var C=this;C._resetErr();if(!C._isValid()){return false}var w=[],v=arguments,y=parseInt(G),x="ConvertToBase64",D,B=false;if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(u)){u(C.ErrorCode,C.ErrorString)}return false}if(!C._isMobileMode()){if(d.isServerInvalid(C)){if(m.isFunction(u)){b(u,C,H,G,v)}return false}}if(!C._checkIndices(H)){if(m.isFunction(u)){b(u,C,H,G,v)}return false}if(y==EnumDWT_ImageType.IT_BMP||y==EnumDWT_ImageType.IT_JPG||y==EnumDWT_ImageType.IT_PNG){if(H.length>1){m.Errors.ConvertBase64IndexMoreThanOne(C);if(m.isFunction(u)){b(u,C,H,G,v)}return false}}else{if(y==EnumDWT_ImageType.IT_TIF||y==EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(C);if(m.isFunction(u)){b(u,C,H,G,v)}return false}}if(m.isArray(H)){m.each(H,function(J){var I=C._ImgManager.convertClientIndexToServerId(J);if(I!=-1){w.push(I)}})}var E=function(J){var I=[];if(m.isArray(w)){m.each(w,function(K){var L=C._ImgManager.convertServerIdToClientIndex(K);if(L>-1){I.push(L)}})}if(m.isFunction(A)){q(A,J,I,G,v)}return false};var z=function(){var I=[];if(m.isArray(w)){m.each(w,function(J){var K=C._ImgManager.convertServerIdToClientIndex(J);if(K>-1){I.push(K)}})}if(m.isFunction(u)){b(u,C,I,G,v)}return false};var F=3;return C._convertToBase64ByServerIds(w,y,B,F,E,z)};l._convertToBase64ByServerIds=function(w,F,B,E,y,u){var C=this,x="ConvertToBase64",D,A=B;m.showProgress(C,x,false);var G=function(){m.closeProgress(x);if(m.isFunction(u)){u()}return false},z=function(K){var I=0,M="",L="",N=K&&K.result,J=[],H;if(m.isArray(w)){m.each(w,function(O){var P=C._ImgManager.convertServerIdToClientIndex(O);if(P>-1){J.push(P)}})}if(C.ErrorCode!=0){G();return}if(N&&m.isArray(N)&&N.length==3){L=N[0];I=N[1];M=N[2];H=new m.html5.Base64Result(C,I,M,L);m.closeProgress(x);if(m.isFunction(y)){q(y,H)}}else{m.Errors.ConvertBase64Failed(C);G()}};if(C._isMobileMode()){if(F==EnumDWT_ImageType.IT_BMP){m.closeProgress(x);return C._mobileNotSupport("Convert to bmp",u)}return C.__innerConvertToBase64ByMobile(w,F,E,z,G)}if(!m.isString(A)||A==""){A="{}"}var v=["[",F,',"',w.join(","),'",',A,",1]"].join("");return C._innerFunRaw(x,v,true,false,true,z,G)};l.ClearAllHTTPFormField=function(){var u=this;u._resetErr();if(!u._isValid()){return false}u.httpFormFields={};return true};l.SetHTTPFormField=function(y,u,w){var x=this;x._resetErr();if(!x._isValid()){return false}var v=y;if(!m.isString(v)){v=""+v}if(u instanceof Blob){u.name=w}x.httpFormFields[v]=u;return true};l.HTTPUploadAllThroughPostAsMultiPageTIFF=function(E,w,y,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadAllThroughPostAsMultiPageTIFF",u)}var F=-1,D=2,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.HTTPUploadThroughPostAsMultiPageTIFF=function(F,w,y,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostAsMultiPageTIFF",u)}var D=-2,E=2,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(F,D,w,y,E,C,x,A)};l.HTTPUploadAllThroughPostAsPDF=function(E,w,y,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadAllThroughPostAsPDF",u)}var F=-1,D=4,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(E,F,w,y,D,C,x,A)};l.HTTPUploadThroughPostAsMultiPagePDF=function(F,w,y,z,u,A){var B=this;B._resetErr();if(!B._isValid()){return false}if(B._isMobileMode()){return B._mobileNotSupport("HTTPUploadThroughPostAsMultiPagePDF",u)}var D=-2,E=4,v=arguments,C=false,x=function(G){if(m.isFunction(u)){b(u,B,B.__HTTPPostResponseString,G,v)}return false};if(!m.isString(y)||y==""){m.Errors.UploadFileCannotEmpty(B);return x()}if(z&&m.isFunction(z)){C=function(H,G){q(z,B.__HTTPPostResponseString,G,v);return true}}return B.innerHTTPUploadPost(F,D,w,y,E,C,x,A)};l.HTTPDownloadThroughPost=function(H,v,y,G,z,B){var C=this,w=n.GetHttpHeadersAndClear(C),u=arguments,x=d.combineUrl(C,H,v),E,D;if(x===p){m.Errors.ParameterCannotEmpty(C);return p}if(d.isServerInvalid(C)){if(m.isFunction(z)){t(z,C,u)}return p}if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(z)){t(z,C,u)}return p}if(!m.License.checkPDFProductKeyWhenNeeds(C,y)){if(m.isFunction(z)){t(z,C,u)}return p}m.cancelFrome=2;m.showProgress(C,"HttpDownloadThroughPost",i);E="post";var F=function(I){var J=(I.total===0)?100:Math.round(I.loaded*100/I.total),K=[I.loaded," / ",I.total].join("");C._OnPercentDone([0,J,"","http"])},A=i;C._OnPercentDone([0,-1,Dynamsoft.MSG.Downloading,"http"]);if(!m.isFunction(G)){A=p}D=d.loadHttpBlob(C,E,x,A,function(I){C._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);var K="",J=y;if(J!=Dynamsoft.EnumDWT_ImageType.IT_BMP&&J!=Dynamsoft.EnumDWT_ImageType.IT_JPG&&J!=Dynamsoft.EnumDWT_ImageType.IT_TIF&&J!=Dynamsoft.EnumDWT_ImageType.IT_PNG&&J!=Dynamsoft.EnumDWT_ImageType.IT_PDF&&J!=Dynamsoft.EnumDWT_ImageType.IT_J2K){J=-1}C.__LoadImageFromBytes(I,J,K,A,G,z)},function(){m.closeProgress("HttpDownloadThroughPost");if(m.isFunction(z)){t(z,C,u)}},F,w);return D};l.HTTPDownloadThroughGet=function(F,u,w,E,y){var A=this,v=n.GetHttpHeadersAndClear(A),x=d.combineUrl(A,F,u),C,B;if(x===p){m.Errors.ParameterCannotEmpty(A);if(m.isFunction(y)){t(y,A)}return p}if(!A._isMobileMode()){if(d.isServerInvalid(A)){if(m.isFunction(y)){t(y,A)}return p}if(!m.License.checkProductKey(A,{Core:true})){if(m.isFunction(y)){t(y,A)}return p}if(!m.License.checkPDFProductKeyWhenNeeds(A,w)){if(m.isFunction(y)){t(y,A)}return p}}else{if(!m.License.checkProductKey(A,{Core:true})){if(m.isFunction(y)){t(y,A)}return p}}m.cancelFrome=2;C="get";m.showProgress(A,"HTTPDownloadThroughGet",i);var D=function(G){var H=(G.total===0)?100:Math.round(G.loaded*100/G.total),I=[G.loaded," / ",G.total].join("");A._OnPercentDone([0,H,"","http"])},z=i;A._OnPercentDone([0,-1,Dynamsoft.MSG.Downloading,"http"]);if(!m.isFunction(E)){z=p}if(A._isMobileMode()){B=d.loadHttpBlob(A,C,x,z,function(G){A._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);A.LoadImageFromBinary(G,function(){Dynamsoft.Lib.closeProgress("");if(m.isFunction(E)){E()}},function(){m.closeProgress("HTTPDownloadThroughGet");if(m.isFunction(y)){t(y,A)}})},function(){m.closeProgress("HTTPDownloadThroughGet");if(m.isFunction(y)){t(y,A)}},D,v)}else{B=d.loadHttpBlob(A,C,x,z,function(G){A._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);var I="",H=w;if(H!=Dynamsoft.EnumDWT_ImageType.IT_BMP&&H!=Dynamsoft.EnumDWT_ImageType.IT_JPG&&H!=Dynamsoft.EnumDWT_ImageType.IT_TIF&&H!=Dynamsoft.EnumDWT_ImageType.IT_PNG&&H!=Dynamsoft.EnumDWT_ImageType.IT_PDF&&H!=Dynamsoft.EnumDWT_ImageType.IT_J2K){H=-1}A.__LoadImageFromBytes(G,H,I,z,function(){Dynamsoft.Lib.closeProgress("");if(m.isFunction(E)){E()}},function(){m.closeProgress("HTTPDownloadThroughGet");if(m.isFunction(y)){t(y,A)}})},function(){m.closeProgress("HTTPDownloadThroughGet");if(m.isFunction(y)){t(y,A)}},D,v)}return B};l.HTTPUploadThroughPut=function(x,w,u,z,v){var y=d.getImageType(u);return this.HTTPUploadThroughPutEx(x,w,u,y,z,v)};l.HTTPUploadThroughPutEx=function(y,N,v,C,A,M){var G=this,D=n.GetHttpHeadersAndClear(G),F="HTTPUploadThroughPutEx",B=d.combineUrl(G,y,v),I=true,w=[],L=false;if(B===false){m.Errors.ParameterCannotEmpty(G);if(m.isFunction(M)){b(M,G,"",[N],v,C)}return false}if(!m.isFunction(A)){I=false}m.cancelFrome=1;var u=function(){m.needShowTwiceShowDialog=false;m.closeProgress(F);if(m.isFunction(M)){b(M,G,G.__HTTPPostResponseString,w,v,C)}return false},E;m.needShowTwiceShowDialog=true;m.showProgress(G,F,false);switch(N){case -1:for(var H=0;H<G._ImgManager.count();H++){w.push(H)}break;case -2:w=G._ImgManager.getSelectedClientIndexArray();break;default:w.push(N);if(N>=0){}else{m.Errors.IndexOutOfRange(G);return u()}break}if(y===""){m.Errors.HttpServerCannotEmpty(G);return u()}var x=[];if(m.isArray(w)){m.each(w,function(P){var O=G._ImgManager.convertClientIndexToServerId(P);if(O!=-1){x.push(O)}})}var z=Dynamsoft.WebTwainEnv;var K=false;var J=4;G._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);L=G.__innerConvertToBlob(C,x,K,I,J,function(Q,S,R){if(z.IfAddMD5InUploadHeader){if(S&&S!=""){D["dwt-md5"]=S}}m.needShowTwiceShowDialog=false;if(Q&&(m.dlgRef>0||G.__IfShowCancelDialogWhenImageTransfer==false||I==false)){var P=G.MaxUploadImageSize,O=Q.size;if(O>P&&P!=-1){m.Errors.UploadExceededMaxSize(G);return u()}E=function(T){var U=(T.total===0)?100:Math.round(T.loaded*100/T.total),V=[T.loaded," / ",T.total].join("");G._OnPercentDone([0,U,"","http"])};G._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"]);d.setBtnCancelVisibleForProgress(G,true);return d.httpPutImage(G,B,Q,I,function(T){G.__HTTPPostResponseString=T;m.closeProgress(F);if(m.isFunction(A)){var U=[];if(m.isArray(x)){m.each(x,function(V){var W=G._ImgManager.convertServerIdToClientIndex(V);if(W>-1){U.push(W)}})}q(A,G.__HTTPPostResponseString,U,v,C)}return true},u,E)}else{m.closeProgress(F);return false}},u);return L};l.HTTPUploadAllThroughPutAsMultiPageTIFF=function(x,u,z,w){var A=this,v=-1,y=2;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.HTTPUploadThroughPutAsMultiPageTIFF=function(x,u,z,w){var A=this,v=-2,y=2;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.HTTPUploadAllThroughPutAsPDF=function(x,u,z,w){var A=this,v=-1,y=4;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.HTTPUploadThroughPutAsMultiPagePDF=function(x,u,z,w){var A=this,v=-2,y=4;return A.HTTPUploadThroughPutEx(x,v,u,y,z,w)};l.GetSelectedImagesSize=function(v){var w=this;w._resetErr();if(!w._isValid()){return false}if(w._isMobileMode()){return w._mobileNotSupport("GetSelectedImagesSize")}var u=f(w);return w._innerFun("GetSelectedImagesSize",d.makeParams(v,u.join(",")))};l.SetHTTPHeader=function(x,z){var A=this;A._resetErr();if(!A._isValid()){return false}var u,w,v,y=x;if(!A.__httpHeaderMap){A.__httpHeaderMap={}}if(!y||!m.isString(y)){if(m.isUndefined(y)){m.Errors.HttpHeaderIsUndefined(A)}else{if(y===""){m.Errors.HttpHeaderIsEmpty(A)}else{if(y===null){m.Errors.HttpHeaderIsNull(A)}else{m.Errors.HttpHeaderIsInvalid(A)}}}return false}w=["if-modified-since","if-none-match","if-range","range","accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];y=y.toLowerCase();for(v=0;v<w.length;v++){if(w[v]==y){m.Errors.HttpHeaderNotAllowed(A);return false}}if(m.isUndefined(z)||z===null||z===""){if(x in A.__httpHeaderMap){delete A.__httpHeaderMap[x]}return true}if(m.isNumber(z)){z=""+z}A.__httpHeaderMap[x]=z;return true};m.html5.Base64Result=function(u,x,w,v){var y=this;y._stwain=u;y._md5=w;y._length=x;y._content=v};m.html5.Base64Result.prototype.getLength=function(){return this._length};m.html5.Base64Result.prototype.getMD5=function(){return this._md5};m.html5.Base64Result.prototype.getData=function(x,v){var y=this,u=v,w=-1;if(!m.isNumber(x)||!m.isNumber(v)){return""}if(x<0||v<=0){return""}if(x==0&&u==y._length){return y._content}if(x+u>y._length){u=y._length-x}return y._content.substr(x,u)};l._ConvertToBlob=function(w,E,z,y,u){var B=this,x="ConvertToBlob",A=true,C=false,v=arguments;if(!m.isFunction(y)){A=false}m.cancelFrome=0;m.showProgress(B,x,false);var F=function(){m.needShowTwiceShowDialog=false;m.closeProgress(x);if(m.isFunction(u)){var G=[];if(m.isArray(w)){m.each(w,function(H){var I=B._ImgManager.convertServerIdToClientIndex(H);if(I>-1){G.push(I)}})}b(u,B,G,E,v)}return false};var D=2;B._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding]);C=B.__innerConvertToBlob(E,w,z,A,D,function(K,M,L){if(!K||K.size<=0){m.Errors.ConvertBlobIsEmpty(B);return F()}var H=B.MaxUploadImageSize,G=K.size;if(G>H&&H!=-1){m.Errors.UploadExceededMaxSize(B);return F()}m.needShowTwiceShowDialog=false;m.closeProgress(x);if(m.isFunction(y)){var J=[];if(m.isArray(w)){m.each(w,function(N){var O=B._ImgManager.convertServerIdToClientIndex(N);if(O>-1){J.push(O)}})}try{y(K,J,v)}catch(I){}K=null}if(A){return true}else{return K}},F);return C};l.ConvertToBlob=function(F,y,z,u,B){var C=this;C._resetErr();if(!C._isValid()){return false}var E=parseInt(y),v=arguments,D=function(G,H){if(m.isFunction(z)){q(z,G,H,y,v)}G=H=null;return true},x=function(G){if(m.isFunction(u)){b(u,C,G,y,v)}G=null;return false},A=false;if(!m.License.checkProductKey(C,{Core:true})){if(m.isFunction(u)){u(C.ErrorCode,C.ErrorString)}return false}if(!C._isMobileMode()){if(d.isServerInvalid(C)){return x(F)}}if(!C._checkIndices(F)){return x(F)}if(E==EnumDWT_ImageType.IT_BMP||E==EnumDWT_ImageType.IT_JPG||E==EnumDWT_ImageType.IT_PNG||E==EnumDWT_ImageType.IT_J2K){if(F.length>1){m.Errors.ConvertBinaryIndexMoreThanOne(C);return x(F)}}else{if(E==EnumDWT_ImageType.IT_TIF||E==EnumDWT_ImageType.IT_PDF){}else{m.Errors.InvalidImageType(C);return x(F)}}var w=[];if(m.isArray(F)){m.each(F,function(H){var G=C._ImgManager.convertClientIndexToServerId(H);if(G!=-1){w.push(G)}})}if(!m.isFunction(z)){return C._ConvertToBlob(w,E,A)}C._ConvertToBlob(w,E,A,D,x);return true};m._asyncUploadCmd=function(y){var E=y._this,B=y.bOnlyUploadForm,w=y.url,C=y.asyncSuccessFunc,v=y.asyncFailureFunc;if(B){E._innerFormFieldHTTPUpload(w,function(){if(m.isFunction(C)){try{C()}catch(J){}}},function(){if(m.isFunction(v)){try{v()}catch(J){}}})}else{var x=y.serverIds,F=y.enumImageType,H=y.dataFormat,A=y.fileName,D=y.saveSetup,u=y.retry,G=y.bOnlyEmptyIsOK,z=y.objUploadFileStatus,I=function(){if(m.isFunction(v)){var J=[];if(m.isArray(x)){m.each(x,function(L){var M=E._ImgManager.convertServerIdToClientIndex(L);if(M>-1){J.push(M)}})}try{v(J)}catch(K){}}return false};if(m.isNumber(u)&&u>0){}else{u=0}if(E._errorCode!=0){return I()}return E._innerHTTPUpload(w,x,F,H,A,D,u,G,z,function(K){if(m.isFunction(C)){var J=[];if(m.isArray(x)){m.each(x,function(M){var N=E._ImgManager.convertServerIdToClientIndex(M);if(N>-1){J.push(N)}})}try{q(C,K,J)}catch(L){}}return true},I)}};l._asyncUploadFilesCmd=function(x,w,D,M,T,I,B,S,z,N){var H=this,E=parseInt(D),F="HTTPUpload",C=x,O=true,U=false,J,Q,A=[];H.__HTTPPostResponseString="";m.cancelFrome=1;var u=function(){H._bServerPercentDone=true;m.needShowTwiceShowDialog=false;if(I){m.closeProgress(F)}A=null;if(m.isFunction(N)){var V=[];if(m.isArray(w)){m.each(w,function(X){var Y=H._ImgManager.convertServerIdToClientIndex(X);if(Y>-1){V.push(Y)}})}try{N(V)}catch(W){}}return false};m.needShowTwiceShowDialog=true;if(I){m.showProgress(H,F,false)}if(d.isServerInvalid(H)){return u()}var G=0,y=function(W){H._bServerPercentDone=true;m.needShowTwiceShowDialog=false;if(I){m.closeProgress(F)}A=null;if(m.isFunction(z)){var V=[];if(m.isArray(w)){m.each(w,function(X){var Y=H._ImgManager.convertServerIdToClientIndex(X);if(Y>-1){V.push(Y)}})}q(z,W,V)}};var L=w.length,K=0,v=0,P=4,R="";H._bServerPercentDone=false;H._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"]);m.each(w,function(W,V){U=H.__innerConvertToBlob(E,[W],T,true,P,function(aa,ah,ab){if(!aa||aa.size<=0){m.Errors.UploadFileCannotEmpty(H);return u()}var ac=H.MaxUploadImageSize,af=aa.size;if(af>ac&&ac!=-1){m.Errors.UploadExceededMaxSize(H);return u()}var ae=d.cformat(M,V+1);v=((K+1)/L)*100;R=[(K+1),"/",L].join("");H._OnPercentDone([0,v,R,"http",ae]);var Z=ab[0],X=ab[1];aa.name=ae;A.push(aa);K++;if(K>=L){var Y=n.GetHttpHeadersAndClear(H),ad=true,ag=0;if(Dynamsoft.WebTwainEnv.IfAddMD5InUploadHeader){if(ah&&ah!=""){Y["dwt-md5"]=ah}}U=d.httpPostUploadFiles(H,C,A,ad,ag,Y,I,B,S,function(ai){y(ai)},u)}},u,[W,V])});return U}});Dynamsoft.Ready(function(e,f){var a=Dynamsoft;var c=a.navInfo,d=e.html5,j=d.STwain,i=d.Funs,b,h=Dynamsoft.WebTwainEnv,g={upload:"Uploading...",download:"Downloading...",load:"Decoding...",decode:"Decoding...",decodeTIFF:"Decoding tiff...",decodePDF:"Decoding pdf...",encodeTIFF:"Encoding tiff...",encodePDF:"Encoding pdf...",encode:"Encoding..."};if(!e.product.bHTML5Edition){return}b=j.prototype;b.RegisterEvent=function(k,n){var m=this;m._resetErr();if(!m._isValid()){return false}var l=["__",k].join("");m[l]=n;return true};b.onEvent=function(k,l){this.RegisterEvent(k,l)};b.on=function(k,l){this.RegisterEvent(k,l)};b.OnRefreshUI=function(o,n,p,l){var q=this,k="On RefreshUI";if(p){q._ImgManager.refresh(o,q._ImgManager.count(),true,l)}if(Dynamsoft.Lib.isFunction(q.__OnRefreshUI)){q.__OnRefreshUI(q._ImgManager.getCurrentImageIndex(),q._ImgManager.count())}return true};b._OnRemoteScanStatusAsync=function(v){var t=this,r="OnRemoteScanStatusAsync",y;if(v&&v.length>=2){try{var l=new String(v[1]);y=e.parse(l)}catch(u){e.log(u.message);e.log("parse json failed: "+v[1])}if(!y){y={sequence:0,screen:[]}}}if(y&&y.sequence){if(y.sequence>0&&y.screen&&y.screen.length>0){var n,x,w,q,k,s;n=y.screen;w=y.sequence;k=y.wnds;x=n[0];s=x.img;if(e.isString(s)&&s!=""){q=x.wnd}if(w&&q){var p=e.one(".ds-img-screen");if(p&&t._acquireDivEL){if(t._acquireDivEL.evtFun){e.removeEventListener(p[0],"mouseup",t._acquireDivEL.evtFun);t._acquireDivEL.evtFun=null}p[0].src=s;t._acquireDivEL.evtFun=function(m){if(!k){k="0"}var o=e.stringify({sequence:w,wnds:k,wnd:q+"",type:2,x:m.offsetX,y:m.offsetY});t._innerSendCmd("SendEventToScannerUI",["[",o,"]"].join(""))};e.addEventListener(p[0],"mouseup",t._acquireDivEL.evtFun)}}}else{t.__closeRemoteScanUI(false)}}if(e.isFunction(t.__OnRemoteScanStatusAsync)){t.__OnRemoteScanStatusAsync(y)}return true};b._OnBitmapChanged=function(C){var B=this,v=(C[0]=="10"),G=(C[0]=="c2"),r=(C[0]=="0")||G||v,k=C[1].split(","),x=C[2],l=C[3],H=B.__maxImagesInBuffer,z="OnBitmapChanged:",n=1,w=2,t=3,o=4,u=5,E=[];if(v){if(C.length>5){var A=C[5];E.push(A)}}else{if(G){if(C.length>5){E=C[5]}if(!e.isArray(E)){E=[]}}else{var s={};if(C.length>5){s.width=C[5]}if(C.length>6){s.height=C[6]}if(C.length>7){s.bitDepth=C[7]}if(C.length>8){s.resolutionX=C[8]}if(C.length>9){s.resolutionY=C[9]}E.push(s)}}e.log(z+C);if((x==w)||(x==n&&!B.__IfAppendImage)){e.each(k,function(K,I){var J=parseInt(K),L=B._ImgManager.getCurrentImageIndex(),M;if(I<E.length&&E[I]){M=E[I]}else{M={}}if(isNaN(J)||J<0){return true}if(r){B._aryBitmapCache.push(J)}else{var m=0;for(;m<B._aryBitmapCache.length;m++){if(B._aryBitmapCache[m]==J){B._aryBitmapCache.splice(m,1);return true}}}if(B._ImgManager.exists(J)){return true}if(B.__insertingIndex>-1){L=B.__insertingIndex}if(L==-1){L=0}B._ImgManager.insertBefore(L,H,J,M);if(B.__insertingIndex>-1){B.__insertingIndex=B.__insertingIndex+1}});if(e.isFunction(B.__OnRefreshUI)){B.__OnRefreshUI(B._ImgManager.getCurrentImageIndex(),B._ImgManager.count())}}else{if(x==n&&B.__IfAppendImage){e.each(k,function(L,I){var K=parseInt(L),J;if(isNaN(K)||K<0){return true}if(I<E.length&&E[I]){J=E[I]}else{J={}}if(r){B._aryBitmapCache.push(K)}else{var m=0;for(;m<B._aryBitmapCache.length;m++){if(B._aryBitmapCache[m]==K){B._aryBitmapCache.splice(m,1);return true}}}if(B._ImgManager.exists(K)){return true}B._ImgManager.append(H,K,J)});if(e.isFunction(B.__OnRefreshUI)){B.__OnRefreshUI(B._ImgManager.getCurrentImageIndex(),B._ImgManager.count())}}else{if(x==t&&r){var F=false;if(k.length==1&&k[0]==-1){F=true}else{if(k.length==1&&B._ImgManager.count()<=1){F=B._ImgManager.convertClientIndexToServerId(0)==k[0]}}if(F){B._ImgManager.clear()}else{e.each(k,function(J,m){var I=parseInt(J);if(isNaN(I)||I<0){return true}B._ImgManager.removeByServerId(I)})}if(e.isFunction(B.__OnRefreshUI)){B.__OnRefreshUI(B._ImgManager.getCurrentImageIndex(),B._ImgManager.count())}}else{if(x==o){e.each(k,function(L,m){var J=parseInt(L),I;if(isNaN(J)||J<0){return true}if(m<E.length&&E[m]){I=E[m]}else{I={}}if(J>=0&&!B.__bLoadingImage){if(B._isBindViewer()){if(B._ImgManager.bImageJustChangedInEditor==false){B._ImgManager.bImageChangedInViewer=true}else{B._ImgManager.bImageJustChangedInEditor=false;B._ImgManager.bImageChangedInViewer=false}}var K=B._ImgManager.convertServerIdToClientIndex(J);if(K>-1){B.OnRefreshUI(K,B._ImgManager.count(),true,I)}}})}else{if(x==u){if(l>=0&&!B.__bLoadingImage){var D;if(0<E.length&&E[0]){D=E[0]}else{D={}}if(B.__IfAppendImage==false){B.OnRefreshUI(l,B._ImgManager.count(),true,D)}B._ImgManager.refresh(l,B._ImgManager.count(),false,D)}}}}}}if(e.isFunction(B.__OnBitmapChanged)){if(!v&&r){return true}var q=[];e.each(k,function(I){var m=parseInt(I),J;if(isNaN(m)||m<0){return true}J=B._ImgManager.convertServerIdToClientIndex(m);if(J>-1){q.push(J)}});var y=B._ImgManager.getCurrentImageIndex(),p=x;if(x==n){if(B.__IfAppendImage){p=n}else{p=w}}B.__OnBitmapChanged(q,p,y,B._ImgManager.count())}};b._OnPostLoad=function(r,k){var o=this,n,t,q,l,s,m;if(k!==undefined&&k.exception!==undefined&&k.description!==undefined){o._errorCode=k.exception;o._errorString=k.description}e.log("OnPostLoad Results:");l=r[1].split(",");t=e.base64.decode(l[0]);s=e.base64.decode(l[1]);e.log(t);e.log(s);e.log(l[2]);i.autoDiscardBlankImage(o,"On PostLoad");m=o._ImgManager.getCurrentImageIndex();if(m>=0){o.OnRefreshUI(m)}if(e.isFunction(o.__OnPostLoad)){o.__OnPostLoad(t,s,l[2])}};b._OnPostTransfer=function(k){var l=this;e.log("On PostTransfer Results:"+k);i.autoDiscardBlankImage(l,"On PostTransfer");if(e.isFunction(l.__OnPostTransfer)){l.__OnPostTransfer()}};b._OnPostTransferAsync=function(k){var p=this;e.log("On PostTransfer Async Results:"+k);if(e.isFunction(p.__OnPostTransferAsync)){var n;if(k&&k.length>=2){try{var m=String(k[1]),l=m.replace(/\\/g,"\\\\");n=e.parse(l);if(n.imageId){n.imageId=p.objImageIndexManager.convertServerIdToGuid(n.imageId)}}catch(o){e.log(k)}}if(!n){n={imageId:-1}}p.__OnPostTransferAsync(n)}};b._OnPreAllTransfersAsync=function(l){var n=this;if(e.isFunction(n.__OnPreAllTransfersAsync)){var m={event:"beforeAcquire",result:{}};try{if(e.isArray(l)&&l.length>1){m=e.parse(l[1])}}catch(k){}setTimeout(function(){n.__OnPreAllTransfersAsync(m)},10)}};b._OnPostAllTransfers=function(l){var n=this,k,m;if(l.length>=2&&n._errorCode==0){n._errorCode=l[1];n._errorString=l[2]}e.log("On PostAllTransfers Results:"+l);n.__bLoadingImage=false;n.__bAcquireImageNow=false;n.__closeRemoteScanUI(true);if(e.isFunction(n.__OnPostAllTransfers)){n.__OnPostAllTransfers()}};b._OnResult=function(k){var m=this,l=k[1];if(e.isFunction(m.__OnResult)){m.__OnResult(l)}};b._OnTransferCancelled=function(k){var n=this,l=n._ImgManager.getCurrentImageIndex(),m=n._ImgManager.count();n.__bLoadingImage=false;n.__bAcquireImageNow=false;if(e.isFunction(n.__OnTransferCancelled)){n.__OnTransferCancelled()}};b._OnTransferError=function(k){var l=this;if(e.isFunction(l.__OnTransferError)){l.__OnTransferError()}};b._OnSourceUIClose=function(k){var l=this;l.__closeRemoteScanUI(true);if(e.isFunction(l.__OnSourceUIClose)){l.__OnSourceUIClose()}};b._OnPreTransfer=function(k){var l=this;if(e.isFunction(l.__OnPreTransfer)){l.__OnPreTransfer()}};b._OnPreAllTransfers=function(k){var l=this;if(e.isFunction(l.__OnPreAllTransfers)){l.__OnPreAllTransfers()}};b._OnPercentDone=function(u){var t=this,k=false,q,o=Dynamsoft.Lib,C=false,l,F=0,E,B,A,z;if(o.isArray(u)&&u.length>2){l=u[0];F=u[1];E=u[2];if(u.length>3){B=u[3]}if(u.length>4){A=u[4]}if(u.length>5){z=u[5]}q=F;if(F<0){q=0}else{if(F>100){q=100}}q=Math.floor(q);if(o.cancelFrome==1||o.cancelFrome==2||o.cancelFrome==5){C=A}}if(!t._bServerPercentDone){if(l!=0){return}}if(F>0||F==0){if(o.cancelFrome==1||o.cancelFrome==2){if(B=="http"){k=true}}if(o.cancelFrome==3||o.cancelFrome==4){if(A=="ftp"){k=true}}}if((o.cancelFrome==0&&t.__IfShowProgressBar==true)||(o.cancelFrome!=0&&t.__IfShowCancelDialogWhenImageTransfer==true)){var v=o.one(".dynamsoft-progressBar"),s=o.one(".dynamsoft-status"),y=o.one(".dynamsoft-finalMessage"),w=o.one(".dynamsoft-desc"),x;if(o.cancelFrome==3||o.cancelFrome==4){var n=B;if(n==0){i.setBtnCancelVisibleForProgress(t,false)}else{if(n==1){i.setBtnCancelVisibleForProgress(t,true)}}}if(F<0){o.progressMessage=E;x=o.progressMessage}else{if(E!=""&&E!="1/1"){x=o.progressMessage+"("+E+")"}else{x=o.progressMessage}}if(y&&y.getEL()){var p="",D="";if(x.indexOf(" ...")){x=x.replace(" ...","...")}if(x.indexOf("(")!=-1){p=x.substr(0,x.indexOf("("));D=x.substr(x.indexOf("("))}else{p=x}o.each(g,function(G,m){if(G.indexOf(p)!=-1){x=h.CustomizableDisplayInfo.customProgressText[m]+D}});if(x==""){x="&nbsp;"}y.html(x)}if(C!=false){if(C==""||o.isUndef(C)){C="&nbsp;"}else{if(o.isString(C)&&C.length>30){C=C.substring(0,30)+"..."}}w.html(C)}else{w.html("&nbsp;")}if(q||q===0){if(s&&s.getEL()){s.html(q+"%")}if(v&&v.getEL()){if(c.bIE){if(v[0].objProgressBar){v[0].objProgressBar.setValue(q)}else{v[0].value=q}}else{if(c.bEdge){v[0].style.display="";v[0].value=q}else{v[0].value=q}}}}if(q&&(q>=100||o.dlgRef<=0)){setTimeout(function(){if(v&&v.getEL()){if(c.bIE){if(v[0].objProgressBar){v[0].objProgressBar.setValue(0)}else{v[0].value=0}}else{if(c.bEdge){v[0].style.display="none";v[0].value=0}else{v[0].value=0}}}},1000);if(o.dlgRef<=0){var r="OnPercentDone";o.closeProgress(r)}}}if(k==true){if(o.isFunction(t.__OnInternetTransferPercentage)){t.__OnInternetTransferPercentage(q,false)}if(o.isFunction(t.__OnInternetTransferPercentageEx)){t.__OnInternetTransferPercentageEx(q,false)}}if(o.isFunction(t.__OnPercentDone)){t.__OnPercentDone()}};b._OnGetFilePath=function(l){var r=this,m,o,q,n,k;q=l[1].split(",");e.log("On GetFilePath Results:"+l);n=e.base64.decode(q[3]);k=e.base64.decode(q[4]);if(q[2]=="-1032"){q[2]="-1";n=k=""}if(e.isFunction(r.__OnGetFilePath)){r.__OnGetFilePath(q[0]*1,q[1]*1,q[2]*1,n,k)}r.__bOpenFileNow=false};b.checkErrorString=function(){var m=this,l=m.ErrorCode;if(l===-2115){return true}if(l===-2003){if(!Dynamsoft.WebTwainEnv.IfHttpPostErrorNoWindow){var k=window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");k.document.writeln(m.__HTTPPostResponseString)}}return(l===0)};b.__GetLoadEventsNum=function(){var l=this,k=0;if(e.isFunction(l.__OnPostLoad)){k=k|1}if(e.isFunction(l.__OnGetFilePath)){k=k|2}return k};b._OnPageFocus=function(k){var m=this;m.bPageFocus=true;if(!m._isMobileMode()&&!m.bReady){return Dynamsoft.Lib.connectToWS(m)}if(!c.bWin||m._isMobileMode()||!h.IfAlwaysFocusOnPopupWindow){return}var l=e.stringify({sequence:0,wnds:0,wnd:"0",type:3,x:0,y:0});if(m.__bAcquireImageNow||k||m.__bOpenFileNow){m.bServerAlwaysFocusOnPopupWindow=true;m._innerSendCmd("SendEventToScannerUI",["[",l,"]"].join(""))}};b._OnPageBlur=function(k){var m=this;if(!c.bWin||m._isMobileMode()){return}if(!m.bReady){return Dynamsoft.Lib.connectToWS(m)}var l=e.stringify({sequence:0,wnds:0,wnd:"0",type:4,x:0,y:0});if(m.bPageFocus!=false||k){m.bPageFocus=false;if(m.__bAcquireImageNow||k||m.__bOpenFileNow){m.bServerAlwaysFocusOnPopupWindow=false;m._innerSendCmd("SendEventToScannerUI",["[",l,"]"].join(""))}}}});Dynamsoft.Ready(function(a,g){var b=Dynamsoft;if(!a.product.bHTML5Edition){return}var j=a.html5.STwain,c=j.prototype,f=a,i=a.html5.Funs,h=Dynamsoft.WebTwainEnv,e=!1,d=!0;c.SetCookie=function(k){this._cookie=k;document.cookie=k;return d};c.LoadImageFromBase64Binary=function(w,y,z,o){var u=this;u._resetErr();if(!u._isValid()){return false}var r=w,n=e,l="LoadImageFromBase64Binary",t=y,v,q=0,x=1;if(r instanceof Dynamsoft.Lib.html5.Base64Result){if(a.isFunction(r.getLength)&&a.isFunction(r.getData)){r=r.getData(0,r.getLength())}}if((a.isUndef(y)||y==5)&&a.isString(r)){if(r.indexOf("data:image/bmp")!=-1){t=0}else{if(r.indexOf("data:image/jpeg")!=-1){t=1}else{if(r.indexOf("data:image/tif")!=-1){t=2}else{if(r.indexOf("data:image/png")!=-1){t=3}else{if(r.indexOf("data:application/pdf")!=-1){t=4}else{if(r.indexOf("data:image/jp2")!=-1){t=14}}}}}}}if(t!=Dynamsoft.EnumDWT_ImageType.IT_BMP&&t!=Dynamsoft.EnumDWT_ImageType.IT_JPG&&t!=Dynamsoft.EnumDWT_ImageType.IT_TIF&&t!=Dynamsoft.EnumDWT_ImageType.IT_PNG&&t!=Dynamsoft.EnumDWT_ImageType.IT_PDF&&t!=Dynamsoft.EnumDWT_ImageType.IT_J2K){t=-1}if(!a.License.checkProductKey(u,{Core:true})){if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString)}return e}if(!a.License.checkPDFProductKeyWhenNeeds(u,t)){if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString)}return e}if(u._isMobileMode()){if(a.isUndefined(w)){a.Errors.InvalidParameter(u);if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString)}return false}a.cancelFrome=2;a.showProgress(u,l,d);u.__bLoadingImage=d;var p=r;if(f.isString(r)){if(r.indexOf("blob:")>=0||r.indexOf("data:")>=0){}else{var s;if(y==EnumDWT_ImageType.IT_PNG){s="data:image/png;base64,"}else{if(y==EnumDWT_ImageType.IT_JPG){s="data:image/jpeg;base64,"}else{if(y==EnumDWT_ImageType.IT_TIF){s="data:image/tif;base64,"}else{if(y==EnumDWT_ImageType.IT_PDF){s="data:application/pdf;base64,"}else{if(y==EnumDWT_ImageType.IT_BMP){s="data:image/bmp;base64,"}else{if(y==EnumDWT_ImageType.IT_J2K){s="data:image/jp2;base64,"}else{s="data:application/octet-stream;base64,"}}}}}}r=[s,r].join("")}if(r.indexOf("data:")>=0){p=f.MobileFuns.dataURLtoBlob(r);if(p==false){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;a.Errors.ConvertFromBase64Failed(u);if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,y)}return false}}}else{if(r instanceof ArrayBuffer){var k="image/png";if(y==EnumDWT_ImageType.IT_PNG){k="image/png"}else{if(y==EnumDWT_ImageType.IT_JPG){k="image/jpeg"}else{if(y==EnumDWT_ImageType.IT_TIF){k="image/tiff"}else{if(y==EnumDWT_ImageType.IT_PDF){k="application/pdf"}else{if(y==EnumDWT_ImageType.IT_BMP){k="image/bmp"}else{if(y==EnumDWT_ImageType.IT_J2K){k="image/jp2"}}}}}}p=new Blob([r],{type:k})}else{}}v=u._innerSendToMobile("LoadImageFromBinary",f.MobileFuns.makeParams(p),0,function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(u._isBindViewer()){var m=u._ImgManager.getCurrentImageIndex();if(m>=0){u.OnRefreshUI(m)}}if(z){z(r,y)}return true},function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,y)}});return true}if(a.isFunction(z)){n=d}if(a.isString(r)){if(r.indexOf("base64,")!=-1){r=r.substr(r.indexOf("base64,")+7)}}q=u.__GetLoadEventsNum();if(n){if(i.isServerInvalid(u)){if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,y)}return e}a.cancelFrome=2;a.showProgress(u,l,d);u.__bLoadingImage=d;x=0;v=u._innerSend(l,i.makeParams(r,t,q,x),d,function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(u._isBindViewer()){var m=u._ImgManager.getCurrentImageIndex();if(m>=0){u.OnRefreshUI(m)}}if(z){z(r,y)}return true},function(){Dynamsoft.Lib.closeProgress(l);u.__bLoadingImage=false;if(a.isFunction(o)){o(u.ErrorCode,u.ErrorString,r,y)}})}else{v=u.__innerLoadImageFun(l,i.makeParams(r,t,q,x),x)}return v};c.SaveSelectedImagesToBytes=function(l,k){a.Errors.HTML5NotSupport(this);return e};c.LoadImageFromBytes=function(m,k,l){a.Errors.HTML5NotSupport(this);return e};c.UnregisterEvent=function(k,n){var m=this;m._resetErr();if(!m._isValid()){return false}var l=["__",k].join("");m[l]=null;return d};c.SetCancel=function(l,k){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("SetCancel",k)}return this._innerSend("SetCancel",null,d,l,k)};c._asyncSetImageWidth=function(o,p,k,n){var r=this,m=function(){i.refreshImageAfterInvokeFun(r,o);if(a.isFunction(k)){setTimeout(k,30)}},q=function(){if(a.isFunction(n)){n(r.ErrorCode,r.ErrorString)}};var l=parseInt(o);return r._innerSendToMobile("SetImageWidth",f.MobileFuns.makeParams(l,p),0,m,q)};c.SetImageWidth=function(q,l,t,s){var n=this,k,o;n._resetErr();if(!n._isValid()){return false}var p=parseInt(q);if(isNaN(p)){a.Errors.InvalidIndex(n);if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}return false}if(p<0||p>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}return false}if(a.isUndefined(l)){a.Errors.InvalidParameter(n);if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}return false}if(n._isMobileMode()){return n._asyncSetImageWidth(p,l,t,s)}var m=n._ImgManager.convertClientIndexToServerId(p);if(m==-1){a.Errors.IndexOutOfRange(n);if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}return false}k=n._innerFun("SetImageWidth",i.makeParams(m,l));o=(k==1);if(o){if(a.isFunction(t)){t()}}else{if(a.isFunction(s)){s(n.ErrorCode,n.ErrorString)}}return o};c.HTTPDownloadStreamThroughPost=function(l,k){a.Errors.HTML5NotSupport(this);return e};c.HTTPUploadStreamThroughPost=function(n,m,k,o,l){a.Errors.HTML5NotSupport(this);return e};c.HTTPUploadThroughPutDirectly=function(n,l,k,o,m){a.Errors.HTML5NotSupport(this);return false};c.SetCustomDSDataEx=function(k){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("SetCustomDSDataEx")}return this._innerFun("SetCustomDSDataEx",i.makeParams(k))};c.SetCustomDSData=function(k){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("SetCustomDSData")}var l=i.replaceLocalFilename(k);return this._innerFun("SetCustomDSData",i.makeParams(l))};c.GetCustomDSDataEx=function(){var k=this;k._resetErr();if(!k._isValid()){return false}if(k._isMobileMode()){return k._mobileNotSupport("GetCustomDSDataEx")}return k._innerFun("GetCustomDSDataEx")};c.GetCustomDSData=function(k){var m=this;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupport("GetCustomDSData")}var l=i.replaceLocalFilename(k);return m._innerFun("GetCustomDSData",i.makeParams(l))};c._asyncConvertToBW=function(o,k,n){var q=this,m=function(){i.refreshImageAfterInvokeFun(q,o);if(a.isFunction(k)){k()}},p=function(){if(a.isFunction(n)){n(q.ErrorCode,q.ErrorString)}};var l=parseInt(o);return q._innerSendToMobile("ConvertToBWScale",f.MobileFuns.makeParams(l),0,m,p)};c.ConvertToBW=function(o,k,n){var p=this;p._resetErr();if(!p._isValid()){return false}if(!a.License.checkProductKey(p,{Core:true})){if(a.isFunction(n)){n(p.ErrorCode,p.ErrorString)}return false}var m=parseInt(o);if(isNaN(m)){a.Errors.InvalidIndex(p);if(a.isFunction(n)){n(p.ErrorCode,p.ErrorString)}return false}if(m<0||m>=p._ImgManager.count()){a.Errors.IndexOutOfRange(p);if(a.isFunction(n)){n(p.ErrorCode,p.ErrorString)}return false}if(p._isMobileMode()){return p._asyncConvertToBW(m,k,n)}var l=p.ChangeBitDepth(o,1,true);if(l){if(a.isFunction(k)){k()}}else{if(a.isFunction(n)){n(p.ErrorCode,p.ErrorString)}}return l};c.LoadImageFromBinary=function(u,s,l){var p=this,k;if(!a.License.checkProductKey(p,{Core:true})){if(a.isFunction(l)){l(p.ErrorCode,p.ErrorString)}return false}if(!u||u==""){a.Errors.ParameterCannotEmpty(p);if(a.isFunction(l)){l(p.ErrorCode,p.ErrorString)}return false}if(u instanceof FileList){if(u.length==1){return p.LoadImageFromBinary(u[0],s,l)}else{if(u.length>1){var m;for(m=0;m<u.length;m++){a.asyncQueue.pushToDo(p,"LoadImageFromBinary",[u[m],s,l])}a.asyncQueue.start();return true}else{a.Errors.ParameterCannotEmpty(p);if(a.isFunction(l)){l(p.ErrorCode,p.ErrorString)}return false}}}if(window.ReadableStream&&u instanceof ReadableStream){k=new Response(u)}else{if(window.Response&&u instanceof Response){k=u}}if(p._bLocalService){if(k){k.arrayBuffer().then(function(A){var x=new Blob([A]);var z="",y=-1,w=true;p.__LoadImageFromBytes(x,y,z,w,s,l)})}else{var r=u;if(r instanceof ArrayBuffer||r instanceof Uint8Array){r=new Blob([u])}var q="",v=-1,o=true,n=Dynamsoft.EnumDWT_ImageType;if(a.isString(r.type)){if(r.type=="application/pdf"){v=n.IT_PDF}else{if(r.type=="image/png"){v=n.IT_PNG}else{if(r.type=="image/jpeg"){v=n.IT_JPG}else{if(r.type=="image/bmp"){v=n.IT_BMP}else{if(r.type=="image/tiff"){v=n.IT_TIF}else{if(r.type=="image/jp2"){v=n.IT_J2K}}}}}}}p.__LoadImageFromBytes(r,v,q,o,s,l)}}else{if(k){k.arrayBuffer().then(function(t){p._innerSendToMobile("LoadImageFromBinary",f.MobileFuns.makeParams(t),0,s,l)})}else{p._innerSendToMobile("LoadImageFromBinary",f.MobileFuns.makeParams(u),0,s,l)}}return true};c.EnableSourceUI=function(k,m){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("EnableSourceUI",m)}return l._innerSend("EnableSourceUI",null,true,k,m)};c.getCapabilities=function(k,m){var l=this;if(l._bLocalService){return l._innerFunRaw("GetCapabilities",null,true,false,false,function(n){var q,p;if(n.length>0){p=n[0]}try{if(f.isString(p)){p=f.removeNonPrintableChar(p);p=f.replaceAll(p,"\\\\","\\\\");q=JSON.parse(p)}else{q={}}}catch(o){l._errorCode=-2302;l._errorString=o;if(f.isFunction(m)){m(l.ErrorCode,l.ErrorString)}return}if(q.errorCode==0){if(f.isFunction(k)){k(q.response)}}else{l._errorCode=q.errorCode;l._errorString=q.errorString;if(f.isFunction(m)){m(l.ErrorCode,l.ErrorString)}}},m)}else{return l._mobileNotSupport("GetCapabilities",m)}return true};c.setCapabilities=function(l,n,p){var o=this;if(o._bLocalService){if(a.isObject(l)&&!a.isArray(l)){var k=["[",a.stringify(l),"]"].join(""),m=function(q){if(a.isFunction(n)){n(q)}};return o._innerSend("SetCapabilities",k,0,m,p)}else{a.Errors.InvalidParameter(o);if(a.isFunction(p)){p(o.ErrorCode,o.ErrorString)}return false}}else{return o._mobileNotSupport("SetCapabilities",p)}return true};c.BindViewer=function(k){var n=this,l=false,m=k;if(!Dynamsoft.WebTwainEnv.UseDefaultViewer){a.Errors.CannotBindViewerWhenNoViewerJS(n);return false}if(a.isString(k)){m=a.get(k)}if(n.config.container!=m){n.config.container=m;n.config.ifBindViewer=true;a.html5.ui.init(n,n.config)}l=n._ImgManager.BindView(k);n._bBindViewer=true;n.config.ifBindViewer=false;return l};c.UnbindViewer=function(){var k=this;k._bBindViewer=false;k.config.container=null;return k._ImgManager.UnbindView()};c.GetIfShowVideoContainer=function(){var k=this;return k._ImgManager.GetIfShowVideoContainer()};c.ShowVideoContainer=function(k){var l=this;return l._ImgManager.ShowVideoContainer(k)};c.UpdateVideoContainer=function(k){var l=this;return l._ImgManager.UpdateVideoContainer(k)};c.ChangeBitDepth=function(n,m,p){var o=this,l;o._resetErr();if(!o._isValid()){return false}if(o._isMobileMode()){return o._mobileNotSupport("ChangeBitDepth")}l=parseInt(n);if(isNaN(l)){a.Errors.InvalidIndex(o);return false}if(l<0||l>=o._ImgManager.count()){a.Errors.IndexOutOfRange(o);return false}var k=o._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(o);return false}return o._innerFun("ChangeBitDepth",i.makeParams(k,m,p))};c._asyncConvertToGrayScale=function(t,s,m){var o=this,q=function(){i.refreshImageAfterInvokeFun(o,t);if(a.isFunction(s)){setTimeout(s,30)}},l=function(){if(a.isFunction(m)){m(o.ErrorCode,o.ErrorString)}};if(!a.License.checkProductKey(o,{Core:true})){l();return false}var p=parseInt(t),k,n;return o._innerSendToMobile("ConvertToGrayScale",f.MobileFuns.makeParams(p),0,q,l)};c.ConvertToGrayScale=function(p,n,m){var s=this,o,q;s._resetErr();if(!s._isValid()){return false}var l=parseInt(p);if(isNaN(l)){a.Errors.InvalidIndex(s);if(a.isFunction(m)){m(s.ErrorCode,s.ErrorString)}return false}if(l<0||l>=s._ImgManager.count()){a.Errors.IndexOutOfRange(s);if(a.isFunction(m)){m(s.ErrorCode,s.ErrorString)}return false}if(s._isMobileMode()){return s._asyncConvertToGrayScale(l,n,m)}var k=s._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(s);if(a.isFunction(m)){m(s.ErrorCode,s.ErrorString)}return false}o=s._innerFun("ConvertToGrayScale",i.makeParams(k));q=(o==1);if(q){i.refreshImageAfterInvokeFun(s,l);if(a.isFunction(n)){n()}}else{if(a.isFunction(m)){m(s.ErrorCode,s.ErrorString)}}return q};c.ClearTiffCustomTag=function(){var k=this;k._resetErr();if(!k._isValid()){return false}k._aryTiffTag.splice(0,k._aryTiffTag.length);if(k._isMobileMode()){return true}return k._innerFun("ClearTiffCustomTag")};c.SetTiffCustomTag=function(k,m,r){var p=this;p._resetErr();if(!p._isValid()){return false}if(a.isUndef(k)||a.isUndef(m)){a.Errors.InvalidParameter(p);return false}var o,t=k*1;if(a.isString(m)){o=a.replaceAll(m,'"','\\"')}else{o=m}if(t<=0||t>2147483647){a.Errors.InvalidTiffTagError(p);return false}var n=0,s,l=false,q=p._aryTiffTag.length;for(n=0;n<q;n++){s=p._aryTiffTag[n];if(s.tag==t){s.Content=m;s.isBinary=!r;l=true}}if(!l&&q>=32){a.Errors.TiffTagCountExceedError(p);return false}if(p._isMobileMode()){if(l){return true}p._aryTiffTag.push({tag:k,content:m,isBinary:!r});return true}return p._innerFun("SetTiffCustomTag",i.makeParams(t,o,r))};c.IsBlankImage=function(m){var n=this,l=parseInt(m);if(isNaN(l)){a.Errors.InvalidIndex(n);return false}if(l<0||l>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);return false}var k=n._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(n);return false}return n._innerFun("IsBlankImage",i.makeParams(k,e))};c.IsBlankImageExpress=function(m){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isMobileMode()){return n._mobileNotSupport("IsBlankImageExpress")}var l=parseInt(m);if(isNaN(l)){a.Errors.InvalidIndex(n);return false}if(l<0||l>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);return false}var k=n._ImgManager.convertClientIndexToServerId(l);if(k==-1){a.Errors.IndexOutOfRange(n);return false}return n._innerFun("IsBlankImage",i.makeParams(k,d))};c.SetOpenSourceTimeout=function(k){var l=this;l._resetErr();if(!l._isValid()){return false}if(l._isMobileMode()){return l._mobileNotSupport("SetOpenSourceTimeout")}return l._innerFun("SetOpenSourceTimeout",i.makeParams(k))};c.GetImageURL=function(s,l,k,w,r){var q=this;q._resetErr();if(!q._isValid()){return false}if(q._isMobileMode()){return q._mobileNotSupport("GetImageURL")}var t=s,u=parseInt(l),o=parseInt(k),v,m,n;if(w){v="";m="dwt://"}else{v=q.httpUrl;m="dwt/"}n=[v,m,a.product.getDWTPrefix(),a.product.getServerVersionInfo(),"/img?id=",q.clientId];if(a.isUndefined(t)||t===null){a.Errors.IndexNullOrUndefined(q);return""}if(!r){t=parseInt(t);if(isNaN(t)){a.Errors.InvalidIndex(q);return""}if(t<-1||t>=q._ImgManager.count()){a.Errors.IndexOutOfRange(q);return""}var p=q._ImgManager.convertClientIndexToServerId(t);if(p==-1){return""}n.push("&index=");n.push(p);if(u>0&&o>0){n.push("&width=");n.push(u);n.push("&height=");n.push(o)}}else{n.push("&index=-1&width=-1&height=-1&webcam=");n.push(r)}n.push("&t=");n.push(new Date().getTime());return n.join("")};c.GetImagePartURL=function(l,m,n){var o=this;o._resetErr();if(!o._isValid()){return false}if(o._isMobileMode()){return o._mobileNotSupport("GetImagePartURL")}var k=parseInt(l);if(isNaN(k)){a.Errors.InvalidIndex(o);return""}if(k<0||k>=o._ImgManager.count()){a.Errors.IndexOutOfRange(o);return""}return this.GetImageURL(k,m,n,!0)};c.SetLanguage=function(l){var k=this;k._resetErr();if(!k._isValid()){return false}if(k._isMobileMode()){return k._mobileNotSupport("SetLanguage")}return k._innerFun("SetLanguageForSecurity",i.makeParams(l))};c._wasmGetLicenseInfo=function(m,l){var n=this,k=function(o){if(o){if(!o.exception){n.__licenseInfo=o;if(m){m(n.__licenseInfo)}}else{if(l){l(o.exception)}}}else{if(l){l()}}};return n._innerSendToMobile("GetLicenseInfo",f.MobileFuns.makeParams(),0,k,l)};c.GetLicenseInfo=function(m,l){var n=this,k;if(!n.__licenseInfo){if(n._isMobileMode()){return n._wasmGetLicenseInfo(m,l)}if(i.isHttpServerInvalid(n)){return e}n._innerFunRaw("GetLicenseInfo",null,d,e,d,function(o){if(o){if(!o.exception){n.__licenseInfo=o;if(a.isFunction(m)){m(n.__licenseInfo)}}else{if(a.isFunction(l)){l(o.exception)}}}else{if(a.isFunction(l)){l()}}},l)}else{if(a.isFunction(m)){m(n.__licenseInfo)}}return d};c.IndexToImageID=function(m){var n=this;n._resetErr();if(!n._isValid()){return false}var l=parseInt(m);if(isNaN(l)){a.Errors.InvalidIndex(n);return -1}if(l<0||l>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);return -1}var k=n._ImgManager.convertClientIndexToServerId(l);return n.objImageIndexManager.convertServerIdToGuid(k)};c.ImageIDToIndex=function(m){var n=this,l,k=-1;n._resetErr();if(!n._isValid()){return false}l=n.objImageIndexManager.convertGuidToServerId(m);if(l>0){k=n._ImgManager.convertServerIdToClientIndex(l)}if(k==-1){a.Errors.InvalidImageID(n)}return k};c._setProductKeyV2=function(k){var p=this,o=k;p._resetErr();if(!p._isValid()){return false}if(i.isHttpServerInvalid(p)){return a.Promise.reject({code:p._errorCode,message:p._errorString})}if(!a.isString(o)||o=="******"){a.Errors.LicenseEmptyOrInvalid(p);return a.Promise.reject({code:p._errorCode,message:p._errorString})}var n,l=Dynamsoft.WebTwainEnv.ProductKey;if(a.startsWith(o,"http://")||a.startsWith(o,"https://")){var m={method:"get"};n=a.fetch(o,m)}else{n=a.Promise.resolve(o)}n=n.then(function(q){return p._innerFunRawV2("ProductKey",i.makeParams(q))},function(r){a.Errors.HttpLicenseInvalid(p);var q;if(r){q=[p._errorString," Http info: ",r.errorString," (",r.httpCode,")"].join("")}else{q=p._errorString}Dynamsoft.WebTwainEnv.ProductKey=l;throw {code:p._errorCode,message:q}});n=n.then(function(q){if(q){if(q.exception!==undefined&&q.description!==undefined){p._errorCode=q.exception;p._errorString=q.description;Dynamsoft.WebTwainEnv.ProductKey=l;n.context=null;throw {code:p._errorCode,message:p._errorString}}Dynamsoft.WebTwainEnv.ProductKey=n.context.productKey;n.context=null;return p._innerFunRawV2("GetLicenseInfo")}else{a.Errors.LicenseEmptyOrInvalid(p);Dynamsoft.WebTwainEnv.ProductKey=l;n.context=null;throw {code:p._errorCode,message:p._errorString}}});n.context={productKey:o};return n};c.SetProductKeyAsync=function(k){var m=this;m._resetErr();if(!m._isValid()){return false}if(a.isUndefined(k)){a.Errors.LicenseEmptyOrInvalid(m);return a.Promise.reject({code:m._errorCode,message:m._errorString})}var l;if(m._isMobileMode()){l=m._innerSendToMobileV2("GetLicenseInfo",f.MobileFuns.makeParams(k))}else{l=m._setProductKeyV2(k)}return l.then(function(n){var o=n;if(!o||o.message){a.Errors.LicenseEmptyOrInvalid(m);if(o&&o.message){m._errorString=o.message}throw {code:m._errorCode,message:m._errorString}}Dynamsoft.WebTwainEnv.ProductKey=k;m.__licenseInfo=o;return o})};c.GetVersionInfoAsync=function(){return this._innerFunV2("VersionInfo")};c.isUsingActiveX=function(){return false}});Dynamsoft.Ready(function(a,h){var c=Dynamsoft;if(!a.product.bHTML5Edition){return}var g=Dynamsoft.navInfo,b=a.html5.Funs2={getImageUrl:function(n,p,m,q,r){var o=[n];if(a.isNumber(p)&&p<0){return""}if(p!==undefined&&p!==null){o.push("&index=");o.push(p)}o.push("&width=");o.push(m);o.push("&height=");o.push(q);o.push("&ticks=");if(r){o.push(r)}else{o.push(Date.now())}return o.join("")},getUrlByAct:function(n,p,m){var o=[n];if(p!==undefined&&p!==null){o.push("&index=");o.push(p)}if(m){o.push("&act=");o.push(m)}o.push("&ticks=");o.push(Date.now());return o.join("")},output:function(n,m){if(Dynamsoft.WebTwainEnv.Debug){a.log(m)}},print:function(w){var m,C=850,t=1120,B=0;var r=0,n=0,A="";if(a.product.bHTML5Edition){if(g.bIE){t=1160}if(g.bFirefox){t=1150}}for(B=0;B<w.length;B++){var q=t;var v=w[B];var y=v.Width;var o=v.Height;var s=v.Url;if(y<=0){y=C}if(o<=0){o=q}var x=C/y,u=q/o;if(x<u){q=parseInt(o*x)}else{if(x>u){C=parseInt(y*u)}}r+=y;n+=o;A=A+'<div style="width:850px;height:'+t+'px"><img id="D_img'+B+'" src="'+s+'" style="position:relative;left:0px;top:0px;width: '+C+"px;height: "+q+'px" /></div>'}var E,z=["alwaysRaised=yes,z-look=yes,top=0,left=0,toolbar=no,menubar=no,location=no,status=no,width=",r,",height=",n].join(""),D=window.open("about:blank","_blank",z);m='<html><body id="D_img">'+A+"</body></html>";if(D){D.document.write(m);D.document.close();D.focus();E=D.document.getElementById("D_img");if(E){E.onload=function(){D.print();a.log("print image...ok")}}else{a.log("cannot find image")}}}};var k=a.DOM,i=Dynamsoft.WebTwainEnv,j={getServerImageUrlPrefix:function(p){var n=p.httpUrl,m=false,o=[n,"dwt/",a.product.getDWTPrefix(),a.product.getServerVersionInfo(),"/img?id=",p.clientId];return o.join("")},output:function(m){if(Dynamsoft.WebTwainEnv.Debug){a.log(m)}}};function d(n,o){var p=this,m=-1;p._stwain=n;p.__BackgroundFillColor=16777215;p.bImageJustChangedInEditor=false;p.bImageChangedInViewer=false;p._Init(n,o)}var e=d.prototype;e._Init=function(m,n){var o=this;if(!m._ifBindViewer){n.mapModelImageControl={}}else{n.mapModelImageControl=o.getView().mapModelImageControl}n.onTopImageInTheViewChanged=function(p){if(Dynamsoft.Lib.isFunction(m.__OnTopImageInTheViewChanged)){m.__OnTopImageInTheViewChanged(p.index,p.bByScrollBar)}};n.onGetImageInfo=function(r){var p=-1,q=-1;p=o.GetImageWidth(r);return{width:p,height:q}};if(!o._UIView){o._UIView=new a.UI.ImageUIView(o,n)}else{o._UIView._Init(n)}};e.getUidByIndex=function(m){var n=this;return n.getWebViewer().GetUidByIndex(m)};e.getIndexByUid=function(m){var n=this;return n.getWebViewer().GetIndexByUid(m)};e.getCurrentImageIndex=function(){var m=this;return m.getWebViewer().GetCurrentIndex()};e.convertServerIdToClientIndex=function(n){var q=this,m=-1,p,o;o=q._UIView.GetDataImageControl(n);if(o){p=o.uuid}if(p){m=q.getWebViewer().GetIndexByUid(p)}return m};e.convertClientIndexToServerId=function(m){var o=this;var n=o.getWebViewer().GetCustomDataByIndex(m);if(n){return n.imageId}else{return -1}};e.getWebViewer=function(){var m=this;return m.getView()._webViewer};e.getTwain=function(){var m=this;return m._stwain};e.getView=function(){var m=this;return m._UIView};e.OnReady=function(){var n=this,m=n.getView();m.BaseUrl=j.getServerImageUrlPrefix(n._stwain);return true};e.count=function(){var n=this,m=n.getView();return m.GetWebViewer().GetHowManyImagesInBuffer()};e.clear=function(){var n=this,m=n.getView();m.RemoveAllImages();return true};e.unshift=function(p,o,m){var r=this,n=r.getView(),q;q=0;return r._updateUIAfterAdd(q,o,m)};e.append=function(n,p,r){var q=this,v=q.getView(),u,m,t,s;m=v.GetWebViewer().GetHowManyImagesInBuffer();t=v.GetWebViewer().GetCurrentIndex();for(var o=m-1;o>=n;o--){s=q.convertClientIndexToServerId(o);v.RemoveImage(o,s)}if(m<n){u=m;return q._updateUIAfterAdd(u,p,r,true)}else{if(t>=m-1){u=0}else{u=t+1}s=q.convertClientIndexToServerId(u);v.RemoveImage(u,s);if(u==n-1){return q._updateUIAfterAdd(u,p,r,true)}else{return q._updateUIAfterAdd(u,p,r,false)}}};e.exists=function(n){var o=this,m=o.getView();return m.exists(n)};e.insertBefore=function(p,r,o,m){var t=this,n=t.getView(),s=1*p,q;if(s<0||s>r){s=-1}q=n.GetWebViewer().GetHowManyImagesInBuffer();if(s>=q){s=q}return t._updateUIAfterAdd(s,o,m,false)};e.insert=function(p,r,o,m){var t=this,n=t.getView(),s=1*p,q;if(s<0||s>r){s=-1}q=n.GetWebViewer().GetHowManyImagesInBuffer();if(s>=q){s=q}return t._updateUIAfterAdd(s,o,m,false)};e._updateUIAfterAdd=function(r,p,m,q){var s=this,o=s.getView();if(p<0){return false}var n=o.AddImage(r,p,m,q);return n};e.removeByServerId=function(n){var p=this,m=p.getView(),o;return p.remove(n)};e.remove=function(n){var p=this,m=p.getView();var o=p.convertServerIdToClientIndex(n);return m.RemoveImage(o,n)};e.MoveImage=function(o,n){var p=this,m=p.getView();return m.MoveImage(o,n)};e.SwitchImage=function(o,n){var p=this,m=p.getView();return m.SwitchImage(o,n)};e.GetImageHeight=function(n){var q=this,r=n*1,s,u,t,o,p;u=q.getView();s=q.count();if(r<0||r>s){return 0}if(q._stwain._isMobileMode()){var m=u._webViewer.GetMetaDataByIndex(r);if(!m||!m.height){return 0}return m.height}p=q.convertClientIndexToServerId(r);t=u.GetDataImageControl(p);if(t&&t.imageHeight){o=t.imageHeight}else{o=q._stwain.GetImageHeight(r)}return o};e.GetImageWidth=function(o){var q=this,r=o*1,s,u,t,n,p;u=q.getView();s=q.count();if(r<0||r>s){return 0}if(q._stwain._isMobileMode()){var m=u._webViewer.GetMetaDataByIndex(r);if(!m||!m.width){return 0}return m.width}p=q.convertClientIndexToServerId(r);t=u.GetDataImageControl(p);if(t&&t.imageWidth){n=t.imageWidth}else{n=q._stwain.GetImageWidth(r)}return n};e.get=function(p){var r=this,q=parseInt(p),m,n,o;n=r.getView();m=r.count();if(q<0||q>m){return false}o=r.convertClientIndexToServerId(q);return n.GetDataImageControl(o)};e.refresh=function(n,o,m,q){var p=this,s=n*1,r;if(m){var t,v,u;v=p.getView();t=p.count();if(s<0||s>t){return false}r=p.convertClientIndexToServerId(s);v.SetDataImageControl(s,r,q)}return true};e.Go=function(o){var p=this,n=p.getView();var m=n.Go(o);return m};e.__Next=function(){var n=this,m=n.getView();return m.__Next()};e.__Previous=function(){var n=this,m=n.getView();return m.__Previous()};e.SetSelectedClientIndexArray=function(n){var o=this,m=o.getView();return m.SetSelectedindexes(n)};e.getSelectedClientIndexArray=function(){var n=this,m=n.getView();return m.GetSelectedindexes()};e.GetZoom=function(){var n=this,m=n.getView();return m.GetZoom()};e.SetZoom=function(n){var o=this,m=o.getView();return m.SetZoom(n)};e.__GetPrintUrl=function(q,p,o){var r=this,m,n=r.getView();m=n.GetDataImageControl(p);if(!m.width||m.width<=0){m.width=r.GetImageWidth(o)}if(!m.height||m.height<=0){m.height=r.GetImageHeight(o)}return new a.UI.PrintUrl(q,m.width,m.height)};e.__GetPrintUrlforMobile=function(r,t,s){var q=this,o,n,u=q.getView();if(r==t){b.print(s);return true}var p=q.convertClientIndexToServerId(r);if(p!=-1){var m=q.getWebViewer().GetUidByIndex(r);q.getWebViewer().GetImageData(m).then(function(v){if(v.oriData instanceof ArrayBuffer){o=URL.createObjectURL(new Blob([v.oriData]))}else{if(v.oriData instanceof Blob){o=URL.createObjectURL(v.oriData)}else{o=v.oriData}}n=q.__GetPrintUrl(o,p,r);s.push(n);q.__GetPrintUrlforMobile(r+1,t,s)})}};e.Print=function(){var s=this,m=s.getView();if(s.count()<=0){return}var p,o,n,q,r=[];if(s._stwain._isMobileMode()){s.__GetPrintUrlforMobile(0,s.count(),r)}else{for(p=0;p<s.count();p++){n=s.convertClientIndexToServerId(p);if(n!=-1){o=b.getImageUrl(m.BaseUrl,n,-1,-1);q=s.__GetPrintUrl(o,n,p);r.push(q)}}b.print(r)}return true};e._isNoViewer=function(){var m=this;return !m._stwain._bBindViewer};e.ChangeSize=function(n,o){var p=this,m=p.getView();return m.ChangeImageViewSize(n,o)};e.GetWidth=function(){var n=this,m=n.getView();return m.GetWidth()};e.SetWidth=function(o,q){var r=this,m,p,n;if(r._isNoViewer()){return true}n=r.getView();return n.SetWidth(o)};e.GetHeight=function(){var n=this,m=n.getView();return m.GetHeight()};e.SetHeight=function(o,q){var r=this,m,p,n;if(r._isNoViewer()){return true}n=r.getView();return n.SetHeight(o)};e.SetViewMode=function(o,n){var p=this,m;if(p._isNoViewer()){return p._nouiNotSupport("SetViewMode")}m=p.getView();return m.SetViewMode(o,n)};e.ShowImageEditorEx=function(w,v,r,o,t,E,u,G){var D=this;if(D._isNoViewer()){return D._nouiNotSupport("ShowImageEditorEx")}switch(t){case 0:break;case 1:break;case 2:break;case 3:if(D.getWebViewer().OnCloseImageEditor()){return true}break;case 4:break}var C,H,I=document,p,s,q,z;z=D.getView();if(D.getTwain()._containerElement==u){E=false;j.output("warning: cannot use the same DIV for the main viewer and the editor viewer.")}for(var F=0;F<Dynamsoft.WebTwainEnv.DynamicContainers.length;F++){if(Dynamsoft.WebTwainEnv.DynamicContainers[F].ContainerId==u){E=false;j.output("warning: cannot use an DIV which is already consumed by the method CreateDWTObject.");break}}if(E&&u){if(a.isDOM(u)){s=u}else{if(a.isShadowRoot(u)){s=document.createElement("div");u.appendChild(s)}else{s=I.getElementById(u);if(s&&s.nodeName!="DIV"){j.output("warning: cannot create the editor viewer in a non-DIV element.");E=false}}}}else{}if(E&&u&&a.isDOM(u)){var A=a.getShadowRoot(u);if(A){var n="?t=20200811";var B,m;B=I.createElement("link");B.href=[Dynamsoft.WebTwainEnv.ResourcesPath,"/src/dynamsoft.viewer.css",n].join("");B.rel="stylesheet";B.async=true;m=I.createElement("link");m.href=[Dynamsoft.WebTwainEnv.ResourcesPath,"/src/dynamsoft.webtwain.css",n].join("");m.rel="stylesheet";m.async=true;a.scriptOnload(B,function(){a.scriptOnload(m,function(){return z.GetWebViewer().ShowImageEditor(s,E,r,o)});A.appendChild(m)});A.appendChild(B);return true}}return z.GetWebViewer().ShowImageEditor(s,E,r,o)};e.SetSelectionRectAspectRatio=function(n){var o=this,m;m=o.getView();return m.SetSelectionRectAspectRatio(n)};e.GetSelectionRectAspectRatio=function(){var n=this,m=n.getView();return m.GetSelectionRectAspectRatio()};e.GetSelectionImageBorderColor=function(){var n=this,m=n.getView();return m.GetSelectionImageBorderColor()};e.SetSelectionImageBorderColor=function(n){var p=this,o=n,m=p.getView();return m.SetSelectionImageBorderColor(o)};e.GetBackgroundColor=function(){var n=this,m=n.getView();return m.GetBackgroundColor()};e.SetBackgroundColor=function(o,q){var r=this,m,p,n;if(r._isNoViewer()){return true}n=r.getView();if(q){return n.SetBackgroundColor(o,true)}else{return n.SetBackgroundColor(o)}};e.GetAllowMultiSelect=function(){var n=this,m=n.getView();if(n._isNoViewer()){return false}return m.GetAllowMultiSelect()};e.SetAllowMultiSelect=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetAllowMultiSelect(n)};e.GetFitWindowType=function(){var n=this,m=n.getView();if(n._isNoViewer()){return 0}return m.GetFitWindowType()};e.SetFitWindowType=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetFitWindowType(n)};e.GetIfFitWindow=function(){var n=this,m=n.getView();if(n._isNoViewer()){return true}return m.GetIfFitWindow()};e.SetIfFitWindow=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetIfFitWindow(n)};e.GetImageMargin=function(){var n=this,m=n.getView();if(n._isNoViewer()){return 0}return m.GetImageMargin()};e.SetImageMargin=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetImageMargin(n)};e.GetMouseShape=function(){var n=this,m=n.getView();if(n._isNoViewer()){return 0}return m.GetMouseShape()};e.SetMouseShape=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetMouseShape(n)};e.GetShowPageNumber=function(){var n=this,m=n.getView();if(n._isNoViewer()){return false}return m.GetShowPageNumber()};e.SetShowPageNumber=function(n){var o=this,m=o.getView();if(o._isNoViewer()){return true}return m.SetShowPageNumber(n)};e.GetIfAutoScroll=function(){var n=this,m=n.getView();return m.GetIfAutoScroll()};e.SetIfAutoScroll=function(n){var o=this,m=o.getView();return m.SetIfAutoScroll(n)};e.OverlayRectangle=function(u,n,q,s,m,o,r){var p=this;if(p._isNoViewer()){return true}var t=p.getView();return t.OverlayRectangle(u,n,q,s,m,o,r)};e.SetSelectedImageArea=function(p,r,q,o,n){var s=this,m=s.getView();if(p!=m.GetWebViewer().GetCurrentIndex()){return false}if(s._isNoViewer()){return true}return m.SetSelectedImageArea(r,q,o,n)};e.ShowImagesByFilter=function(n,p,o){var q=this,m=q.getView();return m.FilterImagesByTag(n,p,o)};e.ClearFilter=function(){var n=this,m=n.getView();return m.ClearFilter()};e.GetServerIdListByTag=function(n){var o=this,m=o.getView();return m.GetServerIdListByTag(n)};e.GetAllServerIdList=function(){var o=this,m=o.getView();var n=o.GetCurrentTag();return m.GetServerIdListByTag(n)};e.RemoveImageTag=function(n){var o=this,m=o.getView();return m.RemoveImageTag(n)};e.SetDefaultTag=function(n){var o=this,m=o.getView();return m.SetDefaultTag(n)};e.AddImageTag=function(o,n){var p=this,m=p.getView();return m.AddImageTag(o,n)};e.GetCurrentTag=function(){var n=this,m=n.getView();return m.GetCurrentTag()};e.RenameTag=function(n,p){var o=this,m=o.getView();return m.RenameTag(n,p)};e.BindView=function(n){var p=this,m=p.getView(),o=n;if(a.isString(n)){o=a.get(n)}else{if(a.isDOM(o)){if(!o.id||o.id==""){o.id=["dwt_",a.getRandom()].join("")}}}return m.BindView(o)};e.UnbindView=function(){var n=this,m=n.getView();return m.UnbindView()};e.GetIfShowVideoContainer=function(){var n=this,m=n.getView();return m.GetIfShowVideoContainer()};e.ShowVideoContainer=function(n){var o=this,m=o.getView();return m.ShowVideoContainer(n)};e.UpdateVideoContainer=function(n){var o=this,m=o.getView();return m.UpdateVideoContainer(n)};e.GetImageData=function(o){var p=this,m=p.getView();var n=p.convertServerIdToClientIndex(o);if(n>=0){return m.GetImageData(p.getUidByIndex(n))}return NaN};e.RegistLoadCallback=function(o){var n=this,m=n.getView();return m.RegistLoadCallback(o)};function f(){var m=this;m.bIsDirty=false;m.imageWidth=0;m.imageHeight=0;m.iImageControlWidth=0;m.iImageControlHeight=0;m.imageUrl="";m.minImageUrl="";m.uuid=-1;m.serverId=-1;m.aryOverlayRectangleData=[];m.ticks=Date.now()}f.prototype.Clear=function(){var m=this;m.imageUrl="";m.minImageUrl="";m.serverId=-1;m.aryOverlayRectangleData=[]};function l(n,m,o){var p=this;p.Url=n;p.Width=m;p.Height=o}a.UI=a.UI||{};a.UI.ImageManager=d;a.UI.ModelImageControl=f;a.UI.PrintUrl=l});Dynamsoft.Ready(function(d,b){var a=Dynamsoft;if(!d.product.bHTML5Edition){return}var g=d.html5.STwain,h=d.html5.Funs,e=Dynamsoft.WebTwainEnv;var f={TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14};var c=function(j,l){if(d.isUndef(j)||d.isUndef(l)||null==j||null==l){return}for(var k in l){if(j.hasOwnProperty(k)){if(typeof(j[k])==="object"){c(j[k],l[k])}}else{j[k]=l[k]}}return j};g.prototype.checkStartScanParams=function(i,j){var k=this;if(!i){d.Errors.ScanUploader_InvalidScanSetup(k);return false}if((!d.isUndefined(j.transferMode))&&i.transferMode!=0&&i.transferMode!=1&&i.transferMode!=2){d.Errors.ScanUploader_InvalidTransferMode(k);return false}if(i.transferMode==EnumDWT_TransferMode.TWSX_FILE){if(!i.fileXfer){d.Errors.ScanUploader_InvalidFileXfer(k);return false}if(!d.isString(i.fileXfer.fileName)||i.fileXfer.fileName==""){d.Errors.ScanUploader_InvalidFileXferFilename(k);return false}if(!d.isNumber(i.fileXfer.fileFormat)||i.fileXfer.fileFormat<0||i.fileXfer.fileFormat>16){d.Errors.ScanUploader_InvalidFileXferFileFormat(k);return false}}if(j){if(!d.isString(j.type)||j.type==""){d.Errors.ScanUploader_InvalidHttpType(k);return false}if(!j.httpParams){d.Errors.ScanUploader_InvalidHttpParams(k);return false}if(i.transferMode!=EnumDWT_TransferMode.TWSX_FILE&&d.isUndefined(j.format)){d.Errors.ScanUploader_InvalidOutputFormat(k);return false}if(!d.isString(j.httpParams.url)||j.httpParams.url==""){d.Errors.ScanUploader_InvalidHttpUrl(k);return false}if(!d.isString(j.httpParams.fileName)||j.httpParams.fileName==""){d.Errors.ScanUploader_InvalidHttpFilename(k);return false}}return true};g.prototype.startScan=function(R){var m=this,N=R;m._resetErr();if(!m._isValid()){return false}if(m._isMobileMode()){return m._mobileNotSupportAsync("startScan")}if(m.startScanFlag==true){d.Errors.StartScanFailed(m);return d.Promise.reject({code:m.ErrorCode,message:m.ErrorString})}m.startScanFlag=true;if(!d.isObject(N)){N={}}var J=false,S=false,p=true,A=true,B=true,Y=false,X=N.onFinally,V=[],x=[],l=0,o=1,y=[],U,s,u,q={type:"http",format:EnumDWT_ImageType.IT_PDF,reTries:3,useUploader:false,singlePost:true,showProgressBar:true,removeAfterOutput:true,httpParams:{url:"",headers:{},formFields:{},remoteName:"RemoteFile",fileName:""}},z=d.clone(N),t=N;u=z.funcScanStatus;delete z.funcScanStatus;if(d.isFunction(u)){z.bfuncScanStatus=true}else{z.bfuncScanStatus=false}if(z.outputSetup){var K={pdfSetup:{},tiffSetup:{}};c(z.outputSetup,q);s=z.outputSetup;delete z.outputSetup;if(s.pdfSetup){if(s.format==EnumDWT_ImageType.IT_MULTIPAGE_PDF||s.format==EnumDWT_ImageType.IT_PDF){d.mix(K.pdfSetup,s.pdfSetup)}}if(s.tiffSetup){if(s.format==EnumDWT_ImageType.IT_MULTIPAGE_TIF||s.format==EnumDWT_ImageType.IT_TIF){d.mix(K.tiffSetup,s.tiffSetup)}}if(s.format==EnumDWT_ImageType.IT_MULTIPAGE_PDF||s.format==EnumDWT_ImageType.IT_MULTIPAGE_TIF){s.singlePost=true}if(d.isNumber(s.httpParams.threads)){o=s.httpParams.threads}J=d.stringify(K);S=m.checkStartScanParams(z,s)}else{s=q;s.type="";S=m.checkStartScanParams(z,false)}if(!S){return new d.Promise(function(ac,ab){if(p){var aa={code:m.ErrorCode,message:m.ErrorString,response:""};ab(aa);p=false;m.startScanFlag=false}})}if(s.funcHttpUploadStatus){Y=s.funcHttpUploadStatus}var O=m.HttpFieldNameOfUploadedImage,k=m.MaxUploadImageSize,C=m.IfShowProgressBar,j=m.__IfShowCancelDialogWhenImageTransfer,v=m.__OnPostTransferAsync,D=m.__OnPostAllTransfers,E=m.__OnHttpUploadStatus,Z=m.__insertingIndex,P=m.__IfAppendImage,F=m.httpFormFields,I=m._tiffCompressionType,w=false,G=s.showProgressBar,r=function(ab){var aa=true;d.each(y,function(ad,ac){if(ad.st==-1){aa=false}});if(!aa){setTimeout(function(){r(ab)},200);return}W(ab)},W=function(aa){aa.__OnPostTransferAsync=v;aa.__OnPostAllTransfers=D;aa.__OnHttpUploadStatus=E;aa.HttpFieldNameOfUploadedImage=O;aa.__maxUploadImageSize=k;aa.IfShowProgressBar=C;aa.__IfShowCancelDialogWhenImageTransfer=j;aa.__insertingIndex=Z;aa.__IfAppendImage=P;aa.httpFormFields=F;aa._tiffCompressionType=I;aa.__OnCancel=false;if(Dynamsoft.FileUploader){Dynamsoft.FileUploader.nextLoopTime=600}aa.startScanFlag=false},M=function(ac,ab,aa){if(!A){setTimeout(function(){M(ac,ab,aa)},200);return}ab(aa);r(ac)},T=function(ab,aa){w=true;if(p){p=false;if(!A){m._innerSendCmd("CancelAllPendingTransfers")}M(m,ab,aa)}},i=function(af,ag,ad,ae){if(d.isFunction(Y)){var ab=ag,ac=0,aa;if(d.isNumber(ae)&&ae>0){ac=ae}aa={fileName:ab,percentage:ad,statusCode:ac,responseString:af.__HTTPPostResponseString};setTimeout(function(){Y(aa)},10)}};m.__OnCancel=false;m.__HTTPPostResponseString="";m.IfShowProgressBar=G;m.__IfShowCancelDialogWhenImageTransfer=G;if(d.isNumber(z.insertingIndex)&&z.insertingIndex>-1){m.__insertingIndex=z.insertingIndex;m.__IfAppendImage=false}if(d.isFunction(Y)){m.__OnHttpUploadStatus=Y}else{m.__OnHttpUploadStatus=false}if(s.useUploader){if(!Dynamsoft.FileUploader){var L=new d.Promise(function(ac,ab){d.Errors.Uploader_ModuleError(m);var aa={code:m.ErrorCode,message:m.ErrorString,response:""};A=true;T(ab,aa)});return L}}U=s.reTries;if(s.useUploader){var H=s.httpParams.url;if(!d.startsWith(H,"http://")&&!d.startsWith(H,"https://")){var Q=window.location.href,n=Q.lastIndexOf("/");Q=Q.substring(0,n+1);s.httpParams.url=Q+H}}else{d.each(s.httpParams.headers,function(aa,ab){m.SetHTTPHeader(ab,aa)});d.each(s.httpParams.formFields,function(aa,ab){m.SetHTTPFormField(ab,aa)})}if(s.httpParams.remoteName!==""){m.HttpFieldNameOfUploadedImage=s.httpParams.remoteName}var L=new d.Promise(function(ab,aa){if(s.useUploader){Dynamsoft.FileUploader.Init(0,function(ac){ab({uploadManager:ac})},function(ad,ac){m._errorCode=ad;m._errorString=ac;var ae={code:ad,message:ac,response:m.__HTTPPostResponseString};A=true;T(aa,ae)})}else{ab({})}});return L.then(function(aa){return new d.Promise(function(ad,ac){var ae=function(){var af=false;if(z.transferMode==EnumDWT_TransferMode.TWSX_FILE){af=(l==x.length)}else{af=(l==V.length)}if(af){d.closeProgress("Scan Upload");w=true;ad(t);W(m)}else{setTimeout(ae,100)}};if(u&&d.isFunction(u)){m.__OnPreAllTransfersAsync=function(af){u(af)}}m.RegisterEvent("OnPostTransferAsync",function(aA){var an,at=s.httpParams.url,ap=m.objImageIndexManager.convertGuidToServerId(aA.imageId),ar=s.singlePost,av=z.transferMode==EnumDWT_TransferMode.TWSX_FILE,ag=s.removeAfterOutput,af=0,al,aw;if(B){A=false;B=false}if(av){af=x.length;x.push(aA.path)}else{af=V.length;V.push(ap)}if(u&&d.isFunction(u)){var au={event:"postTransfer",bScanCompleted:false,result:{currentPageNum:af+1}};setTimeout(function(){u(au)},10)}if(w){return false}if(s.type=="http"){al=h.cformat(s.httpParams.fileName,af+1);aw=h.cformat(s.httpParams.remoteName,af+1);if(!ar&&s.type=="http"){var am,ax;if(d.isNumber(s.httpParams.maxSizeLimit)){m.__maxUploadImageSize=s.httpParams.maxSizeLimit}if(s.useUploader){if(G){Dynamsoft.FileUploader.nextLoopTime=300;d.showProgress(m,"Scan Upload",true)}am=function(aC,aB){m.__HTTPPostResponseString=aB;i(m,aC._fileName,100,200);m._OnPercentDone([0,100,"","http",aC._fileName]);if(G){d.closeProgress("Scan Upload")}if(!av&&s.removeAfterOutput){setTimeout(function(){var aD=m._ImgManager.convertServerIdToClientIndex(ap);if(aD>-1){m._removeImageById(ap,function(){l++},function(){l++})}else{l++}},100)}else{l++}return true};var ao,ak,ah=aa.uploadManager;ao=function(){if(G){var aD=0,aB;if(av){aD=x.length}else{aD=V.length}for(aB=0;aB<aD;aB++){d.closeProgress("Scan Upload")}}if(!av&&s.removeAfterOutput){setTimeout(function(){var aE=m._ImgManager.convertServerIdToClientIndex(ap);if(aE>-1){m._removeImageById(ap)}},100)}ah.CancelAllUpload();var aC={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,aC);return false};ax=function(aF,aB,aE,aC){var aD=303;if(aB==f.TRANS_SERVICE_ERROR_404){aD=404}else{if(aB==f.TRANS_SERVICE_ERROR_500){aD=500}else{if(aB==f.TRANS_SERVICE_ERROR_503){aD=503}}}m._errorCode=aB;m._errorString=aE;m.__HTTPPostResponseString=aC;i(m,al,100,aD);ao()};m.__OnCancel=function(){ax(null,-1032,"User cancelled the operation.","")};ak=function(){m.__HTTPPostResponseString="";i(m,al,100,303);ao()};if(av){var aq=ah.CreateJob(),ai=aq.FormField;d.each(s.httpParams.headers,function(aB,aC){aq.HttpHeader[aC]=aB});d.each(s.httpParams.formFields,function(aB,aC){ai.Add(aC,aB)});aq.ServerUrl=at;aq.bDeleteFile=ag;aq.reTries=U;if(d.isNumber(s.httpParams.maxSizeLimit)){aq.maxSizeLimit=s.httpParams.maxSizeLimit}aq._fileName=al;aq.SourceValue.Add(aA.path,al,aw);aq.ImageType=z.fileXfer.fileFormat;aq.ThreadNum=o;aq.OnRunSuccess=am;aq.OnRunFailure=ax;if(G||d.isFunction(Y)){aq.OnUploadTransferPercentage=function(aB,aC){if(aC>0&&aC<=100){if(aC==100){aC=99}if(G){m._OnPercentDone([0,aC,"","http",aB._fileName])}if(d.isFunction(Y)){i(m,aB._fileName,aC,0)}}};d.cancelFrome=5;if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",al])}i(m,al,0,0)}ah.Run(aq)}else{an=s.format;if(an==EnumDWT_ImageType.IT_MULTIPAGE_PDF){an=EnumDWT_ImageType.IT_PDF}else{if(an==EnumDWT_ImageType.IT_MULTIPAGE_TIF){an=EnumDWT_ImageType.IT_TIF}}if(G){d.cancelFrome=5;m._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http",al])}m._asyncGenerateURLForUploadData([ap],an,J,function(aD){var aC=ah.CreateJob(),aB=aC.FormField;d.each(s.httpParams.headers,function(aE,aF){aC.HttpHeader[aF]=aE});d.each(s.httpParams.formFields,function(aE,aF){aB.Add(aF,aE)});aC.ServerUrl=at;aC.bDeleteFile=ag;aC.reTries=U;if(d.isNumber(s.httpParams.maxSizeLimit)){aC.maxSizeLimit=s.httpParams.maxSizeLimit}aC._fileName=al;aC.SourceValue.Add(aD,al,aw);aC.ImageType=an;aC.ThreadNum=o;aC.OnRunSuccess=am;aC.OnRunFailure=ax;if(G||d.isFunction(Y)){aC.OnUploadTransferPercentage=function(aE,aF){if(aF>0&&aF<=100){if(aF==100){aF=99}if(G){m._OnPercentDone([0,aF,"","http",aE._fileName])}if(d.isFunction(Y)){i(m,aE._fileName,aF,0)}}};d.cancelFrome=5;if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",al])}i(m,al,0,0)}ah.Run(aC)},ak)}}else{var aj={id:ap,st:-1,bCancel:false};y.push(aj);if(af==0){d.showProgress(m,"Scan Upload",true)}if(av){am=function(aB){aj.st=0;if(!av&&s.removeAfterOutput){setTimeout(function(){var aC=m._ImgManager.convertServerIdToClientIndex(ap);if(aC>-1){m._removeImageById(ap,function(){l++},function(){l++})}else{l++}},100)}else{l++}return true};ax=function(){if(!av&&s.removeAfterOutput){setTimeout(function(){var aC=m._ImgManager.convertServerIdToClientIndex(ap);if(aC>-1){m._removeImageById(ap)}},100)}var aB={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};d.closeProgress("Scan Upload");if(aj.st==2){return false}aj.st=1;d.each(y,function(aD,aC){if(aD.st==-1){aD.bCancel=true}});T(ac,aB);return false};m._innerUploadDirectly(at,aA.path,al,G,ag,U,false,aj,am,ax)}else{am=function(aC,aB){aj.st=0;if(!av&&s.removeAfterOutput){setTimeout(function(){var aD=m._ImgManager.convertServerIdToClientIndex(ap);if(aD>-1){m._removeImageById(ap,function(){l++},function(){l++})}else{l++}},100)}else{l++}return true};ax=function(aC){if(!av&&s.removeAfterOutput){setTimeout(function(){var aD=m._ImgManager.convertServerIdToClientIndex(ap);if(aD>-1){m._removeImageById(ap)}},100)}var aB={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};d.closeProgress("Scan Upload");if(aj.st==2){return false}aj.st=1;d.each(y,function(aE,aD){if(aE.st==-1){aE.bCancel=true}});T(ac,aB);return false};an=s.format;if(d.isUndefined(an)){var ay=m._ImgManager.convertServerIdToClientIndex(ap);d.Errors.InvalidImageType(m);ax([ay]);return false}if(an==EnumDWT_ImageType.IT_MULTIPAGE_PDF){an=EnumDWT_ImageType.IT_PDF}else{if(an==EnumDWT_ImageType.IT_MULTIPAGE_TIF){an=EnumDWT_ImageType.IT_TIF}}var az={bOnlyUploadForm:false,method:"startScan",_this:m,url:at,serverIds:[ap],enumImageType:an,saveSetup:J,fileName:al,dataFormat:EnumDWT_UploadDataFormat.Binary,retry:U,bOnlyEmptyIsOK:false,objUploadFileStatus:aj,asyncSuccessFunc:am,asyncFailureFunc:ax};d._asyncUploadCmd(az)}}}else{if(!ar&&s.type=="ftp"){}}}});m.__OnPostAllTransfers=function(){var aq,aF=EnumDWT_UploadDataFormat.Binary,au=s.httpParams.url,at=s.singlePost,ax=z.transferMode==EnumDWT_TransferMode.TWSX_FILE,ah=s.removeAfterOutput;if(u&&d.isFunction(u)){var ag,aw;if(ax){ag=x.length}else{ag=V.length}aw={event:"postTransfer",bScanCompleted:true,result:{currentPageNum:ag}};setTimeout(function(){u(aw)},10)}if(ag==0){d.Errors.SourceHasNothingToCapture(m);setTimeout(function(){A=true;if(X&&d.isFunction(X)){X()}var aG={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,aG)},1000);return}if(ag>0&&m.ErrorCode==-1029){m._errorCode=0}else{if(m.ErrorCode!=0){A=true;if(X&&d.isFunction(X)){X()}var av={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,av);return}}if(s.type=="http"){if(at&&s.type=="http"){var ao,aC,az,af=V,an=[];if(d.isNumber(s.httpParams.maxSizeLimit)){m.__maxUploadImageSize=s.httpParams.maxSizeLimit}if(s.useUploader){var ai=aa.uploadManager,ar=ai.CreateJob(),aj=ar.FormField;if(G){Dynamsoft.FileUploader.nextLoopTime=300;d.showProgress(m,"Scan Upload",true)}ao=function(aI,aG){var aH=aI._fileName;if(!aH){aH=""}m._bServerPercentDone=true;m.__HTTPPostResponseString=aG;i(m,aH,100,200);m._OnPercentDone([0,100,"","http"]);if(G){d.closeProgress("Scan Upload")}if(!ax&&s.removeAfterOutput){setTimeout(function(){l=0;d.each(af,function(aJ){var aK=m._ImgManager.convertServerIdToClientIndex(aJ);if(aK>-1){m._removeImageById(aJ,function(){l++},function(){l++})}else{l++}});setTimeout(ae,100)},100)}else{w=true;ad(t);W(m)}return true};var ap,am;ap=function(){m._OnPercentDone([0,100,"","http"]);if(G){d.closeProgress("Scan Upload")}m._bServerPercentDone=true;var aG={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,aG);if(!ax&&s.removeAfterOutput){setTimeout(function(){d.each(af,function(aH){var aI=m._ImgManager.convertServerIdToClientIndex(aH);if(aI>-1){m._removeImageById(aH)}})},100)}return false};aC=function(aK,aG,aJ,aH){var aI=303;if(aG==f.TRANS_SERVICE_ERROR_404){aI=404}else{if(aG==f.TRANS_SERVICE_ERROR_500){aI=500}else{if(aG==f.TRANS_SERVICE_ERROR_503){aI=503}}}m._errorCode=aG;m._errorString=aJ;m.__HTTPPostResponseString=aH;i(m,"",100,aI);ap()};m.__OnCancel=function(){aC(null,-1032,"User cancelled the operation.","")};am=function(){m.__HTTPPostResponseString="";i(m,"",100,303);ap()};if(ax){d.each(s.httpParams.headers,function(aG,aH){ar.HttpHeader[aH]=aG});d.each(s.httpParams.formFields,function(aG,aH){aj.Add(aH,aG)});ar.ServerUrl=au;ar.bDeleteFile=ah;ar.reTries=U;if(d.isNumber(s.httpParams.maxSizeLimit)){ar.maxSizeLimit=s.httpParams.maxSizeLimit}d.each(x,function(aJ,aH){var aG=h.cformat(s.httpParams.fileName,aH+1),aI=h.cformat(s.httpParams.remoteName,aH+1);ar.SourceValue.Add(aJ,aG,aI)});ar.ImageType=z.fileXfer.fileFormat;ar.ThreadNum=o;ar.OnRunSuccess=ao;ar.OnRunFailure=aC;if(G||d.isFunction(Y)){ar.OnUploadTransferPercentage=function(aG,aH){if(aH>0&&aH<=100){if(aH==100){aH=99}if(G){m._OnPercentDone([0,aH,"","http"])}if(d.isFunction(Y)){if(aH>99){aH=99}i(m,"",aH,0)}}};if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"])}i(m,"",0,0)}ai.Run(ar)}else{aq=s.format;if(aq==EnumDWT_ImageType.IT_MULTIPAGE_PDF||aq==EnumDWT_ImageType.IT_MULTIPAGE_TIF){if(aq==EnumDWT_ImageType.IT_MULTIPAGE_PDF){aq=EnumDWT_ImageType.IT_PDF}else{if(aq==EnumDWT_ImageType.IT_MULTIPAGE_TIF){aq=EnumDWT_ImageType.IT_TIF}}if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"])}m._asyncGenerateURLForUploadData(af,aq,J,function(aI){d.each(s.httpParams.headers,function(aJ,aK){ar.HttpHeader[aK]=aJ});d.each(s.httpParams.formFields,function(aJ,aK){aj.Add(aK,aJ)});ar.ServerUrl=au;ar.bDeleteFile=ah;ar.reTries=U;if(d.isNumber(s.httpParams.maxSizeLimit)){ar.maxSizeLimit=s.httpParams.maxSizeLimit}var aG=h.cformat(s.httpParams.fileName,1),aH=h.cformat(s.httpParams.remoteName,1);ar._fileName=aG;ar.SourceValue.Add(aI,aG,aH);ar.ImageType=aq;ar.ThreadNum=o;ar.OnRunSuccess=ao;ar.OnRunFailure=aC;if(G||d.isFunction(Y)){ar.OnUploadTransferPercentage=function(aJ,aK){if(aK>0&&aK<=100){if(aK==100){aK=99}if(G){m._OnPercentDone([0,aK,"","http",aG])}if(d.isFunction(Y)){i(m,aG,aK,0)}}};d.cancelFrome=5;if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http",aG])}}ai.Run(ar)},am)}else{var aB=af.length,aA=0,al=0,aE="";if(G){m._bServerPercentDone=false;m._OnPercentDone([0,-1,Dynamsoft.MSG.Encoding,"http"])}d.each(af,function(aJ,aH){var aG=h.cformat(s.httpParams.fileName,aH+1),aI=h.cformat(s.httpParams.remoteName,aH+1);m._asyncGenerateURLForUploadData([aJ],aq,J,function(aK){al=((aA+1)/aB)*100;aE=[(aA+1),"/",aB].join("");m._OnPercentDone([0,al,aE,"http"]);ar.SourceValue.Add(aK,aG,aI);aA++;if(aA>=aB){if(G){m._bServerPercentDone=true}d.each(s.httpParams.headers,function(aL,aM){ar.HttpHeader[aM]=aL});d.each(s.httpParams.formFields,function(aL,aM){aj.Add(aM,aL)});ar.ServerUrl=au;ar.bDeleteFile=ah;ar.reTries=U;if(d.isNumber(s.httpParams.maxSizeLimit)){ar.maxSizeLimit=s.httpParams.maxSizeLimit}ar.ImageType=aq;ar.ThreadNum=o;ar.OnRunSuccess=ao;ar.OnRunFailure=aC;if(G||d.isFunction(Y)){ar.OnUploadTransferPercentage=function(aL,aM){if(aM>0&&aM<=100){if(aM==100){aM=99}if(G){m._OnPercentDone([0,aM,"","http"])}if(d.isFunction(Y)){if(aM>99){aM=99}i(m,"",aM,0)}}};if(G){m._OnPercentDone([0,-1,Dynamsoft.MSG.Uploading,"http"])}}ai.Run(ar)}},am)})}}}else{if(ax){ao=function(aG){m._bServerPercentDone=true;if(!ax&&s.removeAfterOutput){setTimeout(function(){l=0;d.each(af,function(aH){var aI=m._ImgManager.convertServerIdToClientIndex(aH);if(aI>-1){m._removeImageById(aH,function(){l++},function(){l++})}else{l++}});setTimeout(ae,100)},100)}else{w=true;ad(t);W(m)}return true};aC=function(aH){m._bServerPercentDone=true;var aG={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,aG);if(!ax&&s.removeAfterOutput){setTimeout(function(){d.each(af,function(aI){var aJ=m._ImgManager.convertServerIdToClientIndex(aI);if(aJ>-1){m._removeImageById(aI)}})},100)}return false};m._innerUploadFilesDirectly(au,x,s.httpParams.fileName,G,ah,U,false,ao,aC)}else{ao=function(aH,aG){m._bServerPercentDone=true;if(!ax&&s.removeAfterOutput){setTimeout(function(){l=0;d.each(af,function(aI){var aJ=m._ImgManager.convertServerIdToClientIndex(aI);if(aJ>-1){m._removeImageById(aI,function(){l++},function(){l++})}else{l++}});setTimeout(ae,100)},100)}else{w=true;ad(t);W(m)}return true};aC=function(aH){m._bServerPercentDone=true;var aG={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,aG);if(!ax&&s.removeAfterOutput){setTimeout(function(){d.each(af,function(aI){var aJ=m._ImgManager.convertServerIdToClientIndex(aI);if(aJ>-1){m._removeImageById(aI)}})},100)}return false};aq=s.format;if(aq==EnumDWT_ImageType.IT_MULTIPAGE_PDF||aq==EnumDWT_ImageType.IT_MULTIPAGE_TIF){if(aq==EnumDWT_ImageType.IT_MULTIPAGE_PDF){aq=EnumDWT_ImageType.IT_PDF}else{if(aq==EnumDWT_ImageType.IT_MULTIPAGE_TIF){aq=EnumDWT_ImageType.IT_TIF}}var ak=h.cformat(s.httpParams.fileName,1),ay=h.cformat(s.httpParams.remoteName,1);var aD={bOnlyUploadForm:false,method:"startScan",_this:m,url:au,serverIds:af,enumImageType:aq,saveSetup:J,fileName:ak,dataFormat:aF,retry:U,bOnlyEmptyIsOK:false,objUploadFileStatus:false,asyncSuccessFunc:ao,asyncFailureFunc:aC};d._asyncUploadCmd(aD)}else{m._asyncUploadFilesCmd(au,af,aq,s.httpParams.fileName,J,G,U,false,ao,aC)}}}}if(at&&s.type=="ftp"){}else{}}A=true;if(X&&d.isFunction(X)){X()}};var ab=function(){if(s.type!="http"){w=true;ad(t);W(m)}else{if(!s.singlePost){setTimeout(ae,100)}}};m._startScan(z,ab,function(ai){if(m.ErrorCode==-1029){var af=z.transferMode==EnumDWT_TransferMode.TWSX_FILE,ah=false;if(af){ah=x.length>0}else{ah=V.length>0}if(ah){m._errorCode=0;return ab()}}var ag={code:m.ErrorCode,message:m.ErrorString,response:m.__HTTPPostResponseString};T(ac,ag)})})})}});Dynamsoft.Ready(function(d,b){var a=Dynamsoft;if(!d.product.bHTML5Edition){return}var e=a.WebTwainEnv,h=d,c=a.navInfo,f=h.each;d.env.WSVersion="12.0.0";d.env.WSSession=new Date().getTime();d.getHttpUrl=function(i){if(i.ssl){return["https://",i.host,":",i.port,"/"].join("")}else{return["http://",i.host,":",i.port,"/"].join("")}};d.getWSUrl=function(k,j,i){if(i){return["wss://",k,":",j].join("")}else{return["ws://",k,":",j].join("")}};d.getWS_bywsurl=function(o){var q=this,n,j=d.product.wsProtocol,k=window.MozWebSocket;if(q.detect.OnCreatWS){q.detect.OnCreatWS(o,j)}if(typeof k!="undefined"){if(j){n=new k(o,j)}else{n=new k(o)}}else{var i=WebSocket;if(c.bEdge){var m=window,l=parent;while(m!=l&&l.WebSocket){i=l.WebSocket;m=l.window;l=l.parent}}if(j){n=new i(o,j)}else{n=new i(o)}}return n};d.getWS=function(k,j,i){var l=d.getWSUrl(k,j,i);return d.getWS_bywsurl(l)};d._init=function(r){var q=Dynamsoft.Lib,n=Dynamsoft.dcp,l=q.LS.item("DWT_port"),j=q.LS.item("DWT_ssl"),i;if(n.bEnhancedMode){return true}q.detect.urls.splice(0);q.detect.cUrlIndex=0;if(!r.bLocalService){return true}if(l!==b&&j!==b){i={port:l,ssl:(j=="true")}}var m=function(s){if(!i){return true}if(s){if(s.port!=i.port||s.ssl!=i.ssl){return true}}return false};var k,p;if(q.detect.detectType===1){if(i!==b&&i.ssl){q.detect.urls.push(i)}f(q.detect.ports,function(s){if(s.ssl){if(m(s)){q.detect.urls.push(s)}}})}else{if(q.detect.detectType===0){if(i!==b&&!i.ssl){q.detect.urls.push(i)}f(q.detect.ports,function(s){if(s.ssl===false){if(m(s)){q.detect.urls.push(s)}}})}else{if(i!==b){q.detect.urls.push(i)}f(q.detect.ports,function(s){if(m(s)){q.detect.urls.push(s)}})}}k=b};d._reconnect=function(){var i=e.ContainerMap;if(i){d.each(i,function(l,j){d._reconnectDWT(l)})}};d._reconnectDWT=function(n){var m,k,j;if(!n||n.__bConnecting||n.bReady){return}n.__bConnecting=true;m=n._host;j=n._ssl;k=n._port;try{var i=d.getWS(m,k,j);i.onopen=function(){if(i.readyState==1){n._objWS=i;if(!n.bReady){n._OnReady(true)}n.__bConnecting=false;d.detect.hideMask();d.detect.bOK=true}else{if(i.readyState==0){setTimeout(i.onopen,100)}else{n.__bConnecting=false}}};i.onclose=i.onerror=function(){i.onopen=null;n.__bConnecting=false;if(!n.bReady){n.__wsRetry++;if(n.__wsRetry<5){setTimeout(d._reconnect,500)}else{d.closeProgress("Reconnect");d.Errors.Server_Restarted(n)}}else{d.closeProgress("Reconnect");d.detect.hideMask()}}}catch(l){d.log(l);n.__bConnecting=false;if(!n.bReady){n.__wsRetry++;if(n.__wsRetry<5){setTimeout(d._reconnect,500)}}else{d.detect.hideMask()}}};d._checkAndReconnect=function(j,i){Dynamsoft.WebTwainEnv.CheckConnectToTheService(j,i,function(){setTimeout(d._reconnect,500)},function(){setTimeout(function(){d._checkAndReconnect(j,i)},500)})};d.connectToWS=function(k){if(k.bReady){return}if(k.__bConnecting){return}k.__bConnecting=true;try{var i=d.getWS(d.product.host,k._port,k._ssl);d.log(["connecting ... [port:",k._port,"]"].join(""));i.onopen=function(){k.__bConnecting=false;if(i.readyState==1){k._objWS=i;if(!k.bReady){k._OnReady(true)}}else{if(i.readyState==0){setTimeout(i.onopen,100)}else{}}};i.onclose=i.onerror=function(){i.onopen=null;k.__bConnecting=false;if(k.bReady){d.detect.hideMask()}}}catch(j){d.log(j);k.__bConnecting=false;if(k.bReady){d.detect.hideMask()}}};d.startWS=function(){var l=d.detect,n,k=true;if(!d.product.bHTML5Edition){d.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!");return}if(e.UseLocalService===false||(d.isUndefined(e.UseLocalService)&&d.env.bMobile)){k=false}if(k&&l.tryTimes>5){d.log("Failed more than 5 times.");return}if(l.OnDetectNext){l.OnDetectNext()}if(l.tryTimes==0&&l.cUrlIndex>0&&l.arySTwains.length>0){if(!l.bNoControlEvent){l.hideMask();if(d.isFunction(l.onNoControl)){var m,i,j;m=l.arySTwains[0];i=m._width;j=m._height;if(i<=0){i=270}if(j<=0){j=350}l.onNoControl(m._containerElement,i,j,m)}l.bNoControlEvent=true}}if(k&&l.cUrlIndex>=l.urls.length){l.cUrlIndex=0;l.tryTimes++}if(l.arySTwains.length>0){n=l.arySTwains[0]}else{l.hideMask();l.bOK=true;return}if(n._bLocalService==false){n.bReady=true;n._OnReady()}if(n.bReady){l.arySTwains.splice(0,1);if(l.arySTwains.length<=0){l.hideMask();l.bOK=true}else{setTimeout(d.startWS,100)}return}if(!l.bNoControlEvent){l.showMask()}if(n.__bConnecting){return}n.__bConnecting=true;var p=l.urls[l.cUrlIndex];return g(d.product.host,p.port,p.ssl).then(function(o){n.__bConnecting=false;n._objWS=o.ws;n._host=o.host;n._port=o.port;n._ssl=o.ssl;if(Dynamsoft.WebTwainEnv.IfUseWSPool){d._addToWSPool(n)}if(!n.bReady){n.bReady=true;n._OnReady()}l.arySTwains.splice(0,1);if(l.arySTwains.length<=0){l.hideMask();l.bOK=true}else{setTimeout(d.startWS,100)}},function(o){d.log(o);n.__bConnecting=false;if(!n.bReady){l.cUrlIndex++;setTimeout(d.startWS,100)}else{l.hideMask()}})};d.startWSByIP=function(){var k=d.detect,l;if(!d.product.bHTML5Edition){d.appendMessage("This browser is currently not supported. Please try Chrome or Firefox!");return}if(k.arySTwainsByIP.length>0){l=k.arySTwainsByIP[0]}else{k.hideMask();k.bOK=true;return}if(l._bLocalService==false){l.bReady=true}if(l.bReady){k.arySTwainsByIP.splice(0,1);if(k.arySTwainsByIP.length<=0){k.hideMask();k.bOK=true}else{setTimeout(d.startWSByIP,100)}if(l._bLocalService==false){l._OnReady()}return}if(!k.bNoControlEvent){k.showMask()}if(l.__bConnecting){return}if(l.__wsRetry>0){if(!k.bNoControlEvent){k.hideMask();if(d.isFunction(k.onNoControl)){var i,j;i=l._width;j=l._height;if(i<=0){i=270}if(j<=0){j=350}k.onNoControl(l._containerElement,i,j,l)}k.bNoControlEvent=true}}l.__bConnecting=true;return g(l._host,l._port,l._ssl).then(function(m){l.__bConnecting=false;l._objWS=m.ws;if(Dynamsoft.WebTwainEnv.IfUseWSPool){d._addToWSPool(l)}if(!l.bReady){l.bReady=true;l._OnReady()}k.arySTwainsByIP.splice(0,1);if(k.arySTwainsByIP.length<=0){k.hideMask();k.bOK=true}else{setTimeout(d.startWSByIP,100)}},function(m){d.log(m);l.__bConnecting=false;if(!l.bReady){l.__wsRetry++;setTimeout(d.startWSByIP,100)}else{k.hideMask()}})};d.html5.closeAll=function(){var r,q,k,l,m,p,n,s,t=false;d.dlgProgress=false;d.detect.bOK=false;d.detect.bFirst=true;for(r=d.detect.arySTwains.length-1;r>=0;r--){k=d.detect.arySTwains[r];if(!k){continue}p=k._id;if(k._containerElement){m=k._containerElement;l=k._containerElement.id}s=false;for(q=0;q<Dynamsoft.WebTwainEnv.Containers.length;q++){n=Dynamsoft.WebTwainEnv.Containers[q];if(!n){continue}if((p==n.WebTwainId)||(l&&l==n.ContainerId)||(m==n.Container)){s=true;break}}if(s){k.__unload();d.detect.arySTwains.splice(r,1)}if(k._isMobileMode()){t=true}}};d.bio=false;d.progressMessage="";d.dialogShowStatus=false;d.needShowTwiceShowDialog=false;d.dlgProgress=false;d.cancelFrome=0;d.dlgRef=0;d.initProgress=function(){var l,k,n;if(!d.dlgProgress){n=[];n.push('<dialog class="dynamsoft-dwt-dialogProgress" closed="closed" style="top:30%"><div class="ds-dwt-progressWrap">');n.push('<h3 class="dynamsoft-finalMessage"> </h3>');n.push('<p class="dynamsoft-desc"> </p><p class="dynamsoft-status">0%</p>');if(c.bIE){n.push('<div class="dynamsoft-progressBar" value="" max="100"></div>')}else{n.push('<progress class="dynamsoft-progressBar" value="" max="100"></progress>')}n.push('<br /><div style="width:100%;text-align:center"><button class="dynamsoft-btnCancel" value="cancel" autofcus>cancel</button></div>');n.push("</div></dialog>");k=d.one(".dynamsoft-dwt-dialogProgress");if(k&&k.getEL()){k.remove()}var j=d.parseHTML(n.join(""));if(j&&j.length>0){document.body.appendChild(j[0])}if(c.bIE){var m=d.one(".dynamsoft-progressBar"),i=m&&m.getEL();if(i){i.objProgressBar=new d.ProgressBar(i,{width:280,height:20})}}k=d.one(".dynamsoft-dwt-dialogProgress");if(k&&k.getEL()){d.dlgProgress=k[0];d.dialog.setup(d.dlgProgress)}d.dlgRef=0;d.dialogShowStatus=false;d.cancelFrome=0}};d.setBtnCancelVisibleForProgress=function(i){if(d.dlgRef<=0||(d.dialogShowStatus==false)){return}var k=d.one(".dynamsoft-btnCancel"),j=k&&k.getEL();if(j){if(i){j.style.display=""}else{j.style.display="none"}}};d.showProgressMsg=function(i,j,o){if(d.dlgRef<=0||(d.dialogShowStatus==false)){return}var q=d.one(".dynamsoft-progressBar"),n=d.one(".dynamsoft-status"),k=d.one(".dynamsoft-finalMessage"),r=d.one(".dynamsoft-desc"),p=i;if(i<0){p=0}else{if(i>100){p=100}}p=Math.floor(p);if(k&&k.getEL()){k.html(j)}if(r&&r.getEL()){r.html(o)}if(p||p===0){if(n&&n.getEL()){n.html(p+"%")}if(q&&q.getEL()){if(c.bIE){if(q[0].objProgressBar){q[0].objProgressBar.setValue(p)}else{q[0].value=p}}else{if(c.bEdge){q[0].style.display="";q[0].value=p}else{q[0].value=p}}}}if(p&&(p>=100||d.dlgRef<=0)){setTimeout(function(){if(q&&q.getEL()){if(c.bIE){if(q[0].objProgressBar){q[0].objProgressBar.setValue(0)}else{q[0].value=0}}else{if(c.bEdge){q[0].style.display="none";q[0].value=0}else{q[0].value=0}}}},300);if(d.dlgRef<=0){var l="OnPercentDone";d.closeProgress(l)}}};d.showProgress=function(r,n,k){var q=r;d.log("showProgress:"+n+",bCancel:"+k);if((d.cancelFrome==0&&q.__IfShowProgressBar==true)||(d.cancelFrome!=0&&q.__IfShowCancelDialogWhenImageTransfer==true)){var p=d.one(".dynamsoft-btnCancel"),i=p&&p.getEL();if(i){if(k==false){i.style.display="none"}else{i.style.display=""}}if(d.dialogShowStatus==false){if(d.dlgProgress){d.dlgProgress.showModal()}d.dialogShowStatus=true;var j=d.one(".dynamsoft-finalMessage");var s=d.one(".dynamsoft-progressBar"),l=s&&s.getEL();var o=d.one(".dynamsoft-status");if(j&&j.getEL()){j.html("")}if(o&&o.getEL()){o.html("0%")}if(l){if(c.bIE){if(l.objProgressBar){l.objProgressBar.setValue(0)}else{l.value=0}}else{l.value=0}}}d.dlgRef++}};d.closeProgress=function(i){d.log("closeProgress:"+i);var j=d.one(".dynamsoft-btnCancel");d.dlgRef--;if(d.dlgRef<=0){d.dlgRef=0}if(d.needShowTwiceShowDialog==true&&d.cancelFrome==1){if(j&&j.getEL()){j[0].innerHTML="Cancel"}}else{if(j&&j.getEL()){j[0].innerHTML="Cancel"}if(d.dlgRef==0){if(d.dialogShowStatus==true){if(d.dlgProgress){d.dlgProgress.close()}d.dialogShowStatus=false}d.needShowTwiceShowDialog=false;d.cancelFrome=0}}};d.html5.CreateDWTObject=function(j){var m,k,l;for(k=0;k<d.detect.arySTwains.length;k++){l=d.detect.arySTwains[k];if(l._id==j.id){return false}}m=new d.html5.STwain(j);if(j.customIP){d.detect.arySTwainsByIP.push(m);return m}d.detect.arySTwains.push(m);if(d.detect.bFirst){d._init(j)}d.detect.bFirst=false;return m};e.RemoveAllAuthorizations=function(){var j=d.LS.item("DWT_port"),m=d.LS.item("DWT_ssl"),i="http://",l=d.product.host,k;if(m=="true"){i="https://"}k=[i,l,":",j,"/dwt/",d.product.getDWTPrefix(),d.product.getServerVersionInfo(),"/RemoveAllAuthorizations?t=",d.now()].join("");d.ajax({method:"GET",url:k,async:true});return true};function g(l,j,k){var i={host:l,port:j,ssl:k,ws:null};return new Promise(function(p,o){var n=Dynamsoft.WebTwainEnv;if(!d.product.bHTML5Edition){o("This browser is currently not supported. Please try Chrome or Firefox!");return}try{i.ws=d.getWS(i.host,i.port,i.ssl);d.log(["connecting ... [host ssl port:",i.host,i.ssl,i.port,"]"].join(" "));i.ws.onopen=function(){if(i.ws.readyState==1){p(i)}else{if(i.ws.readyState==0){setTimeout(i.ws.onopen,100)}else{}}};i.ws.onclose=i.ws.onerror=function(){i.ws.onopen=null;i.ws.onclose=null;i.ws.onerror=null;i.ws=null;o("WebSocket closed.")}}catch(m){d.log(m);if(i.ws){i.ws.onopen=null;i.ws.onclose=null;i.ws.onerror=null;i.ws=null}o(m.message)}})}d._reconnectWSPool=function(){d.each(d.detect.aryWSPool,function(i){if(i&&!i.bOK&&!i.__bConnecting){d._reconnectWSElement(i)}})};d._reconnectWSElement=function(i){var m,k;if(!i||i.bOK||i.__bConnecting){return}m=i.wsurl;i.__bConnecting=true;i.__wsRetry=0;var j=function(){if(k){k.onopen=null}i.__wsRetry++;if(i.__wsRetry<5){setTimeout(d._reconnectWSPool,500)}else{i.__bConnecting=false;d.closeProgress("Reconnect");d.each(i.list,function(o,p){d.Errors.Server_Restarted(o)})}};try{k=d.getWS_bywsurl(m);k.onopen=function(){if(k.readyState==1){k.onopen=null;d.each(i.list,function(o,p){o._objWS=k;if(!o.bReady){o._OnReady(true)}});i.__bConnecting=false;i.bOK=true;d.detect.hideMask()}else{if(k.readyState==0){setTimeout(k.onopen,300)}else{i.__bConnecting=false}}};k.onclose=j}catch(l){d.log(l);setTimeout(j,500)}};d._deliverMsg=function(k,i){var l=i.id,j=[];d.each(d.detect.aryWSPool,function(m,o){if(m.wsurl==k){j=m.list;return !1}});d.each(j,function(m,o){if(m.clientId==l){if(m._OnRecieveMsg){m._OnRecieveMsg(i)}return !1}})};d._addToWSPool=function(j){var i,k=j._objWS.url;d.each(d.detect.aryWSPool,function(l,m){if(l.wsurl==k){i=l;return !1}});if(i&&d.isArray(i.list)){i.list.push(j)}else{d.detect.aryWSPool.push({wsurl:k,list:[j]})}};d._removeFromWSPool=function(k){var j,l,i;if(k&&k._objWS){l=k._objWS.url}d.each(d.detect.aryWSPool,function(m,o){if(m.wsurl==l){j=m;return !1}});if(j&&d.isArray(j.list)){i=j.list.indexOf(k);if(i>-1){j.list.splice(i,1)}if(j.list.length==0){j.ws.close();j.wsurl="";delete j.ws;i=d.detect.aryWSPool.indexOf(j);if(i>-1){d.detect.aryWSPool.splice(i,1)}}}}});Dynamsoft.Ready(function(a,k){var d=Dynamsoft;if(!a.product.bHTML5Edition){return}var m=document,p=a.DOM,h=window,n=Dynamsoft.WebTwainEnv,j=n.CustomizableDisplayInfo.buttons,b=n.CustomizableDisplayInfo.dialogText,c=a.html5.Funs2,g="transparent",e,l,o={isFunction:function(q){return q&&typeof(q)==="function"},addClass:function(r,q){var s=a.one(r);if(s&&s.length>0){s.addClass(q)}},removeClass:function(r,q){var s=a.one(r);if(s&&s.length>0){s.removeClass(q)}},output:function(r,q){if(Dynamsoft.WebTwainEnv.Debug){a.log(q)}},getTop:function(q){var r=q.offsetTop;if(q.offsetParent!=null){r+=o.getTop(q.offsetParent)}return r},getLeft:function(q){var r=q.offsetLeft;if(q.offsetParent!=null){r+=o.getLeft(q.offsetParent)}return r}};a._safePromptCustomMsg(function(){j=n.CustomizableDisplayInfo.buttons;b=n.CustomizableDisplayInfo.dialogText;e={toolbars:{bottomMenu:false,header:false,topMenu:true,asideMenu:false},groups:{viewMenu:{visibility:false},myGroup:{visibility:true,location:"topMenu",sequence:1}},buttonResize:{ifResize:true,maxSize:22,minSize:16},buttons:{loadImage:{visibility:false},readDirection:{visibility:false},panelChange:{visibility:false},previousImage:{visibility:true,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-preImage",sequence:1,onButtonClick:"OnPreviousImage"},nextImage:{visibility:true,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-nextImage",sequence:2,onButtonClick:"OnNextImage"},blank1:{visibility:true,location:"myGroup",sequence:3},acquire:{visibility:j.visibility.scan==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-acquire",sequence:4,onButtonClick:"OnAcquire"},loadImages:{visibility:j.visibility.load==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:5,onButtonClick:"OnLoadImage"},print:{visibility:j.visibility.print==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-printImage",sequence:6,onButtonClick:"OnPrint"},blank2:{visibility:(j.visibility.scan||j.visibility.load||j.visibility.print)?true:false,location:"myGroup",sequence:7},removeAll:{visibility:j.visibility.removeall==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:8,onButtonClick:"OnRemoveAll"},remove:{visibility:j.visibility.removeselected==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:9,onButtonClick:"OnRemove"},blank3:{visibility:(j.visibility.removeall||j.visibility.removeselected)?true:false,location:"myGroup",sequence:10},rotateLeft:{visibility:j.visibility.rotateleft==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:11,onButtonClick:"OnRotateLeft"},rotate:{visibility:j.visibility.rotate==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotate",sequence:12,onButtonClick:"OnRotate"},rotateRight:{visibility:j.visibility.rotateright==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:13,onButtonClick:"OnRotateRight"},deskew:{visibility:j.visibility.deskew==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-deskew",sequence:14,onButtonClick:"OnDeskew"},blank4:{visibility:(j.visibility.rotateleft||j.visibility.rotate||j.visibility.rotateright||j.visibility.deskew)?true:false,location:"myGroup",sequence:15},crop:{visibility:j.visibility.crop==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:16,onButtonClick:"OnCrop"},cut:{visibility:j.visibility.cut==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:17,onButtonClick:"OnErase"},changeImageSize:{visibility:j.visibility.changeimagesize==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-changeImageSize",sequence:18,onButtonClick:"OnChangeImageSize"},flip:{visibility:j.visibility.flip==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:19,onButtonClick:"OnFlip"},mirror:{visibility:j.visibility.mirror==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:20,onButtonClick:"OnMirror"},blank5:{visibility:(j.visibility.crop||j.visibility.cut||j.visibility.changeimagesize||j.visibility.flip||j.visibility.mirror)?true:false,location:"myGroup",sequence:21},zoomin:{visibility:j.visibility.zoomin==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomin",sequence:22,onButtonClick:"OnZoomin"},originalsize:{visibility:j.visibility.originalsize==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-originalsize",sequence:23,onButtonClick:"OnOriginalsize"},zoomout:{visibility:j.visibility.zoomout==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-zoomout",sequence:24,onButtonClick:"OnZoomout"},blank6:{visibility:(j.visibility.zoomin||j.visibility.originalsize||j.visibility.zoomout||j.visibility.stretch)?true:false,location:"myGroup",sequence:26},fitPage:{visibility:j.visibility.fit==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fullWebType",sequence:27,onButtonClick:"OnFitPage"},fitWidth:{visibility:j.visibility.fitw==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitWidthType",sequence:28,onButtonClick:"OnFitWidth"},fitHeight:{visibility:j.visibility.fith==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-fitHeightType",sequence:29,onButtonClick:"OnFitHeight"},blank7:{visibility:(j.visibility.fit||j.visibility.fitw||j.visibility.fith)?true:false,location:"myGroup",sequence:30},hand:{visibility:j.visibility.hand==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:31,onButtonClick:"OnHand"},select:{visibility:j.visibility.rectselect==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:32,onButtonClick:"OnSelect"},clicktozoomin:{visibility:j.visibility.zoom==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-clicktozoomin",sequence:33,onButtonClick:"OnClicktozoomin"},blank8:{visibility:(j.visibility.hand||j.visibility.rectselect||j.visibility.zoom)?true:false,location:"myGroup",sequence:34},restore:{visibility:j.visibility.restore==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:35,onButtonClick:"OnRestore"},save:{visibility:j.visibility.save==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:36,onButtonClick:"OnSave"},close:{visibility:j.visibility.close==true?true:false,location:"topMenuRight",iconClass:"d-icon-font ds-dwt-ui-icon-close",sequence:1,onButtonClick:"OnClose"}},thumbnail:{visibility:false,showThumbnailControl:false,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)"},tipsConfig:{previousImage:j.titles.previous,nextImage:j.titles.next,acquire:j.titles.scan,loadImages:j.titles.load,print:j.titles.print,removeAll:j.titles.removeall,remove:j.titles.removeselected,rotateLeft:j.titles.rotateleft,rotate:j.titles.rotate,rotateRight:j.titles.rotateright,deskew:j.titles.deskew,crop:j.titles.crop,cut:j.titles.cut,changeImageSize:j.titles.changeimagesize,flip:j.titles.flip,mirror:j.titles.mirror,zoomin:j.titles.zoomin,originalsize:j.titles.originalsize,zoomout:j.titles.zoomout,stretch:j.titles.stretch,fitPage:j.titles.fit,fitWidth:j.titles.fitw,fitHeight:j.titles.fith,hand:j.titles.hand,select:j.titles.rectselect,clicktozoomin:j.titles.zoom,restore:j.titles.restore,save:j.titles.save,close:j.titles.close},canvasConfig:{selectedPageBackground:g,selectedPageBorder:"",hoverPageBackground:g,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""};l={toolbars:{header:true,bottomMenu:true,topMenu:true,asideMenu:false},groups:{viewMenu:{visibility:false},global:{visibility:false},viewChange:{visibility:false},viewerCorner:{visibility:false},pager:{visibility:false},myGroup:{visibility:true,location:"topMenu",sequence:1},myGroup2:{visibility:true,location:"bottomMenu",sequence:1},myGroup3:{visibility:true,location:"header",sequence:1},myGroup4:{visibility:true,location:"bottomMenu",sequence:2}},buttonResize:{ifResize:true,maxSize:32,minSize:26},buttons:{loadImage:{visibility:false},readDirection:{visibility:false},panelChange:{visibility:false},print:{visibility:false},loadImages:{visibility:j.visibility.load==true?true:false,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-load",sequence:1,onButtonClick:"OnLoadImage"},close:{visibility:j.visibility.close==true?true:false,location:"myGroup3",iconClass:"d-icon-font ds-dwt-ui-icon-close ds-dwt-ui-icon-close-right",sequence:2,onButtonClick:"OnClose"},rotateLeft:{visibility:j.visibility.rotateleft==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateLeftImage",sequence:1,onButtonClick:"OnRotateLeft"},rotateRight:{visibility:j.visibility.rotateright==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-rotateRightImage",sequence:2,onButtonClick:"OnRotateRight"},flip:{visibility:j.visibility.flip==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-flipImage",sequence:3,onButtonClick:"OnFlip"},mirror:{visibility:j.visibility.mirror==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-mirrorImage",sequence:4,onButtonClick:"OnMirror"},crop:{visibility:j.visibility.crop==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-cropImage-grey",sequence:5,onButtonClick:"OnCrop"},cut:{visibility:j.visibility.cut==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-erase-grey",sequence:6,onButtonClick:"OnErase"},hand:{visibility:j.visibility.hand==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-hand",sequence:7,onButtonClick:"OnHand"},select:{visibility:j.visibility.rectselect==true?true:false,location:"myGroup",iconClass:"d-icon-font ds-dwt-ui-icon-select",sequence:8,onButtonClick:"OnSelect"},firstPage:{visibility:true,location:"myGroup2",iconClass:"ds-dvs-ui-pageStart",sequence:1,onButtonClick:"OnFirstImage"},previousPage:{visibility:true,location:"myGroup2",iconClass:"ds-dvs-ui-pagePre",sequence:2,onButtonClick:"OnPreviousImage"},pagination:{visibility:true,location:"myGroup2",sequence:3},nextPage:{visibility:true,location:"myGroup2",iconClass:"ds-dvs-ui-pageNext",sequence:4,onButtonClick:"OnNextImage"},lastPage:{visibility:true,location:"myGroup2",iconClass:"ds-dvs-ui-pageEnd",sequence:5,onButtonClick:"OnLastImage"},removeAll:{visibility:j.visibility.removeall==true?true:false,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeall",sequence:7,onButtonClick:"OnRemoveAll"},remove:{visibility:j.visibility.removeselected==true?true:false,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-removeImage",sequence:8,onButtonClick:"OnRemove"},restore:{visibility:j.visibility.restore==true?true:false,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-restore",sequence:10,onButtonClick:"OnRestore"},save:{visibility:j.visibility.save==true?true:false,location:"myGroup4",iconClass:"d-icon-font ds-dwt-ui-icon-saveImage",sequence:11,onButtonClick:"OnSave"}},thumbnail:{visibility:false,showThumbnailControl:false,hoverBackgroundColor:"rgb(239, 246, 253)",hoverBorderColor:"rgb(238, 238, 238)",imageBackgroundColor:"transparent",imageBorderColor:"rgb(238, 238, 238)",placeholderBackgroundColor:"rgb(251, 236, 136)",selectedBorderColor:"rgb(125,162,206)",pageBorderColor:"rgb(204, 204, 204)"},tipsConfig:{previousImage:j.titles.previous,nextImage:j.titles.next,acquire:j.titles.scan,loadImages:j.titles.load,print:j.titles.print,removeAll:j.titles.removeall,remove:j.titles.removeselected,rotateLeft:j.titles.rotateleft,rotate:j.titles.rotate,rotateRight:j.titles.rotateright,deskew:j.titles.deskew,crop:j.titles.crop,cut:j.titles.cut,changeImageSize:j.titles.changeimagesize,flip:j.titles.flip,mirror:j.titles.mirror,zoomin:j.titles.zoomin,originalsize:j.titles.originalsize,zoomout:j.titles.zoomout,stretch:j.titles.stretch,fitPage:j.titles.fit,fitWidth:j.titles.fitw,fitHeight:j.titles.fith,hand:j.titles.hand,select:j.titles.rectselect,clicktozoomin:j.titles.zoom,restore:j.titles.restore,save:j.titles.save,close:j.titles.close},canvasConfig:{selectedPageBackground:g,selectedPageBorder:"",hoverPageBackground:g,canvasBorder:"",canvasBackground:"#434246"},outerBorder:"",topMenuBorder:""}});function i(r,q){var s=this;s._imageEditorInner=new a.UI.ImageEditorInner(r,q);s.myImageEditor=s._imageEditorInner.myImageEditor}i.prototype.show=function(){var q=this;return q._imageEditorInner.show()};i.prototype.hide=function(){var q=this;return q._imageEditorInner.hide()};i.prototype.dispose=function(){var q=this;return q._imageEditorInner.OnCloseInner(true)};a.UI=a.UI||{};a.UI.ImageEditor=i;function f(r,q){var u=this;u._webViewer=r;u.mydvs=r.mydvs;u._stwain=r._stwain;u.bShowImageEditForFullScreen=false;u.bCouldBeTimeConsuming=false;u.bShowImageEdit=false;u.promptToSaveChange=true;var t=e;u.bMobile=false;var s=false;if(!u._stwain._isPC()){if(!u.bPadViewer){t=l;s=true}u.bMobile=true}t=u.updateWebviewerConfig(t,q,s);u.myImageEditor=u.mydvs.ViewControl.createViewer({container:"",displayMode:"single",uiConfig:t,scrollerConfig:{}});if(u._webViewer.mydvs.Error.errorCode!=0){a.Errors.WebviewerError(u._webViewer._stwain,u._webViewer.mydvs.Error.errorMessage,u._webViewer.mydvs.Error.errorCode)}u.bDispose=false;u._BindImageEditorEvents();u._bindView()}f.prototype.updateWebviewerConfig=function(r,q,s){var u=this,t=r;if(q){u.editorSettings=q;if(!a.isUndefined(q.buttons)){if(!a.isUndefined(q.buttons.titles)){if(!a.isUndefined(q.buttons.titles.previous)){t.tipsConfig.previousImage=q.buttons.titles.previous}if(!a.isUndefined(q.buttons.titles.next)){t.tipsConfig.nextImage=q.buttons.titles.next}if(!a.isUndefined(q.buttons.titles.print)){t.tipsConfig.print=q.buttons.titles.print}if(!a.isUndefined(q.buttons.titles.scan)){t.tipsConfig.acquire=q.buttons.titles.scan}if(!a.isUndefined(q.buttons.titles.load)){t.tipsConfig.loadImages=q.buttons.titles.load}if(!a.isUndefined(q.buttons.titles.rotateleft)){t.tipsConfig.rotateLeft=q.buttons.titles.rotateleft}if(!a.isUndefined(q.buttons.titles.rotate)){t.tipsConfig.rotate=q.buttons.titles.rotate}if(!a.isUndefined(q.buttons.titles.rotateright)){t.tipsConfig.rotateRight=q.buttons.titles.rotateright}if(!a.isUndefined(q.buttons.titles.deskew)){t.tipsConfig.deskew=q.buttons.titles.deskew}if(!a.isUndefined(q.buttons.titles.crop)){t.tipsConfig.crop=q.buttons.titles.crop}if(!a.isUndefined(q.buttons.titles.cut)){t.tipsConfig.cut=q.buttons.titles.cut}if(!a.isUndefined(q.buttons.titles.changeimagesize)){t.tipsConfig.changeImageSize=q.buttons.titles.changeimagesize}if(!a.isUndefined(q.buttons.titles.flip)){t.tipsConfig.flip=q.buttons.titles.flip}if(!a.isUndefined(q.buttons.titles.mirror)){t.tipsConfig.mirror=q.buttons.titles.mirror}if(!a.isUndefined(q.buttons.titles.zoomin)){t.tipsConfig.zoomin=q.buttons.titles.zoomin}if(!a.isUndefined(q.buttons.titles.originalsize)){t.tipsConfig.originalsize=q.buttons.titles.originalsize}if(!a.isUndefined(q.buttons.titles.zoomout)){t.tipsConfig.zoomout=q.buttons.titles.zoomout}if(!a.isUndefined(q.buttons.titles.stretch)){t.tipsConfig.stretch=q.buttons.titles.stretch}if(!a.isUndefined(q.buttons.titles.fit)){t.tipsConfig.fitPage=q.buttons.titles.fit}if(!a.isUndefined(q.buttons.titles.fitw)){t.tipsConfig.fitWidth=q.buttons.titles.fitw}if(!a.isUndefined(q.buttons.titles.fith)){t.tipsConfig.fitHeight=q.buttons.titles.fith}if(!a.isUndefined(q.buttons.titles.hand)){t.tipsConfig.hand=q.buttons.titles.hand}if(!a.isUndefined(q.buttons.titles.rectselect)){t.tipsConfig.select=q.buttons.titles.rectselect}if(!a.isUndefined(q.buttons.titles.zoom)){t.tipsConfig.clicktozoomin=q.buttons.titles.zoom}if(!a.isUndefined(q.buttons.titles.restore)){t.tipsConfig.restore=q.buttons.titles.restore}if(!a.isUndefined(q.buttons.titles.save)){t.tipsConfig.save=q.buttons.titles.save}if(!a.isUndefined(q.buttons.titles.close)){t.tipsConfig.close=q.buttons.titles.close}if(!a.isUndefined(q.buttons.titles.removeall)){t.tipsConfig.removeAll=q.buttons.titles.removeall}if(!a.isUndefined(q.buttons.titles.removeselected)){t.tipsConfig.remove=q.buttons.titles.removeselected}}if(!a.isUndefined(q.buttons.visibility)){if(s){if(!a.isUndefined(q.buttons.visibility.load)){t.buttons.loadImages.visibility=q.buttons.visibility.load==true?true:false}else{t.buttons.loadImages.visibility=true}if(!a.isUndefined(q.buttons.visibility.close)){t.buttons.close.visibility=q.buttons.visibility.close==true?true:false}else{t.buttons.close.visibility=true}if(!a.isUndefined(q.buttons.visibility.rotateleft)){t.buttons.rotateLeft.visibility=q.buttons.visibility.rotateleft==true?true:false}else{t.buttons.rotateLeft.visibility=true}if(!a.isUndefined(q.buttons.visibility.rotateright)){t.buttons.rotateRight.visibility=q.buttons.visibility.rotateright==true?true:false}else{t.buttons.rotateRight.visibility=true}if(!a.isUndefined(q.buttons.visibility.flip)){t.buttons.flip.visibility=q.buttons.visibility.flip==true?true:false}else{t.buttons.flip.visibility=true}if(!a.isUndefined(q.buttons.visibility.mirror)){t.buttons.mirror.visibility=q.buttons.visibility.mirror==true?true:false}else{t.buttons.mirror.visibility=true}if(!a.isUndefined(q.buttons.visibility.crop)){t.buttons.crop.visibility=q.buttons.visibility.crop==true?true:false}else{t.buttons.crop.visibility=true}if(!a.isUndefined(q.buttons.visibility.cut)){t.buttons.cut.visibility=q.buttons.visibility.cut==true?true:false}else{t.buttons.cut.visibility=true}if(!a.isUndefined(q.buttons.visibility.hand)){t.buttons.hand.visibility=q.buttons.visibility.hand==true?true:false}else{t.buttons.hand.visibility=true}if(!a.isUndefined(q.buttons.visibility.rectselect)){t.buttons.select.visibility=q.buttons.visibility.rectselect==true?true:false}else{t.buttons.select.visibility=true}if(!a.isUndefined(q.buttons.visibility.removeall)){t.buttons.removeAll.visibility=q.buttons.visibility.removeall==true?true:false}else{t.buttons.removeAll.visibility=true}if(!a.isUndefined(q.buttons.visibility.removeselected)){t.buttons.remove.visibility=q.buttons.visibility.removeselected==true?true:false}else{t.buttons.remove.visibility=true}if(!a.isUndefined(q.buttons.visibility.restore)){t.buttons.restore.visibility=q.buttons.visibility.restore==true?true:false}else{t.buttons.restore.visibility=true}if(!a.isUndefined(q.buttons.visibility.save)){t.buttons.save.visibility=q.buttons.visibility.save==true?true:false}else{t.buttons.save.visibility=true}}else{if(!a.isUndefined(q.buttons.visibility.scan)){t.buttons.acquire.visibility=q.buttons.visibility.scan==true?true:false}else{t.buttons.acquire.visibility=true}if(!a.isUndefined(q.buttons.visibility.load)){t.buttons.loadImages.visibility=q.buttons.visibility.load==true?true:false}else{t.buttons.loadImages.visibility=true}if(!a.isUndefined(q.buttons.visibility.print)){t.buttons.print.visibility=q.buttons.visibility.print==true?true:false}else{t.buttons.print.visibility=true}t.buttons.blank2.visibility=(t.buttons.acquire.visibility||t.buttons.loadImages.visibility||t.buttons.print.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.removeall)){t.buttons.removeAll.visibility=q.buttons.visibility.removeall==true?true:false}else{t.buttons.removeAll.visibility=true}if(!a.isUndefined(q.buttons.visibility.removeselected)){t.buttons.remove.visibility=q.buttons.visibility.removeselected==true?true:false}else{t.buttons.remove.visibility=true}t.buttons.blank3.visibility=(t.buttons.removeAll.visibility||t.buttons.remove.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.rotateleft)){t.buttons.rotateLeft.visibility=q.buttons.visibility.rotateleft==true?true:false}else{t.buttons.rotateLeft.visibility=true}if(!a.isUndefined(q.buttons.visibility.rotate)){t.buttons.rotate.visibility=q.buttons.visibility.rotate==true?true:false}else{t.buttons.rotate.visibility=true}if(!a.isUndefined(q.buttons.visibility.rotateright)){t.buttons.rotateRight.visibility=q.buttons.visibility.rotateright==true?true:false}else{t.buttons.rotateRight.visibility=true}if(!a.isUndefined(q.buttons.visibility.deskew)){t.buttons.deskew.visibility=q.buttons.visibility.deskew==true?true:false}else{t.buttons.deskew.visibility=true}t.buttons.blank4.visibility=(t.buttons.rotateLeft.visibility||t.buttons.rotate.visibility||t.buttons.rotateRight.visibility||t.buttons.deskew.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.crop)){t.buttons.crop.visibility=q.buttons.visibility.crop==true?true:false}else{t.buttons.crop.visibility=true}if(!a.isUndefined(q.buttons.visibility.cut)){t.buttons.cut.visibility=q.buttons.visibility.cut==true?true:false}else{t.buttons.cut.visibility=true}if(!a.isUndefined(q.buttons.visibility.changeimagesize)){t.buttons.changeImageSize.visibility=q.buttons.visibility.changeimagesize==true?true:false}else{t.buttons.changeImageSize.visibility=true}if(!a.isUndefined(q.buttons.visibility.flip)){t.buttons.flip.visibility=q.buttons.visibility.flip==true?true:false}else{t.buttons.flip.visibility=true}if(!a.isUndefined(q.buttons.visibility.mirror)){t.buttons.mirror.visibility=q.buttons.visibility.mirror==true?true:false}else{t.buttons.mirror.visibility=true}t.buttons.blank5.visibility=(t.buttons.crop.visibility||t.buttons.cut.visibility||t.buttons.changeImageSize.visibility||t.buttons.flip.visibility||t.buttons.mirror.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.zoomin)){t.buttons.zoomin.visibility=q.buttons.visibility.zoomin==true?true:false}else{t.buttons.zoomin.visibility=true}if(!a.isUndefined(q.buttons.visibility.originalsize)){t.buttons.originalsize.visibility=q.buttons.visibility.originalsize==true?true:false}else{t.buttons.originalsize.visibility=true}if(!a.isUndefined(q.buttons.visibility.zoomout)){t.buttons.zoomout.visibility=q.buttons.visibility.zoomout==true?true:false}else{t.buttons.zoomout.visibility=true}t.buttons.blank6.visibility=(t.buttons.zoomin.visibility||t.buttons.originalsize.visibility||t.buttons.zoomout.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.fit)){t.buttons.fitPage.visibility=q.buttons.visibility.fit==true?true:false}else{t.buttons.fitPage.visibility=true}if(!a.isUndefined(q.buttons.visibility.fitw)){t.buttons.fitWidth.visibility=q.buttons.visibility.fitw==true?true:false}else{t.buttons.fitWidth.visibility=true}if(!a.isUndefined(q.buttons.visibility.fith)){t.buttons.fitHeight.visibility=q.buttons.visibility.fith==true?true:false}else{t.buttons.fitHeight.visibility=true}t.buttons.blank7.visibility=(t.buttons.fitPage.visibility||t.buttons.fitWidth.visibility||t.buttons.fitHeight.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.hand)){t.buttons.hand.visibility=q.buttons.visibility.hand==true?true:false}else{t.buttons.hand.visibility=true}if(!a.isUndefined(q.buttons.visibility.rectselect)){t.buttons.select.visibility=q.buttons.visibility.rectselect==true?true:false}else{t.buttons.select.visibility=true}if(!a.isUndefined(q.buttons.visibility.zoom)){t.buttons.clicktozoomin.visibility=q.buttons.visibility.zoom==true?true:false}else{t.buttons.clicktozoomin.visibility=true}t.buttons.blank7.visibility=(t.buttons.hand.visibility||t.buttons.select.visibility||t.buttons.clicktozoomin.visibility)?true:false;if(!a.isUndefined(q.buttons.visibility.restore)){t.buttons.restore.visibility=q.buttons.visibility.restore==true?true:false}else{t.buttons.restore.visibility=true}if(!a.isUndefined(q.buttons.visibility.save)){t.buttons.save.visibility=q.buttons.visibility.save==true?true:false}else{t.buttons.save.visibility=true}if(!a.isUndefined(q.buttons.visibility.close)){t.buttons.close.visibility=q.buttons.visibility.close==true?true:false}else{t.buttons.close.visibility=true}}}}if(!a.isUndefined(q.dialogText)){b=q.dialogText;n.CustomizableDisplayInfo.dialogText=b}if(!a.isUndefined(q.promptToSaveChange)){u.promptToSaveChange=q.promptToSaveChange}if(!a.isUndefined(q.border)){t.outerBorder=q.border}if(!a.isUndefined(q.topMenuBorder)){t.topMenuBorder=q.topMenuBorder}if(!a.isUndefined(q.innerBorder)){t.canvasConfig.canvasBorder=q.innerBorder}if(!a.isUndefined(q.background)){t.canvasConfig.canvasBackground=q.background}}return t};f.prototype._bindView=function(){var x=this;if(x.bShowImageEdit){return true}if(!x.myImageEditor){if(x.bDispose){a.Errors.ImageEditorDispose(x._stwain)}else{a.Errors.ImageEditorNotExist(x._stwain)}return false}var r=a.one(".dynamsoft-cvs-container");if(r&&r.getEL()){x.cvsContainer=r;x.cvsParentId=r.parent()[0].id;if(x._stwain&&x._stwain.Addon&&x._stwain.Addon.Camera){x.cvsStatus=x._stwain.Addon.Camera.getStatus()}}else{x.cvsContainer="";x.cvsParentId="";x.cvsStatus=""}x.bShowImageEdit=true;if(x.editorSettings&&x.editorSettings.element&&x.editorSettings.width&&x.editorSettings.height){x.UIEditor=x.editorSettings.element;x.bFullScreen=false;x.myImageEditor.width=x.editorSettings.width;x.myImageEditor.height=x.editorSettings.height;x.SetWidthInner(x.editorSettings.width,true);x.SetHeightInner(x.editorSettings.height,true);x.myImageEditor.bindView(x.UIEditor);x.hide();var s=document.getElementById(x.cvsParentId);if(s){s.appendChild(x.cvsContainer[0])}}else{var t=m.createElement("div");m.body.appendChild(t);document.body.insertBefore(t,document.body.firstElementChild);x.UIEditor=t;x.bFullScreen=true;x.UIEditor.className="D_ImageUIEditor";x.UIEditor.style.width="100%";x.UIEditor.style.height="100%";x.UIEditor.style.position="fixed";x.UIEditor.style.left="0px";x.UIEditor.style.top="0px";x.UIEditor.style.zIndex="9999";x.UIEditor.style.display="none";x.SetWidthInner("100%",true);x.SetHeightInner("100%",true);x.myImageEditor.bindView(x.UIEditor);x.hide();x.bShowImageEditForFullScreen=true}x.updateMode();if(x.editorSettings&&x.editorSettings.selectionRectAspectRatio){x.SetSelectionRectAspectRatio(x.editorSettings.selectionRectAspectRatio)}else{x.SetSelectionRectAspectRatio(0)}x.HideEditorButtonForPad();x.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}];if(x._stwain._isMobileMode()){var w,q=a.one(".ds-dwt-ui-icon-acquire");if(q&&q.getEL()){q[0].style.display="none"}x.dwtMobileFileId="dwtmobilefile";if(x.UIEditor&&x.UIEditor.nodeName=="DIV"){w=document.createElement("div");if(x.bMobile){w.innerHTML="<input multiple accept='image/jpeg,image/png,image/tiff' id ='"+x.dwtMobileFileId+"' type='file' style='display:none' />"}else{w.innerHTML="<input multiple accept='image/*,.pdf' id ='"+x.dwtMobileFileId+"' type='file' style='display:none' />"}x.UIEditor.appendChild(w)}else{var v=document.getElementById(x.UIEditor);w=document.createElement("div");if(x.bMobile){w.innerHTML="<input id ='"+x.dwtMobileFileId+"' type='file' accept='image/jpeg,image/png,image/tiff' style='display:none' />"}else{w.innerHTML="<input id ='"+x.dwtMobileFileId+"' type='file' accept='image/*,.pdf' style='display:none' />"}v.appendChild(w)}var u=a.get(x.dwtMobileFileId);u.onchange=function(){for(var y=0;y<this.files.length;y++){x._stwain.LoadImageFromBinary(this.files[y])}var z=document.getElementById(x.dwtMobileFileId);z.value=""}}x.myImageEditor.off("slideSwitch");x.myImageEditor.on("slideSwitch",function(y){if(y=="left"){x._webViewer.myViewer.previous()}else{if(y=="right"){x._webViewer.myViewer.next()}}});return true};f.prototype.dispose=function(){var r=this,q=false;q=r.mydvs.ViewControl.removeViewer(r.myImageEditor);if(q){if(r.UIEditor.lastChild){r.UIEditor.removeChild(r.UIEditor.lastChild)}r.myImageEditor=undefined;r._webViewer._imageEditor=undefined;r._webViewer._imageEditorInner=undefined;r.bDispose=true}return q};f.prototype.show=function(){var q=this;if(q.myImageEditor){if(q.bFullScreen){q.UIEditor.style.display="";document.documentElement.scrollLeft=0;document.documentElement.scrollTop=0;document.body.style.overflow="hidden"}q.myImageEditor.showViewer=true;return true}else{if(q.bDispose){a.Errors.ImageEditorDispose(q._webViewer._stwain)}else{a.Errors.ImageEditorNotExist(q._webViewer._stwain)}return false}};f.prototype.hide=function(){var q=this;if(q.myImageEditor){q.myImageEditor.showViewer=false;if(q.bFullScreen){q.UIEditor.style.display="none"}return true}else{if(q.bDispose){a.Errors.ImageEditorDispose(q._webViewer._stwain)}else{a.Errors.ImageEditorNotExist(q._webViewer._stwain)}return false}return true};f.prototype._BindImageEditorEvents=function(){var q=this;a.each(["OnPreviousImage","OnNextImage","OnAcquire","OnLoadImage","OnPrint","OnRemoveAll","OnRemove","OnRotateLeft","OnRotate","OnRotateRight","OnDeskew","OnCrop","OnErase","OnChangeImageSize","OnFlip","OnMirror","OnZoomin","OnOriginalsize","OnZoomout","OnFitPage","OnFitWidth","OnFitHeight","OnHand","OnSelect","OnClicktozoomin","OnRestore","OnSave","OnClose","click","imageClick","pageAreaSelected","pageAreaUnselected","onDrop","OnFirstImage","OnLastImage","pageChange","bufferChanged","pageRendered"],function(r){q.myImageEditor.on(r,function(t,s){q[r](t,s)})})};f.prototype.HideEditorButtonForPad=function(){var v=this,r=v.myImageEditor,t=v.bPadViewer;var u=document.getElementById("rotateBtn"+r.postfix);if(u){if(!t){u.style.display=""}else{u.style.display="none"}}var s=document.getElementById("deskewBtn"+r.postfix);if(s){if(!t){s.style.display=""}else{s.style.display="none"}}var q=document.getElementById("changeImageSizeBtn"+r.postfix);if(q){if(!t){q.style.display=""}else{q.style.display="none"}}};f.prototype.BackImageData=function(){var r=this;if(r._stwain._isMobileMode()&&r.bShowImageEdit){var q=r._webViewer.GetCurrentIndex();if(q>=0){r._webViewer.GetImageData(r._webViewer.GetUidByIndex(q)).then(function(t){r.BackImageBuffer=t.oriData;var s=r._webViewer.GetMetaDataByIndex(q);if(s){r.BackModelImageControl={};r.BackModelImageControl.width=s.width;r.BackModelImageControl.height=s.height;r.BackModelImageControl.bitDepth=s.bitDepth;r.BackModelImageControl.resolutionX=s.resolutionX;r.BackModelImageControl.resolutionY=s.resolutionY}})}}};f.prototype.CloseShowImageEditor=function(){var r=this;if(!r.myImageEditor){if(r.bDispose){a.Errors.ImageEditorDispose(r._stwain)}else{a.Errors.ImageEditorNotExist(r._stwain)}return false}if(r.cvsContainer&&r.cvsContainer!=""&&r.cvsParentId&&r.cvsParentId!=""){var q=document.getElementById(r.cvsParentId);if(q){q.appendChild(r.cvsContainer[0])}if(r.cvsStatus=="playing"){if(r._stwain&&r._stwain.Addon&&r._stwain.Addon.Camera){r._stwain.Addon.Camera.resume()}}}return true};f.prototype.UpdateInfo=function(){var q=this;Dynamsoft.Lib.hideMask()};f.prototype.clearSelectedAreas=function(){var r=this,q=false;if(r._webViewer.GetHowManyImagesInBuffer()<=0){return true}q=r.myImageEditor.clearSelectedBoxes();if(!q){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)}return q};f.prototype.SetSelectionRectAspectRatio=function(q){var r=this;r.myImageEditor.selectionBoxAspectRatio=q;return true};f.prototype.ZoomIn=function(){var r=this,q=false;q=r.myImageEditor.zoomIn();if(!q){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)}return q};f.prototype.ZoomOut=function(){var r=this,q=false;q=r.myImageEditor.zoomOut();if(!q){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)}return q};f.prototype.SetZoom=function(u,q,t){var s=this,r=false;if(q&t){r=s.myImageEditor.zoomTo(u,q,t)}else{r=s.myImageEditor.zoomTo(u)}if(!r){a.Errors.WebviewerError(s._stwain,s.mydvs.Error.errorMessage,s.mydvs.Error.errorCode)}return r};f.prototype.GetZoom=function(){var q=this;return q.myImageEditor.zoom};f.prototype.SetFitType=function(r){var s=this,q="window";if(!a.isUndefined(r)){if(r=="width"||r=="height"){q=r}}s.myImageEditor.fitType=q;return true};f.prototype.SetMouseShape=function(r){var s=this;var q;switch(r){case EnumDWT_MouseShape.Default:q="default";break;case EnumDWT_MouseShape.Hand:q="pointer";break;case EnumDWT_MouseShape.Crosshair:q="crosshair";break;case EnumDWT_MouseShape.Zoom:q="zoom-in";break;default:q="crosshair";break}s.SetCursor(q);return true};f.prototype.SetCursor=function(r){var s=this;if(!s._webViewer._NouiNotSupport("cursor")){return false}var q="default";switch(r){case"default":q="default";s.SetOperationMode(1);break;case"pointer":q="pointer";s.SetOperationMode(0);break;case"crosshair":q="crosshair";s.SetOperationMode(1);break;case"zoom-in":q="zoom-in";s.SetOperationMode(2);break;default:q="crosshair";break}s.myImageEditor.canvasMouseShape=q;return true};f.prototype.SetSelectionImageBorderColor=function(q){var r=this;r.myImageEditor.selectedPageBorderColor=q;return true};f.prototype.SetBackgroundColor=function(q){var r=this;r.myImageEditor.imageBackgroundColor=q;return true};f.prototype.SetWidth=function(q){var r=this;r.myImageEditor.width=q;return true};f.prototype.SetWidthInner=function(r,s){var t=this;if(s){t.myImageEditor.width=r}else{if(a.isString(r)&&r.indexOf("%")>=0){var q=a.one("#"+t._stwain._containerID);t.myImageEditor.width=parseInt(a.css(q,"width")*parseInt(r)/100)}else{t.myImageEditor.width=r}}return true};f.prototype.SetHeight=function(q){var r=this;r.myImageEditor.height=q;return true};f.prototype.SetHeightInner=function(q,s){var t=this;if(s){t.myImageEditor.height=q}else{if(a.isString(q)&&q.indexOf("%")>=0){var r=a.one(t._stwain._containerElement);t.myImageEditor.height=parseInt(a.css(r,"height")*parseInt(q)/100)}else{t.myImageEditor.height=q}}return true};f.prototype.SetIfAutoScroll=function(q){var r=this;r.myImageEditor.showLatestPage=q;return true};f.prototype.ChangeButtonClass=function(q,t){var s=this,r;r=s.myImageEditor.setButtonClass(q,t);return r};f.prototype.SetOperationMode=function(r){var s=this,q;s.myImageEditor.operationMode=r};f.prototype.UnbindContent=function(r){var s=this,q;s.myImageEditor.unbindContent()};f.prototype.SetSelectedPageBackground=function(q){var r=this;r.myImageEditor.selectedPageBackground=q};f.prototype.GetRealTimeMetadataByIndex=function(q){var r=this;if(q<0||q>=r._webViewer.GetHowManyImagesInBuffer()){a.Errors.IndexOutOfRange(r._stwain);return}return r.myImageEditor.getRealTimeMetadataByIndex(q)};f.prototype.DVSRotate=function(r){var s=this,q;s.myImageEditor.rotateMode=0;q=s.myImageEditor.rotate(r);if(!q){a.Errors.WebviewerError(s._stwain,s.mydvs.Error.errorMessage,s.mydvs.Error.errorCode)}return q};f.prototype.DVSFlip=function(){var r=this,q;q=r.myImageEditor.flip();if(!q){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)}return q};f.prototype.DVSMirror=function(){var r=this,q;q=r.myImageEditor.mirror();if(!q){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)}return q};f.prototype.DVSCrop=function(u,t,s,r){var v=this,q;q=v.myImageEditor.crop(u,t,(s-u),(r-t));if(!q){a.Errors.WebviewerError(v._stwain,v.mydvs.Error.errorMessage,v.mydvs.Error.errorCode)}return q};f.prototype.DVSErase=function(u,t,s,r){var v=this,q;q=v.myImageEditor.erase(u,t,(s-u),(r-t),v._webViewer._UIView.BackgroundFillColor);if(!q){a.Errors.WebviewerError(v._stwain,v.mydvs.Error.errorMessage,v.mydvs.Error.errorCode)}return q};f.prototype.DVSSaveTransformResult=function(q){var r=this;r.myImageEditor.saveTransformation().then(function(){q(null,-1,null)},function(s){a.Errors.WebviewerError(r._stwain,r.mydvs.Error.errorMessage,r.mydvs.Error.errorCode)});return true};f.prototype.DVSRotateEx=function(s,r){var t=this,q;t.myImageEditor.rotateMode=r?1:0;q=t.myImageEditor.rotate(s);if(!q){a.Errors.WebviewerError(t._stwain,t.mydvs.Error.errorMessage,t.mydvs.Error.errorCode)}return q};f.prototype.DVSChangeImageSize=function(s,r,t){var u=this,q;q=u.myImageEditor.changePageSize(parseInt(s),parseInt(r),t);if(!q){a.Errors.WebviewerError(u._stwain,u.mydvs.Error.errorMessage,u.mydvs.Error.errorCode)}return q};f.prototype.DVSSkewAngle=function(){var q=this;q._stwain._asyncGetSkewAngleOnly(q._webViewer.GetCurrentIndex(),function(r){q.DVSRotateEx(r,true);q.UpdateInfo();q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();q.updateButtons()});return true};f.prototype.updateButtons=function(){var q=this;if(q._IfChangedWithinTheEditor==true){q.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage");q.ChangeButtonClass("restore","ds-dwt-ui-icon-restore")}else{q.ChangeButtonClass("save","ds-dwt-ui-icon-saveImage-grey");q.ChangeButtonClass("restore","ds-dwt-ui-icon-restore-grey")}};f.prototype.updateMode=function(q){var t=this,s,r;if(!t.bShowImageEdit){return}r=t._webViewer.GetHowManyImagesInBuffer();if(r>1){if(t._webViewer.GetCurrentIndex()==r-1||t._webViewer.GetHowManyImagesInBuffer()<=1){t.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey")}else{t.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage")}if(t._webViewer.GetCurrentIndex()<=0||t._webViewer.GetHowManyImagesInBuffer()<=1){t.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey")}else{t.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage")}}else{t.ChangeButtonClass("nextImage","ds-dwt-ui-icon-nextImage-grey");t.ChangeButtonClass("previousImage","ds-dwt-ui-icon-preImage-grey")}t.updateButtons();t.__SetCropButtonGrey(true);t.__SetEraseButtonGrey(true);if(t.bMobile){switch(t.cursorStatus){case"rectselect":t.OnSelect();break;case"zoom":t.OnClicktozoomin();break;default:t.OnHand()}}else{switch(t.cursorStatus){case"hand":t.OnHand();break;case"zoom":t.OnClicktozoomin();break;default:t.OnSelect()}}if(q){if(t._IfChangedWithinTheEditor==true){t.ShowDialogForSaveImage(t._webViewer.GetCurrentIndex(),false)}}};f.prototype.__SaveImageInner=function(s,v){var w=this,t;if(w.iChangedIndex==-1&&w._IfSaveChangesOutSideOfTheEditor==false){w._IfChangedWithinTheEditor=false;if(v){v()}return false}if(w._IfChangedWithinTheEditor!=true&&w._IfSaveChangesOutSideOfTheEditor==false){alert(n.CustomizableDisplayInfo.errorMessages.imageNotChanged);w._IfChangedWithinTheEditor=false;if(v){v()}return false}if(w._IfSaveChangesOutSideOfTheEditor){w.iChangedIndex=w._webViewer.GetCurrentIndex()}var q=function(A,z,x){if(A){if(s==true){a.log("__SaveImageInner: "+[A.guid].join(","));if(w._webViewer.GetCurrentIndex()==z){if(w._stwain._isMobileMode()){w._webViewer.MobileUpdateImage(A,x)}else{w._webViewer.UpdateImage(A,x)}}}w._IfChangedWithinTheEditor=false;w.iChangedIndex=-1;var y=A.serverId;if(y==-1){if(v){v()}return false}}else{w._IfChangedWithinTheEditor=false;w.iChangedIndex=-1}w.updateButtons();if(v){v()}return true};var u=true;if(w._IfChangedWithinTheEditor==true||w._IfSaveChangesOutSideOfTheEditor==true){var r=w.getImageManager().convertClientIndexToServerId(w.iChangedIndex);if(r==-1){if(v){v()}return false}w.OnGetImageFromServerForEdit(w._webViewer._UIView.mapModelImageControl[r],w.iChangedIndex,2,q);u=false}w._IfSaveChangesOutSideOfTheEditor=false;if(u){w._IfChangedWithinTheEditor=false;if(v){v()}}return true};f.prototype.ShowDialogForSaveImage=function(v,q,t,u){var r=this;var s=function(){r.__SaveImageInner(true,function(){var z=r._stwain._containerID;h.DCP_DWT_OnClickCloseInstall(z);a.bChangeImage=1;if(v==-1){r.OnClose()}else{r._webViewer.__goInner(v)}if(q){document.body.style.overflow=""}if(o.isFunction(t)){t()}})};if(r.promptToSaveChange){var x=['<div class="dynamsoft-dwt-dlg-tips">',"<div>",b.saveChangedImage[0],"</div>",'<div style="width: 200px;white-space:nowrap;margin-left: auto;margin-right: auto;">','<input class="dynamsoft_btnSave" style="width: 100px; height:30px; margin-right: 10px; margin-top: 10px;"  type="button" value="',b.saveChangedImage[1],'" /><input class="dynamsoft_btnCancel" style="width: 100px; height:30px; margin-top: 10px;"  type="button" value="',b.saveChangedImage[2],'" /></div>',"</div>"];if(r.bMobile){Dynamsoft.WebTwainEnv.ShowDialog(300,0,x.join(""),true)}else{Dynamsoft.WebTwainEnv.ShowDialog(420,0,x.join(""),true)}var y=a.one(".dynamsoft_btnSave").getEL();if(y){y.onclick=function(){s()}}var w=a.one(".dynamsoft_btnCancel").getEL();if(w){w.onclick=function(){r.__RestoreImageInner(v,function(){var z=r._stwain._containerElement;h.DCP_DWT_OnClickCloseInstall(z);a.bChangeImage=0;if(v==-1){r.OnClose()}else{r._webViewer.__goInner(v)}if(q){document.body.style.overflow=""}if(o.isFunction(u)){u()}})}}}else{s()}};f.prototype.__SetCropButtonGrey=function(q){var r=this;r.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey");if(q){r.clearSelectedAreas()}};f.prototype.__SetEraseButtonGrey=function(q){var r=this;r.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey");if(q){r.clearSelectedAreas()}};f.prototype.__SetZoomInButtonEnable=function(q){var r=this;if(q==true){r.ChangeButtonClass("zoomin","ds-dwt-ui-icon-zoomin")}else{r.ChangeButtonClass("zoomin","ds-dwt-ui-icon-zoomin-grey")}};f.prototype.__SetZoomOutButtonEnable=function(q){var r=this;if(q==true){r.ChangeButtonClass("zoomout","ds-dwt-ui-icon-zoomout")}else{r.ChangeButtonClass("zoomout","ds-dwt-ui-icon-zoomout-grey")}};f.prototype.pageChange=function(r){var u=this,t,q=u._webViewer.GetHowManyImagesInBuffer();a.log("OnPagination");if(q<=0){o.output(u,"No image in Buffer");return}else{if(q==1){return}}var s=/^\d+$/;if(!s.test(r)||r<=0){alert(n.CustomizableDisplayInfo.errorMessages.invalidIndex);return}t=parseInt(r)-1;if(t<0){t=0}else{if(t>=q){t=q-1}}if(t!=u._webViewer.GetCurrentIndex()){u.go(t)}};f.prototype.bufferChanged=function(q){var r=this;if(q.action=="shift"&&r._IfChangedWithinTheEditor==true){r.ShowDialogForSaveImage(r._webViewer.GetCurrentIndex(),false);return false}return true};f.prototype.pageRendered=function(q){var r=this};f.prototype.OnFirstImage=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);q._webViewer.first()};f.prototype.OnLastImage=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);q._webViewer.last()};f.prototype.OnPreviousImage=function(){var r=this,q=a.one(".ds-dwt-ui-icon-preImage-grey");a.Errors.ClearErrorInfo(r._stwain);if(q&&q.getEL()){return}else{r._webViewer.previous()}};f.prototype.OnNextImage=function(){var r=this,q=a.one(".ds-dwt-ui-icon-nextImage-grey");a.Errors.ClearErrorInfo(r._stwain);if(q&&q.getEL()){return}else{r._webViewer.next()}};f.prototype.go=function(q){var r=this;if(r._webViewer.GetHowManyImagesInBuffer()<=0){o.output(r,"No image in Buffer");return false}if(r._IfChangedWithinTheEditor==true){r.ShowDialogForSaveImage(q,false);return false}if(r.bShowImageEdit){if(typeof(q)!=="undefined"){if(q==-1){return false}r.bCouldBeTimeConsuming=true;r.myImageEditor.gotoPage(q);r.updateMode()}}return true};f.prototype.OnAcquire=function(){var r=this,q=function(){r._stwain.SelectSource(function(){r._stwain.CloseSource();r._stwain.OpenSource();r._stwain.IfShowUI=true;if(Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer==true){Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer=false;r._stwain.AcquireImage({},function(){Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer=true;if(window.onresize==null){window.onresize=function(){r._stwain.ShowImageEditorEx(-1,-1,-1,-1)}}},function(){if(window.onresize==null){window.onresize=function(){r._stwain.ShowImageEditorEx(-1,-1,-1,-1)}}})}else{r._stwain.AcquireImage()}},function(){a.log("User did not select a source")})};a.Errors.ClearErrorInfo(r._stwain);if(r._IfChangedWithinTheEditor){r.ShowDialogForSaveImage(r._webViewer.GetCurrentIndex(),false,q,q)}else{q()}};f.prototype.OnLoadImage=function(){var s=this;var r=null,q=function(){if(s._stwain._isMobileMode()){var u=document.getElementById(s.dwtMobileFileId);u.value="";u.click();return}var y=function(){a.log("Loaded an image successfully.");if(r!=null){s._stwain.Addon.PDF.SetConvertMode(r)}};var w=function(A,z){a.log("Loading failed with the error: "+z);if(r!=null){s._stwain.Addon.PDF.SetConvertMode(r)}};s._stwain.IfShowFileDialog=true;if(s._stwain.Addon&&s._stwain.Addon.PDF){var t=false,v,x;if(s._stwain._isMobileMode()){x=a.License.checkProductKey(s._stwain,{PDFRasterizer:true,Wasm:true},true)}else{x=a.License.checkProductKey(s._stwain,{PDFRasterizer:true},true)}if(x){r=s._stwain.Addon.PDF.GetConvertMode();v=s._stwain._innerFun("GetAddOnVersion",Dynamsoft.Lib.html5.Funs.makeParams("pdf"));if(a.env.bMac&&v==Dynamsoft.PdfMacVersion){t=true}else{if(a.env.bLinux&&v==Dynamsoft.PdfLinuxVersion){t=true}else{if(v==Dynamsoft.PdfVersion){t=true}}}if(t){s._stwain.Addon.PDF.SetConvertMode(1)}}}s._stwain.LoadImageEx("",5,y,w)};a.Errors.ClearErrorInfo(s._stwain);if(s._IfChangedWithinTheEditor){s.ShowDialogForSaveImage(s._webViewer.GetCurrentIndex(),false,q,q)}else{q()}};f.prototype.OnPrint=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetCurrentIndex()<0){o.output(q,"No image in Buffer");return}q._webViewer._UIView.Print()};f.prototype.OnRemoveAll=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q._stwain.RemoveAllImages()};f.prototype.OnRemove=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q._stwain.RemoveAllSelectedImages()};f.prototype.OnRotateLeft=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}if(q._webViewer._ImgManager.bImageChangedInViewer==true){q._IfSaveChangesOutSideOfTheEditor=true;q._webViewer._ImgManager.bImageChangedInViewer=false;q.__SaveImageInner(false,function(){q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._webViewer._ImgManager.bImageJustChangedInEditor=true;if(q._stwain._isMobileMode()){q.DVSRotate(270);q.UpdateInfo()}else{q._stwain.RotateLeft(q._webViewer.GetCurrentIndex())}q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();q.updateButtons()})}else{q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._IfSaveChangesOutSideOfTheEditor=false;q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();if(q._stwain._isMobileMode()){q.DVSRotate(270);q.UpdateInfo()}else{q._stwain.RotateLeft(q._webViewer.GetCurrentIndex())}}q.updateMode()};f.prototype.RotateEx=function(q,s,r){var t=this;if(t._webViewer.GetHowManyImagesInBuffer()<=0){o.output(t,"No image in Buffer");return}if(typeof q==="undefined"||typeof s==="undefined"||typeof r==="undefined"){alert(n.CustomizableDisplayInfo.errorMessages.insufficientParas)}else{if(t._webViewer._ImgManager.bImageChangedInViewer==true){t._IfSaveChangesOutSideOfTheEditor=true;t._webViewer._ImgManager.bImageChangedInViewer=false;t.__SaveImageInner(false,function(){t.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();t._webViewer._ImgManager.bImageJustChangedInEditor=true;if(t._stwain._isMobileMode()){t.DVSRotateEx(q,s,r);t.UpdateInfo()}else{t._stwain.RotateEx(t._webViewer.GetCurrentIndex(),q,s,r)}t._IfChangedWithinTheEditor=true;t.iChangedIndex=t._webViewer.GetCurrentIndex();t.updateButtons()})}else{t.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();t._IfSaveChangesOutSideOfTheEditor=false;t._webViewer._ImgManager.bImageJustChangedInEditor=true;t._IfChangedWithinTheEditor=true;t.iChangedIndex=t._webViewer.GetCurrentIndex();if(t._stwain._isMobileMode()){t.DVSRotateEx(q,s,r);t.UpdateInfo()}else{t._stwain.RotateEx(t._webViewer.GetCurrentIndex(),q,s,r)}}}t.updateMode()};f.prototype.OnRotate=function(z){var u=this;a.Errors.ClearErrorInfo(u._stwain);if(u._webViewer.GetHowManyImagesInBuffer()<=0){o.output(u,"No image in Buffer");return}a.hide("dynamsoft_ImgSizeEditor");if(!a.get("dynamsoft_RotateAnyAngle")){var B=['<div id="dynamsoft_RotateAnyAngle" class="dynamsoft-dwt-imgSizeEditor" style="display:none; z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_Angle"><b>',b.dlgRotateAnyAngle[0],'</b><input type="text" id="dynamsoft_Angle" style="width:50%;" size="10"/></label></li>','<li><label for="dynamsoft_Angle_InterpolationMethod"><b>',b.dlgRotateAnyAngle[1],'</b>&nbsp;<select size="1" id="dynamsoft_Angle_InterpolationMethod"><option value = ""></option></select></li>','<li><label for="dynamsoft_KeepSize"><b></b>','<input type="checkbox" id="dynamsoft_KeepSize"/>',b.dlgRotateAnyAngle[2],"</label></li></ul>","<div>",'<input id="dynamsoft_btnRotateAnyAngleOK" type="button" value="',b.dlgRotateAnyAngle[3],'"/><span><input id= "dynamsoft_btnCancelRotateAnyAngle" type="button" value="',b.dlgRotateAnyAngle[4],'" /></span></div>',"</div>"];a.one("body").append(B.join(""))}var C=a.get("dynamsoft_Angle_InterpolationMethod");C.options.length=0;C.options.add(new Option("NearestNeighbor",1));C.options.add(new Option("Bilinear",2));C.options.add(new Option("Bicubic",3));C=null;var v=a.get("dynamsoft_btnRotateAnyAngleOK");v.onclick=function(){var G=a.get("dynamsoft_Angle").value;a.get("dynamsoft_Angle").className="";var E=/^\d+$/;if(!E.test(G)||G<=0){a.get("dynamsoft_Angle").className+=" invalid";a.get("dynamsoft_Angle").focus();alert(n.CustomizableDisplayInfo.errorMessages.invalidAngle);return}var F=a.get("dynamsoft_KeepSize");var D=F.checked;u.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();var x=parseInt(G);var y=u.RotateEx(x,D,a.get("dynamsoft_Angle_InterpolationMethod").selectedIndex+1);if(u._stwain.ErrorCode==0){a.hide("dynamsoft_RotateAnyAngle");return}};var t=a.get("dynamsoft_btnCancelRotateAnyAngle");t.onclick=function(){a.hide("dynamsoft_RotateAnyAngle")};var r=a.get("dynamsoft_RotateAnyAngle");a.toggle("dynamsoft_RotateAnyAngle");var s=z.srcElement||z.target;var w=s.y;if(!w){w=s.offsetTop+1}var A=s.x;if(!A){A=s.offsetLeft+1}if(u.UIEditor&&u.UIEditor.nodeName=="DIV"){r.style.top=z.clientY+document.documentElement.scrollTop+"px";r.style.left=z.clientX+document.documentElement.scrollLeft+"px"}else{var q=m.getElementById(u.UIEditor);r.style.top=w+s.offsetHeight+o.getTop(q)+"px";r.style.left=A+o.getLeft(q)+"px"}a.get("dynamsoft_Angle").value="45"};f.prototype.OnRotateRight=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}if(q._webViewer._ImgManager.bImageChangedInViewer==true){q._IfSaveChangesOutSideOfTheEditor=true;q._webViewer._ImgManager.bImageChangedInViewer=false;q.__SaveImageInner(false,function(){q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(q._stwain._isMobileMode()){q.DVSRotate(90);q.UpdateInfo()}else{q._stwain.RotateRight(q._webViewer.GetCurrentIndex())}q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();q.updateButtons()})}else{q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._IfSaveChangesOutSideOfTheEditor=false;q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();if(q._stwain._isMobileMode()){q.DVSRotate(90);q.UpdateInfo()}else{q._stwain.RotateRight(q._webViewer.GetCurrentIndex())}}q.updateMode()};f.prototype.OnDeskew=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}if(q._webViewer._ImgManager.bImageChangedInViewer==true){q._IfSaveChangesOutSideOfTheEditor=true;q._webViewer._ImgManager.bImageChangedInViewer=false;q.__SaveImageInner(false,function(){q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._webViewer._ImgManager.bImageJustChangedInEditor=true;if(q._stwain._isMobileMode()){q.DVSSkewAngle();return}else{q.RotateEx(q._stwain.GetSkewAngle(q._webViewer.GetCurrentIndex()),true,1)}q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();q.updateButtons()})}else{q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._IfSaveChangesOutSideOfTheEditor=false;q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();if(q._stwain._isMobileMode()){q.DVSSkewAngle()}else{q.RotateEx(q._stwain.GetSkewAngle(q._webViewer.GetCurrentIndex()),true,1)}}};f.prototype.OnCrop=function(){var s=this;a.Errors.ClearErrorInfo(s._stwain);var q,r=a.one(".ds-dwt-ui-icon-cropImage");if(r&&r.getEL()){s.Crop()}};f.prototype.Crop=function(){var w=this;if(w._webViewer.GetHowManyImagesInBuffer()<=0){o.output(w,"No image in Buffer");return}var t=w.actualSelectedCanvasAreas;if(t.length!=2){o.output(w,"No area selected for cropping");return}else{var s=t[1];var v=s.left;var u=s.top;var r=s.right;var q=s.bottom;if(parseInt(v)-parseInt(r)!=0&&parseInt(u)-parseInt(q)!=0){if(w._webViewer._ImgManager.bImageChangedInViewer==true){w._IfSaveChangesOutSideOfTheEditor=true;w._webViewer._ImgManager.bImageChangedInViewer=false;w.__SaveImageInner(false,function(){w.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(w._stwain._isMobileMode()){w.DVSCrop(parseInt(v),parseInt(u),parseInt(r),parseInt(q));w.UpdateInfo()}else{w._stwain.Crop(w._webViewer.GetCurrentIndex(),parseInt(v),parseInt(u),parseInt(r),parseInt(q))}w._webViewer._ImgManager.bImageJustChangedInEditor=true;w.__SetCropButtonGrey(true);w.__SetEraseButtonGrey(true);w._IfChangedWithinTheEditor=true;w.iChangedIndex=w._webViewer.GetCurrentIndex();w.updateButtons()})}else{w.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();w._IfSaveChangesOutSideOfTheEditor=false;w._webViewer._ImgManager.bImageJustChangedInEditor=true;w._IfChangedWithinTheEditor=true;w.iChangedIndex=w._webViewer.GetCurrentIndex();if(w._stwain._isMobileMode()){w.DVSCrop(parseInt(v),parseInt(u),parseInt(r),parseInt(q));w.UpdateInfo()}else{w._stwain.Crop(w._webViewer.GetCurrentIndex(),parseInt(v),parseInt(u),parseInt(r),parseInt(q))}w.__SetCropButtonGrey(true);w.__SetEraseButtonGrey(true)}w.updateMode()}}};f.prototype.OnErase=function(){var s=this,r,q=a.one(".ds-dwt-ui-icon-erase");a.Errors.ClearErrorInfo(s._stwain);if(q&&q.getEL()){s.Erase()}};f.prototype.Erase=function(){var v=this,s=false;if(v._webViewer.GetHowManyImagesInBuffer()<=0){o.output(v,"No image in Buffer");return}var u=v.actualSelectedCanvasAreas;if(u.length==1){o.output(v,"No area selected for erasing");return}if(v._webViewer._ImgManager.bImageChangedInViewer==true){v._IfSaveChangesOutSideOfTheEditor=true;v._webViewer._ImgManager.bImageChangedInViewer=false;v.__SaveImageInner(false,function(){for(var C=1;C<u.length;C++){var B=u[C];var E=B.left;var D=B.top;var A=B.right;var z=B.bottom;if(parseInt(E)-parseInt(A)!=0&&parseInt(D)-parseInt(z)!=0){v.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(v._stwain._isMobileMode()){v.DVSErase(parseInt(E),parseInt(D),parseInt(A),parseInt(z));v.UpdateInfo()}else{v._stwain.CutFrameToClipboard(v._webViewer.GetCurrentIndex(),parseInt(E),parseInt(D),parseInt(A),parseInt(z))}v._webViewer._ImgManager.bImageJustChangedInEditor=true;v._IfChangedWithinTheEditor=true;v.iChangedIndex=v._webViewer.GetCurrentIndex();v.updateButtons();s=true}}v.__SetEraseButtonGrey(s);v.__SetCropButtonGrey(s)})}else{v._IfSaveChangesOutSideOfTheEditor=false;v._IfChangedWithinTheEditor=true;v.iChangedIndex=v._webViewer.GetCurrentIndex();for(var t=1;t<u.length;t++){var x=u[t];var r=x.left;var w=x.top;var y=x.right;var q=x.bottom;if(parseInt(r)-parseInt(y)!=0&&parseInt(w)-parseInt(q)!=0){v.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(v._stwain._isMobileMode()){v.DVSErase(parseInt(r),parseInt(w),parseInt(y),parseInt(q));v.UpdateInfo()}else{v._stwain.CutFrameToClipboard(v._webViewer.GetCurrentIndex(),parseInt(r),parseInt(w),parseInt(y),parseInt(q))}v._webViewer._ImgManager.bImageJustChangedInEditor=true;v._IfChangedWithinTheEditor=true;v.iChangedIndex=v._webViewer.GetCurrentIndex();s=true}}v.__SetEraseButtonGrey(s);v.__SetCropButtonGrey(s)}v.updateMode()};f.prototype.ChangeImageSize=function(r,q,s){var t=this;if(t._webViewer.GetHowManyImagesInBuffer()<=0){o.output(t,"No image in Buffer");return}if(t._webViewer._ImgManager.bImageChangedInViewer==true){t._IfSaveChangesOutSideOfTheEditor=true;t._webViewer._ImgManager.bImageChangedInViewer=false;t.__SaveImageInner(false,function(){t.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();t._webViewer._ImgManager.bImageJustChangedInEditor=true;if(t._stwain._isMobileMode()){t.DVSChangeImageSize(r,q,s);t.UpdateInfo()}else{t._stwain.ChangeImageSize(t._webViewer.GetCurrentIndex(),r,q,s)}t._IfChangedWithinTheEditor=true;t.iChangedIndex=t._webViewer.GetCurrentIndex();t.updateButtons()})}else{t.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();t._IfSaveChangesOutSideOfTheEditor=false;t._webViewer._ImgManager.bImageJustChangedInEditor=true;t._IfChangedWithinTheEditor=true;t.iChangedIndex=t._webViewer.GetCurrentIndex();if(t._stwain._isMobileMode()){t.DVSChangeImageSize(r,q,s);t.UpdateInfo()}else{t._stwain.ChangeImageSize(t._webViewer.GetCurrentIndex(),r,q,s)}}t.updateMode()};f.prototype.OnChangeImageSize=function(E){var A=this;a.Errors.ClearErrorInfo(A._stwain);if(A._webViewer.GetHowManyImagesInBuffer()<=0){o.output(A,"No image in Buffer");return}a.hide("dynamsoft_RotateAnyAngle");if(!a.get("dynamsoft_ImgSizeEditor")){var G=['<div id="dynamsoft_ImgSizeEditor" class="dynamsoft-dwt-imgSizeEditor" style="display:none;z-index: 99999;">',"<ul>",'<li><label for="dynamsoft_img_height"><b>',b.dlgChangeImageSize[0],'</b><input type="text" id="dynamsoft_img_height" style="width:50%;" size="10"/>pixel</label></li>','<li><label for="dynamsoft_img_width"><b>',b.dlgChangeImageSize[1],'</b>&nbsp;<input type="text" id="dynamsoft_img_width" style="width:50%;" size="10"/>pixel</label></li>',"<li>",b.dlgChangeImageSize[2],'<select size="1" id="dynamsoft_InterpolationMethod"><option value = ""></option></select></li>',"</ul>","<div>",'<input id="dynamsoft_btnChangeImageSizeOK" type="button" value="',b.dlgChangeImageSize[3],'"/><span><input id= "dynamsoft_btnCancelChange" type="button" value="',b.dlgChangeImageSize[4],'"/></span></div>',"</div>"];a.one("body").append(G.join(""))}var H=a.get("dynamsoft_InterpolationMethod");H.options.length=0;H.options.add(new Option("NearestNeighbor",1));H.options.add(new Option("Bilinear",2));H.options.add(new Option("Bicubic",3));H=null;var s=a.get("dynamsoft_btnChangeImageSizeOK");s.onclick=function(){var K=a.get("dynamsoft_img_width").value,x=a.get("dynamsoft_img_height").value;a.get("dynamsoft_img_width").className="";a.get("dynamsoft_img_height").className="";var J=/^\d+$/;if(!J.test(x)||x<=0){a.get("dynamsoft_img_height").className+=" invalid";a.get("dynamsoft_img_height").focus();alert(n.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth);return}if(!J.test(K)||K<=0){a.get("dynamsoft_img_width").className+=" invalid";a.get("dynamsoft_img_width").focus();alert(n.CustomizableDisplayInfo.errorMessages.invalidHeightOrWidth);return}var y=A.ChangeImageSize(K,x,a.get("dynamsoft_InterpolationMethod").selectedIndex+1);if(A._stwain.ErrorCode==0){a.hide("dynamsoft_ImgSizeEditor");return}};var C=a.get("dynamsoft_btnCancelChange");C.onclick=function(){a.hide("dynamsoft_ImgSizeEditor")};var t=a.get("dynamsoft_ImgSizeEditor"),I;a.toggle("dynamsoft_ImgSizeEditor");var u=E.srcElement||E.target;var D=u.y;if(!D){D=u.offsetTop+1}var F=u.x;if(!F){F=u.offsetLeft+1}if(A.UIEditor&&A.UIEditor.nodeName=="DIV"){t.style.top=E.clientY+document.documentElement.scrollTop+"px";t.style.left=E.clientX+document.documentElement.scrollLeft+"px"}else{var r=m.getElementById(A.UIEditor);t.style.top=D+u.offsetHeight+o.getTop(r)+"px";t.style.left=F+o.getLeft(r)+"px"}var B=A._webViewer.GetCurrentIndex();var w=A.getImageManager().convertClientIndexToServerId(B);if(w==-1){return false}I=A._webViewer._UIView.mapModelImageControl[w];if(I){if(A._stwain._isMobileMode()){var q,z=0,v=0;q=A.GetRealTimeMetadataByIndex();if(q&&q.width){z=q.width}if(q&&q.height){v=q.height}a.get("dynamsoft_img_width").value=parseInt(z);a.get("dynamsoft_img_height").value=parseInt(v)}else{a.get("dynamsoft_img_width").value=parseInt(A.getImageManager().GetImageWidth(B));a.get("dynamsoft_img_height").value=parseInt(A.getImageManager().GetImageHeight(B))}return true}return false};f.prototype.OnFlip=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}if(q._webViewer._ImgManager.bImageChangedInViewer==true){q._IfSaveChangesOutSideOfTheEditor=true;q._webViewer._ImgManager.bImageChangedInViewer=false;q.__SaveImageInner(false,function(){q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(q._stwain._isMobileMode()){q.DVSFlip();q.UpdateInfo()}else{q._stwain.Flip(q._webViewer.GetCurrentIndex())}q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();q.updateButtons()})}else{q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._IfSaveChangesOutSideOfTheEditor=false;q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();if(q._stwain._isMobileMode()){q.DVSFlip();q.UpdateInfo()}else{q._stwain.Flip(q._webViewer.GetCurrentIndex())}}q.updateMode()};f.prototype.OnMirror=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}if(q._webViewer._ImgManager.bImageChangedInViewer==true){q._IfSaveChangesOutSideOfTheEditor=true;q._webViewer._ImgManager.bImageChangedInViewer=false;q.__SaveImageInner(false,function(){q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();if(q._stwain._isMobileMode()){q.DVSMirror();q.UpdateInfo()}else{q._stwain.Mirror(q._webViewer.GetCurrentIndex())}q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();q.updateButtons()})}else{q.bCouldBeTimeConsuming=true;Dynamsoft.Lib.showMask();q._IfSaveChangesOutSideOfTheEditor=false;q._webViewer._ImgManager.bImageJustChangedInEditor=true;q._IfChangedWithinTheEditor=true;q.iChangedIndex=q._webViewer.GetCurrentIndex();if(q._stwain._isMobileMode()){q.DVSMirror();q.UpdateInfo()}else{q._stwain.Mirror(q._webViewer.GetCurrentIndex())}}q.updateMode()};f.prototype.OnZoomin=function(){var s=this;var q=a.one(".ds-dwt-ui-icon-zoomin-grey");if(q&&q.getEL()){return}a.Errors.ClearErrorInfo(s._stwain);if(s._webViewer.GetHowManyImagesInBuffer()<=0){o.output(s,"No image in Buffer");return}var r=(Math.floor(s.GetZoom()*100*s._webViewer._UIView.zoomInStep)+1);if(!r||(1<r&&r<2501)){s.ZoomIn();s.__SetZoomInButtonEnable(true)}else{alert(n.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);s.__SetZoomInButtonEnable(false)}s.__SetZoomOutButtonEnable(true);s.__SetCropButtonGrey(true);s.__SetEraseButtonGrey(true)};f.prototype.OnOriginalsize=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q.SetZoom(1);q.__SetZoomInButtonEnable(true);q.__SetZoomOutButtonEnable(true);q.__SetCropButtonGrey(true);q.__SetEraseButtonGrey(true);return};f.prototype.OnZoomout=function(){var s=this;var q=a.one(".ds-dwt-ui-icon-zoomout-grey");if(q&&q.getEL()){return}a.Errors.ClearErrorInfo(s._stwain);if(s._webViewer.GetHowManyImagesInBuffer()<=0){o.output(s,"No image in Buffer");return}var r=(Math.floor(s.GetZoom()*100*s._webViewer._UIView.zoomOutStep)-1);if(!r||(1<r&&r<6501)){s.ZoomOut();s.__SetZoomOutButtonEnable(true)}else{alert(n.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut);s.__SetZoomOutButtonEnable(false)}s.__SetZoomInButtonEnable(true);s.__SetCropButtonGrey(true);s.__SetEraseButtonGrey(true)};f.prototype.OnFitPage=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q.SetFitType();q.__SetZoomInButtonEnable(true);q.__SetZoomOutButtonEnable(true);q.__SetCropButtonGrey(true);q.__SetEraseButtonGrey(true)};f.prototype.OnFitWidth=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q.SetFitType("width");q.__SetZoomInButtonEnable(true);q.__SetZoomOutButtonEnable(true);q.__SetCropButtonGrey(true);q.__SetEraseButtonGrey(true)};f.prototype.OnFitHeight=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._webViewer.GetHowManyImagesInBuffer()<=0){o.output(q,"No image in Buffer");return}q.SetFitType("height");q.__SetZoomInButtonEnable(true);q.__SetZoomOutButtonEnable(true);q.__SetCropButtonGrey(true);q.__SetEraseButtonGrey(true);return};f.prototype.OnHand=function(){var r=this,q=EnumDWT_MouseShape.Hand;r.clearSelectedAreas();r.SetMouseSelectInner(q)};f.prototype.OnSelect=function(){var r=this,q=EnumDWT_MouseShape.Crosshair;r.SetMouseSelectInner(q)};f.prototype.OnClicktozoomin=function(){var r=this,q=EnumDWT_MouseShape.Zoom;r.clearSelectedAreas();r.SetMouseSelectInner(q)};f.prototype.SetMouseSelectInner=function(q){var r=this;a.Errors.ClearErrorInfo(r._stwain);if(r._webViewer.GetHowManyImagesInBuffer()<=0){o.output(r,"No image in Buffer");return}r.SetMouseShape(q);r.__EnableMouseShapButtons(q);if(r.bMobile){switch(q){case EnumDWT_MouseShape.Crosshair:r.cursorStatus="rectselect";break;case EnumDWT_MouseShape.Zoom:r.cursorStatus="zoom";break;default:r.cursorStatus="hand"}}else{switch(q){case EnumDWT_MouseShape.Hand:r.cursorStatus="hand";break;case EnumDWT_MouseShape.Zoom:r.cursorStatus="zoom";break;default:r.cursorStatus="rectselect"}}};f.prototype.OnRestore=function(){var r=this;var q=a.one(".ds-dwt-ui-icon-saveImage-grey");if(q&&q.getEL()){return}a.Errors.ClearErrorInfo(r._stwain);if(r._webViewer.GetHowManyImagesInBuffer()<=0){o.output(r,"No image in Buffer");return}r.__RestoreImageInner(-1)};f.prototype.__RestoreImageInner=function(q,v){var w=this,t;if(w.iChangedIndex==-1){w._IfChangedWithinTheEditor=false;if(v){v()}return}if(w._stwain._isMobileMode()){w.Reset();w._IfChangedWithinTheEditor=false;w.iChangedIndex=-1;w.updateButtons();if(v){v()}}else{var r=function(A,z,x){a.log("__RestoreImageInner: "+[A.guid].join(","));if(w._stwain._isMobileMode()){w._webViewer.MobileUpdateImage(A,x)}else{w._webViewer.UpdateImage(A,x)}w._IfChangedWithinTheEditor=false;w.iChangedIndex=-1;var y=A.serverId;if(y==-1){w.updateButtons();if(v){v()}return false}w.updateButtons();if(q==-1){y=w.getImageManager().convertClientIndexToServerId(w._webViewer.GetCurrentIndex());if(y==-1){a.Errors.IndexOutOfRange(w._stwain);if(v){v()}return false}}if(v){v()}};var u=true;if(w._IfChangedWithinTheEditor==true){var s=w.getImageManager().convertClientIndexToServerId(w.iChangedIndex);if(s!=-1){w.OnGetImageFromServerForEdit(w._webViewer._UIView.mapModelImageControl[s],w.iChangedIndex,1,r)}u=false}if(u){w._IfChangedWithinTheEditor=false;if(v){v()}}}};f.prototype.OnGetImageFromServerForEdit=function(s,v,w,r){var u=this,q,y;if(r&&u._webViewer._UIView.BaseUrl){var t=u.getImageManager().convertClientIndexToServerId(v);if(t==-1){return false}if(u._stwain._isMobileMode()){if(w==1){var x=u._webViewer.GetMetaDataByIndex(v);if(x){x.width=u.BackModelImageControl.width;x.height=u.BackModelImageControl.height;x.bitDepth=u.BackModelImageControl.bitDepth;x.resolutionX=u.BackModelImageControl.resolutionX;x.resolutionY=u.BackModelImageControl.resolutionY}s.ticks=Date.now();s.imageUrl=u.BackImageBuffer;r(s,v,{metaData:x})}else{u.DVSSaveTransformResult(r)}}else{q=c.getUrlByAct(u._webViewer._UIView.BaseUrl,t,w);a.ajax({method:"GET",url:q,onSuccess:function(z){s.ticks=Date.now();s.imageUrl=c.getImageUrl(u._webViewer._UIView.BaseUrl,t,-1,-1,s.ticks);s.minImageUrl=c.getImageUrl(u._webViewer._UIView.BaseUrl,t,parseInt(s.iImageControlWidth),parseInt(s.iImageControlHeight),s.ticks);var B=u._webViewer.GetMetaDataByIndex(v);if(B){var A=u._webViewer._UIView.GetDataImageControl(t);if(A&&A.width){B.width=A.width}else{B.width=u._stwain.GetImageWidth(v)}if(A&&A.height){B.height=A.height}else{B.height=u._stwain.GetImageHeight(v)}}r(s,v,B)},onError:function(){}})}}return true};f.prototype.OnSave=function(){var r=this;var q=a.one(".ds-dwt-ui-icon-saveImage-grey");if(q&&q.getEL()){return}a.Errors.ClearErrorInfo(r._stwain);if(r._webViewer.GetHowManyImagesInBuffer()<=0){o.output(r,"No image in Buffer");return}r.__SaveImageInner(true,function(){var s=r.getImageManager().convertClientIndexToServerId(r._webViewer.GetCurrentIndex());if(s==-1){a.Errors.IndexOutOfRange(r._stwain);return false}})};f.prototype.OnClose=function(){var q=this;a.Errors.ClearErrorInfo(q._stwain);if(q._IfChangedWithinTheEditor==true){q.ShowDialogForSaveImage(-1,true);return false}return q.OnCloseInner()};f.prototype.OnCloseInstall=function(){var r=this;if(r._IfChangedWithinTheEditor==false){var q=r._stwain._containerElement;h.DCP_DWT_OnClickCloseInstall(q)}};f.prototype.Reset=function(q){var r=this;return r.myImageEditor.reset()};f.prototype.OnCloseInner=function(q){var t=this;a.Errors.ClearErrorInfo(t._stwain);if(t._IfChangedWithinTheEditor==true){if(q){var r=t._stwain._containerElement;h.DCP_DWT_OnClickCloseInstall(r);a.bChangeImage=0;t.__RestoreImageInner(-1)}else{t.ShowDialogForSaveImage(-1,true);return false}}if(t.UIEditor&&t.bFullScreen==true){if(t.UIEditor.childNodes.length>0){t.UIEditor.parentNode.removeChild(t.UIEditor)}}else{if(t.myImageEditor){t.myImageEditor.unbindView(t.UIEditor)}}t.bShowImageEdit=false;t._webViewer.bShowImageEdit=false;t.bShowImageEditForFullScreen=false;t.CloseShowImageEditor();a.hide("dynamsoft_ImgSizeEditor");a.hide("dynamsoft_RotateAnyAngle");var s;s=a.get("dynamsoft_ImgSizeEditor");if(s){s.parentNode.removeChild(s)}s=a.get("dynamsoft_RotateAnyAngle");if(s){s.parentNode.removeChild(s)}if(Dynamsoft.Lib.dialog.selectsourcedlg){Dynamsoft.Lib.dialog.selectsourcedlg.close()}window.onresize=null;document.body.style.overflow="";if(a.isFunction(t._stwain.__CloseImageEditorUI)){t._stwain.__CloseImageEditorUI()}return t.dispose()};f.prototype.__EnableMouseShapButtons=function(q){var r=this;r.ChangeButtonClass("hand","ds-dwt-ui-icon-hand");r.ChangeButtonClass("select","ds-dwt-ui-icon-select");r.ChangeButtonClass("clicktozoomin","ds-dwt-ui-icon-clicktozoomin");if(q==EnumDWT_MouseShape.Hand){r.ChangeButtonClass("hand","dynamsoft-dwt-EditorButton-selected")}else{if(q==EnumDWT_MouseShape.Crosshair){r.ChangeButtonClass("select","dynamsoft-dwt-EditorButton-selected")}else{if(q==EnumDWT_MouseShape.Zoom){r.ChangeButtonClass("clicktozoomin","dynamsoft-dwt-EditorButton-selected")}}}};f.prototype.click=function(q){var r=this;a.hide("dynamsoft_ImgSizeEditor");a.hide("dynamsoft_RotateAnyAngle")};f.prototype.imageClick=function(q,r){var s=this;s.UpdateInfo()};f.prototype.pageAreaSelected=function(v,r){var x=this;var s=1;if(r&&r.length>0){var u=r[r.length-1];if(u.index){s=parseInt(u.index)+1}if(s>0&&s<x.actualSelectedCanvasAreas.length){x.actualSelectedCanvasAreas[s]={left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height}}else{if(s==x.actualSelectedCanvasAreas.length){x.actualSelectedCanvasAreas.push({left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height})}}var w,q,t;if(x.actualSelectedCanvasAreas.length==2&&u.width>0&&u.height>0){x.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage");x.ChangeButtonClass("cut","ds-dwt-ui-icon-erase")}else{x.__SetCropButtonGrey(false);x.__SetEraseButtonGrey(false)}}};f.prototype.pageAreaUnselected=function(q){var r=this;r.actualSelectedCanvasAreas=[{left:0,top:0,right:0,bottom:0}];r.ChangeButtonClass("crop","ds-dwt-ui-icon-cropImage-grey");r.ChangeButtonClass("cut","ds-dwt-ui-icon-erase-grey")};f.prototype.onDrop=function(q){var r=this;r._webViewer.dropEvent(q)};f.prototype.getImageManager=function(){var q=this;return q._webViewer._ImgManager};a.UI=a.UI||{};a.UI.ImageEditorInner=f});Dynamsoft.Ready(function(p,i){var h=Dynamsoft;if(!p.product.bHTML5Edition){return}var A=document,v=p.DOM,g=window,f=Dynamsoft.WebTwainEnv,r=p.html5.Funs.DEF,q=p.html5.Funs2,j="1px solid rgb(204, 204, 204)",l="rgb(255, 255, 255)",e="transparent",a="1px solid rgb(238, 238, 238)",u="rgb(239, 246, 253)",n="1px solid rgb(238, 238, 238)",b="rgb(251, 236, 136)",c="1px solid rgb(125,162,206)",x="rgb(199, 222, 252)",k="rgb(42, 29, 43)",m=["topPageChanged","click","rightclick","dblclick","mousemove","pageAreaSelected","pageAreaUnselected","dragdone","onDrop","bufferChanged","pageChange"],z={toolbars:{header:false,topMenu:false,asideMenu:false,bottomMenu:false},groups:{},buttons:{},thumbnail:{showThumbnailControl:false,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,allowKeyboardControl:true,allowPageDragging:true,allowResizing:false,showPageNumber:false,border:"",background:l,pageBackground:e,pageBorder:a,hoverPageBackground:u,hoverPageBorder:n,placeholderBackground:b,selectedPageBorder:c,selectedPageBackground:x},canvasConfig:{canvasMouseShape:"crosshair",canvasBackground:l,canvasBorder:"",selectedPageBorder:c,pageBorder:a,pageMargin:10,pageBackground:e,selectedPageBackground:x,hoverPageBorder:n,hoverPageBackground:u,placeholderBackground:b,allowPageDragging:true,showPageNumber:false,columns:1,rows:1,scrollDirection:"vertical"},showSidebar:false,showMain:true,showViewer:true,sidebarWidth:"180",outerBorder:j,topMenuBorder:"",selectedAreaBorderColor:k,selectionRectAspectRatio:0,ifAutoScroll:true,useOuterDrop:true,allowSlide:true},y={background:"#434246",topMenuBorder:"",innerBorder:"",promptToSaveChange:true,buttons:f.CustomizableDisplayInfo.buttons,dialogText:f.CustomizableDisplayInfo.dialogText},t={showThumbnail:false,location:"horizontal",sequence:-1,size:"30%",columns:1,rows:3,scrollDirection:"vertical",pageMargin:10,border:"",allowKeyboardControl:true,allowPageDragging:true,allowResizing:false,pageBackground:e,pageBorder:a,hoverPageBackground:u,hoverPageBorder:n,placeholderBackground:b},d={isFunction:function(B){return B&&typeof(B)==="function"},addClass:function(C,B){var D=p.one(C);if(D&&D.length>0){D.addClass(B)}},removeClass:function(C,B){var D=p.one(C);if(D&&D.length>0){D.removeClass(B)}},output:function(C,B){if(Dynamsoft.WebTwainEnv.Debug){p.log(B)}},getTop:function(B){var C=B.offsetTop;if(B.offsetParent!=null){C+=d.getTop(B.offsetParent)}return C},getLeft:function(B){var C=B.offsetLeft;if(B.offsetParent!=null){C+=d.getLeft(B.offsetParent)}return C}};p._safePromptCustomMsg(function(){y.buttons=f.CustomizableDisplayInfo.buttons;y.dialogText=f.CustomizableDisplayInfo.dialogText});function o(E,C,B){var D=this;D._ImgManager=E;D._stwain=E._stwain;D._UIView=B;D._currentTag="";D.bShowImageEdit=false;D.acceptDrop=true;D.ifWebviewerInit=false;D._Init(C);if(p.UI.DWTViewer&&Dynamsoft.WebTwainEnv.UseDefaultViewer){D._stwain.Viewer=new p.UI.DWTViewer(D,E)}}o.prototype._Init=function(B){var F=this;if(B.Container&&(p.isNodeList(B.Container)||(p.isArray(B.Container)&&B.Container.length>0))){var E=B.Container[0];if(E){F.containerElement=E}else{F.containerElement=""}}else{F.containerElement=""}if(F.mydvs){if(F.containerElement!=""){F.BindView(F.containerElement);F.show()}return}F.initWidth=B.Width;F.initHeight=B.Height;var D=z;D.width=F.initWidth;D.height=F.initHeight;if(!F._stwain._isPC()){D.canvasConfig.canvasMouseShape="pointer"}F.mydvs=new Dynamsoft.ViewModel({uiConfig:D,displayMode:"continuous",fitType:"window",scrollerConfig:{}});F._bindViewUi=false;F.myViewer=F.mydvs.ViewControl.getViewerByUid();if(Dynamsoft.WebTwainEnv.UseDefaultViewer&&F.containerElement){if(F.mydvs.ViewControl){F.mydvs.ViewControl.bindViewUiConstructor(Dynamsoft.ViewUi);F.myViewer.bindView(F.containerElement);F._bindViewUi=true}}if(F.myViewer){if(!F._stwain._isPC()){F.SetOperationMode(0)}else{F.SetOperationMode(1)}}if(F.containerElement){F._InitDVS()}try{if(F.myViewer){if(F.myViewer.bindAreaDetectFunction){F.myViewer.bindAreaDetectFunction(F._stwain._areaDetectCallback)}if(F.myViewer.bindPerspectiveFunction){F.myViewer.bindPerspectiveFunction(F._stwain._perspectiveCallback)}if(F.myViewer.bindLicenseCallback){F.myViewer.bindLicenseCallback(function(){return F._stwain._checkWebcamWasmLicense()})}if(F.myViewer.bindSavePhotoCallback){F.myViewer.bindSavePhotoCallback(function(G){return F._stwain._saveImageCallback(G)})}}}catch(C){}if(F._bindViewUi){F._BindViewerEvents()}else{F.myViewer.on("bufferChanged",function(H,G){if(p.isFunction(F.bufferChanged)){F.bufferChanged(H,G)}})}F._bRegistedLoad=false};o.prototype.BindView=function(C){var E=this,B=false,D;E.OnCloseImageEditor();if(C&&C.nodeName=="DIV"){D=C}else{D=A.getElementById(C)}if(E._bindViewUi==false&&E.mydvs.ViewControl){E.mydvs.ViewControl.bindViewUiConstructor(Dynamsoft.ViewUi);E.myViewer.bindView(E.containerElement);E._bindViewUi=true}if(p.isUndefined(E.myViewer.width)){E.initWidth=100}if(p.isUndefined(E.myViewer.height)){E.initHeight=100}B=E.myViewer.bindView(C);if(!B){p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode);return false}E.myViewer.showViewer=false;E.containerElement=D;E._stwain._containerElement=D;E._stwain._bBindViewer=true;E._InitDVS();E.SetAcceptDrop(true);E.SetAllowSlide(true);E.myViewer.off("bufferChanged");E.resetUISettingsInner();E._BindViewerEvents();E.hide();return B};o.prototype.show=function(){var B=this;if(!B._NouiNotSupport("show")){return false}B.myViewer.showViewer=true;return true};o.prototype.hide=function(){var B=this;if(!B._NouiNotSupport("hide")){return false}B.myViewer.showViewer=false;return true};o.prototype.UnbindView=function(){var C=this,B=false;if(C._stwain&&C._stwain.Addon&&C._stwain.Addon.Camera){if(C._stwain.Addon.Camera.getStatus()!=""){C._stwain.Addon.Camera.closeSource()}}B=C.myViewer.unbindView();if(B){C._bindViewUi=false;C._UnbindViewerEvents();if(C._imageEditor){C._imageEditor.dispose()}if(C._thumbnailViewer){C._thumbnailViewer.dispose()}if(C._customElement){C._customElement.dispose()}C.containerElement=""}else{p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}C._stwain._bBindViewer=false;return B};o.prototype.SetUIView=function(B){var C=this;C._UIView=B};o.prototype._BindViewerEvents=function(){var B=this;if(!B.myViewer){return}B.myViewer.off("bufferChanged");p.each(m,function(C){B.myViewer.on(C,function(E,D){B[C](E,D)})})};o.prototype._UnbindViewerEvents=function(){var B=this;p.each(m,function(C){if(C!="bufferChanged"){B.myViewer.off(C)}})};o.prototype._InitDVS=function(){var C=this,B=false;C.ifWebviewerInit=true;C.myViewer.showHeader=false;C.myViewer.showTopMenu=false;C.myViewer.showFooter=false;C.myViewer.showMain=true;C.myViewer.bOnlyShowThumbnailsView=false;C.myViewer.showThumbnailControl=false;C.myViewer.showLatestPage=true;C.myViewer.minZoom=C._UIView.MIN_ZOOM;C.myViewer.maxZoom=C._UIView.MAX_ZOOM};o.prototype.ShowImageEditor=function(D,C,B,F){var E=this;if(D&&B&&F){y.element=D;y.width=B;y.height=F}else{y.element=undefined;y.width=undefined;y.height=undefined}y.border=E.GetBorder();y.selectionRectAspectRatio=E.GetSelectionRectAspectRatio();E.createImageEditor(y);if(E._stwain._errorCode!=0){E._imageEditor.dispose();E.createImageEditor(y)}E._imageEditor.show();return true};o.prototype.OnCloseImageEditor=function(){var B=this;if(B.bShowImageEdit){if(B._imageEditor){B._imageEditor.dispose()}B.bShowImageEdit=false;B._imageEditor=undefined;B._imageEditorInner=undefined;return true}return false};o.prototype.GetUidByIndex=function(B){var C=this;if(B<0||B>=C.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(C._stwain);return -1}return C.myViewer.getUidByIndex(B)};o.prototype.GetIndexByUid=function(B){var C=this;if(!B||B==""||B==-1){p.Errors.IndexOutOfRange(C._stwain);return -1}return C.myViewer.getIndexByUid(B)};o.prototype.SetMetaDataByIndex=function(C,B){var D=this;if(C<0||C>=D.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(D._stwain);return}return D.myViewer.setMetadataByIndex(C,B)};o.prototype.GetMetaDataByIndex=function(B){var C=this;if(B<0||B>=C.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(C._stwain);return}return C.myViewer.getMetadataByIndex(B)};o.prototype.GetCustomDataByIndex=function(B){var D=this,C;if(B<0||B>=D.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(D._stwain);return}if(p.isArray(B)){C=B[0]}else{C=B}return D.myViewer.getCustomDataByIndex(C)};o.prototype.GetHowManyImagesInBuffer=function(){var B=this;if(!p.isUndefined(B.myViewer.currentPageCount)){return B.myViewer.currentPageCount}else{return 0}};o.prototype.UpdateInfo=function(D,C,B){var E=this;if(C){Dynamsoft.Lib.hideMask()}if(D&&E.bShowImageEdit){if(E._imageEditorInner){E._imageEditorInner.updateMode(B)}}};o.prototype.AppendImage=function(E,J){var H=this,B=E.imageUrl,K=E.minImageUrl,D=E.serverId,F=E.bAppendImage,I=E.index,G,C={};if(J){if(!p.isUndef(J.width)){C.width=J.width}if(!p.isUndef(J.height)){C.height=J.height}if(!p.isUndef(J.bitDepth)){C.bitDepth=J.bitDepth}if(!p.isUndef(J.resolutionX)){C.resolutionX=J.resolutionX}if(!p.isUndef(J.resolutionY)){C.resolutionY=J.resolutionY}}p.log("AppendImage_oriData:"+B);if(F||(F==false&&H.GetHowManyImagesInBuffer()==0)){G=H.mydvs.DataControl.appendSync("file1",[{oriData:B,minData:K,metadata:C,customData:{imageId:D}}]);E.uuid=G[0];H.UpdateInfo(true);return G[0]}else{G=H.mydvs.DataControl.insertSync("file1",[{oriData:B,minData:K,metadata:C,customData:{imageId:D}}],I);E.uuid=G[0];H.UpdateInfo(true);return G[0]}};o.prototype.MobileAppendImage=function(G,B){var H=this,E=G.bAppendImage,C=G.index,F={},D;B.imageId=G.serverId;if(B&&B.metadata){if(!p.isUndef(B.metadata.width)){F.width=B.metadata.width}if(!p.isUndef(B.metadata.imageWidth)){F.width=B.metadata.imageWidth}if(!p.isUndef(B.metadata.height)){F.height=B.metadata.height}if(!p.isUndef(B.metadata.imageHeight)){F.height=B.metadata.imageHeight}if(!p.isUndef(B.metadata.bitDepth)){F.bitDepth=B.metadata.bitDepth}if(!p.isUndef(B.metadata.imageBitDepth)){F.bitDepth=B.metadata.imageBitDepth}if(!p.isUndef(B.metadata.resolutionX)){F.resolutionX=B.metadata.resolutionX}if(!p.isUndef(B.metadata.imageXResolution)){F.resolutionX=B.metadata.imageXResolution}if(!p.isUndef(B.metadata.resolutionY)){F.resolutionY=B.metadata.resolutionY}if(!p.isUndef(B.metadata.imageYResolution)){F.resolutionY=B.metadata.imageYResolution}delete B.metadata}if(B.dataType=="url"||!("srcId" in B)){if("src" in B){G.imageUrl=B.src;delete B.src}if("imageUrl" in B){G.imageUrl=B.imageUrl;delete B.imageUrl}return H.AppendImage(G,F)}if(E==false&&H.GetHowManyImagesInBuffer()==0){D=H.mydvs.DataControl.appendSync("file1",[{oriData:null,minData:null,metadata:F,customData:B}]);G.uuid=D[0];H.UpdateInfo(true);return D[0]}else{D=H.mydvs.DataControl.insertSync("file1",[{oriData:null,minData:null,metadata:F,customData:B}],C);G.uuid=D[0];H.UpdateInfo(true);return D[0]}};o.prototype.UpdateImage=function(H,B){var I=this,C=H.imageUrl,F=H.minImageUrl,D=H.serverId,E=H.uuid,G={};if(B){if(!p.isUndef(B.width)){G.width=B.width}if(!p.isUndef(B.height)){G.height=B.height}if(!p.isUndef(B.bitDepth)){G.bitDepth=B.bitDepth}if(!p.isUndef(B.resolutionX)){G.resolutionX=B.resolutionX}if(!p.isUndef(B.resolutionY)){G.resolutionY=B.resolutionY}}if(!E||E==""||E==-1){p.Errors.IndexOutOfRange(I._stwain);return false}I._UpdateImageInner(E,{oriData:C,minData:F,customData:{imageId:D},metadata:G});I.UpdateInfo(false,true);return E};o.prototype.MobileUpdateImage=function(H,B){var I=this,D=H.index,E=H.uuid,G={},F={};if(!E||E==""||E==-1){p.Errors.IndexOutOfRange(I._stwain);return false}G=I.GetMetaDataByIndex(D);if(G&&"metadata" in B&&B.metadata){if(!p.isUndef(B.metadata.width)){G.width=B.metadata.width}if(!p.isUndef(B.metadata.imageWidth)){G.width=B.metadata.imageWidth}if(!p.isUndef(B.metadata.height)){G.height=B.metadata.height}if(!p.isUndef(B.metadata.imageHeight)){G.height=B.metadata.imageHeight}if(!p.isUndef(B.metadata.bitDepth)){G.bitDepth=B.metadata.bitDepth}if(!p.isUndef(B.metadata.imageBitDepth)){G.bitDepth=B.metadata.imageBitDepth}if(!p.isUndef(B.metadata.resolutionX)){G.resolutionX=B.metadata.resolutionX}if(!p.isUndef(B.metadata.imageXResolution)){G.resolutionX=B.metadata.imageXResolution}if(!p.isUndef(B.metadata.resolutionY)){G.resolutionY=B.metadata.resolutionY}if(!p.isUndef(B.metadata.imageYResolution)){G.resolutionY=B.metadata.imageYResolution}}if(B.dataType=="url"||!("srcId" in B)){if("src" in B){H.imageUrl=B.src}if("imageUrl" in B){H.imageUrl=B.imageUrl}return I.UpdateImage(H,G)}if(B&&B.src&&B.srcId){F=I.myViewer.getCustomDataByIndex(D);if(F){F.src=B.src;F.srcId=B.srcId;if(!p.isUndef(B.imgType)){F.imgType=B.imgType}var C={};if(F){C.customData=F;C.metadata=G;I._UpdateImageInner(E,C)}}I.UpdateInfo(false,true)}return E};o.prototype._UpdateImageInner=function(D,B){var E=this;E.mydvs.DataControl.updateSync(D,B);return;if(E._stwain._isMobileMode()&&E.bShowImageEdit){var C=E.GetIndexByUid(D);if(C>=0){E.GetImageData(D).then(function(G){var F=true;if((E._imageEditorInner&&E._imageEditorInner.BackImageBuffer==G.oriData)||p.isUndefined(E._imageEditorInner)){F=false}E.mydvs.DataControl.updateSync(D,B,F)})}else{E.mydvs.DataControl.updateSync(D,B)}}else{E.mydvs.DataControl.updateSync(D,B)}};o.prototype.RemoveByIndex=function(D){var E=this,C;if(D<0||D>=E.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(E._stwain);return false}if(E.bShowImageEdit&&E._imageEditorInner){if(E._imageEditorInner._IfChangedWithinTheEditor==true){if(E._imageEditorInner.iChangedIndex!=D){if(E._imageEditorInner.iChangedIndex>D){E._imageEditorInner.iChangedIndex--}}else{E._imageEditorInner._IfChangedWithinTheEditor=false;E._imageEditorInner.iChangedIndex=-1;E._imageEditorInner.OnCloseInstall()}}}var B=[];B.push(D);C=E.myViewer.removeSync(B);if(C){E.UpdateInfo(true)}else{p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode)}return C};o.prototype.RemoveAllImages=function(){var C=this,B;if(C.bShowImageEdit&&C._imageEditorInner){if(C._imageEditorInner._IfChangedWithinTheEditor==true){C._imageEditorInner._IfChangedWithinTheEditor=false;C._imageEditorInner.iChangedIndex=-1;C._imageEditorInner.OnCloseInstall()}}B=C.myViewer.removeAllSync();if(B){C.UpdateInfo();if(C.bShowImageEdit&&C._imageEditorInner){C._imageEditorInner.updateMode()}}else{p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.SetCurrentIndex=function(C){var E=this,B=false;if(C<0||C>=E.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(E._stwain);Dynamsoft.Lib.hideMask();return false}var D=/^(\d+)$/;if(!D.test(C)||C<0){p.Errors.MobileServer_InvalidIndex(E._stwain);Dynamsoft.Lib.hideMask();return false}B=E.myViewer.setCurrentIndex(C);if(!B){p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode)}E.UpdateInfo(true,true);return B};o.prototype.OnlySetCurrentIndex=function(C){var D=this,B=false;if(C<0||C>=D.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(D._stwain);return false}B=D.myViewer.setCurrentIndex(C);if(!B){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return B};o.prototype.GetCurrentIndex=function(){var C=this,B=-1;if(C.GetHowManyImagesInBuffer()>0){B=C.myViewer.getCurrentIndex();if(p.isUndef(B)||B<0){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}}return B};o.prototype.SetSelectedindexes=function(C){var D=this,B=false;B=D.myViewer.setSelectedIndexes(C);if(!B){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return B};o.prototype.GetSelectedindexes=function(){var B=this;return B.myViewer.getSelectedIndexes()};o.prototype.GoToPage=function(C){var D=this,B=false;if(C<0||C>=D.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(D._stwain);return false}B=D.myViewer.gotoPage(C);if(!B){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}D.UpdateInfo();return B};o.prototype.SetSelectedImageArea=function(H,G,E,C){var I=this,B=false,D=[];if(!I._NouiNotSupport("setSelectedAreas")){return false}var F={};F.left=H;F.top=G;F.width=E-H;F.height=C-G;D.push(F);B=I.myViewer.setSelectedBoxes(D,false);if(!B){p.Errors.WebviewerError(I._stwain,I.mydvs.Error.errorMessage,I.mydvs.Error.errorCode)}return B};o.prototype.SetSelectionRectAspectRatio=function(B){var C=this;if(!C._NouiNotSupport("selectionRectAspectRatio")){return false}C.myViewer.selectionBoxAspectRatio=B;return true};o.prototype.GetSelectionRectAspectRatio=function(){var B=this;if(!B._NouiNotSupport("selectionRectAspectRatio")){return""}return B.myViewer.selectionBoxAspectRatio};o.prototype.ZoomIn=function(){var C=this,B=false;B=C.myViewer.zoomIn();if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.ZoomOut=function(){var C=this,B=false;B=C.myViewer.zoomOut();if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.SetZoom=function(F,B,E){var D=this,C=false;if(!D._NouiNotSupport("zoom")){return false}if(B&E){C=D.myViewer.zoomTo(F,B,E)}else{C=D.myViewer.zoom=F}if(!C){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return C};o.prototype.GetZoom=function(){var B=this;if(!B._NouiNotSupport("zoom")){return""}return B.myViewer.zoom};o.prototype.SetFitType=function(C){var D=this,B="window";if(!D._NouiNotSupport("fitType")){return false}if(!p.isUndefined(C)){if(C=="width"||C=="height"||C=="window"){B=C}else{p.Errors.InvalidValue(D._stwain);return false}}D.myViewer.fitType=B;return true};o.prototype.GetMouseShape=function(){var D=this,C,B;B=D.GetCursor();switch(B){case"default":C=EnumDWT_MouseShape.Default;break;case"pointer":C=EnumDWT_MouseShape.Hand;break;case"crosshair":C=EnumDWT_MouseShape.Crosshair;break;case"zoom-in":C=EnumDWT_MouseShape.Zoom;break;default:C=EnumDWT_MouseShape.Crosshair}return C};o.prototype.SetMouseShape=function(C){var D=this;var B;switch(C){case EnumDWT_MouseShape.Default:B="default";break;case EnumDWT_MouseShape.Hand:B="pointer";break;case EnumDWT_MouseShape.Crosshair:B="crosshair";break;case EnumDWT_MouseShape.Zoom:B="zoom-in";break;default:B="crosshair"}D.SetCursor(B);return true};o.prototype.SetImageMargin=function(B){var C=this;return C.SetPageMargin(B)};o.prototype.GetImageMargin=function(){var B=this;return B.GetPageMargin()};o.prototype.SetSelectionImageBorderColor=function(C){var E=this,D=C,B;if(Dynamsoft.Lib.isNumber(D)){D=Dynamsoft.Lib.getColor(D)}if(D.indexOf("1px solid")==-1){D="1px solid "+D}return E.SetSelectedPageBorder(D)};o.prototype.GetSelectedPageBorder=function(){var B=this;if(!B._NouiNotSupport("selectedPageBorder")){return""}return B.myViewer.selectedPageBorder};o.prototype.SetSelectedPageBorder=function(B){var C=this;if(!C._NouiNotSupport("selectedPageBorder")){return false}C.myViewer.selectedPageBorder=B;if(C._thumbnailViewer){C.SetThumSelectedPageBorder(B)}return true};o.prototype.GetSelectedPageBackground=function(){var B=this;if(!B._NouiNotSupport("selectedPageBackground")){return""}return B.myViewer.selectedPageBackground};o.prototype.SetSelectedPageBackgroundInner=function(B){var C=this;C.myViewer.selectedPageBackground=B;return true};o.prototype.SetSelectedPageBackground=function(B){var C=this;if(!C._NouiNotSupport("selectedPageBackground")){return false}C.SetSelectedPageBackgroundInner(B);if(C._thumbnailViewer){C.SetThumSelectedPageBackground(B)}return true};o.prototype.GetShowPageNumber=function(){var B=this;if(!B._NouiNotSupport("showPageNumber")){return""}return B.myViewer.showPageNumber};o.prototype.SetShowPageNumberInner=function(B){var C=this;C.myViewer.showPageNumber=B;return true};o.prototype.SetShowPageNumber=function(B){var C=this;if(!C._NouiNotSupport("showPageNumber")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}C.SetShowPageNumberInner(B);if(C._thumbnailViewer){C.SetThumShowPageNumber(B)}return true};o.prototype.SetHoverPageBackground=function(B){var C=this;C.myViewer.hoverPageBackground=B;return true};o.prototype.SetBackground=function(B){var D=this,C=B;if(!D._NouiNotSupport("background")){return false}if(Dynamsoft.Lib.isNumber(C)){C=Dynamsoft.Lib.getColor(C)}D.myViewer.canvasBackground=C;if(D._thumbnailViewer){D.SetThumBackground(C)}return true};o.prototype.GetBackground=function(){var B=this;if(!B._NouiNotSupport("background")){return""}return B.myViewer.canvasBackground};o.prototype.SetViewerBorder=function(B){var D=this;var C="1px solid"+B;return D.SetBorder(C)};o.prototype.SetWidth=function(C){var D=this;if(!D._NouiNotSupport("width")){return false}var B=/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/;if(!B.test(C)||C<=0){p.Errors.MobileServer_InvalidWidth(D._stwain);return false}D.myViewer.width=C;return true};o.prototype.GetWidth=function(){var B=this;if(!B._NouiNotSupport("width")){return""}return B.myViewer.width};o.prototype.SetWidthInner=function(C,D){var E=this;if(D){E.myViewer.width=C}else{if(p.isString(C)&&C.indexOf("%")>=0){var B=p.one("#"+E._stwain._containerID);E.myViewer.width=parseInt(p.css(B,"width")*parseInt(C)/100)}else{E.myViewer.width=C}}return true};o.prototype.GetHeight=function(){var B=this;if(!B._NouiNotSupport("height")){return""}return B.myViewer.height};o.prototype.SetHeight=function(B){var D=this;if(!D._NouiNotSupport("height")){return false}var C=/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/;if(!C.test(B)||B<=0){p.Errors.MobileServer_InvalidHeight(D._stwain);return false}D.myViewer.height=B;return true};o.prototype.GetIdPostfix=function(){var B=this;if(!B._NouiNotSupport("idPostfix")){return""}return B.myViewer.postfix};o.prototype.SetHeightInner=function(B,D){var E=this;if(D){E.myViewer.height=B}else{if(p.isString(B)&&B.indexOf("%")>=0){var C=p.one("#"+E._stwain._containerID);E.myViewer.height=parseInt(p.css(C,"height")*parseInt(B)/100)}else{E.myViewer.height=B}}return true};o.prototype.SwitchImage=function(D,C){var E=this,B=false;if(D<0||D>=E.GetHowManyImagesInBuffer()||C<0||C>=E.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(E._stwain);return false}B=E.myViewer.switchPage(D,C);if(!B){p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode)}return B};o.prototype.MoveImage=function(D,C){var E=this,B=false;if(D<0||D>=E.GetHowManyImagesInBuffer()||C<0||C>=E.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(E._stwain);return false}B=E.myViewer.movePage(D,C);if(!B){p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode)}return B};o.prototype.SetIfSinglePageMode=function(B){var C=this;if(!C._NouiNotSupport("singlePageMode")){return false}if(B){C.myViewer.displayMode="single"}else{C.myViewer.displayMode="continuous"}return true};o.prototype.GetIfSinglePageMode=function(){var B=this;if(!B._NouiNotSupport("singlePageMode")){return false}if(B.myViewer.displayMode=="continuous"){return false}else{return true}};o.prototype.SetAcceptDrop=function(B){var C=this;if(!C._NouiNotSupport("acceptDrop")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}C.acceptDrop=B;return true};o.prototype.GetAcceptDrop=function(){var B=this;if(!B._NouiNotSupport("acceptDrop")){return""}return B.acceptDrop};o.prototype.SetAllowSlide=function(B){var C=this;if(!C._NouiNotSupport("allowSlide")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}C.myViewer.allowSlide=B;return true};o.prototype.GetAllowSlide=function(){var B=this;if(!B._NouiNotSupport("allowSlide")){return""}return B.myViewer.allowSlide};o.prototype.SetViewMode=function(D,C){var F=this,B=false,E="vertical";if(!F._NouiNotSupport("setViewMode")){return false}if(!p.isNumber(D)||!p.isNumber(C)){p.Errors.InvalidValue(F._stwain);return false}if(F._thumbnailViewer){F._thumbnailViewer.hide()}F.clearSelectedAreas();if(D==-1&&C==-1){F.SetIfSinglePageMode(true);C=0-C;D=0-D;B=true}else{if(C<0){E="horizontal";C=0-C}if(D<0){D=0-D}F.myViewer.scrollDirection=E;B=F.myViewer.setViewMode(D,C);if(!B){p.Errors.WebviewerError(F._stwain,F.mydvs.Error.errorMessage,F.mydvs.Error.errorCode)}F.SetIfSinglePageMode(false);if(F.GetCursor()=="zoom-in"){F.SetCursor("crosshair")}}return B};o.prototype.RemoveImageTag=function(D){var E=this,C,B=false;if(D<0||D>=E.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(E._stwain);return false}C=E.GetUidByIndex(D);if(C&&C!=""&&C!=-1){B=E.mydvs.Tag.removePageTag(C);if(!B){p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode)}return B}else{p.Errors.WebviewerError(E._stwain,E.mydvs.Error.errorMessage,E.mydvs.Error.errorCode);return false}};o.prototype.FilterImagesByTag=function(C,E,D){var F=this,B=false;if(!C||C.length==0){F._currentTag="";B=F.mydvs.File.openAll();if(B){F.mydvs.Tag.setDefaultTag("");if(p.isFunction(E)){E()}}else{p.Errors.WebviewerError(F._stwain,F.mydvs.Error.errorMessage,F.mydvs.Error.errorCode);if(p.isFunction(D)){D(F.mydvs.Error.errorCode,F.mydvs.Error.errorMessage)}}}else{F._currentTag=C;B=F.mydvs.Tag.openTag(C);if(B){if(p.isFunction(E)){E()}}else{p.Errors.WebviewerError(F._stwain,F.mydvs.Error.errorMessage,F.mydvs.Error.errorCode);if(p.isFunction(D)){D(F.mydvs.Error.errorCode,F.mydvs.Error.errorMessage)}}}return true};o.prototype.ClearFilter=function(){var C=this,B=false;C._currentTag="";B=C.mydvs.File.openAll();if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return true};o.prototype.GetTagContents=function(C){var F=this,B=false,E=[],D;if(C.length>0){B=F.mydvs.Tag.getTagContents(C)}else{B=F.mydvs.DataControl.getAllContents()}if(!B){p.Errors.WebviewerError(F._stwain,F.mydvs.Error.errorMessage,F.mydvs.Error.errorCode)}return B};o.prototype.SetDefaultTag=function(C){var D=this,B=false;D._currentTag=C;D.mydvs.Tag.addTag(C);B=D.mydvs.Tag.setDefaultTag(C);if(!B){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return B};o.prototype.AddImageTag=function(F,D){var G=this,B,E;G.mydvs.Tag.addTag(D);G._currentTag=D;for(var C=0;C<F.length;C++){B=F[C];if(B>=0){E=G.GetUidByIndex(B);if(E&&E!=""&&E!=-1){G.mydvs.Tag.addPageTag(E,D)}}}return true};o.prototype.GetCurrentTag=function(){var C=this,B;return C._currentTag};o.prototype.RenameTag=function(C,E){var D=this,B=false;D._currentTag=E;B=D.mydvs.Tag.renameTag(C,E);if(!B){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}else{D.mydvs.Tag.setDefaultTag(E)}return B};o.prototype.OverlayRectangle=function(K,H,G,J,D,C,E){var I=this,B=false,F=C;if(K<0||K>=I.GetHowManyImagesInBuffer()){p.Errors.IndexOutOfRange(I._stwain);return false}if(p.isNumber(F)){F=p.getColor(F)}B=I.myViewer.overlayRectangle(K,H,G,(J-H),(D-G),F,E);if(!B){p.Errors.WebviewerError(I._stwain,I.mydvs.Error.errorMessage,I.mydvs.Error.errorCode)}return B};o.prototype.SetOperationMode=function(C){var D=this,B;D.myViewer.operationMode=C};o.prototype.GetIfShowVideoContainer=function(){var B=this;return B.myViewer.showVideoContainer};o.prototype.ShowVideoContainer=function(C){var D=this,B;if(D.myViewer.showVideoContainer==C){return true}if(D._thumbnailViewer){if(C){D.OldShowThumbnail=D.myThumbnailViewer.showThumbnail;D.myThumbnailViewer.showThumbnail=false}else{D.myThumbnailViewer.showThumbnail=D.OldShowThumbnail}}D.myViewer.showVideoContainer=C;return true};o.prototype.UpdateVideoContainer=function(C){var D=this,B;B=D.myViewer.updateVideoContainer(C);if(!B){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return B};o.prototype.GetImageData=function(B){var C=this;return C.mydvs.DataControl.getData(B)};o.prototype.GetMinPageData=function(B){var C=this;if(C._imageEditorInner){return C._imageEditorInner.myImageEditor.getMinPageData()}return NaN};o.prototype.SetLogLevel=function(B){var C=this;C.mydvs.Log.setLogLevel(B)};o.prototype.SetLogFunc=function(B){var C=this;C.mydvs.Log.setLogFunc(B)};o.prototype.SetThumLocation=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.location")){return false}if(C.myThumbnailViewer){switch(B){case"left":C.myThumbnailViewer.location="horizontal";C.myThumbnailViewer.sequence=-1;break;case"right":C.myThumbnailViewer.location="horizontal";C.myThumbnailViewer.sequence=1;break;case"top":C.myThumbnailViewer.location="vertical";C.myThumbnailViewer.sequence=-1;break;case"bottom":C.myThumbnailViewer.location="vertical";C.myThumbnailViewer.sequence=1;break;default:C.myThumbnailViewer.location="horizontal";C.myThumbnailViewer.sequence=-1}return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumLocation=function(){var C=this,B="left";if(!C._NouiNotSupport("ThumbnailViewer.location")){return false}if(C.myThumbnailViewer){if(C.myThumbnailViewer.location=="vertical"){if(C.myThumbnailViewer.sequence>0){B="bottom"}else{B="top"}}else{if(C.myThumbnailViewer.sequence>0){B="right"}else{B="left"}}return B}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return""}};o.prototype.SetThumSize=function(B){var D=this;if(!D._NouiNotSupport("ThumbnailViewer.size")){return false}var C=/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/;if(!C.test(B)||B<0){p.Errors.InvalidValue(D._stwain);return false}if(D.myThumbnailViewer){D.myThumbnailViewer.size=B;return true}else{if(D.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(D._stwain)}else{p.Errors.ThumbnailViewerNotExist(D._stwain)}return false}};o.prototype.GetThumSize=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.size")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.size}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return 0}};o.prototype.SetThumScrollDirection=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.scrollDirection")){return false}if(B!="horizontal"){B="vertical"}if(C.myThumbnailViewer){C.myThumbnailViewer.scrollDirection=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumScrollDirection=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.scrollDirection")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.scrollDirection}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumShowPageNumber=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.showPageNumber")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}if(C.myThumbnailViewer){C.myThumbnailViewer.showPageNumber=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumShowPageNumber=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.showPageNumber")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.showPageNumber}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return -1}};o.prototype.SetThumMargin=function(B){var D=this;if(!D._NouiNotSupport("ThumbnailViewer.margin")){return false}var C=/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/;if(!C.test(B)||B<0){p.Errors.InvalidValue(D._stwain);return false}if(D.myThumbnailViewer){D.myThumbnailViewer.pageMargin=B;return true}else{if(D.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(D._stwain)}else{p.Errors.ThumbnailViewerNotExist(D._stwain)}return false}};o.prototype.GetThumMargin=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.margin")){return false}if(B.myThumbnailViewer){if(B.myThumbnailViewer.columns==B.myThumbnailViewer.rows&&B.myThumbnailViewer.rows==1){return 0}else{return B.myThumbnailViewer.pageMargin}}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return 0}};o.prototype.SetThumBorder=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.border")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.border=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumBorder=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.border")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.border}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumBackground=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.background")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.background=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumBackground=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.background")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.background}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumPageBackground=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.pageBackground")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.pageBackground=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumPageBackground=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.pageBackground")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.pageBackground}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumPageBorder=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.pageBorder")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.pageBorder=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumPageBorder=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.pageBorder")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.pageBorder}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumHoverBackground=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.hoverPageBackground")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.hoverPageBackground=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return""}};o.prototype.GetThumHoverBackground=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.hoverPageBackground")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.hoverPageBackground}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumHoverBorder=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.hoverPageBorder")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.hoverPageBorder=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumHoverBorder=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.hoverPageBorder")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.hoverPageBorder}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumPlaceholderBackground=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.placeholderBackground")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.placeholderBackground=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumPlaceholderBackground=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.placeholderBackground")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.placeholderBackground}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumSelectedPageBorder=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.selectedPageBorder")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.selectedPageBorder=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumSelectedPageBorder=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.selectedPageBorder")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.selectedPageBorder}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumSelectedPageBackground=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.selectedPageBackground")){return false}if(C.myThumbnailViewer){C.myThumbnailViewer.selectedPageBackground=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumSelectedPageBackground=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.selectedPageBackground")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.selectedPageBackground}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return""}};o.prototype.SetThumAllowKeyboardControl=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}if(C.myThumbnailViewer){C.myThumbnailViewer.allowKeyboardControl=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumAllowKeyboardControl=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.allowKeyboardControl")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.allowKeyboardControl}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return false}};o.prototype.SetThumAllowDrag=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.allowDrag")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}if(C.myThumbnailViewer){C.myThumbnailViewer.allowPageDragging=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumAllowDrag=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.allowPageDragging")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.allowPageDragging}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return false}};o.prototype.SetThumAllowResize=function(B){var C=this;if(!C._NouiNotSupport("ThumbnailViewer.allowResizing")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}if(C.myThumbnailViewer){C.myThumbnailViewer.allowResizing=B;return true}else{if(C.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(C._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._stwain)}return false}};o.prototype.GetThumAllowResize=function(){var B=this;if(!B._NouiNotSupport("ThumbnailViewer.allowResizing")){return false}if(B.myThumbnailViewer){return B.myThumbnailViewer.allowResizing}else{if(B.bThumbnailDispose){p.Errors.ThumbnailViewerDispose(B._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._stwain)}return false}};o.prototype.render=function(){var B=this;if(!B._NouiNotSupport("render")){return false}return B.myViewer.render()};o.prototype.getUISettings=function(){var C=this;if(!C._NouiNotSupport("getUISettings")){return false}var B=Dynamsoft.Lib.clone(C.myViewer.uiConfig);delete B.tag;delete B.tree;delete B.cropStyle;delete B.thumbnail;return B};o.prototype.resetUISettings=function(){var D=this,B,C={};if(D.resetUISettingsInner()){C=D.getUISettings()}return C};o.prototype.resetUISettingsInner=function(){var F=this,B,D={};if(!F._NouiNotSupport("resetUISetting")){return false}var C=z;C.width=F.initWidth;C.height=F.initHeight;var E=F.myViewer.showViewer;B=F.myViewer.updateUISetting(C);if(!B){p.Errors.WebviewerError(F._stwain,F.mydvs.Error.errorMessage,F.mydvs.Error.errorCode)}else{if(!E){F.hide()}F.SetFitType("window");F.SetIfSinglePageMode(false);if(!F._stwain._isPC()){F.SetOperationMode(0)}else{F.SetOperationMode(1)}F.OnlySetCurrentIndex(F.GetCurrentIndex())}return B};o.prototype.updateUISettings=function(C){var F=this,B,D={};if(!F._NouiNotSupport("updateUISettings")){return false}var E=F.myViewer.showViewer;B=F.myViewer.updateUISetting(C);if(!B){p.Errors.WebviewerError(F._stwain,F.mydvs.Error.errorMessage,F.mydvs.Error.errorCode)}else{if(!E){F.hide()}D=F.getUISettings();if(D.canvasConfig.canvasMouseShape=="crosshair"){F.SetOperationMode(1)}else{F.SetOperationMode(0)}}return D};o.prototype.bindCamera=function(){var C=this,B;if(!Dynamsoft.CameraViewer){p.Errors.CameraRequired(C._stwain);return false}B=C.myViewer.bindCamera(Dynamsoft.CameraViewer);if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.showVideo=function(E,C,F,D){var G=this,B;if(!G._NouiNotSupport("showVideo")){return false}B=G.myViewer.showVideo(E,C,F,D);if(!B){p.Errors.WebviewerError(G._stwain,G.mydvs.Error.errorMessage,G.mydvs.Error.errorCode)}return B};o.prototype.closeVideo=function(){var C=this,B;if(!C._NouiNotSupport("closeVideo")){return false}B=C.myViewer.closeVideo();if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.GetBorder=function(){var B=this;if(!B._NouiNotSupport("border")){return""}return B.myViewer.outerBorder};o.prototype.SetBorder=function(B){var C=this;if(!C._NouiNotSupport("border")){return false}C.myViewer.outerBorder=B;return true};o.prototype.GetInnerBorder=function(){var B=this;if(!B._NouiNotSupport("innerBorder")){return""}return B.myViewer.canvasBorder};o.prototype.SetInnerBorder=function(B){var C=this;if(!C._NouiNotSupport("innerBorder")){return false}C.myViewer.canvasBorder=B;return true};o.prototype.GetSelectedAreaBorderColor=function(){var B=this;if(!B._NouiNotSupport("selectedAreaBorderColor")){return""}return B.myViewer.selectedBoxLineColor};o.prototype.SetSelectedAreaBorderColor=function(B){var C=this;if(!C._NouiNotSupport("selectedAreaBorderColor")){return false}C.myViewer.selectedBoxLineColor=B;return true};o.prototype.GetCursor=function(){var B=this;if(!B._NouiNotSupport("cursor")){return""}return B.myViewer.canvasMouseShape};o.prototype.SetCursor=function(C){var D=this;if(!D._NouiNotSupport("cursor")){return false}if(C=="zoom-in"&&!D.GetIfSinglePageMode()){p.Errors.CursorInvalidMode(D._stwain);return false}var B="default";switch(C){case"default":B="default";D.SetOperationMode(0);break;case"pointer":B="pointer";D.SetOperationMode(0);break;case"crosshair":B="crosshair";D.SetOperationMode(1);break;case"zoom-in":B="zoom-in";D.SetOperationMode(2);break;default:B="crosshair";D.SetOperationMode(1)}D.myViewer.canvasMouseShape=B;return true};o.prototype.GetIfAutoScroll=function(){var B=this;if(!B._NouiNotSupport("ifAutoScroll")){return""}return B.myViewer.showLatestPage};o.prototype.SetIfAutoScroll=function(B){var C=this;if(!C._NouiNotSupport("ifAutoScroll")){return false}if(!p.isBoolean(B)){p.Errors.InvalidValue(C._stwain);return false}C.myViewer.showLatestPage=B;if(C._imageEditorInner){C._imageEditorInner.SetIfAutoScroll()}return true};o.prototype.GetPageMargin=function(){var B=this;if(!B._NouiNotSupport("pageMargin")){return 0}return B.myViewer.pageMargin};o.prototype.SetPageMargin=function(B){var D=this;if(!D._NouiNotSupport("pageMargin")){return false}var C=/^((\d+em)|(\d+px)|(\d+%)|(\d+))$/;if(!C.test(B)||B<0){p.Errors.InvalidValue(D._stwain);return false}D.myViewer.pageMargin=B;return true};o.prototype.setButtonClass=function(B,E){var D=this,C;if(!D._NouiNotSupport("setButtonClass")){return false}C=D.myViewer.setButtonClass(B,E);if(!C){p.Errors.WebviewerError(D._stwain,D.mydvs.Error.errorMessage,D.mydvs.Error.errorCode)}return C};o.prototype.clearSelectedAreas=function(){var C=this,B;if(!C._NouiNotSupport("clearSelectedAreas")){return false}if(C.GetHowManyImagesInBuffer()<=0){return true}B=C.myViewer.clearSelectedBoxes();if(!B){p.Errors.WebviewerError(C._stwain,C.mydvs.Error.errorMessage,C.mydvs.Error.errorCode)}return B};o.prototype.setSelectedAreas=function(C){var G=this,B,E=[],F;if(!G._NouiNotSupport("setSelectedAreas")){return false}if(p.isUndefined(C)||C.length==0){p.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(G._stwain);return false}if(C.length&&C.length>0){for(var D=0;D<C.length;D++){F={};if(!p.isUndefined(C[D])&&!p.isUndefined(C[D].left)&&!p.isUndefined(C[D].top)&&!p.isUndefined(C[D].right)&&!p.isUndefined(C[D].bottom)){if(C[D].left<0||C[D].top<0||C[D].right<0||C[D].bottom<0){continue}F.left=C[D].left;F.top=C[D].top;if((C[D].right-C[D].left)<0||(C[D].bottom-C[D].top)<0){continue}F.width=C[D].right-C[D].left;F.height=C[D].bottom-C[D].top;E.push(F)}}}else{F={};if(!p.isUndefined(C)&&!p.isUndefined(C.left)&&!p.isUndefined(C.top)&&!p.isUndefined(C.right)&&!p.isUndefined(C.bottom)){if(C.left<0||C.top<0||C.right<0||C.bottom<0){p.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(G._stwain);return false}F.left=C.left;F.top=C.top;if((C.right-C.left)<0||(C.bottom-C.top)<0){p.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(G._stwain);return false}F.width=C.right-C.left;F.height=C.bottom-C.top;E.push(F)}}if(E.length==0){p.Errors.MobileServer_InvalidLeftOrTopOrRightOrBottom(G._stwain);return false}B=G.myViewer.setSelectedBoxes(E,true);if(!B){p.Errors.WebviewerError(G._stwain,G.mydvs.Error.errorMessage,G.mydvs.Error.errorCode)}return B};o.prototype._NouiNotSupport=function(B){var C=this;C._stwain._resetErr();if(!C._stwain._isValid()){return false}if(C._stwain._isNoViewer()){C._stwain._nouiNotSupport(B);return false}return true};o.prototype.pageChange=function(C){var F=this,E,B=F.GetHowManyImagesInBuffer();p.log("OnPagination");if(B<=0){p.Errors.NoImage(F._stwain);d.output(F,"No image in Buffer");return}else{if(B==1){return}}var D=/^\d+$/;if(!D.test(C)||C<=0){alert(f.CustomizableDisplayInfo.errorMessages.invalidIndex);return}E=parseInt(C)-1;if(E<0){E=0}else{if(E>=B){E=B-1}}if(E!=F.GetCurrentIndex()){F.go(E)}};o.prototype.first=function(){var D=this,C,B=D.GetHowManyImagesInBuffer();if(!D._NouiNotSupport("first")){return -1}if(B<=0){p.Errors.NoImage(D._stwain);d.output(D,"No image in Buffer");return -1}else{if(B==1){return 0}}C=0;D.go(C);return C};o.prototype.last=function(){var D=this,C,B=D.GetHowManyImagesInBuffer();if(!D._NouiNotSupport("last")){return -1}if(B<=0){p.Errors.NoImage(D._stwain);d.output(D,"No image in Buffer");return -1}else{if(B==1){return 0}}C=B-1;D.go(C);return C};o.prototype.previous=function(){var D=this,C,B=D.GetHowManyImagesInBuffer();if(!D._NouiNotSupport("previous")){return -1}if(B<=0){p.Errors.NoImage(D._stwain);d.output(D,"No image in Buffer");return -1}else{if(B==1){return 0}}C=D.GetCurrentIndex()-1;if(C<0){C=0}D.go(C);return C};o.prototype.next=function(){var D=this,C,B=D.GetHowManyImagesInBuffer();if(!D._NouiNotSupport("next")){return -1}if(B<=0){p.Errors.NoImage(D._stwain);d.output(D,"No image in Buffer");return -1}else{if(B==1){return 0}}C=D.GetCurrentIndex()+1;if(C>=B){C=B-1}D.go(C);return C};o.prototype.go=function(C){var E=this,B,D=C;if(!E._NouiNotSupport("go")){return -1}if(E.GetHowManyImagesInBuffer()<=0){p.Errors.NoImage(E._stwain);d.output(E,"No image in Buffer");return -1}if(E._imageEditorInner){B=E._imageEditorInner.go(C)}else{B=E.__goInner(C);if(!B){D=-1}}return D};o.prototype.__goInner=function(C){var D=this,B;if(typeof(C)!=="undefined"){if(C==-1){p.Errors.IndexOutOfRange(D._stwain);return false}Dynamsoft.Lib.showMask();B=D.SetCurrentIndex(C)}return B};o.prototype.topPageChanged=function(C,B){var D=this;D._UIView.__fireEvent("onTopImageInTheViewChanged",{index:C,bByScrollBar:B})};o.prototype.bufferChanged=function(D){var G=this,L,K=[],I=-1,F=[];for(var E=0;E<G.GetHowManyImagesInBuffer();E++){L=G.GetCustomDataByIndex(E);if(L){K.push(G._stwain.objImageIndexManager.convertServerIdToGuid(L.imageId))}}D.imageIds=K;if(D.currentUid){var H=G.GetIndexByUid(D.currentUid);if(H>=0){L=G.GetCustomDataByIndex(H);if(L){I=G._stwain.objImageIndexManager.convertServerIdToGuid(L.imageId)}}}D.currentId=I;if(D.selectedUids){for(var C=0;C<D.selectedUids.length;C++){var B=D.selectedUids[C];if(B){var J=G.GetIndexByUid(D.selectedUids[C]);if(J>=0){L=G.GetCustomDataByIndex(J);if(L){F.push(G._stwain.objImageIndexManager.convertServerIdToGuid(L.imageId))}}}}}D.selectedIds=F;delete D.uids;delete D.currentUid;delete D.selectedUids;G._UIView.__fireEvent("onBufferChanged",D)};o.prototype.click=function(B){var C=this;C.UpdateInfo(true,false,true);C._UIView.__fireEvent("onMouseClick",{e:B,x:B.imageX,y:B.imageY,index:C.GetCurrentIndex()})};o.prototype.rightclick=function(B){var C=this;C._UIView.__fireEvent("onMouseRightClick",{e:B,x:B.imageX,y:B.imageY,index:C.GetCurrentIndex()})};o.prototype.dblclick=function(B){var C=this;C._UIView.__fireEvent("onMouseDoubleClick",{e:B,x:B.imageX,y:B.imageY,index:C.GetCurrentIndex()})};o.prototype.mousemove=function(B){var C=this;C._UIView.__fireEvent("onMouseMove",{e:B,x:B.imageX,y:B.imageY,index:C.GetCurrentIndex()})};o.prototype.pageAreaSelected=function(D,B){var F=this;var C=1;if(B&&B.length>0){var E=B[B.length-1];if(E.index){C=parseInt(E.index)+1}F._UIView.__fireEvent("onImageAreaSelected",{index:D,left:parseInt(E.x),top:parseInt(E.y),right:parseInt(E.x+E.width),bottom:parseInt(E.y+E.height),areaIndex:C})}};o.prototype.pageAreaUnselected=function(B){var C=this;C._UIView.__fireEvent("onImageAreaDeSelected",B)};o.prototype.dragdone=function(B){var C=this;if(p.isFunction(C._stwain.__OnIndexChangeDragDropDone)){C._stwain.__OnIndexChangeDragDropDone(B)}};o.prototype.RegistLoadCallback=function(B){var C=this;if(!C._bRegistedLoad){C._bRegistedLoad=true}return true};o.prototype.onDrop=function(B){var C=this;if(C.acceptDrop){C.dropEvent(B)}};o.prototype.dropEvent=function(E){var K=this,Q,G,I=null;var L=function(R){if(R){p.html5.Funs2.output(null,R+" was loaded successfully!")}if(I!=null){K._stwain.Addon.PDF.SetConvertMode(I)}};var P=function(S,T,R){if(R){p.html5.Funs2.output(null,R+" failed to load. Error code: "+S+"Error String: "+T)}if(I!=null){K._stwain.Addon.PDF.SetConvertMode(I)}};try{var D=E.dataTransfer.files;for(var H=0;H<D.length;H++){Q=D[H];if(Q.type.length==0){var C,N=Q.name.indexOf(".");if(N>0){C=Q.name.substring(N+1)}switch(C){case"bmp":G=EnumDWT_ImageType.IT_BMP;break;case"jpg":case"jpeg":G=EnumDWT_ImageType.IT_JPG;break;case"tif":case"tiff":G=EnumDWT_ImageType.IT_TIF;break;case"png":G=EnumDWT_ImageType.IT_PNG;break;case"pdf":G=EnumDWT_ImageType.IT_PDF;break;case"jp2":case"j2k":case"j2c":G=EnumDWT_ImageType.IT_J2K;break;default:p.html5.Funs2.output(null,Q.name+" failed to load because the file type is not supported!");G=-1;p.Errors.UnrecognizedExt(K._stwain)}}else{switch(Q.type){case"image/bmp":G=EnumDWT_ImageType.IT_BMP;break;case"image/jpeg":G=EnumDWT_ImageType.IT_JPG;break;case"image/tiff":G=EnumDWT_ImageType.IT_TIF;break;case"image/png":G=EnumDWT_ImageType.IT_PNG;break;case"application/pdf":G=EnumDWT_ImageType.IT_PDF;break;case"image/jp2":G=EnumDWT_ImageType.IT_J2K;break;default:p.html5.Funs2.output(null,Q.name+" failed to load because the file type is not supported!");G=-1;p.Errors.UnrecognizedExt(K._stwain)}}if(G!=-1){p.showProgress(K._stwain,"DropLoading",true);K._stwain._OnPercentDone([0,-1,Dynamsoft.MSG.Loading]);if(K._stwain.Addon&&K._stwain.Addon.PDF){var J=false,B,O;if(K._stwain._isMobileMode()){O=p.License.checkProductKey(K._stwain,{PDFRasterizer:true,Wasm:true},true)}else{O=p.License.checkProductKey(K._stwain,{PDFRasterizer:true},true)}if(O){if(K._stwain._isMobileMode()){J=true}else{I=K._stwain.Addon.PDF.GetConvertMode();B=K._stwain._innerFun("GetAddOnVersion",Dynamsoft.Lib.html5.Funs.makeParams("pdf"));if(p.env.bMac&&B==Dynamsoft.PdfMacVersion){J=true}else{if(p.env.bLinux&&B==Dynamsoft.PdfLinuxVersion){J=true}else{if(B==Dynamsoft.PdfVersion){J=true}}}}if(J){K._stwain.Addon.PDF.SetConvertMode(1)}}}if(K._stwain._isMobileMode()){K._stwain.LoadImageFromBinary(Q,function(){Dynamsoft.Lib.closeProgress()},function(){Dynamsoft.Lib.closeProgress()})}else{var M=new FileReader();M.refFile=D[H];M.readAsDataURL(D[H]);M.onload=function(){var R=this.refFile;K._stwain.__LoadImageFromBytes(R,G,"",true,L,P,0,R.size);this.refFile=null;R=null};M.onerror=function(R){Dynamsoft.Lib.closeProgress();Dynamsoft.Lib.Errors.InvalidFile(K._stwain);K._stwain._errorString=this.error;P({code:K._stwain._errorCode,message:K._stwain._errorString})}}}}}catch(F){p.log(F.stack||F,"error");setTimeout(function(){throw F},0)}};o.prototype.getImageManager=function(){var B=this;return B._ImgManager};o.prototype.on=function(B,D){var C=this;if(B){if(!p.isFunction(D)){p.Errors.CallbackNotAFunction(C._stwain);return}C.myViewer.on(B,D)}};o.prototype.off=function(B,D){var C=this;if(B){if(p.isUndefined(D)){C.myViewer.off(B);if(m.indexOf(B)>=0){C.myViewer.on(B,function(F,E){if(p.isFunction(C[B])){C[B](F,E)}})}}else{if(!p.isFunction(D)){p.Errors.CallbackNotAFunction(C._stwain);return}C.myViewer.off(B,D)}}};o.prototype.createImageEditor=function(B){var C=this;if(!C._NouiNotSupport("createImageEditor")){return NaN}if(!C._imageEditor){if(!B){B=y;B.border=C.GetBorder();B.selectionRectAspectRatio=C.GetSelectionRectAspectRatio()}else{if(p.isUndefined(B.border)){B.border=C.GetBorder()}if(p.isUndefined(B.selectionRectAspectRatio)){B.selectionRectAspectRatio=C.GetSelectionRectAspectRatio()}if(p.isUndefined(B.background)){B.background=y.background}if(p.isUndefined(B.topMenuBorder)){B.topMenuBorder=y.topMenuBorder}if(p.isUndefined(B.innerBorder)){B.innerBorder=y.innerBorder}if(p.isUndefined(B.promptToSaveChange)){B.promptToSaveChange=y.promptToSaveChange}if(p.isUndefined(B.buttons)){B.buttons=y.buttons}if(p.isUndefined(B.dialogText)){B.dialogText=y.dialogText}}C._imageEditor=new p.UI.ImageEditor(C,B)}else{p.Errors.ImageEditorExist(C._stwain)}C._imageEditorInner=C._imageEditor._imageEditorInner;C.bShowImageEdit=C._imageEditorInner.bShowImageEdit;return C._imageEditor};o.prototype.createThumbnailViewer=function(B){var C=this;if(!C._NouiNotSupport("createThumbnailViewer")){return NaN}if(!C._thumbnailViewer){C._thumbnailViewer=new p.UI.ThumbnailViewer(C,B)}else{p.Errors.ThumbnailViewerExist(C._stwain)}C.myThumbnailViewer=C._thumbnailViewer.myThumbnailViewer;C.myThumbnailViewer.on("click",function(E,D){C.UpdateInfo(true,false,true)});return C._thumbnailViewer};o.prototype.createCustomElement=function(D,B,E){var G=this,F="right",C=false;if(!G._NouiNotSupport("createCustomElement")){return NaN}if(p.isUndefined(D)){p.Errors.ElementRequired(G._stwain);return NaN}else{if(D){if(!p.isUndefined(B)){F=B}if(!p.isUndefined(E)&&p.isBoolean(E)){C=E}if(!G._customElement){G._customElement=new p.UI.CustomElement(G,D,F,C);if(!G._customElement.myCustomElemet){G._customElement=undefined}}else{p.Errors.CustomElementExist(G._stwain)}return G._customElement}else{p.Errors.ElementNotExist(G._stwain);return NaN}}return NaN};p.UI=p.UI||{};p.UI.WebViewer=o;function s(C,F){var G=this,D;G._webViewer=C;if(!F){F=t}else{if(F.location){switch(F.location){case"left":F.location="horizontal";F.sequence=-1;break;case"right":F.location="horizontal";F.sequence=1;break;case"top":F.location="vertical";F.sequence=-1;break;case"bottom":F.location="vertical";F.sequence=1;break;default:F.location="horizontal";F.sequence=-1}}else{F.location="horizontal";F.sequence=-1}if(p.isUndefined(F.size)){F.size=t.size}if(p.isUndefined(F.columns)){F.columns=t.columns}if(p.isUndefined(F.rows)){F.rows=t.rows}if(p.isUndefined(F.scrollDirection)){F.scrollDirection=t.scrollDirection}else{if(F.scrollDirection!="horizontal"){F.scrollDirection=t.scrollDirection}}if(p.isUndefined(F.pageMargin)){F.pageMargin=t.pageMargin}if(p.isUndefined(F.allowKeyboardControl)){F.allowKeyboardControl=t.allowKeyboardControl}if(p.isUndefined(F.allowPageDragging)){F.allowPageDragging=t.allowPageDragging}if(p.isUndefined(F.allowResizing)){F.allowResizing=t.allowResizing}if(p.isUndefined(F.border)){F.border=t.border}if(p.isUndefined(F.pageBackground)){F.pageBackground=t.pageBackground}if(p.isUndefined(F.pageBorder)){F.pageBorder=t.pageBorder}if(p.isUndefined(F.hoverPageBackground)){F.hoverPageBackground=t.hoverPageBackground}if(p.isUndefined(F.hoverPageBorder)){F.hoverPageBorder=t.hoverPageBorder}if(p.isUndefined(F.placeholderBackground)){F.placeholderBackground=t.placeholderBackground}}if(p.isUndefined(F.background)){F.background=G._webViewer.GetBackground()}if(p.isUndefined(F.showPageNumber)){F.showPageNumber=G._webViewer.GetShowPageNumber()}if(p.isUndefined(F.selectedPageBorder)){var B=G._webViewer.GetSelectedPageBorder();if(!p.isUndef(B)){F.selectedPageBorder=B}else{F.selectedPageBorder=t.selectedPageBorder}}if(p.isUndefined(F.selectedPageBackground)){var E=G._webViewer.GetSelectedPageBackground();if(!p.isUndef(E)){F.selectedPageBackground=E}else{F.selectedPageBackground=t.selectedPageBackground}}F.showThumbnail=false;G.myThumbnailViewer=G._webViewer.myViewer.createThumbnailView(F);if(G._webViewer.mydvs.Error.errorCode!=0){p.Errors.WebviewerError(G._webViewer._stwain,G._webViewer.mydvs.Error.errorMessage,G._webViewer.mydvs.Error.errorCode)}p.attachViewerPropertyThumbnailUI(G);G.bDispose=false;G._webViewer.bThumbnailDispose=false}s.prototype.show=function(){var B=this;if(!B._webViewer._NouiNotSupport("show")){return false}if(B.myThumbnailViewer){B._webViewer.myViewer.setViewMode(1,1);B._webViewer.SetIfSinglePageMode(true);B.myThumbnailViewer.showThumbnail=true;return true}else{if(B.bDispose){p.Errors.ThumbnailViewerDispose(B._webViewer._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._webViewer._stwain)}return false}};s.prototype.hide=function(){var B=this;if(!B._webViewer._NouiNotSupport("hide")){return false}if(B.myThumbnailViewer){B.myThumbnailViewer.showThumbnail=false;return true}else{if(B.bDispose){p.Errors.ThumbnailViewerDispose(B._webViewer._stwain)}else{p.Errors.ThumbnailViewerNotExist(B._webViewer._stwain)}return false}};s.prototype.dispose=function(){var C=this,B=false;if(C.bDispose){return true}B=C._webViewer.myViewer.removeThumbnailView(C.myThumbnailViewer);if(B){C.bDispose=true;C._webViewer._thumbnailViewer=undefined;C._webViewer.myThumbnailViewer=undefined;C.myThumbnailViewer=undefined;C._webViewer.bThumbnailDispose=true}return B};s.prototype.updateViewMode=function(B){var C=this;if(C.myThumbnailViewer){if(B&&B.columns&&B.rows){if(B.columns<0||B.rows<0){p.Errors.InvalidPropertyValue(C._webViewer._stwain);return false}C.myThumbnailViewer.showThumbnail=false;C.myThumbnailViewer.setViewMode(B.columns,B.rows);if(B.scrollDirection&&(B.scrollDirection=="horizontal"||B.scrollDirection=="vertical")){C.myThumbnailViewer.scrollDirection=B.scrollDirection}C.myThumbnailViewer.showThumbnail=true}}else{if(C.bDispose){p.Errors.ThumbnailViewerDispose(C._webViewer._stwain)}else{p.Errors.ThumbnailViewerNotExist(C._webViewer._stwain)}return false}};p.attachViewerPropertyThumbnailUI=function(B){r(B,"location",{get:function(){return B._webViewer.GetThumLocation()},set:function(C){return B._webViewer.SetThumLocation(C)}});r(B,"size",{get:function(){return B._webViewer.GetThumSize()},set:function(C){return B._webViewer.SetThumSize(C)}});r(B,"scrollDirection",{get:function(){return B._webViewer.GetThumScrollDirection()},set:function(C){return B._webViewer.SetThumScrollDirection(C)}});r(B,"showPageNumber",{get:function(){return B._webViewer.GetThumShowPageNumber()},set:function(C){return B._webViewer.SetThumShowPageNumber(C)}});r(B,"pageMargin",{get:function(){return B._webViewer.GetThumMargin()},set:function(C){return B._webViewer.SetThumMargin(C)}});r(B,"border",{get:function(){return B._webViewer.GetThumBorder()},set:function(C){return B._webViewer.SetThumBorder(C)}});r(B,"background",{get:function(){return B._webViewer.GetThumBackground()},set:function(C){return B._webViewer.SetThumBackground(C)}});r(B,"pageBackground",{get:function(){return B._webViewer.GetThumPageBackground()},set:function(C){return B._webViewer.SetThumPageBackground(C)}});r(B,"pageBorder",{get:function(){return B._webViewer.GetThumPageBorder()},set:function(C){return B._webViewer.SetThumPageBorder(C)}});r(B,"hoverPageBackground",{get:function(){return B._webViewer.GetThumHoverBackground()},set:function(C){return B._webViewer.SetThumHoverBackground(C)}});r(B,"hoverPageBorder",{get:function(){return B._webViewer.GetThumHoverBorder()},set:function(C){return B._webViewer.SetThumHoverBorder(C)}});r(B,"placeholderBackground",{get:function(){return B._webViewer.GetThumPlaceholderBackground()},set:function(C){return B._webViewer.SetThumPlaceholderBackground(C)}});r(B,"selectedPageBorder",{get:function(){return B._webViewer.GetThumSelectedPageBorder()},set:function(C){return B._webViewer.SetThumSelectedPageBorder(C)}});r(B,"selectedPageBackground",{get:function(){return B._webViewer.GetThumSelectedPageBackground()},set:function(C){return B._webViewer.SetThumSelectedPageBackground(C)}});r(B,"allowKeyboardControl",{get:function(){return B._webViewer.GetThumAllowKeyboardControl()},set:function(C){return B._webViewer.SetThumAllowKeyboardControl(C)}});r(B,"allowPageDragging",{get:function(){return B._webViewer.GetThumAllowDrag()},set:function(C){return B._webViewer.SetThumAllowDrag(C)}});r(B,"allowResizing",{get:function(){return B._webViewer.GetThumAllowResize()},set:function(C){return B._webViewer.SetThumAllowResize(C)}})};s.prototype.on=function(B,D){var C=this;if(B){if(!p.isFunction(D)){p.Errors.CallbackNotAFunction(C._webViewer._stwain);return}C.myThumbnailViewer.on(B,D)}};s.prototype.off=function(B,D){var C=this;if(B){if(p.isUndefined(D)){C.myThumbnailViewer.off(B);if(B=="click"){C.myThumbnailViewer.on("click",function(F,E){C._webViewer.UpdateInfo(true,false,true)})}}else{if(!p.isFunction(D)){p.Errors.CallbackNotAFunction(C._webViewer._stwain);return}C.myThumbnailViewer.off(B,D)}}};p.UI=p.UI||{};p.UI.ThumbnailViewer=s;function w(B,D,C,E){var G=this,F=1;G._webViewer=B;G.myViewer=G._webViewer.myViewer;G.element=D;if(!p.isUndefined(C)){F=C=="left"?-1:1}if(p.isUndefined(E)){E=false}G.myCustomElemet=G.myViewer.createCustomElement(D,F,E);if(G.myCustomElemet){G.hide();G.bDispose=false}}w.prototype.show=function(){var B=this;if(B.myCustomElemet){B.myCustomElemet.show();return true}else{if(B.bDispose){p.Errors.CustomElementDispose(B._webViewer._stwain)}else{p.Errors.CustomElementNotExist(B._webViewer._stwain)}return false}};w.prototype.hide=function(){var B=this;if(B.myCustomElemet){B.myCustomElemet.hide();return true}else{if(B.bDispose){p.Errors.CustomElementDispose(B._webViewer._stwain)}else{p.Errors.CustomElementNotExist(B._webViewer._stwain)}return false}};w.prototype.dispose=function(){var C=this,B=false;if(C.bDispose){return true}if(C.myCustomElemet){B=C.myCustomElemet.dispose();if(B){C.bDispose=true;C._webViewer._customElement=undefined;C.myCustomElemet=undefined}}else{C.bDispose=true;B=true}return B};p.UI=p.UI||{};p.UI.CustomElement=w});Dynamsoft.Ready(function(b,i){var e=Dynamsoft;if(!b.product.bHTML5Edition){return}var k=b.html5.Funs,a=0,h=1,c=1,g=!1,f=!0,j=k.DEF;function d(l,n){var m=this;m._ImgManager=n;m._stwain=n._stwain;m._webViewer=l;m._elements=[];b.attachViewerPropertyUI(m)}b.attachViewerPropertyUI=function(l){j(l,"width",{get:function(){return l._webViewer.GetWidth()},set:function(m){return l._webViewer.SetWidth(m)}});j(l,"height",{get:function(){return l._webViewer.GetHeight()},set:function(m){return l._webViewer.SetHeight(m)}});j(l,"idPostfix",{get:function(){return l._webViewer.GetIdPostfix()}});j(l,"background",{get:function(){return l._webViewer.GetBackground()},set:function(m){return l._webViewer.SetBackground(m)}});j(l,"border",{get:function(){return l._webViewer.GetBorder()},set:function(m){return l._webViewer.SetBorder(m)}});j(l,"innerBorder",{get:function(){return l._webViewer.GetInnerBorder()},set:function(m){return l._webViewer.SetInnerBorder(m)}});j(l,"selectedPageBorder",{get:function(){return l._webViewer.GetSelectedPageBorder()},set:function(m){return l._webViewer.SetSelectedPageBorder(m)}});j(l,"selectedPageBackground",{get:function(){return l._webViewer.GetSelectedPageBackground()},set:function(m){return l._webViewer.SetSelectedPageBackground(m)}});j(l,"showPageNumber",{get:function(){return l._webViewer.GetShowPageNumber()},set:function(m){return l._webViewer.SetShowPageNumber(m)}});j(l,"selectedAreaBorderColor",{get:function(){return l._webViewer.GetSelectedAreaBorderColor()},set:function(m){return l._webViewer.SetSelectedAreaBorderColor(m)}});j(l,"selectionRectAspectRatio",{get:function(){return l._webViewer.GetSelectionRectAspectRatio()},set:function(m){return l._webViewer.SetSelectionRectAspectRatio(m)}});j(l,"cursor",{get:function(){return l._webViewer.GetCursor()},set:function(m){return l._webViewer.SetCursor(m)}});j(l,"ifAutoScroll",{get:function(){return l._webViewer.GetIfAutoScroll()},set:function(m){return l._webViewer.SetIfAutoScroll(m)}});j(l,"pageMargin",{get:function(){return l._webViewer.GetPageMargin()},set:function(m){return l._webViewer.SetPageMargin(m)}});j(l,"zoom",{get:function(){return l._webViewer.GetZoom()},set:function(m){return l._webViewer.SetZoom(m)}});j(l,"singlePageMode",{get:function(){return l._webViewer.GetIfSinglePageMode()},set:function(m){return l._webViewer.SetIfSinglePageMode(m)}});j(l,"acceptDrop",{get:function(){return l._webViewer.GetAcceptDrop()},set:function(m){return l._webViewer.SetAcceptDrop(m)}});j(l,"allowSlide",{get:function(){return l._webViewer.GetAllowSlide()},set:function(m){return l._webViewer.SetAllowSlide(m)}})};d.prototype.next=function(){var l=this;return l._webViewer.next()};d.prototype.previous=function(){var l=this;return l._webViewer.previous()};d.prototype.first=function(){var l=this;return l._webViewer.first()};d.prototype.last=function(){var l=this;return l._webViewer.last()};d.prototype.gotoPage=function(l){var m=this;return m._webViewer.go(l)};d.prototype.render=function(){var l=this;return l._webViewer.render()};d.prototype.createImageEditor=function(l){var m=this;return m._webViewer.createImageEditor(l)};d.prototype.createThumbnailViewer=function(l){var m=this;return m._webViewer.createThumbnailViewer(l)};d.prototype.getUISettings=function(){var l=this;return l._webViewer.getUISettings()};d.prototype.resetUISettings=function(){var l=this;return l._webViewer.resetUISettings()};d.prototype.updateUISettings=function(l){var m=this;return m._webViewer.updateUISettings(l)};d.prototype.clearSelectedAreas=function(){var l=this;return l._webViewer.clearSelectedAreas()};d.prototype.setSelectedAreas=function(l){var m=this;return m._webViewer.setSelectedAreas(l)};d.prototype.createCustomElement=function(m,l,n){var o=this;return o._webViewer.createCustomElement(m,l,n)};d.prototype.fitWindow=function(l){var m=this;return m._webViewer.SetFitType(l)};d.prototype.setButtonClass=function(l,n){var m=this;return m._webViewer.setButtonClass(l,n)};d.prototype.setViewMode=function(m,l){var n=this;return n._webViewer.SetViewMode(m,l)};d.prototype.bind=function(o){var r=this,n=o;if(b.isShadowRoot(n)){var p=document.createElement("div");n.appendChild(p);r._elements.push(p);n=p}if(b.isDOM(n)){var m=b.getShadowRoot(n);if(m){var q="?t=20200811",l=document.createElement("style");l.innerHTML=['@import url("',Dynamsoft.WebTwainEnv.ResourcesPath,"/src/dynamsoft.viewer.css",q,'")'].join("");m.appendChild(l);r._elements.push(l)}else{m=false}if(!n.id||n.id==""){n.id=["dwt_",b.getRandom()].join("")}}return r._webViewer.BindView(n)};d.prototype.show=function(){var l=this;return l._webViewer.show()};d.prototype.hide=function(){var l=this;return l._webViewer.hide()};d.prototype.unbind=function(){var l=this;b.each(l._elements,function(m){if(m.parentNode){m.parentNode.removeChild(m)}});return l._webViewer.UnbindView()};d.prototype.on=function(l,m){var n=this;n._webViewer.on(l,m)};d.prototype.off=function(l,m){var n=this;n._webViewer.off(l,m)};b.UI=b.UI||{};b.UI.DWTViewer=d});Dynamsoft.Ready(function(a,g){var c=Dynamsoft;if(!a.product.bHTML5Edition){return}var f=Dynamsoft.navInfo,h=document,b=a.html5.Funs2,i=Dynamsoft.WebTwainEnv;function d(o,n,m,k,j,l){var p=this;p.Left=o;p.Top=n;p.Right=m;p.Bottom=k;p.ColorRGB=j;p.Opacity=l}function e(l,j){var k=this;k._ImgManager=l;k._stwain=l._stwain;k.zoomInStep=1.2;k.zoomOutStep=0.8;k.MIN_ZOOM=0.02;k.MAX_ZOOM=65;k.BaseUrl=false;k.MAX_ROWS=128;k.MAX_COLUMNS=128;k.AllowMultiSelect=true;k.__MousewheelValue=0;this._Init(j)}e.prototype._Init=function(j){var k=this;k.borderWidth=a.isUndefined(j.borderWidth)?1:j.borderWidth;k.imageViewWidth=j.Width;k.imageViewHeight=j.Height;if(j.BackgroundColor){k.BackgroundColorByDefault=j.BackgroundColor}else{k.BackgroundColorByDefault="#FFFFFF"}j.BackgroundColor=k.BackgroundColorByDefault;k.BackgroundFillColor=k.BackgroundColorByDefault;if(!k._webViewer){k._webViewer=new a.UI.WebViewer(k._ImgManager,j,k)}else{k._webViewer._Init(j)}k.mapModelImageControl=j.mapModelImageControl;k.__InitEvents(j)};e.prototype.__InitEvents=function(j){var k=this;if(a.isFunction(j.onTopImageInTheViewChanged)){k.onTopImageInTheViewChanged=j.onTopImageInTheViewChanged}if(a.isFunction(j.onGetImageInfo)){k.onGetImageInfo=j.onGetImageInfo}if(a.isFunction(j.onZoomChanged)){k.onZoomChanged=j.onZoomChanged}if(a.isFunction(j.onMouseMove)){k.onMouseMove=j.onMouseMove}if(a.isFunction(j.onMouseClick)){k.onMouseClick=j.onMouseClick}if(a.isFunction(j.onMouseRightClick)){k.onMouseRightClick=j.onMouseRightClick}if(a.isFunction(j.onMouseDoubleClick)){k.onMouseDoubleClick=j.onMouseDoubleClick}if(a.isFunction(j.onImageAreaDeSelected)){k.onImageAreaDeSelected=j.onImageAreaDeSelected}if(a.isFunction(j.onImageAreaSelected)){k.onImageAreaSelected=j.onImageAreaSelected}if(a.isFunction(j.onBufferChanged)){k.onBufferChanged=j.onBufferChanged}if(a.isFunction(j.onSelected)){k.onSelected=j.onSelected}if(a.isFunction(j.onRefreshUI)){k.onRefreshUI=j.onRefreshUI}if(a.isFunction(j.onResetCurrentIndex)){k.onResetCurrentIndex=j.onResetCurrentIndex}};e.prototype.SetMetaDataByIndex=function(l,k){var m=this,j=m.GetWebViewer();return j.SetMetaDataByIndex(l,k)};e.prototype.GetMetaDataByIndex=function(k){var l=this,j=l.GetWebViewer();return j.GetMetaDataByIndex(k)};e.prototype.GetDataImageControl=function(j){var k=this;return k.mapModelImageControl[j]};e.prototype.SetDataImageControl=function(m,l,j){var n=this,k;if(l==-1){return false}k=n.mapModelImageControl[l];if(!k){k=new a.UI.ModelImageControl();k.serverId=l;n.mapModelImageControl[l]=k}if(k!=null){k.bIsDirty=true}n.__GetImageAndAttach(k,l,true,false,false,m,j);return true};e.prototype.AttachImagesForControl=function(l,k){var m=this,j=m.GetWebViewer();if(l.bAddImage){j.AppendImage(l,k)}else{j.UpdateImage(l,k)}if(j._ImageEditorInner&&j._ImageEditorInner.bCouldBeTimeConsuming){j._ImageEditorInner.bCouldBeTimeConsuming=false;Dynamsoft.Lib.hideMask()}return true};e.prototype.MobileAttachImagesForControl=function(m,k){var n=this,j=n.GetWebViewer(),l;if(m.bAddImage){l=j.MobileAppendImage(m,k)}else{l=j.MobileUpdateImage(m,k)}if(j._ImageEditorInner&&j._ImageEditorInner.bCouldBeTimeConsuming){j._ImageEditorInner.bCouldBeTimeConsuming=false;Dynamsoft.Lib.hideMask()}return true};e.prototype.GetWebViewer=function(){var j=this;return j._webViewer};e.prototype.__GetWebViewerUuid=function(j){var k=this;return k.mapModelImageControl[j].uuid};e.prototype.SetSelectedImageArea=function(n,m,l,k){var o=this;var j=o.GetWebViewer();if(null!=j){return j.SetSelectedImageArea(n,m,l,k)}return false};e.prototype.OverlayRectangle=function(r,o,n,q,l,j,m){var p=this;var k=p.GetWebViewer();if(null!=k){return k.OverlayRectangle(r,o,n,q,l,j,m)}return false};e.prototype.ChangeImageViewSize=function(j,l){var m=this,k=false;if(j>=0){if(j>m.imageViewWidth){k=true}m.imageViewWidth=j;m.GetWebViewer().SetWidth(j)}if(l>=0){if(l>m.imageViewHeight){k=true}m.imageViewHeight=l;m.GetWebViewer().SetHeight(l)}if(k){}return true};e.prototype.GetWidth=function(){var j=this;return j.GetWebViewer().GetWidth()};e.prototype.SetWidth=function(j){var l=this,k=j;l.GetWebViewer().SetWidth(k);return true};e.prototype.GetHeight=function(){var j=this;return j.GetWebViewer().GetHeight()};e.prototype.SetHeight=function(j){var l=this,k=j;l.GetWebViewer().SetHeight(k);return true};e.prototype.RefreshAllImages=function(r,m){var o=this,n,q,p,j=o.GetWebViewer();if(o._stwain._isMobileMode()){return}if(!o.mapModelImageControl){return}for(var l=0;l<j.GetHowManyImagesInBuffer();l++){n=o.getImageManager().convertClientIndexToServerId(l);var k=o.mapModelImageControl[n];if(k){q=b.getImageUrl(o.BaseUrl,n,r,m,Date.now());k.minImageUrl=q;p=j.GetMetaDataByIndex(l);j.UpdateImage(k,p)}}};e.prototype.SetViewMode=function(k,j){var l=this;return l.GetWebViewer().SetViewMode(k,j)};e.prototype.RemoveAllImages=function(){var o=this,m,k,n,l;n=o._ImgManager.count();var j=Object.keys(o.mapModelImageControl);l=j.length;for(m=0;m<n;m++){k=o.getImageManager().convertClientIndexToServerId(m);if(k!=-1&&o.mapModelImageControl[k]){o.mapModelImageControl[k].Clear();delete o.mapModelImageControl[k]}}if(n==l){o.mapModelImageControl={}}o.GetWebViewer().RemoveAllImages();return true};e.prototype.__GetImageAndAttach=function(o,p,m,t,n,r,s){var q=this;var l=q.imageViewWidth;var k=q.imageViewHeight;var u=false;if(m){u=true}else{if(o.bIsDirty==true){u=true}else{u=false}}var j=q.__GetWebViewerUuid(p);if(j){if(o.iImageControlWidth==l&&o.iImageControlHeight==k&&o.bIsDirty==false){return}}q.__SetArrayControlLoadImage(j,p,o,l,k,q.AttachImagesForControl,u,t,n,r,s)};e.prototype.__SetArrayControlLoadImage=function(k,q,p,m,j,v,n,u,o,t,s){var r=this,l,w;if(r._stwain._isMobileMode()){r.OnGetImageFromMobileServer(q,p,m,j,u,o,t,s)}else{if(n){r.OnGetImageFromServer(q,p,m,j,u,o,t,s)}else{r.OnGetImageByURL(q,p,m,j,u,o,t,s)}}};e.prototype.OnGetImageByURL=function(n,m,k,j,r,l,p,q){var o=this;if(m.imageUrl&&m.imageUrl!=""){m.iImageControlWidth=k;m.iImageControlHeight=j;m.bAddImage=r;m.bAppendImage=l;m.index=p;if(o._stwain._isMobileMode()){o.MobileAttachImagesForControl(m,q)}else{o.AttachImagesForControl(m,q)}}else{return o.OnGetImageFromServer(n,m,k,j,r,l,p,q)}return true};e.prototype.OnGetImageFromMobileServer=function(n,m,k,j,r,l,p,q){var o=this;m.iImageControlWidth=k;m.iImageControlHeight=j;m.bAddImage=r;m.bAppendImage=l;m.index=p;o.MobileAttachImagesForControl(m,q)};e.prototype.OnGetImageFromServer=function(o,n,l,j,t,m,q,r){var p=this,k,u,s=p.BaseUrl;if(s){if(o==-1){return false}if(n.bIsDirty){n.ticks=Date.now()}if(a.isUndefined(l)){l=-1}if(a.isUndefined(j)){j=-1}k=b.getImageUrl(s,o,-1,-1,n.ticks);u=b.getImageUrl(s,o,l,j,n.ticks);n.iImageControlWidth=l;n.iImageControlHeight=j;n.imageUrl=k;n.minImageUrl=u;n.bAddImage=t;n.bAppendImage=m;n.index=q;p.AttachImagesForControl(n,r)}return true};e.prototype.SetIfFitWindowAndType=function(l){var m=this,k;var j=m.GetWebViewer();if(null!=j){switch(l){case 1:k="height";break;case 2:k="width";break;default:k="window"}j.SetFitType(k)}return true};e.prototype.GetAllowMultiSelect=function(){var j=this;return j.AllowMultiSelect};e.prototype.SetAllowMultiSelect=function(j){var k=this;k.AllowMultiSelect=j;return true};e.prototype.GetFitWindowType=function(){var j=this;return 0};e.prototype.SetSelectionRectAspectRatio=function(j){var k=this;k.GetWebViewer().SetSelectionRectAspectRatio(j);return true};e.prototype.GetSelectionRectAspectRatio=function(j){var k=this;return k.GetWebViewer().GetSelectionRectAspectRatio()};e.prototype.SetFitWindowType=function(j){var k=this;k.SetIfFitWindowAndType(j);return true};e.prototype.GetIfFitWindow=function(){var j=this;return true};e.prototype.SetIfFitWindow=function(j){var k=this;if(j){k.GetWebViewer().SetFitType()}else{k.GetWebViewer().SetZoom(1)}return true};e.prototype.GetImageMargin=function(){var j=this;return j.GetWebViewer().GetImageMargin()};e.prototype.SetImageMargin=function(j){var k=this;k.GetWebViewer().SetImageMargin(j);return true};e.prototype.GetSelectionImageBorderColor=function(){var j=this;return j.GetWebViewer().GetSelectedPageBorder()};e.prototype.SetSelectionImageBorderColor=function(j){var l=this,k=j;l.GetWebViewer().SetSelectionImageBorderColor(k);return true};e.prototype.GetZoom=function(){var j=this;return j.GetWebViewer().GetZoom()};e.prototype.SetZoom=function(l){var k=this;if(l<k.MIN_ZOOM){l=k.MIN_ZOOM}if(l>k.MAX_ZOOM){l=k.MAX_ZOOM}var j=k.GetWebViewer();if(null!=j){j.SetZoom(l)}return true};e.prototype.ZoomIn=function(k,p){var o=this;var n=15000;var j=o.mapModelImageControl[o.getImageManager().convertClientIndexToServerId(o._webViewer.GetCurrentIndex())];var l=o.GetWebViewer().GetZoom();var m=(Math.floor(l*100*o.zoomInStep)+1);if(1<m&&m<2501){if(parseInt(j.imageWidth*l)>n||parseInt(j.imageHeight*l)>n){b.output(o,i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);alert(i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);return false}else{o.SetZoom(m/100,k,p)}}else{b.output(o,i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);alert(i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomIn);return false}return true};e.prototype.ZoomOut=function(){var l=this;var j=l.GetWebViewer().GetZoom();var k=(Math.floor(j*100*l.zoomOutStep)-1);if(1<k&&k<6501){l.SetZoom(k/100)}else{b.output(l,i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut);alert(i.CustomizableDisplayInfo.errorMessages.limitReachedForZoomOut);return false}return true};e.prototype.GetMouseShape=function(){var j=this;return j.GetWebViewer().GetMouseShape()};e.prototype.SetMouseShape=function(j){var k=this;k.GetWebViewer().SetMouseShape(j);return true};e.prototype.GetShowPageNumber=function(){var j=this;return j.GetWebViewer().GetShowPageNumber()};e.prototype.SetShowPageNumber=function(j){var k=this;k.GetWebViewer().SetShowPageNumber(j);return true};e.prototype.SetBackgroundFillColor=function(j){var l=this,k=j;l.BackgroundFillColor=k;return true};e.prototype.GetBackgroundColor=function(){var j=this;return j.GetWebViewer().GetBackground()};e.prototype.SetBackgroundColor=function(j){var l=this,k=j;l.GetWebViewer().SetBackground(k);return true};e.prototype.Go=function(j){var k=this;return k.GetWebViewer().go(j)};e.prototype.SetSelectedindexes=function(j){var k=this;return k.GetWebViewer().SetSelectedindexes(j)};e.prototype.GetSelectedindexes=function(j){var k=this;return k.GetWebViewer().GetSelectedindexes()};e.prototype.__Previous=function(){var j=this;j.Go(j.GetWebViewer().GetCurrentIndex()-1);return true};e.prototype.__Next=function(){var j=this;j.Go(j.GetWebViewer().GetCurrentIndex()+1);return true};e.prototype.__fireEvent=function(j,k){var l=this;if(a.isFunction(l[j])){return l[j](k)}return true};e.prototype.AddImage=function(m,l,j,n){var q=this,o=m*1,k,p;if(l==-1){return false}p=new a.UI.ModelImageControl();p.bIsDirty=true;p.serverId=l;q.mapModelImageControl[l]=p;if(l>=0){q.__GetImageAndAttach(p,l,false,true,n,o,j)}return true};e.prototype.RemoveImage=function(l,k){var n=this,j,m=parseInt(l);if(isNaN(m)){a.Errors.InvalidIndex(n);return false}if(m<0||m>=n._ImgManager.count()){a.Errors.IndexOutOfRange(n);return false}j=n._ImgManager.count();if(k!=-1&&n.mapModelImageControl[k]){n.mapModelImageControl[k].Clear();delete n.mapModelImageControl[k]}return n.GetWebViewer().RemoveByIndex(m)};e.prototype.MoveImage=function(k,j,m){var l=this;return l.GetWebViewer().MoveImage(k,j)};e.prototype.SwitchImage=function(k,j){var l=this;return l.GetWebViewer().SwitchImage(k,j)};e.prototype.GetIfAutoScroll=function(){var j=this;return j._webViewer.GetIfAutoScroll()};e.prototype.SetIfAutoScroll=function(j){var k=this;k._webViewer.SetIfAutoScroll(j);return true};e.prototype.Print=function(){var n=this,k=-1;k=n.GetWebViewer().GetCurrentIndex();if(k<0){return}var l,j;j=n.getImageManager().convertClientIndexToServerId(k);if(j==-1){a.Errors.IndexOutOfRange(n);return false}if(n._stwain._isMobileMode()){var m=n.GetWebViewer().GetUidByIndex(k);n.GetWebViewer().GetImageData(m).then(function(o){if(o.oriData instanceof ArrayBuffer){return n.__PrintInner(URL.createObjectURL(new Blob([o.oriData])),j,k)}else{if(o.oriData instanceof Blob){return n.__PrintInner(URL.createObjectURL(o.oriData),j,k)}else{return n.__PrintInner(o.oriData,j,k)}}})}else{l=b.getImageUrl(n.BaseUrl,j,-1,-1);return n.__PrintInner(l,j,k)}return true};e.prototype.__PrintInner=function(m,j,l){var p=this;var k=p.mapModelImageControl[j],o=[];if(k){if(k.width<=0){k.width=p.getImageManager().GetImageWidth(l)}if(k.height<=0){k.height=p.getImageManager().GetImageHeight(l)}var n=new a.UI.PrintUrl(m,k.width,k.height);o.push(n)}else{return false}b.print(o);return true};e.prototype.GetHowManyImagesInBuffer=function(){var j=this;return j.GetWebViewer().GetHowManyImagesInBuffer()};e.prototype.RemoveImageTag=function(j){var k=this;return k.GetWebViewer().RemoveImageTag(j)};e.prototype.FilterImagesByTag=function(j,l,k){var m=this;return m.GetWebViewer().FilterImagesByTag(j,l,k)};e.prototype.ClearFilter=function(){var j=this;return j.GetWebViewer().ClearFilter()};e.prototype.GetServerIdListByTag=function(l){var p=this,o,m=[],k,j,n;if(l.length==0){for(k=0;k<p.GetHowManyImagesInBuffer();k++){n=p.GetWebViewer().GetCustomDataByIndex(k);if(n){m.push(n.imageId)}}}else{o=p.GetWebViewer().GetTagContents(l);for(k=0;k<o.length;k++){j=p.GetWebViewer().GetIndexByUid(o[k]);if(j>=0){n=p.GetWebViewer().GetCustomDataByIndex(j);if(n){m.push(n.imageId)}}}}return m};e.prototype.SetDefaultTag=function(j){var k=this;return k.GetWebViewer().SetDefaultTag(j)};e.prototype.AddImageTag=function(k,j){var l=this;return l.GetWebViewer().AddImageTag(k,j)};e.prototype.GetCurrentTag=function(){var k=this,j;j=k.GetWebViewer().GetCurrentTag();if(j==false){return""}else{return j}};e.prototype.RenameTag=function(j,l){var k=this;return k.GetWebViewer().RenameTag(j,l)};e.prototype.BindView=function(k){var m=this,l=true,j=m.GetWebViewer();l=j.BindView(k);if(l){j.show()}return l};e.prototype.UnbindView=function(){var j=this;return j.GetWebViewer().UnbindView()};e.prototype.GetIfShowVideoContainer=function(){var j=this;return j.GetWebViewer().GetIfShowVideoContainer()};e.prototype.ShowVideoContainer=function(j){var k=this;return k.GetWebViewer().ShowVideoContainer(j)};e.prototype.UpdateVideoContainer=function(j){var k=this;return k.GetWebViewer().UpdateVideoContainer(j)};e.prototype.__AttachImages=function(){var n=this,l,j,k;j=n.GetWebViewer().GetHowManyImagesInBuffer();for(var m=0;m<j;m++){l=n._ImgManager.convertClientIndexToServerId(m);if(l>=0){k=n.mapModelImageControl[l];n.__GetImageAndAttach(k,l,true,false,false,0)}}};e.prototype.exists=function(j){var k=this;if(a.isUndefined(k.mapModelImageControl[j])){return false}else{return true}};e.prototype.getImageManager=function(){var j=this;return j._ImgManager};e.prototype.GetImageData=function(j){var k=this;k.GetWebViewer().GetImageData(j)};e.prototype.RegistLoadCallback=function(k){var j=this;return j.GetWebViewer().RegistLoadCallback(k)};e.prototype.UpdateData=function(m,k){var n=this,j=n.GetWebViewer();var l=n.GetDataImageControl(m);if(l){j.UpdateImage(l,k)}return true};a.UI=a.UI||{};a.UI.ImageUIView=e});Dynamsoft.Ready(function(b,i){var c=Dynamsoft;if(!b.product.bHTML5Edition){return}var h=b.getNavInfo(),j=b.html5.Funs,g=!1,e=!0,d=function(l){if(!b.dlgProgress){b.initProgress()}var k=b.one(".dynamsoft-btnCancel");if(k&&k.getEL()){var m=function(){var n=b.cancelFrome;b.closeProgress(0);if(n==1||n==2){if(b.bio){b.bio.abort();b.bio=g}}else{if(n==3||n==4){l.SetCancel()}else{if(n==5){if(b.isFunction(l.__OnCancel)){l.__OnCancel()}}}}};b.addEventListener(k[0],"mousedown",m)}};function f(o,q){var l={Stwain:o};if(o._isBindViewer()){var k,m=o._width,p=o._height,n=g,r;k=b.one(o._containerElement);if(b.isString(m)&&m.indexOf("%")>=0){m=b.css(k,"width")*parseInt(m)/100;n=e}else{m=parseInt(m)}if(b.isString(p)&&p.indexOf("%")>=0){p=b.css(k,"height")*parseInt(p)/100;n=e}else{p=parseInt(p)}l={Stwain:o,Container:q,Width:m,Height:p}}j.bindUIViewEvents(o,l);if(!o._ImgManager){o._ImgManager=new b.UI.ImageManager(o,l)}else{if(o._ImgManager&&o._ImgManager._UIView&&o._ImgManager._UIView.BackgroundColor){l.BackgroundColor=o._ImgManager._UIView.BackgroundColor}o._ImgManager._Init(o,l)}if(n){j.changeImageUISize(o,o._width,o._height)}}function a(l,m){var k=m||{};l.__OnImageAreaDeSelected=k.onImageAreaDeSelected||"";l.__OnImageAreaSelected=k.onImageAreaSelected||"";l.__OnMouseClick=k.onMouseClick||"";l.__OnMouseDoubleClick=k.onMouseDoubleClick||"";l.__OnMouseMove=k.onMouseMove||"";l.__OnMouseRightClick=k.onMouseRightClick||"";l.__OnTopImageInTheViewChanged=k.onTopImageInTheViewChanged||"";l.__OnBufferChanged=k.onBufferChanged||""}b.mix(j,{changeImageUISize:function(o,n,p){var l,m,t=-1,w=-1,k=n,v=p,s=g,u,q;l=b.one(o._containerElement);if(b.isString(n)&&n.indexOf("%")>=0){u=b.css(l,"width");if(u==0){l[0].style.width="100%"}u=b.css(l,"width")*parseInt(n)/100;s=e}else{u=parseInt(n);k=[u+2,"px"].join("")}if(b.isString(p)&&p.indexOf("%")>=0){q=b.css(l,"height");if(q==0){l[0].style.height="100%"}q=b.css(l,"height")*parseInt(p)/100;s=e}else{q=parseInt(p);v=[q+2,"px"].join("")}if(l){m=b.one(".dynamsoft-dwt-container-box",l);if(m&&m.getEL()){m.style("width",k);m.style("height",v)}}if(s){if(!o.__funResize){o.__funResize=function(){var x=j.__innerGetUIViewRealSize(o._containerElement,o._width,o._height);if(o._ImgManager){return o._ImgManager.ChangeSize(x.width,x.height)}return e}}b.removeEventListener(window,"resize",o.__funResize);b.addEventListener(window,"resize",o.__funResize)}else{if(o.__funResize){b.removeEventListener(window,"resize",o.__funResize);o.__funResize=g}}var r=j.__innerGetUIViewRealSize(o._containerElement,u,q);if(o._ImgManager){return o._ImgManager.ChangeSize(r.width,r.height)}return e},__innerGetUIViewRealSize:function(m,k,o){var l,n=-1,p=-1;l=b.one(m);if(b.isString(k)&&k.indexOf("%")>=0){n=b.css(l,"width")*parseInt(k)/100}if(n<0&&k){n=parseInt(k)}if(b.isString(o)&&o.indexOf("%")>=0){p=b.css(l,"height")*parseInt(o)/100}if(p<0&&o){p=parseInt(o)}return{width:n,height:p}},bindUIViewEvents:function(m,k){var n=m,l;k.onSelected=function(o){if(n._isNoViewer()){return}var q=o.length,p;if(q>0){n._ImgManager.SetSelectedImageCount(q);p=o[q-1];l=true;if(l&&b.isFunction(n.__OnRefreshUI)){n.__OnRefreshUI(p)}}};k.onRefreshUI=function(o){if(n._isNoViewer()){return}j.__innerRefreshFromUIView(n,o)};k.onResetCurrentIndex=function(p){if(n._isNoViewer()){return}var o=n._ImgManager.getCurrentImageIndex();if(p>=0&&p<n._ImgManager.count()&&o!=p){if(b.isFunction(n.__OnIndexChangeDuringDragDrop)){n.__OnIndexChangeDuringDragDrop(o,p)}}};k.onMouseMove=function(q){if(n._isNoViewer()){return}var p=q.index;if(q){var o=q.x,r=q.y;n.__MouseX=o;n.__MouseY=r}if(b.isFunction(n.__OnMouseMove)){n.__OnMouseMove(p)}};k.onMouseClick=function(q){if(n._isNoViewer()){return}var p=q.index;if(q){var o=q.x,r=q.y;n.__MouseX=o;n.__MouseY=r}if(b.isFunction(n.__OnMouseClick)){n.__OnMouseClick(p)}};k.onMouseDoubleClick=function(p){if(n._isNoViewer()){return}var o=p.index;if(b.isFunction(n.__OnMouseDoubleClick)){n.__OnMouseDoubleClick(o)}};k.onMouseRightClick=function(q){if(n._isNoViewer()){return}var p=q.index;if(q){var o=q.x,r=q.y;n.__MouseX=o;n.__MouseY=r}if(b.isFunction(n.__OnMouseRightClick)){return n.__OnMouseRightClick(p)}return e};k.onImageAreaSelected=function(o){if(n._isNoViewer()){return}if(b.isFunction(n.__OnImageAreaSelected)){n.__OnImageAreaSelected(o.index,o.left,o.top,o.right,o.bottom,o.areaIndex)}};k.onImageAreaDeSelected=function(o){if(n._isNoViewer()){return}if(b.isFunction(n.__OnImageAreaDeSelected)){n.__OnImageAreaDeSelected(o)}};k.onBufferChanged=function(o){if(b.isFunction(n.__OnBufferChanged)){n.__OnBufferChanged(o)}}},__innerRefreshFromUIView:function(k,l){var m=k;if(b.isFunction(m.__OnRefreshUI)){m.__OnRefreshUI(l)}}});b.html5.ui={init:function(l,m){var k;if(l._isBindViewer()){if(m.container){l._containerElement=m.container}else{if(m.containerID){l._containerElement=b.get(m.containerID)}}l._width=m.width;l._height=m.height;d(l);k=b.one(l._containerElement)}else{l._containerElement=null}l._ifBindViewer=m.ifBindViewer;f(l,k);if(!l._ifBindViewer){a(l,l.config);l.__OnMouseClick=m.onMouseClick||"";l.__OnMouseDoubleClick=m.onMouseDoubleClick||"";l.__OnMouseRightClick=m.onMouseRightClick||"";l.__OnMouseMove=m.onMouseMove||"";l.__OnImageAreaSelected=m.onImageAreaSelected||"";l.__OnImageAreaDeSelected=m.onImageAreaDeSelected||"";l.__OnRefreshUI=m.onRefreshUI||"";l.__OnBufferChanged=m.onBufferChanged||"";l.__MouseX=0;l.__MouseY=0;l.__style=new b.html5.STwainStyle(l);l.__fSelectionRectAspectRatio=0}},unLoad:function(l){var k=l._containerElement;if(k){k.innerHTML=""}},addMethods:function(k){b.mix(k,{OverlayRectangle:function(t,n,q,s,l,o,r){var p=this,m;p._resetErr();if(!p._isValid()){return false}if(p._isNoViewer()){return p._nouiNotSupport("OverlayRectangle")}if(n>s||q>l||(n==s&&q==l)){b.Errors.Overlay_InvalidLeftOrTopOrRightOrBottom(p);return false}if(b.isNumber(o)){m=b.getColor(o)}else{m=o}return p._ImgManager.OverlayRectangle(t,n,q,s,l,m,r)},SetViewMode:function(o,m){var p=this;p._resetErr();if(!p._isValid()){return false}if(p._isNoViewer()){return p._nouiNotSupport("SetViewMode")}if(b.isString(o)||b.isString(m)||(o<-1&&m<-1)){b.Errors.InvalidValue(p);return g}var n=Math.floor(o),l=Math.floor(m);p._ImgManager.SetViewMode(n,l);return true},Print:function(l){var n=this;n._resetErr();if(!n._isValid()){return false}if(n._isNoViewer()){return n._nouiNotSupport("Print")}if(!n._isMobileMode()&&l){var m=true;return n._innerSend("PrintEx",j.makeParams(m),true,function(){},function(){})}n._ImgManager.Print();return true},ShowImageEditor:function(n,m,l,o){var p=this;p._resetErr();if(!p._isValid()){return false}if(p._isNoViewer()){return p._nouiNotSupport("ShowImageEditor")}if(p._isMobileMode()){}else{if(j.isServerInvalid(p)){return g}}if(p._ImgManager.getWebViewer().bShowImageEdit){return p.ShowImageEditorEx(-1,-1,-1,-1,3)}if(n&&m&&l){return p.ShowImageEditorEx(-1,-1,m,l,0,true,n,o)}else{return p.ShowImageEditorEx(-1,-1,-1,-1,0,false)}},ShowImageEditorEx:function(t,r,n,m,o,l,q,s){var p=this;p._resetErr();if(!p._isValid()){return false}if(p._isNoViewer()){return p._nouiNotSupport("ShowImageEditorEx")}return p._ImgManager.ShowImageEditorEx(t,r,n,m,o,l,q,s)},SetSelectedImageArea:function(o,q,p,n,l){var r=this;r._resetErr();if(!r._isValid()){return false}if(r._isNoViewer()){return r._nouiNotSupport("SetSelectedImageArea")}var m=parseInt(o);if(isNaN(m)||m<0||m>=r._ImgManager.count()){b.Errors.IndexOutOfRange(r);return false}if(!r._isMobileMode()){if(j.isServerInvalid(r)){return false}}return r._ImgManager.SetSelectedImageArea(m,q,p,n,l)},first:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(!m._isValid()){return false}if(m._isNoViewer()){return m._nouiNotSupport("first")}if(l>0){m._ImgManager.Go(0);j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e},previous:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(!m._isValid()){return false}if(m._isNoViewer()){return m._nouiNotSupport("previous")}if(l>0){m._ImgManager.__Previous();j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e},next:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(!m._isValid()){return false}if(m._isNoViewer()){return m._nouiNotSupport("next")}if(l>0){m._ImgManager.__Next();j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e},last:function(){var m=this,l=m._ImgManager.count();m._resetErr();if(!m._isValid()){return false}if(m._isNoViewer()){return m._nouiNotSupport("last")}if(l>0){m._ImgManager.Go(l-1);j.__innerRefreshFromUIView(m,m._ImgManager.getCurrentImageIndex())}return e}})}}});Dynamsoft.Ready(function(b,h){var d=Dynamsoft;if(!b.product.bHTML5Edition){return}var j=b.html5.Funs,a=0,g=1,c=1,f=!1,e=!0,i=j.DEF;b.attachPropertyUI=function(k){i(k,"Width",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){k._nouiNotSupport("Width");return""}return k._ImgManager.GetWidth()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("Width")}return k._ImgManager.SetWidth(l)}});i(k,"Height",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){k._nouiNotSupport("Height");return""}return k._ImgManager.GetHeight()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("Height")}return k._ImgManager.SetHeight(l)}});i(k,"AllowMultiSelect",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){return k._nouiNotSupport("AllowMultiSelect")}return k._ImgManager.GetAllowMultiSelect()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("AllowMultiSelect")}k._ImgManager.SetAllowMultiSelect(l)}});i(k,"BackgroundColor",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){k._nouiNotSupport("BackgroundColor");return""}return k._ImgManager.GetBackgroundColor()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("BackgroundColor")}return k._ImgManager.SetBackgroundColor(l)}});i(k,"BackgroundFillColor",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){k._nouiNotSupport("BackgroundFillColor");return""}if(k._isMobileMode()){var n=k.__BackgroundFillColor;if(b.isUndefined(n)){n=k._ImgManager._UIView.BackgroundFillColor}if(b.isNumber(n)){return b.getColor(n)}else{var m=parseInt(n.slice(1),16);n=m}return n}var l=k._innerFun("BackgroundFillColor");return b.BGR2RGB(l)},set:function(m){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("BackgroundFillColor")}var n=m*1,l;if(!b.isNumber(n)||isNaN(n)){b.Errors.InvalidValue(k);return f}if(k._isMobileMode()){k._ImgManager._UIView.SetBackgroundFillColor(b.getColor(n));k.__BackgroundFillColor=b.getColor(n);return true}l=b.RGB2BGR(n);return k._innerFun("BackgroundFillColor",j.makeParams(l))}});i(k,"FitWindowType",{get:function(){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){k._nouiNotSupport("FitWindowType");return 0}return k._ImgManager.GetFitWindowType()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("FitWindowType")}var m=l*1;return k._ImgManager.SetFitWindowType(m)}});i(k,"IfFitWindow",{get:function(){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("IfFitWindow")}return k._ImgManager.GetIfFitWindow()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("IfFitWindow")}if(l){return k._ImgManager.SetIfFitWindow(true)}else{return k._ImgManager.SetIfFitWindow(false)}}});i(k,"ImageMargin",{get:function(){k._resetErr();if(!k._isValid()){return 0}if(k._isNoViewer()){k._nouiNotSupport("ImageMargin");return 0}return k._ImgManager.GetImageMargin()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("ImageMargin")}var m=parseInt(l);if(isNaN(m)){return false}return k._ImgManager.SetImageMargin(m)}});i(k,"MouseX",{get:function(){k._resetErr();if(!k._isValid()){return 0}if(k._isNoViewer()){k._nouiNotSupport("MouseX");return 0}return k.__MouseX}});i(k,"MouseY",{get:function(){k._resetErr();if(!k._isValid()){return 0}if(k._isNoViewer()){k._nouiNotSupport("MouseY");return 0}return k.__MouseY}});i(k,"SelectionImageBorderColor",{get:function(){k._resetErr();if(!k._isValid()){return""}if(k._isNoViewer()){k._nouiNotSupport("SelectionImageBorderColor");return""}return k._ImgManager.GetSelectionImageBorderColor()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("SelectionImageBorderColor")}return k._ImgManager.SetSelectionImageBorderColor(l)}});i(k,"Zoom",{get:function(){k._resetErr();if(!k._isValid()){return 0}if(k._isNoViewer()){k._nouiNotSupport("Zoom");return 0}return k._ImgManager.GetZoom()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("Zoom")}return k._ImgManager.SetZoom(l)}});i(k,"MouseShape",{get:function(){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("MouseShape")}var l=k._ImgManager.GetMouseShape();return(l==EnumDWT_MouseShape.Hand)},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("MouseShape")}var m=EnumDWT_MouseShape.Crosshair;if(l){m=EnumDWT_MouseShape.Hand}return k._ImgManager.SetMouseShape(m)}});i(k,"SelectionRectAspectRatio",{get:function(){k._resetErr();if(!k._isValid()){return 0}if(k._isNoViewer()){k._nouiNotSupport("SelectionRectAspectRatio");return 0}return k._ImgManager.GetSelectionRectAspectRatio()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("SelectionRectAspectRatio")}var m=parseFloat(l);if(m>=0){k._ImgManager.SetSelectionRectAspectRatio(m);return true}return false}});i(k,"ShowPageNumber",{get:function(){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("ShowPageNumber")}return k._ImgManager.GetShowPageNumber()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("ShowPageNumber")}return k._ImgManager.SetShowPageNumber(l)}});i(k,"IfAutoScroll",{get:function(){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("IfAutoScroll")}return k._ImgManager.GetIfAutoScroll()},set:function(l){k._resetErr();if(!k._isValid()){return false}if(k._isNoViewer()){return k._nouiNotSupport("IfAutoScroll")}return k._ImgManager.SetIfAutoScroll(l)}})};b.detect.viewerScriptLoaded=e});Dynamsoft.Ready(function(c,j){var e=Dynamsoft;if(!c.product.bPluginEdition&&!c.product.bActiveXEdition){return}var h=Dynamsoft.navInfo;if(!Object.defineProperty){Object.defineProperty=function(s,p,r){var o=s[p],m=function(){return r.get.apply(s,[o])},q=function(t){return(o=r.set.apply(s,[t]))};if(s.__defineGetter__){s.__defineGetter__(p,m);s.__defineSetter__(p,q)}else{var n=function(u){if(event.propertyName==p){s.detachEvent("onpropertychange",n);var t=q(s[p]);s[p]=m;s[p].toString=m;s.attachEvent("onpropertychange",n)}};s[p]=m;s[p].toString=m;s.attachEvent("onpropertychange",n)}}}var f=!0,g=!1,l={isFunction:function(m){return m&&typeof(m)==="function"},isReturnSuccess:function(n){if(n._errorCode===-2115){return f}if(n._errorCode===-2003){if(!Dynamsoft.WebTwainEnv.IfHttpPostErrorNoWindow){var m=window.open("","ErrorMessage","height=500,width=750,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no");m.document.writeln(n.HTTPPostResponseString)}}if(n._errorCode==0){return f}return g},setErrorString:function(m){m._errorCode=m.getSWebTwain().ErrorCode;m._errorString=m.getSWebTwain().ErrorString},checkErrorString:function(m){l.setErrorString(m);return l.isReturnSuccess(m)},wrapperRet:function(q,n,m,r,p,o){if(l.checkErrorString(q)){if(l.isFunction(m)){if(p){m(q.getSWebTwain().HTTPPostResponseString)}else{if(o){m(n);return true}else{m()}}}}else{if(l.isFunction(r)){if(p){r(q._errorCode,q._errorString,q.getSWebTwain().HTTPPostResponseString)}else{r(q._errorCode,q._errorString)}}}return n},wrapperPromise:function(n,m){if(m){return c.Promise.resolve(true)}return c.Promise.reject({errorCode:n._errorCode,errorString:n._errorString})},getImageType:function(n){var m=n.length;if(m<4){return -1}var o=n.lastIndexOf(".");if(o===-1){return -1}var p=n.slice(o).toLowerCase();if(p===".bmp"||p===".dib"){return 0}if(p===".jpg"||p===".jpe"||p===".jpeg"||p===".jfif"){return 1}if(p===".tif"||p===".tiff"){return 2}if(p===".png"){return 3}if(p===".pdf"){return 4}if(p===".gif"){return 5}return -1},replaceLocalFilename:function(m){var n=m;if(Dynamsoft.navInfoSync.bFileSystem){n=decodeURI(n)}return n},makeParams:function(){var m=arguments;if(m===undefined||m.length===0){return undefined}else{return m}}};c.checkErrorString=l.checkErrorString;c.wrapperRet=l.wrapperRet;c.setErrorString=l.setErrorString;c.DynamicLoadAddonFuns=[];c.attachAddon=function(p){if(h.bWin){var q=navigator.userAgent.toLowerCase(),m=!h.bOSx64||(q.indexOf("wow64")>=0),r=p.getSWebTwain(),n;if(m){n="DynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}else{n="DynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}try{r.GetAddOnVersion("pdf",n)}catch(o){}}c.each(c.DynamicLoadAddonFuns,function(s){if(c.isFunction(s)){s(p)}})};var b=0,i=1,a=1,d=2;c.attachProperty=function(m){var o=m;var n=function(s,r,p){var q;if(r!==b&&r!==i){q=r}else{q={};if(r){if(p==a){q.set=function(t){t=t*1;if(!c.isNumber(t)||isNaN(t)){c.Errors.InvalidValue(o);return g}o.getSWebTwain()[s]=t;return l.checkErrorString(o)}}else{if(p==d){q.set=function(t){if(!c.isBoolean(t)){c.Errors.InvalidValue(o);return g}o.getSWebTwain()[s]=t;return l.checkErrorString(o)}}else{q.set=function(t){if(!c.isString(t)){c.Errors.InvalidValue(o);return g}o.getSWebTwain()[s]=t;return l.checkErrorString(o)}}}}}if(!q.get){q.get=function(){var t=o.getSWebTwain()[s];o._errorCode=o.getSWebTwain().ErrorCode;o._errorString=o.getSWebTwain().ErrorString;return t}}if(!(s in o)){Object.defineProperty(o,s,q)}};n("ErrorCode",{get:function(p){return o._errorCode}});n("ErrorString",{get:function(p){return o._errorString}});n("LogLevel",i,a);n("Manufacturer",i);n("ProductFamily",i);n("ProductKey",{get:function(){return Dynamsoft.WebTwainEnv.ProductKey},set:function(r){var q=f,p=r,s=Dynamsoft.WebTwainEnv;if(!c.isString(p)||p=="******"){p=""}s.ProductKey=p;o.__licenseInfo=g;if(p==""){q=g;c.License.checkProductKey(o,{Core:f},g,f)}else{if(c.startsWith(p,"http://")||c.startsWith(p,"https://")){c.ajax({method:"GET",url:p,async:false,onSuccess:function(t){o.GetLicenseInfo(t)}});q=l.checkErrorString(o)}else{o.GetLicenseInfo(p);q=l.checkErrorString(o)}}return q}});n("ProductName",i);n("VersionInfo",i);n("BitDepth",i,a);n("Brightness",i,a);n("Contrast",i,a);n("CurrentSourceName",b);n("DataSourceStatus",b);n("DefaultSourceName",b);n("Duplex",b);n("IfAppendImage",i,d);n("IfAutoBright",i,d);n("IfAutoDiscardBlankpages",i,d);n("IfAutoFeed",i,d);n("IfAutomaticBorderDetection",i,d);n("IfAutomaticDeskew",i,d);n("IfAutoScan",i,d);n("IfDisableSourceAfterAcquire",i,d);n("IfDuplexEnabled",i,d);n("IfFeederEnabled",i,d);n("IfModalUI",i,d);n("IfScanInNewThread",i,d);n("IfShowCancelDialogWhenImageTransfer",i,d);n("IfShowUI",i,d);n("IfShowIndicator",i,d);n("IfUseTwainDSM",i,d);n("IfFeederLoaded",b,d);n("IfPaperDetectable",b,d);n("IfUIControllable",b,d);n("ImageBitsPerPixel",b);n("ImageCaptureDriverType",i,a);n("ImageLayoutDocumentNumber",b);n("ImageLayoutFrameBottom",b);n("ImageLayoutFrameLeft",b);n("ImageLayoutFrameNumber",b);n("ImageLayoutFrameRight",b);n("ImageLayoutFrameTop",b);n("ImageLayoutPageNumber",b);n("ImageLength",b);n("ImagePixelType",b);n("ImageWidth",b);n("ImageXResolution",b);n("ImageYResolution",b);n("MagData",b);n("MagType",b);n("PageSize",i,a);n("PendingXfers",b);n("PixelFlavor",i,a);n("PixelType",i,a);n("Resolution",i,a);n("SourceCount",b);n("TransferMode",i,a);n("Unit",i,a);n("XferCount",i,a);n("Capability",i,a);n("CapCurrentIndex",i,a);n("CapCurrentValue",i,a);n("CapDefaultIndex",b);n("CapDefaultValue",b);n("CapDescription",i);n("CapMaxValue",i,a);n("CapMinValue",i,a);n("CapNumItems",i,a);n("CapStepSize",i,a);n("CapType",i,a);n("CapValue",i,a);n("CapValueString",i);n("CapValueType",i,a);n("AllowMultiSelect",i,d);n("BackgroundColor",i,a);n("BackgroundFillColor",i,a);n("BlankImageCurrentStdDev",b);n("BlankImageMaxStdDev",i,a);n("BlankImageThreshold",i,a);n("CurrentImageIndexInBuffer",{set:function(p){if(p!=o.getSWebTwain().CurrentImageIndexInBuffer){o.getSWebTwain().CurrentImageIndexInBuffer=p}return l.checkErrorString(o)}});n("FitWindowType",i,a);n("HowManyImagesInBuffer",b);n("IfFitWindow",i,d);n("ImageMargin",i,a);n("MaxImagesInBuffer",i,a);n("MouseX",b);n("MouseY",b);n("SelectionImageBorderColor",i);n("Zoom",i,a);n("MouseShape",i,a);n("SelectedImagesIndices",{get:function(){var q=[],p=o.getSWebTwain().SelectedImagesCount;for(var r=0;r<p;r++){q.push(o.getSWebTwain().GetSelectedImageIndex(r))}return q}});n("HTTPPostResponseString",b);n("AsyncMode",i,d);n("FTPPassword",i);n("FTPPort",{set:function(p){if(p!==""){p=p*1;o.getSWebTwain().FTPPort=p;return l.checkErrorString(o)}return g}});n("FTPUserName",i);n("HTTPPort",{set:function(p){if(p!==""){p=p*1;o.getSWebTwain().HTTPPort=p;return l.checkErrorString(o)}else{p=c.detect.ssl?443:80;o.getSWebTwain().HTTPPort=p;return l.checkErrorString(o)}return f}});n("HTTPPassword",i);n("HTTPUserName",i);n("IfPASVMode",i,d);n("IfShowProgressBar",i,d);n("ProxyServer",i);n("IfShowFileDialog",i,d);n("IfTiffMultiPage",i,d);n("PDFAuthor",i);n("PDFCompressionType",i,a);n("PDFCreationDate",i);n("PDFCreator",i);n("PDFKeywords",i);n("PDFModifiedDate",i);n("PDFProducer",i);n("PDFSubject",i);n("PDFTitle",i);n("PDFVersion",i);n("TIFFCompressionType",i,a);n("JPEGQuality",{set:function(p){p=p*1;if(p>=100){p=100}else{if(p<0){p=0}}o.getSWebTwain().JPEGQuality=p;return l.checkErrorString(o)}});n("HttpContentTypeFieldValue",i);n("SelectionRectAspectRatio",i,a);n("IfAllowLocalCache",i,d);n("_AutoCropMethod",i,d);n("BrokerProcessType",i,a);n("BorderStyle",i,a);n("IfShowPrintUI",i,d);n("VScrollBar",i,d);n("EnableInteractiveZoom",i,d);n("ImageEditorIfEnableEnumerator",i,d);n("ImageEditorIfReadonly",i,d);n("ImageEditorIfModal",i,d);n("ImageEditorWindowTitle",i);n("IfSSL",i,d);n("AllowPluginAuthentication",i,d);n("HttpFieldNameOfUploadedImage",i);n("MaxInternetTransferThreads",i,a);n("MaxUploadImageSize",i,a);n("IfOpenImageWithGDIPlus",i,d);n("BufferMemoryLimit",i,a);n("Width",{get:function(){return o.getSWebTwain().style.width},set:function(p){o._ChangeWidth(p);return l.checkErrorString(o)}});n("Height",{get:function(){return o.getSWebTwain().style.height},set:function(p){o._ChangeHeight(p);return l.checkErrorString(o)}});n("IfThrowException",i,d);n("IfAutoScroll",i,d);n("ShowPageNumber",{get:function(){return g},set:function(p){return g}});n("UseLocalService",{get:function(){return true}})};c.attachMethod=function(o){var r=o,m=function(s){if(!c.License.checkProductKey(r,{Core:f})){if(c.isFunction(s)){s(r.ErrorCode,r.ErrorString)}return g}return f},n=function(t,s){if(!c.License.checkPDFProductKeyWhenNeeds(r,t)){if(c.isFunction(s)){s(r.ErrorCode,r.ErrorString)}return g}return f},p=function(t,s){if(t.HowManyImagesInBuffer==0){c.Errors.NoImage(t);if(c.isFunction(s)){s(t.ErrorCode,t.ErrorString)}return false}return true},q=function(t,u,s){if(!p(t,s)){return false}if(isNaN(u)||!c.isNumber(u)||u<0||u>=t.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(t);if(c.isFunction(s)){s(t.ErrorCode,t.ErrorString)}return false}return true};o.RegisterEvent=function(s,u){if(!c.isString(s)){c.Errors.InvalidEventName(r);return false}if(s.toLowerCase()==="onwsmessage"){c.Errors.InvalidEventName(r);return false}if(s.toLowerCase()==="onpostalltransfers"){if(c.isFunction(u)){r.__OnPostAllTransfers=u}return true}var t=["__",s].join("");r[t]=u;r.getSWebTwain().RegisterEvent(s,u);return l.checkErrorString(r)};o.onEvent=function(s,t){return r.RegisterEvent(s,t)};o.on=function(s,t){return r.RegisterEvent(s,t)};o._isMobileMode=function(){return false};o.CancelAllPendingTransfers=function(){r.getSWebTwain().CancelAllPendingTransfers();return l.checkErrorString(r)};o.CloseSource=function(){r.getSWebTwain().CloseSource();return l.checkErrorString(r)};o.CloseSourceManager=function(){r.getSWebTwain().CloseSourceManager();return l.checkErrorString(r)};o.DisableSource=function(){r.getSWebTwain().DisableSource();return l.checkErrorString(r)};o.FeedPage=function(){r.getSWebTwain().FeedPage();return l.checkErrorString(r)};o.GetDeviceType=function(){var s=r.getSWebTwain().GetDeviceType();l.setErrorString(r);return s};o.GetSourceNameItems=function(t){var s=r.getSWebTwain().GetSourceNameItems(t);l.setErrorString(r);return s};o.SourceNameItems=function(t){var s=r.getSWebTwain().GetSourceNameItems(t);l.setErrorString(r);return s};o.GetSourceNames=function(){c.Errors.ActiveXNotSupport(r);return[]};o.GetSourceType=function(t){var s=r.getSWebTwain().GetSourceType(t);l.setErrorString(r);return s};o.OpenSource=function(){r.getSWebTwain().OpenSource();return l.checkErrorString(r)};o.OpenSourceManager=function(){r.getSWebTwain().OpenSourceManager();return l.checkErrorString(r)};o.ResetImageLayout=function(){r.getSWebTwain().ResetImageLayout();return l.checkErrorString(r)};o.RewindPage=function(){r.getSWebTwain().RewindPage();return l.checkErrorString(r)};o.SelectSource=function(s,t){if(c.isUndefined(s)){r.getSWebTwain().SelectSource();return l.checkErrorString(r)}else{r.getSWebTwain().SelectSource();var u=l.checkErrorString(r);if(u){s();return true}else{t();return false}}};o.SelectSourceByIndex=function(s){r.getSWebTwain().SelectSourceByIndex(s);return l.checkErrorString(r)};o.CloseSourceAsync=function(){return l.wrapperPromise(r,r.CloseSource())};o.CloseSourceManagerAsync=function(){return l.wrapperPromise(r,r.CloseSourceManager())};o.GetSourceNamesAsync=function(){return l.wrapperPromise(r,r.GetSourceNames())};o.GetSourceTypeAsync=function(s){return l.wrapperPromise(r,r.GetSourceType(s))};o.OpenSourceAsync=function(){return l.wrapperPromise(r,r.OpenSource())};o.OpenSourceManagerAsync=function(){return l.wrapperPromise(r,r.OpenSourceManager())};o.SelectSourceAsync=function(){return l.wrapperPromise(r,r.SelectSource())};o.SelectSourceByIndexAsync=function(s){return l.wrapperPromise(r,r.SelectSourceByIndex(s))};o.SetFileXferInfo=function(s,u){var t=l.replaceLocalFilename(s);r.getSWebTwain().SetFileXferInfo(t,u);return l.checkErrorString(r)};o.SetImageLayout=function(v,u,t,s){r.getSWebTwain().SetImageLayout(v,u,t,s);return l.checkErrorString(r)};o.CapGet=function(){var s=r.getSWebTwain().CapGet();l.setErrorString(r);return s};o.CapGetCurrent=function(){var s=r.getSWebTwain().CapGetCurrent();l.setErrorString(r);return s};o.CapGetDefault=function(){var s=r.getSWebTwain().CapGetDefault();l.setErrorString(r);return s};o.CapGetFrameBottom=function(t){var s=r.getSWebTwain().CapGetFrameBottom(t);l.setErrorString(r);return s};o.CapGetFrameLeft=function(t){var s=r.getSWebTwain().CapGetFrameLeft(t);l.setErrorString(r);return s};o.CapGetFrameRight=function(t){var s=r.getSWebTwain().CapGetFrameRight(t);l.setErrorString(r);return s};o.CapGetFrameTop=function(t){var s=r.getSWebTwain().CapGetFrameTop(t);l.setErrorString(r);return s};o.CapGetHelp=function(){var s=r.getSWebTwain().CapGetHelp();l.setErrorString(r);return s};o.CapGetLabel=function(){var s=r.getSWebTwain().CapGetLabel();l.setErrorString(r);return s};o.CapGetLabels=function(){var s=r.getSWebTwain().CapGetLabels();l.setErrorString(r);return s};o.CapIfSupported=function(t){var s=r.getSWebTwain().CapIfSupported(t);l.setErrorString(r);return s};o.CapReset=function(){r.getSWebTwain().CapReset();return l.checkErrorString(r)};o.CapSet=function(){r.getSWebTwain().CapSet();return l.checkErrorString(r)};o.CapSetFrame=function(t,w,v,u,s){r.getSWebTwain().CapSetFrame(t,w,v,u,s);return l.checkErrorString(r)};o.GetCapItems=function(t){var s=r.getSWebTwain().GetCapItems(t);l.setErrorString(r);return s};o.GetCapItemsString=function(t){var s=r.getSWebTwain().GetCapItemsString(t);l.setErrorString(r);return s};o.SetCapItems=function(t,s){r.getSWebTwain().SetCapItems(t,s);return l.checkErrorString(r)};o.SetCapItemsString=function(t,s){r.getSWebTwain().SetCapItemsString(t,s);return l.checkErrorString(r)};o.AddText=function(C,z,w,B,s,A,t,u){var v=parseInt(C);if(isNaN(v)||v<0||v>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().AddText(v,z,w,B,s,A,t,u);return l.checkErrorString(r)};o.CreateTextFont=function(u,F,z,y,B,C,v,D,s,A,w,x,E,t){r.getSWebTwain().CreateTextFont(u,F,z,y,B,C,v,D,s,A,w,x,E,t);return l.checkErrorString(r)};o.CopyToClipboard=function(t){var s=parseInt(t);if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().CopyToClipboard(s);return l.checkErrorString(r)};o.Erase=function(A,u,x,z,t,y,v){var w=parseInt(A),s;if(isNaN(w)||w<0||w>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().Erase(w,u,x,z,t);return l.wrapperRet(r,s,y,v)};o.GetImageBitDepth=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageBitDepth(t);l.setErrorString(r);return s};o.GetImageWidth=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageWidth(t);l.setErrorString(r);return s};o.GetImageHeight=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageHeight(t);l.setErrorString(r);return s};o.GetImageSize=function(v,u,w){var t=parseInt(v);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageSize(t,u,w);l.setErrorString(r);return s};o.GetImageSizeWithSpecifiedType=function(u,v){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageSizeWithSpecifiedType(t,v);l.setErrorString(r);return s};o.GetImageXResolution=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageXResolution(t);l.setErrorString(r);return s};o.GetImageYResolution=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().GetImageYResolution(t);l.setErrorString(r);return s};o.CopyToClipboardAsync=function(s){return l.wrapperPromise(r,r.CopyToClipboard(s))};o.EraseAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.Erase(u,w,v,t,s))};o.GetImageBitDepthAsync=function(s){return l.wrapperPromise(r,r.GetImageBitDepth(s))};o.GetImageWidthAsync=function(s){return l.wrapperPromise(r,r.GetImageWidth(s))};o.GetImageHeightAsync=function(s){return l.wrapperPromise(r,r.GetImageHeight(s))};o.GetImageSizeAsync=function(t,s,u){return l.wrapperPromise(r,r.GetImageSize(t,s,u))};o.GetImageSizeWithSpecifiedTypeAsync=function(s,t){return l.wrapperPromise(r,r.GetImageSizeWithSpecifiedType(s,t))};o.GetImageXResolutionAsync=function(s){return l.wrapperPromise(r,r.GetImageXResolution(s))};o.GetImageYResolutionAsync=function(s){return l.wrapperPromise(r,r.GetImageYResolution(s))};o.SelectAllImages=function(){var s=r.getSWebTwain().HowManyImagesInBuffer,u,t=[];r.getSWebTwain().SelectedImagesCount=s;for(u=0;u<s;u++){r.getSWebTwain().SetSelectedImageIndex(u,u);t.push(u)}l.checkErrorString(r);return t};o.SelectImages=function(u){var s=u.length;r.getSWebTwain().SelectedImagesCount=s;for(var t=0;t<s;t++){r.getSWebTwain().SetSelectedImageIndex(t,u[t])}return l.checkErrorString(r)};o.GetSelectedImagesSize=function(t){var s=r.getSWebTwain().GetSelectedImagesSize(t);l.setErrorString(r);return s};o.GetSkewAngle=function(v,s,u){var t=parseInt(v),w;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().GetSkewAngle(t);return l.wrapperRet(r,w,s,u,false,true)};o.GetSkewAngleEx=function(A,u,x,z,t,y,v){var w=parseInt(A),s;if(isNaN(w)||w<0||w>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().GetSkewAngleEx(w,u,x,z,t);return l.wrapperRet(r,s,y,v)};o.IsBlankImage=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().IsBlankImage(t);l.setErrorString(r);return s};o.IsBlankImageEx=function(w,y,x,v,s,z){var u=parseInt(w);if(isNaN(u)||u<0||u>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var t=r.getSWebTwain().IsBlankImageEx(u,y,x,v,s,z);l.setErrorString(r);return t};o.Mirror=function(v,s,u){var t=parseInt(v),w;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().Mirror(t);return l.wrapperRet(r,w,s,u)};o.OverlayRectangle=function(w,y,x,u,t,s,v){r.getSWebTwain().OverlayRectangle(w,y,x,u,t,s,v);return l.checkErrorString(r)};o.RemoveAllImages=function(){var s;r.getSWebTwain().RemoveAllImages();s=l.checkErrorString(r);if(s){r.__innerRefreshImage()}r.Width=r.Width;return s};o.RemoveAllSelectedImages=function(){var s;r.getSWebTwain().RemoveAllSelectedImages();s=l.checkErrorString(r);if(s){r.__innerRefreshImage()}return s};o.RemoveImage=function(t){var s=parseInt(t);if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().RemoveImage(s);return l.checkErrorString(r)};o.MirrorAsync=function(s){return l.wrapperPromise(r,r.Mirror(s))};o.RemoveAllImagesAsync=function(){return l.wrapperPromise(r,r.RemoveAllImages())};o.RemoveAllSelectedImagesAsync=function(){return l.wrapperPromise(r,r.RemoveAllSelectedImages())};o.RemoveImageAsync=function(s){return l.wrapperPromise(r,r.RemoveImage(s))};o.Rotate=function(x,u,w,s,v){var t=parseInt(x),y,z;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}y=r.getSWebTwain().Rotate(t,u,w);return l.wrapperRet(r,y,s,v)};o.RotateEx=function(A,u,t,z,y,v){var x=parseInt(A),s,w;if(isNaN(x)||x<0||x>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().RotateEx(x,u,t,z);return l.wrapperRet(r,s,y,v)};o.RotateLeft=function(v,s,u){var t=parseInt(v),w,x;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().RotateLeft(t);return l.wrapperRet(r,w,s,u)};o.RotateRight=function(v,s,u){var t=parseInt(v),w,x;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().RotateRight(t);return l.wrapperRet(r,w,s,u)};o.ChangeImageSize=function(A,y,w,z,x,t){var v=parseInt(A),s,u;if(isNaN(v)||v<0||v>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(t)){t(r.ErrorCode,r.ErrorString)}return false}if(y<=0||w<=0){c.Errors.InvalidWidthOrHeight(r);if(c.isFunction(t)){t(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().ChangeImageSize(v,y,w,z);return l.wrapperRet(r,s,x,t)};o.Flip=function(v,s,u){var t=parseInt(v),w,x;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}w=r.getSWebTwain().Flip(t);return l.wrapperRet(r,w,s,u)};o.Crop=function(B,u,y,A,t,z,v){var x=parseInt(B),s,w;if(isNaN(x)||x<0||x>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(v)){v(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().Crop(x,u,y,A,t);return l.wrapperRet(r,s,z,v)};o.CropToClipboard=function(v,y,x,u,s){var t=parseInt(v),w,z;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}w=r.getSWebTwain().CropToClipboard(t,y,x,u,s);return l.checkErrorString(r)};o.CutFrameToClipboard=function(v,y,x,u,s){var t=parseInt(v),w,z;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}w=r.getSWebTwain().CutFrameToClipboard(t,y,x,u,s);return l.checkErrorString(r)};o.CutToClipboard=function(t){var s=parseInt(t),u,v;if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}u=r.getSWebTwain().CutToClipboard(s);return l.checkErrorString(r)};o.RotateAsync=function(t,s,u){return l.wrapperPromise(r,r.Rotate(t,s,u))};o.RotateExAsync=function(u,t,v,s){return l.wrapperPromise(r,r.RotateEx(u,t,v,s))};o.RotateLeftAsync=function(s){return l.wrapperPromise(r,r.RotateLeft(s))};o.RotateRightAsync=function(s){return l.wrapperPromise(r,r.RotateRight(s))};o.ChangeImageSizeAsync=function(u,v,s,t){return l.wrapperPromise(r,r.ChangeImageSize(u,v,s,t))};o.FlipAsync=function(s){return l.wrapperPromise(r,r.Flip(s))};o.CropAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.Crop(u,w,v,t,s))};o.CropToClipboardAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.CropToClipboard(u,w,v,t,s))};o.CutFrameToClipboardAsync=function(u,w,v,t,s){return l.wrapperPromise(r,r.CutFrameToClipboard(u,w,v,t,s))};o.CutToClipboardAsync=function(s){return l.wrapperPromise(r,r.CutToClipboard(s))};o.InvertAsync=function(s){return l.wrapperPromise(r,r.Invert(s))};o.Invert=function(t){var s=parseInt(t),u,v;if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}c.Errors.ActiveXNotSupport(r);return false};o.SetDPI=function(A,w,t,x,z,y,u){var v=parseInt(A),s;if(isNaN(v)||v<0||v>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}s=r.getSWebTwain().SetDPI(v,w,t,x,z);return l.wrapperRet(r,s,y,u)};o.SetViewMode=function(t,s){r.getSWebTwain().SetViewMode(t,s);return l.checkErrorString(r)};o.GetViewModeH=function(){var s=r.getSWebTwain().GetViewModeH();l.setErrorString(r);return s};o.GetViewModeV=function(){var s=r.getSWebTwain().GetViewModeV();l.setErrorString(r);return s};o.MoveImage=function(v,u){var t=parseInt(v),s=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer||isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().MoveImage(t,s);return l.checkErrorString(r)};o.SwitchImage=function(v,u){var t=parseInt(v),s=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer||isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().SwitchImage(t,s);return l.checkErrorString(r)};o.Print=function(){r.getSWebTwain().Print();return l.checkErrorString(r)};o.checkErrorString=function(){return l.isReturnSuccess(r)};o.FileExists=function(t){var u=l.replaceLocalFilename(t);var s=r.getSWebTwain().FileExists(u);l.setErrorString(r);return s};o.SaveAllAsMultiPageTIFF=function(s,w,u){if(!p(r,u)){return false}var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAllAsMultiPageTIFF(v);return l.wrapperRet(r,t,w,u)};o.SaveAllAsPDF=function(s,w,u){if(!p(r,u)){return false}var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAllAsPDF(v);return l.wrapperRet(r,t,w,u)};o.SaveAsBMP=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsBMP(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsJPEG=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsJPEG(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsPDF=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsPDF(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsPNG=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsPNG(w,v);return l.wrapperRet(r,t,x,u)};o.SaveAsTIFF=function(s,v,x,u){if(!q(r,v,u)){return false}var w=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveAsTIFF(w,v);return l.wrapperRet(r,t,x,u)};o.SaveSelectedImagesAsMultiPagePDF=function(s,w,u){var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveSelectedImagesAsMultiPagePDF(v);return l.wrapperRet(r,t,w,u)};o.SaveSelectedImagesAsMultiPageTIFF=function(s,w,u){var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().SaveSelectedImagesAsMultiPageTIFF(v);return l.wrapperRet(r,t,w,u)};o.SaveSelectedImagesToBase64Binary=function(u,t){var s=r.getSWebTwain().SaveSelectedImagesToBase64Binary();return l.wrapperRet(r,s,u,t)};o.ShowFileDialog=function(t,s,z,v,x,y,u,w){r.getSWebTwain().ShowFileDialog(t,s,z,v,x,y,u,w);return l.checkErrorString(r)};o.FTPDownload=function(w,v,u,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPDownload(w,v);return l.wrapperRet(r,s,u,t)};o.FTPDownloadDirectly=function(x,w,s,v,u){if(!m(u)){return false}var t=r.getSWebTwain().FTPDownloadDirectly(x,w,s);return l.wrapperRet(r,t,v,u)};o.FTPDownloadEx=function(x,w,u,v,t){if(!m(t)){return false}if(u!=Dynamsoft.EnumDWT_ImageType.IT_BMP&&u!=Dynamsoft.EnumDWT_ImageType.IT_JPG&&u!=Dynamsoft.EnumDWT_ImageType.IT_TIF&&u!=Dynamsoft.EnumDWT_ImageType.IT_PNG&&u!=Dynamsoft.EnumDWT_ImageType.IT_PDF&&u!=Dynamsoft.EnumDWT_ImageType.IT_J2K){u=-1}if(!n(u,t)){return g}var s=r.getSWebTwain().FTPDownloadEx(x,w,u);return l.wrapperRet(r,s,v,t)};o.FTPUpload=function(x,u,w,v,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUpload(x,u,w);return l.wrapperRet(r,s,v,t)};o.FTPUploadDirectly=function(x,s,w,v,u){if(!m(u)){return false}var t=r.getSWebTwain().FTPUploadDirectly(x,s,w);return l.wrapperRet(r,t,v,u)};o.FTPUploadEx=function(y,u,x,v,w,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUploadEx(y,u,x,v);return l.wrapperRet(r,s,w,t)};o.FTPUploadAllAsMultiPageTIFF=function(w,v,u,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUploadAllAsMultiPageTIFF(w,v);return l.wrapperRet(r,s,u,t)};o.FTPUploadAllAsPDF=function(w,v,u,t){if(!m(t)){return false}var s=r.getSWebTwain().FTPUploadAllAsPDF(w,v);return l.wrapperRet(r,s,u,t)};o.FTPUploadAsMultiPagePDF=function(w,v,u,t){var s=r.getSWebTwain().FTPUploadAsMultiPagePDF(w,v);return l.wrapperRet(r,s,u,t)};o.FTPUploadAsMultiPageTIFF=function(w,v,u,t){var s=r.getSWebTwain().FTPUploadAsMultiPageTIFF(w,v);return l.wrapperRet(r,s,u,t)};o.HTTPDownloadDirectly=function(w,v,s,x,u){if(!m(u)){return false}var t=r.getSWebTwain().HTTPDownloadDirectly(w,v,s);return l.wrapperRet(r,t,x,u)};o.HTTPDownload=function(v,u,x,t){var s,w=l.getImageType(u);return r.HTTPDownloadEx(v,u,w,x,t)};o.HTTPDownloadEx=function(w,v,u,x,t){if(!m(t)){return g}if(u!=Dynamsoft.EnumDWT_ImageType.IT_BMP&&u!=Dynamsoft.EnumDWT_ImageType.IT_JPG&&u!=Dynamsoft.EnumDWT_ImageType.IT_TIF&&u!=Dynamsoft.EnumDWT_ImageType.IT_PNG&&u!=Dynamsoft.EnumDWT_ImageType.IT_PDF&&u!=Dynamsoft.EnumDWT_ImageType.IT_J2K){u=-1}if(!n(u,t)){return g}var s=r.getSWebTwain().HTTPDownloadEx(w,v,u);return l.wrapperRet(r,s,x,t)};o.HTTPDownloadThroughGet=o.HTTPDownloadEx;o.HTTPUploadThroughPostDirectly=function(w,t,s,y,x,v){if(!m(v)){return false}var u=r.getSWebTwain().HTTPUploadThroughPostDirectly(w,t,s,y);return l.wrapperRet(r,u,x,v,true)};o.HTTPUploadThroughPost=function(w,v,s,y,x,u){if(!c.isNumber(v)||isNaN(v)||v<-2){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}var t=r.getSWebTwain().HTTPUploadThroughPost(w,v,s,y);return l.wrapperRet(r,t,x,u,true)};o.HTTPUploadThroughPostEx=function(w,v,s,z,x,y,u){if(!c.isNumber(v)||isNaN(v)||v<-2){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}var t=r.getSWebTwain().HTTPUploadThroughPostEx(w,v,s,z,x);return l.wrapperRet(r,t,y,u,true)};o.ClearAllHTTPFormField=function(){r.getSWebTwain().ClearAllHTTPFormField();return l.checkErrorString(r)};o.SetHTTPFormField=function(t,s){r.getSWebTwain().SetHTTPFormField(t,s);return l.checkErrorString(r)};o.HTTPUploadAllThroughPostAsMultiPageTIFF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadAllThroughPostAsMultiPageTIFF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadThroughPostAsMultiPageTIFF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadThroughPostAsMultiPageTIFF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadAllThroughPostAsPDF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadAllThroughPostAsPDF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadThroughPostAsMultiPagePDF=function(v,s,x,w,u){var t;t=r.getSWebTwain().HTTPUploadThroughPostAsMultiPagePDF(v,s,x);return l.wrapperRet(r,t,w,u,true)};o.HTTPUploadThroughPutDirectly=function(w,t,s,x,v){var u;u=r.getSWebTwain().HTTPUploadThroughPutDirectly(w,t,s);return l.wrapperRet(r,u,x,v)};o.HTTPUploadThroughPut=function(v,u,s,x,t){var w=l.getImageType(s);return r.HTTPUploadThroughPutEx(v,u,s,w,x,t)};o.HTTPUploadThroughPutEx=function(w,v,s,x,y,u){var t;t=r.getSWebTwain().HTTPUploadThroughPutEx(w,v,s,x);return l.wrapperRet(r,t,y,u)};o.HTTPUploadAllThroughPutAsMultiPageTIFF=function(v,s,x,u){var t=-1,w=2;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.HTTPUploadThroughPutAsMultiPageTIFF=function(v,s,x,u){var t=-2,w=2;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.HTTPUploadAllThroughPutAsPDF=function(v,s,x,u){var t=-1,w=4;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.HTTPUploadThroughPutAsMultiPagePDF=function(v,s,x,u){var t=-2,w=4;return r.HTTPUploadThroughPutEx(v,t,s,w,x,u)};o.ShowImageEditor=function(){r.getSWebTwain().ShowImageEditor();return l.checkErrorString(r)};o.SetCookie=function(s){r.getSWebTwain().SetCookie(s);return l.checkErrorString(r)};o.LoadImageFromBase64Binary=function(s,u){if(!m()){return g}if(u!=Dynamsoft.EnumDWT_ImageType.IT_BMP&&u!=Dynamsoft.EnumDWT_ImageType.IT_JPG&&u!=Dynamsoft.EnumDWT_ImageType.IT_TIF&&u!=Dynamsoft.EnumDWT_ImageType.IT_PNG&&u!=Dynamsoft.EnumDWT_ImageType.IT_PDF&&u!=Dynamsoft.EnumDWT_ImageType.IT_J2K){u=-1}if(!n(u)){return g}var t=r.getSWebTwain().LoadImageFromBase64Binary(s,u);l.setErrorString(r);return t};o.SaveSelectedImagesToBytes=function(u,s){var t=r.getSWebTwain().SaveSelectedImagesToBytes(u,s);l.setErrorString(r);return t};o.LoadImageFromBytes=function(v,s,u){if(!m()){return g}if(u!=Dynamsoft.EnumDWT_ImageType.IT_BMP&&u!=Dynamsoft.EnumDWT_ImageType.IT_JPG&&u!=Dynamsoft.EnumDWT_ImageType.IT_TIF&&u!=Dynamsoft.EnumDWT_ImageType.IT_PNG&&u!=Dynamsoft.EnumDWT_ImageType.IT_PDF&&u!=Dynamsoft.EnumDWT_ImageType.IT_J2K){u=-1}if(!n(u)){return g}var t=r.getSWebTwain().LoadImageFromBytes(v,s,u);l.setErrorString(r);return t};o.UnregisterEvent=function(s,t){r.getSWebTwain().UnregisterEvent(s,t);return l.checkErrorString(r)};o.SetImageWidth=function(w,x,s,u){var t=parseInt(w),v;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}v=r.getSWebTwain().SetImageWidth(t,x);return l.wrapperRet(r,v,s,u)};o.HTTPDownloadThroughPost=function(w,v,u,x,t){if(!m(t)){return false}if(u!=Dynamsoft.EnumDWT_ImageType.IT_BMP&&u!=Dynamsoft.EnumDWT_ImageType.IT_JPG&&u!=Dynamsoft.EnumDWT_ImageType.IT_TIF&&u!=Dynamsoft.EnumDWT_ImageType.IT_PNG&&u!=Dynamsoft.EnumDWT_ImageType.IT_PDF&&u!=Dynamsoft.EnumDWT_ImageType.IT_J2K){u=-1}if(!n(u,t)){return g}var s=r.getSWebTwain().HTTPDownloadThroughPost(w,v,u);return l.wrapperRet(r,s,x,t)};o.SetCustomDSDataEx=function(s){r.getSWebTwain().SetCustomDSDataEx(s);return l.checkErrorString(r)};o.SetCustomDSData=function(s){r.getSWebTwain().SetCustomDSData(s);return l.checkErrorString(r)};o.GetCustomDSDataEx=function(){var s=r.getSWebTwain().GetCustomDSDataEx();l.setErrorString(r);return s};o.GetCustomDSData=function(s){var t=r.getSWebTwain().GetCustomDSData(s);l.setErrorString(r);return t};o.ChangeBitDepth=function(u,t,v){var s=parseInt(u);if(isNaN(s)||s<0||s>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}r.getSWebTwain().ChangeBitDepth(s,t,v);return l.checkErrorString(r)};o.ConvertToGrayScale=function(w,s,u){var t=parseInt(w),v;if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);if(c.isFunction(u)){u(r.ErrorCode,r.ErrorString)}return false}v=r.getSWebTwain().ConvertToGrayScale(w);return l.wrapperRet(r,v,s,u)};o.ShowImageEditorEx=function(t,w,s,v,u){r.getSWebTwain().ShowImageEditorEx(t,w,s,v,u);return l.checkErrorString(r)};o.ClearTiffCustomTag=function(){r.getSWebTwain().ClearTiffCustomTag();return l.checkErrorString(r)};o.SetTiffCustomTag=function(u,t,v){var s=u*1;if(Dynamsoft.Lib.isUndef(u)||Dynamsoft.Lib.isUndef(t)){Dynamsoft.Lib.Errors.InvalidParameter(r);return false}if(s<=0||s>2147483647){Dynamsoft.Lib.Errors.InvalidTiffTagError(r);return false}r.getSWebTwain().SetTiffCustomTag(u,t,v);return l.checkErrorString(r)};o.IsBlankImageExpress=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return false}var s=r.getSWebTwain().IsBlankImageExpress(t);l.setErrorString(r);return s};o._ChangeWidth=function(t){var s=document.getElementById(r._strDWTInnerContainerID),w;if(c.isString(t)){if(t.length>0){if(t.charAt(t.length-1)==="%"){w=t}}}if(!w){var u=parseInt(t);if(u&&u>2){w=(u-2)+"px"}}if(w){r._strWidth=w;r.getSWebTwain().style.width=w;if(s){s.style.width=w}}return f};o._ChangeHeight=function(t){var s=document.getElementById(r._strDWTInnerContainerID),w;if(c.isString(t)){if(t.length>0){if(t.charAt(t.length-1)==="%"){w=t}}}if(!w){var u=parseInt(t);if(u){w=u+"px"}}if(w){r._strHeight=w;r.getSWebTwain().style.height=w;if(s){s.style.height=w}}return f};o.SetSize=function(s,t){var u=this;u._ChangeWidth(s);u._ChangeHeight(t);return f};o.SetSelectedImageArea=function(u,w,v,t,s){r.getSWebTwain().SetSelectedImageArea(u,w,v,t,s);return l.checkErrorString(r)};o.SetVideoRotateMode=function(s){r.getSWebTwain().SetVideoRotateMode(s);return l.checkErrorString(r)};o.SetOpenSourceTimeout=function(s){r.getSWebTwain().SetOpenSourceTimeout(s);return l.checkErrorString(r)};o.SetHTTPHeader=function(s,t){return false};o.GetImageURL=function(s,t,u){return""};o.GetImagePartURL=function(u){var t=parseInt(u);if(isNaN(t)||t<0||t>=r.HowManyImagesInBuffer){c.Errors.IndexOutOfRange(r);return""}var s=r.getSWebTwain().GetDIB(t);l.setErrorString(r);return s};o.GetLicenseInfo=function(s){try{r.getSWebTwain().ProductKey=s;var u=r.getSWebTwain().GetLicenseInfo();if(l.checkErrorString(r)){var v=c.parse(u);if(v&&v.message){c.Errors.LicenseEmptyOrInvalid(r);r._errorString=v.message;v=undefined}r.__licenseInfo=v}else{r.__licenseInfo=undefined}}catch(t){r.__licenseInfo=undefined}return Promise.resolve(r.__licenseInfo)};o.LoadDibFromClipboard=function(u,t){var s;s=r.getSWebTwain().LoadDibFromClipboard();return l.wrapperRet(r,s,u,t)};o.LoadImage=function(s,w,u){if(!m(u)){return false}var v=l.replaceLocalFilename(s),t;t=r.getSWebTwain().LoadImage(v);return l.wrapperRet(r,t,w,u)};o.LoadImageEx=function(t,w,y,v){if(!m(v)){return g}if(w!=Dynamsoft.EnumDWT_ImageType.IT_BMP&&w!=Dynamsoft.EnumDWT_ImageType.IT_JPG&&w!=Dynamsoft.EnumDWT_ImageType.IT_TIF&&w!=Dynamsoft.EnumDWT_ImageType.IT_PNG&&w!=Dynamsoft.EnumDWT_ImageType.IT_PDF&&w!=Dynamsoft.EnumDWT_ImageType.IT_J2K){w=-1}if(!n(w,v)){return g}var x=l.replaceLocalFilename(t),s=w,u;if(s==EnumDWT_ImageType.IT_ALL){s=-1}u=r.getSWebTwain().LoadImageEx(x,s);return l.wrapperRet(r,u,y,v)};o.EnableSource=function(t,u,s){r.AcquireImage(t,u,s);return l.checkErrorString(r)};o.AcquireImage=function(A,z,x){var s=r.getSWebTwain(),y,v=null,w=null,u=null;if(c.isUndefined(x)&&(c.isFunction(A)&&c.isFunction(z)||c.isFunction(A)&&c.isUndefined(z)||c.isFunction(A)&&z==null||A==null&&c.isFunction(z))){v=null;if(c.isFunction(A)){w=A}if(c.isFunction(z)){u=z}}else{if(!c.isUndefined(A)){v=A}if(c.isFunction(z)){w=z}if(c.isFunction(x)){u=x}}if(!m(u)){return false}if(v!==undefined&&v!==null){var t;t=v.SelectSourceByIndex;if(t!=null&&typeof(t)!="undefined"){s.SelectSourceByIndex(t);s.CloseSource();s.OpenSource()}t=v.IfShowUI;if(t!=null&&typeof(t)!="undefined"){s.IfShowUI=t}t=v.PixelType;if(t!=null&&typeof(t)!="undefined"){s.PixelType=t}t=v.Resolution;if(t!=null&&typeof(t)!="undefined"){s.Resolution=t}t=v.IfFeederEnabled;if(t!=null&&typeof(t)!="undefined"){s.IfFeederEnabled=t}t=v.IfDuplexEnabled;if(t!=null&&typeof(t)!="undefined"){s.IfDuplexEnabled=t}t=v.IfDisableSourceAfterAcquire;if(t!=null&&typeof(t)!="undefined"){s.IfDisableSourceAfterAcquire=t}}r.getSWebTwain().RegisterEvent("OnPostAllTransfers",function(){var B=l.checkErrorString(r);if(B){if(c.isFunction(w)){w()}}else{if(c.isFunction(u)){u(r._errorCode,r._errorString)}}if(c.isFunction(r.__OnPostAllTransfers)){r.__OnPostAllTransfers()}});y=s.AcquireImage();return l.checkErrorString(r)};o.GenerateURLForUploadData=function(v,w,u){var s=v,t;if(s==EnumDWT_ImageType.IT_ALL){s=-1}t=true;return l.wrapperRet(r,t,w,u)};o._innerFun=function(s,t,u){var w=r.getSWebTwain(),v=w[s];if(typeof(v)==="function"){return v.apply(w,t)}else{return v}};o.ActiveUI=function(t,s){};o.startScan=function(){return new Promise(function(t,s){})};o.IndexToImageID=function(s){return s};o.ImageIDToIndex=function(s){return s};o.first=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){r.CurrentImageIndexInBuffer=0;r.__innerRefreshImage()}return f};o.previous=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){t=r.CurrentImageIndexInBuffer;if(t>0){r.CurrentImageIndexInBuffer=t-1;r.__innerRefreshImage()}}return f};o.next=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){t=r.CurrentImageIndexInBuffer;if(t>=0&&t<s-1){r.CurrentImageIndexInBuffer=t+1;r.__innerRefreshImage()}}return f};o.last=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){r.CurrentImageIndexInBuffer=s-1;r.__innerRefreshImage()}return f};o.isUsingActiveX=function(){return true};o.show=function(){return o.ShowImageEditor()};o.__innerRefreshImage=function(){var s=r.HowManyImagesInBuffer,t;if(s>0){t=r.CurrentImageIndexInBuffer;if(r.__OnRefreshUI){r.__OnRefreshUI(t,s)}}};o._attachEvents=function(){var s=r.getSWebTwain(),t;t=Dynamsoft.Lib.detect.getVersionArray(String(r.VersionInfo));if(t.length<=2||t[0]<9||t[0]==9&&t[1]<=2){return}if(r.__OnPostTransfer!=""){s.RegisterEvent("OnPostTransfer",r.__OnPostTransfer)}if(r.__OnPostAllTransfers!=""){s.RegisterEvent("OnPostAllTransfers",r.__OnPostAllTransfers)}if(r.__OnMouseClick!=""){s.RegisterEvent("OnMouseClick",r.__OnMouseClick)}if(r.__OnPostLoad!=""){s.RegisterEvent("OnPostLoad",r.__OnPostLoad)}if(r.__OnImageAreaSelected!=""){s.RegisterEvent("OnImageAreaSelected",r.__OnImageAreaSelected)}if(r.__OnMouseDoubleClick!=""){s.RegisterEvent("OnMouseDoubleClick",r.__OnMouseDoubleClick)}if(r.__OnMouseRightClick!=""){s.RegisterEvent("OnMouseRightClick",r.__OnMouseRightClick)}if(r.__OnTopImageInTheViewChanged!=""){s.RegisterEvent("OnTopImageInTheViewChanged",r.__OnTopImageInTheViewChanged)}if(r.__OnImageAreaDeSelected!=""){s.RegisterEvent("OnImageAreaDeSelected",r.__OnImageAreaDeSelected)}if(r.__OnGetFilePath!=""){s.RegisterEvent("OnGetFilePath",r.__OnGetFilePath)}if(r.__OnAfterOperate!=""){s.RegisterEvent("OnAfterOperate",r.__OnAfterOperate)}if(r.__OnBeforeOperate!=""){s.RegisterEvent("OnBeforeOperate",r.__OnBeforeOperate)}if(r.__OnOperateStatus!=""){s.RegisterEvent("OnOperateStatus",r.__OnOperateStatus)}if(r.__OnBitmapChanged!=""){s.RegisterEvent("OnBitmapChanged",r.__OnBitmapChanged)}if(r.__OnMouseMove!=""){s.RegisterEvent("OnMouseMove",r.__OnMouseMove)}if(r.__OnPreAllTransfers!=""){s.RegisterEvent("OnPreAllTransfers",r.__OnPreAllTransfers)}if(r.__OnPreTransfer!=""){s.RegisterEvent("OnPreTransfer",r.__OnPreTransfer)}if(r.__OnSourceUIClose!=""){s.RegisterEvent("OnSourceUIClose",r.__OnSourceUIClose)}if(r.__OnTransferCancelled!=""){s.RegisterEvent("OnTransferCancelled",r.__OnTransferCancelled)}if(r.__OnTransferError!=""){s.RegisterEvent("OnTransferError",r.__OnTransferError)}if(r.__OnInternetTransferPercentage!=""){s.RegisterEvent("OnInternetTransferPercentage",r.__OnInternetTransferPercentage)}if(r.__OnInternetTransferPercentageEx!=""){s.RegisterEvent("OnInternetTransferPercentageEx",r.__OnInternetTransferPercentageEx)}}};function k(p){var s=p,r=c.get(s._strDWTNonInstallInnerContainerID),n="",q;if(r.innerHTML!=""){return}if(Dynamsoft.WebTwainEnv.ActiveXInstallWithCAB&&h.bIE){q=["<div style='display: block; border:solid black 1px; text-align:center; width:",s._strWidth,";height:",s._strHeight,"'>","<ul style='padding-top:100px;'>","<li>The Component is not installed</li>","<li>You need to download and install the ActiveX to use this sample.</li>","<li>Please follow the instructions in the information bar.</li>","</ul></div>"].join("")}else{var m=("https:"==location.protocol?"https://":"http://");if(c.product.bHTML5Edition){n=Dynamsoft.dcp.getDSPath()}else{if(h.bIE){n=Dynamsoft.dcp.getDSPath()}else{n=(h.bWin)?c.product.getMSIPath():c.product.getPKGPath()}}q=["<div style='display: block; border:solid black 1px; text-align:center; width:",s._strWidth,";height:",s._strHeight,"'>","<ul style='padding-top:100px;'>","<li>The Component is not installed</li>","<li>You need to download and install to use this sample.</li>","<li>Please click the below link to download it.</li>","<li><a href='",n,"'>Download</a></li>","</ul></div>"].join("")}r.innerHTML=q}c.noControl=function(m){if(Dynamsoft.WebTwainEnv.IfUseEmbeddedDownloadNoticeForActiveX){if(c.isFunction(c.detect.onNoControl)){c.detect.onNoControl(c.get(m._containerID),m._strWidth,m._strHeight)}else{var n=c.detect.arySTwains;for(var p=0;p<n.length;p++){var t=n[p];if(!t._vPluginExist){k(t);c.show(t._strDWTNonInstallInnerContainerID);c.hide(t._strDWTInnerContainerID)}}}}else{var s=window,q=c.product,r="";if(c.isFunction(Dynamsoft.OnWebTwainNotFoundOnWindowsCallback)){if(h.bIE){r=Dynamsoft.dcp.getDSPath()}else{if(q.bHTML5Edition){r=Dynamsoft.dcp.getDSPath()}else{r=q.getMSIPath()}}Dynamsoft.OnWebTwainNotFoundOnWindowsCallback(q.name,r,q.bHTML5Edition,h.bIE,h.bSafari,c.detect.ssl,c.env.strIEVersion)}}}});Dynamsoft.Ready(function(d,b){var a=Dynamsoft;if(!d.product.bPluginEdition&&!d.product.bActiveXEdition){return}function c(e){var f=this;f._stwain=e;d.attachAxViewerPropertyUI(f)}d.attachAxViewerPropertyUI=function(f){var e=function(h,g){if(!(h in f)){Object.defineProperty(f,h,g)}};e("width",{get:function(){return f._stwain.Width},set:function(g){f._stwain.Width=g;return d.checkErrorString(f._stwain)}});e("height",{get:function(){return f._stwain.Height},set:function(g){f._stwain.Height=g;return d.checkErrorString(f._stwain)}});e("background",{get:function(){return f._stwain.BackgroundColor},set:function(g){f._stwain.BackgroundColor=g;return g}});e("cursor",{get:function(){return f._stwain.MouseShape},set:function(g){f._stwain.MouseShape=g;return g}});e("showPageNumber",{get:function(){return false},set:function(g){return false}});e("ifAutoScroll",{get:function(){return f._stwain.IfAutoScroll},set:function(g){f._stwain.IfAutoScroll=g;return g}});e("pageMargin",{get:function(){return f._stwain.ImageMargin},set:function(g){f._stwain.ImageMargin=g;return g}});e("zoom",{get:function(){return f._stwain.Zoom},set:function(g){f._stwain.Zoom=g;return g}})};c.prototype.next=function(){var e=this;return e._stwain.next()};c.prototype.previous=function(){var e=this;return e._stwain.previous()};c.prototype.first=function(){var e=this;return e._stwain.first()};c.prototype.last=function(){var e=this;return e._stwain.last()};c.prototype.gotoPage=function(e){var g=this,f=e*1;if(d.isNaN(f)||!d.isNumber(f)){d.Errors.InvalidIndex(g._stwain);return false}if(f<0||f>=g._stwain.HowManyImagesInBuffer){d.Errors.IndexOutOfRange(g._stwain);return false}g._stwain.CurrentImageIndexInBuffer=f;return f};c.prototype.setSelectedAreas=function(e){var f=this;return f._stwain.SetSelectedImageArea(f._stwain.CurrentImageIndexInBuffer,e.left,e.top,e.right,e.bottom)};c.prototype.fitWindow=function(e){var f=this;if(e=="height"){f._stwain.IfFitWindow=true;f._stwain.FitWindowType=Dynamsoft.EnumDWT_FitWindowType.enumFitWindowHeight}else{if(e=="width"){f._stwain.IfFitWindow=true;f._stwain.FitWindowType=Dynamsoft.EnumDWT_FitWindowType.enumFitWindowWidth}else{f._stwain.IfFitWindow=true;f._stwain.FitWindowType=Dynamsoft.EnumDWT_FitWindowType.enumFitWindow}}return true};c.prototype.setViewMode=function(f,e){var g=this;return g._stwain.SetViewMode(f,e)};c.prototype.createImageEditor=function(){var e=this;return e._stwain};c.prototype.on=function(f,g){var h=this,e;e=h._convertEvtName(f);if(e!=""){if(e=="OnImageAreaSelected"){h.OnImageAreaSelected=function(j,m,l,k,i){g(j,[{x:m,y:l,width:k-m,height:i-l}])};return h._stwain.RegisterEvent(e,h.OnImageAreaSelected)}return h._stwain.RegisterEvent(e,g)}return false};c.prototype.off=function(f,g){var h=this,e;e=h._convertEvtName(f);if(e!=""){if(e=="OnImageAreaSelected"){if(h.OnImageAreaSelected){return h._stwain.UnregisterEvent(e,h.OnImageAreaSelected)}else{return h._stwain.UnregisterEvent(e)}}return h._stwain.UnregisterEvent(e,g)}return false};c.prototype._convertEvtName=function(f){if(!d.isString(f)){return""}var e=d.trim(f).toLowerCase();if(e=="toppagechanged"){return"OnTopImageInTheViewChanged"}else{if(e=="click"){return"OnMouseClick"}else{if(e=="dblclick"){return"OnMouseDoubleClick"}else{if(e=="mousemove"){return"OnMouseMove"}else{if(e=="rightclick"){return"OnMouseRightClick"}else{if(e=="pageareaselected"){return"OnImageAreaSelected"}else{if(e=="pageareaunselected"){return"OnImageAreaDeSelected"}}}}}}}return d.trim(f)};d.UI=d.UI||{};d.UI.DWTAxViewer=c});Dynamsoft.Ready(function(d,b){if(!d.product.bActiveXEdition){return}var c=Dynamsoft.navInfo;function a(e){var f=this,g=e||{};f._containerID=g.containerID||"dwtcontrolContainer";f._strWidth=g.width||270;f._strHeight=g.height||350;f._errorCode=0;f._errorString="";f.__licenseInfo=false;if(d.isString(f._strWidth)&&f._strWidth.indexOf("%")>0){}else{f._strWidth=[parseInt(f._strWidth),"px"].join("")}if(d.isString(f._strHeight)&&f._strHeight.indexOf("%")>0){}else{f._strHeight=[parseInt(f._strHeight),"px"].join("")}f._strObjectName=f._containerID+"_Obj";f.__config=g;f.__OnPluginReady=g.onPluginReady;f.__OnPluginNotReady=g.onPluginNotReady;f.Addon={};if(d.UI.DWTAxViewer){f.Viewer=new d.UI.DWTAxViewer(f)}f._strDWTInnerContainerID=f._containerID+"_CID";f._strDWTNonInstallInnerContainerID=f._containerID+"_NonInstallCID";var h=document.createElement("div");document.body.appendChild(h);f._fakeControl=h;f._createControl()}a.prototype._createControl=function(){var f;var i=this,h=i._strWidth,e=i._strHeight,g;if(d.isString(h)){if(h.indexOf("%")>0){h="100%"}else{h=parseInt(h)+2+"px"}}if(d.isString(e)){if(e.indexOf("%")>0){e="100%"}else{e=parseInt(e)+2+"px"}}if(!Dynamsoft.WebTwainEnv.ActiveXInstallWithCAB){g=['<div id="',i._strDWTInnerContainerID,'" style="width:',h,";height:",e,'">','<object id="',i._strObjectName,'" style="width:',i._strWidth,";height:",i._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',d.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>","</div>"]}else{g=['<div id="',i._strDWTInnerContainerID,'" style="width:',h,";height:",e,'">','<object id="',i._strObjectName,'" style="width:',i._strWidth,";height:",i._strHeight,';border:1px solid #AAAAAA"',' codebase="',(c.bWin64)?d.product.getActiveXCABx64Path():d.product.getActiveXCABx86Path(),"#version=",Dynamsoft.WebTwainEnv.ActiveXVersion,'"',' classid="clsid:',d.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>","</div>"]}g.push('<div id="',i._strDWTNonInstallInnerContainerID,'" style="width: ',h,';display:none"></div>');f=document.getElementById(i._containerID);if(f){f.innerHTML=g.join("")}i._fakeControl._objWebTwain=null;i._fakeControl.getSWebTwain=function(){var j=this;if(j._objWebTwain===null){j._objWebTwain=document.getElementById(i._strObjectName)}return j._objWebTwain}};a.prototype.getInstance=function(){var f=this,e=f._fakeControl.getSWebTwain();if(e){return f._fakeControl}return false};a.prototype._isMobileMode=function(){return false};d.detect._controlDetect=function(){var n=d.detect.arySTwains,h=n[0],k=h&&h._fakeControl&&h._fakeControl.getSWebTwain();if(k){var l=Dynamsoft.WebTwainEnv,j=l.ProductKey;var f=false;if(c.bIE){var e=navigator.userAgent.toLowerCase(),i=!c.bOSx64||(e.indexOf("wow64")>=0),m;if(i){m="DynamicPdfCore_"+l.PdfVersion+".dll"}else{m="DynamicPdfCorex64_"+l.PdfVersion+".dll"}if(k.ErrorCode==0&&""!=k.GetAddOnVersion("pdf",m)){f=true}}else{if(k.ErrorCode==0){f=true}}if(f){clearInterval(d.detect._varSeed);var g=function(r){var p,s,q;for(p=0;p<n.length;p++){s=n[p];q=s._fakeControl.getSWebTwain();d.__innerInitEvents(s._fakeControl,s.__config);s._fakeControl.__OnRefreshUI=s.__config.onRefreshUI||"";d.attachProperty(s._fakeControl);d.attachMethod(s._fakeControl);s._fakeControl._attachEvents();s._fakeControl.GetLicenseInfo(r);d.attachAddon(s._fakeControl);if(d.isFunction(s.__OnPluginReady)){s.__OnPluginReady()}}};if(d.startsWith(j,"http://")||d.startsWith(j,"https://")){d.ajax({method:"GET",url:j,onSuccess:function(o){g(o)}})}else{g(j)}}else{if(!d.detect.bNoControlEvent){d.noControl(h);d.detect.bNoControlEvent=true}if(d.isFunction(k.__OnPluginNotReady)){k.__OnPluginNotReady()}}}else{clearInterval(d.detect._varSeed)}};d.ie={};d.ie.DynamicWebTwain=function(e){var f=new a(e);d.detect.arySTwains.push(f);return f};d.ie.closeAll=function(){var e=d.detect.arySTwains,f,h,g;for(f=0;f<e.length;f++){h=e[f];if(h&&h._fakeControl){g=h._fakeControl.getSWebTwain();if(g&&g.ErrorCode==0){g.RemoveAllImages()}}}d.detect.arySTwains=[]};Dynamsoft.WebTwainEnv.RemoveAllAuthorizations=function(){return false}});Dynamsoft.Ready(function(e,c){var b=Dynamsoft;if(!e.product.bPluginEdition){return}var d=Dynamsoft.navInfo,f=document,h=navigator,g;function a(i){var j=this,k=i||{};j._containerID=k.containerID||"dwtcontrolContainer";j._strWidth=k.width||270;j._strHeight=k.height||350;if(e.isString(j._strWidth)&&j._strWidth.indexOf("%")>0){}else{j._strWidth=[parseInt(j._strWidth),"px"].join("")}if(e.isString(j._strHeight)&&j._strHeight.indexOf("%")>0){}else{j._strHeight=[parseInt(j._strHeight),"px"].join("")}j._strObjectName=j._containerID+"_Obj";e.__innerInitEvents(j,k);j.__OnPluginReady=k.onPluginReady;j.__OnPluginNotReady=k.onPluginNotReady;j.__OnRefreshUI=k.onRefreshUI||"";j._objectWebTwain=null;j._strDWTInnerContainerID=j._containerID+"_CID";j._strDWTNonInstallInnerContainerID=j._containerID+"_NonInstallCID";j._vNotAllowedForChrome=false;j._vPluginExist=false;j.Addon={};if(e.UI.DWTAxViewer){j.Viewer=new e.UI.DWTAxViewer(j)}}g=a.prototype;g.getSWebTwain=function(){var i=this;return i._objectWebTwain};g._isMobileMode=function(){return false};g.getInstance=function(){var i=this;if(i._objectWebTwain){return i}return false};g._createControl=function(){var n=this,k,m=n._strWidth,j=n._strHeight,l;if(e.isString(m)){if(m.indexOf("%")>0){m="100%"}else{m=parseInt(m)+2+"px"}}if(e.isString(j)){if(j.indexOf("%")>0){j="100%"}else{j=parseInt(j)+2+"px"}}l=['<div id="',n._strDWTInnerContainerID,'" style="width:',m,";height:",j,'">'];if(d.bIE){if(!Dynamsoft.WebTwainEnv.ActiveXInstallWithCAB){l.push('<object id="',n._strObjectName,'" style="width:',n._strWidth,";height:",n._strHeight,';border:1px solid #AAAAAA"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>")}else{l.push('<object id="',n._strObjectName,'" style="width:',n._strWidth,";height:",n._strHeight,';border:1px solid #AAAAAA"',' codebase="',(d.bWin64)?e.product.getActiveXCABx64Path():e.product.getActiveXCABx86Path(),"#version=",Dynamsoft.WebTwainEnv.ActiveXVersion,'"',' classid="clsid:',e.product.strFullClassID,'" viewastext>','<param name="wmode" value="transparent"/>',"</object>")}}else{var i=n._strWidth;if(e.isString(i)&&i.indexOf("%")==-1){i=(parseInt(i)-2)+"px"}l.push('<embed id="',n._strObjectName,'" style="display: inline; width:',i,";height:",n._strHeight,'" type="',e.product.strMIMEType,'"',' pluginspage="',(d.bWin)?e.product.getMSIPath():e.product.getPKGPath(),'"></embed>')}l.push('</div><div id="',n._strDWTNonInstallInnerContainerID,'" style="width: ',m,';display:none"></div>');k=e.get(n._containerID);if(k){k.innerHTML=l.join("")}n._objectWebTwain=e.get(n._strObjectName)};g._notAllowedForChrome=function(){if(!d.bIE){var i=(h.userAgent.toLowerCase()),j=this;if(i.match(/chrome\/([\d.]+)/)){if(j.__OnNotAllowedForChrome){j.__OnNotAllowedForChrome(j._strDWTInnerContainerID)}else{j._createNonAllowedDivPlugin();e.get(j._strDWTNonInstallInnerContainerID).style.display="inline";e.get(j._strDWTInnerContainerID).style.display="none"}}}};g._createNonAllowedDivPlugin=function(){var p=this,n=e.get(p._strDWTNonInstallInnerContainerID);if(n.innerHTML!=""){return}var k=p._strHeight;if(e.isString(k)&&k.indexOf("%")==-1){k=(parseInt(k)-10)+"px"}var l=['<div style="display: block; border:1px solid black; width:',p._strWidth,";height:",k,'">','<div style="margin: 200px 0 0 0; padding: 5px; font-size: 16px;line-height: 30px; ">',"<div>The Component is not allowed to run on this site.</div>",'<div>Please click <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJeSURBVDhPvZRNSxthEMeX0mNpKS09tP04tdBqobT9WCGJ5kU9pIk5xB4KaoJGmoiNMS+IUiqNB08mjUoUN2vU3WyS9d+ZIbvEZREP0j8Mk5ln5sfs7jxRcM/6f8BKpYKZmRlEIhGUSiUYhjE8uV2eQIal0xmobQ3aeQc/CwWUy+Xh6e3yBM7OzuJMbcPs9cUYzNPeRQLc29tDKpVCOBx2LJ3JQDe66Jo9fI3HEY1GnTOurdVqAnBLgFxwcNBAp3N5w0yTJiTTtA5UVXPy9XpDerwkwOnpaZydtWma/p3s8OgYcZraSwIMhULoXFx6NntZvf4XyWRSAG45QO38wrO51x/Asq7F27nbJMBEIoFm8wiLS0uYm0s6j88QfXUF6ucJXNMe2lAWx+qXD3I+KgHu7OwgEAjI/q2vr2N5eUUaebIWwRovFLTG38AaQtlzLPlP4wKyJcB8Pi83IpfLoVqtYmFh0ZnQ0nU0qHn/uSJ+0G7fiPl8VAL0+/20cyZdsTLm57+hdXIqQAdKE+1T869nCnZfK+I5dsNYAgwGg7i8MhwIG8cbG0Wafo1+X6FPk5VfPUDxqSK+r6oCcEuAU1NT0GhhDQLZVtwsIZvNShFPuDX+FqtPFORfPhS/9X5M8m4JkO/pyakKo0uwof3e/SMF3FQg2PfHCgoEMWlS9nbshgqQt755eIwr3RTYOV+vRlMK1j5OIPlIwY93YxgM39mAIBxzns9HJcDt7W3EYjH5OD6fD5OTk7KbrDo99go12TBbDOV8Peuxh5Zl0Z8ATUdFOjWy55jztt1VArw/Af8A9+n0bhYJ0I4AAAAASUVORK5CYII="/>','at the right end of the address bar and click "<b>Always allow plug-ins</b>". Then refresh/restart the browser.</div>',"</div></div>"].join("");n.innerHTML=l;function m(){e.get(p._strDWTNonInstallInnerContainerID).style.display="none";e.get(p._strDWTInnerContainerID).style.display="inline"}for(var j=0;j<f.links.length;j++){if(f.links[j].className=="DWT_CloseNonAllowedDiv"){f.links[j].onclick=m}}};e.detect._controlDetect=function(){var z=e.detect.arySTwains,s=z[0],v=s&&s._objectWebTwain;if(v){var x=Dynamsoft.WebTwainEnv,u=x.ProductKey;var n=false;if(d.bIE){var l=navigator.userAgent.toLowerCase(),t=!Dynamsoft.navInfo.bOSx64||(l.indexOf("wow64")>=0),y;if(t){y="DynamicPdfCore_"+x.PdfVersion+".dll"}else{y="DynamicPdfCorex64_"+x.PdfVersion+".dll"}if(v.ErrorCode==0&&""!=v.GetAddOnVersion("pdf",y)){n=true}}else{if(v.ErrorCode==0){n=true}}if(n){clearInterval(e.detect._varSeed);var r=function(A){var j,B;for(j=0;j<z.length;j++){B=z[j];e.attachProperty(B);e.attachMethod(B);B._attachEvents();B.GetLicenseInfo(A);e.attachAddon(B);B._objectWebTwain.BrokerProcessType=e.product._iBrokerProcessType;if(!d.bWin){B._objectWebTwain.ImageCaptureDriverType=e.product._iImageCaptureDriverType}if(e.isFunction(B.__OnPluginReady)){B.__OnPluginReady()}}};if(e.startsWith(u,"http://")||e.startsWith(u,"https://")){e.ajax({method:"GET",url:u,onSuccess:function(i){r(i)}})}else{r(u)}}else{var q,m,p,w=h.mimeTypes;if(!d.bIE){var k=true;h.plugins.refresh(false);if(e.env.iPluginLength!=h.plugins.length){for(q=0;q<w.length;q++){if(w[q].type.toLowerCase().indexOf(e.product.strMIMEType.toLowerCase())>-1){location.reload()}}}for(q=0;q<w.length;q++){if(w[q].type.toLowerCase().indexOf(e.product.strMIMEType.toLowerCase())>-1){for(p=0;p<z.length;p++){m=z[p];k=false;m._vPluginExist=true;if(m._vNotAllowedForChrome==false){m._notAllowedForChrome();m._vNotAllowedForChrome=true}}}}if(k&&!e.detect.bNoControlEvent){e.noControl(s);e.detect.bNoControlEvent=true}}else{if(!e.detect.bNoControlEvent){e.noControl(s);e.detect.bNoControlEvent=true}}if(e.isFunction(s.__OnPluginNotReady)){s.__OnPluginNotReady()}}}else{clearInterval(e.detect._varSeed)}};e.plugin={};e.plugin.DynamicWebTwain=function(i){var j=new a(i);j._createControl();e.detect.arySTwains.push(j);return j};e.plugin.closeAll=function(){var j=e.detect.arySTwains,k,m,l;for(k=0;k<j.length;k++){m=j[k];if(m&&m._objectWebTwain){l=m._objectWebTwain;if(l&&l.ErrorCode==0){l.RemoveAllImages()}}}e.detect.arySTwains=[]};Dynamsoft.WebTwainEnv.RemoveAllAuthorizations=function(){return false}});(function(b,I,P){var L=Dynamsoft.navInfoSync,o=b,U=Dynamsoft.dcp,K=o.win,C=!0,R=!1,d={OK:0,BadVersion:1,Error:2};var x={bConnected:false,versionInfo:function(af,aa,ae){var ad=0,ab=function(al,ai){var ah=[x._getPreUrl(af,aa),"fa/VersionInfo?ts=",b.now()].join(""),ag,ak;ag=[b.product.getDWTPrefix(),b.product.getServerVersionInfo()].join("");ak=b.stringify({id:"1",method:"VersionInfo",version:ag,parameter:[]});if(I.OnWebTwainInitMessage){var aj=I.CustomizableDisplayInfo.generalMessages.checkingDWTVersion;I.OnWebTwainInitMessage(aj,EnumDWT_InitMsg.Info)}b.ajax({method:"POST",url:ah,data:ak,onSuccess:al,onError:ai})},ac=function(){x.bConnected=false;if(I.OnWebTwainInitMessage){I.OnWebTwainInitMessage(I.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED,EnumDWT_InitMsg.NotInstalledError)}if(ae){T(ae,d.Error,I.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)}},Z=function(ah){var ag=U._getJSON(ah);if(ag&&"result" in ag){ag=ag.result;if(b.isArray(ag)&&ag.length>0){if(ae){setTimeout(function(){var aj=ag[0],ak=ag.length>1?ag[1]:"",ai=ag.length>2?ag[2]:0;if(ak!==""){if(I.OnWebTwainInitMessage){I.OnWebTwainInitMessage(ak,EnumDWT_InitMsg.Error)}if(ae){T(ae,d.Error,I.CustomizableDisplayInfo.errorMessages.ERR_MODULE_NOT_INSTALLED)}}else{var al="The WebTwain version is: "+aj;if(I.OnWebTwainInitMessage){I.OnWebTwainInitMessage(al,EnumDWT_InitMsg.Info)}if(ai=="64"){Dynamsoft.dcp.b64bit=true}ae(d.OK,af,aa,aj)}},0)}return}}setTimeout(ac,1000)};ab(Z,ac)},_getPreUrl:function(ab,Z){var aa;if(L.bSSL){aa="https://"}else{aa="http://"}return[aa,ab,":",Z,"/"].join("")}};b.DynamicWebTwain=R;var l=K.document,i,m,N=b.each,e="dwt",h=0,E=1,w=2,z=3,T=function(Z,ac,ab,aa){if(b.isFunction(Z)){setTimeout(function(){Z(ac,ab,aa)},10)}};function G(){try{if(typeof WebAssembly==="object"&&typeof WebAssembly.instantiate==="function"){var Z=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(Z instanceof WebAssembly.Module){return new WebAssembly.Instance(Z) instanceof WebAssembly.Instance}}}catch(aa){}return false}b.__innerInitEvents=function(aa,Z){if(Z){N(["onAfterOperate","onBeforeOperate","onOperateStatus","onBitmapChanged","onGetFilePath","onImageAreaDeSelected","onImageAreaSelected","onMouseClick","onMouseDoubleClick","onMouseMove","onMouseRightClick","onPreAllTransfers","onPreTransfer","onPostLoad","onPostTransfer","onPostTransferAsync","onPreAllTransfersAsync","onPostAllTransfers","onSourceUIClose","onTopImageInTheViewChanged","onTransferCancelled","onTransferError","onInternetTransferPercentage","onInternetTransferPercentageEx","onRemoteScanStatusAsync"],function(ab){aa["__O"+ab.substring(1)]=Z[ab]||""})}};b.replaceControl=function(aa,Z){I.ContainerMap[aa]=Z};i=function(aa,ab,ah,Z){var aj=b.product,ag=o.getNavInfo(),af,ad;if(Z&&Z._customIP&&(!b.isLocalIP(Z._host))){if(b.isFunction(Dynamsoft.OnRemoteWebTwainNotFoundCallback)){var ac=Z._port;Dynamsoft.OnRemoteWebTwainNotFoundCallback(aj.name,Z._host,ac,Z._ssl,b.env.bMobile)}return}if(ag.bMac){if(aa){b.one(aa).before(b.install._strNonInstallDIV);af=b.get(b.install._divDWTNonInstallContainerID);if(af){af.style.width=ab;af.style.height=ah}b.show(b.install._divDWTNonInstallContainerID);b.hide(aa)}if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(Dynamsoft.OnWebTwainNotFoundOnMacCallback)){ad=aj.bHTML5Edition?Dynamsoft.dcp.getDSPath():b.product.getPKGPath();Dynamsoft.OnWebTwainNotFoundOnMacCallback(aj.name,ad,aj.bHTML5Edition,ag.bIE,ag.bSafari,b.detect.ssl,b.env.strIEVersion)}}else{if(ag.bLinux){if(aa){b.one(aa).before(b.install._strNonInstallDIV);af=b.get(b.install._divDWTNonInstallContainerID);if(af){af.style.width=ab;af.style.height=ah}b.show(b.install._divDWTNonInstallContainerID);b.hide(aa)}if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(Dynamsoft.OnWebTwainNotFoundOnLinuxCallback)){var ae,ai;ae=Dynamsoft.dcp.getLinuxHTML5DebPath();ai=Dynamsoft.dcp.getLinuxHTML5RpmPath();Dynamsoft.OnWebTwainNotFoundOnLinuxCallback(aj.name,ae,ai,aj.bHTML5Edition,ag.bIE,ag.bSafari,b.detect.ssl,b.env.strIEVersion)}}else{if(ag.bChrome||ag.bSafari||ag.bFirefox||ag.bOpera||I.IfUseActiveXForIE10Plus==R||(!I.ActiveXInstallWithCAB&&ag.bIE)){if(aa){b.one(aa).before(b.install._strNonInstallDIV);af=b.get(b.install._divDWTNonInstallContainerID);if(af){af.style.width=ab;af.style.height=ah}b.show(b.install._divDWTNonInstallContainerID);b.hide(aa)}if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(Dynamsoft.OnWebTwainNotFoundOnWindowsCallback)){ad="";if(ag.bIE){ad=Dynamsoft.dcp.getDSPath()}else{if(aj.bHTML5Edition){ad=Dynamsoft.dcp.getDSPath()}else{ad=aj.getMSIPath()}}Dynamsoft.OnWebTwainNotFoundOnWindowsCallback(aj.name,ad,aj.bHTML5Edition,ag.bIE,ag.bSafari,b.detect.ssl,b.env.strIEVersion)}}}}};m=function(Z){var aa=o.getNavInfo();if(aa.bChrome){b.one(Z).before(b.install._strNonInstallDIV);b.show(b.install._divDWTNonInstallContainerID);b.hide(Z);if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}if(b.isFunction(Dynamsoft.OnWebTwainOldPluginNotAllowedCallback)){Dynamsoft.OnWebTwainOldPluginNotAllowedCallback(b.product.name)}}};b.detect.getVersionArray=function(Z){var aa=Z.toLowerCase().replace(b.product.name.toLowerCase()+" ","");aa=b.replaceAll(aa,"[.]",",");return aa.split(",")};b.detect.isDWTVersionLatest=function(aa){var ad=o.getNavInfo();if(b.isUndefined(aa)){return R}var af=aa.toString().toLowerCase();var ae=b.detect.getVersionArray(af),Z,ag;if(ad.bIE&&(b.product.bPluginEdition||b.product.bActiveXEdition)){Z=I.ActiveXVersion}else{if(b.product.bPluginEdition){Z=I.PluginVersion}else{Z=b.product.getServerVersionInfo(true)}}Z=b.replaceAll(String(Z),"[.]",",");ag=Z.split(",");var ab=ae.length>ag.length?ae.length:ag.length;for(var ac=0;ac<ab;ac++){if(ae[ac]==null){ae[ac]=0}if(ag[ac]==null){ag[ac]=0}if(parseInt(ae[ac])<parseInt(ag[ac])){return R}else{if(parseInt(ae[ac])>parseInt(ag[ac])){return C}}}return C};var O=function(ad,ai){var ae=o.getNavInfo();if(b.isFunction(Dynamsoft.OnWebTwainNeedUpgradeCallback)){var ac={},aa,ab;if(ae.bWin){if(ae.bIE){ab=Dynamsoft.dcp.getDSPath()}else{var ag=b.product;if(ag.bHTML5Edition){ab=Dynamsoft.dcp.getDSPath()}else{ab=ag.getMSIPath()}}aa=EnumDWT_PlatformType.enumWindow}else{if(ae.bLinux){var Z,af;Z=Dynamsoft.dcp.getLinuxHTML5DebPath();af=Dynamsoft.dcp.getLinuxHTML5RpmPath();ab=Z;ac.deb=Z;ac.rpm=af;aa=EnumDWT_PlatformType.enumLinux}else{if(b.product.bHTML5Edition){ab=Dynamsoft.dcp.getDSPath()}else{ab=b.product.getPKGPath()}aa=EnumDWT_PlatformType.enumMac}}ac["default"]=ab;var ah=b.one(".dynamsoft-dialog-license");if(ah&&ah.getEL()){ah.getEL().style.display="none"}b.detect.needUpgrade=C;Dynamsoft.OnWebTwainNeedUpgradeCallback(b.product.name,ac,b.product.bHTML5Edition,aa,ae.bIE,ae.bSafari,b.detect.ssl,b.env.strIEVersion,b.detect.bPromptJSOrServerOutdated,ad,ai)}},k=function(ab){if(!b.detect.bNeedUpgradeEvent&&!b.detect.isDWTVersionLatest(ab.VersionInfo)){b.detect.bNeedUpgradeEvent=C;if(!I.UseDefaultInstallUI&&b.isFunction(I.OnWebTwainNeedUpgrade)){I.OnWebTwainNeedUpgrade();return}if(ab&&ab._customIP&&(!b.isLocalIP(ab._host))){if(b.isFunction(Dynamsoft.OnRemoteWebTwainNeedUpgradeCallback)){var Z=ab._port;Dynamsoft.OnRemoteWebTwainNeedUpgradeCallback(b.product.name,ab._host,Z,ab._ssl)}return}if(ab._isBindViewer()){var aa=ab._containerElement;if(b.isString(aa)){aa=b.get(aa)}b.one(aa).before(b.install._strNonInstallDIV);b.show(b.install._divDWTNonInstallContainerID);b.hide(aa);if(b.install._divDWTemessageContainer!=""){b.hide(b.install._divDWTemessageContainer)}O()}}};var q=function(Z){var aa=Z||{};if(aa.basePath){b.env.basePath=aa.basePath}if(aa.pathType){b.env.pathType=aa.pathType}if(!b.isUndefined(aa.bDiscardBlankImage)){b.config.bDiscardBlankImage=aa.bDiscardBlankImage}if(aa.msgPrefix){b.config.msgPrefix=aa.msgPrefix}if(aa.msgSuffix){b.config.msgSuffix=aa.msgSuffix}if(aa.detectType){b.detect.detectType=aa.detectType}if(aa.tryTimes){b.detect.tryTimes=aa.tryTimes}if(aa.onReady){I.OnWebTwainReady=aa.onReady}if(aa.onNotAllowedForChrome){b.detect.onNotAllowedForChrome=aa.onNotAllowedForChrome}if(aa.onNoControl){b.detect.onNoControl=aa.onNoControl}},F=function(ad){var Z=I.Containers,ah=o.getNavInfo(),ae,ac,ag,ab,ai,af,ak=b.Promise.resolve(0);if(Z.length>0){K.DCP_DWT_OnClickCloseInstall();if(!b.isUndefined(ad)){ai=ad._containerElement;af=ad}else{for(ac=0;ac<Z.length;ac++){if(b.product.bHTML5Edition){ag=Z[ac].WebTwainId;if(X(ag)){af=I.ContainerMap[ag];if(af){break}}}else{if(Z[ac].Container){ab=Z[ac].Container}else{if(Z[ac].ContainerId){ab=b.get(Z[ac].ContainerId)}}if(!v(ab)||!ab.id){continue}af=I.ContainerMap[ab.id];if(af){break}}}}if(af){if(b.product.bHTML5Edition){if(af._bLocalService){ak=af._innerFunRawV2("LogLevel").then(function(){k(af)},function(){if(af.ErrorCode==-2207){if(!I.UseDefaultInstallUI&&b.isFunction(I.OnWebTwainNeedUpgradeWebJavascript)){I.OnWebTwainNeedUpgradeWebJavascript(af.ErrorString)}else{if(!b.detect.bPromptJSOrServerOutdated){b.detect.bPromptJSOrServerOutdated=C}}}k(af)})}}else{k(af)}}}var aj=[];for(ac=0;ac<Z.length;ac++){if(b.product.bHTML5Edition){ag=Z[ac].WebTwainId}else{ag=Z[ac].ContainerId}ae=I.ContainerMap[ag];if(ae){if(b.product.bHTML5Edition){if(ae._isBindViewer()){if(ae.Width<=0||ae.Height<=0){if(ae.Width<=0){ae.Width=270}if(ae.Height<=0){ae.Height=350}}}if(ae._bLocalService){aj.push(g(ae))}else{b.License.checkProductKey(ae,{Core:true})}}else{ae.IfAllowLocalCache=true;ae.IfShowFileDialog=true;ae.IfDisableSourceAfterAcquire=true;ae.BrokerProcessType=b.product._iBrokerProcessType;if(ac==0){if(b.License.checkProductKey(ae,{Core:true})||b.License.checkProductKey(ae,{Webcam:true},true)){}else{b.License.checkProductKey(ae,{Core:true},false,true)}}if(!ah.bWin){ae.ImageCaptureDriverType=b.product._iImageCaptureDriverType}}}ae=null;if(aj.length>0){ak=ak.then(function(){return Dynamsoft.Lib.Promise.all(aj)})}}Z=null;var aa=Dynamsoft.initOrder;if(aa[0]==e){aa.splice(0,1)}ak=ak.then(function(){if(b.isFunction(I.OnWebTwainReady)){I.OnWebTwainReady()}else{if(b.isFunction(K.Dynamsoft_OnReady)){K.Dynamsoft_OnReady()}}})},g=function(Z){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_ConfiguringDWT);return Z._innerFunV2("IfDisableSourceAfterAcquire","[1]").then(function(){var ac=o.getNavInfo(),aa=Dynamsoft.EnumDWT_Driver.TWAIN,af=Z,ae=false,ab=false,ad=false;if(af._bRemoteMode){if(af.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumWindow){ad=true}else{if(af.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumLinux){ab=true}else{if(af.__serverPlatform==Dynamsoft.EnumDWT_PlatformType.enumMac){ae=true}}}}else{ae=ac.bMac;ab=ac.bLinux;ad=ac.bWin}if(ae){aa=Dynamsoft.EnumDWT_Driver.TWAIN_AND_ICA}else{if(ab){aa=Dynamsoft.EnumDWT_Driver.SANE}}Z._driverType=aa}).then(function(){b.License.checkProductKey(Z,{Core:true})})},X=function(Z){if(Z==""||!o.isString(Z)&&!o.isNumber(Z)){return R}return C},v=function(Z){if(Z&&!b.isString(Z)){return C}return R},u=function(Z){var ab;if(Z.Container){ab=Z.Container.id}else{if(Z.ContainerId){ab=Z.ContainerId}}if(v(b.get(ab))){var aa;if(b.isString(Z.WebTwainId)){aa=I.ContainerMap[Z.WebTwainId]}else{aa=I.ContainerMap[ab]}if(aa){return R}return C}return R},c=function(){if(!b.detect.StartWSTimeoutId&&b.detect.arySTwains.length==0){b.detect.StartWSTimeoutId=setTimeout(function(){b.detect.StartWSTimeoutId=R;b.startWS()},100)}},s=function(){if(!b.detect.StartWSByIPTimeoutId&&b.detect.arySTwainsByIP.length==0){b.detect.StartWSByIPTimeoutId=setTimeout(function(){b.detect.StartWSByIPTimeoutId=R;b.startWSByIP()},100)}};b.detect.__WebTwainMain=function(ae,aa,aj){var ag={id:ae.WebTwainId,width:ae.Width,height:ae.Height};if(ae.Container){ag.container=ae.Container;ag.containerID=ae.Container.id}else{if(ae.ContainerId){ag.container=b.get(ae.ContainerId);ag.containerID=ae.ContainerId}}if(!X(ag.id)){if(v(b.get(ag.containerID))){ag.id=ag.containerID}else{ag.id=ag.containerID="dwtcontrolContainer"}}if(I.UseDefaultInstallUI){ag.onNotAllowedForChrome=m;ag.onNoControl=i}else{ag.tAllowedForChrome=I.OnWebTwainOldPluginNotAllowed;ag.onNoControl=I.OnWebTwainNotFound}q(ag);if(b.product.bHTML5Edition){o.mix(ag,ae.bLocalService?{port:ae.port,HTTPPort:(b.detect.ssl?443:80),bLocalService:true}:{bLocalService:false});ag.onReady=function(am){b.replaceControl(ag.id,am);if(b.isFunction(aa)){var al={stwain:am};if(aj){b.mix(al,aj)}aa(al)}};var ak,af,ai;for(af=0;af<b.detect.arySTwains.length;af++){ai=b.detect.arySTwains[af];if(ag.id==ai._id){ag.id=ag.id+"_"+o.getRandom()}if(ai._containerElement&&(ag.container==ai._containerElement||ag.containerID==ai._containerElement.id)){ag.containerID=""}}if(v(b.get(ag.containerID))){ag.bNoViewer=false}else{ag.bNoViewer=true}ak=new b.html5.STwain(ag);b.detect.arySTwains.push(ak);if(b.detect.bFirst){b._init(ag)}b.detect.bFirst=false;return ak}else{var ad,ac,ab,Z;ag.onPluginReady=function(){b.replaceControl(ag.id,ad.getInstance())};ag.onPluginNotReady=function(){if(b.isFunction(K.Dynamsoft_OnNotReady)){K.Dynamsoft_OnNotReady()}};ad=new b.DynamicWebTwain(ag);ab=0;Z=I.Containers;for(ac=Z.length-1;ac>=0;ac--){var ah=Z[ac];if(ah.Container){if(v(ah.Container)){ab++}}else{if(ah.ContainerId){if(v(b.get(ah.ContainerId))){ab++}}}}if(b.detect.arySTwains.length==ab){b.detect._varSeed=setInterval(b.detect._controlDetect,200)}return ad}};I.Unload=function(){var ac,ag,Z,af,aa,ae,ad=[I.Containers,I.DynamicContainers];if(b.closeAll){b.closeAll()}ae=I.ContainerMap;for(ag=0;ag<2;ag++){ac=ad[ag];if(ac){if(b.product.bHTML5Edition){for(Z=0;Z<ac.length;Z++){aa=ac[Z].WebTwainId;if(aa&&(aa in ae)){af=ae[aa];if(af){af.__unload();delete ae[aa]}}}}else{for(Z=ac.length-1;Z>=0;Z--){if(ac[Z].Container){af=ac[Z].Container;aa=af.id}else{aa=ac[Z].ContainerId;if(aa){af=b.get(aa)}}if(af){if((aa in ae)&&ae[aa]){delete ae[aa]}af.innerHTML=""}}}}}b.page.bUnload=C;if(b.page.OnUnload){b.page.OnUnload()}I.initQueue.splice(0);for(Z=0;Z<Dynamsoft.unloadQueue.length;Z++){var ab=Dynamsoft.unloadQueue[Z];if(b.isFunction(ab)){ab()}}Dynamsoft.unloadQueue.splice(0);I.DynamicContainers.splice(0);b.detect.arySTwains.splice(0);b.detect.arySTwainsByIP.splice(0);if(b.MobileFuns){return b.MobileFuns.unloadWasm()}else{return b.Promise.resolve()}};var J=function(){var ac=I.Containers,ab,aa,ad;for(aa=0;aa<ac.length;aa++){var Z;if(v(b.get(ac[aa].ContainerId))){Z=ac[aa].ContainerId;if(X(ac[aa].WebTwainId)){Z=ac[aa].WebTwainId}}if(Z){ab=I.ContainerMap[Z];if(!ab){setTimeout(J,200);return}}}b.closeLoadingMsg();ac=null;F()},y=function(ac){if(ac&&"readyObj" in ac){var aa=ac.readyObj;if(aa){var ab=ac.stwain,Z=aa.totalCount;aa.readyCount=aa.readyCount+1;if(aa.readyCount>=Z){F(ab)}return}}F(ac)},W=function(af,Z,ad){var ae=I.Containers,ab,aa;if(b.config.usingMainMode){b.closeLoadingMsg();b.detect.hideMask();return}if(!ae||ae.length===0){b.closeLoadingMsg();b.detect.hideMask();b.log("DEnv.Containers was not set.");return}if(U.bEnhancedMode){b.product.host=af;b.detect.urls.splice(0);b.detect.urls.push({port:Z,ssl:L.bSSL});b.detect.cUrlIndex=0}c();var ac={totalCount:ae.length,readyCount:0};for(ab=0;ab<ae.length;ab++){aa=ae[ab];if(!v(b.get(aa.ContainerId))){aa.bNoViewer=true}if(ad){aa.bLocalService=false;aa.ip="";aa.port=0}else{aa.bLocalService=true;if(U.bEnhancedMode){aa.port=Z}}b.detect.__WebTwainMain(aa,y,{readyObj:ac})}},A=function(){if(b.config.usingMainMode){b.closeLoadingMsg();return}var aa,ab=I.Containers;if(ab===R||ab.length===0){b.log("DEnv.Containers was not set.");b.closeLoadingMsg();return}for(aa=0;aa<ab.length;aa++){var Z=ab[aa];if(u(Z)){b.detect.__WebTwainMain(Z)}}setTimeout(J,100)},B=function(ae){var ah,ad=ae.bNoViewer,ac=ae.id,ab=ae.container,al=ae.containerID,aj=ae.host,am=ae.port,ak=(aj&&am&&am>0)?{host:aj,port:am}:R,ag=ae.asyncSuccessFunc,aa=ae.asyncFailureFunc;if(!b.detect.onNoControl){b.detect.onNoControl=i}if(!ae.bNoViewer&&(!b.isString(al)||al==""||!ab&&!b.get(al))){ad=true;al=0}else{if(I.Containers&&!ad){var af,Z=I.Containers;for(af=0;af<Z.length;af++){if(Z[af].ContainerId==al){b.detect.hideMask();if(b.isFunction(aa)){b._safePromptCustomMsg(function(){aa(I.CustomizableDisplayInfo.errorMessages.ERR_CreateID_MustNotInContainers)})}return R}}}if(!ab){ab=b.get(al)}}ah=I.ContainerMap[ac];if(ah){b.detect.hideMask();if(b.isFunction(ag)){ag(ah)}return ah}if(!ae.bLocalService){if(!Dynamsoft.WasmEnv){b.detect.hideMask();b._safePromptCustomMsg(function(){aa(I.CustomizableDisplayInfo.errorMessages.ERR_CreateID_WasmEnvNotLoaded)});return R}}if(ak){s()}else{c()}var ai={id:ac,container:ab,customIP:false,width:ad?0:300,height:ad?0:300,bNoViewer:ad,bLocalService:ae.bLocalService};if(!ad){if(ab.style.width){ai.width=ab.style.width}if(ab.style.height){ai.height=ab.style.height}}if(ak){ai.customIP=true;ai.host=ak.host;ai.port=ak.port}ai.onReady=function(an){K.DCP_DWT_OnClickCloseInstall();if(!an){b.closeLoadingMsg();b.detect.hideMask();if(b.isFunction(aa)){aa(I.CustomizableDisplayInfo.errorMessages.ERR_CreateID_NotContainer)}return false}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_ConfiguringDWT);var ao={};ao.WebTwainId=an._id;if(an._containerElement&&an._containerElement.id){ao.ContainerId=an._containerElement.id}I.DynamicContainers.push(ao);I.ContainerMap[an._id]=an;if(!I.IfDisableDefaultSettings&&an._bLocalService){g(an).then(function(){b.detect.hideMask();if(b.isFunction(ag)){ag(an)}k(an)},function(){b.detect.hideMask();if(an.ErrorCode==-2207){if(!b.detect.bPromptJSOrServerOutdated){b.detect.bPromptJSOrServerOutdated=C}}k(an)})}else{b.detect.hideMask();if(b.isFunction(ag)){ag(an)}}return true};return new b.html5.CreateDWTObject(ai)};function t(){if(Dynamsoft.WasmEnv&&Dynamsoft.WebTwainEnv.WasmConfig){if(Dynamsoft.WebTwainEnv.WasmConfig.fetchOptions){Dynamsoft.WasmEnv.fetchOptions=Dynamsoft.WebTwainEnv.WasmConfig.fetchOptions}if(Dynamsoft.WebTwainEnv.WasmConfig.maxHeapSize){Dynamsoft.WasmEnv.maxHeapSize=Dynamsoft.WebTwainEnv.WasmConfig.maxHeapSize}}}I.Load=function(){b.waitForScripts().then(function(){return I.Unload()}).then(function(){if(b.detect.wasmScriptLoaded&&Dynamsoft.WasmEnv&&!Dynamsoft.WasmEnv.wasmLoad){t();try{Dynamsoft.WasmEnv.load(I.ProductKey);Dynamsoft.WasmEnv.wasmLoad=true}catch(Z){if(Z){console.log(Z.message)}}}T(S)})};I.CheckConnectToTheService=function(af,aa,ac,Z){if(b.detect.scriptLoaded){if(b.product.bHTML5Edition){var ab=0,ae=af,ah=aa,ag=ac,ad=Z;if(b.isFunction(ae)&&b.isFunction(ah)){ag=ae;ad=ah;ae=null;ah=null}if(!ae){ae=Dynamsoft.dcp.host}if(!ah){for(ab=0;ab<Dynamsoft.Lib.detect.ports.length;ab++){if(Dynamsoft.navInfoSync.bSSL&&Dynamsoft.Lib.detect.ports[ab].ssl||!Dynamsoft.navInfoSync.bSSL&&!Dynamsoft.Lib.detect.ports[ab].ssl){ah=Dynamsoft.Lib.detect.ports[ab].port;break}}}x.versionInfo(ae,ah,function(aj,al,ak,ai){if(aj===d.OK){if(ai&&ai.length>0){if(Q(ai,b.product.getServerVersionInfo(true))){if(b.isFunction(ag)){ag(al,ak)}return}}}if(b.isFunction(ad)){ad()}},ad)}else{if(b.isFunction(Z)){Z()}}}else{setTimeout(function(){I.CheckConnectToTheService(af,aa,ac,Z)},500)}};I.ConnectToTheService=I.Load;I.CreateDWTObject=function(ag,am,aa,ae,ad,Z){var af=ad,al=Z,ah;if(arguments.length<=3){af=am;al=aa;ah={WebTwainId:ag}}else{ah={WebTwainId:ag,Host:am,Port:aa,PortSSL:ae}}if(!b.product.bHTML5Edition){if(b.isFunction(al)){b._safePromptCustomMsg(function(){al(I.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)})}return R}var ac=ag;if(b.isShadowRoot(ac)){var aj=document.createElement("div");ac.appendChild(aj);ac=aj}if(b.isDOM(ac)){var ak=b.getShadowRoot(ac);if(ak){var ai="?t=20200811",ab=document.createElement("style");ab.innerHTML=['@import url("',Dynamsoft.WebTwainEnv.ResourcesPath,"/src/dynamsoft.viewer.css",ai,'")'].join("");ak.appendChild(ab)}ah.Container=ac;if(!ac.id||ac.id==""){ac.id=["dwt_",b.getRandom()].join("")}ah.WebTwainId=ac.id}else{if(!b.isString(ag)){if(b.isFunction(al)){al(b.Errors.container_id_not_string())}return R}if(!b.get(ag)){if(b.isFunction(al)){al(b.Errors.container_id_not_exist(ag))}return R}}if(b.isUndefined(ah.UseLocalService)){if(b.isUndefined(I.UseLocalService)){if(b.env.bMobile){ah.UseLocalService=false}else{ah.UseLocalService=true}}else{ah.UseLocalService=I.UseLocalService}}return n(ah,af,al)};I.CreateDWTObjectEx=function(aa,ae,ag){var ac=aa.Container;if(b.isShadowRoot(ac)){var ad=document.createElement("div");ac.appendChild(ad);ac=ad}if(b.isDOM(ac)){var ab=b.getShadowRoot(ac);if(ab){var af="?t=20200811",Z=document.createElement("style");Z.innerHTML=['@import url("',Dynamsoft.WebTwainEnv.ResourcesPath,"/src/dynamsoft.viewer.css",af,'")'].join("");ab.appendChild(Z)}if(ab==ac){ac=document.createElement("div");ab.appendChild(ac);aa.Container=ac}if(!ac.id||ac.id==""){ac.id=["dwt_",b.getRandom()].join("")}if(!b.isString(aa.WebTwainId)){aa.WebTwainId=ac.id}}else{if(!b.isString(aa.WebTwainId)){ag(b.Errors.webtwain_id_not_string());return R}}if(b.isUndefined(aa.UseLocalService)){if(b.isUndefined(I.UseLocalService)){if(b.env.bMobile){aa.UseLocalService=false}else{aa.UseLocalService=true}}else{aa.UseLocalService=I.UseLocalService}}return n(aa,ae,ag)};function a(){var Z=['<div style="padding: 0 25px;">',Dynamsoft.MSG.Err_BrowserNotSupportWasm,"</div>",'<div style="padding-top:60px"></div>'];I.ShowDialog(365,0,Z.join(""))}function n(ah,ae,Z){if(!b.product.bHTML5Edition){b._safePromptCustomMsg(function(){Z(I.CustomizableDisplayInfo.errorMessages.ERR_BROWSER_NOT_SUPPORT)});return R}if(ah.UseLocalService===false){if(!G()){b.closeLoadingMsg();a();Z(Dynamsoft.MSG.Err_BrowserNotSupportWasm);return R}}p();var ab={},aa=ah.WebTwainId,ai=ah.Host,ac=ah.Port,af=ah.PortSSL;if(!I._srcUseLocalService&&ah.UseLocalService){b.detect.dcpStatus=h;I._srcUseLocalService=true}if(ah.Container){var ag;ab.container=ah.Container;ab.bNoViewer=false;ag=ab.container.id;if(ag===P||ag===null||ag===""){ab.container.id=["dwt_",o.getRandom()].join("")}ab.containerID=ab.container.id;if(aa===P||aa===null||aa===""){ab.id=ab.container.id}}else{if(aa===P||aa===null||aa===""){ab.id=["dwt_",o.getRandom()].join("");ab.bNoViewer=true}else{if(!o.get(aa)){ab.id=aa;ab.bNoViewer=true}else{ab.id=aa;ab.containerID=aa;ab.bNoViewer=false}}}ab.UseLocalService=ah.UseLocalService;if(!b.isString(ai)||ai==""){ai=Dynamsoft.dcp.host}ab.host=ai;if(L.bSSL){if(!af){if(Dynamsoft.WebTwainEnv.SSLPort){af=Dynamsoft.WebTwainEnv.SSLPort}else{af=18623}}ab.port=af}else{if(!ac){if(Dynamsoft.WebTwainEnv.Port){ac=Dynamsoft.WebTwainEnv.Port}else{ac=18622}}ab.port=ac}if(ae){ab.asyncSuccessFunc=ae}if(Z){ab.asyncFailureFunc=Z}if(b.detect.wasmScriptLoaded&&Dynamsoft.WasmEnv&&!Dynamsoft.WasmEnv.wasmLoad){t();try{Dynamsoft.WasmEnv.load(I.ProductKey);Dynamsoft.WasmEnv.wasmLoad=true}catch(ad){if(ad){console.log(ad.message)}}}b.waitForScripts().then(function(){return new b.Promise(M)}).then(function(){D({callback:function(){ab.bLocalService=true;B(ab)},docViewCallback:function(){ab.bLocalService=false;B(ab)},host:ab.host,port:ab.port,UseLocalService:ab.UseLocalService,dcpFailedCallback:ab.asyncFailureFunc})});return C}var p=function(){var Z=Dynamsoft.initOrder,ab=R;for(var aa=0;aa<Z.length;aa++){if(Z[aa]==e){ab=C;break}}if(!ab){Z.push(e)}},Q=function(ac,ab){var aa=ac.split(","),Z=ab.split(",");return(aa.length>3&&b.trim(aa[0])==Z[0]&&(b.trim(aa[1])>Z[1]||b.trim(aa[1])==Z[1]&&b.trim(aa[2])>Z[2]||b.trim(aa[1])==Z[1]&&b.trim(aa[2])==Z[2]&&parseInt(b.trim(aa[3]))>=parseInt(Z[3])))},f=function(aa,Z){if(b.isLocalIP(aa)){b.LS.item("DWT_port",Z);b.LS.item("DWT_ssl",L.bSSL?"true":"false")}},j=function(ae){var ad,ab="",aa=ae,ac="",Z=o.getNavInfo();if(Z.bMac){ad="mac/MacDWT_"}else{if(Z.bLinux){ad="linux/LinuxDWT_"}else{ad="win/WinDWT_"}}if(!L.bFileSystem){ab="?t="+b.getRandom()}if(aa.length>0&&aa[aa.length-1]!="/"){aa=aa+"/"}if(Z.bWin&&U.b64bit){ac="_x64"}return[aa,"dist/",ad,b.product.getServerVersionInfo(),ac,".zip",ab].join("")},V=function(Z,ad,ac){var ab=j(I.ResourcesPath),aa=function(ag){var ah=0;U.loadZip(ag,ah,function(){var ai=o.getNavInfo();b.detect.hideMask();if(b.isFunction(Dynamsoft.OnWebTWAINDllDownloadSuccessful)){Dynamsoft.OnWebTWAINDllDownloadSuccessful()}if(I.OnWebTwainInitMessage){var aj;if(L.bSSL&&ai.bFirefox){aj=I.CustomizableDisplayInfo.generalMessages.refreshNeeded;I.OnWebTwainInitMessage(aj,EnumDWT_InitMsg.DownloadNotRestartError);return}aj=I.CustomizableDisplayInfo.generalMessages.DWTmoduleLoaded;I.OnWebTwainInitMessage(aj,EnumDWT_InitMsg.Info)}setTimeout(ad,3000)},af)},af=function(ag){b.detect.hideMask();var aj=C;if(I.OnWebTwainInitMessage){var ak=I.CustomizableDisplayInfo.errorMessages.ERR_DWT_NOT_DOWNLOADED;I.OnWebTwainInitMessage(ak,EnumDWT_InitMsg.DownloadError)}if(b.isFunction(Dynamsoft.OnWebTWAINDllDownloadFailure)){var ai={},ah;if(ag.httpCode==404){b.Errors.WebTwainModuleNotExist(ai);ah=C}else{b.Errors.WebTwainModuleDownloadFailure(ai);ah=R}aj=Dynamsoft.OnWebTWAINDllDownloadFailure(b.product.name,ai._errorCode,ai._errorString);if(ah){aj=R}}b.detect.dcpStatus=z;if(b.isFunction(Z.dwtFailedCallback)){Z.dwtFailedCallback()}};if(I.OnWebTwainInitMessage){var ae=I.CustomizableDisplayInfo.generalMessages.downloadingDWTModule;I.OnWebTwainInitMessage(ae,EnumDWT_InitMsg.Info)}b.fetch(ab,{mode:"cors",dataType:"arraybuffer"}).then(aa,af)},r=function(af,ab,Z){var ah=R,ag=R,ac=b.detect,ae=af.host,ad=af.port,aa=1;if(af.UseLocalService===false){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CreatingDWT);b.detect.dcpStatus=w;b.product.host="";f("",0);T(af.docViewCallback);return}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CheckDWT);aa=Z>0?(Z+1):1;if(!ad){b.each(b.detect.ports,function(ai){if(L.bSSL){if(ai.ssl){ad=ai.port}}else{if(!ai.ssl){ad=ai.port}}})}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CheckDWTVersion);x.versionInfo(ae,ad,function(ak,al,aj,ai){if(ak===d.OK){if(ai&&ai.length>0){if(Q(ai,b.product.getServerVersionInfo(true))){b.detect.dcpStatus=w;b.product.host=al;f(al,aj);b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CreatingDWT);if(b.isFunction(af.callback)){af.callback(al,aj)}return}else{}}}if(ab){if(aa>3){b.closeLoadingMsg();b.detect.dcpStatus=z;if(b.isFunction(af.dwtFailedCallback)){af.dwtFailedCallback({code:ak,message:al})}return}else{setTimeout(function(){r(af,C,aa)},1000)}}else{if(I.IfInstallDWTModuleWithZIP){V(af,function(){r(af,C,aa)},function(){r(af,R,aa)})}else{b.closeLoadingMsg();b.detect.dcpStatus=z;if(b.isFunction(af.dwtFailedCallback)){af.dwtFailedCallback({code:ak,message:al})}return}}})},D=function(ae){var ac=Dynamsoft.initOrder,ag=false;if(ac.length>0&&ac[0]===e){var ai=function(ak){if(I.OnWebTwainInitMessage){var al=I.CustomizableDisplayInfo.generalMessages.downloadNeeded;I.OnWebTwainInitMessage(al,EnumDWT_InitMsg.Info)}if(!b.isLocalIP(ae.host)){if(b.isFunction(Dynamsoft.OnRemoteWebTwainNotFoundCallback)){var aj=L.bSSL;Dynamsoft.OnRemoteWebTwainNotFoundCallback(b.product.name,ae.host,ae.port,aj,b.env.bMobile)}}else{i()}if(b.isFunction(ae.dcpFailedCallback)){ae.dcpFailedCallback(ak);if(I.ReConnectToService){setTimeout(function(){D(ae)},300)}}};if(!I.IfCheckDCP){if(!ae.dwtFailedCallback){ae.dwtFailedCallback=ai}r(ae,R,0);return}var aa=function(){b.detect.showMask()},ab=function(){b.detect.hideMask()},ad=function(){var ak=false;if(b.isFunction(K.OnWebTwainShowUpdatingDialog)){ak=K.OnWebTwainShowUpdatingDialog()}if(!ak){var aj=['<div class="dynamsoft-dwt-dlg-tips dynamsoft-dwt-dlg-center">',I.CustomizableDisplayInfo.generalMessages.updatingDService,"</div>",'<div style="padding-top:35px"></div>'];I.ShowDialog(365,0,aj.join(""),0,1)}return true},Z=function(){var aj=false;if(b.isFunction(K.OnWebTwainCloseUpdatingDialog)){aj=K.OnWebTwainCloseUpdatingDialog()}if(!aj){I.CloseDialog()}return true},af=function(aj,ak){ag=true;O(aj,ak)},ah=function(ap){var am=1,al=o.getNavInfo();if(al.bWin){am=ap>0?(ap+1):1;if(am>3){ah=null;b.detect.hideMask();b.detect.dcpStatus=z;if(b.isFunction(ae.dwtFailedCallback)){ae.dwtFailedCallback()}return}}if(!ag){if(!ae.dwtFailedCallback){ae.dwtFailedCallback=function(){var at=o.getNavInfo();b.detect.hideMask();if(b.isFunction(Dynamsoft.OnWebTWAINModuleDownloadManually)){var ar,au;if(at.bLinux){ar=EnumDWT_PlatformType.enumLinux;au={"default":Dynamsoft.dcp.getLinuxHTML5DebPath(),deb:Dynamsoft.dcp.getLinuxHTML5DebPath(),rpm:Dynamsoft.dcp.getLinuxHTML5RpmPath()}}else{if(at.bMac){ar=EnumDWT_PlatformType.enumMac;au={"default":Dynamsoft.dcp.getDSPath()}}else{ar=EnumDWT_PlatformType.enumWindow;au={"default":Dynamsoft.dcp.getDSPath()}}}Dynamsoft.OnWebTWAINModuleDownloadManually(au,ar,at.bIE,at.bSafari,b.detect.ssl,b.env.strIEVersion)}}}if(U.bEnhancedMode){var aq=0,ak=function(av){if(b.isArray(av)&&av.length>1){b.detect.hideMask();var au=av[1],at,ar;if(au){U.currentUserPorts=au;if(au.dwt){at=au.dwt.port;ar=au.dwt.sslPort;if(at==0||ar==0){aq++;if(aq>5){ah(am);return false}setTimeout(function(){U.getPorts(U.strSID,ak,aj)},300);return true}ae.port=(L.bSSL?ar:at);r(ae,R,0);return true}}}if(I.IfInstallDWTModuleWithZIP){V(ae,function(){ah(am)},function(){ah(am)})}else{b.detect.dcpStatus=z;if(b.isFunction(ae.dwtFailedCallback)){ae.dwtFailedCallback()}return}return true},aj=function(){b.detect.hideMask();if(I.IfInstallDWTModuleWithZIP){V(ae,function(){ah(am)},function(){ah(am)})}else{b.detect.dcpStatus=z;if(b.isFunction(ae.dwtFailedCallback)){ae.dwtFailedCallback()}return}return true};U.getPorts(U.strSID,ak,aj);return true}ah=null;r(ae,R,0);return true}var an=b.install._dlgInstall,ao=500;if(!an||!an.open){ag=false;ao=0}setTimeout(ah,ao)};Dynamsoft.managerEnv.IfUpdateService=Dynamsoft.WebTwainEnv.IfUpdateService;Dynamsoft.managerEnv.IfDownload64bitService=Dynamsoft.WebTwainEnv.IfDownload64bitService;U.host=ae.host;U.checkDcpForUpdate(ai,aa,ab,ad,Z,af,ah,I.ProductKey)}else{if(!b.env.stopCheckingForService){setTimeout(function(){D(ae)},1000)}}},S=function(){b.page.bUnload=R;var Z=I.Containers,ab,ah,af,ag=[],ae;for(ab=0;ab<Z.length;ab++){af=Z[ab];if(b.product.bHTML5Edition){ae=af.Container;if(b.isShadowRoot(ae)){var ac=document.createElement("div");ae.appendChild(ac);ae=ac}if(b.isDOM(ae)){var ai=b.getShadowRoot(ae);if(ai){var ad="?t=20200811",aa=document.createElement("style");aa.innerHTML=['@import url("',Dynamsoft.WebTwainEnv.ResourcesPath,"/src/dynamsoft.viewer.css",ad,'")'].join("");ai.appendChild(aa)}if(!ae.id||ae.id==""){ae.id=["dwt_",b.getRandom()].join("")}af.ContainerId=ae.id}if(!b.isString(af.WebTwainId)&&!b.isNumber(af.WebTwainId)||af.WebTwainId==""){if(!b.isString(af.ContainerId)||af.ContainerId==""){af.WebTwainId=["dwt_",b.getRandom()].join("")}else{af.WebTwainId=af.ContainerId}}for(ah=0;ah<ag.length;ah++){if(af.WebTwainId==ag[ah]){af.WebTwainId=af.WebTwainId+"_"+o.getRandom();break}}ag.push(af.WebTwainId)}else{if(o.isString(af.WebTwainId)&&(!o.isString(af.ContainerId)||af.ContainerId=="")){af.ContainerId=af.WebTwainId}}}if(b.product.bHTML5Edition){if(I.UseLocalService===false||(b.isUndefined(I.UseLocalService)&&b.env.bMobile)){if(!G()){b.closeLoadingMsg();a();return}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitWasm)}else{b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitH5)}p();b.waitForScripts().then(function(){return new b.Promise(M)}).then(function(){var aj=true;if(b.isString(I.Host)){U.host=I.Host}if(I.UseLocalService===false||(b.isUndefined(I.UseLocalService)&&b.env.bMobile)){aj=false}D({callback:W,docViewCallback:function(){W("",0,true)},host:U.host,UseLocalService:aj})})}else{b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitActiveX);A()}},M=function(ab,aa){var Z="";/*[Dynamsoft.WebTwainEnv.ResourcesPath,"/src/dynamsoft.imageio.js","?t=20200811"].join("");*/if(I.UseLocalService===false||(b.isUndefined(I.UseLocalService)&&b.env.bMobile)){if(!b.detect.wasmScriptLoaded){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_DownloadingWasm);b.getScript(Z,true,function(ad){b.detect.wasmScriptLoaded=true;t();b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CompilingWasm);try{Dynamsoft.WasmEnv.load(I.ProductKey);Dynamsoft.WasmEnv.wasmLoad=true}catch(ac){console.log(ac)}ab()});return}}else{b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_InitDynamsoftService);if(!b.detect.wasmScriptLoaded&&!Dynamsoft.navInfoSync.bFileSystem&&Dynamsoft.WebTwainEnv.UseCameraAddonWasm){b.getScript(Z,true,function(ad){b.detect.wasmScriptLoaded=true;t();try{Dynamsoft.WasmEnv.load(I.ProductKey);Dynamsoft.WasmEnv.wasmLoad=true}catch(ac){console.log(ac)}})}}ab()};I.DeleteDWTObject=function(ac){var ab=I.ContainerMap,Z;if(!b.product.bHTML5Edition){return R}if(ab&&ac in ab){var aa=ab[ac];if(aa){delete ab[ac];aa.__unload()}}for(Z=0;Z<I.DynamicContainers.length;Z++){if(I.DynamicContainers[Z].WebTwainId==ac){I.DynamicContainers.splice(Z,1);break}}b.detect.hideMask();return C};I.GetWebTwain=function(ab){var ae,ac,ad,af,aa,Z=ab;ae=I.Containers;if(b.isString(Z)){Z=b.get(Z)}else{if(b.isDOM(Z)){}else{if(!Z&&ae&&ae.length>0){for(ad=0;ad<ae.length;ad++){if(ae[ad].Container){Z=ae[ad].Container;break}else{if(ae[ad].ContainerId){if(v(b.get(ae[ad].ContainerId))){Z=b.get(ae[ad].ContainerId);break}}}}}}}af=I.ContainerMap;if(Z&&af&&ae&&ae.length>0){for(ad=0;ad<ae.length;ad++){aa=!1;ac=ae[ad];if(ac.Container){if(ac.Container==Z){if(X(ac.WebTwainId)){aa=ac.WebTwainId}else{aa=ac.Container.id}if(aa&&(aa in af)){return af[aa]}}}else{if(ac.ContainerId){if(ac.ContainerId==Z.id){if(X(ac.WebTwainId)){aa=ac.WebTwainId}else{aa=ac.ContainerId}if(aa&&(aa in af)){return af[aa]}}}}}}return I.GetWebTwainEx(ab)};I.GetWebTwainEx=function(ad){var aa=ad,ac,ab,Z;ac=I.DynamicContainers;if(b.isDOM(aa)){aa=aa.id}else{if(!aa&&ac&&ac.length>0){for(ab=0;ab<ac.length;ab++){if(X(ac[ab])){aa=ac[ab];break}}}}ac=null;if(aa){var ae=I.ContainerMap;if(ae&&(aa in ae)){return ae[aa]}}return null};var H=function(){var Z,aa=Dynamsoft.WebTwainEnv.CustomizableDisplayInfo;if(b.isString(aa.loaderBarSource)&&aa.loaderBarSource!=""){b.loaderBarSource=aa.loaderBarSource}else{Z=Dynamsoft.DWT.defaultEnv.CustomizableDisplayInfo;b.loaderBarSource=Z.loaderBarSource}if(b.isString(aa.loaderBarClassName)&&aa.loaderBarClassName!=""){b.loaderBarClassName=aa.loaderBarClassName}else{Z=Dynamsoft.DWT.defaultEnv.CustomizableDisplayInfo;b.loaderBarClassName=Z.loaderBarClassName}},Y=function(){if(!b.isUndefined(I.ProductKey)){if(Dynamsoft.WebTwainEnv.Port>0||Dynamsoft.WebTwainEnv.SSLPort>0){var Z=[];if(Dynamsoft.WebTwainEnv.Port>0){Z.push({port:Dynamsoft.WebTwainEnv.Port,ssl:false})}else{Z.push({port:18622,ssl:false})}if(Dynamsoft.WebTwainEnv.SSLPort>0){Z.push({port:Dynamsoft.WebTwainEnv.SSLPort,ssl:true})}else{Z.push({port:18623,ssl:true})}b.detect.ports=Z;b.LS.removeItem("DWT_port");b.LS.removeItem("DWT_ssl")}H();b._safePromptCustomMsg();b.each(b._funsAfterConfigLoaded,function(ab){try{if(b.isFunction(ab)){ab()}}catch(ac){}});b.openLoadingMsg();b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_LookingLicense);var aa=b.get("dynamsoft_waiting");if(aa){aa.parentNode.removeChild(aa)}Dynamsoft.Ready(function(){var ai=o.getNavInfo(),ag=L.bFileSystem,aj=b.env.basePath,ad=Dynamsoft.WebTwainEnv.ResourcesPath;if(!ag){var ac=ad;if(typeof(ac)=="undefined"||ac==""){ad=aj}else{if(ac.length>0&&ac.charAt(0)!="/"&&ac.indexOf("//")<0&&aj!=""){ad=[aj,"/",ac].join("")}}if(ad.length>0&&ad.charAt(ad.length-1)=="/"){ad=ad.substr(0,ad.length-1)}Dynamsoft.WebTwainEnv.ResourcesPath=ad}Dynamsoft.managerEnv.resourcesPath=ad;var ah="?t=20200811",af=C,ae=[];var ab=[[ad,"/src/dynamsoft.webtwain.css",ah].join("")],ak=function(){b.detect.cssLoaded=C};if(b.product.bHTML5Edition&&Dynamsoft.WebTwainEnv.UseDefaultViewer){ab.push([ad,"/src/dynamsoft.viewer.css",ah].join(""))}if(ai.bSafari){b.getAllCss(ab,ak);ak()}else{b.getAllCss(ab,ak)}if(ai.bSafari){af=R}ae.push([ad,"/dynamsoft.webtwain.install.js",ah].join(""));if(Dynamsoft.WebTwainEnv.bNpm)ae=[];if(b.product.bHTML5Edition&&Dynamsoft.WebTwainEnv.UseDefaultViewer){ae.push([ad,"/src/dynamsoft.viewer.js",ah].join(""));b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_LoadingViewerJs)}b.getScripts(ae,af,function(al){if(!al){b.log("error: load js failed.");return}b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_AllJsLoaded);b.detect.scriptLoaded=C;if(b.isString(I.Host)){Dynamsoft.dcp.host=I.Host}if(b.product.bHTML5Edition){b.closeAll=b.html5.closeAll}else{if(b.product.bPluginEdition){b.DynamicWebTwain=b.plugin.DynamicWebTwain;b.closeAll=b.plugin.closeAll}else{if(b.product.bActiveXEdition){b.DynamicWebTwain=b.ie.DynamicWebTwain;b.closeAll=b.ie.closeAll}}}if(b.isUndefined(I.UseLocalService)){if(b.env.bMobile){I.UseLocalService=false}else{I.UseLocalService=true}}I._srcUseLocalService=I.UseLocalService;if(b.isArray(Dynamsoft.aryAddonReadyFun)){var am=0;for(;am<Dynamsoft.aryAddonReadyFun.length;am++){var an=Dynamsoft.aryAddonReadyFun[am];if(b.isFunction(an)){try{an(b)}catch(ao){b.log(ao.stack||ao,"error");setTimeout(function(){throw ao},0)}}}Dynamsoft.aryAddonReadyFun=[]}if(I.AutoLoad){b.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_FireBeforeInitEvt);if(I.OnWebTwainWillInit){I.OnWebTwainWillInit()}T(S)}else{b.closeLoadingMsg()}})})}else{/*console.log("ProductKey is undefined!");*/setTimeout(Y,100)}};I.IsLocalServiceConnected=function(){return new b.Promise(function(ac,ab){var aa=U.host,Z;b.each(b.detect.ports,function(ad){if(L.bSSL){if(ad.ssl){Z=ad.port}}else{if(!ad.ssl){Z=ad.port}}});I.CheckConnectToTheService(aa,Z,function(af,ae,ad){ac(!0)},function(){ab(!1)})})};b.domReady(function(){Y();if(L.bIE){if(K.addEventListener){K.addEventListener("unload",I.Unload,false)}}});b.waitForScripts=function(){if(!b.waitForScripts._promise){b.waitForScripts._promise=new Promise(function(Z){b.waitForScripts._resolve=Z;setTimeout(b.waitForScripts,60)})}else{if(b.waitForScripts._resolve&&b.detect.scriptLoaded){b.waitForScripts._resolve()}else{setTimeout(b.waitForScripts,60)}}return b.waitForScripts._promise};if(!K.Dynamsoft_OnClickInstallButton){K.Dynamsoft_OnClickInstallButton=function(){b.hide("dwt-btn-install");b.hide("dwt-install-url-div")}}if(K){b.addEventListener(K,"focus",function(){var Z=I.ContainerMap;if(Z){b.each(Z,function(ab,aa){if(ab&&ab._OnPageFocus){ab._OnPageFocus()}})}});b.addEventListener(K,"blur",function(){var Z=o.getNavInfo();if(Z.bWin){var aa=I.ContainerMap;if(aa){b.each(aa,function(ac,ab){if(ac&&ac._OnPageBlur){ac._OnPageBlur()}})}}});b.addEventListener(l,"visibilitychange",function(){var Z=o.getNavInfo();if(Z.bWin){if(l.visibilityState=="hidden"){var aa=I.ContainerMap;if(aa){b.each(aa,function(ac,ab){if(ac&&ac._OnPageBlur){ac._OnPageBlur()}})}}}})}})(Dynamsoft.Lib,Dynamsoft.WebTwainEnv); 
Dynamsoft.WebTwainEnv.bNpm=true;Dynamsoft.WebTwainEnv.dbrCanvasMaxWH=4096; 
 
Dynamsoft.aryAddonReadyFun=[];Dynamsoft.AddonReady=function(fn){Dynamsoft.aryAddonReadyFun.push(fn);}; 
Dynamsoft.Lib.mix(Dynamsoft,{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""}); 
 
Dynamsoft.AddonReady(function(DL,nil){var Dynamsoft=window.Dynamsoft; 
 
/*
 Dynamsoft JavaScript Library
 Product: Dynamsoft Web Twain
 Web Site: http://www.dynamsoft.com

 Copyright 2021, Dynamsoft Corporation 
 Author: Dynamsoft Support Team
 Module: image io js
 Version: 1.6.2
 @20201222143551.916000+480
 Dynamsoft.WasmEnv.busy() && */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.polyfill=function(a,b,c,e){if(b){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in c||(c[d]={});c=c[d]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof d?a:new d(function(d,b){d(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var d=this;this.asyncExecuteFunction(function(){d.executeBatch_()})}this.batch_.push(a)};var e=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){e(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var d=0;d<a.length;++d){var b=a[d];a[d]=null;try{b()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var d=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var d=this.createResolveAndReject_();try{a(d.resolve,d.reject)}catch(h){d.reject(h)}};d.prototype.createResolveAndReject_=function(){function a(a){return function(f){b||(b=!0,a.call(d,f))}}var d=this,b=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};d.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof d)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};d.prototype.resolveToNonPromiseObj_=function(a){var d=void 0;try{d=a.then}catch(h){this.reject_(h);return}"function"==typeof d?
this.settleSameAsThenable_(d,a):this.fulfill_(a)};d.prototype.reject_=function(a){this.settle_(2,a)};d.prototype.fulfill_=function(a){this.settle_(1,a)};d.prototype.settle_=function(a,d){if(0!=this.state_)throw Error("Cannot settle("+a+", "+d+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=d;this.executeOnSettledCallbacks_()};d.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var f=new b;d.prototype.settleSameAsPromise_=function(a){var d=this.createResolveAndReject_();a.callWhenSettled_(d.resolve,d.reject)};d.prototype.settleSameAsThenable_=function(a,d){var b=this.createResolveAndReject_();try{a.call(d,b.resolve,b.reject)}catch(l){b.reject(l)}};d.prototype.then=function(a,b){function f(a,d){return"function"==typeof a?function(d){try{c(a(d))}catch(q){e(q)}}:d}var c,e,k=new d(function(a,d){c=a;e=d});this.callWhenSettled_(f(a,c),f(b,e));return k};
d.prototype.catch=function(a){return this.then(void 0,a)};d.prototype.callWhenSettled_=function(a,d){function b(){switch(c.state_){case 1:a(c.result_);break;case 2:d(c.result_);break;default:throw Error("Unexpected state: "+c.state_);}}var c=this;null==this.onSettledCallbacks_?f.asyncExecute(b):this.onSettledCallbacks_.push(b)};d.resolve=c;d.reject=function(a){return new d(function(d,b){b(a)})};d.race=function(a){return new d(function(d,b){for(var f=$jscomp.makeIterator(a),e=f.next();!e.done;e=f.next())c(e.value).callWhenSettled_(d,
b)})};d.all=function(a){var b=$jscomp.makeIterator(a),f=b.next();return f.done?c([]):new d(function(a,d){function e(d){return function(b){k[d]=b;g--;0==g&&a(k)}}var k=[],g=0;do k.push(void 0),g++,c(f.value).callWhenSettled_(e(k.length-1),d),f=b.next();while(!f.done)})};return d},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(a){return{value:a,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var e=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var d=e.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,d);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(b){return a.next(b)}function c(b){return a.throw(b)}return new Promise(function(e,d){function f(a){a.done?e(a.value):Promise.resolve(a.value).then(b,c).then(f,d)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,e={next:function(){if(c<a.length){var d=c++;return{value:b(d,a[d]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var d=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var k=0;k<f&&c<d;)if(b[c++]!=a[k++])return!1;return k>=f}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var d=a.length;0<d&&0<c;)if(b[--c]!=a[--d])return!1;return 0>=d}},"es6","es3");var Dynamsoft="undefined"!=typeof Dynamsoft?Dynamsoft:("undefined"!=typeof Dynamsoft?window.Dynamsoft:void 0)||{license:"",workerPathPdfR:"",workerPathPdfW:"",workerPathImgcore:""};Dynamsoft.error=Dynamsoft.error||{};
Dynamsoft.error.code=Dynamsoft.error.code||{};Dynamsoft.error.code.wasmBase=-4E3;Dynamsoft.error.code.wasmException=Dynamsoft.error.code.wasmBase-1;Dynamsoft.error.code.wasmNoModule=Dynamsoft.error.code.wasmBase-1;Dynamsoft.error.code.wasmJsBase=-4100;Dynamsoft.error.code.wasmJsObjectNotInit=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsObjectTerminated=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsObjectInitFailed=Dynamsoft.error.code.wasmJsBase-1;
Dynamsoft.error.code.wasmJsNotLoaded=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsInvalidJson=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsWorkerRunException=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsWorkerRunFailed=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsReadFileFailed=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsCoreTaskException=Dynamsoft.error.code.wasmJsBase-1;
Dynamsoft.error.code.wasmJsProcTaskException=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsSavePdfFailed=Dynamsoft.error.code.wasmJsBase-1;Dynamsoft.error.code.wasmJsSaveTiffFailed=Dynamsoft.error.code.wasmJsBase-1;
Dynamsoft.conststring={version:"1.6.2",logInfo:"logInfo",logDebug:"logDebug",logAll:"logAll",initPending:"pending",initReady:"ready",initFailed:"failed",imgIO:"imgIO",core:"imgCore",imgProc:"imgProc",pdfR:"pdfReader",pdfW:"pdfWriter",binaryBlobType:"application/octet-stream",wasmExtension:".wasm"};
Dynamsoft.WasmEnv={moduleNames:[Dynamsoft.conststring.imgIO,Dynamsoft.conststring.core,Dynamsoft.conststring.imgProc,Dynamsoft.conststring.pdfR,Dynamsoft.conststring.pdfW],imgIO:{name:Dynamsoft.conststring.imgIO,ver:Dynamsoft.conststring.version,status:"",prefixName:"dynamsoft.imageio-",wasmModule:null},imgCore:{name:Dynamsoft.conststring.core,autoLoad:!0,ver:Dynamsoft.conststring.version,status:"",prefixName:"dynamsoft.imagecore-",wasmModule:null},imgProc:{name:Dynamsoft.conststring.imgProc,autoLoad:!0,
ver:Dynamsoft.conststring.version,status:"",prefixName:"dynamsoft.imageProc-",wasmModule:null},pdfReader:{name:Dynamsoft.conststring.pdfR,autoLoad:!0,ver:Dynamsoft.conststring.version,status:"",prefixName:"dynamsoft.pdfReader-",wasmModule:null},pdfWriter:{name:Dynamsoft.conststring.pdfW,autoLoad:!0,ver:Dynamsoft.conststring.version,status:"",prefixName:"dynamsoft.pdfWriter-",wasmModule:null}};Dynamsoft.Enum_ImageType={IT_DIB:-1,IT_RGBA:-2,IT_BMP:0,IT_JPG:1,IT_PNG:3,IT_ALL:5};
Dynamsoft.Enum_ReturnType={RT_AUTO:-1,RT_BINARY:1,RT_BASE64:2};Dynamsoft.Enum_ErrorMessage={PARAMETER_TYPE_ERROR:"Parameter Type not Supported: ",TIMEOUT:"Timeout no Response: ",FILE_STREAM_ERROR:"File Stream Error: ",WASM_EXCEPTION_ERROR:"An WASM exception occurred."};var Dynmasoft=Dynamsoft||{};Dynamsoft.Lib=Dynamsoft.Lib||{};Dynamsoft.Lib.env=Dynamsoft.Lib.env||{};Dynamsoft.b64ToUint6=function(a){return 64<a&&91>a?a-65:96<a&&123>a?a-71:47<a&&58>a?a+4:43===a?62:47===a?63:0};
Dynamsoft.base64DecToArr=function(a,b){a=a.replace(/[^A-Za-z0-9\+\/]/g,"");var c=a.length;b=b?Math.ceil((3*c+1>>>2)/b)*b:3*c+1>>>2;for(var e=new Uint8Array(b),d,f=0,k=0,g=0;g<c;g++)if(d=g&3,f|=Dynamsoft.b64ToUint6(a.charCodeAt(g))<<18-6*d,3===d||1===c-g){for(d=0;3>d&&k<b;d++,k++)e[k]=f>>>(16>>>d&24)&255;f=0}return e};
Dynamsoft.isWasmSupport=function(){try{if("object"===typeof WebAssembly&&"function"===typeof WebAssembly.instantiate){var a=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(a instanceof WebAssembly.Module)return new WebAssembly.Instance(a)instanceof WebAssembly.Instance}}catch(b){}return!1};Dynamsoft.random=function(){return(Date.now()%10086).toString(36).slice(2)+Math.random().toString(36).slice(2)};
Dynamsoft.readFile=function(a){return new Promise(function(b,c){var e=Object.prototype.toString.call(a);if("[object String]"===e)0===a.indexOf("blob:")||0<a.indexOf(".jpg")||0<a.indexOf(".jpeg")||0<a.indexOf(".png")||0<a.indexOf(".bmp")||0<a.indexOf(".dib")||0<a.indexOf(".pdf")||0<a.indexOf(".tiff")||0<a.indexOf(".tif")?fetch(a,{mode:"cors"}).then(function(a){return a.arrayBuffer()}).then(function(a){return b(a)}).catch(function(a){return Promise.reject(a)}):c("Error url: Can not read the file URL");
else if("[object Blob]"===e){var d=new FileReader;d.readAsArrayBuffer(a);d.onload=function(){var a=d.result;d=null;b(a)}}else"[object FileList]"===e||"[object File]"===e?(c=a[0]?a[0]:a,d=new FileReader,d.readAsArrayBuffer(c),d.onload=function(){var a=d.result;d=null;b(a)}):"[object ArrayBuffer]"===e||"[object Uint8ClampedArray]"===e?b(a):c("Not support source type: "+e)})};
Dynamsoft.base64Decode=function(a){function b(a){var d=[],b=a.length,c;for(c=0;c<b;c++){var e=a.charCodeAt(c);if(0==(e>>7&255))d.push(a.charAt(c));else if(6==(e>>5&255)){var h=a.charCodeAt(++c);e=(e&31)<<6;h&=63;e|=h;d.push(String.fromCharCode(e))}else if(14==(e>>4&255)){h=a.charCodeAt(++c);var l=a.charCodeAt(++c);e=e<<4|h>>2&15;h=(h&3)<<6|l&63;e=(e&255)<<8|h;d.push(String.fromCharCode(e))}}return d.join("")}var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,
-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];return function(a){for(var d=[],f=0,e=a.length,g,h;f<e;){do g=c[a.charCodeAt(f++)&255];while(f<e&&-1==g);if(-1==g)break;do h=c[a.charCodeAt(f++)&255];while(f<e&&-1==h);if(-1==h)break;d.push(String.fromCharCode(g<<
2|(h&48)>>4));do{g=a.charCodeAt(f++)&255;if(61==g)return b(d.join(""));g=c[g]}while(f<e&&-1==g);if(-1==g)break;d.push(String.fromCharCode((h&15)<<4|(g&60)>>2));do{h=a.charCodeAt(f++)&255;if(61==h)return b(d.join(""));h=c[h]}while(f<e&&-1==h);if(-1==h)break;d.push(String.fromCharCode((g&3)<<6|h))}return b(d.join(""))}(a)};Dynamsoft.WasmEnv=Dynamsoft.WasmEnv||{};Dynamsoft.WasmEnv.lastInstanceId=0;Dynamsoft.WasmEnv.worker={maxWorkers:1,liveTime:60};
Dynamsoft.WasmEnv.resourceDir=Dynamsoft.WebTwainEnv.ResourcesPath+"/src/";Dynamsoft.WasmEnv.wasmJS="dynamsoft.imageio_wasm-"+Dynamsoft.conststring.version+".js";Dynamsoft.WasmEnv.logLevel=Dynamsoft.WebTwainEnv.Debug?Dynamsoft.conststring.logDebug:0;Dynamsoft.WasmEnv.logFunc=null;Dynamsoft.WasmEnv.productKey="";Dynamsoft.WasmEnv.fetchOptions={mode:"cors",credentials:"same-origin"};Dynamsoft.WasmEnv.maxHeapSize=200;
Dynamsoft.WasmEnv.log=function(a,b){var c=Dynamsoft.WasmEnv;c.logLevel===b&&("function"===typeof c.logFunc?c.logFunc(a):console.log(a))};Dynamsoft.WasmEnv.clear=function(){for(var a=$jscomp.makeIterator(Dynamsoft.WasmEnv.moduleNames),b=a.next();!b.done;b=a.next())b=b.value,Dynamsoft.WasmEnv[b].status="",delete Dynamsoft.WasmEnv[b].error};Dynamsoft.WasmEnv.setLoglevel=function(a,b){Dynamsoft.WasmEnv.logLevel=1===a?Dynamsoft.conststring.logDebug:0;Dynamsoft.WasmEnv.logFunc=b};
Dynamsoft.WorkerHandler=function(a,b){function c(a){e.terminated=!0;e.terminating&&e.terminationHandler&&e.terminationHandler(e);e.terminating=!1;e.cancelAllTasks()}var e=this;this.options=b||{};this.script=a;this.worker=function(a){if("function"!==typeof Worker&&("object"!==typeof Worker||"function"!==typeof Worker.prototype.constructor))throw Error("Web Workers not supported");a=new Worker(a);a.on=function(a,d){this.addEventListener(a,function(a){d(a.data)})};a.send=function(a){if(void 0!=a&&void 0!=
a.params&&void 0!=a.params.input){var d=Object.prototype.toString.call(a.params.input);if("[object Array]"===Object.prototype.toString.call(a.params.input)){if(d=Object.prototype.toString.call(a.params.input[0]),"[object ArrayBuffer]"===d||"[object Uint8ClampedArray]"===d){this.postMessage(a,[void 0!=a.params.input[0].buffer?a.params.input[0].buffer:a.params.input[0]]);return}}else if("[object ArrayBuffer]"===d||"[object Uint8ClampedArray]"===d){this.postMessage(a,[void 0!=a.params.input.buffer?a.params.input.buffer:
a.params.input]);return}}this.postMessage(a)};return a}(this.script);this.requestQueue=[];this.terminated=this.terminating=!1;e.tasks=Object.create(null);this.objectToError=function(a){for(var d=Error(""),b=Object.keys(a),c=0;c<b.length;c++)d[b[c]]=a[b[c]];return d};this.dispatchQueuedRequests=function(){e.requestQueue.forEach(e.worker.send.bind(e.worker));e.requestQueue=[]};this.dispatchRequest=function(a){a.forEach(e.worker.send.bind(e.worker))};this.worker.on("message",function(a){"function"===
typeof e.options.log&&e.options.log(a.log?a.log:a,e.context);if("string"===typeof a&&"ready"===a)e.worker.ready=!0,e.dispatchQueuedRequests();else if(!a.log){if("object"===typeof a){var b=a.result;"object"===typeof b?(void 0!=b.errorCode&&(b.code=b.errorCode,delete b.errorCode),void 0!=b.errorMessage&&(b.message=b.errorMessage,delete b.errorMessage)):"string"===typeof b&&(b=b.replace('"errorCode"','"code"'),b=b.replace("'errorCode'","'code'"),b=b.replace('"errorMessage"','"message"'),b=b.replace("'errorMessage'",
"'message'"),a.result=b);void 0!=a.memSize&&(e.memSize=a.memSize)}b=a.id;var d=e.tasks[b];void 0!==d?(delete e.tasks[b],!0===e.terminating&&e.terminate(),"loadWasm"===a.func&&void 0!=a.result&&(e.worker.wasmReady=!0,e.dispatchQueuedRequests()),a.error?d.resolver.reject(e.objectToError(a.error)):a.result&&d.resolver.resolve(a.result)):"loadWasm"===a.func&&void 0!=a.result&&Dynamsoft.WasmEnv._handleWasmLoad(a.result,e)}});this.worker.on("error",c);this.worker.on("exit",function(a,b){a="Worker terminated Unexpectedly\n exitCode: `"+
(a+"`\n signalCode: `")+(b+"`\n script: `")+(e.script+"`\n");c(Error(a))});this.terminated=this.terminating=!1;this.terminationHandler=null;this.lastTaskId=0};
Dynamsoft.WorkerHandler.prototype.exec=function(a,b,c){c||(c={},c.promise=new Promise(function(a,b){c.resolve=a;c.reject=b}));var e=++this.lastTaskId;this.tasks[e]={id:e,resolver:c};b={id:e,func:a,params:b};this.terminated?c.reject(Error("Worker is terminated")):this.terminating?c.reject(Error("Worker is terminating")):this.worker.wasmReady||this.worker.ready&&"loadWasm"===a?this.worker.send(b):this.requestQueue.push(b);return c.promise};
Dynamsoft.WorkerHandler.prototype.busy=function(){return 0<this.howManyTasks()};Dynamsoft.WorkerHandler.prototype.howManyTasks=function(){return Object.keys(this.tasks).length};Dynamsoft.WorkerHandler.prototype.cancelAllTasks=function(a){for(var b in this.tasks)void 0!==this.tasks[b]&&this.tasks[b].resolver.reject(Error(a));this.tasks=Object.create(null)};Dynamsoft.WorkerHandler.prototype.alive=function(){return this.terminating||this.terminated?!1:!0};
Dynamsoft.WorkerHandler.prototype.terminate=function(a,b){a&&this.cancelAllTasks("Worker has been terminated");"function"===typeof b&&(this.terminationHandler=b);if(this.busy())this.terminating=!0;else{if(this.worker){if("function"===typeof this.worker.terminate)this.worker.terminate();else throw Error("Failed to terminate worker");this.worker=null}this.terminating=!1;this.terminated=!0;this.terminationHandler&&this.terminationHandler(this)}};
Dynamsoft.WorkerHandler.prototype.setLogCallback=function(a,b){this.options.log=a;this.context=b};
Dynamsoft.WorkerPool=function(a,b){var c=this;this.workers=[];this.options=a;this.maxWorkers=1;this.script=this.options.resourceDir+this.options.wasmJS;this.ready=!1;this.pdfReaderInstance=null;this.terminated=!1;this.wasmLoaderPromise=Object.create(null);this._getMaxWorkers=function(){var a=2;"hardwareConcurrency"in self.navigator&&(a=self.navigator.hardwareConcurrency);return Math.max(Math.min(c.options.worker.maxWorkers,Math.max(c.options.worker.maxWorkers,a/2)),1)};this._logAll=function(a){Dynamsoft.WasmEnv.log(a,
Dynamsoft.conststring.logAll)};this._log=function(a,b){Dynamsoft.WasmEnv.log(a,Dynamsoft.conststring.logDebug)};this._createWorker=function(){c.ready&&(c.maxWorkers=c._getMaxWorkers());var a=c.workers;if(a.length<c.maxWorkers){var b=new Dynamsoft.WorkerHandler(c.script);a.push(b);b.id=a.length;b.module={};b.module.modulesInfo=[];b.instances=Object.create(null);b.setLogCallback(this._log,c);c._logAll(a);c.log("get new worker "+b.id+" succeed!");return b}return null};this._getContainedModuleWorkers=
function(a){c._removeTerminatedWorker();var b=c.workers;c._logAll(b);for(var e=[],k=0;k<b.length;k++){var g=b[k];!g.module.modulesInfo[a.name]||g.busy()&&b.length<c.maxWorkers||e.push(g)}c._logAll("get workers for module "+a.name);c._logAll(e);return e};this._getIdleWorker=function(){c._removeTerminatedWorker();for(var a=c.workers,b=0;b<a.length;b++){var f=a[b];if(!1===f.busy())return f}return c._createWorker()};this._busy=function(){c._removeTerminatedWorker();for(var a=c.workers,b=0;b<a.length;b++)if(a[b].busy())return!0;
return!1};this._removeTerminatedWorker=function(){c.workers=c.workers.filter(function(a){return!a.terminated})};this._getWorkerByIntanceId=function(a,b){c._logAll("_getWorkerByIntanceId");c._logAll(a);for(var d=9007199254740991,e=null,g=0;g<a.length;g++){var h=a[g];if(void 0!=h.instances[b]){e=h;break}else{var l=h.howManyTasks();l<d&&(e=h,d=l)}}if(e)return e.instances[b]="",c._logAll(a),c.log("get worker "+b+" in "+e.id+" succeed!"),e;c._logAll("_getWorkerByIntanceId: no suitable worker");return null};
this._initWorkerInner=function(a,b,f){try{b.params&&(b.params.resourceDir=this.resourceDir,b.params.fetchOptions=Dynamsoft.WasmEnv.fetchOptions);for(var d=$jscomp.makeIterator(b.params.module.modulesInfo),e=d.next();!e.done;e=d.next())Dynamsoft.WasmEnv[e.value.name].status=Dynamsoft.conststring.initPending;a.exec(b.func,b.params).then(function(b){void 0===b.code||b.modules?Dynamsoft.WasmEnv._handleWasmLoad(b,a):c.log(b);f()}).catch(function(a){c.log(a);f()})}catch(h){c.log(h),f()}};this._removeInstanceInWorker=
function(a,b){var d=c.workers;c._logAll("removeInstanceInWorker");c._logAll(d);for(var e=0;e<d.length;e++){var g=d[e];if(g===a){void 0!=g.instances[b]?(delete g.instances[b],c._logAll(d),c.log("removeInstanceInWorker "+b+" in "+g.id+" succeed!")):c.log("not found instance "+b);break}}};this._hasInstanceInWorker=function(){for(var a=c.workers,b=0;b<a.length;b++)if(0!=Object.keys(a[b].instances).length)return!0;return null!=c.pdfReaderInstance};this._getWorker=function(a,b){if(Dynamsoft.WasmEnv[a.name].status==
Dynamsoft.conststring.initPending)return null;var d=c._getContainedModuleWorkers(a);if(0!=d.length)return c._getWorkerByIntanceId(d,b);if(b=c._getIdleWorker()){if(b.module.modulesInfo[a.name])return b;a={id:0,func:"loadWasm",params:{priority:0,key:c.options.productKey,module:{modulesInfo:[]}}};d=$jscomp.makeIterator(Dynamsoft.WasmEnv.moduleNames);for(var e=d.next();!e.done;e=d.next())e=e.value,a.params.module.modulesInfo.push({name:e,ver:Dynamsoft.WasmEnv[e].ver,wasmModule:Dynamsoft.WasmEnv[e].wasmModule});
c._initWorkerInner(b,a,function(){})}return null};this._init=function(a){var b=c._createWorker();b&&(b.setLogCallback(function(a,b){b.log(a)},c),a.params.callback=null,c._initWorkerInner(b,a,function(a){c.maxWorkers=c._getMaxWorkers();c.ready=!0}))};this._initAsync=function(a){var b=this,c,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return e=c=b,d.yield(fetch(c.script).then(function(a){return a.blob()}).then(function(a){return URL.createObjectURL(a)}),2);e.script=
d.yieldResult;c._init(a);d.jumpToEnd()})};this._getPath=function(){this.script.startsWith("http://")||this.script.startsWith("https://")?this.resourceDir=this.options.resourceDir:this.options.resourceDir.startsWith("/")?null!=location.origin&&(this.resourceDir=location.origin+this.options.resourceDir):null!=location.href&&(this.resourceDir=location.href.substring(0,location.href.lastIndexOf("/")+1)+this.options.resourceDir);this.resourceDir.endsWith("/")||(this.resourceDir+="/")};this._getPath();
if(b&&0<b.params.module.modulesInfo.length){a=!1;if(this.script.startsWith("http://")||this.script.startsWith("https://"))this.script.startsWith(location.origin)||(a=!0);a?this._initAsync(b):this._init(b)}else c.maxWorkers=c._getMaxWorkers(),c.ready=!0};
Dynamsoft.WorkerPool.prototype.getWorker=function(a,b){if(!this.ready)return null;var c=a.name===Dynamsoft.WasmEnv.pdfReader.name;if(c&&this.pdfReaderInstance)return null;if((a=this._getWorker(a,b))&&c){if(this.pdfReaderInstance)return this._removeInstanceInWorker(a,b),null;this.pdfReaderInstance=b}return a};
Dynamsoft.WorkerPool.prototype.removeInstanceInWorker=function(a,b,c,e){this._removeInstanceInWorker(b,c);a.name===Dynamsoft.WasmEnv.pdfReader.name&&this.pdfReaderInstance&&(this.pdfReaderInstance=null);e&&b&&void 0!=b.memSize&&(a=1048576*Dynamsoft.WasmEnv.maxHeapSize,Dynamsoft.WasmEnv.log("current memSize="+b.memSize+", max="+a,Dynamsoft.conststring.logDebug),b.memSize>a&&0!=a&&!this._hasInstanceInWorker()&&(Dynamsoft.WasmEnv.log("reload wasm auto",Dynamsoft.conststring.logDebug),Dynamsoft.WasmEnv.load()))};
Dynamsoft.WorkerPool.prototype.log=function(a){Dynamsoft.WasmEnv.log(a,Dynamsoft.conststring.logDebug)};Dynamsoft.WorkerPool.prototype.terminate=function(a){this.terminated=!0;var b=[],c=this.workers.slice();this.workers=[];c.forEach(function(c){var d={};d.promise=new Promise(function(a,b){d.resolve=a;d.reject=b});b.push(d.promise);c.terminate(a,function(a){d.resolve(a)})});return Promise.all(b)};
Dynamsoft.WorkerPool.prototype.getMemoryUsed=function(){for(var a=this.workers,b=[],c=0;c<a.length;c++){var e=a[c];e&&void 0!=e.memSize&&(b[c]=e.memSize)}return b};
Dynamsoft.WasmEnv.load=function(a){Dynamsoft.WasmEnv.unload();Dynamsoft.WasmEnv.productKey=void 0!=a?a:Dynamsoft.WasmEnv.productKey;Dynamsoft.WasmEnv.licensePromise={};Dynamsoft.WasmEnv.licensePromise.promise=new Promise(function(a,b){Dynamsoft.WasmEnv.licensePromise.resolve=a;Dynamsoft.WasmEnv.licensePromise.reject=b});var b=Dynamsoft.WasmEnv;b.clear();a={id:0,func:"loadWasm",params:{priority:0,key:a,module:{modulesInfo:[]},callback:function(a){b.logLevel===Dynamsoft.conststring.logDebug&&("function"===
typeof b.logFunc?b.logFunc(a):console.log(a))}}};a.params.module.modulesInfo.push({name:b.imgIO.name,ver:b.imgIO.ver,wasmModule:b.imgIO.wasmModule});(b.imgCore.autoLoad||b.imgCore.wasmModule)&&a.params.module.modulesInfo.push({name:b.imgCore.name,ver:b.imgCore.ver,wasmModule:b.imgCore.wasmModule});(b.imgProc.autoLoad||b.imgProc.wasmModule)&&a.params.module.modulesInfo.push({name:b.imgProc.name,ver:b.imgProc.ver,wasmModule:b.imgProc.wasmModule});(b.pdfReader.autoLoad||b.pdfReader.wasmModule)&&a.params.module.modulesInfo.push({name:b.pdfReader.name,
ver:b.pdfReader.ver,wasmModule:b.pdfReader.wasmModule});(b.pdfWriter.autoLoad||b.pdfWriter.wasmModule)&&a.params.module.modulesInfo.push({name:b.pdfWriter.name,ver:b.pdfWriter.ver,wasmModule:b.pdfWriter.wasmModule});Dynamsoft.WorkerPool.Instance=null;Dynamsoft.WorkerPool.Instance=new Dynamsoft.WorkerPool(b,a)};Dynamsoft.WasmEnv.unload=function(){var a=Dynamsoft.WorkerPool.Instance;return void 0!=a?a.terminate(!0):Promise.resolve()};
Dynamsoft.WasmEnv.getWorkerPool=function(){var a=Dynamsoft.WorkerPool.Instance;return a&&a.terminated?null:a};Dynamsoft.WasmEnv.busy=function(){var a=Dynamsoft.WorkerPool.Instance;return a?a._busy():!1};
Dynamsoft.WasmEnv._handleWasmLoad=function(a,b){Dynamsoft.WasmEnv.log("handleWasmLoad:",Dynamsoft.conststring.logDebug);Dynamsoft.WasmEnv.log(a,Dynamsoft.conststring.logDebug);if("object"==typeof a&&void 0!=a.modules){for(var c=$jscomp.makeIterator(a.modules),e=c.next();!e.done;e=c.next())e=e.value,a.code?(Dynamsoft.WasmEnv[e.name].error={code:a.code,message:a.message},b.module.modulesInfo[e.name]=!1):(delete Dynamsoft.WasmEnv[e.name].error,Dynamsoft.WasmEnv[e.name].status=Dynamsoft.conststring.initReady,
Dynamsoft.WasmEnv[e.name].wasmModule=e.wasmModule,b.module.modulesInfo[e.name]=!0);a.licenseInfo&&(a=a.licenseInfo,"string"===typeof a&&(a=JSON.parse(a)),Dynamsoft.WasmEnv.licensePromise.resolve(a));void 0!=Dynamsoft.WasmEnv.imgIO.error&&Dynamsoft.WasmEnv.licensePromise.reject(Dynamsoft.WasmEnv.imgIO.error)}};
Dynamsoft.ImageIoBase=function(a,b,c,e){var d=this;this.moduleInfo=b;this.name=this.moduleInfo.name;this.outputType=Dynamsoft.Enum_ImageType.IT_JPG;this.inputType=Dynamsoft.Enum_ImageType.IT_ALL;this.tiffFormat=0;this.jpegQuality=80;this.tasksQueue=[];this.worker=null;this.lastTaskId=0;this.logFunc=c;this.context=e;this.instanceId=++Dynamsoft.WasmEnv.lastInstanceId;this.timer=null;this.nv=JSON.parse(JSON.stringify(Dynamsoft.navInfo));this.mb=Dynamsoft.Lib.env.bMobile;this.dm=location.origin;this.initStatus=
"";this.terminated=!1;this.license=a?a:Dynamsoft.license;this.license||(this.license="");this._getWorker=function(){d.timer&&clearTimeout(d.timer);if(d.worker&&d.worker.alive())return d.worker;var a=Dynamsoft.WasmEnv.getWorkerPool();if(a){d.worker=a.getWorker(d.moduleInfo,d.instanceId);if(d.worker&&d.worker.alive())0<d.tasksQueue.length&&d._dispatchQueuedTasks();else{if(Dynamsoft.WasmEnv[d.name].error)return d._cancelAllTasks(Dynamsoft.error.code.wasmJsNotLoaded,Dynamsoft.WasmEnv[d.name].error),d.worker;
0<d.tasksQueue.length&&(d.timer=setTimeout(d._getWorker,50))}return d.worker}d._cancelAllTasks(Dynamsoft.error.code.wasmJsNotLoaded,"wasm env not loaded")};this._dispatchQueuedTasks=function(){d._logAll(d.tasksQueue,d);if(d.worker&&d.worker.alive()){if(0<d.tasksQueue.length){var a=d.tasksQueue[0];if(d.initStatus===Dynamsoft.conststring.initReady||"init"===a.func)delete d.tasksQueue[0],d.tasksQueue.splice(0,1),d._exec(a)}}else d.worker&&!d.worker.alive()&&0<d.tasksQueue.length&&"init"!=d.tasksQueue[0].func?
(d.worker=null,d._init()):0<d.tasksQueue.length&&d._getWorker()};this._log=function(a,b){"function"===typeof b.logFunc?b.logFunc(a,b.context):Dynamsoft.WasmEnv.log(a,Dynamsoft.conststring.logDebug)};this._logAll=function(a,b){Dynamsoft.WasmEnv.logLevel===Dynamsoft.conststring.logAll&&this._log(a,b)};this._handleReject=function(a,b,d){var c=b;"object"!=typeof c&&(c={},c.code=d,c.message=b);return this.terminated?a.resolve(c):a.reject(c)};this._handleBasicResult=function(a,b){delete a.code;delete a.message;
return a};this._handleBooleanResult=function(a,b){return!0};this._handleImageData=function(a,b){if("object"===typeof a.imageData)if(void 0!=a.imageCount&&1<a.imageCount)for(b=0;b<a.imageCount;b++)a.imageData[b]=URL.createObjectURL(a.imageData[b]);else a.imageData=URL.createObjectURL(a.imageData);"object"===typeof a.pdfData&&(a.pdfData=URL.createObjectURL(a.pdfData));return a};this._handleResult=function(a,b){a=b.context._getResult(a);void 0===a.code||!a.code&&"Successful."===a.message?(a=b.handleResult(a,
b),d._dispatchQueuedTasks(),b=b.resolve,b(a)):(a={code:a.code,message:a.code===Dynamsoft.error.code.wasmException?Dynamsoft.Enum_ErrorMessage.WASM_EXCEPTION_ERROR:a.message},this.terminated?b.resolve(a):b.reject(a))};this._getResult=function(a){try{return"string"===typeof a?JSON.parse(a):a}catch(k){return a}};this._exec=function(a){var b=d.worker;b.setLogCallback(d._log,d);d._logAll(a,d);try{b.exec(a.func,a.params).then(function(b){d._log(b,d);d._handleResult(d._getResult(b),a)}).catch(function(b){d._log(b,
d);d._dispatchQueuedTasks();var c=b;"object"===typeof b&&(void 0!=b.message?c=b.message:void 0!=b.message&&(c=b.message));b={code:Dynamsoft.error.code.wasmJsWorkerRunFailed,message:c};d.terminated?a.resolve(b):a.reject(b)})}catch(g){d._dispatchQueuedTasks(),d._log(g,d),b={code:Dynamsoft.error.code.wasmJsWorkerRunException,message:g.message,stack:g.stack},d.terminated?a.resolve(b):(b,a.reject(b))}};this._cancelAllTasks=function(a,b){for(var c=0;c<d.tasksQueue.length;c++)if(void 0!==d.tasksQueue[c]){var e=
{code:a,message:b};d.terminated?d.tasksQueue[c].resolve(e):d.tasksQueue[c].reject(e)}d.tasksQueue=[]};this._createTask=function(a,b,d){var c={id:++this.lastTaskId};c.promise=new Promise(function(a,b){c.resolve=a;c.reject=b});c.func=a;c.params={moduleName:this.name,insId:this.instanceId,fetchOptions:Dynamsoft.WasmEnv.fetchOptions};c.context=this;c.handleResult="undefined"!==typeof d&&d?d:this._handleBasicResult;c.params.input="undefined"!==typeof b&&b?b:"";c.params.returnType="";return c};this._addTask=
function(a,b){""===this.initStatus?a.reject({code:Dynamsoft.error.code.wasmJsObjectNotInit,message:this.terminated?"object has been disposed":"object not init"}):this.initStatus===Dynamsoft.conststring.initFailed?a.reject({code:Dynamsoft.error.code.wasmJsObjectInitFailed,message:d.initError}):(b?d.tasksQueue.unshift(a):d.tasksQueue.push(a),d._dispatchQueuedTasks());return a.promise};this._init=function(){var b=this._createTask("init");b.params.key=a;b.params.val={nv:this.nv,mb:this.mb,dm:this.dm};
b.handleResult=function(a,b){b.context.initStatus=Dynamsoft.conststring.initReady;return a};this.initStatus=Dynamsoft.conststring.initPending;this._addTask(b,!0);b.promise.then(function(a){d._log(d.name+" init return: ",d);d._log(a,d)}).catch(function(a){d.initStatus=Dynamsoft.conststring.initFailed;d.initError=a.message;d._log(d.name+" init failed",d);d._log(a,d);d._cancelAllTasks(Dynamsoft.error.code.wasmJsObjectInitFailed,a.message)})};this._destroy=function(){var a=this._createTask("destroy");
this._addTask(a);return a.promise};this._terminate=function(a){var b=this._destroy();this.terminated=!0;var c=Dynamsoft.WasmEnv.getWorkerPool();c&&c.removeInstanceInWorker(d.moduleInfo,d.worker,d.instanceId,a);b.then(function(a){d.worker=null;d._log(d.name+" destroy return: ",d);d._log(a,d)}).catch(function(a){d.worker=null;d._log(d.name+" destroy failed",d);d._log(a,d)});this.initStatus=""};this._readFile=function(a,b){return new Promise(function(c,e){Dynamsoft.readFile(a).then(function(a){c(a)},
function(a){d._handleReject(b,a,Dynamsoft.error.code.wasmJsReadFileFailed)}).catch(function(a){d._handleReject(b,a,Dynamsoft.error.code.wasmJsReadFileFailed)})})};this._init()};Dynamsoft.ImageIoBase.prototype.terminate=function(a){this._terminate(void 0!=a?a:!0)};
Dynamsoft.ImageIoBase.prototype.downloadData=function(a,b,c,e){a=a?a:Date.now()+"";return(new Promise(function(d,f){if(b){if("base64"===c){var k=Dynamsoft.base64DecToArr(b).buffer;k=new Blob([k],{type:"pdf"==e?"application/pdf":"jpg"==e?"image/jpeg":"image/"+e});k=URL.createObjectURL(k)}else"blob"===c?k=b:f(Dynamsoft.Enum_ErrorMessage.FILE_STREAM_ERROR+"Please read/write image or get page before download!");a=a+"."+e;window.navigator.msSaveBlob&&fetch(k).then(function(a){return a.arrayBuffer()}).then(function(b){b=
new Blob([b]);window.navigator.msSaveOrOpenBlob(b,a);d(a)});f=document.createElement("a");f.href=k;f.download=a;f.click();d(a)}else f(Dynamsoft.Enum_ErrorMessage.FILE_STREAM_ERROR+"Please read/write image or get page before download!")})).catch(function(a){return Promise.reject(a)})};
Dynamsoft.Imagecore=function(a,b,c){a=a?a:Dynamsoft.WasmEnv.productKey;Dynamsoft.ImageIoBase.call(this,a,Dynamsoft.WasmEnv.imgCore,b,c);this.saveImageInner=function(a,b,c,k,g,h,l,p,n,m){var d=this;b=void 0!=b?b:this.inputType;c=void 0!=c?c:0;k=void 0!=k?k:0;g=void 0!=g?g:24;h=void 0!=h?h:96;l=void 0!=l?l:96;n=void 0!=n?n:this.jpegQuality;m=void 0!=m?m:Dynamsoft.Enum_ReturnType.RT_AUTO;d=this;var e=d._createTask("SaveImage");d._readFile(a,e).then(function(a){e.params.input=[a,b,c,k,g,h,l,p,n,m==Dynamsoft.Enum_ReturnType.RT_BASE64];
e.params.returnType=m;e.handleResult=d._handleImageData;d._addTask(e)});return e.promise}};Dynamsoft.Imagecore.prototype=Object.create(Dynamsoft.ImageIoBase.prototype);Dynamsoft.Imagecore.prototype.constructor=Dynamsoft.Imagecore;Dynamsoft.Imagecore.prototype.getImageFormat=function(a){var b=this,c=b._createTask("GetImageFormat");b._readFile(a,c).then(function(a){c.params.input=a;b._addTask(c)});return c.promise};
Dynamsoft.Imagecore.prototype.readImageInfo=function(a){var b=this,c=b._createTask("ReadImageInfo");b._readFile(a,c).then(function(a){c.params.input=a;b._addTask(c)});return c.promise};Dynamsoft.Imagecore.prototype.getMD5=function(a){var b=this,c=b._createTask("GetMD5");b._readFile(a,c).then(function(a){c.params.input=a;c.handleResult=function(a,b){return a.MD5};b._addTask(c)});return c.promise};Dynamsoft.Imagecore.prototype.getLicenseInfo=function(){return this._addTask(this._createTask("GetLicenseInfo"))};
Dynamsoft.Imagecore.prototype.saveImage=function(a,b,c,e){return this.saveImageInner(a,null,null,null,null,null,null,b,c,e?Dynamsoft.Enum_ReturnType.RT_BINARY:Dynamsoft.Enum_ReturnType.RT_AUTO)};Dynamsoft.Imagecore.prototype.readImage=function(a,b,c,e){b=void 0!=b?b:this.outputType;c=void 0!=c?c:this.jpegQuality;e=void 0!=e?e:!1;var d=this,f=d._createTask("ReadImage");d._readFile(a,f).then(function(a){f.params.input=[a,b,c,e];f.handleResult=d._handleImageData;d._addTask(f)});return f.promise};
Dynamsoft.Imagecore.prototype.openTiff=function(a){var b=this,c=b._createTask("LoadTiff");b._readFile(a,c).then(function(a){c.params.input=a;b._addTask(c)});return c.promise};Dynamsoft.Imagecore.prototype.readTiff=function(a,b,c){b=void 0!=b?b:this.outputType;c=void 0!=c?c:this.returnImageAsBase64;return this._addTask(this._createTask("ReadTiffPage",[void 0!=a?a:0,b,c],this._handleImageData))};
Dynamsoft.Imagecore.prototype.closeTiff=function(){return this._addTask(this._createTask("EndReadTiff",null,this._handleBooleanResult))};Dynamsoft.Imagecore.prototype.createTiff=function(){return this._addTask(this._createTask("NewTiff",null,this._handleBooleanResult))};
Dynamsoft.Imagecore.prototype.appendImage=function(a,b,c,e){b=void 0!=b?b:this.inputType;c=void 0!=c?c:this.tiffFormat;e=void 0!=e?e:this.jpegQuality;var d=this,f=d._createTask("AppendImageToTiff");d._readFile(a,f).then(function(a){f.params.input=[a,b,c,e];f.handleResult=d._handleBooleanResult;d._addTask(f)});return f.promise};Dynamsoft.Imagecore.prototype.addTag=function(a,b,c){return this._addTask(this._createTask("AddTagToNextPage",[a,b,void 0!=c?c:!0],this._handleBooleanResult))};
Dynamsoft.Imagecore.prototype.getTiff=function(a){var b=this._createTask("GetTiffStream");b.handleResult=this._handleImageData;b.params.returnType=a?Dynamsoft.Enum_ReturnType.RT_BINARY:Dynamsoft.Enum_ReturnType.RT_AUTO;return this._addTask(b)};Dynamsoft.Imagecore.prototype.getMemoryUsed=function(){return this._addTask(this._createTask("getMemoryUsed",null,function(a,b){return a.memoryUsed}))};
Dynamsoft.ImageProc=function(a,b,c){a=a?a:Dynamsoft.WasmEnv.productKey;Dynamsoft.ImageIoBase.call(this,a,Dynamsoft.WasmEnv.imgProc,b,c)};Dynamsoft.ImageProc.prototype=Object.create(Dynamsoft.ImageIoBase.prototype);Dynamsoft.ImageProc.prototype.constructor=Dynamsoft.ImageProc;
Dynamsoft.ImageProc.prototype.initImage=function(a,b,c,e){b=void 0!=b?b:!1;c=void 0!=c?c:0;e=void 0!=e?e:0;var d=this,f=d._createTask("InitImageObject");f.handleResult=this._handleBooleanResult;f.params.input=[a,c,e];b?(f.params.input.push(Dynamsoft.Enum_ImageType.IT_RGBA),d._addTask(f)):d._readFile(a,f).then(function(a){f.params.input[0]=a;f.params.input.push(Dynamsoft.Enum_ImageType.IT_ALL);d._addTask(f)});return f.promise};
Dynamsoft.ImageProc.prototype.rotate=function(a,b,c,e){return this._addTask(this._createTask("RotateEx",[a,void 0!=c?c:!1,void 0!=e?e:3,void 0!=b?b:"FFFFFF"],this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.flip=function(a){a=void 0!=a?a:1;var b=this._createTask("");b.handleResult=this._handleBooleanResult;1===a?b.func="Flip":-1===a&&(b.func="Mirror");this._addTask(b);return b.promise};
Dynamsoft.ImageProc.prototype.erase=function(a,b,c,e,d){d=void 0!=d?d:"FFFFFF";var f=this._createTask("Erase");f.handleResult=this._handleBooleanResult;f.params.input=[a,b,c,e,d];this._addTask(f);return f.promise};Dynamsoft.ImageProc.prototype.crop=function(a,b,c,e){return this._addTask(this._createTask("Crop",[a,b,c,e],this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.resize=function(a,b,c){return this._addTask(this._createTask("ChangeImageSize",[a,b,void 0!=c?c:5],this._handleBooleanResult))};
Dynamsoft.ImageProc.prototype.toGrayscale=function(a,b){return this._addTask(this._createTask("ConvertToGrayScale","",this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.toBinary=function(a,b,c){return this._addTask(this._createTask("ConvertToBWScale","",this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.invert=function(){return this._addTask(this._createTask("Invert",null,this._handleBooleanResult))};
Dynamsoft.ImageProc.prototype.setImageWidth=function(a,b){return this._addTask(this._createTask("SetImageWidth",[a,void 0!=b?b:"FFFFFF"],this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.setImageHeight=function(a,b){return this._addTask(this._createTask("SetImageHeight",[a,void 0!=b?b:"FFFFFF"],this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.setDPI=function(a,b,c,e,d,f){return this._addTask(this._createTask("SetDPI",[a,b,c,e,void 0!=d?d:!1,f],this._handleBooleanResult))};
Dynamsoft.ImageProc.prototype.getImage=function(a,b,c,e,d,f){a=void 0!=a?a:this.jpegQuality;return this._addTask(this._createTask("GetCurrentImage",[void 0!=c&&c?Dynamsoft.Enum_ImageType.IT_JPG:Dynamsoft.Enum_ImageType.IT_ALL,void 0!=e?e:24,void 0!=d?d:96,void 0!=f?f:96,!1,a,void 0!=b?b:!0],this._handleImageData))};Dynamsoft.ImageProc.prototype.getSkewAngle=function(a){return this._addTask(this._createTask("GetSkewAngle",[void 0!=a?a:""],function(a,c){return a.skewAngle}))};
Dynamsoft.ImageProc.prototype.freeReservedData=function(){return this._addTask(this._createTask("FreeReservedData",null,this._handleBooleanResult))};Dynamsoft.ImageProc.prototype.detectDocument=function(a){return this._addTask(this._createTask("DocumentDetect",[void 0!=a?a:2]))};Dynamsoft.ImageProc.prototype.perspective=function(a,b,c,e,d,f,k,g){return this._addTask(this._createTask("Perspective",[a,b,c,e,d,f,k,g],this._handleBooleanResult))};Dynamsoft.ImageProcWrapper={};
Dynamsoft.ImageProcWrapper.resize=function(a,b,c,e,d){var f=new Dynamsoft.ImageProc(Dynamsoft.WasmEnv.productKey);return f.initImage(a).then(function(){var a=void 0==d?5:d;var g=b>c?b/e:c/e;return f.resize(b/g,c/g,a)}).then(function(){return f.getImage()}).then(function(a){f.terminate();return a},function(a){f.terminate();return a})};
Dynamsoft.PdfReader=function(a,b,c){a=a?a:Dynamsoft.WasmEnv.productKey;Dynamsoft.ImageIoBase.call(this,a,Dynamsoft.WasmEnv.pdfReader,b,c);this.resolution=200;this.readMode=3;this.outputType=Dynamsoft.Enum_ImageType.IT_ALL};Dynamsoft.PdfReader.prototype=Object.create(Dynamsoft.ImageIoBase.prototype);Dynamsoft.PdfReader.prototype.constructor=Dynamsoft.PdfReader;
Dynamsoft.PdfReader.prototype.open=function(a,b){b=void 0!=b?b:"";var c=this,e=c._createTask("LoadPdf");c._readFile(a,e).then(function(a){e.params.input=[a,b];e.handleResult=function(a,b){var c=Dynamsoft.base64Decode(a.infoBase64);try{try{c.replace(/\\/gi,"\\\\");var d=JSON.parse(c)}catch(l){d=c}return{PdfCount:a.pageCount,PdfInfo:d,isTextBased:a.isTextBased}}catch(l){b.reject({code:Dynamsoft.error.code.wasmJsInvalidJson,message:l.message,stack:l.stack})}};c._addTask(e)});return e.promise};
Dynamsoft.PdfReader.prototype.readPage=function(a,b,c,e,d,f){b=void 0!=b?b:this.resolution;c=void 0!=c?c:this.readMode;e=void 0!=e?e:this.outputType;f=void 0!=f?f:this.returnImageAsBase64;return this._addTask(this._createTask("ReadPdfPage",[void 0!=a?a:0,b,c,e,void 0!=d?d:!1,f],this._handleImageData))};Dynamsoft.PdfReader.prototype.close=function(){return this._addTask(this._createTask("UnloadPdf",null,this._handleBooleanResult))};
Dynamsoft.PdfWriter=function(a,b,c){a=a?a:Dynamsoft.WasmEnv.productKey;Dynamsoft.ImageIoBase.call(this,a,Dynamsoft.WasmEnv.pdfWriter,b,c);this._setPdfSettings=function(a){var b={};if(void 0!=a&&"object"===typeof a)for(var c in a)b[c]=a[c];return b}};Dynamsoft.PdfWriter.prototype=Object.create(Dynamsoft.ImageIoBase.prototype);Dynamsoft.PdfWriter.prototype.constructor=Dynamsoft.PdfWriter;
Dynamsoft.PdfWriter.prototype.initPdfSetting=function(a){var b=this._createTask("InitPdfWriter");b.params.input=JSON.stringify(this._setPdfSettings(a));b.handleResult=this._handleBooleanResult;return this._addTask(b)};Dynamsoft.PdfWriter.prototype.appendPage=function(a){var b=this,c=b._createTask("AddPageFromImageFileStream");b._readFile(a,c).then(function(a){c.params.input=a;c.handleResult=b._handleBooleanResult;b._addTask(c)});return c.promise};
Dynamsoft.PdfWriter.prototype.writePdf=function(a){var b=this._createTask("GetPdfContent");b.params.returnType=a?Dynamsoft.Enum_ReturnType.RT_BINARY:Dynamsoft.Enum_ReturnType.RT_AUTO;b.handleResult=this._handleImageData;return this._addTask(b)};Dynamsoft.pdf=Dynamsoft.pdf||{};Dynamsoft.pdf.IsModuleInstalled=function(){return Dynamsoft.isWasmSupport()?Dynamsoft.WasmEnv.pdfReader.status==Dynamsoft.conststring.initReady&&Dynamsoft.WasmEnv.pdfWriter.status==Dynamsoft.conststring.initReady:!1};
Dynamsoft.WasmEnv.getLicenseInfo=function(a){Dynamsoft.WasmEnv.productKey!=a&&(Dynamsoft.WasmEnv.productKey=a,Dynamsoft.WasmEnv.licensePromise={},Dynamsoft.WasmEnv.licensePromise.promise=new Promise(function(a,c){Dynamsoft.WasmEnv.licensePromise.resolve=a;Dynamsoft.WasmEnv.licensePromise.reject=c;var b=new Dynamsoft.Imagecore(Dynamsoft.WasmEnv.productKey);b.getLicenseInfo().then(function(c){b.terminate();a(c)},function(a){b.terminate();c(a)})}));return Dynamsoft.WasmEnv.licensePromise.promise};
Dynamsoft.WasmEnv.getMemoryUsed=function(){var a=Dynamsoft.WorkerPool.Instance;return a&&!a.terminated?a.getMemoryUsed():{}};Dynamsoft.WasmEnv.getWasmNames=function(){for(var a=[],b=$jscomp.makeIterator(Dynamsoft.WasmEnv.moduleNames),c=b.next();!c.done;c=b.next())c=c.value,a.push(Dynamsoft.WasmEnv[c].prefixName+Dynamsoft.WasmEnv[c].ver+Dynamsoft.conststring.wasmExtension);return a};
 
}); 
 
/*! 20210104
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 16.2
* 
* Module: addon/barcodereader
* final js: build\addon\dynamsoft.webtwain.addon.barcodereader.js
*/
;var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};(function(){Dynamsoft.BarcodeReaderAddon=Dynamsoft.BarcodeReaderAddon||{};var a=Dynamsoft.BarcodeReaderAddon;a.Version="7.6.0.0112";a.VersionForActiveX="7.6.0.0112";a._defaultRuntimeSettingsStr="";a._defaultTemplateStr="";a._wasmInstance=false;a._activeXInstance=false;a.BarcodeReaderException=(function(){var b=function(){var d;var c=arguments[0],f=arguments[1],e=Dynamsoft.EnumErrorCode.DBR_UNKNOWN;if(typeof c=="number"){e=c;d=new Error(f)}else{d=new Error(c)}d.code=e;return d};return b})();a.RemoveNonPrintableChar=function(b){if(Dynamsoft.Lib.isString(b)){return b.replace(/[^\x20-\x7E]|(\\")/g,"")}else{return b}};a.errors={webcamNotInstalled:"The Webcam add-on not installed.",nonServiceNotSupportWebcamDecode:"The BarcodeReader add-on does not support reading barcodes from video streams.",decodeResultEmpty:"decode result is empty."};a._activeXMaxIEVersion=9;a.logLevel=3;Dynamsoft.EnumAccompanyingTextRecognitionMode={ATRM_GENERAL:1,ATRM_SKIP:0};Dynamsoft.EnumBarcodeColourMode={BICM_DARK_ON_LIGHT:1,BICM_LIGHT_ON_DARK:2,BICM_DARK_ON_DARK:4,BICM_LIGHT_ON_LIGHT:8,BICM_DARK_LIGHT_MIXED:16,BICM_DARK_ON_LIGHT_DARK_SURROUNDING:32,BICM_SKIP:0};Dynamsoft.EnumBarcodeComplementMode={BCM_AUTO:1,BCM_GENERAL:2,BCM_SKIP:0};Dynamsoft.EnumBarcodeFormat={BF_ALL:-32505857,BF_ONED:2047,BF_GS1_DATABAR:260096,BF_CODE_39:1,BF_CODE_128:2,BF_CODE_93:4,BF_CODABAR:8,BF_ITF:16,BF_EAN_13:32,BF_EAN_8:64,BF_UPC_A:128,BF_UPC_E:256,BF_INDUSTRIAL_25:512,BF_CODE_39_EXTENDED:1024,BF_GS1_DATABAR_OMNIDIRECTIONAL:2048,BF_GS1_DATABAR_TRUNCATED:4096,BF_GS1_DATABAR_STACKED:8192,BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:16384,BF_GS1_DATABAR_EXPANDED:32768,BF_GS1_DATABAR_EXPANDED_STACKED:65536,BF_GS1_DATABAR_LIMITED:131072,BF_PATCHCODE:262144,BF_PDF417:33554432,BF_QR_CODE:67108864,BF_DATAMATRIX:134217728,BF_AZTEC:268435456,BF_MAXICODE:536870912,BF_MICRO_QR:1073741824,BF_MICRO_PDF417:524288,BF_GS1_COMPOSITE:-2147483648,BF_NULL:0};Dynamsoft.EnumBarcodeFormat_2={BF2_NULL:0,BF2_POSTALCODE:32505856,BF2_NONSTANDARD_BARCODE:1,BF2_USPSINTELLIGENTMAIL:1048576,BF2_POSTNET:2097152,BF2_PLANET:4194304,BF2_AUSTRALIANPOST:8388608,BF2_RM4SCC:16777216,BF2_DOTCODE:2};Dynamsoft.EnumBinarizationMode={BM_AUTO:1,BM_LOCAL_BLOCK:2,BM_SKIP:0};Dynamsoft.EnumClarityCalculationMethod={ECCM_CONTRAST:1};Dynamsoft.EnumClarityFilterMode={CFM_GENERAL:1};Dynamsoft.EnumColourClusteringMode={CCM_AUTO:1,CCM_GENERAL_HSV:2,CCM_SKIP:0};Dynamsoft.EnumColourConversionMode={CICM_GENERAL:1,CICM_SKIP:0};Dynamsoft.EnumConflictMode={CM_IGNORE:1,CM_OVERWRITE:2};Dynamsoft.EnumDeformationResistingMode={DRM_AUTO:1,DRM_GENERAL:2,DRM_SKIP:0};Dynamsoft.EnumDPMCodeReadingMode={DPMCRM_AUTO:1,DPMCRM_GENERAL:2,DPMCRM_SKIP:0};Dynamsoft.EnumErrorCode={DBR_SYSTEM_EXCEPTION:1,DBR_SUCCESS:0,DBR_UNKNOWN:-10000,DBR_NO_MEMORY:-10001,DBR_NULL_REFERENCE:-10002,DBR_LICENSE_INVALID:-10003,DBR_LICENSE_EXPIRED:-10004,DBR_FILE_NOT_FOUND:-10005,DBR_FILETYPE_NOT_SUPPORTED:-10006,DBR_BPP_NOT_SUPPORTED:-10007,DBR_INDEX_INVALID:-10008,DBR_BARCODE_FORMAT_INVALID:-10009,DBR_CUSTOM_REGION_INVALID:-10010,DBR_MAX_BARCODE_NUMBER_INVALID:-10011,DBR_IMAGE_READ_FAILED:-10012,DBR_TIFF_READ_FAILED:-10013,DBR_QR_LICENSE_INVALID:-10016,DBR_1D_LICENSE_INVALID:-10017,DBR_DIB_BUFFER_INVALID:-10018,DBR_PDF417_LICENSE_INVALID:-10019,DBR_DATAMATRIX_LICENSE_INVALID:-10020,DBR_PDF_READ_FAILED:-10021,DBR_PDF_DLL_MISSING:-10022,DBR_PAGE_NUMBER_INVALID:-10023,DBR_CUSTOM_SIZE_INVALID:-10024,DBR_CUSTOM_MODULESIZE_INVALID:-10025,DBR_RECOGNITION_TIMEOUT:-10026,DBR_JSON_PARSE_FAILED:-10030,DBR_JSON_TYPE_INVALID:-10031,DBR_JSON_KEY_INVALID:-10032,DBR_JSON_VALUE_INVALID:-10033,DBR_JSON_NAME_KEY_MISSING:-10034,DBR_JSON_NAME_VALUE_DUPLICATED:-10035,DBR_TEMPLATE_NAME_INVALID:-10036,DBR_JSON_NAME_REFERENCE_INVALID:-10037,DBR_PARAMETER_VALUE_INVALID:-10038,DBR_DOMAIN_NOT_MATCHED:-10039,DBR_RESERVEDINFO_NOT_MATCHED:-10040,DBR_AZTEC_LICENSE_INVALID:-10041,DBR_LICENSE_DLL_MISSING:-10042,DBR_LICENSEKEY_NOT_MATCHED:-10043,DBR_REQUESTED_FAILED:-10044,DBR_LICENSE_INIT_FAILED:-10045,DBR_PATCHCODE_LICENSE_INVALID:-10046,DBR_POSTALCODE_LICENSE_INVALID:-10047,DBR_DPM_LICENSE_INVALID:-10048,DBR_FRAME_DECODING_THREAD_EXISTS:-10049,DBR_STOP_DECODING_THREAD_FAILED:-10050,DBR_SET_MODE_ARGUMENT_ERROR:-10051,DBR_LICENSE_CONTENT_INVALID:-10052,DBR_LICENSE_KEY_INVALID:-10053,DBR_LICENSE_DEVICE_RUNS_OUT:-10054,DBR_GET_MODE_ARGUMENT_ERROR:-10055,DBR_IRT_LICENSE_INVALID:-10056,DBR_MAXICODE_LICENSE_INVALID:-10057,DBR_GS1_DATABAR_LICENSE_INVALID:-10058,DBR_GS1_COMPOSITE_LICENSE_INVALID:-10059,DBR_DOTCODE_LICENSE_INVALID:-10061};Dynamsoft.EnumGrayscaleTransformationMode={GTM_INVERTED:1,GTM_ORIGINAL:2,GTM_SKIP:0};Dynamsoft.EnumImagePixelFormat={IPF_Binary:0,IPF_BinaryInverted:1,IPF_GrayScaled:2,IPF_NV21:3,IPF_RGB_565:4,IPF_RGB_555:5,IPF_RGB_888:6,IPF_ARGB_8888:7,IPF_RGB_161616:8,IPF_ARGB_16161616:9,IPF_ABGR_8888:10,IPF_ABGR_16161616:11,IPF_BGR_888:12};Dynamsoft.EnumImagePreprocessingMode={IPM_AUTO:1,IPM_GENERAL:2,IPM_GRAY_EQUALIZE:4,IPM_GRAY_SMOOTH:8,IPM_SHARPEN_SMOOTH:16,IPM_MORPHOLOGY:32,IPM_SKIP:0};Dynamsoft.EnumIMResultDataType={IMRDT_IMAGE:1,IMRDT_CONTOUR:2,IMRDT_LINESEGMENT:4,IMRDT_LOCALIZATIONRESULT:8,IMRDT_REGIONOFINTEREST:16,IMRDT_QUADRILATERAL:32};Dynamsoft.EnumIntermediateResultSavingMode={IRSM_MEMORY:1,IRSM_FILESYSTEM:2,IRSM_BOTH:4};Dynamsoft.EnumIntermediateResultType={IRT_NO_RESULT:0,IRT_ORIGINAL_IMAGE:1,IRT_COLOUR_CLUSTERED_IMAGE:2,IRT_COLOUR_CONVERTED_GRAYSCALE_IMAGE:4,IRT_TRANSFORMED_GRAYSCALE_IMAGE:8,IRT_PREDETECTED_REGION:16,IRT_PREPROCESSED_IMAGE:32,IRT_BINARIZED_IMAGE:64,IRT_TEXT_ZONE:128,IRT_CONTOUR:256,IRT_LINE_SEGMENT:512,IRT_FORM:1024,IRT_SEGMENTATION_BLOCK:2048,IRT_TYPED_BARCODE_ZONE:4096,IRT_PREDETECTED_QUADRILATERAL:8192};Dynamsoft.EnumLocalizationMode={LM_SKIP:0,LM_AUTO:1,LM_CONNECTED_BLOCKS:2,LM_LINES:8,LM_STATISTICS:4,LM_SCAN_DIRECTLY:16,LM_STATISTICS_MARKS:32,LM_STATISTICS_POSTAL_CODE:64};Dynamsoft.EnumPDFReadingMode={PDFRM_RASTER:1,PDFRM_AUTO:2,PDFRM_VECTOR:4};Dynamsoft.EnumQRCodeErrorCorrectionLevel={QRECL_ERROR_CORRECTION_H:0,QRECL_ERROR_CORRECTION_L:1,QRECL_ERROR_CORRECTION_M:2,QRECL_ERROR_CORRECTION_Q:3};Dynamsoft.EnumRegionPredetectionMode={RPM_AUTO:1,RPM_GENERAL:2,RPM_GENERAL_RGB_CONTRAST:4,RPM_GENERAL_GRAY_CONTRAST:8,RPM_GENERAL_HSV_CONTRAST:16,RPM_SKIP:0};Dynamsoft.EnumResultCoordinateType={RCT_PIXEL:1,RCT_PERCENTAGE:2};Dynamsoft.EnumResultType={RT_STANDARD_TEXT:0,RT_RAW_TEXT:1,RT_CANDIDATE_TEXT:2,RT_PARTIAL_TEXT:3};Dynamsoft.EnumScaleUpMode={SUM_AUTO:1,SUM_LINEAR_INTERPOLATION:2,SUM_NEAREST_NEIGHBOUR_INTERPOLATION:4,SUM_SKIP:0};Dynamsoft.EnumTerminatePhase={TP_REGION_PREDETECTED:1,TP_IMAGE_PREPROCESSED:2,TP_IMAGE_BINARIZED:4,TP_BARCODE_LOCALIZED:8,TP_BARCODE_TYPE_DETERMINED:16,TP_BARCODE_RECOGNIZED:32};Dynamsoft.EnumTextAssistedCorrectionMode={TACM_AUTO:1,TACM_VERIFYING:2,TACM_VERIFYING_PATCHING:4,TACM_SKIP:0};Dynamsoft.EnumTextFilterMode={TFM_AUTO:1,TFM_GENERAL_CONTOUR:2,TFM_SKIP:0};Dynamsoft.EnumTextResultOrderMode={TROM_CONFIDENCE:1,TROM_POSITION:2,TROM_FORMAT:4,TROM_SKIP:0};Dynamsoft.EnumTextureDetectionMode={TDM_AUTO:1,TDM_GENERAL_WIDTH_CONCENTRATION:2,TDM_SKIP:0}})();Dynamsoft.AddonReady(function(e,c){var b,f=Dynamsoft.BarcodeReaderAddon;function a(h){return h&&h instanceof ArrayBuffer}f.Class=(function(){var h=Dynamsoft.Lib;var p=function(){this._runtimeSettings=null;this._initSettingsContent=null;this._tplContentArr=[];this.bWasm=false};p.prototype._decodeBlob=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof Blob)){throw TypeError("'_decodeBlob(blob, templateName)': Type of 'blob' should be 'Blob'.")}t()}).then(function(){return q._innerDecode(0,s,r)})};p.prototype._decodeArrayBuffer=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof ArrayBuffer)){throw TypeError("'_decodeBlob(arrayBuffer, templateName)': Type of 'arrayBuffer' should be 'ArrayBuffer'.")}t()}).then(function(){return q._innerDecode(0,s,r)})};p.prototype._decodeUint8Array=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof Uint8Array)&&!(self.Uint8ClampedArray&&s instanceof Uint8ClampedArray)){throw TypeError("'_decodeBlob(uint8Array, templateName)': Type of 'uint8Array' should be 'Uint8Array'.")}t()}).then(function(){return q._innerDecode(0,s,r)})};p.prototype._decodeImage=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof HTMLImageElement)){throw TypeError("'_decodeImage(image, templateName)': Type of 'image' should be 'HTMLImageElement'.")}if(s.crossOrigin&&"anonymous"!=s.crossOrigin){throw"cors"}r=r||"";t()}).then(function(){if(s.src.substring(0,11)=="data:image/"){return q._decodeBase64(s.src,r)}else{return q._decodeUrl(s.src,r)["catch"](function(u){if(f.logLevel>=3){if(console&&console.warn){console.warn("'_decodeImage(image, templateName)': Image src not available. Use '_decodeCanvas' instead.");console.warn(u)}}if(!self.HTMLCanvasElement){return Promise.reject(Error("'_decodeImage(image, templateName)': Browser not support HTMLCanvasElement."))}var v=document.createElement("canvas");v.width=s.naturalWidth;v.height=s.naturalHeight;var t=v.getContext("2d");t.drawImage(s,0,0);return q._decodeCanvas(v,r)})}})};p.prototype._decodeCanvas=function(s,r){var q=this;return new Promise(function(t){if(!(s instanceof HTMLCanvasElement)){throw TypeError("'_decodeCanvas(canvas, templateName)': Type of 'canvas' should be 'HTMLCanvasElement'.")}if(s.crossOrigin&&"anonymous"!=s.crossOrigin){throw"cors"}r=r||"";if(s.toBlob){s.toBlob(function(u){t(u)})}else{if(s.msToBlob){s.msToBlob(function(u){t(u)})}else{t(s.toDataURL())}}}).then(function(t){if(s.toBlob||s.msToBlob){return q._decodeBlob(t,r)}else{return q._decodeBase64(t,r)}})};p.prototype._decodeVideo=function(t){var r=this;var s;var q=arguments;return new Promise(function(B){if(!(t instanceof HTMLVideoElement)){throw TypeError("'_decodeVideo(video [ [, sx, sy, sWidth, sHeight], dWidth, dHeight] [, templateName] )': Type of 'video' should be 'HTMLVideoElement'.")}if(t.crossOrigin&&"anonymous"!=t.crossOrigin){throw"cors"}var A,z,u,w,y,v;if(q.length<=2){A=z=0;u=y=t.videoWidth;w=v=t.videoHeight}else{if(q.length<=4){A=z=0;u=t.videoWidth;w=t.videoHeight;y=q[1];v=q[2]}else{A=q[1];z=q[2];u=q[3];w=q[4];y=q[5];v=q[6]}}s=(typeof q[q.length-1]=="string")?q[q.length-1]:"";var x=document.createElement("canvas");x.width=y;x.height=v;var C=x.getContext("2d");C.drawImage(t,A,z,u,w,0,0,y,v);B(x)}).then(function(u){return r._decodeCanvas(u,s)})};p.prototype._decodeBase64=p.prototype.decodeBase64String=function(s,r){var q=this;return new Promise(function(t){if(!(typeof s=="string"||typeof s=="object"&&s instanceof String)){throw TypeError("'decodeBase64(base64Str, templateName)': Type of 'base64Str' should be 'String'.")}if(s.substring(0,11)=="data:image/"){s=s.substring(s.indexOf(",")+1)}t()}).then(function(){return q._innerDecode(1,s,r)})};p.prototype._decodeUrl=function(s,r){var q=this;if(s&&s.indexOf&&(s.indexOf("dwt://")==0||s.indexOf("dcs://")==0)){return q._decodeDynamsoftServiceInnerUrl(s,r)}if(f._wasmInstance){return f._wasmInstance.decode(s)}return new Promise(function(v,u){var t;if(!(typeof s=="string"||typeof s=="object"&&s instanceof String)){throw TypeError("'_decodeUrl(url, templateName)': Type of 'url' should be 'String'.")}r=r||"";if(f._activeXInstance){t=new ActiveXObject("MSXML2.XMLHTTP");t.open("GET",s,true);if(t.overrideMimeType){t.overrideMimeType("text/plain; charset=x-user-defined")}else{t.setRequestHeader("Accept-Charset","x-user-defined")}t.onreadystatechange=function(){if(t.readyState==4){v(new VBArray(t.responseBody).toArray())}};t.send("")}else{t=new XMLHttpRequest();t.open("GET",s,true);t.responseType="arraybuffer";t.send();t.onloadend=function(){v(this.response)};t.onerror=function(){u(Error(t.error))}}}).then(function(t){if(f._activeXInstance){return q._activeXDecodeArray(t,r)}else{return q._decodeArrayBuffer(t,r)}})};p.prototype._decodeDynamsoftServiceInnerUrl=function(s,r){var q=this;return new Promise(function(t){if(!(typeof s=="string"||typeof s=="object"&&s instanceof String)){throw TypeError("'_decodeUrl(url, templateName)': Type of 'innerUrl' should be 'String'.")}if(!(s.indexOf("dwt://")==0||s.indexOf("dcs://")==0)){throw TypeError("'_decodeDynamsoftServiceInnerUrl(innerUrl, templateName)': 'innerUrl' should start with 'dwt://' or 'dcs://'.")}t()}).then(function(){return q._innerDecode(4000,s,r)})};p.prototype._activeXDecodeArray=function(s,r){var q=this;return new Promise(function(v,u){if(!(s instanceof Array)){throw TypeError("'_activeXDecodeArray(array, templateName)': Type of 'array' should be 'Array'.")}r=r||"";try{v(Dynamsoft.Lib.btoa(String.fromCharCode.apply(String,s)))}catch(t){u(t)}}).then(function(t){return q._decodeBase64(t,r)})};p.prototype._activeXDecodeHandle=function(s,r){var q=this;return new Promise(function(t){r=r||"";t()}).then(function(){return q._innerDecode(4001,s,r)})};p.prototype._decode=p.prototype.decode=function(r,q){if(f._activeXInstance){if((typeof r=="string"||r instanceof String)){return this._activeXDecodeHandle(r,q)}else{return Promise.reject(TypeError("'_decode(source, templateName)' in activeX: Type of 'source' should be 'String(partUrl)'."))}}else{if(f._wasmInstance){return f._wasmInstance.decode(r)}else{if(self.Blob&&r instanceof Blob){return this._decodeBlob(r,q)}else{if(self.ArrayBuffer&&r instanceof ArrayBuffer){return this._decodeArrayBuffer(r,q)}else{if((self.Uint8Array&&r instanceof Uint8Array)||(self.Uint8ClampedArray&&r instanceof Uint8ClampedArray)){return this._decodeUint8Array(r,q)}else{if(r instanceof Array){return this._activeXDecodeArray(r,q)}else{if(self.HTMLImageElement&&r instanceof HTMLImageElement){return this._decodeImage(r,q)}else{if(self.HTMLCanvasElement&&r instanceof HTMLCanvasElement){return this._decodeCanvas(r,q)}else{if(self.HTMLVideoElement&&r instanceof HTMLVideoElement){return this._decodeVideo(r,q)}else{if(!isNaN(r)){return this._activeXDecodeHandle(r,q)}else{if(typeof r=="string"||r instanceof String){if(r.substring(0,11)=="data:image/"){return this._decodeBase64(r,q)}else{return this._decodeUrl(r,q)}}else{return Promise.reject(TypeError("'_decode(source, templateName)' in H5: Type of 'source' should be 'Blob', 'ArrayBuffer', 'Uint8Array', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement', 'String(base64 with image mime)' or 'String(url)'."))}}}}}}}}}}}};var k=function(q){return typeof q==="number"&&q%1===0};var m=function(r){if(typeof r!="object"||r.length!=8){return false}for(var q=0;q<r.length;++q){if(!k(r[q])){return false}}return true};p.prototype._innerServiceCmd=function(r,q){return new Promise(function(u,t){var s={method:"ReadBarcode",parameter:[Dynamsoft.WebTwainEnv.ProductKey,4002,"",""],updateSettings:r,initSettingsContent:q};if(f._activeXInstance){u(f._activeXInstance.Process(h.stringify(s),location.protocol+"//"+location.host))}else{h.fetch(f._urlRoot+"ReadBarcode",{mode:"cors",method:"post",body:h.stringify(s),dataType:"arrayBuffer"}).then(function(v){if(a(v)){u(String.fromCharCode.apply(null,new Uint8Array(v)))}else{u(v)}},function(w){var v="Init template & runtimeSettings failed.";if(w){v=[v," Http info: ",w.errorString," (",w.httpCode,")"].join("")}t(v)})}})};p.prototype._innerDecode=function(t,u,r,s){var q=this;if(q._runtimeSettings){if(q._runtimeSettings.expectedBarcodesCount==0){q._runtimeSettings.expectedBarcodesCount=512}}return new Promise(function(z,y){var x={method:"ReadBarcode",parameter:[Dynamsoft.WebTwainEnv.ProductKey,t,t!=0?u:null,r||""],updateSettings:q._runtimeSettings,conflictMode:1==q.conflictMode?"ignore":"overwrite",initSettingsContent:q._initSettingsContent,tplContent:(function(){if(r){for(var A=0;A<q._tplContentArr.length;++A){if(r==q._tplContentArr[A].ImageParameter.Name){return h.stringify(q._tplContentArr[A])}}}return null})()};if(h.product.bHTML5Edition){if(s){x.parameter.push(s)}}var w=function(C,J,I){try{var G=i(C);if(!G||!G.textResults){y(new f.BarcodeReaderException(G.exception,G.description))}if(h.product.bHTML5Edition&&I&&I.config.data){var E=h.parse(I.config.data),D;if(h.isArray(E.parameter)&&E.parameter.length>2){if(E.parameter[1]==4000){if(E.parameter.length>4&&E.parameter[4]){G.textResults.imageid=E.parameter[4]}else{var F,B;F=E.parameter[2];B=F.indexOf("&index=");if(B>=0){G.textResults.imageid=F.substring(B+7,F.indexOf("&t="))}}}}}for(D=0;D<G.textResults.length;D++){var A=G.textResults[D];A.BarcodeText=A.barcodeText;if(G.exception!=Dynamsoft.EnumErrorCode.DBR_SUCCESS){A.exception=G.exception}}if(G.exception!=Dynamsoft.EnumErrorCode.DBR_SUCCESS){G.textResults.exception=G.exception;G.textResults.description=G.description}z(G.textResults)}catch(H){y(H)}};if(f._activeXInstance){w(f._activeXInstance.Process(h.stringify(x),location.protocol+"//"+location.host))}else{var v=f._urlRoot+"ReadBarcode";if(0==t){v+="/LoadZipFromBytes?cmd="+encodeURIComponent(h.stringify(x))}h.fetch(v,{mode:"cors",method:"post",body:(0!=t)?h.stringify(x):u,dataType:"arrayBuffer"}).then(function(C,B,A){if(a(C)){w(String.fromCharCode.apply(null,new Uint8Array(C)),B,A)}else{w(C,B,A)}},function(B){var A="ReadBarcode request fail.";if(B){A=[A," Http info: ",B.errorString," (",B.httpCode,")"].join("")}y(Error(A))})}})};var i=f._handleRetJsonString=function(s){var r;if(typeof s=="string"||typeof s=="object"&&s instanceof String){try{r=h.parse(s)}catch(q){r=h.parse(f.RemoveNonPrintableChar(s))}}else{r=s}if(!r){throw f.BarcodeReaderException(Dynamsoft.EnumErrorCode.DBR_UNKNOWN,f.errors.decodeResultEmpty)}if("textResults" in r&&h.isArray(r.textResults)){}else{if(r.exception!=Dynamsoft.EnumErrorCode.DBR_SUCCESS){throw f.BarcodeReaderException(r.exception,r.description)}}return r};p.prototype.getAllParameterTemplateNames=function(){var q=[];for(var r=0;r<this._tplContentArr.length;++r){q.push(this._tplContentArr[r].ImageParameter.Name)}return q};p.prototype.getRuntimeSettings=function(){var q=this;if(q.bWasm){return f._wasmInstance.getRuntimeSettings()}if(!q._runtimeSettings){q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}return Promise.resolve(q._runtimeSettings)};var o='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":3,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"bestSpeed","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"Mode":"TFM_SKIP"}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}',j='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":5,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_STATISTICS"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"balance","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}',n='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":["BF2_POSTALCODE","BF2_DOTCODE"],"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"},{"Mode":"GTM_INVERTED"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"},{"Mode":"LM_STATISTICS_MARKS"},{"Mode":"LM_STATISTICS_POSTAL_CODE"}],"MaxAlgorithmThreadCount":4,"Name":"coverage","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":214748347,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}',l='{"ImageParameter":{"AccompanyingTextRecognitionModes":[{"Mode":"ATRM_SKIP"}],"BarcodeColourModes":[{"LightReflection":1,"Mode":"BICM_DARK_ON_LIGHT"}],"BarcodeComplementModes":[{"Mode":"BCM_SKIP"}],"BarcodeFormatIds":["BF_ALL"],"BarcodeFormatIds_2":null,"BinarizationModes":[{"BlockSizeX":0,"BlockSizeY":0,"EnableFillBinaryVacancy":1,"ImagePreprocessingModesIndex":-1,"Mode":"BM_LOCAL_BLOCK","ThreshValueCoefficient":10}],"ColourClusteringModes":[{"Mode":"CCM_SKIP"}],"ColourConversionModes":[{"BlueChannelWeight":-1,"GreenChannelWeight":-1,"Mode":"CICM_GENERAL","RedChannelWeight":-1}],"DPMCodeReadingModes":[{"Mode":"DPMCRM_SKIP"}],"DeblurLevel":9,"DeformationResistingModes":[{"Mode":"DRM_SKIP"}],"Description":"","ExpectedBarcodesCount":512,"FormatSpecificationNameArray":null,"GrayscaleTransformationModes":[{"Mode":"GTM_ORIGINAL"}],"ImagePreprocessingModes":[{"Mode":"IPM_GENERAL"}],"IntermediateResultSavingMode":{"Mode":"IRSM_MEMORY"},"IntermediateResultTypes":["IRT_NO_RESULT"],"LocalizationModes":[{"Mode":"LM_CONNECTED_BLOCKS"},{"Mode":"LM_SCAN_DIRECTLY","ScanDirection":0,"ScanStride":0},{"Mode":"LM_STATISTICS"},{"Mode":"LM_LINES"}],"MaxAlgorithmThreadCount":4,"Name":"default","PDFRasterDPI":300,"PDFReadingMode":{"Mode":"PDFRM_AUTO"},"Pages":"","RegionDefinitionNameArray":null,"RegionPredetectionModes":[{"Mode":"RPM_GENERAL"}],"ResultCoordinateType":"RCT_PIXEL","ReturnBarcodeZoneClarity":0,"ScaleDownThreshold":2300,"ScaleUpModes":[{"Mode":"SUM_AUTO"}],"TerminatePhase":"TP_BARCODE_RECOGNIZED","TextAssistedCorrectionMode":{"BottomTextPercentageSize":0,"LeftTextPercentageSize":0,"Mode":"TACM_VERIFYING","RightTextPercentageSize":0,"TopTextPercentageSize":0},"TextFilterModes":[{"MinImageDimension":65536,"Mode":"TFM_GENERAL_CONTOUR","Sensitivity":0}],"TextResultOrderModes":[{"Mode":"TROM_CONFIDENCE"},{"Mode":"TROM_POSITION"},{"Mode":"TROM_FORMAT"}],"TextureDetectionModes":[{"Mode":"TDM_GENERAL_WIDTH_CONCENTRATION","Sensitivity":5}],"Timeout":10000},"Version":"3.0"}';p.prototype.updateRuntimeSettings=function(u){var r=this,t;if(typeof u=="string"||typeof u=="object"&&u instanceof String){if("speed"==u||"balance"==u||"coverage"==u||"default"==u){var q;if("speed"==u){q=o}else{if("balance"==u){q=j}else{if("coverage"==u){q=n}else{q=l}}}return r.initRuntimeSettingsWithString(q)}else{t=u}}else{if(typeof u=="object"){t=h.stringify(u)}else{throw TypeError("'setTemplateSettings(settings)': Type of 'settings' should be 'String' or 'PlainObject'.")}}var s=h.parse(t);if(r.bWasm){return f._wasmInstance.updateRuntimeSettings(s).then(function(){return f._wasmInstance.getRuntimeSettings()})}r._runtimeSettings=s;r._initSettingsContent=null;return r._innerServiceCmd(r._runtimeSettings,null).then(function(v){var w=f._handleRetJsonString(v);r._runtimeSettings=w.settings;if(!r._runtimeSettings){r._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}return w.settings})};p.prototype.resetRuntimeSettings=function(){var q=this;if(q.bWasm){return f._wasmInstance.resetRuntimeSettings().then(function(){return f._wasmInstance.getRuntimeSettings()})}q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr);q._initSettingsContent=null;return q._innerServiceCmd(q._runtimeSettings,null).then(function(r){var s=f._handleRetJsonString(r);q._runtimeSettings=s.settings;if(!q._runtimeSettings){q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}return s.settings})};p.prototype.outputSettingsToString=function(q){if(q){for(var r=0;r<this._tplContentArr.length;++r){if(q==this._tplContentArr[r].ImageParameter.Name){return h.stringify(this._tplContentArr[r])}}}else{return f._defaultTemplateStr}};p.prototype.initRuntimeSettingsWithString=function(r){var q=this;if(!h.isString(r)){throw TypeError("'initRuntimeSettingsWithString(settings)': Type of 'settings' should be 'String'.")}if(q.bWasm){return f._wasmInstance.initRuntimeSettingsWithString(r).then(function(){return f._wasmInstance.getRuntimeSettings()})}q._runtimeSettings=null;q._initSettingsContent=h.parse(r);return q._innerServiceCmd(null,q._initSettingsContent).then(function(s){var t=f._handleRetJsonString(s);q._runtimeSettings=t.settings;if(!q._runtimeSettings){q._runtimeSettings=h.parse(f._defaultRuntimeSettingsStr)}return t.settings})};return p})();f._dbr=false;f._initH5=function(i,h){return new Promise(function(k,j){f._urlRoot=Dynamsoft.dcp._getPreUrl(Dynamsoft.dcp.detect.curPortIndex)+"dcp/dbr_"+f.Version.replace(/\./g,"")+"/";e.ajax({method:"POST",url:f._urlRoot+"VersionInfo",data:'{"method":"VersionInfo"}',onSuccess:function(){k()},onError:function(){return j("Failed to connect to the Barcode Reader Add-on, the library may be missing in the Dynamsoft Service directory.")},dataType:"json",async:true,timeout:800})}).then(function(){f._dbr=new f.Class();return f._dbr._innerServiceCmd(null,null)}).then(function(j){try{var l=f._handleRetJsonString(j);f._dbr._runtimeSettings=l.settings;f._defaultRuntimeSettingsStr=e.stringify(l.settings);f._defaultTemplateStr=e.stringify(l.outputSettings);i(f._dbr)}catch(k){h(Error("Init template & runtimeSettings failed: "+k.message)||k)}},function(j){h(j)})};function g(){try{if(typeof WebAssembly==="object"&&typeof WebAssembly.instantiate==="function"){var h=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(h instanceof WebAssembly.Module){return new WebAssembly.Instance(h) instanceof WebAssembly.Instance}}}catch(i){}return false}f.dbrInitPromiseFun=function(n,p){var j=Dynamsoft.BarcodeReaderAddon,m=function(){var q;if(Dynamsoft.DBR&&Dynamsoft.DBR.BarcodeReader&&Dynamsoft.DBR.BarcodeReader.createInstance){q=Dynamsoft.DBR.BarcodeReader.createInstance()}else{if(Dynamsoft.BarcodeReader&&Dynamsoft.BarcodeReader.createInstance){q=Dynamsoft.BarcodeReader.createInstance()}}q.then(function(r){if(Dynamsoft.WebTwainEnv.dbrCanvasMaxWH){r._canvasMaxWH=Dynamsoft.WebTwainEnv.dbrCanvasMaxWH}j._wasmInstance=r;return r.getRuntimeSettings()}).then(function(r){j._dbr._runtimeSettings=r;j._defaultRuntimeSettingsStr=e.stringify(r);n(j._dbr)},p)};if(j._dbr){if(j._dbr.bWasm&&!j._wasmInstance){m()}else{n(j._dbr)}return}var k="?t=2020525",h=Dynamsoft.WebTwainEnv.ResourcesPath,l=!Dynamsoft.navInfo.bWin||e.product.bHTML5Edition&&(!Dynamsoft.WebTwainEnv.UseLocalService||e.env.bMobile||Dynamsoft.WebTwainEnv.UseBarcodeAddonWasm);var o=function(){if(l){e.showLoadingMsg(-1,"",Dynamsoft.MSG.Init_CompilingWasm);if(Dynamsoft.DBR&&Dynamsoft.DBR.BarcodeReader){Dynamsoft.DBR.BarcodeReader._bUseFullFeature=true}else{if(Dynamsoft.BarcodeReader){Dynamsoft.BarcodeReader._bUseFullFeature=true}}j._dbr=new j.Class();j._dbr.bWasm=true;if(Dynamsoft.DBR&&Dynamsoft.DBR.BarcodeReader&&Dynamsoft.DBR.BarcodeReader.createInstance||Dynamsoft.BarcodeReader&&Dynamsoft.BarcodeReader.createInstance){m()}else{setTimeout(function(){m()},30)}return}if(e.product.bHTML5Edition){j._initH5(n,p)}else{var u=Dynamsoft.navInfoSync,q={method:"ReadBarcode",parameter:[Dynamsoft.WebTwainEnv.ProductKey,4002,"",""]};if(u.bIE&&parseInt(u.IEVersion)<=j._activeXMaxIEVersion){try{j._activeXInstance=new ActiveXObject("DBRModule.AtlDBR");var v=j._activeXInstance.Process(e.stringify(q),location.protocol+"//"+location.host);var t=e.parse(v);if(!t){return p(Error("The DBR init error."))}if("settings" in t){j._dbr=new j.Class();j._dbr._runtimeSettings=t.settings;j._defaultRuntimeSettingsStr=e.stringify(t.settings);if("outputSettings" in t){j._defaultTemplateStr=e.stringify(t.outputSettings)}n(j._dbr)}else{var r=t.description||"The DBR init error.";return p(Error(r))}}catch(s){return p(Error("The DBR .dll is missing or not accessible: "+(s.message||s)))}}}};if(l){if(!e.detect.dbrwasmScriptLoaded){if(!g()){p(Error(Dynamsoft.MSG.Err_BrowserNotSupportWasm));return}if(window.DSBarcodeReader&&window.DSBarcodeReader.BarcodeReader){e.detect.dbrwasmScriptLoaded=true;Dynamsoft.BarcodeReader=window.DSBarcodeReader.BarcodeReader;Dynamsoft.BarcodeReader.engineResourcePath=Dynamsoft.WebTwainEnv.ResourcesPath+"/addon/dbrjs/";Dynamsoft.BarcodeReader.productKeys=Dynamsoft.WebTwainEnv.ProductKey;o();return}var i=e.getScript([h,"/addon/dbrjs/dbr.js",k].join(""),true,function(q){e.detect.dbrwasmScriptLoaded=true;o()});i.setAttribute("data-productKeys",Dynamsoft.WebTwainEnv.ProductKey)}else{o()}}else{o()}};var d=function(i){var j=e.html5.Funs,h;if(Dynamsoft.dcp.b64bit){b="dbrx64_"+Dynamsoft.BarcodeReaderAddon.Version+".dll"}else{b="dbr_"+Dynamsoft.BarcodeReaderAddon.Version+".dll"}if(e.product.bHTML5Edition&&!i._isMobileMode()){i._innerSend("GetAddOnVersion",j.makeParams("barcodereader",b),true,false,false)}h={BarcodeReader:{decode:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}if(!e.isNumber(k)||k<0||k>=i.HowManyImagesInBuffer){e.Errors.IndexOutOfRange(i);return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}return Promise.resolve(k).then(function(m){var l;if(e.product.bHTML5Edition){l=i._ImgManager.convertClientIndexToServerId(m);if(l==-1){e.Errors.IndexOutOfRange(i);throw f.BarcodeReaderException(i._errorCode,i._errorString)}}else{l=m}return new Promise(function(o,n){f.dbrInitPromiseFun(function(r){if(r.bWasm){var p=r.getRuntimeSettings();p=p.then(function(u){if(u.expectedBarcodesCount==0){u.expectedBarcodesCount=512;return r.updateRuntimeSettings(u)}});if(i._isMobileMode()){p=p.then(function(){var u=i._ImgManager.convertServerIdToClientIndex(l);return i._ImgManager.getWebViewer().GetImageData(i._ImgManager.getUidByIndex(u))});p=p.then(function(u){if(u.oriData){return u.oriData}return u.originalData})}else{p=p.then(function(){var u=i._ImgManager.convertServerIdToClientIndex(l);return i.GetImageURL(u,-1,-1)})}p=p.then(function(u){if(u instanceof Blob||u instanceof ArrayBuffer){return f._wasmInstance.decode(u)}return e.fetch(u,{mode:"cors",dataType:"blob"}).then(function(v){return f._wasmInstance.decode(v)})});p.then(function(u){u.imageid=i.objImageIndexManager.convertServerIdToGuid(l);o(u)},function(v){var u="decode failed.";if(v){u=[u," ",v.errorString," (",v.httpCode,")"].join("")}n(Error(u))})}else{var s;if(!e.product.bHTML5Edition){s=l;var t=i.GetImagePartURL(s,-1,-1);return r._innerDecode(4001,t,"").then(function(u){u.imageid=i.IndexToImageID(s);o(u)},function(u){n(u)})}if(!r.bWasm){s=i._ImgManager.convertServerIdToClientIndex(l);var q=i.GetImagePartURL(s,-1,-1);return r._innerDecode(4000,q,"").then(function(u){u.imageid=i.IndexToImageID(s);o(u)},function(u){n(u)})}}},n)})})},resetRuntimeSettings:function(){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}return new Promise(f.dbrInitPromiseFun).then(function(k){return k.resetRuntimeSettings()})},getRuntimeSettings:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}if(e.isString(k)&&("speed"==k||"balance"==k||"coverage"==k||"default"==k)){return this.updateRuntimeSettings(k)}return new Promise(f.dbrInitPromiseFun).then(function(l){return l.getRuntimeSettings()})},updateRuntimeSettings:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}return new Promise(f.dbrInitPromiseFun).then(function(l){return l.updateRuntimeSettings(k)})},initRuntimeSettingsWithString:function(k){if(!e.License.checkProductKey(i,{Core:true})){return Promise.reject(f.BarcodeReaderException(i._errorCode,i._errorString))}return new Promise(f.dbrInitPromiseFun).then(function(l){return l.initRuntimeSettingsWithString(k)})}}};if(e.product.bHTML5Edition){i.__addon=i.__addon||{};e.mix(i.__addon,h)}else{i.Addon=i.Addon||{};e.mix(i.Addon,h)}};if(e.DynamicLoadAddonFuns){e.DynamicLoadAddonFuns.push(d)}Dynamsoft.unloadQueue.push(function(){if(f._wasmInstance){f._wasmInstance.destroy();f._wasmInstance=false}})}); 
/*! 20210104
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 16.2
*
* Module: addon/pdf
* final js: build\addon\dynamsoft.webtwain.addon.pdf.js
*/
;var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};var EnumDWT_ConvertMode={CM_RENDERALL:1,CM_IMAGEONLY:2,CM_AUTO:3};var EnumDWT_PDFCompressionType={PDF_AUTO:0,PDF_FAX3:1,PDF_FAX4:2,PDF_LZW:3,PDF_RLE:4,PDF_JPEG:5,PDF_JP2000:6,PDF_JBig2:7};(function(c){var d=[c,Dynamsoft],b=0;for(;b<2;b++){var a=d[b];a.EnumDWT_ConvertMode=EnumDWT_ConvertMode;a.EnumDWT_PDFCompressionType=EnumDWT_PDFCompressionType}})(typeof window!=="undefined"?window:this);Dynamsoft.AddonReady(function(c,b){if(!c.product.bHTML5Edition){return}var a;var d=function(f){var g=c.html5.Funs,e;if(c.env.bMac){if(Dynamsoft.dcp.b64bit){a="libDynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dylib"}else{a="libDynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dylib"}}else{if(c.env.bLinux){a="libDynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".so"}else{if(Dynamsoft.dcp.b64bit){a="DynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}else{a="DynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}}}if(!f._isMobileMode()){f._innerSend("GetAddOnVersion",g.makeParams("pdf",a),true,false,false)}e={PDF:{IsModuleInstalled:function(){var i=f;i._resetErr();if(i._isMobileMode()){if(Dynamsoft.pdf){return Dynamsoft.pdf.IsModuleInstalled()}return false}var h=i._innerFun("GetAddOnVersion",g.makeParams("pdf",a));return(h!="")},IsModuleInstalledAsync:function(){var h=f;h._resetErr();if(h._isMobileMode()){if(Dynamsoft.pdf){return c.Promise.resolve(Dynamsoft.pdf.IsModuleInstalled())}return c.Promise.resolve(false)}return h._innerFunV2("GetAddOnVersion",g.makeParams("pdf",a)).then(function(i){return(i!="")})},ConvertToImage:function(k,i,p,j){var o=g.replaceLocalFilename(k);var h="ConvertPDFToImage";var l=function(m){g.hideMask(h);if(p){p()}return true},q=function(m){g.hideMask(h);if(j){j()}return false};var n=f;n._resetErr();if(n._isMobileMode()){return true}g.showMask(h);n._innerSend(h,g.makeParams(o,i),true,l,q);return true},SetPassword:function(h){var i=f;i._resetErr();if(i._isMobileMode()){i._pdfPassword=h;return true}return i._innerFun("SetPDFPassword",g.makeParams(h))},SetConvertMode:function(h){var i=f;return i._setConvertMode(h)},SetConvertModeAsync:function(h){var i=f;return i._setConvertModeAsync(h)},GetConvertMode:function(){var h=f;h._resetErr();return h._pdfConvertMode},SetResolution:function(h){var i=f;i._resetErr();if(i._isMobileMode()){i._pdfResolution=1*h;return true}return f._innerFun("SetPDFResolution",g.makeParams(h))},SetResolutionAsync:function(h){var i=f;i._resetErr();if(i._isMobileMode()){i._pdfResolution=1*h;return c.Promise.resolve(true)}return f._innerFunV2("SetPDFResolution",g.makeParams(h))},IsTextBasedPDF:function(l,j,i){var m=f;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("IsTextBasedPDF",i)}var k=g.replaceLocalFilename(l);var h=f._innerFun("IsTextBasedPDF",g.makeParams(k));if(m.ErrorCode==0){if(c.isFunction(j)){j(h)}}else{if(c.isFunction(i)){i(m.ErrorCode,m.ErrorString)}}return h},Write:{Setup:function(h){var j=h;if(!j){j={version:15}}if(!c.isNumber(j.version)){j.version=15}else{if(j.version>=1&&j.version<2){j.version=parseInt(10*j.version)}}if(c.isNumber(j.compression)&&(j.compression==EnumDWT_PDFCompressionType.PDF_FAX3)){j.compression=EnumDWT_PDFCompressionType.PDF_FAX4}var k=f;k._resetErr();if(k._isMobileMode()){k._pdfWriteSetting=j;return true}var i=c.stringify(j);i=c.replaceAll(i,'"','\\"');return k._innerFun("SetPDFSettings",['["',i,'"]'].join(""))}}}};f.__addon=f.__addon||{};c.mix(f.__addon,e)};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(d)}});Dynamsoft.AddonReady(function(b,a){if(!b.product.bPluginEdition&&!b.product.bActiveXEdition){return}var c=function(h){var f,i,e;if(h.getSWebTwain()&&h.getSWebTwain().Addon){}else{return false}if(Dynamsoft.navInfo.bWin){var g=navigator.userAgent.toLowerCase(),d=!Dynamsoft.navInfo.isX64||(g.indexOf("wow64")>=0);if(d){e="DynamicPdfCore_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}else{e="DynamicPdfCorex64_"+Dynamsoft.WebTwainEnv.PdfVersion+".dll"}}else{}i=h.getSWebTwain();f={PDF:{IsModuleInstalled:function(){var j=i.GetAddOnVersion("pdf",e);b.setErrorString(h);return(j!="")},IsModuleInstalledAsync:function(){var j=i.GetAddOnVersion("pdf",e);b.setErrorString(h);return b.Promise.resolve(j!="")},ConvertToImage:function(k,n,j,m){var l=i.ConvertPDFToImage(k,n);return b.wrapperRet(h,l,j,m)},SetPassword:function(j){var k=i.SetPDFPassword(j);return b.wrapperRet(h,k)},SetConvertMode:function(k){var l=k*1;if(isNaN(l)){b.Errors.ParameterCannotEmpty(h);return false}if(l==0){l=EnumDWT_ConvertMode.CM_IMAGEONLY}if(l==EnumDWT_ConvertMode.CM_RENDERALL){if(!b.License.checkProductKey(h,{PDFRasterizer:true},true)){return false}}var j=i.SetPDFConvertMode(l);return b.wrapperRet(h,j)},SetConvertModeAsync:function(j){return Promise.resolve(f.PDF.SetConvertMode(j))},GetConvertMode:function(){var j=i.GetPDFConvertMode();return b.wrapperRet(h,j)},SetResolution:function(k){var j=i.SetPDFResolution(k);return b.wrapperRet(h,j)},SetResolutionAsync:function(k){var j=i.SetPDFResolution(k);return b.Promise.resolve(b.wrapperRet(h,j))},IsTextBasedPDF:function(j){var k=i.IsTextBasedPDF(j);return b.wrapperRet(h,k)}}};h.Addon=h.Addon||{};b.mix(h.Addon,f)};if(b.DynamicLoadAddonFuns){b.DynamicLoadAddonFuns.push(c)}}); 
/*! 20210104
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 16.2
* 
* Module: addon/ocr
* final js: build\addon\dynamsoft.webtwain.addon.OCR.js
*/
;var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.OCRVerInName="10.0.0.0618";var EnumDWT_OCRLanguage={OCRL_ENG:"eng",OCRL_ARA:"ara",OCRL_CHI_SIM:"chi_sim",OCRL_CHI_TRA:"chi_tra",OCRL_HIN:"hin",OCRL_URD:"urd",OCRL_SPA:"spa",OCRL_FRA:"fra",OCRL_MSA:"msa",OCRL_IND:"ind",OCRL_RUS:"rus",OCRL_BEN:"ben",OCRL_POR:"por",OCRL_PAN:"pan",OCRL_DEU:"deu",OCRL_JPN:"jpn",OCRL_FAS:"fas",OCRL_SWA:"swa",OCRL_JAV:"jav",OCRL_TEL:"tel",OCRL_TUR:"tur",OCRL_KOR:"kor",OCRL_MAR:"mar",OCRL_TAM:"tam",OCRL_VIE:"vie",OCRL_ITA:"ita",OCRL_THA:"tha"};var EnumDWT_OCRPageSetMode={OCRPSM_OSD_ONLY:0,PSM_AUTO_OSD:1,PSM_AUTO_ONLY:2,PSM_AUTO:3,PSM_SINGLE_COLUMN:4,PSM_SINGLE_BLOCK_VERT_TEXT:5,PSM_SINGLE_BLOCK:6,PSM_SINGLE_LINE:7,PSM_SINGLE_WORD:8,PSM_CIRCLE_WORD:9,PSM_SINGLE_CHAR:10};var EnumDWT_OCROutputFormat={OCROF_TEXT:0,OCROF_PDFPLAINTEXT:1,OCROF_PDFIMAGEOVERTEXT:2,OCROF_PDFPLAINTEXT_PDFX:3,OCROF_PDFIMAGEOVERTEXT_PDFX:4};Dynamsoft.EnumDWT_OCRLanguage=EnumDWT_OCRLanguage;Dynamsoft.EnumDWT_OCRPageSetMode=EnumDWT_OCRPageSetMode;Dynamsoft.EnumDWT_OCROutputFormat=EnumDWT_OCROutputFormat;Dynamsoft.OCRLanguageData_eng="4113088";Dynamsoft.OCRLanguageData_ara="1432056";Dynamsoft.OCRLanguageData_chi_sim="2469156";Dynamsoft.OCRLanguageData_chi_tra="2366642";Dynamsoft.OCRLanguageData_hin="1122751";Dynamsoft.OCRLanguageData_urd="1398718";Dynamsoft.OCRLanguageData_spa="2294433";Dynamsoft.OCRLanguageData_fra="1130365";Dynamsoft.OCRLanguageData_msa="1747801";Dynamsoft.OCRLanguageData_ind="1122661";Dynamsoft.OCRLanguageData_rus="3861738";Dynamsoft.OCRLanguageData_ben="855841";Dynamsoft.OCRLanguageData_por="1982756";Dynamsoft.OCRLanguageData_pan="497721";Dynamsoft.OCRLanguageData_deu="1525436";Dynamsoft.OCRLanguageData_jpn="2471260";Dynamsoft.OCRLanguageData_fas="431500";Dynamsoft.OCRLanguageData_swa="2167651";Dynamsoft.OCRLanguageData_jav="2982741";Dynamsoft.OCRLanguageData_tel="2769654";Dynamsoft.OCRLanguageData_tur="4550554";Dynamsoft.OCRLanguageData_kor="1677415";Dynamsoft.OCRLanguageData_mar="2118233";Dynamsoft.OCRLanguageData_tam="3237963";Dynamsoft.OCRLanguageData_vie="531275";Dynamsoft.OCRLanguageData_ita="2701314";Dynamsoft.OCRLanguageData_tha="1072600";Dynamsoft.OCRLanguageData={};Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_ENG]=Dynamsoft.OCRLanguageData_eng;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_ARA]=Dynamsoft.OCRLanguageData_ara;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_CHI_TRA]=Dynamsoft.OCRLanguageData_chi_tra;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_CHI_SIM]=Dynamsoft.OCRLanguageData_chi_sim;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_HIN]=Dynamsoft.OCRLanguageData_hin;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_URD]=Dynamsoft.OCRLanguageData_urd;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_SPA]=Dynamsoft.OCRLanguageData_spa;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_FRA]=Dynamsoft.OCRLanguageData_fra;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_MSA]=Dynamsoft.OCRLanguageData_msa;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_IND]=Dynamsoft.OCRLanguageData_ind;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_RUS]=Dynamsoft.OCRLanguageData_rus;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_BEN]=Dynamsoft.OCRLanguageData_ben;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_POR]=Dynamsoft.OCRLanguageData_por;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_PAN]=Dynamsoft.OCRLanguageData_pan;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_DEU]=Dynamsoft.OCRLanguageData_deu;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_JPN]=Dynamsoft.OCRLanguageData_jpn;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_FAS]=Dynamsoft.OCRLanguageData_fas;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_SWA]=Dynamsoft.OCRLanguageData_swa;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_JAV]=Dynamsoft.OCRLanguageData_jav;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_TEL]=Dynamsoft.OCRLanguageData_tel;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_TUR]=Dynamsoft.OCRLanguageData_tur;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_KOR]=Dynamsoft.OCRLanguageData_kor;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_MAR]=Dynamsoft.OCRLanguageData_mar;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_TAM]=Dynamsoft.OCRLanguageData_tam;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_VIE]=Dynamsoft.OCRLanguageData_vie;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_ITA]=Dynamsoft.OCRLanguageData_ita;Dynamsoft.OCRLanguageData[Dynamsoft.EnumDWT_OCRLanguage.OCRL_THA]=Dynamsoft.OCRLanguageData_tha;(function(a){function b(){var c=this;c._text="";c._fontName="";c._fontSize="";c._left=0;c._top=0;c._right=0;c._bottom=0}b.prototype.GetText=function(){var c=this;return c._text};b.prototype.GetFontName=function(){var c=this;return c._fontName};b.prototype.GetFontSize=function(){var c=this;return c._fontSize};b.prototype.GetWordRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};a.NewWordBasicResult=function(){return new b()}})(Dynamsoft.Lib);(function(a){function b(){var c=this;c._count=0;c._left=0;c._top=0;c._right=0;c._bottom=0;c._wordlist=[]}b.prototype.GetWordCount=function(){var c=this;return c._count};b.prototype.GetLineRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};b.prototype.GetWordContent=function(d){var f=this,c=f._wordlist.length;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetWordContent");return""}var e=Dynamsoft.Lib.NewWordBasicResult();e._text=f._wordlist[d].text;e._fontName=f._wordlist[d].fontname;e._fontSize=f._wordlist[d].fontsize;e._left=f._wordlist[d].rect[0];e._top=f._wordlist[d].rect[1];e._right=f._wordlist[d].rect[2];e._bottom=f._wordlist[d].rect[3];return e};a.NewLineBasicResult=function(){return new b()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._linelist=[]}a.prototype.GetLineCount=function(){var c=this;return c._count};a.prototype.GetLineContent=function(e){var f=this,d=f._linelist.length;if(f._errorCode<0){return""}if(e==null||e>=d||e<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetLineContent");return""}var c=Dynamsoft.Lib.NewLineBasicResult();c._count=f._linelist[e].words.length;c._left=f._linelist[e].rect[0];c._top=f._linelist[e].rect[1];c._right=f._linelist[e].rect[2];c._bottom=f._linelist[e].rect[3];c._wordlist=f._linelist[e].words;return c};b.NewPageBasicResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._pagelist=[]}a.prototype.GetPageCount=function(){var c=this;return c._count};a.prototype.GetPageContent=function(d){var f=this,c=f._pagelist.length;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageContent");return""}var e=Dynamsoft.Lib.NewPageBasicResult();e._count=f._pagelist[d].lines.length;e._linelist=f._pagelist[d].lines;return e};b.NewPageSetBasicResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(d){var c=this;c._errorCode=0;c._errorString="";c._resultlist=[];c._stwain=d}a.prototype.GetErrorCode=function(){var c=this;return c._errorCode};a.prototype.GetErrorString=function(){var c=this;return c._errorString};a.prototype.GetFormat=function(){var c=this;return c._resultlist[0].format};a.prototype.GetInput=function(){var e=this,d=e._resultlist[0].input;if(d){var c=Number(d);if(!isNaN(c)){return e._stwain._ImgManager.convertServerIdToClientIndex(c)}}return d};a.prototype.GetPageSetCount=function(){var c=this;return c._resultlist[0].pagesets.length};a.prototype.GetPageSetContent=function(e){var f=this,c=f._resultlist[0].pagesets.length;if(f._errorCode<0){return""}if(e==null||e>=c||e<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageSetContent");return""}var d=Dynamsoft.Lib.NewPageSetBasicResult();d._count=f._resultlist[0].pagesets[e].pages.length;d._pagelist=f._resultlist[0].pagesets[e].pages;return d};a.prototype.Get=function(){var c=this;return c._stwain._innerFun("GetOCRRestult")};a.prototype.Save=function(c){var e=this,d=b.html5.Funs.replaceLocalFilename(c);return e._stwain._innerFun("SaveOCRRestult",b.html5.Funs.makeParams(d))};b.NewOCRBasicResult=function(c){return new a(c)}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c.UnicodeFontName="";c.UseDetectedFont=true;c.MinFontSizeforMoreAccurateResult=0;c.OCRLanguage=EnumDWT_OCRLanguage.OCRL_ENG;c.PageSetMode=EnumDWT_OCRPageSetMode.PSM_AUTO;c.OutputFormat=EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT}a.prototype.GetUnicodeFontName=function(){var c=this;return c.UnicodeFontName};a.prototype.SetUnicodeFontName=function(c){var d=this;d.UnicodeFontName=c;return true};a.prototype.GetUseDetectedFont=function(){var c=this;return c.UseDetectedFont};a.prototype.SetUseDetectedFont=function(c){var d=this;d.UseDetectedFont=c;return true};a.prototype.GetMinFontSizeforMoreAccurateResult=function(){var c=this;return c.MinFontSizeforMoreAccurateResult};a.prototype.SetMinFontSizeforMoreAccurateResult=function(c){var d=this;d.MinFontSizeforMoreAccurateResult=c;return true};a.prototype.GetOCRLanguage=function(){var c=this;return c.OCRLanguage};a.prototype.SetOCRLanguage=function(c){var d=this;d.OCRLanguage=c;return true};a.prototype.GetPageSetMode=function(){var c=this;return c.PageSetMode};a.prototype.SetPageSetMode=function(c){var d=this;d.PageSetMode=c;return true};a.prototype.GetOutputFormat=function(){var c=this;return c.OutputFormat};a.prototype.SetOutputFormat=function(c){var d=this;d.OutputFormat=c;return true};b.NewOptions=function(){return new a()}})(Dynamsoft.Lib);var EnumDWT_OCRDownloadType={OCRDT_Dll:0,OCRDT_LANGUAGE:1};Dynamsoft.AddonReady(function(c,b){if(!c.product.bHTML5Edition){return}var a;function e(g){var h=c.html5.Funs;if(c.env.bMac){a="DynamicOCR_"+Dynamsoft.OCRVerInName+".dylib"}else{if(c.env.bLinux){a="DynamicOCR_"+Dynamsoft.OCRVerInName+".so"}else{if(Dynamsoft.dcp.b64bit){a="DynamicOCRx64_"+Dynamsoft.OCRVerInName+".dll"}else{a="DynamicOCR_"+Dynamsoft.OCRVerInName+".dll"}}}if(!g._isMobileMode()){g._innerSend("GetAddOnVersion",h.makeParams("ocr",a),true,false,false)}g.__innerOCRBasicReadFunction=function(n,s,o,t,l,u,v,i,j,r,k){var q=this;if(!c.isFunction(r)){return q.__innerOCRSyncReadFunction(n,j)}else{return q.__innerOCRBasicAsyncReadFunction(n,s,o,t,l,u,v,i,j,r,k)}};g.__innerGetOCRBasicResultAsyncFunction=function(j){var i=Dynamsoft.Lib.NewOCRBasicResult(this);if(j){i._errorCode=j.exception;i._errorString=j.description;i._resultlist=j.result}return i};g.__innerOCRBasicAsyncReadFunction=function(n,t,o,u,l,v,x,i,j,s,k){var r=this;var q=function(p){if(p.exception==0){if(c.isFunction(s)){if(t!=-1){var m=r.objImageIndexManager.convertServerIdToGuid(t);if(u==1){s(m,l,v,x,i,r.__innerGetOCRBasicResultAsyncFunction(p))}else{s(m,r.__innerGetOCRBasicResultAsyncFunction(p))}}else{if(o!=""){s(o,r.__innerGetOCRBasicResultAsyncFunction(p))}else{s(r.__innerGetOCRBasicResultAsyncFunction(p))}}}}else{if(c.isFunction(k)){k(p.exception,p.description)}}h.hideMask(n)},w=function(m){h.hideMask(n)};h.showMask(n);r._innerSend(n,j,true,q,w);return true};g.__innerOCRSyncReadFunction=function(j,l){var n=this,k,i;k=n._innerFunRaw(j,l,false,false);i=c.NewOCRBasicResult();i._errorCode=n._errorCode;i._errorString=n._errorString;if(k&&c.isArray(k)){i._resultlist=k;i._Count=k.length}return i};g.__IsOCRBasicModuleInstalled=function(){var k=g;var i=k._innerFun("GetAddOnVersion",h.makeParams("ocr",a));var j=i.split("|");if(j[0]!=""){return true}else{return false}};g.__innerBasicDownload=function(q,t,k,v,l){var o=g,s;c.cancelFrome=2;q=q.toString();var n=function(){if(c.isFunction(v)){v()}return true},w=function(){if(c.isFunction(l)){l(o.ErrorCode,o.ErrorString)}return false};if(!c.License.checkProductKey(o,{Core:true})){return w()}if(!c.License.checkProductKey(o,{OCR:true},true)){return w()}if(t!=EnumDWT_OCRDownloadType.OCRDT_Dll){o._innerFun("SetOCRLanguage",h.makeParams(k))}var i=o._innerFun("GetAddOnVersion",h.makeParams("ocr",a));var j=i.split("|");if(t==EnumDWT_OCRDownloadType.OCRDT_Dll){if(j[0]!=""){n();return true}}else{var r=Dynamsoft.OCRLanguageData[k];if(r&&j[1]==r){n();return true}}if(!q||q==""){c.Errors.OCR_InvalidRemoteFilename(o);w();return false}if(h.isServerInvalid(o)){w();return false}s="get";c.showProgress(o,"Download",true);var u=function(x){var y=(x.total===0)?100:Math.round(x.loaded*100/x.total),z=[x.loaded," / ",x.total].join("");o._OnPercentDone([0,y,"","http"])},m=true;if(t==EnumDWT_OCRDownloadType.OCRDT_Dll){o._OnPercentDone([0,-1,"Downloading OCR Module...","http"])}else{o._OnPercentDone([0,-1,"Downloading OCR Language Data...","http"])}if(!c.isFunction(v)){m=false}h.loadHttpBlob(o,s,q,m,function(p){o._OnPercentDone([0,-1,"Loading..."]);var x=100;if(t==EnumDWT_OCRDownloadType.OCRDT_LANGUAGE){x=101}o.__LoadImageFromBytes(p,x,"",m,n,w)},function(){c.closeProgress("Download");w()},u)}}var f=function(j){var k=[],h,g,i;if(j._ImgManager.count()<=0){return k}g=j._ImgManager.getCurrentImageIndex();h=j._ImgManager.convertClientIndexToServerId(g);i=j._ImgManager.getSelectedClientIndexArray();if(c.isArray(i)){c.each(i,function(l){var m=j._ImgManager.convertClientIndexToServerId(l);k.push(m)})}return k},d=function(i){var j=c.html5.Funs,g;var h=c.NewOptions();e(i);g={OCR:{SetUnicodeFontName:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetUnicodeFontName")}return h.SetUnicodeFontName(k)},GetUnicodeFontName:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetUnicodeFontName")}return h.GetUnicodeFontName()},SetIfUseDetectedFont:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetIfUseDetectedFont")}return h.SetUseDetectedFont(k)},GetIfUseDetectedFont:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetIfUseDetectedFont")}return h.GetUseDetectedFont()},SetMinFontSizeforMoreAccurateResult:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetMinFontSizeforMoreAccurateResult")}return h.SetMinFontSizeforMoreAccurateResult(k)},GetMinFontSizeforMoreAccurateResult:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.GetMinFontSizeforMoreAccurateResult")}return h.GetMinFontSizeforMoreAccurateResult()},SetLanguage:function(k){var l=i;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.OCR.SetLanguage")}return h.SetOCRLanguage(k)},IsModuleInstalled:function(){var k=i;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.OCR.IsModuleInstalled")}return k.__IsOCRBasicModuleInstalled()},SetPageSetMode:function(l){var m=i;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.OCR.SetPageSetMode")}var k=l*1;if(k==EnumDWT_OCRPageSetMode.OCRPSM_OSD_ONLY||k==EnumDWT_OCRPageSetMode.PSM_AUTO_OSD||k==EnumDWT_OCRPageSetMode.PSM_AUTO_ONLY||k==EnumDWT_OCRPageSetMode.PSM_AUTO||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_COLUMN||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK_VERT_TEXT||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_BLOCK||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_LINE||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_WORD||k==EnumDWT_OCRPageSetMode.PSM_CIRCLE_WORD||k==EnumDWT_OCRPageSetMode.PSM_SINGLE_CHAR){return h.SetPageSetMode(k)}Dynamsoft.Lib.Errors.OCR_InvalidPageSetMode(m);return false},SetOutputFormat:function(l){var m=i;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.OCR.SetOutputFormat")}var k=l*1;if(k==EnumDWT_OCROutputFormat.OCROF_TEXT||k==EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT||k==EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT||k==EnumDWT_OCROutputFormat.OCROF_PDFPLAINTEXT_PDFX||k==EnumDWT_OCROutputFormat.OCROF_PDFIMAGEOVERTEXT_PDFX){return h.SetOutputFormat(k)}Dynamsoft.Lib.Errors.OCR_InvalidOutputFormat(m);return false},Recognize:function(n,k,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.Recognize")}if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}var l=o._ImgManager.convertClientIndexToServerId(n);return o.__innerOCRBasicReadFunction("OCRRecognize",l,"",0,0,0,0,0,j.makeParams(0,l,"",0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),k,m)},RecognizeRect:function(s,l,p,r,k,q,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeRect")}if((!l&&l!=0)||(!p&&p!=0)||(!r&&r!=0)||(!k&&k!=0)){var t=Dynamsoft.Lib.NewOCRBasicResult(o);Dynamsoft.Lib.Errors.OCR_InvalidLeftOrTopOrRightOrBottom(t,"RecognizeRect");m(t.GetErrorCode(),t.GetErrorString());return}if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}var n=o._ImgManager.convertClientIndexToServerId(s);return o.__innerOCRBasicReadFunction("OCRRecognize",n,"",1,l,p,r,k,j.makeParams(0,n,"",l,p,r,k,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),q,m)},RecognizeFile:function(l,k,m){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeFile")}var n=j.replaceLocalFilename(l);if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(m)){m(o._errorCode,o._errorString)}return false}return o.__innerOCRBasicReadFunction("OCRRecognize",-1,n,0,0,0,0,0,j.makeParams(1,-1,n,0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),""),k,m)},RecognizeSelectedImages:function(k,n){var o=i;o._resetErr();if(o._isMobileMode()){return o._mobileNotSupport("Addon.OCR.RecognizeSelectedImages")}var l;if(!c.License.checkProductKey(o,{OCR:true},true)){if(c.isFunction(n)){n(o._errorCode,o._errorString)}return false}var m=f(o);l=o.__innerOCRBasicReadFunction("OCRRecognize",-1,"",0,0,0,0,0,j.makeParams(2,-1,"",0,0,0,0,h.GetUnicodeFontName(),h.GetUseDetectedFont(),h.GetMinFontSizeforMoreAccurateResult(),h.GetOCRLanguage(),h.GetPageSetMode(),h.GetOutputFormat(),m.join(",")),k,n);return l},Download:function(m,k,l){var n=i;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("Addon.OCR.Download")}return n.__innerBasicDownload(m,EnumDWT_OCRDownloadType.OCRDT_Dll,h.GetOCRLanguage(),k,l)},DownloadLangData:function(m,k,l){var n=i;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("Addon.OCR.DownloadLangData")}return n.__innerBasicDownload(m,EnumDWT_OCRDownloadType.OCRDT_LANGUAGE,h.GetOCRLanguage(),k,l)}}};i.__addon=i.__addon||{};c.mix(i.__addon,g)};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(d)}}); 
/*! 20210104
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 16.2
* 
* Module: addon/ocrpro
* final js: build\addon\dynamsoft.webtwain.addon.ocrpro.js
*/
;var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.ProOCRVerInName="1.2.0.0806";(function(b){function a(){var c=this;c._text="";c._left=0;c._top=0;c._right=0;c._bottom=0}a.prototype.GetText=function(){var c=this;return c._text};a.prototype.GetLetterRect=function(){var c=this;return c._left+","+c._top+","+c._right+","+c._bottom};b.NewLetterResult=function(){return new a()}})(Dynamsoft.Lib);(function(b){function a(){var c=this;c._count=0;c._letterlist=[];c._zoneCount=0;c._zoneWords=[]}a.prototype.GetLettersCount=function(){var c=this;return c._count};a.prototype.GetZoneCount=function(){var c=this;return c._zoneCount};a.prototype.GetLetterContent=function(d){var f=this,c=f._count;if(f._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetLetterContent");return""}var e=Dynamsoft.Lib.NewLetterResult();e._text=f._letterlist[d].letter;e._left=f._letterlist[d].boundary[0];e._top=f._letterlist[d].boundary[1];e._right=f._letterlist[d].boundary[2];e._bottom=f._letterlist[d].boundary[3];return e};a.prototype.GetZoneContent=function(d){var e=this,c=e._zoneCount;if(e._errorCode<0){return""}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(e,"GetZoneContent");return""}return e._zoneWords[d]};b.NewPageResult=function(){return new a()}})(Dynamsoft.Lib);(function(a){function b(){var c=this;c._input=0;c._message="";c._page=-1}b.prototype.GetInput=function(){var c=this;return c._input};b.prototype.GetMessage=function(){var c=this;return c._message};b.prototype.GetPage=function(){var c=this;return c._page};a.NewErrorInfo=function(){return new b()}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._errorCode=0;d._errorString="";d._errorlist=[];d._request="";d._ocrTotalCount=0;d._alreadyOCRCount=0;d._resultlist=[];d._resultZoneDetail=[];d._stwain=c}b.prototype.GetErrorCode=function(){var c=this;return c._errorCode};b.prototype.GetErrorString=function(){var c=this;return c._errorString};b.prototype.GetInput=function(){var e=this;if(e._request&&e._request.input){var d=e._request.input;if(d){var c=Number(d);if(!isNaN(c)){return e._stwain._ImgManager.convertServerIdToClientIndex(c)}}return d}else{return""}};b.prototype.GetErrorDetailList=function(){var g=this,c=0;if(g._errorlist){c=g._errorlist.length}var e=[];for(var d=0;d<c;d++){var f=Dynamsoft.Lib.NewErrorInfo();f._input=g._errorlist[d].input;f._message=g._errorlist[d].message;f._page=g._errorlist[d].page;e.push(f)}return e};b.prototype.GetOCRTotalCount=function(){var c=this;if(c._ocrTotalCount){return c._ocrTotalCount}else{return 0}};b.prototype.GetAlreadyOCRCount=function(){var c=this;if(c._alreadyOCRCount){return c._alreadyOCRCount}else{return 0}};b.prototype.GetPageCount=function(){var c=this;if(c._resultlist&&c._resultlist.length){return c._resultlist.length}else{return 0}};b.prototype.GetPageContent=function(d){var f=this,c=0;if(f._resultlist){c=f._resultlist.length}if(d==null||d>=c||d<0){Dynamsoft.Lib.Errors.OCR_InvalidIndex(f,"GetPageContent");return""}var e=Dynamsoft.Lib.NewPageResult();if(f._resultlist){e._count=f._resultlist[d].length;e._letterlist=f._resultlist[d]}else{e._count=0}if(f._resultZoneDetail){e._zoneCount=f._resultZoneDetail[d].length;e._zoneWords=f._resultZoneDetail[d]}else{e._zoneCount=0}return e};b.prototype.Get=function(){var c=this;return c._stwain._innerFun("GetOCRRestult")};b.prototype.Save=function(c){var e=this,d=a.html5.Funs.replaceLocalFilename(c);return e._stwain._innerFun("SaveOCRRestult",a.html5.Funs.makeParams(d))};a.NewOCRProResult=function(c){return new b(c)}})(Dynamsoft.Lib);var EnumDWT_OCRProRecognitionModule={OCRPM_AUTO:"AUTO",OCRPM_MOSTACCURATE:"MOSTACCURATE",OCRPM_BALANCED:"BALANCED",OCRPM_FASTEST:"FASTEST"};var EnumDWT_OCRProOutputFormat={OCRPFT_TXTS:"TXTS",OCRPFT_TXTCSV:"TXTCSV",OCRPFT_TXTF:"TXTF",OCRPFT_XML:"XML",OCRPFT_IOTPDF:"IOTPDF",OCRPFT_IOTPDF_MRC:"IOTPDF_MRC"};var EnumDWT_OCRProPDFVersion={OCRPPDFV_0:"1.0",OCRPPDFV_1:"1.1",OCRPPDFV_2:"1.2",OCRPPDFV_3:"1.3",OCRPPDFV_4:"1.4",OCRPPDFV_5:"1.5",OCRPPDFV_6:"1.6",OCRPPDFV_7:"1.7"};var EnumDWT_OCRProPDFAVersion={OCRPPDFAV_1A:"pdf/a-1a",OCRPPDFAV_1B:"pdf/a-1b",OCRPPDFAV_2A:"pdf/a-2a",OCRPPDFAV_2B:"pdf/a-2b",OCRPPDFAV_2U:"pdf/a-2u",OCRPPDFAV_3A:"pdf/a-3a",OCRPPDFAV_3B:"pdf/a-3b",OCRPPDFAV_3U:"pdf/a-3u"};var EnumDWT_OCRProType={OCRDT_File:0,OCRDT_Index:1};var EnumDWT_OCRFindTextFlags={OCRFT_WHOLEWORD:1,OCRFT_MATCHCASE:2,OCRFT_FUZZYMATCH:4};var EnumDWT_OCRFindTextAction={OCRFT_HIGHLIGHT:0,OCRFT_STRIKEOUT:1,OCRFT_MARKFORREDACT:2};Dynamsoft.EnumDWT_OCRProRecognitionModule=EnumDWT_OCRProRecognitionModule;Dynamsoft.EnumDWT_OCRProOutputFormat=EnumDWT_OCRProOutputFormat;Dynamsoft.EnumDWT_OCRProPDFVersion=EnumDWT_OCRProPDFVersion;Dynamsoft.EnumDWT_OCRProPDFAVersion=EnumDWT_OCRProPDFAVersion;Dynamsoft.EnumDWT_OCRProType=EnumDWT_OCRProType;Dynamsoft.EnumDWT_OCRFindTextFlags=EnumDWT_OCRFindTextFlags;Dynamsoft.EnumDWT_OCRFindTextAction=EnumDWT_OCRFindTextAction;(function(a){function b(){var c=this;c.FindText="";c.FindTextFlags=EnumDWT_OCRFindTextFlags.OCRFT_WHOLEWORD;c.FindTextAction=EnumDWT_OCRFindTextAction.OCRFT_MARKFORREDACT}a.NewRedaction=function(){return new b()}})(Dynamsoft.Lib);Dynamsoft.WebTwain={Addon:{OCRPro:{}}};(function(a){function b(){var c=this;c.RecognitionModule="";c.Languages="eng";c.OutputFormat="";c.PDFVersion="";c.PDFAVersion="";c.LicenseChecker="";c.Redaction=Dynamsoft.Lib.NewRedaction()}a.NewSettings=function(){return new b()}})(Dynamsoft.WebTwain.Addon.OCRPro);(function(){function a(f,e,c,b){var d=this;d.left=f;d.top=e;d.right=c;d.bottom=b}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRZone=function(e,d,c,b){return new a(e,d,c,b)}})();Dynamsoft.AddonReady(function(m,h){if(!m.product.bHTML5Edition){return}var n=1000,q=function(){return n++};function o(y){var z=m.html5.Funs;y.__innerGetOCRProResultAsyncFunction=function(B){var A=Dynamsoft.Lib.NewOCRProResult(this);if(B){A._errorCode=B.code;A._errorString=B.message;A._request=B.request;A._errorlist=B.errorList;A._ocrTotalCount=B.ocrTotalCount;A._alreadyOCRCount=B.alreadyOCRCount;A._resultlist=B.resultDetail;A._resultZoneDetail=B.resultZoneDetail}return A};y.__innerIsOCRTrial=function(A,B){var D=this,C=function(){var F=false;if(D.__licenseInfo.Detail){for(var E=0;E<D.__licenseInfo.Detail.length;E++){if(D.__licenseInfo.Detail[E].EnumLicenseType=="10"){if(D.__licenseInfo.Detail[E].Trial=="TRUE"){F=true}}}}return A(F)};if(D.__licenseInfo&&D.__licenseInfo.Detail){return C()}else{return D.GetLicenseInfo(C,B)}};y.__innerOCRReadFunction=function(D,I,E,H,A,B,G,C){var F=this;return F.__innerOCRAsyncReadFunction(D,I,E,H,A,B,G,C)};y.__innerOCRAsyncReadFunction=function(D,K,E,I,A,B,H,C){var G=this;var F=function(L){if(L.code==0){if(m.isFunction(H)){if(K!=-1){if(I==1){H(K,A,G.__innerGetOCRProResultAsyncFunction(L))}else{H(K,G.__innerGetOCRProResultAsyncFunction(L))}}else{if(E!=""){H(E,G.__innerGetOCRProResultAsyncFunction(L))}else{H(G.__innerGetOCRProResultAsyncFunction(L))}}}}else{if(m.isFunction(C)){C(L.code,L.message,G.__innerGetOCRProResultAsyncFunction(L))}}z.hideMask(D)},J=function(L){z.hideMask(D)};z.showMask(D);G._innerSend(D,B,true,F,J);return true};y.__innerGetRequestJson=function(G,I,A,K,B){var F=y,C;var E="[{";E+='"id":"'+y.clientId+'",';E+='"method":"OCRProRecognize",';E+='"dllName":"'+B+'",';E+='"productkey":"'+Dynamsoft.WebTwainEnv.ProductKey+'",';if(G==EnumDWT_OCRProType.OCRDT_File){E+='"inputType":"file",'}else{E+='"inputType":"index",'}E+='"input":[';for(C=0;C<I.length;C++){if(G==EnumDWT_OCRProType.OCRDT_File){E+='"'+I[C]+'"'}else{E+=I[C]}if(C+1<I.length){E+="|"}}E+="],";E+='"settings":{';E+='"recognitionMethod": "Page"';if(A){if(A.RecognitionModule&&A.RecognitionModule.length>0){E+=',"recognitionModule":"'+A.RecognitionModule+'"'}if(A.Languages&&A.Languages.length>0){E+=',"languages":"'+A.Languages+'"'}if(A.OutputFormat&&A.OutputFormat.length>0){E+=',"outputFormat":"'+A.OutputFormat+'"'}if(A.PDFVersion&&A.PDFVersion.length>0){E+=',"pdfVersion":"'+A.PDFVersion+'"'}if(A.PDFAVersion&&A.PDFAVersion.length>0){E+=',"pdfAVersion":"'+A.PDFAVersion+'"'}if(A.Redaction&&A.Redaction.FindText&&A.Redaction.FindText.length>0){var J=parseInt(A.Redaction.FindTextFlags),H=parseInt(A.Redaction.FindTextAction);if(!isNaN(J)&&!isNaN(H)){E+=',"redaction":{';var D=A.Redaction.FindText;D=D.replace(/\"/g,'\\"');E+='"findText":"'+D+'"';E+=',"findTextFlags":'+J;E+=',"findTextAction":'+H;E+="}"}}}E+="},";E+='"zones":[';for(C=0;C<K.length;C++){E+="["+K[C].left+","+K[C].top+","+K[C].right+","+K[C].bottom+"]";if(C+1<K.length){E+=","}}E+="],";E+='"outputFile":""';E+="}]";return E};y.__LoadImageFromBytesForDownloadInner=function(E,K,O,J,L,B,H,M,D){var I=y;var A,C,G;if(E>=J){A=B*J;G=K.slice(A,L)}else{A=E*B;C=(E+1)*B;G=K.slice(A,C)}var N=function(){if(Dynamsoft.Lib.isFunction(D)){D()}};var F=function(){if(E>=J){if(Dynamsoft.Lib.isFunction(M)){M()}return}E=E+1;I.__LoadImageFromBytesForDownloadInner(E,K,O,J,L,B,H,M,D)};I.__LoadImageFromBytes(G,O,"",H,F,N,A,L)};y.__LoadImageFromBytesForDownload=function(H,B,G,D,C,J){var F=y;var A=2*1000*1000;var I=H.size||H.length;var E=parseInt(I/A);var K=I%A;if(K==0){E=E-1}F.__LoadImageFromBytesForDownloadInner(0,H,B,E,I,A,D,C,J)}}var e=function(B){var C=[],z,y,A;if(B._ImgManager.count()<=0){return C}y=B._ImgManager.getCurrentImageIndex();z=B._ImgManager.convertClientIndexToServerId(y);A=B._ImgManager.getSelectedClientIndexArray();if(m.isArray(A)){m.each(A,function(D){var E=B._ImgManager.convertClientIndexToServerId(D);C.push(E)})}return C},v=function(C,A,z,B){var y=m.NewOCRProResult(C);y._errorCode=A;y._errorString=z;var D=m.NewErrorInfo();D.input=B;D.message=y._errorString;D.page=0;y._errorlist=[D];return y},g=function(A){var B=m.html5.Funs,z,y;if(m.env.bMac){y="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".dylib"}else{if(m.env.bLinux){y="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".so"}else{if(Dynamsoft.dcp.b64bit){y="DynamicOCRProx64_"+Dynamsoft.ProOCRVerInName+".dll"}else{y="DynamicOCRPro_"+Dynamsoft.ProOCRVerInName+".dll"}}}o(A);z={OCRPro:{Settings:false,Recognize:function(N,K,D){var J=[],H,O,L,I;var G=A;G._resetErr();H=parseInt(N);if(m.isNaN(H)||!m.isNumber(H)){if(m.isFunction(D)){O=v(A,-2201,"Invalid parameter type.",N);D(O._errorCode,O._errorString,O)}return false}if(G._isMobileMode()){return G._mobileNotSupport("Addon.OCRPro.Recognize")}var F=A._ImgManager.convertClientIndexToServerId(H);if(F==-1){if(m.isFunction(D)){m.Errors.IndexOutOfRange(A);O=v(A,A._errorCode,A._errorString,N);D(O._errorCode,O._errorString,O)}return false}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(D)){O=v(A,A._errorCode,A._errorString,N);D(O._errorCode,O._errorString,O)}return false}J.push(F);var M=[],C=this.Settings;var E=A.__innerGetRequestJson(EnumDWT_OCRProType.OCRDT_Index,J,C,M,y);return A.__innerIsOCRTrial(function(P){if(P){return A.__innerOCRReadFunction("OCRProRecognize",N,"",0,M,E,K,D)}else{return w(C.LicenseChecker,A,"OCRProRecognize",N,"",0,M,E,K,D)}},D)},RecognizeRect:function(X,P,R,G){var N=[],K,M,F,L;var S=A;S._resetErr();K=parseInt(X);if(m.isNaN(K)||!m.isNumber(K)){if(m.isFunction(G)){M=v(A,-2201,"Invalid parameter type.",X);G(M._errorCode,M._errorString,M)}return false}if(S._isMobileMode()){return S._mobileNotSupport("Addon.OCRPro.RecognizeRect")}var Q=A._ImgManager.convertClientIndexToServerId(K),T=A._ImgManager.GetImageWidth(K),J=A.GetImageHeight(K);if(Q==-1){if(m.isFunction(G)){m.Errors.IndexOutOfRange(A);M=v(A,A._errorCode,A._errorString,X);G(M._errorCode,M._errorString,M)}return false}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(G)){M=v(A,A._errorCode,A._errorString,X);G(M._errorCode,M._errorString,M)}return false}if(T>0&&J>0){var V,E,U,W,I,D;for(var O=0;O<P.length;O++){V=P[O];E=V.left;U=V.top;W=V.right;I=V.bottom;if(E<0){E=0}if(U<0){U=0}if(W<0){W=0}if(I<0){I=0}if(E>W){D=E;E=W;W=D}if(U>I){D=U;U=I;I=D}if(W>T){W=T}if(I>J){I=J}V.left=E;V.top=U;V.right=W;V.bottom=I}}N.push(Q);var C=this.Settings;var H=A.__innerGetRequestJson(EnumDWT_OCRProType.OCRDT_Index,N,C,P,y);return A.__innerIsOCRTrial(function(Y){if(Y){return A.__innerOCRReadFunction("OCRProRecognize",X,"",1,P,H,R,G)}else{return w(C.LicenseChecker,A,"OCRProRecognize",X,"",1,P,H,R,G)}},G)},RecognizeFile:function(D,M,G){var I=A;I._resetErr();if(I._isMobileMode()){return I._mobileNotSupport("Addon.OCRPro.RecognizeFile")}var P,N,K;if(D.length==0){if(m.isFunction(G)){P=Dynamsoft.Lib.NewOCRProResult(A);P._errorCode=-2201;P._errorString="File name cannot be empty.";K=[];N=Dynamsoft.Lib.NewErrorInfo();N.input=D;N.message=P._errorString;N.page=0;K.push(N);P._errorlist=K;G(P._errorCode,P._errorString,P)}return false}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(G)){P=Dynamsoft.Lib.NewOCRProResult(A);P._errorCode=A._errorCode;P._errorString=A._errorString;K=[];N=Dynamsoft.Lib.NewErrorInfo();N.input=D;N.message=P._errorString;N.page=0;K.push(N);P._errorlist=K;G(P._errorCode,P._errorString,P)}return false}var J=B.replaceLocalFilename(D);var C=[];if(J.indexOf("|")>0){C=J.split("|")}else{if(J.indexOf(";")>0){C=J.split(";")}else{if(J.indexOf(",")>0){C=J.split(",")}}}var L=[];if(C.length>0){for(var F=0;F<C.length;F++){L.push(C[F])}}else{L.push(J)}var O=[],E=this.Settings;var H=A.__innerGetRequestJson(EnumDWT_OCRProType.OCRDT_File,L,E,O,y);A.__innerIsOCRTrial(function(Q){if(Q){return A.__innerOCRReadFunction("OCRProRecognize",-1,D,0,O,H,M,G)}else{return w(E.LicenseChecker,A,"OCRProRecognize",-1,D,0,O,H,M,G)}},G)},RecognizeSelectedImages:function(J,D){var G,H,K;var F=A;F._resetErr();if(F._isMobileMode()){return F._mobileNotSupport("Addon.OCRPro.RecognizeSelectedImages")}if(!m.License.checkProductKey(A,{OCRPro:true},true)){if(m.isFunction(D)){var M=Dynamsoft.Lib.NewOCRProResult(A);M._errorCode=A._errorCode;M._errorString=A._errorString;H=[];K=Dynamsoft.Lib.NewErrorInfo();K.input="";K.message=M._errorString;K.page=0;H.push(K);M._errorlist=H;D(M._errorCode,M._errorString,M)}return false}var L=[],C=this.Settings,I=e(A),E=A.__innerGetRequestJson(EnumDWT_OCRProType.OCRDT_Index,I,C,L,y);A.__innerIsOCRTrial(function(N){if(N){G=A.__innerOCRReadFunction("OCRProRecognize",-1,"",0,L,E,J,D)}else{G=w(C.LicenseChecker,A,"OCRProRecognize",-1,"",0,L,E,J,D)}},D);return G},IsModuleInstalled:function(){var D=A;D._resetErr();if(D._isMobileMode()){return D._mobileNotSupport("Addon.OCRPro.IsModuleInstalled")}var C=D._innerFun("GetAddOnVersion",B.makeParams("proocr",y));return(C!="")},Download:function(G,J,C){var F=A,H;F._resetErr();if(F._isMobileMode()){return F._mobileNotSupport("Addon.OCRPro.Download")}var E=function(){if(m.isFunction(J)){J()}return true},K=function(){if(m.isFunction(C)){C(F.ErrorCode,F.ErrorString)}return false};if(!m.License.checkProductKey(F,{Core:true})){return K()}if(!m.License.checkProductKey(F,{OCRPro:true},true)){return K()}if(this.IsModuleInstalled()){E();return true}if(!G||G==""||!m.isString(G)){m.Errors.OCR_InvalidRemoteFilename(F);K();return false}if(B.isServerInvalid(F)){K();return false}H="get";m.cancelFrome=2;m.showProgress(F,"Download",true);var I=function(L){var M=(L.total===0)?100:Math.round(L.loaded*100/L.total),N=[L.loaded," / ",L.total].join("");F._OnPercentDone([0,M,"","http"])},D=true;F._OnPercentDone([0,-1,"Downloading OCR Resources...","http"]);if(!m.isFunction(J)){D=false}return B.loadHttpBlob(F,H,G,D,function(L){F._OnPercentDone([0,-1,"Loading..."]);var M=102;F.__LoadImageFromBytesForDownload(L,M,"",D,E,K)},function(){m.closeProgress("Download");K()},I)}}};A.__addon=A.__addon||{};m.mix(A.__addon,z)};if(m.DynamicLoadAddonFuns){m.DynamicLoadAddonFuns.push(g)}function p(E,H,z,I,B,G,y,C,F,A){var D=this;D.STWAIN=H;D.AjaxFunctionUrl=E;D.FunctionName=z;D.ImageIndex=I;D.FileNames=B;D.Type=G;D.AryZone=y;D.JsonString=C;D.OnSuccess=F;D.OnFailure=A}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRReadPara=function(D,G,z,H,B,F,y,C,E,A){return new p(D,G,z,H,B,F,y,C,E,A)};function s(C,B){var D="";var E=C.responseText;if(E.length==0){var A=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError();Dynamsoft.Lib.Errors.OCR_LicenseCheckerError(A,B.AjaxFunctionUrl);E=A.responseText}D=f(E);var z=D.split(";");if(z.length==1){B.OnFailure(-1,E,Dynamsoft.Lib.NewOCRProResult())}else{if(z[0]=="true"){var y=function(G,F,H){if(Dynamsoft.Lib.isUndefined(H)){if(Dynamsoft.Lib.isUndefined(F)){B.OnSuccess(G);x(B.AjaxFunctionUrl,G.GetPageCount())}else{B.OnSuccess(G,F);x(B.AjaxFunctionUrl,F.GetPageCount())}}else{B.OnSuccess(G,F,H);x(B.AjaxFunctionUrl,H.GetPageCount())}};B.STWAIN.__innerOCRReadFunction(B.FunctionName,B.ImageIndex,B.FileNames,B.Type,B.AryZone,B.JsonString,y,B.OnFailure)}else{B.OnFailure(z[1],z[2],Dynamsoft.Lib.NewOCRProResult())}}}function w(G,J,z,K,D,I,y,E,H,A){var B=G;var F="DTW_AjaxMethod=CheckLicense&Productkey="+j(Dynamsoft.WebTwainEnv.ProductKey);var C=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRReadPara(G,J,z,K,D,I,y,E,H,A);return d(B,F,s,C)}function x(A,B){var z=A;var y="DTW_AjaxMethod=WriteOCRCount&OCRCount="+j(B+"");d(z,y,b,null)}function b(z,y){}function a(){var y=this;y.responseText="";y.errorString=""}Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError=function(){return new a()};Dynamsoft.Lib.mix(Dynamsoft.Lib.Errors,{OCR_LicenseCheckerEmpty:function(z){var A=-2601;var y="LicenseChecker cannot be empty.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_LicenseCheckerNotConnect:function(z){var A=-2602;var y="Cannot connect to the LicenseChecker, please check and make sure it's set correctly.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_AccessDenied:function(z){var A=-2603;var y="Access denied.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_LicenseCheckerError:function(z,B){var A=-2604;var y="Error occured in '"+B+"'.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},OCR_HTTPError:function(z,A){var B=-2605;var y="HTTP Error "+A+".";z.errorString=y;z.responseText=j("false;"+B+";"+y+";")},OCR_LicenseCheckerUnauthorized:function(z,B){var A=-2606;var y="You do not have permission to view this directory or page using the credentials you supplied (access denied due to Access Control Lists). Ask the Web server's administrator to give you access to '"+B+"'.";z.errorString=y;z.responseText=j("false;"+A+";"+y+";")},__last:false});function i(){var y=null,A=window;try{y=new A.ActiveXObject("Msxml2.XMLHTTP")}catch(z){try{y=new A.ActiveXObject("Microsoft.XMLHTTP")}catch(z){y=new XMLHttpRequest()}}return y}function d(z,y,D,C){var A=Dynamsoft.WebTwain.Addon.OCRPro.NewOCRError();if(z==""){Dynamsoft.Lib.Errors.OCR_LicenseCheckerEmpty(A);alert(A.errorString);D(A,C);return false}var B=i();B.open("POST",z,true);B.setRequestHeader("Content-Type","application/x-www-form-urlencoded");B.onreadystatechange=function(){if(B.readyState==4){if(B.status==200){if(D!=null&&typeof(D)=="function"){D(B,C)}}else{if(B.status==401){Dynamsoft.Lib.Errors.OCR_LicenseCheckerUnauthorized(A,C.AjaxFunctionUrl);D(A,C);return false}else{if(B.status==404){Dynamsoft.Lib.Errors.OCR_LicenseCheckerNotConnect(A);alert(A.errorString);D(A,C);return false}else{if(B.status==403){Dynamsoft.Lib.Errors.OCR_AccessDenied(A);D(A,C);return false}else{Dynamsoft.Lib.Errors.OCR_HTTPError(A,B.status);D(A,C);return false}}}}}};if(B&&y){B.send(y)}return true}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var r=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function k(E){var A,C,y;var D,B,z;y=E.length;C=0;A="";while(C<y){D=E.charCodeAt(C++)&255;if(C==y){A+=c.charAt(D>>2);A+=c.charAt((D&3)<<4);A+="==";break}B=E.charCodeAt(C++);if(C==y){A+=c.charAt(D>>2);A+=c.charAt(((D&3)<<4)|((B&240)>>4));A+=c.charAt((B&15)<<2);A+="=";break}z=E.charCodeAt(C++);A+=c.charAt(D>>2);A+=c.charAt(((D&3)<<4)|((B&240)>>4));A+=c.charAt(((B&15)<<2)|((z&192)>>6));A+=c.charAt(z&63)}return A}function t(F){var E,D,B,z;var C,y,A;y=F.length;C=0;A="";while(C<y){do{E=r[F.charCodeAt(C++)&255]}while(C<y&&E==-1);if(E==-1){break}do{D=r[F.charCodeAt(C++)&255]}while(C<y&&D==-1);if(D==-1){break}A+=String.fromCharCode((E<<2)|((D&48)>>4));do{B=F.charCodeAt(C++)&255;if(B==61){return A}B=r[B]}while(C<y&&B==-1);if(B==-1){break}A+=String.fromCharCode(((D&15)<<4)|((B&60)>>2));do{z=F.charCodeAt(C++)&255;if(z==61){return A}z=r[z]}while(C<y&&z==-1);if(z==-1){break}A+=String.fromCharCode(((B&3)<<6)|z)}return A}function u(B){var z,A,y,C;z="";y=B.length;for(A=0;A<y;A++){C=B.charCodeAt(A);if((C>=1)&&(C<=127)){z+=B.charAt(A)}else{if(C>2047){z+=String.fromCharCode(224|((C>>12)&15));z+=String.fromCharCode(128|((C>>6)&63));z+=String.fromCharCode(128|((C>>0)&63))}else{z+=String.fromCharCode(192|((C>>6)&31));z+=String.fromCharCode(128|((C>>0)&63))}}}return z}function l(D){var z,B,y,E;var C,A;z="";y=D.length;B=0;while(B<y){E=D.charCodeAt(B++);switch(E>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:z+=D.charAt(B-1);break;case 12:case 13:C=D.charCodeAt(B++);z+=String.fromCharCode(((E&31)<<6)|(C&63));break;case 14:C=D.charCodeAt(B++);A=D.charCodeAt(B++);z+=String.fromCharCode(((E&15)<<12)|((C&63)<<6)|((A&63)<<0));break}}return z}function j(y){return k(u(y))}function f(y){return l(t(y))}}); 
/*! 20210104
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 16.2
*
* Module: addon/webcam
* final js: build\addon\dynamsoft.webtwain.addon.webcam.js
*/
;var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.WebcamVerForActiveX="15.0.0.0625";Dynamsoft.WebcamVerInName="15.0.0.0625";var EnumDWT_VideoRotateMode={VRM_NONE:0,VRM_90_DEGREES_CLOCKWISE:1,VRM_180_DEGREES_CLOCKWISE:2,VRM_270_DEGREES_CLOCKWISE:3,VRM_FLIP_VERTICAL:4,VRM_FLIP_HORIZONTAL:5};var EnumDWT_VideoProperty={VP_BRIGHTNESS:0,VP_CONTRAST:1,VP_HUE:2,VP_SATURATION:3,VP_SHARPNESS:4,VP_GAMMA:5,VP_COLORENABLE:6,VP_WHITEBALANCE:7,VP_BACKLIGHTCOMPENSATION:8,VP_GAIN:9};var EnumDWT_CameraControlProperty={CCP_PAN:0,CCP_TILT:1,CCP_ROLL:2,CCP_ZOOM:3,CCP_EXPOSURE:4,CCP_IRIS:5,CCP_FOCUS:6};(function(c){var d=[c,Dynamsoft],b=0;for(;b<2;b++){var a=d[b];a.EnumDWT_VideoRotateMode=EnumDWT_VideoRotateMode;a.EnumDWT_VideoProperty=EnumDWT_VideoProperty;a.EnumDWT_CameraControlProperty=EnumDWT_CameraControlProperty}})(typeof window!=="undefined"?window:this);(function(a){a.WebcamErrors={InvalidParameter:function(b){b._errorCode=-10001;b._errorString="The parameter is invalid."},VideoNotPlayingWhenCapture:function(b){b._errorCode=-10002;b._errorString="To capture an image, the video must be playing."},VideoNotPlayingWhenGetURL:function(b){b._errorCode=-10003;b._errorString="To get the url for the current frame, the video must be playing."},Success:function(b){b._errorCode=0;b._errorString="Successful."}}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._Count=0;d._resultlist=[];d._stwain=c}b.prototype.GetCount=function(){var c=this;a.WebcamErrors.Success(c._stwain);return c._Count-1};b.prototype.Get=function(d){var e=this,c=e._resultlist.length;if(d>=c-1||d<0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(e._stwain,"Get");return""}a.WebcamErrors.Success(e._stwain);return e._resultlist[d]};b.prototype.GetCurrent=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"GetCurrent");return""}a.WebcamErrors.Success(d._stwain);return d._resultlist[c-1]};a.NewWebcamValue=function(c){return new b(c)}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._Count=0;d._resultlist=[];d._stwain=c}b.prototype.GetValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return""}a.WebcamErrors.Success(d._stwain);return d._resultlist[0].current};b.prototype.GetIfAuto=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return false}a.WebcamErrors.Success(d._stwain);return d._resultlist[0].auto=="true"?true:false};a.NewWebcamSetting=function(c){return new b(c)}})(Dynamsoft.Lib);(function(a){function b(c){var d=this;d._Count=0;d._resultlist=[];d._stwain=c}b.prototype.GetMinValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return""}return d._resultlist[0].min};b.prototype.GetMaxValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return""}return d._resultlist[0].max};b.prototype.GetSteppingDelta=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return 0}return d._resultlist[0].step};b.prototype.GetDefaultValue=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return 0}return d._resultlist[0].defaultValue};b.prototype.GetIfAuto=function(){var d=this,c=d._resultlist.length;if(c==0){Dynamsoft.Lib.Errors.Webcam_InvalidIndex(d._stwain,"");return false}return d._resultlist[0].auto=="true"?true:false};a.NewWebcamMoreSetting=function(c){return new b(c)}})(Dynamsoft.Lib);Dynamsoft.AddonReady(function(b,a){var c=function(d){var e=b.html5.Funs;d._innerSetWebcamValue=function(g){var h=d,f;f=b.NewWebcamValue(d);if(g&&b.isArray(g)){f._resultlist=g;f._Count=g.length}return f};d._innerSetWebcamSetting=function(g){var h=d,f;f=b.NewWebcamSetting(d);if(g&&b.isArray(g)){f._resultlist=g;f._Count=g.length}return f};d._innerSetWebcamMoreSetting=function(g){var h=d,f;f=b.NewWebcamMoreSetting(d);if(g&&b.isArray(g)){f._resultlist=g;f._Count=g.length}return f}};if(b.DynamicLoadAddonFuns){b.DynamicLoadAddonFuns.push(c)}b.Addon_Events.push("OnFrameCaptured");b.Addon_Events.push("OnCaptureSuccess");b.Addon_Events.push("OnCaptureError")});Dynamsoft.AddonReady(function(b,a){if(!b.product.bHTML5Edition){return}function c(f){var g=b.html5.Funs;f._innerWebcamValueFunction=function(h,j){var k=this,i;i=k._innerFunRaw(h,j,false,false);return k._innerSetWebcamValue(i)};f._innerWebcamSettingFunction=function(h,j){var k=this,i;i=k._innerFunRaw(h,j,false,false);return k._innerSetWebcamSetting(i)};f._innerWebcamMoreSettingFunction=function(h,j){var k=this,i;i=k._innerFunRaw(h,j,false,false);return k._innerSetWebcamMoreSetting(i)};f._OnCaptureSuccess=function(h){var i=this;if(Dynamsoft.Lib.isFunction(i.__OnCaptureSuccess)){i.__OnCaptureSuccess()}};f._OnCaptureError=function(i){var k=this,h=i[1],j=i[2];if(Dynamsoft.Lib.isFunction(k.__OnCaptureError)){k.__OnCaptureError(h,j)}};f._OnFrameCaptured=function(h){var k=this,j=Dynamsoft.Lib;if(!k.__videoPause){var i=k.__videoQuality;if(!i){i=60}if(k.__videoDest){k.__videoDest.UpdateVideoContainer(k.GetImageURL(-1,-1,-1,0,i))}}if(j.isFunction(k.__OnFrameCaptured)){k.__OnFrameCaptured(h)}}}function d(g,h){var f=h.length-1;while(f>=0&&h[f].p1>=g.p1){if(h[f].p1==g.p1&&h[f].p2<g.p2){break}h[f+1]=h[f];f--}h[f+1]=g}var e=function(h){var i=b.html5.Funs,g,f;if(b.env.bMac){f="DynamicWebcam_"+Dynamsoft.WebcamVerInName+".dylib"}else{if(b.env.bLinux){f="DynamicWebcam_"+Dynamsoft.WebcamVerInName+".so"}else{if(Dynamsoft.dcp.b64bit){f="DynamicWebcamx64_"+Dynamsoft.WebcamVerInName+".dll"}else{f="DynamicWebcam_"+Dynamsoft.WebcamVerInName+".dll"}}}if(!h._isMobileMode()){h._innerSend("GetAddOnVersion",i.makeParams("webcam",f),true,false,false)}c(h);g={Webcam:{IsModuleInstalled:function(){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.IsModuleInstalled")}var j=k._innerFun("GetAddOnVersion",i.makeParams("webcam",f));return(j!="")},Download:function(n,q,j){var m=h,o;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.Webcam.Download")}Dynamsoft.Lib.cancelFrome=2;var l=function(){if(Dynamsoft.Lib.isFunction(q)){q()}return true},r=function(){if(Dynamsoft.Lib.isFunction(j)){j(h.ErrorCode,h.ErrorString)}return false};if(!b.License.checkProductKey(h,{Webcam:true},true)){return r()}if(this.IsModuleInstalled()){return l()}if(!n||n==""){Dynamsoft.Lib.Errors.Webcam_InvalidRemoteFilename(m);return r()}if(i.isServerInvalid(m)){r();return false}o="get";Dynamsoft.Lib.showProgress(m,"Download",true);var p=function(s){var t=(s.total===0)?100:Math.round(s.loaded*100/s.total),u=[s.loaded," / ",s.total].join("");m._OnPercentDone([0,t,"","http"])},k=true;m._OnPercentDone([0,-1,"Downloading Webcam Module...","http"]);if(!Dynamsoft.Lib.isFunction(q)){k=false}return i.loadHttpBlob(m,o,n,k,function(s){m._OnPercentDone([0,-1,"Loading..."]);var u=100;m.__LoadImageFromBytes(s,u,"",k,l,r)},function(){Dynamsoft.Lib.closeProgress("Download");r()},p)},GetSourceList:function(){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetSourceList")}if(!b.License.checkProductKey(k,{Webcam:true},true)){return[]}var j=k._innerFunRaw("GetWebcamSourceList");if(k.ErrorCode==0){j.splice(j.length-1,1)}return j},SelectSource:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SelectSource")}if(!b.License.checkProductKey(k,{Webcam:true},true)){return false}return k._innerFun("SelectWebcam",i.makeParams(j))},CloseSource:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.CloseSource")}this._clear();return j._innerFun("StopCapture")},GetFramePartURL:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetFramePartURL")}if(!this._isPlaying()){b.WebcamErrors.VideoNotPlayingWhenGetURL(j);return""}return j.GetImageURL(-1,-1,-1,!0,j.__videoQuality)},GetFrameURL:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetFrameURL")}if(!this._isPlaying()){b.WebcamErrors.VideoNotPlayingWhenGetURL(j);return""}return j.GetImageURL(-1,-1,-1,0,j.__videoQuality)},PlayVideo:function(r,u,l,s,m){var n=h;n._resetErr();if(n._isMobileMode()){return n._mobileNotSupport("Addon.Webcam.PlayVideo")}var k,p=Dynamsoft.Lib,q=60,j=false,o=this,t=function(){o._clear();if(Dynamsoft.Lib.isFunction(m)){m(h.ErrorCode,h.ErrorString)}return false};if(!r){Dynamsoft.Lib.Errors.ParameterCannotEmpty(h);return t()}if(!b.License.checkProductKey(h,{Webcam:true},true)){return t()}n.__videoDest=r;n.__videoDest.ShowVideoContainer(true);if(p.isFunction(l)){h.__OnFrameCaptured=l}if(h.__videoPause){h.__videoPause=false;if(b.isFunction(s)){s()}return true}h.__videoPause=false;if(u){q=1*u;if(q<1){q=60}h.__videoQuality=q;if(j){if(b.isFunction(s)){s()}return true}}else{h.__videoQuality=q}return h._innerSend("PlayVideo",i.makeParams(true),true,s,t)},PauseVideo:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.PauseVideo")}if(this._isPlaying()){j.__videoPause=true}return true},_clear:function(){var k=h;var j=Dynamsoft.Lib;k.__videoPause=false;k.__OnFrameCaptured=false;k.__videoQuality=60;if(k.__videoDest){k.__videoDest.ShowVideoContainer(false)}k.__videoDest=false},_isPlaying:function(){var j=h;return j.GetIfShowVideoContainer()},StopVideo:function(){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.StopVideo")}this._clear();var j=k._innerFun("PlayVideo",i.makeParams(false,0));k._innerFun("StopCapture");return j},CaptureImage:function(n,k){var p=h;p._resetErr();if(p._isMobileMode()){p._mobileNotSupport("Addon.Webcam.CaptureImage");if(b.isFunction(k)){k(p._errorCode,p._errorString)}return false}if(!b.License.checkProductKey(p,{Webcam:true},true)){if(b.isFunction(k)){k(p._errorCode,p._errorString)}return false}var j="CaptureImage",o=function(){i.hideMask(j);if(b.isFunction(n)){setTimeout(n,0)}},l=function(){i.hideMask(j);if(b.isFunction(k)){k(p._errorCode,p._errorString)}};i.showMask(j);p.__OnCaptureError=l;return p._innerSend(j,i.makeParams(false),true,function(){i.hideMask();if(p.ErrorCode==0){o()}else{l(p.ErrorCode,p.ErrorString)}},l)},GetMediaType:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetMediaType")}return j._innerWebcamValueFunction("GetMediaType")},SetMediaType:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SetMediaType")}if(!b.isString(j)){b.Errors.InvalidValue(k);return false}return k._innerFun("SetMediaType",i.makeParams(j))},GetResolution:function(){var m=h;m._resetErr();if(m._isMobileMode()){return m._mobileNotSupport("Addon.Webcam.GetResolution")}var n=m._innerWebcamValueFunction("GetResolution");if(n&&n._resultlist){var l,j,r=n._resultlist,k=[],s=[],p;if(r.length>0){p=r[r.length-1]}if(p==""&&r.length>0){p=r[0]}for(l=0;l<r.length-1;l++){j=r[l];var q=j.toLowerCase().split("x");d({value:j,p1:parseInt(q[0]),p2:parseInt(q[1])},k)}for(l=0;l<k.length;l++){j=k[l].value;s.push(j)}if(p){s.push(p)}n._resultlist=s;k=null;s=null}return n},SetResolution:function(k){var l=h;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.Webcam.SetResolution")}if(!b.isNumber(k)&&!b.isString(k)){b.Errors.InvalidValue(l);return false}var j=l._innerFun("SetResolution",i.makeParams(k));return j},GetFrameRate:function(){var j=h;j._resetErr();if(j._isMobileMode()){return j._mobileNotSupport("Addon.Webcam.GetFrameRate")}return j._innerWebcamValueFunction("GetFrameRate")},SetFrameRate:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SetFrameRate")}if(!b.isNumber(j)){b.Errors.InvalidValue(k);return false}return h._innerFun("SetFrameRate",i.makeParams(j))},GetVideoPropertySetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetVideoPropertySetting")}return k._innerWebcamSettingFunction("GetWebcamVideoPropertySetting",i.makeParams(j))},GetVideoPropertyMoreSetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetVideoPropertyMoreSetting")}return k._innerWebcamMoreSettingFunction("GetWebcamVideoPropertyMoreSetting",i.makeParams(j))},SetVideoPropertySetting:function(k,j,m){var l=h;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.Webcam.SetVideoPropertySetting")}return l._innerFun("SetWebcamVideoPropertySetting",i.makeParams(k,j,m))},SetVideoRotateMode:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.SetVideoRotateMode")}return k._innerFun("SetVideoRotateMode",i.makeParams(j))},GetCameraControlPropertySetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetCameraControlPropertySetting")}return k._innerWebcamSettingFunction("GetWebcamCameraControlSetting",i.makeParams(j))},GetCameraControlPropertyMoreSetting:function(j){var k=h;k._resetErr();if(k._isMobileMode()){return k._mobileNotSupport("Addon.Webcam.GetCameraControlPropertyMoreSetting")}return k._innerWebcamMoreSettingFunction("GetWebcamCameraControlMoreSetting",i.makeParams(j))},SetCameraControlPropertySetting:function(k,j,m){var l=h;l._resetErr();if(l._isMobileMode()){return l._mobileNotSupport("Addon.Webcam.SetCameraControlPropertySetting")}return l._innerFun("SetWebcamCameraControlPropertySetting",i.makeParams(k,j,m))}}};h.__addon=h.__addon||{};b.mix(h.__addon,g)};if(b.DynamicLoadAddonFuns){b.DynamicLoadAddonFuns.push(e)}});Dynamsoft.AddonReady(function(c,b){if(!c.product.bPluginEdition&&!c.product.bActiveXEdition){return}var a;function d(g){g._innerRead=function(i){var k=this,h;try{h=Dynamsoft.Lib.parse(i)}catch(j){}return h.result};g._innerWebcamValueFunctionPlugin=function(i){var j=this,h;h=j._innerRead(i);return j._innerSetWebcamValue(h)};g._innerWebcamSettingFunctionPlugin=function(i){var j=this,h;h=j._innerRead(i);return j._innerSetWebcamSetting(h)};g._innerWebcamMoreSettingFunctionPlugin=function(i){var j=this,h;h=j._innerRead(i);return j._innerSetWebcamMoreSetting(h)}}function e(h,i){var g=i.length-1;while(g>=0&&i[g].p1>=h.p1){if(i[g].p1==h.p1&&i[g].p2<h.p2){break}i[g+1]=i[g];g--}i[g+1]=h}var f=function(k){var l,j;if(k.getSWebTwain()&&k.getSWebTwain().Addon){}else{return false}if(Dynamsoft.navInfo.bWin){var i=navigator.userAgent.toLowerCase(),g=!Dynamsoft.navInfo.isX64||(i.indexOf("wow64")>=0);if(g){a="DynamicWebcam_"+Dynamsoft.WebcamVerForActiveX+".dll"}else{a="DynamicWebcamx64_"+Dynamsoft.WebcamVerForActiveX+".dll"}}else{}l=k.getSWebTwain();try{l.GetAddOnVersion("webcam",a)}catch(h){}d(k);j={Webcam:{IsModuleInstalled:function(){var m=l.GetAddOnVersion("webcam",a);c.setErrorString(k);return(m!="")},Download:function(r,m,p){var n=function(){if(Dynamsoft.Lib.isFunction(m)){m()}return true},q=function(){if(Dynamsoft.Lib.isFunction(p)){p(k.ErrorCode,k.ErrorString)}return false};if(!c.License.checkProductKey(k,{Webcam:true},true)){return q()}if(this.IsModuleInstalled()){return n()}if(!r||r==""){Dynamsoft.Lib.Errors.Webcam_InvalidRemoteFilename(k);return q()}var o=l.DownloadAddon(r);return c.wrapperRet(k,o,n,q)},GetSourceList:function(){if(!c.License.checkProductKey(k,{Webcam:true},true)){return[]}var n=l.GetWebcamSourceList(),m=[];c.setErrorString(k);if(k.ErrorCode==0){m=k._innerRead(n);if(m&&m.length>1){m.splice(m.length-1,1)}}return m},SelectSource:function(m){if(!c.License.checkProductKey(k,{Webcam:true},true)){return false}var n=l.SelectWebcam(m);c.setErrorString(k);return n},CloseSource:function(){k._playVideoDWT=null;var m=l.StopCapture();c.setErrorString(k);return m},GetFramePartURL:function(){if(!this._isPlaying()){c.WebcamErrors.VideoNotPlayingWhenGetURL(k);return""}var m=l.GetDIB(-1);c.setErrorString(k);return m},GetFrameURL:function(){return""},PlayVideo:function(s,r,p,m,n){var o=function(){k._playVideoDWT=null;if(Dynamsoft.Lib.isFunction(n)){n(k.ErrorCode,k.ErrorString)}return false};if(!s||!s.getSWebTwain()){Dynamsoft.Lib.WebcamErrors.InvalidParameter(k);return o()}if(!c.License.checkProductKey(k,{Webcam:true},true)){return o()}var q=s.getSWebTwain().CurrentHWND;if(!q){c.WebcamErrors.InvalidParameter(k);return o()}k._playVideoDWT=s;setTimeout(function(){var t=l.RunWebcamCmd("PlayVideo",q,null,null,p);c.wrapperRet(k,t,m,o)},0);return true},PauseVideo:function(){return true},StopVideo:function(){k._playVideoDWT=null;var m=l.RunWebcamCmd("StopVideo",0,null,null,null);c.setErrorString(k);l.StopCapture();return m},CaptureImage:function(p,n){var q=function(){if(c.isFunction(p)){setTimeout(p,0)}},o=function(){if(Dynamsoft.Lib.isFunction(n)){n(k.ErrorCode,k.ErrorString)}return false};if(!c.License.checkProductKey(k,{Webcam:true},true)){return o()}var m=l.RunWebcamCmd("Capture",0,q,o,null);c.setErrorString(k);return m},GetMediaType:function(){var m=k._innerWebcamValueFunctionPlugin(l.GetMediaType());c.setErrorString(k);return m},SetMediaType:function(n){if(!c.isString(n)){c.Errors.InvalidValue(k);return false}var m=l.SetMediaType(n);c.setErrorString(k);return m},GetResolution:function(){var m=k._innerWebcamValueFunctionPlugin(l.GetResolution());c.setErrorString(k);if(m&&m._resultlist){var n,t,s=m._resultlist,r=[],u=[],q;if(s.length>0){q=s[s.length-1]}for(n=0;n<s.length-1;n++){t=s[n];var p=t.toLowerCase().split("x");e({value:t,p1:parseInt(p[0]),p2:parseInt(p[1])},r)}for(n=0;n<r.length;n++){t=r[n].value;u.push(t)}if(q){u.push(q)}m._resultlist=u;r=null;u=null}return m},SetResolution:function(n){if(!c.isNumber(n)&&!c.isString(n)){c.Errors.InvalidValue(k);return false}var m=l.SetResolution(n);c.setErrorString(k);return m},GetFrameRate:function(){var m=k._innerWebcamValueFunctionPlugin(l.GetFrameRate());c.setErrorString(k);return m},SetFrameRate:function(n){if(!c.isNumber(n)){c.Errors.InvalidValue(k);return false}var m=l.SetFrameRate(n);c.setErrorString(k);return m},GetVideoPropertySetting:function(n){var m=l.GetWebcamVideoPropertySetting(n);c.setErrorString(k);return k._innerWebcamSettingFunctionPlugin(m)},GetVideoPropertyMoreSetting:function(n){var m=l.GetWebcamVideoPropertyMoreSetting(n);c.setErrorString(k);return k._innerWebcamMoreSettingFunctionPlugin(m)},SetVideoPropertySetting:function(o,n,p){var m=l.SetWebcamVideoPropertySetting(o,n,p);c.setErrorString(k);return m},SetVideoRotateMode:function(n){var m=l.SetVideoRotateMode(n);c.setErrorString(k);return m},GetCameraControlPropertySetting:function(n){var m=l.GetWebcamCameraControlSetting(n);c.setErrorString(k);return k._innerWebcamSettingFunctionPlugin(m)},GetCameraControlPropertyMoreSetting:function(n){var m=l.GetWebcamCameraControlMoreSetting(n);c.setErrorString(k);return k._innerWebcamMoreSettingFunctionPlugin(m)},SetCameraControlPropertySetting:function(o,n,p){var m=l.SetWebcamCameraControlPropertySetting(o,n,p);c.setErrorString(k);return m},_isPlaying:function(){if(k._playVideoDWT){return true}return false}}};k.Addon=k.Addon||{};c.mix(k.Addon,j)};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(f)}}); 
/*! 20210104
* Dynamsoft JavaScript Library
* Product: Dynamsoft Web Twain
* Web Site: http://www.dynamsoft.com
*
* Copyright 2021, Dynamsoft Corporation 
* Author: Dynamsoft R&D Department
*
* Version: 16.2
*
* Module: addon/camera
* final js: build\addon\dynamsoft.webtwain.addon.camera.js
*/
var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(fn){Dynamsoft.aryAddonReadyFun.push(fn);}; // jshint ignore: line
Dynamsoft.CameraVerInName = '16.1.0.0720';
Dynamsoft.AddonReady(function(DL, nil){if(!DL.product.bHTML5Edition)return; 
/*! For license information please see dcs.js.LICENSE.txt */
!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ErrorMessage:{OK:{code:0,message:"Successful"},HTTPS_REQUIRED:{code:-4201,message:"HTTPS is required for accessing cameras."},MEDIADEVICES_NOT_IMPL:{code:-4202,message:"The current browser has not implemented the MediaDevices interface."},GETUSERMEDIA_NOT_IMPL:{code:-4203,message:"The current browser has not implemented the getUserMedia interface."},NO_MEMORY:{code:-4204,message:"Not enough memory for this operation."},NO_CAMERA_SELECTED:{code:-4205,message:"No camera is selected."},VIDEO_ELEMENT_REQUIRED:{code:-4206,message:"A Video element is required for this operation."},CAMERA_PLUG_OUT:{code:-4207,message:"The camera is not plugged in."},CAMERA_NOT_OPEN:{code:-4208,message:"The camera is not open."},CAMERA_SETTINGS_NOT_SUPPORT:{code:-4209,message:"The current browser does not support camera settings."},FAILED_GET_USERMEDIA:{code:-4210,message:"Failed to get camera input."},SOURCE_NOT_FOUND:{code:-4211,message:"The camera source can not be found."},VIDEO_NOT_PLAY:{code:-4214,message:"The video must be playing for the capture operation to work."},VIDEO_NOT_STOP:{code:-4215,message:"The video is already playing. Please stop the video before attempting to play it again to a different container."},NO_CAMERA:{code:-4216,message:"No camera is found."}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraViewer=void 0;var r=i(2);Object.defineProperty(t,"CameraViewer",{enumerable:!0,get:function(){return r.CameraViewer}}),i(11),window.Dynamsoft=window.Dynamsoft||{},window.Dynamsoft.CameraViewer=r.CameraViewer,HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){for(var r=atob(this.toDataURL(t,i).split(",")[1]),n=r.length,o=new Uint8Array(n),a=0;a<n;a++)o[a]=r.charCodeAt(a);e(new Blob([o],{type:t||"image/png"}))}})},function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<i;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,n++)r[n]=o[a];return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CameraViewer=void 0;var c=i(3),l=i(4),u=i(6),h=i(7),d=s(i(8)),f=s(i(0)).default.ErrorMessage,p=s(i(9)),m=i(10),v=function(){function e(e,t,i){this._renderManager=null,this._isDrawing=!1,this._iResolution=null,this._camera=null,this._tempCanvas=document.createElement("canvas"),this.errorCode=0,this.errorMessage="Successful.",this._cropArea=[],this._logs="",this._videoContainer=null,this._video=null,this._resultImg=null,this._controlBox=null,this._cvsDrawArea=null,this._divScanArea=null,this._divScanLight=null,this._btnClose=null,this.regionMaskFillStyle="rgba(0,0,0,0.5)",this.regionMaskStrokeStyle="rgb(254,142,20)",this.regionMaskLineWidth=2,this.areaFillStyle="rgba(254,180,32,0.3)",this.lineStrokeStyle="rgba(254,180,32,0.9)",this.lineWidth=1,this.displayMode="contain",this._pub=new h.PublishSubscribe,this._renderManager=new p.default,this._iResolution={deviceId:t,resolution:i},e&&this.bindUI(document.getElementById(e),!1),this._cameraManageInit(),this._bindEvents()}return e.prototype._bindEvents=function(){var e=this;[["onLog",this._onLog],["onResolutionChanged",this.show],["onCameraChanged",this._cameraChangedHandler],["onCameraSelChanged",this._onCameraSelChanged],["onPlayed",this.webcamResize],["onThrowError",this._throwError],["onParaTypeError",this._throwParaTypeError],["onParaValueError",this._throwParaValueError]].forEach((function(t){e.on(t[0],t[1])})),window.addEventListener("resize",(function(){e.webcamResize()}))},e.prototype._cameraChangedHandler=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this._camera&&c.CameraManager.cameraExist(this._camera._cameraInfo,e)?(this.emit("onLog","camera plug out."),[4,this.closeSource()]):[3,2];case 1:t.sent(),this._pub.emit("video-error",f.CAMERA_PLUG_OUT),t.label=2;case 2:return[2]}}))}))},e.prototype._onLog=function(e){this._logs+=e+"\n"},e.prototype._cameraManageInit=function(){this._cameraManager=new c.CameraManager(this._pub)},e.prototype.destroy=function(){this.off("onLog"),this.unbindUI(),this._closeCamera(),this._cameraManager.destroy(),this.unbindRealTimeRender()},e.prototype.getVideoElement=function(){return this._video},e.prototype._throwError=function(e){if(e.code&&e.message)throw this.errorCode=e.code,this.errorMessage=e.message,u.CameraException.cameraException(e)},e.prototype._throwParaTypeError=function(e,t){throw this.errorCode=-4212,this.errorMessage="Argument of type '"+e+"' is not assignable to parameter of type '"+t+"'.",u.CameraException.cameraException({code:this.errorCode,message:this.errorMessage})},e.prototype._throwParaValueError=function(e,t){throw this.errorCode=-4213,this.errorMessage="The argument '"+e+"' is not valid for the parameter '"+t+"'",u.CameraException.cameraException({code:this.errorCode,message:this.errorMessage})},e.prototype.show=function(){this._checkCamera(),this._videoContainer&&"none"==this._videoContainer.style.display&&(this._videoContainer.style.display=""),this.webcamResize()},e.prototype.hidden=function(){return!!this._videoContainer&&"none"==this._videoContainer.style.display},e.prototype.hide=function(){this._videoContainer&&(this._videoContainer.style.display="none")},e.prototype.playDirectly=function(e,t,i){return n(this,void 0,void 0,(function(){var r,n;return o(this,(function(o){switch(o.label){case 0:return r={},this._camera?this._camera.playing()?[3,2]:[4,this._camera.play(t,i)]:[3,4];case 1:return r=o.sent(),[3,3];case 2:r=this._camera._curResolution,o.label=3;case 3:return[3,9];case 4:return(n=this._cameraManager._allCamerasInfo).length?[3,6]:[4,this._cameraManager.getAllCamerasInfo()];case 5:n=o.sent(),this._cameraManager._allCamerasInfo=n,o.label=6;case 6:return[4,this._cameraManager.requestCamera()];case 7:return o.sent(),this._camera=new l.Camera(null,this._video,n,e,this._pub),[4,this._camera.play(t,i)];case 8:r=o.sent(),o.label=9;case 9:return[2,r]}}))}))},e.prototype.playing=function(){return!!this._camera&&this._camera.playing()},e.prototype.paused=function(){return!!this._camera&&this._camera.paused()},e.prototype._closeCamera=function(){this._camera&&(this._camera.destroy(),this._camera=null)},e.prototype._checkCamera=function(){return!!this._camera&&void 0},e.prototype.bindResolutionsSelector=function(e){return!!this._camera&&this._camera.bindResolutionsSelector(e)},e.prototype.unbindResolutionsSelector=function(){return!!this._camera&&this._camera.unbindResolutionsSelector()},e.prototype.webcamResize=function(){if(this._video&&this._cvsDrawArea){var e=this._cvsDrawArea;this.calPixelRatio()&&(e.width=e.clientWidth,e.height=e.clientHeight,this.emit("webcamResize"))}},e.prototype.calPixelRatio=function(){if(this._video&&this._cvsDrawArea){var e=this._video,t=e.videoWidth,i=e.videoHeight,r=e.clientWidth,n=e.clientHeight;if(0===r||0===n)return 0;var o=0;return"cover"===this.displayMode?o=Math.max(r/t,n/i):"contain"===this.displayMode&&(o=Math.min(r/t,n/i)),o===1/0&&(o=0),this.pixelRatio=o,o}},e.prototype._clearCanvasRect=function(){this._cvsDrawArea&&this._cvsDrawArea.getContext("2d").clearRect(0,0,this._cvsDrawArea.width,this._cvsDrawArea.height)},e.prototype._clearRegionsults=function(){this._cvsDrawArea&&(this._cvsDrawArea.width=this._cvsDrawArea.height=0)},e.prototype.bindCameraSelector=function(e){return this._cameraManager.bindCameraSelector(e)},e.prototype.unbindCameraSelector=function(){return this._cameraManager.unbindCameraSelector()},e.prototype._onCameraSelChanged=function(e){var t=this;this.setCurrentCamera(e).then((function(e){t.hide(),e.getResolutions()}))},e.prototype.setCurrentCamera=function(e,t){return n(this,void 0,void 0,(function(){var i;return o(this,(function(r){switch(r.label){case 0:return this._closeCamera(),(i=this._cameraManager._allCamerasInfo)?[3,2]:[4,this._cameraManager.getAllCamerasInfo()];case 1:i=r.sent(),r.label=2;case 2:return[4,this._cameraManager.requestCamera()];case 3:return r.sent(),this._camera=new l.Camera(e,this._video,i,t,this._pub),[2,this._camera]}}))}))},e.prototype.getCurrentCamera=function(){return this._camera},e.prototype.on=function(e,t){this._pub.on(e,t.bind(this))},e.prototype.emit=function(e){for(var t,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];(t=this._pub).emit.apply(t,a([e],i))},e.prototype.off=function(e,t){this._pub.off(e,t)},e.prototype.bindUI=function(e,t,i){var r=this;if((void 0===t&&(t=!0),void 0===i&&(i="contain"),this.unbindUI(),this._licenseCallback)&&0!==this._licenseCallback().errorCode)return!1;if(e){if(""===e.style.position&&(e.style.position="relative"),this._videoContainer=document.createElement("div"),this._videoContainer.setAttribute("class","dynamsoft-cvs-container"),e.appendChild(this._videoContainer),this._video=document.createElement("video"),this._video.setAttribute("class","dynamsoft-video"),this._video.setAttribute("playsinline","true"),this._video.style["object-fit"]=i,this.displayMode=i,this._videoContainer.appendChild(this._video),this._camera&&(this._camera._videoEle=this._video),this._cvsDrawArea=document.createElement("canvas"),this._cvsDrawArea.setAttribute("class","dynamsoft-cvs-drawarea"),this._videoContainer.appendChild(this._cvsDrawArea),this._resultImg=document.createElement("img"),this._resultImg.setAttribute("class","dynamsoft-resultImg"),this._videoContainer.appendChild(this._resultImg),t){var n=document.createElement("div");n.setAttribute("class","dynamsoft-cvs-exit dcs-ui-icon dcs-ui-exitMutiple"),this._videoContainer.appendChild(n),n&&n.addEventListener("click",(function(){r.emit("onExitCamera")}))}return this.bindControlBox(),!0}},e.prototype.unbindUI=function(){if(this._clearRegionsults(),this._videoContainer){var e=this._videoContainer.parentNode;e&&e.removeChild(this._videoContainer)}this._videoContainer=null,this._video=null,this._cvsDrawArea=null,this._divScanLight=null,this._divScanLight=null,this._btnClose=null},e.prototype.getImageData=function(){var e=document.createElement("canvas");return this._drawRealCameraArea(e),e.getContext("2d").getImageData(0,0,e.width,e.height)},e.prototype.getBlobData=function(e){if(e=e||this._tempCanvas,this._video)return new Promise((function(t){e.toBlob((function(e){t(e)}))}))},e.prototype.setDisplayMode=function(e){this.displayMode=e,this._video.style.objectFit=e,this.webcamResize()},e.prototype._drawRealCameraArea=function(e){var t=this._video;if(t){var i=e.getContext("2d");if("contain"===this.displayMode)e.width=t.videoWidth,e.height=t.videoHeight,i.drawImage(this._video,0,0);else{var r=this.pixelRatio,n=t.clientWidth/r,o=t.clientHeight/r;e.width=n,e.height=o;var a=Math.max((this._video.videoWidth-n)/2,0),s=Math.max((this._video.videoHeight-o)/2,0);i.drawImage(this._video,a,s,n,o,0,0,n,o)}}},e.prototype.emptyTempCanvas=function(){var e=this._tempCanvas;e.width=0,e.height=0},e.prototype.bindRealTimeRender=function(e){var t=this;if(this.unbindRealTimeRender(),!this._areaDetectFn)return!1;var i=1e3/e;this._isDrawing=!0;return function e(i){t.freeCropTimer=setTimeout((function(){return n(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this._isDrawing?[4,this.drawDetectArea()]:[3,2];case 1:t.sent(),e(i),t.label=2;case 2:return[2]}}))}))}),i)}(i),!0},e.prototype.unbindRealTimeRender=function(){clearTimeout(this.freeCropTimer),this._isDrawing=!1,this.webcamResize()},e.prototype.bindAreaDetectFunction=function(e){return!!d.default.isFunction(e)&&(this._areaDetectFn=e,!0)},e.prototype.bindPerspectiveFunction=function(e){return!!d.default.isFunction(e)&&(this._perspectiveCallback=e,!0)},e.prototype.bindLicenseCallback=function(e){return!!d.default.isFunction(e)&&(this._licenseCallback=e,!0)},e.prototype.detectArea=function(){return n(this,void 0,void 0,(function(){var e,t;return o(this,(function(i){switch(i.label){case 0:return e=this.getImageData(),t=[],this._areaDetectFn?[4,this._areaDetectFn(e.data,e.width,e.height)]:[3,2];case 1:t=i.sent(),e=null,i.label=2;case 2:return[2,t.slice(0)]}}))}))},e.prototype.perspective=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(i){return Array.isArray(e)?(t=this.getImageData(),this._perspectiveCallback?[2,this._perspectiveCallback.call(this,t.data,e,t.width,t.height)]:[2]):[2,!1]}))}))},e.prototype.drawDetectArea=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,this.detectArea()];case 1:return e=t.sent(),Array.isArray(e)&&e.length&&this._isDrawing?(this._drawArea(e),[2,!0]):[2,!1]}}))}))},e.prototype.drawSelectedArea=function(e){var t=this._cvsDrawArea.getContext("2d"),i=e.probePoints.slice();this._processPoints(i);for(var r=0;r<8;r+=2){var n=i[r],o=i[r+1],a=i[(r+2)%8],s=i[(r+3)%8];this._drawLine([n,o],[a,s],t),this._drawPoint([n,o],t)}},e.prototype._drawPoint=function(e,t){var i=e[0],r=e[1];t.save(),t.strokeStyle="rgb(255,255,255)",t.strokeRect(i-4,r-4,8,8),t.restore()},e.prototype._drawLine=function(e,t,i){var r=e[0],n=e[1],o=t[0],a=t[1];i.save(),i.strokeStyle="rgb(255,255,255)",i.beginPath(),i.moveTo(r,n),i.lineTo(o,a),i.stroke(),i.restore()},e.prototype._drawArea=function(e){var t=this._cvsDrawArea;if(t){var i=t.getContext("2d");this._clearCanvasRect(),this._processPoints(e),i.strokeStyle=this.areaFillStyle,i.fillStyle=this.areaFillStyle,i.lineWidth=5,i.clearRect(0,0,t.width,t.height),i.save(),i.beginPath(),i.moveTo(e[0],e[1]);for(var r=2;r<9;r+=2){var n=e[r%8],o=e[(r+1)%8];i.lineTo(n,o)}return i.stroke(),i.closePath(),i.restore(),!0}},e.prototype._processPoints=function(e){for(var t,i=0;i+1<e.length;i+=2){var r=e[i],n=e[i+1];t=this.getDrawPosition(r,n),e[i]=t[0],e[i+1]=t[1]}return e},e.prototype.getDrawPosition=function(e,t){var i=this._cvsDrawArea,r=this.pixelRatio,n=0,o=0;return"contain"===this.displayMode?(n=(i.width-this._video.videoWidth*r)/2,o=(i.height-this._video.videoHeight*r)/2):(n=(i.width-this._video.clientWidth)/2,o=(i.height-this._video.clientHeight)/2),[e=n+e*r,t=o+t*r]},e.prototype.getRealPosition=function(e,t){var i=this.pixelRatio,r=this._cvsDrawArea,n=0,o=0;return"contain"===this.displayMode?(n=(this._video.videoWidth*i-r.width)/2,o=(this._video.videoHeight*i-r.height)/2):(n=(this._video.clientWidth-r.width)/2,o=(this._video.clientHeight-r.height)/2),[e=(n+e)/i,t=(o+t)/i]},e.prototype.bindControlBox=function(e,t){void 0===t&&(t={});var i={blank1:{className:"camera-empty"},captureBtn:{className:"camera-main",iconClass:"dcs-ui-zhaoxiangji",onButtonClick:"onCapture"},detectBtn:{className:"camera-right",iconClass:"dcs-ui-shibie-chuanti",onButtonClick:"onDetect"}};m.mergeJSON(t,i),this.bindCustomBox(e,i)},e.prototype.bindConfirmBox=function(e){this.bindCustomBox(e,{remakeBtn:{className:"camera-left",iconClass:"dcs-ui-shangyibu",onButtonClick:"onRemake"},blank1:{className:"camera-editEmpty"},perspectiveBtn:{className:"camera-right",iconClass:"dcs-ui-xiayibu",onButtonClick:"onPerspective"}})},e.prototype.bindSaveBox=function(e,t){void 0===t&&(t={});var i={backBtn:{className:"camera-around",iconClass:"dcs-ui-shangyibu",onButtonClick:"onBack"},blank1:{className:"camera-saveEmpty"},remakeBtn:{className:"camera-around",iconClass:"dcs-ui-zhongpai",onButtonClick:"onRemake"},confirmBtn:{className:"camera-around",iconClass:"dcs-ui-lijiquerenx",onButtonClick:"onConfirm"}};m.mergeJSON(t,i),this.bindCustomBox(e,i)},e.prototype.bindCustomBox=function(e,t,i){var r,n=this;if(!(r=m.isString(e)?document.getElementById(e):e||this._controlBox))return!1;t=t||{};var o={};d.default.mergeJSON(t,o);var a="<div id='controlwrapper' class='controlwrapper "+d.default.rValue(i)+"'>";for(var s in o){var c=o[s];c=c||{},a+="<div id='"+s+"' class='"+s+"  "+(d.default.rValue(c.className)?d.default.rValue(c.className):"camera-empty")+"'>",a+="<div class='dcs-ui-icon "+d.default.rValue(c.iconClass)+"'></div>",a+="<text>"+d.default.rValue(c.text)+"</text>",a+="</div>"}a+="</div>",r.innerHTML=a;var l=function(e){var t=o[e];t=t||{};var i=d.default.rValue(t.onButtonClick),r=document.getElementById(e);if(!r||!i)return"continue";r.addEventListener("click",(function(){n.emit(i)})),r.addEventListener("touchstart",(function(e){}))};for(var s in o)l(s);document.body.addEventListener("touchstart",(function(){}))},e.prototype.showResultImage=function(e){this._resultImg&&(this._resultImg.style.display="block",this._resultImg.src=e,this._video.style.display="none")},e.prototype.hideResultImage=function(){this._resultImg&&(this._resultImg.style.display="none",this._resultImg.src="",this._video.style.display="")},e.prototype.getSourceList=function(){return this._cameraManager.getAllCamerasInfo()},e.prototype.selectSource=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(i){switch(i.label){case 0:return d.default.isString(e)||this._throwParaTypeError(r(e),"string"),this._cameraManager._allCamerasInfo&&0!==this._cameraManager._allCamerasInfo.length?[3,2]:[4,this._cameraManager.getAllCamerasInfo()];case 1:i.sent(),i.label=2;case 2:return[4,this._cameraManager.requestCamera()];case 3:return i.sent(),(t=this._cameraManager.selectCamera(e))||this.emit("onThrowError",f.SOURCE_NOT_FOUND),[4,this.setCurrentCamera(t)];case 4:return i.sent(),[2,t]}}))}))},e.prototype.getCurrentSource=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){return this._camera?[2,this._camera._cameraInfo]:[2,null]}))}))},e.prototype.closeSource=function(){var e=this;return new Promise((function(t,i){if(e._camera){var r=e._camera._cameraInfo;e._camera.destroy(),e._camera=null,t(r)}else e.emit("onThrowError",f.NO_CAMERA_SELECTED)}))},e.prototype.play=function(e,t,i,a){return void 0===a&&(a=!1),n(this,void 0,void 0,(function(){return o(this,(function(n){return void 0!==e&&(d.default.isElement(e)?this._videoContainer&&e===this._videoContainer.parentNode||(this.playing()&&this.emit("onThrowError",f.VIDEO_NOT_STOP),this.bindUI(e,!1,a?"cover":"contain")):this._throwParaTypeError(r(e),"HTMLElement")),[2,this.playDirectly(null,t,i)]}))}))},e.prototype.capture=function(){return n(this,void 0,void 0,(function(){var e;return o(this,(function(t){return this._camera||this.emit("onThrowError",f.NO_CAMERA_SELECTED),this._video?(this.playing()||this._throwError(f.VIDEO_NOT_PLAY),e=document.createElement("canvas"),this._drawRealCameraArea(e),this.calPixelRatio(),[2,new Promise((function(t,i){e.toBlob((function(i){e.width=0,e.height=0,t(i)}))}))]):(this.emit("onThrowError",f.VIDEO_ELEMENT_REQUIRED),[2])}))}))},e.prototype.pause=function(){this._camera&&this._camera.pause()},e.prototype.stop=function(){this._camera&&(this._clearCanvasRect(),this._camera.stop())},e.prototype.resume=function(){this._camera&&this._camera.resume()},e.prototype.getStatus=function(){return this._camera?this.playing()?this.paused()?"paused":"playing":"stopped":""},e.prototype.getResolution=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this._camera?[4,this._camera.getResolutions()]:[3,2];case 1:return[2,e.sent()];case 2:this.emit("onThrowError",f.NO_CAMERA_SELECTED),e.label=3;case 3:return[2]}}))}))},e.prototype.setResolution=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){return this._camera?(d.default.isObject(e)||this._throwParaTypeError(r(e),"Object"),e.width>0&&e.height>0||this._throwParaValueError(JSON.stringify(e),"resolution"),this.playing()?[2,this._camera.setResolution(e.width,e.height)]:(this._camera._curResolution=e,[2,e])):(this.emit("onThrowError",f.NO_CAMERA_SELECTED),[2])}))}))},e.prototype.getCurrentResolution=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){return this._camera?[2,this._camera._curResolution]:(this.emit("onThrowError",f.NO_CAMERA_SELECTED),[2])}))}))},e}();t.CameraViewer=v},function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CameraManager=void 0;var s=a(i(0)).default.ErrorMessage,c=function(){function e(e){var t=this;this._cameraPermission=!1,this._allCamerasInfo=[],this._selCameraInfo=null,this._cameraSelector=null,this._onCameraSelChange=function(){var e=!0;t._selCameraInfo&&t._cameraSelector.options.length>0&&t._selCameraInfo.deviceId==t._cameraSelector.value&&(e=!1);var i={},r=t._cameraSelector.selectedOptions;e&&(r&&r.length>0?(i.deviceId=r[0].value,i.label=r[0].innerText):i=t._allCamerasInfo[0]),i.deviceId?t._selCameraInfo=i:i=null,e&&t._fireCameraSelChanged(i)},this._pub=e,this._trackCameraDeviceChanged(),this._bindEvents()}return e.prototype.requestCamera=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this._checkNavigator(),0===this._allCamerasInfo.length&&this._pub.emit("onThrowError",s.NO_CAMERA),[4,this._checkAllowCamera()];case 1:return e.sent(),[2]}}))}))},e.prototype._checkNavigator=function(){void 0===navigator.mediaDevices&&(location.origin.startsWith("https://")?this._pub.emit("onThrowError",s.MEDIADEVICES_NOT_IMPL):this._pub.emit("onThrowError",s.HTTPS_REQUIRED)),void 0===navigator.mediaDevices.getUserMedia&&this._pub.emit("onThrowError",s.GETUSERMEDIA_NOT_IMPL)},e.prototype._checkAllowCamera=function(){return n(this,void 0,void 0,(function(){var e,t;return o(this,(function(i){switch(i.label){case 0:if(this._cameraPermission)return[2,!1];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}})];case 2:return(e=i.sent())&&(e.getTracks().forEach((function(e){e.stop()})),this._cameraPermission=!0),[3,4];case 3:return t=i.sent(),this._pub.emit("onThrowError",t),[3,4];case 4:return[2]}}))}))},e.prototype._bindEvents=function(){this._pub.on("onCameraSelChange",this._onCameraSelChange.bind(this))},e.prototype._trackCameraDeviceChanged=function(){var e=this;if(null==navigator.mediaDevices)return!1;navigator.mediaDevices.ondevicechange=function(t){e._fireCameraChanged(e._allCamerasInfo)}},e.prototype.getAllCamerasInfo=function(){return n(this,void 0,void 0,(function(){var e,t,i,r,n,a,s,c,l;return o(this,(function(o){switch(o.label){case 0:return this._checkNavigator(),[4,this._getVideoDevices()];case 1:if(e=o.sent(),t=!0,e.length==this._allCamerasInfo.length){for(i=0,r=0,n=e;r<n.length;r++)for(a=n[r],s=0,c=this._allCamerasInfo;s<c.length;s++)if((l=c[s]).deviceId==a.deviceId&&l.label==a.label){i++;break}t=i!=e.length}return t&&(this._allCamerasInfo=e,this._renderSelCameraInfo()),[2,Promise.resolve(this._allCamerasInfo)]}}))}))},e.prototype._getVideoDevices=function(){return n(this,void 0,void 0,(function(){var e,t,i,r,n,a,s,c,l;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this._checkAllowCamera()];case 1:return o.sent(),[3,3];case 2:return o.sent(),[3,3];case 3:return[4,navigator.mediaDevices.enumerateDevices()];case 4:for(e=o.sent(),t=[],i=0,r=0;r<e.length;r++)if("videoinput"==(n=e[r]).kind){for(a=!1,s=0,c=t;s<c.length;s++)if(c[s].deviceId===n.deviceId){a=!0;break}a||((l={}).deviceId=n.deviceId,l.label=!n.label||/^camera\s[0-9]+$/.test(n.label)?"camera "+i++:n.label,t.push(l))}return[2,t]}}))}))},e.prototype._fireCameraChanged=function(e){this._pub.emit("onCameraChanged",e)},e.prototype.destroy=function(){this.unbindCameraSelector(),this._pub.off("onCameraChanged"),this._selCameraInfo=null},e.prototype._fireCameraSelChanged=function(e){this._pub.emit("onCameraSelChanged",e)},e.prototype._renderSelCameraInfo=function(){var e={},t=null;if(this._cameraSelector){for(var i in e.deviceId=this._cameraSelector.value,e.label=this._cameraSelector.innerText,this._cameraSelector.innerHTML="",this._allCamerasInfo){var r=this._allCamerasInfo[i],n=document.createElement("option");n.value=r.deviceId,n.innerText=r.label,this._cameraSelector.append(n),e.deviceId==r.deviceId&&(t=n)}var o=this._cameraSelector.options;if(!t&&this._selCameraInfo&&o.length)for(var a=0;a<o.length;a++)if(this._selCameraInfo.deviceId==o.item(a).value){t=o.item(a);break}t&&(this._cameraSelector.value=t.value),(e.deviceId||0!=this._allCamerasInfo.length)&&this._onCameraSelChange()}},e.prototype.bindCameraSelector=function(e){var t=this;this.unbindCameraSelector(),this._cameraSelector=e||document.createElement("select"),this._cameraSelector&&(this._cameraSelector.addEventListener("change",(function(){t._pub.emit("onCameraSelChange")})),this._renderSelCameraInfo())},e.prototype.unbindCameraSelector=function(){this._cameraSelector&&(this._cameraSelector.removeEventListener("change",this._onCameraSelChange),this._cameraSelector.innerHTML="",this._cameraSelector=null)},e.cameraExist=function(e,t){for(var i=0,r=t;i<r.length;i++){var n=r[i];if(n.deviceId==e.deviceId&&n.label==e.label)return!0}return!1},e.prototype.selectCamera=function(e){if(!e)return null;var t={};if(this._cameraSelector){var i=void 0,n=void 0;if("object"===r(e)){var o=e;o&&(i=o.deviceId,n=o.label)}"string"==typeof e&&(n=i=e);for(var a=this._cameraSelector.options,s=0;s<a.length;s++){if(i==(c=a[s]).value)return t.deviceId=c.value,t.label=c.innerText,this._cameraSelector.value=c.value,t}for(s=0;s<a.length;s++){var c;if(n==(c=a.item(s)).innerText)return t.deviceId=c.value,t.label=c.innerText,this._cameraSelector.value=c.value,t}}if(this._allCamerasInfo)for(var l={deviceId:"",label:""},u=0;u<this._allCamerasInfo.length;u++){var h=this._allCamerasInfo[u];if(e===h.deviceId)return l.deviceId=h.deviceId,l.label=h.label,l}return null},e}();t.CameraManager=c},function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var i,r,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=a.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=void 0;var a=o(i(0)),s=i(5),c=a.default.ErrorMessage,l=function(){function e(e,t,i,r,n){var o=this;this.videoSettings={video:{width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}},this._browserInfo={chrome:!1,firefox:!1,safari:!1,mobile:!1},this._isPlugOut=!1,this._resolutionSelector=null,this._cameraInfo=null,this._allCameras=null,this._videoTrack=null,this._allResolutions=[],this._curResolution=null,this._videoEle=null,this._onResolutionSelChange=function(){var e=!0;if(o._curResolution&&o._resolutionSelector.options.length>0&&JSON.stringify(o._curResolution)==o._resolutionSelector.value&&(e=!1),o._resolutionSelector.options.length>0){var t={};if(o._resolutionSelector&&-1!=o._resolutionSelector.selectedIndex){var i=o._resolutionSelector.options[o._resolutionSelector.selectedIndex];t=JSON.parse(i.value)}o.play(t.width,t.height).then((function(){e&&o._fireResolutionChanged(t.width,t.height,t.type)})).catch((function(e){o._fireLog("Play video failed: "+(e.message||e))}))}},this._pub=n,this._initBrowserInfo(r),e?this._cameraInfo=e:(this._cameraInfo={},this._cameraInfo.deviceId="",this._cameraInfo.label=""),t&&(this._videoEle=t),this._allCameras=i,this._pub.on("onResolutionSelChange",this._onResolutionSelChange.bind(this))}return e.prototype.setPlugout=function(){this._isPlugOut=!0},e.prototype._checkPlugout=function(){this._isPlugOut&&this._pub.emit("video-error",c.CAMERA_PLUG_OUT)},e.prototype._initBrowserInfo=function(e){this._browserInfo=e||this._getBrowser()},e.prototype._getBrowser=function(){var e=new s.BrowserDetect;return{safari:"Safari"==e.browser,chrome:"Chrome"==e.browser,firefox:"Firefox"==e.browser,mobile:e.detectmobilebrowser()}},e.prototype._fireResolutionChanged=function(e,t,i){var r={};r.width=e,r.height=t,r.type=i,this._pub.emit("onResolutionChanged",r)},e.prototype._renderSelResolution=function(){var e={},t=null;if(this._resolutionSelector){var i=this._resolutionSelector.options[this._resolutionSelector.selectedIndex];i&&(e=JSON.parse(i.value),this._resolutionSelector.innerHTML="")}if(this._resolutionSelector){for(var r=0,n=this._allResolutions;r<n.length;r++){var o=n[r],a=document.createElement("option");a.value=JSON.stringify(o),a.innerText=o.width+" x "+o.height,this._resolutionSelector.append(a),e.width==o.width&&e.height==o.height&&(t=a)}var s=this._resolutionSelector.options;if(!t&&this._curResolution&&s.length)for(var c=JSON.stringify(this._curResolution),l=0;l<s.length;l++)if(c==s.item(l).value){t=s.item(l);break}t&&(this._resolutionSelector.value=t.value),(e.width||0!=this._allResolutions.length)&&this._onResolutionSelChange()}},e.prototype.bindResolutionsSelector=function(e){var t=this;this.unbindResolutionsSelector(),this._checkPlugout(),this._resolutionSelector=e||document.createElement("select"),this._resolutionSelector&&(this._resolutionSelector.addEventListener("change",(function(){t._pub.emit("onResolutionSelChange")})),this._renderSelResolution())},e.prototype.unbindResolutionsSelector=function(){this._resolutionSelector&&this._resolutionSelector.removeEventListener("change",this._onResolutionSelChange),this._resolutionSelector=null},e.prototype._getResolution=function(e,t,i,o){return r(this,void 0,void 0,(function(){var r,a,s,l,u,h,d,f;return n(this,(function(n){switch(n.label){case 0:this._checkPlugout(),r={},a=null,s=null,n.label=1;case 1:return n.trys.push([1,5,,6]),this._fireLog("request constraints: width="+t+", height="+i),[4,this._getMediaStream(this._getMediaTrackConstraints(e,t,i,o,!1))];case 2:return(a=n.sent())?(document&&document.createElement?s=document.createElement("video"):this._videoEle?s=this._videoEle:this._pub.emit("onThrowError",c.VIDEO_ELEMENT_REQUIRED),l="exact"==o,!this._browserInfo.firefox&&l?[3,4]:(s.srcObject=a,[4,s.play()])):[2,r];case 3:n.sent(),n.label=4;case 4:return r.type=o,l?(u=a.getVideoTracks()[0],(h=u.getConstraints())&&h.width?(r.height=h.height.exact?h.height.exact:h.height,r.width=h.width.exact?h.width.exact:h.width,this._fireLog("Result constraints: "+JSON.stringify(h))):(d=u.getSettings(),r.height=d.height.exact?d.height.exact:d.height,r.width=d.width.exact?d.width.exact:d.width,this._fireLog("Result constraints(getSettings): "+JSON.stringify(d)))):(r.height=s.videoHeight,r.width=s.videoWidth),[3,6];case 5:return f=n.sent(),this._fireLog("_getResolution exception:"+(f.message||f)),[3,6];case 6:return a?(this._browserInfo.firefox&&(s.srcObject=null),[4,a.getTracks().forEach((function(e){e.stop()}))]):[3,8];case 7:n.sent(),a=null,s=null,n.label=8;case 8:return[2,r]}}))}))},e.prototype.getResolutions=function(){return r(this,void 0,void 0,(function(){var e,t,i,r,o,a,s,c,l,u,h,d,f;return n(this,(function(n){switch(n.label){case 0:if(this._allResolutions.length>0)return[2,this._allResolutions];e=[],t=[{width:320,height:240,type:"exact"},{width:640,height:480,type:"exact"},{width:640,height:360,type:"exact"},{width:800,height:600,type:"exact"},{width:1280,height:720,type:"exact"},{width:1920,height:1080,type:"exact"},{width:2560,height:1440,type:"exact"},{width:3840,height:2160,type:"exact"}],i=null,this._allResolutions=[],r=0,o=t,n.label=1;case 1:return r<o.length?(a=o[r],s=a.height,c=a.width,l=a.type,this._cameraInfo?[4,this._getResolution(this._cameraInfo.deviceId,c,s,l)]:[2,null]):[3,6];case 2:return(i=n.sent())&&i.height&&(!i||!i.height||i.height==s&&i.width==c||i.height==c&&i.width==s)?[3,4]:(this._fireLog("getResolutions try to get ideal resolution: "+c+" x "+s),this._cameraInfo?[4,this._getResolution(this._cameraInfo.deviceId,c,s,"ideal")]:[2,null]);case 3:i=n.sent(),n.label=4;case 4:if(i&&i.height){for(u=!1,h=0,d=e;h<d.length;h++)if((f=d[h]).height==i.height&&f.width==i.width){u=!0;break}if(!u){if(this._fireLog("got resolution: "+JSON.stringify(i)),delete i.type,e.push(i),null===this._allResolutions)return[2,null];this._allResolutions.push(i)}}n.label=5;case 5:return r++,[3,1];case 6:return this._renderSelResolution(),[2,e]}}))}))},e.prototype.setResolution=function(e,t){return r(this,void 0,void 0,(function(){return n(this,(function(i){switch(i.label){case 0:return this._checkPlugout(),[4,this.play(e,t)];case 1:return[2,i.sent()]}}))}))},e.prototype.getVideoSettings=function(){return JSON.parse(JSON.stringify(this.videoSettings))},e.prototype.updateVideoSettings=function(e){return this.videoSettings=JSON.parse(JSON.stringify(e)),this.play()},e.prototype.destroy=function(){this.unbindResolutionsSelector(),this.stop(),this._cameraInfo=null,this._allCameras=null,this._allResolutions=null,this._videoEle=null},e.prototype.stop=function(){this._videoEle&&this._videoEle.srcObject&&(this._fireLog("======stop video========"),this._videoEle.srcObject.getTracks().forEach((function(e){e.stop()})),this._videoEle.srcObject=null,this._videoTrack=null)},e.prototype.pause=function(){this._videoEle&&this._videoEle.pause()},e.prototype.resume=function(){this._videoEle&&this.paused()&&this.playing()&&this._videoEle.play()},e.prototype.paused=function(){return!!this._videoEle&&this._videoEle.paused},e.prototype.playing=function(){if(this._isPlugOut)return!1;if(this._videoEle&&this._videoEle.srcObject)try{var e=this._videoEle.srcObject;if(e){var t=e.getVideoTracks();if(t&&0!=t.length)return!0}}catch(e){this._fireLog("get video status: "+(e.message||e))}return!1},e.prototype._getMediaTrackConstraints=function(e,t,i,r,n){var o=JSON.parse(JSON.stringify(this.videoSettings));"boolean"==typeof o.video&&(o.video={});var a="exact"==r;if(t&&(o.video.width=a?{exact:t}:{ideal:t}),i&&(o.video.height=a?{exact:i}:{ideal:i}),n&&(t&&(o.video.width={ideal:t}),i&&(o.video.height={ideal:i})),this._browserInfo.mobile&&this._browserInfo.safari&&n&&(o.video.width=o.video.height,delete o.video.height),e)delete o.video.facingMode,o.video.deviceId={exact:e};else if(o.video.facingMode){var s=o.video.facingMode;if(s instanceof Array&&s.length&&(s=s[0]),"environment"===(s=s.exact||s.ideal||s)&&this._allCameras){for(var c=0,l=this._allCameras;c<l.length;c++){var u=l[c],h=u.label.toLowerCase();if(h&&-1!=h.indexOf("facing back")&&/camera[0-9]?\s0,/.test(h)){delete o.video.facingMode,o.video.deviceId={ideal:u.deviceId};break}}o.bFmEnvironment=!!o.video.facingMode}}return o},e.prototype._getMediaStream=function(e,t){return r(this,void 0,void 0,(function(){var i;return n(this,(function(r){switch(r.label){case 0:this._fireLog("======try getUserMedia========"),"boolean"==typeof e.video&&(e.video={}),this._fireLog("ask "+JSON.stringify(e.video.width)+"x"+JSON.stringify(e.video.height)),r.label=1;case 1:return r.trys.push([1,3,,4]),this._fireLog(e),[4,navigator.mediaDevices.getUserMedia(e)];case 2:return[2,r.sent()];case 3:if(i=r.sent(),this._fireLog(i),i.name&&"OverconstrainedError"==i.name){if(t)throw i;return[2,null]}return this._fireLog("======try getUserMedia again========"),this._browserInfo.mobile&&this._browserInfo.safari?(delete e.video.width,delete e.video.height):e.bFmEnvironment?(delete e.video.facingMode,this._allCameras&&this._allCameras.length&&(e.video.deviceId={ideal:this._allCameras[this._allCameras.length-1].deviceId})):e.video=!0,this._fireLog(e),[2,navigator.mediaDevices.getUserMedia(e)];case 4:return[2]}}))}))},e.prototype._supportedResolution=function(e,t){for(var i=0,r=this._allResolutions;i<r.length;i++){var n=r[i];if(n.height==t&&n.width==e)return n.type}return"ideal"},e.prototype.play=function(e,t){return r(this,void 0,void 0,(function(){var i,r,o,a,s,l,u,h,d;return n(this,(function(n){switch(n.label){case 0:this._videoEle||this._pub.emit("onThrowError",c.VIDEO_ELEMENT_REQUIRED),"number"==typeof e&&e>0&&"number"==typeof t&&t>0||(e=this._curResolution?this._curResolution.width:1280,t=this._curResolution?this._curResolution.height:720),i=this._supportedResolution(e,t),this._checkPlugout(),this.stop(),this._fireLog("======before video========"),this.videoSettings=this._getMediaTrackConstraints(this._cameraInfo.deviceId,e,t,i,!0),r=this.videoSettings,o=null,a={},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this._getMediaStream(r,!0)];case 2:return(o=n.sent())&&(s=o.getVideoTracks()).length&&(this._videoTrack=s[0],a=this._videoTrack.getSettings(),l={deviceId:a.deviceId,label:this._videoTrack.label},this._cameraInfo=l),[3,4];case 3:return u=n.sent(),this._fireLog("======get user media exception========"+(u.message||u)),"NotAllowedError"===u.name||"Permission denied"===u.message?this._pub.emit("onThrowError",c.CAMERA_NOT_OPEN):this._pub.emit("onThrowError",c.FAILED_GET_USERMEDIA),[3,4];case 4:this._videoEle.srcObject=o,this._fireLog("======play video========"),n.label=5;case 5:return n.trys.push([5,7,,10]),[4,this._videoEle.play()];case 6:return n.sent(),[3,10];case 7:return h=n.sent(),this._fireLog("======play video exception========"+(h.message||h)),[4,new Promise((function(e){setTimeout(e,1e3)}))];case 8:return n.sent(),[4,this._videoEle.play()];case 9:return n.sent(),[3,10];case 10:return this._fireLog("======after played video========"),d={width:this._videoEle.videoWidth,height:this._videoEle.videoHeight},a.width&&a.height&&(a.width===e&&a.height===t||a.width===t&&a.height===e)&&(d.width=e,d.height=t),this._curResolution=d,this._pub.emit("onPlayed"),[2,d]}}))}))},e.prototype.getCapabilities=function(){return this._videoTrack.getCapabilities?this._videoTrack.getCapabilities():{}},e.prototype.getCameraSettings=function(){return this._videoTrack.getSettings()},e.prototype.getConstraints=function(){return this._videoTrack.getConstraints()},e.prototype._throwNotSupportException=function(){this._pub.emit("onThrowError",c.CAMERA_SETTINGS_NOT_SUPPORT)},e.prototype._fireLog=function(e){this._pub.emit("onLog",e)},e.prototype.applyConstraints=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this._videoTrack.applyConstraints||this._throwNotSupportException(),[4,this._videoTrack.applyConstraints(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.turnOnTorch=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return this.getCapabilities().torch?[4,this._videoTrack.applyConstraints({advanced:[{torch:!0}]})]:[3,2];case 1:return[2,e.sent()];case 2:this._throwNotSupportException(),e.label=3;case 3:return[2]}}))}))},e.prototype.turnOffTorch=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return this.getCapabilities().torch?[4,this._videoTrack.applyConstraints({advanced:[{torch:!1}]})]:[3,2];case 1:return[2,e.sent()];case 2:this._throwNotSupportException(),e.label=3;case 3:return[2]}}))}))},e.prototype.setColorTemperature=function(e){return r(this,void 0,void 0,(function(){var t;return n(this,(function(i){switch(i.label){case 0:return(t=this.getCapabilities().colorTemperature)||this._throwNotSupportException(),e<t.min?e=t.min:e>t.max&&(e=t.max),[4,this._videoTrack.applyConstraints({advanced:[{colorTemperature:e}]})];case 1:return[2,i.sent()]}}))}))},e.prototype.setExposureCompensation=function(e){return r(this,void 0,void 0,(function(){var t;return n(this,(function(i){switch(i.label){case 0:return(t=this.getCapabilities().exposureCompensation)||this._throwNotSupportException(),e<t.min?e=t.min:e>t.max&&(e=t.max),[4,this._videoTrack.applyConstraints({advanced:[{exposureCompensation:e}]})];case 1:return[2,i.sent()]}}))}))},e.prototype.setZoom=function(e){return r(this,void 0,void 0,(function(){var t;return n(this,(function(i){switch(i.label){case 0:return(t=this.getCapabilities().zoom)||this._throwNotSupportException(),e<t.min?e=t.min:e>t.max&&(e=t.max),[4,this._videoTrack.applyConstraints({advanced:[{zoom:e}]})];case 1:return[2,i.sent()]}}))}))},e.prototype.setFrameRate=function(e){return r(this,void 0,void 0,(function(){var t;return n(this,(function(i){switch(i.label){case 0:return(t=this.getCapabilities().frameRate)||this._throwNotSupportException(),e<t.min?e=t.min:e>t.max&&(e=t.max),[4,this._videoTrack.applyConstraints({width:{ideal:Math.max(this._videoEle.videoWidth,this._videoEle.videoHeight)},frameRate:e})];case 1:return[2,i.sent()]}}))}))},e}();t.Camera=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserDetect=void 0;var r=function(){function e(){this.dataBrowser=[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"OPR",identity:"OPR"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}],this.dataOS=[{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],this.init()}return e.prototype.init=function(){this.browser=this.searchString(this.dataBrowser)||"unknownBrowser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknownVersion",this.OS=this.searchString(this.dataOS)||"unknownOS"},e.prototype.searchString=function(e){for(var t=0;t<e.length;t++){var i=e[t].string,r=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,i){if(-1!=i.indexOf(e[t].subString))return e[t].identity}else if(r)return e[t].identity}},e.prototype.searchVersion=function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},e.prototype.detectmobilebrowser=function(){var e=window,t=navigator.userAgent||navigator.vendor||e.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|android|playbook|silk|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))return!0;if(null!==t.match(/Macintosh/i)){var i=document.createElement("canvas");if(null!==i){var r=i.getContext("webgl")||i.getContext("experimental-webgl");if(r){var n=r.getExtension("WEBGL_debug_renderer_info");if(n)if(-1!==r.getParameter(n.UNMASKED_RENDERER_WEBGL).indexOf("Apple"))return!0}}}return!1},e}();t.BrowserDetect=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraException=void 0;var r=function(){function e(){}return e.cameraException=function(e,t){var i={};return(i=new Error(t||e.message)).code=e.code,i},e}();t.CameraException=r},function(e,t,i){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<i;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,n++)r[n]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.PublishSubscribe=void 0;var n=function(){function e(){this._events=[]}return e.prototype.on=function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},e.prototype.emit=function(e){for(var t,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=this._events[e];if(!o||0===o.length)return!1;for(var a=o.length,s=0;s<a;s++)(t=o[s]).call.apply(t,r([null],i))},e.prototype.off=function(e,t){var i=this._events[e];if(!i)return!1;if(t)for(var r=i.length,n=0;n<r;n++){i[n]===t&&i.splice(n,1)}else i&&(i.length=0)},e}();t.PublishSubscribe=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},isBoolean:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},isElement:function(e){return e instanceof HTMLElement},mergeJSON:function(e,t){for(var i in e)void 0===t[i]?t[i]=e[i]:this.isObject(e[i])?this.mergeJSON(e[i],t[i]):t[i]=e[i]},rValue:function(e){return void 0===e?"":e}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this._canvasEl=null,this._video=null};t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pointToPointDistance=t.parsePadding=t.throttle1=t.promiseWidthAbort=t.makePromiseCancelable=t.formatLog=t.formatTime=t.devicePixelRatio=t.requestAnimationFrame=t.checkFocus=t.deepClone=t.deepCopy=t.createCanvas=t.uid=t.error=t.throwError=t.insertBefore=t.insertAfter=t.getByClass=t.getIndexByCallback=t.getIndex=t.exitFullscreen=t.launchFullscreen=t.isFullscreen=t.toggleDisplayByQuery=t.toggleDisplayByDom=t.toggleHidden=t.animation=t.showByDom=t.hiddenByDom=t.hiddenByQuery=t.id=t.preventDefault=t.stopBubble=t.arrayFrom=t.queryAll=t.query=t.throttleStable=t.stable=t.throttle=t.mergeJSON=t.addEvent=t.isElement=t.isIE=t.isMobile=t.isBorder=t.isColor=t.isBoolean=t.isNumber=t.isSize=t.isString=t.isFunction=t.isObject=t.uniqueArray=t.isArray=void 0;function r(e){return"function"==typeof e}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},t.uniqueArray=function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)for(var i=t+1;i<e.length;i++)e[t]===e[i]&&(e.splice(i,1),i--);return e}},t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},t.isFunction=r,t.isString=function(e){return"string"==typeof e},t.isSize=function(e){var t=String(e);return!!/^\d+(px|em)$|^\d+$|^(100|[1-9]?\d(\.\d\d?\d?)?)%$/.test(t)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isBoolean=function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},t.isColor=function(e){var t=document.createElement("span");return t.style.background=e,!!t.style.background},t.isBorder=function(e){var t=document.createElement("span");return t.style.border=e,!(!t.style.border&&""!==e)},t.isMobile=function(){return"ontouchstart"in document.documentElement},t.isIE=function(){return void 0!==document.documentMode},t.isElement=function(e){return e instanceof HTMLElement||"[object ShadowRoot]"===Object.prototype.toString.call(e)},t.addEvent=function(e,t,i,r){if(e)return e.addEventListener(t,i,r),function(){e.removeEventListener(t,i)}},t.mergeJSON=function(e,t){for(var i in e)void 0===t[i]?t[i]=e[i]:this.isObject(e[i])?this.mergeJSON(e[i],t[i]):t[i]=e[i]},t.throttle=function(e,t,i){var r=!0;return function(){var n=this;r&&(r=!1,setTimeout((function(){e.apply(n,i),r=!0}),t))}},t.stable=function(e,t,i){var r,n=this;return void 0===i&&(i=!1),function(){i?e.apply(n):(r&&clearTimeout(r),r=setTimeout((function(){e.apply(n)}),t))}},t.throttleStable=function(e,t){var i=this,r=0,n=null;return function(){var o=+new Date;o-r<t?(clearTimeout(n),n=setTimeout((function(){r=o,e.apply(i)}),t)):(r=o,e.apply(i))}},t.query=function(e){return document.querySelector(e)},t.queryAll=function(e){return Array.from?Array.from(document.querySelectorAll(e)):this.arrayFrom(document.querySelectorAll(e))},t.arrayFrom=function(e){var t=[];if(this.isObject(e))for(var i=Object.keys(e),r=0;r<i.length;r++)t.push(e[i[r]]);else for(var n=0;n<e.length;n++)t.push(e[n]);return t},t.stopBubble=function(e){e&&e.stopPropagation?e.stopPropagation():e&&(e.cancelBubble=!0)},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.id=function(e){return""===e||void 0===e?null:document.getElementById(e)},t.hiddenByQuery=function(e){var t=this.query(e);this.hiddenByDom(t)},t.hiddenByDom=function(e){null==e||e.classList.add("dvs-nodisplay")},t.showByDom=function(e){null==e||e.classList.remove("dvs-nodisplay")},t.animation=function(e,t,i,r,n){if(void 0===r&&(r=200),void 0===n&&(n=13),!this.isString(t)||!this.isNumber(i))return!1;var o=!1;this.isString(e[t])&&-1!==e[t].indexOf("px")&&(o=!0);var a=parseInt(e[t]);if(this.isNumber(a))var s=(i-a)/n,c=setInterval((function(){s>0&&a<i||s<0&&a>i?a+=s:(clearInterval(c),a=i),e[t]=o?a+"px":a}),r/n)},t.toggleHidden=function(e){e.classList.toggle("dvs-hidden")},t.toggleDisplayByDom=function(e){e.classList.toggle("dvs-nodisplay")},t.toggleDisplayByQuery=function(e,t){void 0===t&&(t=!0);var i=this.query(e);return this.toggleDisplayByDom(i,t)},t.isFullscreen=function(){var e=window.document;return e.fullscreenElement||e.msFullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||!1},t.launchFullscreen=function(e){return e.requestFullscreen?(e.requestFullscreen(),!0):e.mozRequestFullScreen?(e.mozRequestFullScreen(),!0):e.msRequestFullscreen?(e.msRequestFullscreen(),!0):e.oRequestFullscreen?(e.oRequestFullscreen(),!0):e.webkitRequestFullscreen?(e.webkitRequestFullScreen(),!0):(alert("Your browser does not support full screen!"),!1)},t.exitFullscreen=function(){var e=window.document;return e.exitFullScreen?(e.exitFullScreen(),!0):e.mozCancelFullScreen?(e.mozCancelFullScreen(),!0):e.webkitExitFullscreen?(e.webkitExitFullscreen(),!0):e.msExitFullscreen?(e.msExitFullscreen(),!0):void 0},t.getIndex=function(e){for(var t=e.parentNode.children,i=0;i<t.length;i++)if(t[i]===e)return i},t.getIndexByCallback=function(e,t){for(var i=e.parentNode,n=i.children,o=0,a=0;a<n.length;a++){var s=n[a];if(r(t)){if(!t(s,i))continue;if(s===e)return o;o++}else if(s===e)return a}return-1},t.getByClass=function(e){return document.getElementsByClassName(e)},t.insertAfter=function(e,t){var i=t.parentNode;i.lastChild==t?i.appendChild(e):this.insertBefore(e,t.nextSibling,i)},t.insertBefore=function(e,t,i){void 0===t?i.appendChild(e):i.insertBefore(e,t)},t.throwError=function(e){throw new Error("WebViewer_Error: ErrorCode: "+e.errorCode+" ErrorString: "+e.message)},t.error=function(e){},t.uid=function(e){var t=Math.random().toString(35).substr(2);return t.length<11&&(t+=Math.random().toString(35).substr(2)),e=Math.max(Math.min(Math.round(e),11),8),t=t.substr(0,e)},t.createCanvas=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return{canvas:e,context:t}},t.deepCopy=function(e){var t=Array.isArray(e)?[]:{};for(var i in e)"object"==typeof e[i]?t[i]=this.deepCopy(e[i]):t[i]=e[i];return t},t.deepClone=function(e){var t;if(this.isArray(e))t=[];else{if(!this.isObject(e))return e;t={}}for(var i in e){var r=e[i];this.isArray(e)||this.isObject(e)?t[i]=this.deepClone(r):t[i]=r}return t},t.checkFocus=function(){var e=document.activeElement;return"INPUT"===e.tagName&&"text"===e.type},t.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame,i=!!t;if(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString())&&(i=!1),i)return t(e);var r={},n=1,o=null,a=+new Date;return function(e,t){var i=n++;return r[i]=e,null===o&&(o=setInterval((function(){var e=+new Date,t=r;for(var i in r={},0,t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i](e),a=e);e-a>2500&&(clearInterval(o),o=null)}),1e3/60)),i}(e)},t.devicePixelRatio=function(){var e=window;return e?e.devicePixelRatio?e.devicePixelRatio:e.screen.deviceXDPI&&e.screen.logicalXDPI?e.screen.deviceXDPI/e.screen.logicalXDPI:1:1},t.formatTime=function(e){var t=new Date,i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return e},t.formatLog=function(e,t,i){var r="";return 1===arguments.length&&(r+=arguments[0]),2!==arguments.length&&3!==arguments.length||(r+="execute "+arguments[0],r+=arguments[1]?" successful":" failed",3===arguments.length&&(r+=": "+arguments[2])),r},t.makePromiseCancelable=function(e){var t=!1;return{promise:new Promise((function(i,r){e.then((function(e){t?r({isCanceled:!0}):i(e)})),e.catch((function(e){r(t?{isCanceled:!0}:e)}))})),cancel:function(){t=!0}}},t.promiseWidthAbort=function(e){var t=null,i=new Promise((function(e,i){t=function(e){void 0===e&&(e="abort"),i(e)}})),r=Promise.race([e,i]);return r.abort=t,r},t.throttle1=function(e,t){var i,r,n,o=0;return function(){var a=+new Date,s=t-(a-o);r=this,n=arguments,s<=0||s>t?(i&&(clearTimeout(i),i=null),o=a,e.apply(r,n)):i||(i=setTimeout((function(){e.apply(r,n),i=null,o=+new Date}),s))}},t.parsePadding=function(e){var t=(e=e.replace(/^\s*|\s*$/g,"")).split(/\s*/).map((function(e){return Number(e)})),i=0,r=0,n=0,o=0;switch(t.length){case 1:i=t[0],r=t[0],n=t[0],o=t[0];break;case 2:i=t[0],r=t[1],n=t[0],o=t[1];break;case 3:i=t[0],r=t[1],n=t[2],o=t[1];break;case 4:i=t[0],r=t[1],n=t[2],o=t[3];break;default:i=0,r=0,n=0,o=0}return{top:i,right:r,bottom:n,left:o}},t.pointToPointDistance=function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}},function(e,t,i){}]); 
}); 
Dynamsoft.AddonReady(function(c,b){if(!c.product.bHTML5Edition){return}var a=function(e){var g=c.html5.Funs,d;var f=function(){this._stwain=e;this._viewer=null};f.prototype._getCameraViewer=function(){if(this._viewer==null){this._viewer=new Dynamsoft.CameraViewer();this._stwain.Viewer._webViewer.bindCamera()}return this._viewer};f.prototype._checkLic=function(){var h=true;if(!c.License.checkProductKey(this._stwain,{Webcam:true},true)){h=false}if(h&&!c.License.checkProductKey(this._stwain,{Webcam:true,Wasm:true},true)){h=false}if(h){return false}else{return{code:this._stwain._errorCode,message:this._stwain._errorString}}};f.prototype.getSourceList=function(){var h=this._checkLic();if(h){return c.Promise.reject(h)}return this._getCameraViewer().getSourceList()};f.prototype.selectSource=function(h){var i=this._checkLic();if(i){return c.Promise.reject(i)}this._getCameraViewer().hide();return this._getCameraViewer().selectSource(h)};f.prototype.closeSource=function(){var i=this._checkLic();if(i){return c.Promise.reject(i)}this._getCameraViewer().hide();var h=this._getCameraViewer().closeSource();this._stwain.Viewer.render();return h};f.prototype.play=function(j,l,p){var k=this._checkLic(),h,o;if(k){return c.Promise.reject(k)}if(this._stwain._ImgManager.getView().GetWebViewer().bShowImageEditForFullScreen){c.Errors.ImageEditorOpenCannotPlayVideo(this._stwain);return c.Promise.reject({code:this._stwain._errorCode,message:this._stwain._errorString})}var m=j;if(!m){if(this._stwain.Viewer.bOnlyShowThumbnailsView||!this._stwain.Viewer._webViewer.myViewer.showMain){var n=c.one(["#showImageArea",this._stwain.Viewer.idPostfix].join(""));if(n&&n.length>0){if(n[0].className.indexOf("DVS_disabled")<0){m=n[0]}}}else{var i=c.one(["#container",this._stwain.Viewer.idPostfix].join(""));if(i&&i.length>0){if(i[0].className.indexOf("DVS_disabled")<0){m=i[0]}}}}if(!m){this._getCameraViewer().unbindUI();this._getCameraViewer().closeSource().then(function(){},function(){})}else{if(typeof l=="object"){h=l.width;o=l.height}this._getCameraViewer().show()}return this._getCameraViewer().play(m,h,o,p)};f.prototype.pause=function(){return this._getCameraViewer().pause()};f.prototype.resume=function(){return this._getCameraViewer().resume()};f.prototype.getStatus=function(){return this._getCameraViewer().getStatus()};f.prototype.capture=function(){var i=this._checkLic(),h=this._stwain;if(i){return c.Promise.reject(i)}return this._getCameraViewer().capture().then(function(j){return new c.Promise(function(o,n){var k=j,l=-1,m=Dynamsoft.EnumDWT_ImageType;if(h._bLocalService){if(c.isString(k.type)){if(k.type=="application/pdf"){l=m.IT_PDF}else{if(k.type=="image/png"){l=m.IT_PNG}else{if(k.type=="image/jpeg"){l=m.IT_JPG}else{if(k.type=="image/bmp"){l=m.IT_BMP}else{if(k.type=="image/tiff"){l=m.IT_TIF}else{if(k.type=="image/jp2"){l=m.IT_J2K}}}}}}}h.__LoadImageFromBytes(k,l,"",true,function(){o(k)},function(q,p){n({code:q,message:p})})}else{h._innerSendToMobile("LoadImageFromBinary",[k],0,function(){o(k)},function(q,p){n({code:q,message:p})})}})})};f.prototype.stop=function(){this._getCameraViewer().hide();return this._getCameraViewer().stop()};f.prototype.show=function(){return this._getCameraViewer().show()};f.prototype.hide=function(){return this._getCameraViewer().hide()};f.prototype.getCurrentResolution=function(){return this._getCameraViewer().getCurrentResolution()};f.prototype.getCurrentSource=function(){return this._getCameraViewer().getCurrentSource()};f.prototype.getResolution=function(){var h=this._checkLic();if(h){return c.Promise.reject(h)}return this._getCameraViewer().getResolution()};f.prototype.setResolution=function(h){var i=this._checkLic();if(i){return c.Promise.reject(i)}return this._getCameraViewer().setResolution(h)};f.prototype.setResolution=function(h){var i=this._checkLic();if(i){return c.Promise.reject(i)}return this._getCameraViewer().setResolution(h)};f.prototype.showVideo=function(j,h,l,i){var k=this._checkLic();if(k){return c.Promise.reject(k)}this._getCameraViewer();return this._stwain.Viewer._webViewer.showVideo(j,h,l,i)};f.prototype.closeVideo=function(){var h=this._checkLic();if(h){return c.Promise.reject(h)}return this._stwain.Viewer._webViewer.closeVideo()};f.prototype.on=function(h,i){var j=this;if(h!="video-closed"&&h!="video-error"){c.Errors.EventNotExist(this._stwain);return}if(!c.isFunction(i)){c.Errors.CallbackNotAFunction(j._stwain);return}this._stwain.Viewer._webViewer.on(h,i)};f.prototype.off=function(h,i){if(h!="video-closed"||h!="video-error"){c.Errors.EventNotExist(this._stwain);return}if(c.isUndefined(i)){this._stwain.Viewer._webViewer.off(h)}else{if(!c.isFunction(i)){c.Errors.CallbackNotAFunction(this._stwain);return}this._stwain.Viewer._webViewer.off(h,i)}};e.__addon=e.__addon||{};e.__addon.Camera=new f()};if(c.DynamicLoadAddonFuns){c.DynamicLoadAddonFuns.push(a)}}); 
// @Tue 07/21/2020 145010 
/*!
* Dynamsoft JavaScript Library
* Product: Dynamsoft Upload
* Web Site: http://www.dynamsoft.com
*
* Copyright 2020, Dynamsoft Corporation 
* Author: Dynamsoft Support Team
* Version: 1.6.0.0428
*/
;var Dynamsoft=window.Dynamsoft||{Lib:{}};(function(c){var d=c.WebTwainEnv||(c.WebTwainEnv={});d.initQueue=[];d.inited=!1;c.initOrder=c.initOrder||[]})(Dynamsoft);var Dynamsoft=Dynamsoft||{};(function(e,b,a){var c=20200521;if(b._preDefine_ver){if(b._preDefine_ver>=c){return}}b._preDefine_ver=c;var d=function(g,j){for(var h in j){if(j.hasOwnProperty(h)){g[h]=j[h]}}return g},f=function(j){if(null==j||"object"!=typeof j){return j}var k,h,g;if(j instanceof Date){k=new Date();k.setTime(j.getTime());return k}else{if(j instanceof Array){k=[];g=j.length;for(h=0;h<g;h++){k[h]=f(j[h])}return k}else{if(j instanceof Object){k={};for(h in j){if(j.hasOwnProperty(h)){k[h]=f(j[h])}}return k}else{return 0}}}};if(!b.Lib){b.Lib={}}d(b.Lib,{win:e,doc:e.document,debug:!1,nil:a,mix:d,clone:f,keys:Object.keys,guid:function(l){var k=[],g="0123456789abcdef",j,h;for(j=0;j<8;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");for(j=0;j<4;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-4");for(j=0;j<3;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");h=g.substr(Math.floor(Math.random()*16),1);h=g.substr((h&3)|8,1);k.push(h);for(j=0;j<3;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.push("-");for(j=0;j<8;j++){k.push(g.substr(Math.floor(Math.random()*16),1))}k.unshift(l);return k.join("")},now:Date.now||function(){return +new Date()},noop:function(){}})})(typeof window!=="undefined"?window:this,Dynamsoft);(function(d){var b=!({toString:1}.propertyIsEnumerable("toString")),c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function a(f,e){return({}).hasOwnProperty.call(f,e)}d.keys=Object.keys||function(h){var e=[],g,f;for(g in h){if(a(h,g)){e.push(g)}}if(b){for(f=c.length-1;f>=0;f--){g=c[f];if(a(h,g)){e.push(g)}}}return e}})(Dynamsoft.Lib);(function(j,k){var f=20200716;if(j._isXXX_ver){if(j._isXXX_ver>=f){return}}j._isXXX_ver=f;var o=j.mix,l,g,i=!1,e=!0,d=i,c={}.hasOwnProperty,n={},m=(typeof HTMLElement==="object");function h(p){return p===k}function a(p){return p!==k}o(j,{isDef:a,isUndef:h,isUndefined:h,isNull:function(p){return(p===null)},isNaN:function(p){return isNaN(p)},type:function(p){if(p===null||p===k){return String(p)}return n[{}.toString.call(p)]||"object"},isPlainObject:function(s){if(!s||j.type(s)!=="object"||s.nodeType||s.window==s){return i}var p,q;try{if((q=s.constructor)&&!c(s,"constructor")&&!c(q.prototype,"isPrototypeOf")){return i}}catch(r){return i}for(p in s){}return(h(p)||c(s,p))},isDOM:function(p){return m?(p instanceof HTMLElement):p&&typeof p==="object"&&(p.nodeType===1||p.nodeType===9)&&typeof p.nodeName==="string"},isDOMInBody:function(q){var p=q;if(j.isDOM(q)){while(!p&&p!=document.body){p=p.parentNode}}else{p=0}return !!p}});function b(p,q){n["[object "+p+"]"]=(q=p.toLowerCase());j["is"+p]=function(r){return j.type(r)===q}}b("Function");j.each=l=function(t,v,p){if(t){var w,r,x,u=0,q=t.length,s=h(q)||j.isFunction(t);p=p||null;if(s){x=j.keys(t);for(;u<x.length;u++){w=x[u];if(v.call(p,t[w],w,t)===i){break}}}else{for(r=t[0];u<q;r=t[++u]){if(v.call(p,r,u,t)===i){break}}}}return t};g=["String","Object","Boolean","Number"];if(Array.isArray){j.isArray=Array.isArray}else{g.push("Array")}l(g,b)})(Dynamsoft.Lib);(function(c){var a=c.mix,b=c.win,e;var d=20200521;if(c._log_ver){if(c.isNumber(c._log_ver)&&c._log_ver>=d){return}}c._log_ver=d;if(c.isDef(b.console)){e=b.console;if(!c.isFunction(e.log)||!c.isFunction(e.error)){e=false}}a(c,{log:function(f){if(c.debug&&e){e.log(f)}},error:function(f){if(c.debug&&e){e.error(f)}},getLogger:function(){var f=c.log;return{warn:f,log:f,info:f,debug:f}}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._random_ver){if(b._random_ver>=a){return}}b._random_ver=a;b.getRandom=function(){var d=b.now()%10000,c=[],f;for(var e=0;e<5;e++){f=Math.floor(Math.random()*10);if(e==0&&f==0){e=-1;continue}c.push(f)}if(d<10){c.push("000")}else{if(d<100){c.push("00")}else{if(d<1000){c.push("0")}}}c.push(d);return c.join("")}})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._strUtil_ver){if(b.isNumber(b._strUtil_ver)&&b._strUtil_ver>=a){return}}b._strUtil_ver=a;b.mix(b,{startsWith:function(d,c){return d.lastIndexOf(c,0)===0},endsWith:function(e,d){var c=e.length-d.length;return c>=0&&e.indexOf(d,c)===c},replaceAll:function(e,d,c){return e.replace(new RegExp(d,"gi"),c)},upperCaseFirst:function(c){return c.charAt(0).toUpperCase()+c.substr(1)},makeArray:function(h){if(h==null){return[]}if(b.isArray(h)){return h}var c=typeof h.length,g=typeof h;if(c!=="number"||h.alert||g==="string"||(g==="function"&&!("item" in h&&c==="number"))){return[h]}var e=[];for(var f=0,d=h.length;f<d;f++){e[f]=h[f]}return e}})})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._extend_ver){if(b.isNumber(b._extend_ver)&&b._extend_ver>=a){return}}b._extend_ver=a;b.extend=function(c,d){var e=function(){c.apply(this,arguments);if(d){d.apply(this,arguments)}};b.each(c.prototype,function(g,f){e.prototype[f]=g});e.prototype.constructor=e;return e}})(Dynamsoft.Lib);(function(c){var a=20200521;if(c._attribute_ver){if(c.isNumber(c._attribute_ver)&&c._attribute_ver>=a){return}}c._attribute_ver=a;function b(e){var d=this,f=d.constructor;d.__attrs={};d.__attrVals={};d.userConfig=e;while(f){d.addAttrs(f.ATTRS);f=f.superclass?f.superclass.constructor:null}c.mix(d.__attrs,e)}c.mix(b.prototype,{get:function(e){var d=this;if(e in d.__attrs){return d.__attrs[e]}return""},set:function(f,e){var d=this;if(f in d.__attrs){d.__attrs[f]=e}},addAttrs:function(d){c.mix(this.__attrs,d)}});b.extend=function(f){var d=this,g,e;f=f||{};if(f.constructor){g=f.constructor}e=c.extend(d,g);c.mix(e,f);return e};c.Attributes=b})(Dynamsoft.Lib);(function(h){var m=20200521;if(h._json_ver){if(h._json_ver>=m){return}}h._json_ver=m;var j=h.win.JSON;if(j&&j.parse&&j.stringify){h.parse=j.parse;h.stringify=j.stringify;return}var l=(function(){var q={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},p={},r=/["\b\f\n\r\t\x00-\x1f]/g,o=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;h.each(q,function(s,t){p[s]=t});p["\\/"]="/";p["\\\\"]="\\";return{quote:function(s){return'"'+s.replace(r,function(t){var u;if(!(u=q[t])){u="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(0-4)}return u})+'"'},unQuote:function(s){return s.slice(1,s.length-1).replace(o,function(t){var u;if(!(u=p[t])){u=String.fromCharCode(parseInt(t.slice(2),16))}return u})}}})(),i;function b(o){return o<10?"0"+o:o}function f(F,z,r,E,D,t){var u=t;t+=E;var v,q,x=0,s;if(r!==undefined){v=r}else{v=h.keys(F)}var C=[];for(q=v.length;x<q;x++){s=v[x];var o=i(s,F,z,r,E,D,t);if(o!==undefined){var w=l.quote(s);w+=":";if(E){w+=" "}w+=o;C[C.length]=w}}var A;if(!C.length){A="{}"}else{if(!E){A="{"+C.join(",")+"}"}else{var y=",\n"+t;var B=C.join(y);A="{\n"+t+B+"\n"+u+"}"}}return A}function n(B,t,p,A,z,q){var r=q;q+=A;var y=[];var v=B.length;var u=0;while(u<v){var o=i(String(u),B,t,p,A,z,q);if(o===undefined){y[y.length]="null"}else{y[y.length]=o}++u}var w;if(!y.length){w="[]"}else{if(!A){w="["+y.join(",")+"]"}else{var s="\n,"+q;var x=y.join(s);w="[\n"+q+x+"\n"+r+"]"}}return w}i=function(r,q,u,s,v,p,o){var t=q[r];if(t&&typeof t==="object"){if(typeof t.toJSON==="function"){t=t.toJSON(r)}else{if(t instanceof Date){t=isFinite(t.valueOf())?t.getUTCFullYear()+"-"+b(t.getUTCMonth()+1)+"-"+b(t.getUTCDate())+"T"+b(t.getUTCHours())+":"+b(t.getUTCMinutes())+":"+b(t.getUTCSeconds())+"Z":null}else{if(t instanceof String||t instanceof Number||t instanceof Boolean){t=t.valueOf()}}}}if(u!==undefined){t=u.call(q,r,t)}switch(typeof t){case"number":return isFinite(t)?String(t):"null";case"string":return l.quote(t);case"boolean":return String(t);case"object":if(!t){return"null"}if(h.isArray(t)){return n(t,u,s,v,p,o)}return f(t,u,s,v,p,o)}return undefined};h.stringify=function(r,o,q){var t="";var p,s;if(o){if(typeof o==="function"){s=o}else{if(h.isArray(o)){p=o}}}if(typeof q==="number"){q=Math.min(10,q);t=new Array(q+1).join(" ")}else{if(typeof q==="string"){t=q.slice(0,10)}}return i("",{"":r},s,p,t,[],"")};var c={},d={SHIFT_TYPE:1,REDUCE_TYPE:2,ACCEPT_TYPE:0,TYPE_INDEX:0,PRODUCTION_INDEX:1,TO_INDEX:2},a;c.yy={unQuote:l.unQuote};a=function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)};a.prototype={constructor:function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)},resetInput:function(o){h.mix(this,{input:o,matched:"",stateStack:[a.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var o=this,p=o.stateStack[o.stateStack.length-1],q=[];p=o.mapState(p);h.each(o.rules,function(s){var t=s.state||s[3];if(!t){if(p==a.STATIC.INITIAL){q.push(s)}}else{if(h.inArray(p,t)){q.push(s)}}});return q},pushState:function(o){this.stateStack.push(o)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var q=this,s=a.STATIC.DEBUG_CONTEXT_LIMIT,o=q.matched,r=q.match,p=q.input;o=o.slice(0,o.length-r.length);var u=(o.length>s?"...":"")+o.slice(-s).replace(/\n/," "),t=r+p;t=t.slice(0,s)+(t.length>s?"...":"");return u+t+"\n"+new Array(u.length+1).join("-")+"^"},mapSymbol:function(q){var o=this,p=o.symbolMap;if(!p){return q}return p[q]||(p[q]=(++o.symbolId))},mapReverseSymbol:function(p){var o=this,r=o.symbolMap,q,s=o.reverseSymbolMap;if(!s&&r){s=o.reverseSymbolMap={};h.each(r,function(u,t){s[u]=t})}if(s){return s[p]}else{return p}},mapState:function(q){var o=this,p=o.stateMap;if(!p){return q}return p[q]||(p[q]=(++o.stateId))},lex:function(){var y=this,w=y.input,r,v,o,t,z,x=y.getCurrentRules();y.match=y.text="";if(!w){return y.mapSymbol(a.STATIC.END_TAG)}for(r=0;r<x.length;r++){v=x[r];var u=v.regexp||v[1],p=v.token||v[0],q=v.action||v[2]||undefined;if((o=w.match(u))){z=o[0].match(/\n.*/g);if(z){y.lineNumber+=z.length}h.mix(y,{firstLine:y.lastLine,lastLine:y.lineNumber+1,firstColumn:y.lastColumn,lastColumn:z?z[z.length-1].length-1:y.lastColumn+o[0].length});var s;s=y.match=o[0];y.matches=o;y.text=s;y.matched+=s;t=q&&q.call(y);if(t===undefined){t=p}else{t=y.mapSymbol(t)}w=w.slice(s.length);y.input=w;if(t){return t}else{return y.lex()}}}h.error("lex error at line "+y.lineNumber+":\n"+y.showDebugInfo());return undefined}};a.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var e=new a({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});c.lexer=e;e.symbolMap={"$EOF":1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,"$START":13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20};c.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return this.$1==="true"}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){this.$1[this.$1.length]=this.$3;return this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var o={};o[this.$1.key]=this.$1.value;return o}],[20,[20,3,19],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]];c.table={gotos:{"0":{"14":7,"15":8,"16":9,"17":10},"2":{"15":12,"16":9,"17":10,"18":13},"3":{"19":16,"20":17},"18":{"15":23,"16":9,"17":10},"20":{"15":24,"16":9,"17":10},"21":{"19":25}},action:{"0":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"1":{"1":[2,2,0],"3":[2,2,0],"6":[2,2,0],"8":[2,2,0]},"2":{"2":[1,0,1],"5":[1,0,2],"6":[1,0,11],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"3":{"2":[1,0,14],"8":[1,0,15]},"4":{"1":[2,3,0],"3":[2,3,0],"6":[2,3,0],"8":[2,3,0]},"5":{"1":[2,6,0],"3":[2,6,0],"6":[2,6,0],"8":[2,6,0]},"6":{"1":[2,7,0],"3":[2,7,0],"6":[2,7,0],"8":[2,7,0]},"7":{"1":[0,0,0]},"8":{"1":[2,1,0]},"9":{"1":[2,4,0],"3":[2,4,0],"6":[2,4,0],"8":[2,4,0]},"10":{"1":[2,5,0],"3":[2,5,0],"6":[2,5,0],"8":[2,5,0]},"11":{"1":[2,10,0],"3":[2,10,0],"6":[2,10,0],"8":[2,10,0]},"12":{"3":[2,8,0],"6":[2,8,0]},"13":{"3":[1,0,18],"6":[1,0,19]},"14":{"4":[1,0,20]},"15":{"1":[2,15,0],"3":[2,15,0],"6":[2,15,0],"8":[2,15,0]},"16":{"3":[2,13,0],"8":[2,13,0]},"17":{"3":[1,0,21],"8":[1,0,22]},"18":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"19":{"1":[2,11,0],"3":[2,11,0],"6":[2,11,0],"8":[2,11,0]},"20":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"21":{"2":[1,0,14]},"22":{"1":[2,16,0],"3":[2,16,0],"6":[2,16,0],"8":[2,16,0]},"23":{"3":[2,9,0],"6":[2,9,0]},"24":{"3":[2,12,0],"8":[2,12,0]},"25":{"3":[2,14,0],"8":[2,14,0]}}};c.parse=function g(y){var A=this,o=A.lexer,t,F,E,I=A.table,B=I.gotos,s=I.action,r=A.productions,u=[null],v=[0];o.resetInput(y);while(1){t=v[v.length-1];if(!F){F=o.lex()}if(!F){h.log("it is not a valid input: "+y,"error");return false}E=s[t]&&s[t][F];if(!E){var w=[],D;if(s[t]){h.each(s[t],function(L,M){w.push(A.lexer.mapReverseSymbol(M))})}D="Syntax error at line "+o.lineNumber+":\n"+o.showDebugInfo()+"\nexpect "+w.join(", ");h.log(D);return false}switch(E[d.TYPE_INDEX]){case d.SHIFT_TYPE:v.push(F);u.push(o.text);v.push(E[d.TO_INDEX]);F=null;break;case d.REDUCE_TYPE:var J=r[E[d.PRODUCTION_INDEX]],z=J.symbol||J[0],q=J.action||J[2],C=J.rhs||J[1],H=C.length,G=0,K,x=u[u.length-H];A.$$=x;K=undefined;for(;G<H;G++){A["$"+(H-G)]=u[u.length-1-G]}if(q){K=q.call(A)}if(K!==undefined){x=K}else{x=A.$$}if(H){v=v.slice(0,-1*H*2);u=u.slice(0,-1*H)}v.push(z);u.push(x);var p=B[v[v.length-2]][v[v.length-1]];v.push(p);break;case d.ACCEPT_TYPE:return x}}};function k(w,o,x){var s=w[o],t,v,u;if(typeof s==="object"){if(h.isArray(s)){t=0;v=s.length;var r=[];while(t<v){u=k(s,String(t),x);if(u!==undefined){r[r.length]=u}}s=r}else{var y=h.keys(s);t=0;for(v=y.length;t<v;t++){var q=y[t];u=k(s,q,x);if(u===undefined){delete s[q]}else{s[q]=u}}}}return x.call(w,o,s)}h.parse=function(q,o){var p=c.parse(String(q));if(o){return k({"":p},"",o)}else{return p}}})(Dynamsoft.Lib);(function(e){var d=20200521;if(e._array_ver){if(e._array_ver>=d){return}}e._array_ver=d;var c=Array.prototype,b=c.indexOf,a=c.filter;if(!e.isFunction(b)){b=function(h,i){var g;if(this==null){return -1}var j=Object(this);var f=j.length>>>0;if(f===0){return -1}var l=+i||0;if(Math.abs(l)===Infinity){l=0}if(l>=f){return -1}g=Math.max(l>=0?l:f-Math.abs(l),0);while(g<f){if(g in j&&j[g]===h){return g}g++}return -1}}e.mix(e,{filter:a?function(f,h,g){return a.call(f,h,g||this)}:function(f,i,h){var g=[];e.each(f,function(l,k,j){if(i.call(h||this,l,k,j)){g.push(l)}});return g},indexOf:function(g,f){return b.call(f,g)},uniq:function(l){var k=[],f=l.length;for(var h=0;h<f;h++){for(var g=h+1;g<f;g++){if(l[h]===l[g]){h++;g=h}}k.push(l[h])}return k}})})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._function_ver){if(d._function_ver>=c){return}}d._function_ver=c;var b=Array.prototype,a=Function.prototype;if(!d.isFunction(a.bind)){a.bind=function(g){var f=this;if(1<arguments.length){var e=b.slice.call(arguments,1);return function(){return f.apply(g,arguments.length?e.concat(b.slice.call(arguments)):e)}}return function(){return arguments.length?f.apply(g,arguments):f.call(g)}}}})(Dynamsoft.Lib);(function(f){var d=20200521;if(f._string_ver){if(f._string_ver>=d){return}}f._string_ver=d;var b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,e=String.prototype,c="",a=e.trim;if(!a){a=e.trim=function(){return this.replace(b,c)}}f.trim=function(g){return g==null?c:a.call(g)}})(Dynamsoft.Lib);(function(g,c){var t="",j=!1,f=!0,s=g.getLogger(),l=g.isDef,a=g.each,k="&",m="=",p=16,d={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},o={},h,i,b=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;a(d,function(v,u){o[v]=u});function r(v){var u=typeof v;return v==null||(u!=="object"&&u!=="function")}function q(){if(h){return h}var u=t;a(d,function(v){u+=v+"|"});u=u.slice(0,-1);h=new RegExp(u,"g");return h}function n(){if(i){return i}var u=t;a(o,function(v){u+=v+"|"});u+="&#(\\d{1,5});";i=new RegExp(u,"g");return i}function e(u){return encodeURIComponent(String(u))}g.mix(g,{urlEncode:e,urlDecode:function(u){return decodeURIComponent(u.replace(/\+/g," "))},fromUnicode:function(u){return u.replace(/\\u([a-f\d]{4})/ig,function(v,w){return String.fromCharCode(parseInt(w,p))})},escapeHtml:function(u){return(u+"").replace(q(),function(v){return o[v]})},escapeRegExp:function(u){return u.replace(b,"\\$&")},unEscapeHtml:function(u){return u.replace(n(),function(v,w){return d[v]||String.fromCharCode(+w)})},param:function(y,x,v,u){x=x||k;v=v||m;if(g.isUndef(u)){u=f}var w=[];a(y,function(B,z){var A=e(z);if(r(B)){w.push(A);if(l(B)){w.push(v,e(B+t))}w.push(x)}else{if(g.isArray(B)&&B.length){a(B,function(C){if(r(C)){w.push(A,(u?e("[]"):t));if(l(C)){w.push(v,e(C+t))}w.push(x)}})}}});w.pop();return w.join(t)},unparam:function(B,F,E){if(!g.isString(B)||!(B=g.trim(B))){return{}}F=F||k;E=E||m;var A={},C,u=g.urlDecode,v=B.split(F),D,w,x=0,y=v.length;for(;x<y;++x){C=g.indexOf(E,v[x]);if(C===-1){D=u(v[x]);w=c}else{D=u(v[x].substring(0,C));w=v[x].substring(C+1);try{w=u(w)}catch(z){s.error("decodeURIComponent error : "+w);s.error(z)}if(g.endsWith(D,"[]")){D=D.substring(0,D.length-2)}}if(D in A){if(g.isArray(A[D])){A[D].push(w)}else{A[D]=[A[D],w]}}else{A[D]=w}}return A}})})(Dynamsoft.Lib);(function(d){var c=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function b(j,e){var g=[];for(var f=0;f<j.length;f++){var h=j[f];if(!h||h==="."){continue}if(h===".."){if(g.length&&g[g.length-1]!==".."){g.pop()}else{if(e){g.push("..")}}}else{g.push(h)}}return g}var a=d.Path={resolve:function(){var h="",f,g,e=(arguments),j,k=0;for(g=e.length-1;g>=0&&!k;g--){j=e[g];if(d.isString(j)&&!!j){h=j+"/"+h;k=j.charAt(0)==="/"}}f=b(d.filter(h.split("/"),function(i){return !!i}),!k).join("/");return((k?"/":"")+f)||"."},normalize:function(f){var g=f.charAt(0)==="/",e=f.slice(-1)==="/";f=b(d.filter(f.split("/"),function(h){return !!h}),!g).join("/");if(!f&&!g){f="."}if(f&&e){f+="/"}return(g?"/":"")+f},join:function(){var e=d.makeArray(arguments);return a.normalize(d.filter(e,function(f){return f&&(d.isString(f))}).join("/"))},relative:function(l,k){l=a.normalize(l);k=a.normalize(k);var j=d.filter(l.split("/"),function(m){return !!m}),i=[],f,g,e=d.filter(k.split("/"),function(m){return !!m}),h=Math.min(j.length,e.length);for(f=0;f<h;f++){if(j[f]!==e[f]){break}}g=f;while(f<j.length){i.push("..");f++}i=i.concat(e.slice(g));return i.join("/")},basename:function(h,f){var e=h.match(c)||[],g;g=e[3]||"";if(f&&g&&g.slice(-1*f.length)===f){g=g.slice(0,-1*f.length)}return g},dirname:function(h){var e=h.match(c)||[],f=e[1]||"",g=e[2]||"";if(!f&&!g){return"."}if(g){g=g.substring(0,g.length-1)}return f+g},extname:function(e){return(e.match(c)||[])[4]||""}}})(Dynamsoft.Lib);(function(d,c){function b(e){if(!e._queryMap){e._queryMap=d.unparam(e._query)}}function a(e){this._query=e||""}a.prototype={constructor:a,clone:function(){return new a(this.toString())},reset:function(f){var e=this;e._query=f||"";e._queryMap=null;return e},count:function(){var e=this,f=0;b(e);d.each(e._queryMap,function(g){if(d.isArray(g)){f+=g.length}else{f++}});return f},has:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return f in g}else{return !d.isEmptyObject(g)}},get:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return g[f]}else{return g}},keys:function(){var e=this;b(e);return d.keys(e._queryMap)},set:function(f,g){var e=this,h;b(e);h=e._queryMap;if(d.isString(f)){e._queryMap[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(j,i){h[i]=j})}return e},remove:function(f){var e=this;b(e);if(f){delete e._queryMap[f]}else{e._queryMap={}}return e},add:function(f,h){var e=this,i,g;if(d.isString(f)){b(e);i=e._queryMap;g=i[f];if(d.isUndef(g)){g=h}else{g=[].concat(g).concat(h)}i[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(l,j){e.add(j,l)})}return e},toString:function(e){var f=this;b(f);return d.param(f._queryMap,c,c,e)}};d.uriQuery=a})(Dynamsoft.Lib);(function(j){var h=j.uriQuery,l=j.each,f=j.Path,n=j.getLogger(),o=/[#\/\?@]/g,c=/[#\?]/g,k=/[#@]/g,e=/#/g,g={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},b=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function a(p){return p.length===1?"0"+p:p}function i(q,p){return q.toLowerCase()===p.toLowerCase()}function m(q,p){return encodeURI(q).replace(p,function(r){return"%"+a(r.charCodeAt(0).toString(16))})}function d(r){if(r instanceof d){return r.clone()}var q,p=this;j.mix(p,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""});q=d.getComponents(r);l(q,function(s,t){s=s||"";if(t==="query"){p.query=new h(s)}else{try{s=j.urlDecode(s)}catch(u){n.error(u+"urlDecode error : "+s)}p[t]=s}});return p}d.prototype={constructor:d,clone:function(){var q=new d(),p=this;l(g,function(r,s){q[s]=p[s]});q.query=q.query.clone();return q},resolve:function(t){if(j.isString(t)){t=new d(t)}var r=this,s=0,q,p=["scheme","userInfo","hostname","port","path","query","fragment"],u=r.clone();l(p,function(w){if(w==="path"){if(s){u[w]=t[w]}else{var v=t.path;if(v){s=1;if(!j.startsWith(v,"/")){if(u.hostname&&!u.path){v="/"+v}else{if(u.path){q=u.path.lastIndexOf("/");if(q!==-1){v=u.path.slice(0,q+1)+v}}}}u.path=f.normalize(v)}}}else{if(w==="query"){if(s||t.query.toString()){u.query=t.query.clone();s=1}}else{if(s||t[w]){u[w]=t[w];s=1}}}});return u},getScheme:function(){return this.scheme},setScheme:function(p){this.scheme=p;return this},getHostname:function(){return this.hostname},setHostname:function(p){this.hostname=p;return this},setUserInfo:function(p){this.userInfo=p;return this},getUserInfo:function(){return this.userInfo},setPort:function(p){this.port=p;return this},getPort:function(){return this.port},setPath:function(p){this.path=p;return this},getPath:function(){return this.path},setQuery:function(p){if(j.isString(p)){if(j.startsWith(p,"?")){p=p.slice(1)}p=new h(m(p,k))}this.query=p;return this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(q){var p=this;if(j.startsWith(q,"#")){q=q.slice(1)}p.fragment=q;return p},isSameOriginAs:function(p){var q=this;return i(q.hostname,p.hostname)&&i(q.scheme,p.scheme)&&i(q.port,p.port)},toString:function(s){var r=[],x=this,p,v,y,q,t,u,w;if((p=x.scheme)){r.push(m(p,o));r.push(":")}if((v=x.hostname)){r.push("//");if((w=x.userInfo)){r.push(m(w,o));r.push("@")}r.push(encodeURIComponent(v));if((q=x.port)){r.push(":");r.push(q)}}if((y=x.path)){if(v&&!j.startsWith(y,"/")){y="/"+y}y=f.normalize(y);r.push(m(y,c))}if((u=(x.query.toString.call(x.query,s)))){r.push("?");r.push(u)}if((t=x.fragment)){r.push("#");r.push(m(t,e))}return r.join("")}};d.getComponents=function(s){var r="";s=s||r;var p=s.match(b)||[],q={};l(g,function(t,u){q[u]=p[t]});return q};j.Uri=d})(Dynamsoft.Lib);(function(c,b){var e=c.Lib,d=e.win,a=20200716;if(e._promise_ver){if(e.isNumber(e._promise_ver)&&e._promise_ver>=a){return}}e._promise_ver=a;if(e.isFunction(d.__zone_symbol__Promise)){e.nativePromise=d.__zone_symbol__Promise}if(self&&self.Promise){e.Promise=self.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}else{if(d&&d.Promise){e.Promise=d.Promise;if(!e.nativePromise){e.nativePromise=e.Promise}return}}!function(f){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=f()}else{if("function"==typeof define&&define.amd){define([],f)}else{var g;"undefined"!=typeof window?g=window:"undefined"!=typeof global?g=global:"undefined"!=typeof self&&(g=self),g.Promise=f()}}}(function(){var f,h,i;return function g(l,m,q){function p(o,t){if(!m[o]){if(!l[o]){var v="function"==typeof _dereq_&&_dereq_;if(!t&&v){return v(o,!0)}if(k){return k(o,!0)}var n=new Error("Cannot find module '"+o+"'");throw n.code="MODULE_NOT_FOUND",n}var r=m[o]={exports:{}};l[o][0].call(r.exports,function(s){var u=l[o][1][s];return p(u?u:s)},r,r.exports,g,l,m,q)}return m[o].exports}for(var k="function"==typeof _dereq_&&_dereq_,j=0;j<q.length;j++){p(q[j])}return p}({1:[function(C,y,q){function j(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new x(16),this._normalQueue=new x(16),this._haveDrainedQueues=!1;var l=this;this.drainQueues=function(){l._drainQueues()},this._schedule=k}function m(l,o,p){this._lateQueue.push(l,o,p),this._queueTick()}function w(l,o,p){this._normalQueue.push(l,o,p),this._queueTick()}function A(l){this._normalQueue._pushOne(l),this._queueTick()}function D(l){for(;l.length()>0;){z(l)}}function z(l){var p=l.shift();if("function"!=typeof p){p._settlePromises()}else{var s=l.shift(),o=l.shift();p.call(s,o)}}var v;try{throw new Error}catch(B){v=B}var k=C("./schedule"),x=C("./queue");j.prototype.setScheduler=function(l){var n=this._schedule;return this._schedule=l,this._customScheduler=!0,n},j.prototype.hasCustomScheduler=function(){return this._customScheduler},j.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},j.prototype.fatalError=function(l,n){n?(process.stderr.write("Fatal "+(l instanceof Error?l.stack:l)+"\n"),process.exit(2)):this.throwLater(l)},j.prototype.throwLater=function(l,o){if(1===arguments.length&&(o=l,l=function(){throw o}),"undefined"!=typeof setTimeout){setTimeout(function(){l(o)},0)}else{try{this._schedule(function(){l(o)})}catch(p){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}}},j.prototype.invokeLater=m,j.prototype.invoke=w,j.prototype.settlePromises=A,j.prototype._drainQueues=function(){D(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,D(this._lateQueue)},j.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},j.prototype._reset=function(){this._isTickUsed=!1},y.exports=j,y.exports.firstLineError=v},{"./queue":17,"./schedule":18}],2:[function(j,k,l){k.exports=function(y,v,q,m){var p=!1,u=function(n,o){this._reject(o)},x=function(n,o){o.promiseRejectionQueued=!0,o.bindingPromise._then(u,u,null,this,n)},z=function(n,o){0===(50397184&this._bitField)&&this._resolveCallback(o.target)},w=function(n,o){o.promiseRejectionQueued||this._reject(n)};y.prototype.bind=function(r){p||(p=!0,y.prototype._propagateFrom=m.propagateFromFunction(),y.prototype._boundValue=m.boundValueFunction());var n=q(r),o=new y(v);o._propagateFrom(this,1);var t=this._target();if(o._setBoundTo(n),n instanceof y){var s={promiseRejectionQueued:!1,promise:o,target:t,bindingPromise:n};t._then(v,x,void 0,o,s),n._then(z,w,void 0,o,s),o._setOnCancel(n)}else{o._resolveCallback(t)}return o},y.prototype._setBoundTo=function(n){void 0!==n?(this._bitField=2097152|this._bitField,this._boundTo=n):this._bitField=-2097153&this._bitField},y.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},y.bind=function(o,r){return y.resolve(r).bind(o)}}},{}],3:[function(k,m,q){function l(){try{Promise===j&&(Promise=p)}catch(n){}return j}var p;"undefined"!=typeof Promise&&(p=Promise);var j=k("./promise")();j.noConflict=l,m.exports=j},{"./promise":15}],4:[function(j,k,l){k.exports=function(u,x,t,v){var p=j("./util"),m=p.tryCatch,q=p.errorObj,w=u._async;u.prototype["break"]=u.prototype.cancel=function(){if(!v.cancellation()){return this._warn("cancellation is disabled")}for(var o=this,r=o;o._isCancellable();){if(!o._cancelBy(r)){r._isFollowing()?r._followee().cancel():r._cancelBranched();break}var s=o._cancellationParent;if(null==s||!s._isCancellable()){o._isFollowing()?o._followee().cancel():o._cancelBranched();break}o._isFollowing()&&o._followee().cancel(),o._setWillBeCancelled(),r=o,o=s}},u.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},u.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},u.prototype._cancelBy=function(n){return n===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},u.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},u.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),w.invoke(this._cancelPromises,this,void 0))},u.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},u.prototype._unsetOnCancel=function(){this._onCancelField=void 0},u.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},u.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},u.prototype._doInvokeOnCancel=function(o,y){if(p.isArray(o)){for(var z=0;z<o.length;++z){this._doInvokeOnCancel(o[z],y)}}else{if(void 0!==o){if("function"==typeof o){if(!y){var s=m(o).call(this._boundValue());s===q&&(this._attachExtraTrace(s.e),w.throwLater(s.e))}}else{o._resultCancelled(this)}}}},u.prototype._invokeOnCancel=function(){var n=this._onCancel();this._unsetOnCancel(),w.invoke(this._doInvokeOnCancel,this,n)},u.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},u.prototype._resultCancelled=function(){this.cancel()}}},{"./util":21}],5:[function(j,k,l){k.exports=function(s){function u(o,v,r){return function(C){var n=r._boundValue();o:for(var x=0;x<o.length;++x){var A=o[x];if(A===Error||null!=A&&A.prototype instanceof Error){if(C instanceof A){return p(v).call(n,C)}}else{if("function"==typeof A){var z=p(A).call(n,C);if(z===m){return z}if(z){return p(v).call(n,C)}}else{if(q.isObject(C)){for(var y=t(A),B=0;B<y.length;++B){var w=y[B];if(A[w]!=C[w]){continue o}}return p(v).call(n,C)}}}}return s}}var q=j("./util"),t=j("./es5").keys,p=q.tryCatch,m=q.errorObj;return u}},{"./es5":10,"./util":21}],6:[function(j,k,l){k.exports=function(p){function s(){this._trace=new s.CapturedTrace(q())}function v(){return u?new s:void 0}function q(){var n=m.length-1;return n>=0?m[n]:void 0}var u=!1,m=[];return p.prototype._promiseCreated=function(){},p.prototype._pushContext=function(){},p.prototype._popContext=function(){return null},p._peekContext=p.prototype._peekContext=function(){},s.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,m.push(this._trace))},s.prototype._popContext=function(){if(void 0!==this._trace){var n=m.pop(),o=n._promiseCreated;return n._promiseCreated=null,o}return null},s.CapturedTrace=null,s.create=v,s.deactivateLongStackTraces=function(){},s.activateLongStackTraces=function(){var x=p.prototype._pushContext,r=p.prototype._popContext,o=p._peekContext,t=p.prototype._peekContext,w=p.prototype._promiseCreated;s.deactivateLongStackTraces=function(){p.prototype._pushContext=x,p.prototype._popContext=r,p._peekContext=o,p.prototype._peekContext=t,p.prototype._promiseCreated=w,u=!1},u=!0,p.prototype._pushContext=s.prototype._pushContext,p.prototype._popContext=s.prototype._popContext,p._peekContext=p.prototype._peekContext=q,p.prototype._promiseCreated=function(){var n=this._peekContext();n&&null==n._promiseCreated&&(n._promiseCreated=this)}},s}},{}],7:[function(j,k,l){k.exports=function(a7,aW,aR,aV){function a2(m,n){return{promise:n}}function bb(){return !1}function aQ(m,q,u){var p=this;try{m(q,u,function(n){if("function"!=typeof n){throw new TypeError("onCancel must be a function, got: "+ad.toString(n))}p._attachCancellationCallback(n)})}catch(s){return s}}function a9(m){if(!this._isCancellable()){return this}var n=this._onCancel();void 0!==n?ad.isArray(n)?n.push(m):this._setOnCancel([n,m]):this._setOnCancel(m)}function aY(){return this._onCancelField}function aP(m){this._onCancelField=m}function aU(){this._cancellationParent=void 0,this._onCancelField=void 0}function a6(m,o){if(0!==(1&o)){this._cancellationParent=m;var p=m._branchesRemainingToCancel;void 0===p&&(p=0),m._branchesRemainingToCancel=p+1}0!==(2&o)&&m._isBound()&&this._setBoundTo(m._boundTo)}function a3(m,n){0!==(2&n)&&m._isBound()&&this._setBoundTo(m._boundTo)}function a8(){var m=this._boundTo;return void 0!==m&&m instanceof a7?m.isFulfilled()?m.value():void 0:m}function bc(){this._trace=new au(this._peekContext())}function aO(m,p){if(aS(m)){var q=this._trace;if(void 0!==q&&p&&(q=q._parent),void 0!==q){q.attachExtraTrace(m)}else{if(!m.__stackCleaned__){var o=ax(m);ad.notEnumerableProp(m,"stack",o.message+"\n"+o.stack.join("\n")),ad.notEnumerableProp(m,"__stackCleaned__",!0)}}}}function aL(){this._trace=void 0}function a4(F,B,w,m,v){if(void 0===F&&null!==B&&t){if(void 0!==v&&v._returnedNonUndefined()){return}if(0===(65535&m._bitField)){return}w&&(w+=" ");var y="",D="";if(B._trace){for(var G=B._trace.stack.split("\n"),C=ay(G),x=C.length-1;x>=0;--x){var E=C[x];if(!an.test(E)){var q=E.match(ac);q&&(y="at "+q[1]+":"+q[2]+":"+q[3]+" ");break}}if(C.length>0){for(var A=C[0],x=0;x<G.length;++x){if(G[x]===A){x>0&&(D="\n"+G[x-1]);break}}}}var z="a promise was created in a "+w+"handler "+y+"but was not returned from it, see http://goo.gl/rRqMUw"+D;m._warn(z,!0,B)}}function aX(m,o){var p=m+" is deprecated and will be removed in a future version.";return o&&(p+=" Use "+o+" instead."),ba(p)}function ba(q,v,s){if(aI.warnings){var u,p=new az(q);if(v){s._attachExtraTrace(p)}else{if(aI.longStackTraces&&(u=a7._peekContext())){u.attachExtraTrace(p)}else{var m=ax(p);p.stack=m.message+"\n"+m.stack.join("\n")}}aE("warning",p)||af(p,"",!0)}}function aA(m,o){for(var p=0;p<o.length-1;++p){o[p].push("From previous event:"),o[p]=o[p].join("\n")}return p<o.length&&(o[p]=o[p].join("\n")),m+"\n"+o.join("\n")}function aN(m){for(var n=0;n<m.length;++n){(0===m[n].length||n+1<m.length&&m[n][0]===m[n+1][0])&&(m.splice(n,1),n--)}}function aZ(y){for(var v=y[0],q=1;q<y.length;++q){for(var m=y[q],p=v.length-1,u=v[p],x=-1,z=m.length-1;z>=0;--z){if(m[z]===u){x=z;break}}for(var z=x;z>=0;--z){var w=m[z];if(v[p]!==w){break}v.pop(),p--}v=m}}function ay(p){for(var s=[],v=0;v<p.length;++v){var q=p[v],u="    (No stack trace)"===q||aJ.test(q),m=u&&av(q);u&&!m&&(ab&&" "!==q.charAt(0)&&(q="    "+q),s.push(q))}return s}function a1(m){for(var p=m.stack.replace(/\s+$/g,"").split("\n"),q=0;q<p.length;++q){var o=p[q];if("    (No stack trace)"===o||aJ.test(o)){break}}return q>0&&"SyntaxError"!=m.name&&(p=p.slice(q)),p}function ax(m){var o=m.stack,p=m.toString();return o="string"==typeof o&&o.length>0?a1(m):["    (No stack trace)"],{message:p,stack:"SyntaxError"==m.name?o:ay(o)}}function af(m,q,u){if("undefined"!=typeof console){var p;if(ad.isObject(m)){var s=m.stack;p=q+aK(s,m)}else{p=q+String(m)}"function"==typeof aB?aB(p,u):("function"==typeof console.log||"object"==typeof console.log)&&console.log(p)}}function aM(p,s,v,q){var u=!1;try{"function"==typeof s&&(u=!0,"rejectionHandled"===p?s(q):s(v,q))}catch(m){ar.throwLater(m)}"unhandledRejection"===p?aE(p,v,q)||u||af(v,"Unhandled rejection "):aE(p,q)}function ai(m){var q;if("function"==typeof m){q="[function "+(m.name||"anonymous")+"]"}else{q=m&&"function"==typeof m.toString?m.toString():ad.toString(m);var u=/\[object [a-zA-Z0-9$_]+\]/;if(u.test(q)){try{var p=JSON.stringify(m);q=p}catch(s){}}0===q.length&&(q="(empty array)")}return"(<"+ah(q)+">, no stack trace)"}function ah(m){var n=41;return m.length<n?m:m.substr(0,n-3)+"..."}function ak(){return"function"==typeof aF}function al(m){var n=m.match(aD);return n?{fileName:n[1],line:parseInt(n[2],10)}:void 0}function aC(z,w){if(ak()){for(var q,m,p=(z.stack||"").split("\n"),v=(w.stack||"").split("\n"),y=-1,A=-1,x=0;x<p.length;++x){var u=al(p[x]);if(u){q=u.fileName,y=u.line;break}}for(var x=0;x<v.length;++x){var u=al(v[x]);if(u){m=u.fileName,A=u.line;break}}0>y||0>A||!q||!m||q!==m||y>=A||(av=function(n){if(aw.test(n)){return !0}var o=al(n);return o&&o.fileName===q&&y<=o.line&&o.line<=A?!0:!1})}}function au(m){this._parent=m,this._promisesCreated=0;var n=this._length=1+(void 0===m?0:m._length);aF(this,au),n>32&&this.uncycle()}var am,ao,aB,ae,ar=a7._async,az=j("./errors").Warning,ad=j("./util"),aj=j("./es5"),aS=ad.canAttachTrace,aw=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,an=/\((?:timers\.js):\d+:\d+\)/,ac=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,aJ=null,aK=null,ab=!1,ap=!(0==ad.env("BLUEBIRD_DEBUG")||!ad.env("BLUEBIRD_DEBUG")&&"development"!==ad.env("NODE_ENV")),aq=!(0==ad.env("BLUEBIRD_WARNINGS")||!ap&&!ad.env("BLUEBIRD_WARNINGS")),aa=!(0==ad.env("BLUEBIRD_LONG_STACK_TRACES")||!ap&&!ad.env("BLUEBIRD_LONG_STACK_TRACES")),t=0!=ad.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(aq||!!ad.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){function m(){for(var n=0;n<o.length;++n){o[n]._notifyUnhandledRejection()}p()}function p(){o.length=0}var o=[];ae=function(n){o.push(n),setTimeout(m,1)},aj.defineProperty(a7,"_unhandledRejectionCheck",{value:m}),aj.defineProperty(a7,"_unhandledRejectionClear",{value:p})}(),a7.prototype.suppressUnhandledRejections=function(){var m=this._target();m._bitField=-1048577&m._bitField|524288},a7.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),ae(this))},a7.prototype._notifyUnhandledRejectionIsHandled=function(){aM("rejectionHandled",am,void 0,this)},a7.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},a7.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},a7.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var m=this._settledValue();this._setUnhandledRejectionIsNotified(),aM("unhandledRejection",ao,m,this)}},a7.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},a7.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},a7.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},a7.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},a7.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},a7.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},a7.prototype._warn=function(m,o,p){return ba(m,o,p||this)},a7.onPossiblyUnhandledRejection=function(m){var o=a7._getContext();ao=ad.contextBind(o,m)},a7.onUnhandledRejectionHandled=function(m){var o=a7._getContext();am=ad.contextBind(o,m)};var a5=function(){};a7.longStackTraces=function(){if(ar.haveItemsQueued()&&!aI.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}if(!aI.longStackTraces&&ak()){var m=a7.prototype._captureStackTrace,n=a7.prototype._attachExtraTrace,p=a7.prototype._dereferenceTrace;aI.longStackTraces=!0,a5=function(){if(ar.haveItemsQueued()&&!aI.longStackTraces){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n")}a7.prototype._captureStackTrace=m,a7.prototype._attachExtraTrace=n,a7.prototype._dereferenceTrace=p,aW.deactivateLongStackTraces(),aI.longStackTraces=!1},a7.prototype._captureStackTrace=bc,a7.prototype._attachExtraTrace=aO,a7.prototype._dereferenceTrace=aL,aW.activateLongStackTraces()}},a7.hasLongStackTraces=function(){return aI.longStackTraces&&ak()};var aT={unhandledrejection:{before:function(){var m=ad.global.onunhandledrejection;return ad.global.onunhandledrejection=null,m},after:function(m){ad.global.onunhandledrejection=m}},rejectionhandled:{before:function(){var m=ad.global.onrejectionhandled;return ad.global.onrejectionhandled=null,m},after:function(m){ad.global.onrejectionhandled=m}}},a0=function(){var m=function(q,r){if(!q){return !ad.global.dispatchEvent(r)}var s;try{return s=q.before(),!ad.global.dispatchEvent(r)}finally{q.after(s)}};try{if("function"==typeof CustomEvent){var o=new CustomEvent("CustomEvent");return ad.global.dispatchEvent(o),function(s,v){s=s.toLowerCase();var q={detail:v,cancelable:!0},u=new CustomEvent(s,q);return aj.defineProperty(u,"promise",{value:v.promise}),aj.defineProperty(u,"reason",{value:v.reason}),m(aT[s],u)}}if("function"==typeof Event){var o=new Event("CustomEvent");return ad.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=new Event(s,{cancelable:!0});return q.detail=u,aj.defineProperty(q,"promise",{value:u.promise}),aj.defineProperty(q,"reason",{value:u.reason}),m(aT[s],q)}}var o=document.createEvent("CustomEvent");return o.initCustomEvent("testingtheevent",!1,!0,{}),ad.global.dispatchEvent(o),function(s,u){s=s.toLowerCase();var q=document.createEvent("CustomEvent");return q.initCustomEvent(s,!1,!0,u),m(aT[s],q)}}catch(p){}return function(){return !1}}(),aH=function(){return ad.isNode?function(){return process.emit.apply(process,arguments)}:ad.global?function(m){var o="on"+m.toLowerCase(),p=ad.global[o];return p?(p.apply(ad.global,[].slice.call(arguments,1)),!0):!1}:function(){return !1}}(),aG={promiseCreated:a2,promiseFulfilled:a2,promiseRejected:a2,promiseResolved:a2,promiseCancelled:a2,promiseChained:function(m,o,p){return{promise:o,child:p}},warning:function(m,n){return{warning:n}},unhandledRejection:function(m,o,p){return{reason:o,promise:p}},rejectionHandled:a2},aE=function(m){var p=!1;try{p=aH.apply(null,arguments)}catch(q){ar.throwLater(q),p=!0}var o=!1;try{o=a0(m,aG[m].apply(null,arguments))}catch(q){ar.throwLater(q),o=!0}return o||p};a7.config=function(o){if(o=Object(o),"longStackTraces" in o&&(o.longStackTraces?a7.longStackTraces():!o.longStackTraces&&a7.hasLongStackTraces()&&a5()),"warnings" in o){var q=o.warnings;aI.warnings=!!q,t=aI.warnings,ad.isObject(q)&&"wForgottenReturn" in q&&(t=!!q.wForgottenReturn)}if("cancellation" in o&&o.cancellation&&!aI.cancellation){if(ar.haveItemsQueued()){throw new Error("cannot enable cancellation after promises are in use")}a7.prototype._clearCancellationData=aU,a7.prototype._propagateFrom=a6,a7.prototype._onCancel=aY,a7.prototype._setOnCancel=aP,a7.prototype._attachCancellationCallback=a9,a7.prototype._execute=aQ,ag=a6,aI.cancellation=!0}if("monitoring" in o&&(o.monitoring&&!aI.monitoring?(aI.monitoring=!0,a7.prototype._fireEvent=aE):!o.monitoring&&aI.monitoring&&(aI.monitoring=!1,a7.prototype._fireEvent=bb)),"asyncHooks" in o&&ad.nodeSupportsAsyncResource){var m=aI.asyncHooks,p=!!o.asyncHooks;m!==p&&(aI.asyncHooks=p,p?aR():aV())}return a7},a7.prototype._fireEvent=bb,a7.prototype._execute=function(m,p,q){try{m(p,q)}catch(o){return o}},a7.prototype._onCancel=function(){},a7.prototype._setOnCancel=function(m){},a7.prototype._attachCancellationCallback=function(m){},a7.prototype._captureStackTrace=function(){},a7.prototype._attachExtraTrace=function(){},a7.prototype._dereferenceTrace=function(){},a7.prototype._clearCancellationData=function(){},a7.prototype._propagateFrom=function(m,n){};var ag=a3,av=function(){return !1},aD=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;ad.inherits(au,Error),aW.CapturedTrace=au,au.prototype.uncycle=function(){var B=this._length;if(!(2>B)){for(var x=[],q={},m=0,p=this;void 0!==p;++m){x.push(p),p=p._parent}B=this._length=m;for(var m=B-1;m>=0;--m){var w=x[m].stack;void 0===q[w]&&(q[w]=m)}for(var m=0;B>m;++m){var z=x[m].stack,C=q[z];if(void 0!==C&&C!==m){C>0&&(x[C-1]._parent=void 0,x[C-1]._length=1),x[m]._parent=void 0,x[m]._length=1;var y=m>0?x[m-1]:this;B-1>C?(y._parent=x[C+1],y._parent.uncycle(),y._length=y._parent._length+1):(y._parent=void 0,y._length=1);for(var v=y._length+1,A=m-2;A>=0;--A){x[A]._length=v,v++}return}}}},au.prototype.attachExtraTrace=function(m){if(!m.__stackCleaned__){this.uncycle();for(var q=ax(m),u=q.message,p=[q.stack],s=this;void 0!==s;){p.push(ay(s.stack.split("\n"))),s=s._parent}aZ(p),aN(p),ad.notEnumerableProp(m,"stack",aA(u,p)),ad.notEnumerableProp(m,"__stackCleaned__",!0)}};var aF=function(){var p=/^\s*at\s*/,s=function(n,o){return"string"==typeof n?n:void 0!==o.name&&void 0!==o.message?o.toString():ai(o)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,aJ=p,aK=s;var v=Error.captureStackTrace;return av=function(n){return aw.test(n)},function(n,o){Error.stackTraceLimit+=6,v(n,o),Error.stackTraceLimit-=6}}var q=new Error;if("string"==typeof q.stack&&q.stack.split("\n")[0].indexOf("stackDetection@")>=0){return aJ=/@/,aK=s,ab=!0,function(n){n.stack=(new Error).stack}}var u;try{throw new Error}catch(m){u="stack" in m}return"stack" in q||!u||"number"!=typeof Error.stackTraceLimit?(aK=function(n,o){return"string"==typeof n?n:"object"!=typeof o&&"function"!=typeof o||void 0===o.name||void 0===o.message?ai(o):o.toString()},null):(aJ=p,aK=s,function(n){Error.stackTraceLimit+=6;try{throw new Error}catch(o){n.stack=o.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(aB=function(m){console.warn(m)},ad.isNode&&process.stderr.isTTY?aB=function(m,o){var p=o?"[33m":"[31m";console.warn(p+m+"[0m\n")}:ad.isNode||"string"!=typeof(new Error).stack||(aB=function(m,n){console.warn("%c"+m,n?"color: darkorange":"color: red")}));var aI={warnings:aq,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return aa&&a7.longStackTraces(),{asyncHooks:function(){return aI.asyncHooks},longStackTraces:function(){return aI.longStackTraces},warnings:function(){return aI.warnings},cancellation:function(){return aI.cancellation},monitoring:function(){return aI.monitoring},propagateFromFunction:function(){return ag},boundValueFunction:function(){return a8},checkForgottenReturns:a4,setBounds:aC,warn:ba,deprecated:aX,CapturedTrace:au,fireDomEvent:a0,fireGlobalEvent:aH}}},{"./errors":9,"./es5":10,"./util":21}],8:[function(j,k,l){k.exports=function(m){function o(){return this.value}function p(){throw this.reason}m.prototype["return"]=m.prototype.thenReturn=function(q){return q instanceof m&&q.suppressUnhandledRejections(),this._then(o,void 0,void 0,{value:q},void 0)},m.prototype["throw"]=m.prototype.thenThrow=function(n){return this._then(p,void 0,void 0,{reason:n},void 0)},m.prototype.catchThrow=function(n){if(arguments.length<=1){return this._then(void 0,p,void 0,{reason:n},void 0)}var s=arguments[1],q=function(){throw s};return this.caught(n,q)},m.prototype.catchReturn=function(t){if(arguments.length<=1){return t instanceof m&&t.suppressUnhandledRejections(),this._then(void 0,o,void 0,{value:t},void 0)}var q=arguments[1];q instanceof m&&q.suppressUnhandledRejections();var s=function(){return q};return this.caught(t,s)}}},{}],9:[function(w,J,C){function z(l,m){function o(n){return this instanceof o?(A(this,"message","string"==typeof n?n:m),A(this,"name",l),void (Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new o(n)}return q(o,Error),o}function B(l){return this instanceof B?(A(this,"name","OperationalError"),A(this,"message",l),this.cause=l,this.isOperational=!0,void (l instanceof Error?(A(this,"message",l.message),A(this,"stack",l.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new B(l)}var F,N,x=w("./es5"),L=x.freeze,E=w("./util"),q=E.inherits,A=E.notEnumerableProp,I=z("Warning","warning"),G=z("CancellationError","cancellation error"),K=z("TimeoutError","timeout error"),O=z("AggregateError","aggregate error");try{F=TypeError,N=RangeError}catch(k){F=z("TypeError","type error"),N=z("RangeError","range error")}for(var j="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),H=0;H<j.length;++H){"function"==typeof Array.prototype[j[H]]&&(O.prototype[j[H]]=Array.prototype[j[H]])}x.defineProperty(O.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),O.prototype.isOperational=!0;var D=0;O.prototype.toString=function(){var m=Array(4*D+1).join(" "),s="\n"+m+"AggregateError of:\n";D++,m=Array(4*D+1).join(" ");for(var v=0;v<this.length;++v){for(var p=this[v]===this?"[Circular AggregateError]":this[v]+"",u=p.split("\n"),l=0;l<u.length;++l){u[l]=m+u[l]}p=u.join("\n"),s+=p+"\n"}return D--,s},q(B,Error);var M=Error.__BluebirdErrorTypes__;M||(M=L({CancellationError:G,TimeoutError:K,OperationalError:B,RejectionError:B,AggregateError:O}),x.defineProperty(Error,"__BluebirdErrorTypes__",{value:M,writable:!1,enumerable:!1,configurable:!1})),J.exports={Error:Error,TypeError:F,RangeError:N,CancellationError:M.CancellationError,OperationalError:M.OperationalError,TimeoutError:M.TimeoutError,AggregateError:M.AggregateError,Warning:I}},{"./es5":10,"./util":21}],10:[function(C,y,q){var j=function(){return void 0===this}();if(j){y.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:j,propertyIsWritable:function(l,o){var p=Object.getOwnPropertyDescriptor(l,o);return !(p&&!p.writable&&!p.set)}}}else{var m={}.hasOwnProperty,w={}.toString,A={}.constructor.prototype,D=function(l){var o=[];for(var p in l){m.call(l,p)&&o.push(p)}return o},z=function(l,n){return{value:l[n]}},v=function(l,o,p){return l[o]=p.value,l},B=function(l){return l},k=function(l){try{return Object(l).constructor.prototype}catch(n){return A}},x=function(l){try{return"[object Array]"===w.call(l)}catch(n){return !1}};y.exports={isArray:x,keys:D,names:D,defineProperty:v,getDescriptor:z,freeze:B,getPrototypeOf:k,isES5:j,propertyIsWritable:function(){return !0}}}},{}],11:[function(j,k,l){k.exports=function(A,v,m){function t(o,p,r){this.promise=o,this.type=p,this.handler=r,this.called=!1,this.cancelPromise=null}function x(n){this.finallyHandler=n}function C(n,o){return null!=n.cancelPromise?(arguments.length>1?n.cancelPromise._reject(o):n.cancelPromise._cancel(),n.cancelPromise=null,!0):!1}function E(){return w.call(this,this.promise._target()._settledValue())}function B(n){return C(this,n)?void 0:(z.e=n,z)}function w(r){var G=this.promise,n=this.handler;if(!this.called){this.called=!0;var p=this.isFinallyHandler()?n.call(G._boundValue()):n.call(G._boundValue(),r);if(p===m){return p}if(void 0!==p){G._setReturnedNonUndefined();var s=v(p,G);if(s instanceof A){if(null!=this.cancelPromise){if(s._isCancelled()){var F=new q("late cancellation observer");return G._attachExtraTrace(F),z.e=F,z}s.isPending()&&s._attachCancellationCallback(new x(this))}return s._then(E,B,void 0,this,void 0)}}}return G.isRejected()?(C(this),z.e=r,z):(C(this),r)}var D=j("./util"),q=A.CancellationError,z=D.errorObj,y=j("./catch_filter")(m);return t.prototype.isFinallyHandler=function(){return 0===this.type},x.prototype._resultCancelled=function(){C(this.finallyHandler)},A.prototype._passThrough=function(o,s,u,p){return"function"!=typeof o?this.then():this._then(u,p,void 0,new t(this,s,o),void 0)},A.prototype.lastly=A.prototype["finally"]=function(n){return this._passThrough(n,0,w,w)},A.prototype.tap=function(n){return this._passThrough(n,1,w)},A.prototype.tapCatch=function(F){var J=arguments.length;if(1===J){return this._passThrough(F,1,void 0,w)}var H,I=new Array(J-1),u=0;for(H=0;J-1>H;++H){var p=arguments[H];if(!D.isObject(p)){return A.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+D.classString(p)))}I[u++]=p}I.length=u;var G=arguments[H];return this._passThrough(y(I,G,this),1,void 0,w)},t}},{"./catch_filter":5,"./util":21}],12:[function(j,k,l){k.exports=function(s,u,q,t,p){var m=j("./util");m.canEvaluate,m.tryCatch,m.errorObj;s.join=function(){var n,w=arguments.length-1;if(w>0&&"function"==typeof arguments[w]){n=arguments[w];var v}var x=[].slice.call(arguments);n&&x.pop();var v=new u(x).promise();return void 0!==n?v.spread(n):v}}},{"./util":21}],13:[function(j,k,l){k.exports=function(u,w,t,v,p){var m=j("./util"),q=m.tryCatch;u.method=function(n){if("function"!=typeof n){throw new u.TypeError("expecting a function but got "+m.classString(n))}return function(){var x=new u(w);x._captureStackTrace(),x._pushContext();var y=q(n).apply(this,arguments),s=x._popContext();return p.checkForgottenReturns(y,s,"Promise.method",x),x._resolveFromSyncValue(y),x}},u.attempt=u["try"]=function(s){if("function"!=typeof s){return v("expecting a function but got "+m.classString(s))}var x=new u(w);x._captureStackTrace(),x._pushContext();var z;if(arguments.length>1){p.deprecated("calling Promise.try with more than 1 argument");var n=arguments[1],o=arguments[2];z=m.isArray(n)?q(s).apply(o,n):q(s).call(o,n)}else{z=q(s)()}var y=x._popContext();return p.checkForgottenReturns(z,y,"Promise.try",x),x._resolveFromSyncValue(z),x},u.prototype._resolveFromSyncValue=function(n){n===m.errorObj?this._rejectCallback(n.e,!1):this._resolveCallback(n,!0)}}},{"./util":21}],14:[function(B,x,q){function j(l){return l instanceof Error&&A.getPrototypeOf(l)===Error.prototype}function m(p){var r;if(j(p)){r=new v(p),r.name=p.name,r.message=p.message,r.stack=p.stack;for(var u=A.keys(p),s=0;s<u.length;++s){var l=u[s];k.test(l)||(r[l]=p[l])}return r}return z.markAsOriginatingFromRejection(p),p}function w(l,n){return function(t,s){if(null!==l){if(t){var p=m(C(t));l._attachExtraTrace(p),l._reject(p)}else{if(n){var o=[].slice.call(arguments,1);l._fulfill(o)}else{l._fulfill(s)}}l=null}}}var z=B("./util"),C=z.maybeWrapAsError,y=B("./errors"),v=y.OperationalError,A=B("./es5"),k=/^(?:name|message|stack|cause)$/;x.exports=w},{"./errors":9,"./es5":10,"./util":21}],15:[function(j,k,l){k.exports=function(){function ai(){}function af(m,n){if(null==m||m.constructor!==ah){throw new am("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}if("function"!=typeof n){throw new am("expecting a function but got "+aq.classString(n))}}function ah(m){m!==t&&af(this,m),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(m),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function an(m){this.promise._resolveCallback(m)}function av(m){this.promise._rejectCallback(m,!1)}function ae(m){var n=new ah(t);n._fulfillmentHandler0=m,n._rejectionHandler0=m,n._promise0=m,n._receiver0=m}var at=function(){return new am("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},ak=function(){return new ah.PromiseInspection(this._target())},ad=function(m){return ah.reject(new am(m))},ag={},aq=j("./util");aq.setReflectHandler(ak);var ao=function(){var m=process.domain;return void 0===m?null:m},ar=function(){return null},aw=function(){return{domain:ao(),async:null}},ac=aq.isNode&&aq.nodeSupportsAsyncResource?j("async_hooks").AsyncResource:null,Z=function(){return{domain:ao(),async:new ac("Bluebird::Promise")}},ap=aq.isNode?aw:ar;aq.notEnumerableProp(ah,"_getContext",ap);var aj=function(){ap=Z,aq.notEnumerableProp(ah,"_getContext",Z)},au=function(){ap=aw,aq.notEnumerableProp(ah,"_getContext",aw)},W=j("./es5"),ab=j("./async"),al=new ab;W.defineProperty(ah,"_async",{value:al});var V=j("./errors"),am=ah.TypeError=V.TypeError;ah.RangeError=V.RangeError;var Q=ah.CancellationError=V.CancellationError;ah.TimeoutError=V.TimeoutError,ah.OperationalError=V.OperationalError,ah.RejectionError=V.OperationalError,ah.AggregateError=V.AggregateError;var t=function(){},aa={},D={},z=j("./thenables")(ah,t),G=j("./promise_array")(ah,t,z,ad,ai),I=j("./context")(ah),Y=(I.create,j("./debuggability")(ah,I,aj,au)),M=(Y.CapturedTrace,j("./finally")(ah,z,D)),J=j("./catch_filter")(D),K=j("./nodeback"),X=aq.errorObj,q=aq.tryCatch;return ah.prototype.toString=function(){return"[object Promise]"},ah.prototype.caught=ah.prototype["catch"]=function(p){var u=arguments.length;if(u>1){var w,s=new Array(u-1),v=0;for(w=0;u-1>w;++w){var m=arguments[w];if(!aq.isObject(m)){return ad("Catch statement predicate: expecting an object but got "+aq.classString(m))}s[v++]=m}if(s.length=v,p=arguments[w],"function"!=typeof p){throw new am("The last argument to .catch() must be a function, got "+aq.toString(p))}return this.then(void 0,J(s,p,this))}return this.then(void 0,p)},ah.prototype.reflect=function(){return this._then(ak,ak,void 0,this,void 0)},ah.prototype.then=function(m,o){if(Y.warnings()&&arguments.length>0&&"function"!=typeof m&&"function"!=typeof o){var p=".then() only accepts functions but was passed: "+aq.classString(m);arguments.length>1&&(p+=", "+aq.classString(o)),this._warn(p)}return this._then(m,o,void 0,void 0,void 0)},ah.prototype.done=function(m,o){var p=this._then(m,o,void 0,void 0,void 0);p._setIsFinal()},ah.prototype.spread=function(m){return"function"!=typeof m?ad("expecting a function but got "+aq.classString(m)):this.all()._then(m,void 0,void 0,aa,void 0)},ah.prototype.toJSON=function(){var m={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(m.fulfillmentValue=this.value(),m.isFulfilled=!0):this.isRejected()&&(m.rejectionReason=this.reason(),m.isRejected=!0),m},ah.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new G(this).promise()},ah.prototype.error=function(m){return this.caught(aq.originatesFromRejection,m)},ah.getNewLibraryCopy=k.exports,ah.is=function(m){return m instanceof ah},ah.fromNode=ah.fromCallback=function(m){var p=new ah(t);p._captureStackTrace();var s=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,o=q(m)(K(p,s));return o===X&&p._rejectCallback(o.e,!0),p._isFateSealed()||p._setAsyncGuaranteed(),p},ah.all=function(m){return new G(m).promise()},ah.cast=function(m){var n=z(m);return n instanceof ah||(n=new ah(t),n._captureStackTrace(),n._setFulfilled(),n._rejectionHandler0=m),n},ah.resolve=ah.fulfilled=ah.cast,ah.reject=ah.rejected=function(m){var n=new ah(t);return n._captureStackTrace(),n._rejectCallback(m,!0),n},ah.setScheduler=function(m){if("function"!=typeof m){throw new am("expecting a function but got "+aq.classString(m))}return al.setScheduler(m)},ah.prototype._then=function(H,A,v,m,x){var E=void 0!==x,L=E?x:new ah(t),C=this._target(),w=C._bitField;E||(L._propagateFrom(this,3),L._captureStackTrace(),void 0===m&&0!==(2097152&this._bitField)&&(m=0!==(50397184&w)?this._boundValue():C===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,L));var F=ap();if(0!==(50397184&w)){var o,y,B=C._settlePromiseCtx;0!==(33554432&w)?(y=C._rejectionHandler0,o=H):0!==(16777216&w)?(y=C._fulfillmentHandler0,o=A,C._unsetRejectionIsUnhandled()):(B=C._settlePromiseLateCancellationObserver,y=new Q("late cancellation observer"),C._attachExtraTrace(y),o=A),al.invoke(B,C,{handler:aq.contextBind(F,o),promise:L,receiver:m,value:y})}else{C._addCallbacks(H,A,L,m,F)}return L},ah.prototype._length=function(){return 65535&this._bitField},ah.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},ah.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},ah.prototype._setLength=function(m){this._bitField=-65536&this._bitField|65535&m},ah.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},ah.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},ah.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},ah.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},ah.prototype._isFinal=function(){return(4194304&this._bitField)>0},ah.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},ah.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},ah.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},ah.prototype._setAsyncGuaranteed=function(){if(!al.hasCustomScheduler()){var m=this._bitField;this._bitField=m|(536870912&m)>>2^134217728}},ah.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},ah.prototype._receiverAt=function(m){var n=0===m?this._receiver0:this[4*m-4+3];return n===ag?void 0:void 0===n&&this._isBound()?this._boundValue():n},ah.prototype._promiseAt=function(m){return this[4*m-4+2]},ah.prototype._fulfillmentHandlerAt=function(m){return this[4*m-4+0]},ah.prototype._rejectionHandlerAt=function(m){return this[4*m-4+1]},ah.prototype._boundValue=function(){},ah.prototype._migrateCallback0=function(m){var s=(m._bitField,m._fulfillmentHandler0),v=m._rejectionHandler0,p=m._promise0,u=m._receiverAt(0);void 0===u&&(u=ag),this._addCallbacks(s,v,p,u,null)},ah.prototype._migrateCallbackAt=function(p,u){var w=p._fulfillmentHandlerAt(u),s=p._rejectionHandlerAt(u),v=p._promiseAt(u),m=p._receiverAt(u);void 0===m&&(m=ag),this._addCallbacks(w,s,v,m,null)},ah.prototype._addCallbacks=function(s,v,x,u,w){var p=this._length();if(p>=65531&&(p=0,this._setLength(0)),0===p){this._promise0=x,this._receiver0=u,"function"==typeof s&&(this._fulfillmentHandler0=aq.contextBind(w,s)),"function"==typeof v&&(this._rejectionHandler0=aq.contextBind(w,v))}else{var m=4*p-4;this[m+2]=x,this[m+3]=u,"function"==typeof s&&(this[m+0]=aq.contextBind(w,s)),"function"==typeof v&&(this[m+1]=aq.contextBind(w,v))}return this._setLength(p+1),p},ah.prototype._proxy=function(m,n){this._addCallbacks(void 0,void 0,n,m,null)},ah.prototype._resolveCallback=function(u,x){if(0===(117506048&this._bitField)){if(u===this){return this._rejectCallback(at(),!1)}var y=z(u,this);if(!(y instanceof ah)){return this._fulfill(u)}x&&this._propagateFrom(y,2);var w=y._target();if(w===this){return void this._reject(at())}var p=w._bitField;if(0===(50397184&p)){var o=this._length();o>0&&w._migrateCallback0(this);for(var v=1;o>v;++v){w._migrateCallbackAt(this,v)}this._setFollowing(),this._setLength(0),this._setFollowee(y)}else{if(0!==(33554432&p)){this._fulfill(w._value())}else{if(0!==(16777216&p)){this._reject(w._reason())}else{var m=new Q("late cancellation observer");w._attachExtraTrace(m),this._reject(m)}}}}},ah.prototype._rejectCallback=function(p,u,w){var s=aq.ensureErrorObject(p),v=s===p;if(!v&&!w&&Y.warnings()){var m="a promise was rejected with a non-error: "+aq.classString(p);this._warn(m,!0)}this._attachExtraTrace(s,u?v:!1),this._reject(p)},ah.prototype._resolveFromExecutor=function(m){if(m!==t){var p=this;this._captureStackTrace(),this._pushContext();var s=!0,o=this._execute(m,function(n){p._resolveCallback(n)},function(n){p._rejectCallback(n,s)});s=!1,this._popContext(),void 0!==o&&p._rejectCallback(o,!0)}},ah.prototype._settlePromiseFromHandler=function(s,v,x,u){var w=u._bitField;if(0===(65536&w)){u._pushContext();var p;v===aa?x&&"number"==typeof x.length?p=q(s).apply(this._boundValue(),x):(p=X,p.e=new am("cannot .spread() a non-array: "+aq.classString(x))):p=q(s).call(v,x);var m=u._popContext();w=u._bitField,0===(65536&w)&&(p===D?u._reject(x):p===X?u._rejectCallback(p.e,!1):(Y.checkForgottenReturns(p,m,"",u,this),u._resolveCallback(p)))}},ah.prototype._target=function(){for(var m=this;m._isFollowing();){m=m._followee()}return m},ah.prototype._followee=function(){return this._rejectionHandler0},ah.prototype._setFollowee=function(m){this._rejectionHandler0=m},ah.prototype._settlePromise=function(o,v,u,n){var m=o instanceof ah,p=this._bitField,w=0!==(134217728&p);0!==(65536&p)?(m&&o._invokeInternalOnCancel(),u instanceof M&&u.isFinallyHandler()?(u.cancelPromise=o,q(v).call(u,n)===X&&o._reject(X.e)):v===ak?o._fulfill(ak.call(u)):u instanceof ai?u._promiseCancelled(o):m||o instanceof G?o._cancel():u.cancel()):"function"==typeof v?m?(w&&o._setAsyncGuaranteed(),this._settlePromiseFromHandler(v,u,n,o)):v.call(u,n,o):u instanceof ai?u._isResolved()||(0!==(33554432&p)?u._promiseFulfilled(n,o):u._promiseRejected(n,o)):m&&(w&&o._setAsyncGuaranteed(),0!==(33554432&p)?o._fulfill(n):o._reject(n))},ah.prototype._settlePromiseLateCancellationObserver=function(o){var s=o.handler,u=o.promise,p=o.receiver,m=o.value;"function"==typeof s?u instanceof ah?this._settlePromiseFromHandler(s,p,m,u):s.call(p,m,u):u instanceof ah&&u._reject(m)},ah.prototype._settlePromiseCtx=function(m){this._settlePromise(m.promise,m.handler,m.receiver,m.value)},ah.prototype._settlePromise0=function(m,s,v){var p=this._promise0,u=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(p,m,u,s)},ah.prototype._clearCallbackDataAtIndex=function(m){var n=4*m-4;this[n+2]=this[n+3]=this[n+0]=this[n+1]=void 0},ah.prototype._fulfill=function(m){var o=this._bitField;if(!((117506048&o)>>>16)){if(m===this){var p=at();return this._attachExtraTrace(p),this._reject(p)}this._setFulfilled(),this._rejectionHandler0=m,(65535&o)>0&&(0!==(134217728&o)?this._settlePromises():al.settlePromises(this),this._dereferenceTrace())}},ah.prototype._reject=function(m){var n=this._bitField;if(!((117506048&n)>>>16)){return this._setRejected(),this._fulfillmentHandler0=m,this._isFinal()?al.fatalError(m,aq.isNode):void ((65535&n)>0?al.settlePromises(this):this._ensurePossibleRejectionHandled())}},ah.prototype._fulfillPromises=function(p,u){for(var w=1;p>w;w++){var s=this._fulfillmentHandlerAt(w),v=this._promiseAt(w),m=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(v,s,m,u)}},ah.prototype._rejectPromises=function(p,u){for(var w=1;p>w;w++){var s=this._rejectionHandlerAt(w),v=this._promiseAt(w),m=this._receiverAt(w);this._clearCallbackDataAtIndex(w),this._settlePromise(v,s,m,u)}},ah.prototype._settlePromises=function(){var m=this._bitField,p=65535&m;if(p>0){if(0!==(16842752&m)){var s=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,s,m),this._rejectPromises(p,s)}else{var o=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,o,m),this._fulfillPromises(p,o)}this._setLength(0)}this._clearCancellationData()},ah.prototype._settledValue=function(){var m=this._bitField;return 0!==(33554432&m)?this._rejectionHandler0:0!==(16777216&m)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&W.defineProperty(ah.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),ah.defer=ah.pending=function(){Y.deprecated("Promise.defer","new Promise");var m=new ah(t);return{promise:m,resolve:an,reject:av}},aq.notEnumerableProp(ah,"_makeSelfResolutionError",at),j("./method")(ah,t,z,ad,Y),j("./bind")(ah,t,z,Y),j("./cancel")(ah,G,ad,Y),j("./direct_resolve")(ah),j("./synchronous_inspection")(ah),j("./join")(ah,G,z,t,al),ah.Promise=ah,ah.version="3.7.2",aq.toFastProperties(ah),aq.toFastProperties(ah.prototype),ae({a:1}),ae({b:2}),ae({c:3}),ae(1),ae(function(){}),ae(void 0),ae(!1),ae(new ah(t)),Y.setBounds(ab.firstLineError,aq.lastLineError),ah}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21,async_hooks:void 0}],16:[function(j,k,l){k.exports=function(v,q,m,p,u){function x(n){switch(n){case -2:return[];case -3:return{};case -6:return new Map}}function y(n){var o=this._promise=new v(q);n instanceof v&&(o._propagateFrom(n,3),n.suppressUnhandledRejections()),o._setOnCancel(this),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var w=j("./util");w.isArray;return w.inherits(y,u),y.prototype.length=function(){return this._length},y.prototype.promise=function(){return this._promise},y.prototype._init=function t(z,B){var r=m(this._values,this._promise);if(r instanceof v){r=r._target();var A=r._bitField;if(this._values=r,0===(50397184&A)){return this._promise._setAsyncGuaranteed(),r._then(t,this._reject,void 0,this,B)}if(0===(33554432&A)){return 0!==(16777216&A)?this._reject(r._reason()):this._cancel()}r=r._value()}if(r=w.asArray(r),null===r){var o=p("expecting an array or an iterable object but got "+w.classString(r)).reason();return void this._promise._rejectCallback(o,!1)}return 0===r.length?void (-5===B?this._resolveEmptyArray():this._resolve(x(B))):void this._iterate(r)},y.prototype._iterate=function(A){var E=this.getActualLength(A.length);this._length=E,this._values=this.shouldCopyValues()?new Array(E):this._values;for(var C=this._promise,z=!1,r=null,B=0;E>B;++B){var D=m(A[B],C);D instanceof v?(D=D._target(),r=D._bitField):r=null,z?null!==r&&D.suppressUnhandledRejections():null!==r?0===(50397184&r)?(D._proxy(this,B),this._values[B]=D):z=0!==(33554432&r)?this._promiseFulfilled(D._value(),B):0!==(16777216&r)?this._promiseRejected(D._reason(),B):this._promiseCancelled(B):z=this._promiseFulfilled(D,B)}z||C._setAsyncGuaranteed()},y.prototype._isResolved=function(){return null===this._values},y.prototype._resolve=function(n){this._values=null,this._promise._fulfill(n)},y.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},y.prototype._reject=function(n){this._values=null,this._promise._rejectCallback(n,!1)},y.prototype._promiseFulfilled=function(o,r){this._values[r]=o;var s=++this._totalResolved;return s>=this._length?(this._resolve(this._values),!0):!1},y.prototype._promiseCancelled=function(){return this._cancel(),!0},y.prototype._promiseRejected=function(n){return this._totalResolved++,this._reject(n),!0},y.prototype._resultCancelled=function(){if(!this._isResolved()){var o=this._values;if(this._cancel(),o instanceof v){o.cancel()}else{for(var r=0;r<o.length;++r){o[r] instanceof v&&o[r].cancel()}}}},y.prototype.shouldCopyValues=function(){return !0},y.prototype.getActualLength=function(n){return n},y}},{"./util":21}],17:[function(j,l,p){function k(s,v,x,u,w){for(var q=0;w>q;++q){x[q+u]=s[q+v],s[q+v]=void 0}}function m(n){this._capacity=n,this._length=0,this._front=0}m.prototype._willBeOverCapacity=function(n){return this._capacity<n},m.prototype._pushOne=function(o){var q=this.length();this._checkCapacity(q+1);var r=this._front+q&this._capacity-1;this[r]=o,this._length=q+1},m.prototype.push=function(s,v,x){var u=this.length()+3;if(this._willBeOverCapacity(u)){return this._pushOne(s),this._pushOne(v),void this._pushOne(x)}var w=this._front+u-3;this._checkCapacity(u);var q=this._capacity-1;this[w+0&q]=s,this[w+1&q]=v,this[w+2&q]=x,this._length=u},m.prototype.shift=function(){var n=this._front,o=this[n];return this[n]=void 0,this._front=n+1&this._capacity-1,this._length--,o},m.prototype.length=function(){return this._length},m.prototype._checkCapacity=function(n){this._capacity<n&&this._resizeTo(this._capacity<<1)},m.prototype._resizeTo=function(r){var s=this._capacity;this._capacity=r;var v=this._front,u=this._length,q=v+u&s-1;k(this,0,this,s,q)},l.exports=m},{}],18:[function(x,u,m){var j,k=x("./util"),q=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},w=k.getNativePromise();if(k.isNode&&"undefined"==typeof MutationObserver){var y=global.setImmediate,v=process.nextTick;j=k.isRecentNode?function(l){y.call(global,l)}:function(l){v.call(process,l)}}else{if("function"==typeof w&&"function"==typeof w.resolve){var p=w.resolve();j=function(l){p.then(l)}}else{j="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList" in document.documentElement?function(){var s=document.createElement("div"),A={attributes:!0},C=!1,z=document.createElement("div"),B=new MutationObserver(function(){s.classList.toggle("foo"),C=!1});B.observe(z,A);var l=function(){C||(C=!0,z.classList.toggle("foo"))};return function(t){var o=new MutationObserver(function(){o.disconnect(),t()});o.observe(s,A),l()}}():"undefined"!=typeof setImmediate?function(l){setImmediate(l)}:"undefined"!=typeof setTimeout?function(l){setTimeout(l,0)}:q}}u.exports=j},{"./util":21}],19:[function(j,k,l){k.exports=function(q){function w(n){void 0!==n?(n=n._target(),this._bitField=n._bitField,this._settledValueField=n._isFateSealed()?n._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}w.prototype._settledValue=function(){return this._settledValueField};var y=w.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},v=w.prototype.error=w.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n")}return this._settledValue()},x=w.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},p=w.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},m=w.prototype.isPending=function(){return 0===(50397184&this._bitField)},u=w.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};w.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},q.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},q.prototype._isCancelled=function(){return this._target().__isCancelled()},q.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},q.prototype.isPending=function(){return m.call(this._target())},q.prototype.isRejected=function(){return p.call(this._target())},q.prototype.isFulfilled=function(){return x.call(this._target())},q.prototype.isResolved=function(){return u.call(this._target())},q.prototype.value=function(){return y.call(this._target())},q.prototype.reason=function(){var n=this._target();return n._unsetRejectionIsUnhandled(),v.call(n)},q.prototype._value=function(){return this._settledValue()},q.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},q.PromiseInspection=w}},{}],20:[function(j,k,l){k.exports=function(y,v){function m(n,p){if(B(n)){if(n instanceof y){return n}var s=x(n);if(s===w){p&&p._pushContext();var u=y.reject(s.e);return p&&p._popContext(),u}if("function"==typeof s){if(A(n)){var u=new y(v);return n._then(u._fulfill,u._reject,void 0,u,null),u}return C(n,s,p)}}return n}function t(n){return n.then}function x(n){try{return t(n)}catch(o){return w.e=o,w}}function A(n){try{return q.call(n,"_promise0")}catch(o){return !1}}function C(J,n,E){function F(o){K&&(K._resolveCallback(o),K=null)}function H(o){K&&(K._rejectCallback(o,D,!0),K=null)}var K=new y(v),I=K;E&&E._pushContext(),K._captureStackTrace(),E&&E._popContext();var D=!0,G=z.tryCatch(n).call(J,F,H);return D=!1,K&&G===w&&(K._rejectCallback(G.e,!0,!0),K=null),I}var z=j("./util"),w=z.errorObj,B=z.isObject,q={}.hasOwnProperty;return m}},{"./util":21}],21:[function(an,aC,at){function ap(){try{var j=K;return K=null,j.apply(this,arguments)}catch(k){return aj.e=k,aj}}function ar(j){return K=j,ap}function ay(j){return null==j||j===!0||j===!1||"string"==typeof j||"number"==typeof j}function aG(j){return"function"==typeof j||"object"==typeof j&&null!==j}function ao(j){return ay(j)?new Error(al(j)):j}function aE(j,l){var p,k=j.length,m=new Array(k+1);for(p=0;k>p;++p){m[p]=j[p]}return m[p]=l,m}function av(j,l,m){if(!ac.isES5){return{}.hasOwnProperty.call(j,l)?j[l]:void 0}var k=Object.getOwnPropertyDescriptor(j,l);return null!=k?null==k.get&&null==k.set?k.value:m:void 0}function am(j,l,m){if(ay(j)){return j}var k={value:m,configurable:!0,enumerable:!1,writable:!0};return ac.defineProperty(j,l,k),j}function aq(j){throw j}function aB(k){try{if("function"==typeof k){var m=ac.names(k.prototype),s=ac.isES5&&m.length>1,l=m.length>0&&!(1===m.length&&"constructor"===m[0]),p=ah.test(k+"")&&ac.names(k).length>0;if(s||l||p){return !0}}return !1}catch(j){return !1}}function az(j){function l(){}function m(){return typeof k.foo}l.prototype=j;var k=new l;return m(),m(),j}function aD(j){return ab.test(j)}function aH(j,l,p){for(var k=new Array(j),m=0;j>m;++m){k[m]=l+m+p}return k}function al(j){try{return j+""}catch(k){return"[no string representation]"}}function ai(j){return j instanceof Error||null!==j&&"object"==typeof j&&"string"==typeof j.message&&"string"==typeof j.name}function aA(j){try{am(j,"isOperational",!0)}catch(k){}}function au(j){return null==j?!1:j instanceof Error.__BluebirdErrorTypes__.OperationalError||j.isOperational===!0}function aF(j){return ai(j)&&ac.propertyIsWritable(j,"stack")}function af(j){return{}.toString.call(j)}function ak(l,p,u){for(var m=ac.names(l),s=0;s<m.length;++s){var k=m[s];if(u(k)){try{ac.defineProperty(p,k,ac.getDescriptor(l,k))}catch(j){}}}}function aw(j){return aa?process.env[j]:void 0}function ad(){if("function"==typeof Promise){try{var j=new Promise(function(){});if("[object Promise]"===af(j)){return Promise}}catch(k){}}}function ax(j,l){if(null===j||"function"!=typeof l||l===ae){return l}null!==j.domain&&(l=j.domain.bind(l));var m=j.async;if(null!==m){var k=l;l=function(){var n=new Array(2).concat([].slice.call(arguments));return n[0]=k,n[1]=this,m.runInAsyncScope.apply(m,n)}}return l}var ac=an("./es5"),G="undefined"==typeof navigator,aj={e:{}},K,J="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,W=function(j,l){function m(){this.constructor=j,this.constructor$=l;for(var o in l.prototype){k.call(l.prototype,o)&&"$"!==o.charAt(o.length-1)&&(this[o+"$"]=l.prototype[o])}}var k={}.hasOwnProperty;return m.prototype=l.prototype,j.prototype=new m,j.prototype},X=function(){var j=[Array.prototype,Object.prototype,Function.prototype],l=function(o){for(var p=0;p<j.length;++p){if(j[p]===o){return !0}}return !1};if(ac.isES5){var m=Object.getOwnPropertyNames;return function(v){for(var x=[],y=Object.create(null);null!=v&&!l(v);){var u;try{u=m(v)}catch(p){return x}for(var w=0;w<u.length;++w){var A=u[w];if(!y[A]){y[A]=!0;var n=Object.getOwnPropertyDescriptor(v,A);null!=n&&null==n.get&&null==n.set&&x.push(A)}}v=ac.getPrototypeOf(v)}return x}}var k={}.hasOwnProperty;return function(t){if(l(t)){return[]}var s=[];j:for(var r in t){if(k.call(t,r)){s.push(r)}else{for(var p=0;p<j.length;++p){if(k.call(j[p],r)){continue j}}s.push(r)}}return s}}(),ah=/this\s*\.\s*\S+\s*=/,ab=/^[a-z$_][a-z$_0-9]*$/i,Y=function(){return"stack" in new Error?function(j){return aF(j)?j:new Error(al(j))}:function(j){if(aF(j)){return j}try{throw new Error(al(j))}catch(k){return k}}}(),Z=function(j){return ac.isArray(j)?j:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var ag="function"==typeof Array.from?function(j){return Array.from(j)}:function(j){for(var l,m=[],k=j[Symbol.iterator]();!(l=k.next()).done;){m.push(l.value)}return m};Z=function(j){return ac.isArray(j)?j:null!=j&&"function"==typeof j[Symbol.iterator]?ag(j):null}}var z="undefined"!=typeof process&&"[object process]"===af(process).toLowerCase(),aa="undefined"!=typeof process&&"undefined"!=typeof process.env,ae,q={setReflectHandler:function(j){ae=j},isClass:aB,isIdentifier:aD,inheritedDataKeys:X,getDataPropertyOrDefault:av,thrower:aq,isArray:ac.isArray,asArray:Z,notEnumerableProp:am,isPrimitive:ay,isObject:aG,isError:ai,canEvaluate:G,errorObj:aj,tryCatch:ar,inherits:W,withAppended:aE,maybeWrapAsError:ao,toFastProperties:az,filledRange:aH,toString:al,canAttachTrace:aF,ensureErrorObject:Y,originatesFromRejection:au,markAsOriginatingFromRejection:aA,classString:af,copyDescriptors:ak,isNode:z,hasEnvVariables:aa,env:aw,global:J,getNativePromise:ad,contextBind:ax};q.isRecentNode=q.isNode&&function(){var j;return process.versions&&process.versions.node?j=process.versions.node.split(".").map(Number):process.version&&(j=process.version.split(".").map(Number)),0===j[0]&&j[1]>10||j[0]>0}(),q.nodeSupportsAsyncResource=q.isNode&&function(){var k=!1;try{var l=an("async_hooks").AsyncResource;k="function"==typeof l.prototype.runInAsyncScope}catch(j){k=!1}return k}(),q.isNode&&q.toFastProperties(process);try{throw new Error}catch(M){q.lastLineError=M}aC.exports=q},{"./es5":10,async_hooks:void 0}]},{},[3])(3)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);e.Promise=Promise;if(!e.nativePromise){e.nativePromise=e.Promise}})(Dynamsoft);(function(b){var a=20200717;if(b._navInfo_ver){if(b.isNumber(b._navInfo_ver)&&b._navInfo_ver>=a){return}}b._navInfo_ver=a;b.getNavInfoSync=function(){var o=!1,k=!0,n=b.win,q=b.doc,d=q.location.protocol,m=(d==="https:"),j=(d!=="https:"&&d!=="http:"),e=false,g=false,r=true,l=true,f=false,i=0,p=0,c=n.JSON;b.getNavInfo();if("userAgentData" in navigator){f=navigator.userAgentData.mobile}else{var h=Dynamsoft.navInfo;e=h.bIE;g=h.bEdge;l=h.bGecko;f=h.bMobile||h.bPad||h.bChromeOS;if(e){i=h.strBrowserVersion;p=h.IEMode}r=h.bHTML5Edition}return{host:n,bSSL:m,bFileSystem:j,bIE:e,bEdge:g,bGecko:l,bMobile:f,IEVersion:i,IEMode:p,bHTML5Edition:r,nodejs:o}};b.getNavInfoByUserAgent=function(N,L){var O="",aa=!1,F=!0,T=b.win,j=b.doc,ag=j&&j.documentElement,V,S=N.toLowerCase(),D=L.toLowerCase(),W=(/cros/).test(S),w=(/android/g).test(S),Y=(/iphone/g).test(S)||(/iphone/g).test(D),k=(/macintosh/).test(S),x=(/ipad/g).test(S)||((k||(D=="macintel"))&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1),p=(/ucweb|ucbrowser/g).test(S),J=!p&&(/nexus/g).test(S)&&(/version\/[\d.]+.*safari\//g).test(S),ae=(/playbook/g).test(S),Q=(/hp-tablet/g).test(S),C=(/blackberry|bb10/g).test(S),q=(/symbian/g).test(S),E=(/windows phone/g).test(S);var s=ae||x||Q,U=Y||J||C||q||E||w,c=!U&&!s&&!W,P=c&&(/win32|win64|windows/).test(D),n=P&&(/win64|x64/).test(S),H=c&&(/mac68k|macppc|macintosh|macintel/).test(S),ad=c&&(/linux/).test(D),o=(D=="win64")||(/wow64|x86_64|win64|x64/).test(S),m=(/wow64/g).test(S),A=S.indexOf("msie "),I=S.indexOf("trident"),G=S.indexOf("rv:"),v=aa,r=(/opera|opr/g).test(S),K=(/360se/g).test(S),R=(/maxthon/g).test(S),y=(/tencenttraveler|qqbrowser/g).test(S),M=(/the world/g).test(S),X=(/metasr/g).test(S),h=(/avant/g).test(S),B=(/firefox|fxios/g).test(S),t=!B&&(/edge\/|edga\/|edgios\/|edg\//g).test(S),f=!(C||ae||p||r||t)&&(/chrome|crios/g).test(S),e=P&&!B&&!t&&!f&&(A!=-1||I!=-1||G!=-1),l="",d=0,u=(/gecko/g).test(S),g=U||s,Z=O,z=aa,ac=T.JSON;if((H||Y||x||P||C||ae||J)&&!p&&!r&&!t&&!e&&!B){V=S.match(/version\/([\d.]+).*safari\//);if(V){if(C||ae||J){}else{v=F;f=aa}Z=V[1]}}if(t){var af=S.indexOf("edge/");if(af>-1){af+=5}else{af=S.indexOf("edg/");if(af>-1){af+=4}else{af=S.indexOf("edga/");if(af>-1){af+=5}else{af=S.indexOf("edgios/");if(af>-1){af+=7}}}}if(af>-1){Z=S.slice(af);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}g=F}else{if(B){V=S.indexOf("firefox/");g=F;if(V>-1){V=S.slice(V+8);var ab=V.indexOf(" ");if(ab>-1){V=V.slice(0,ab)}Z=V;ab=V.indexOf(".");if(ab>-1){V=Z.slice(0,ab)}if(V<27){g=aa}}else{if(Y||x){V=S.indexOf("fxios/");if(V>-1){V=S.slice(V+6);V=V.slice(0,V.indexOf(" "));Z=V}}}}else{if(e){if(A!=-1){V=S.slice(A+5);V=V.slice(0,V.indexOf(";"));l=V}else{if(G!=-1){V=S.slice(G+3);V=V.slice(0,V.indexOf(";"));V=V.slice(0,V.indexOf(")"));l=V}else{if(I!=-1){V=S.slice(I+7);V=V.slice(0,V.indexOf(";"));l=V}}}if(l===""||l>8){g=F}Z=V}else{if(v){V=Z.indexOf(".");g=F;if(V>-1){V=Z.slice(0,V);if(V<7){g=aa}}}else{if(p){V=S.indexOf("ucweb");if(V>-1){Z=S.slice(V+5)}else{V=S.indexOf("ucbrowser/");if(V>-1){Z=S.slice(V+10);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}}g=F}else{if(r){V=S.indexOf("version/");if(V>-1){Z=S.slice(V+8)}else{V=S.indexOf("opr/");if(V>-1){Z=S.slice(V+4)}}g=F}else{if(q){V=S.indexOf("browserng/");if(V>-1){Z=S.slice(V+10)}g=F}else{if(E){V=S.indexOf("iemobile/");if(V>-1){Z=S.slice(V+9)}g=F}else{if(f){var i=S.indexOf("chrome/");if(i>-1){Z=S.slice(i+7);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}else{i=S.indexOf("crios/");if(i>-1){Z=S.slice(i+6);V=Z.indexOf(" ");if(V>-1){Z=Z.slice(0,V)}}}g=F;V=Z.indexOf(".");if(V>-1){V=Z.slice(0,V);if(V<27){g=aa}}}}}}}}}}}if(t||e){if(j.documentMode){d=j.documentMode}else{d=5;if(j.compatMode){if(j.compatMode=="CSS1Compat"){d=7}}}}if(ag&&ag.querySelector&&(!e||e&&(Z>8))){z=F}if(e&&Z<9){ac=null}return{bWin:P,bMac:H,bLinux:ad,bMobile:U,bPad:s,bChromeOS:W,bAndroid:w,biPhone:Y,biPad:x,bWin64:n,bWOW64:m,bOSx64:o,bIE:e,bEdge:t,bChrome:f,bFirefox:B,bSafari:v,bOpera:r,bNexus:J,bUC:p,b360SE:K,bMaxthon:R,bTencentTraveler:y,bTheWorld:M,bMetaSr:X,bAvant:h,bGecko:u,bHTML5Edition:g,strBrowserVersion:Z,IEMode:d,bQuerySelectorSupported:z,nativeJson:ac,scrollBarWidth:aa}};b.getNavInfoByUAData=function(d){var c=function(k){var f=navigator.userAgentData,h=f.mobile,j,o,g=k.platform.toLowerCase(),m=k.platformVersion,i=k.architecture.toLowerCase(),e=false,l=(g.indexOf("mac")>=0);if("brands" in f&&b.isArray(f.brands)){j=f.brands[0].brand.toLowerCase();o=f.brands[0].version}else{if("uaList" in f&&b.isArray(f.uaList)){j=f.uaList[0].brand.toLowerCase();o=f.uaList[0].version}}if(l){var n=m.split("_");if(n.length>0&&n[0]>=15){e=true}}else{if(i.indexOf("win64")>=0||i.indexOf("x86_64")>=0||i.indexOf("x64")>=0){e=true}}return{bWin:(g=="windows"),bMac:l,bLinux:(g=="linux"),bAndroid:false,bMobile:h,bPad:false,bChromeOS:false,bOSx64:e,bIE:false,bEdge:false,bChrome:true,bFirefox:false,bSafari:false,bOpera:false,bGecko:true,bHTML5Edition:true,strBrowserVersion:o,IEMode:false,bQuerySelectorSupported:true,nativeJson:true,scrollBarWidth:false}};if(d){return Promise.resolve(function(){return c(d)})}return navigator.userAgentData.getHighEntropyValues(["platform","platformVersion","architecture"]).then(c)};b.asyncGetNavInfo=function(){if(Dynamsoft.navInfo){return Promise.resolve(Dynamsoft.navInfo)}if("userAgentData" in navigator){return b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d;return d})}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Promise.resolve(Dynamsoft.navInfo)}};b.getNavInfo=function(){if(Dynamsoft.navInfo){return Dynamsoft.navInfo}if("userAgentData" in navigator){b.getNavInfoByUAData().then(function(d){Dynamsoft.navInfo=d});return false}else{var c=navigator;Dynamsoft.navInfo=b.getNavInfoByUserAgent(c.userAgent,c.platform);return Dynamsoft.navInfo}};Dynamsoft.navInfoSync=b.getNavInfoSync()})(Dynamsoft.Lib);(function(a,h){var g=a.Lib,b=a.navInfoSync,c=20200521;if(g._ls_ver){if(g.isNumber(g._ls_ver)&&g._ls_ver>=c){return}}g._ls_ver=c;var i=false,f=false,j;if((b.bEdge&&b.bFileSystem)||(b.bIE&&b.IEVersion<8)){}else{try{f=window.localStorage;i=f?true:false}catch(d){f=false}}g.LS={isSupportLS:function(){return i},item:function(k,l,e){var m=null;if(this.isSupportLS()){if(l){f.setItem(k,l);m=l}else{m=f.getItem(k)}if(m===null){return e}return m}else{return e}},removeItem:function(e){if(this.isSupportLS()){f.removeItem(e)}else{return false}return true}}})(Dynamsoft);(function(lib,nil){var _utilities_ver=20200708;if(lib._utilities_ver){if(lib._utilities_ver>=_utilities_ver){return}}lib._utilities_ver=_utilities_ver;var AP=Array.prototype,win=lib.win,doc=lib.doc,navInfoSync=Dynamsoft.navInfoSync,EMPTY_STR="",FALSE=!1,TRUE=!0,mix=lib.mix;var RE_TRIM=/^[\s\xa0]+|[\s\xa0]+$/g,indexOf=AP.indexOf,lastIndexOf=AP.lastIndexOf,filter=AP.filter,every=AP.every,some=AP.some,map=AP.map;var logger=lib.getLogger(),location=win.location,bDomReady=0,callbacks=[],POLL_RETIRES=500,POLL_INTERVAL=40,RE_ID_STR=/^#?([\w-]+)$/,RE_NOT_WHITESPACE=/\S/,standardEventModel=!!(doc&&doc.addEventListener),DOM_READY_EVENT="DOMContentLoaded",READY_STATE_CHANGE_EVENT="readystatechange",LOAD_EVENT="load",COMPLETE="complete",addEventListener=standardEventModel?function(el,type,fn){el.addEventListener(type,fn,false)}:function(el,type,fn){el.attachEvent("on"+type,fn)},removeEventListener=standardEventModel?function(el,type,fn){el.removeEventListener(type,fn,false)}:function(el,type,fn){el.detachEvent("on"+type,fn)};lib.mix(lib,{isWindow:function(obj){return obj!=null&&obj==obj.window},globalEval:function(data){if(data&&RE_NOT_WHITESPACE.test(data)){if(win.execScript){win.execScript(data)}else{(function(data){win.eval.call(win,data)})(data)}}},domReady:function(fn){if(bDomReady){try{fn(lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}else{callbacks.push(fn)}return this}});lib.ready=lib.domReady;function fireReady(){for(var i=0;i<callbacks.length;i++){try{callbacks[i](lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}}lib.checkDomReady=function(){if(!bDomReady){bDomReady=1;lib.asyncGetNavInfo().then(function(navInfo){if(doc&&!navInfoSync.nodejs){removeEventListener(win,LOAD_EVENT,lib.checkDomReady)}fireReady()})}};function bindReady(){if(!doc||doc.readyState===COMPLETE){lib.checkDomReady();return}addEventListener(win,LOAD_EVENT,lib.checkDomReady);if(standardEventModel){var fnDomReady=function(){removeEventListener(doc,DOM_READY_EVENT,fnDomReady);lib.checkDomReady()};addEventListener(doc,DOM_READY_EVENT,fnDomReady)}else{var stateChange=function(){if(doc.readyState===COMPLETE){removeEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);lib.checkDomReady()}};addEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);var notframe,docElem=doc&&doc.documentElement,doScroll=docElem&&docElem.doScroll;try{notframe=(win.frameElement===null)}catch(e){notframe=false}if(doScroll&&notframe){var readyScroll=function(){try{doScroll("left");setTimeout(lib.checkDomReady,30)}catch(ex){setTimeout(readyScroll,POLL_INTERVAL)}};readyScroll()}}}bindReady();if(Dynamsoft.navInfoSync.bIE){try{doc.execCommand("BackgroundImageCache",false,true)}catch(e){}}})(Dynamsoft.Lib);(function(d){var c=20200521;if(d._domUtil_ver){if(d._domUtil_ver>=c){return}}d._domUtil_ver=c;var b="",a="none";d.mix(d,{get:function(e){return d.doc.getElementById(e)},hide:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=a}},show:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=b}},toggle:function(f){var e=d.isString(f)?d.get(f):f;if(e){if(e.style.display===a){e.style.display=b}else{e.style.display=a}}},empty:function(e){if(!e){return}while(e.firstChild){e.removeChild(e.firstChild)}}})})(Dynamsoft.Lib);(function(a){var c=a.Lib;var b=20200521;if(c._color_ver){if(c.isNumber(c._color_ver)&&c._color_ver>=b){return}}c._color_ver=b;c.colorStrToInt=function(h){var d="0x",f,e;if(/^(rgb|RGB)/.test(h)){var g=h.replace(/[^\d,.]/g,"").split(",");for(e=0;e<3;++e){f=Number(g[e]).toString(16);if(f.length==1){f="0"+f}d+=f}if(g.length==4){f=Math.round(Number(g[e])*255).toString(16);if(f.length==1){f="0"+f}d+=f}else{d+="ff"}}else{if(h=="transparent"){d+="00000000"}else{if(/^#[0-9a-fA-f]{6}$/.test(h)){d+=h.replace(/#/,"")+"ff"}else{if(/^#[0-9a-fA-f]{3}$/.test(h)){for(e=0;e<3;++e){d+=h[e]+h[e]}d+="ff"}else{d="-1"}}}}return Number(d)};c.IntToColorStr=function(d){if(d>4294967295||d<0){return null}var e;if(!Dynamsoft.navInfoSync.bHTML5Edition){if(d%256==0){e="transparent"}else{e=Math.floor(d/256).toString(16);while(e.length!=6){e="0"+e}e="#"+e}}else{e="rgba("+Math.floor(d/16777216)+","+Math.floor(d/65536)%256+","+Math.floor(d/256)%256+","+(d%256)/255+")"}return e}})(Dynamsoft);(function(b,a){var d=b.Lib,c=20200716;if(d._ajax_ver){if(d.isNumber(d._ajax_ver)&&d._ajax_ver>=c){return}}d._ajax_ver=c;d.asyncGetNavInfo().then(function(h){var s=h.bIE&&(parseInt(h.strBrowserVersion)<=9),u=h.bIE&&(parseInt(h.strBrowserVersion)<=10),p=d.win,n=d.each,m=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,A=1,H=2,g=3,K=200,f=204,l=300,w=304,r=404,j=1223,x=500,C="open error: ",z="send error: ",k=new d.Uri(location.href),G=k&&m.test(k.getScheme()),I=false,o=function(){try{return new p.XMLHttpRequest()}catch(M){}},B=function(){try{var M=false;n(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(O){try{return(M=new p.ActiveXObject(O))}catch(P){d.error("new xhr error: "+P.message)}});return M}catch(N){}},v=(!G&&p.XMLHttpRequest)?("withCredentials" in (o()||[])):false,E=p.ActiveXObject?function(M){if(s){return B()}if(!v&&M&&I){return new I()}return !G&&o()||B()}:o,t=function(M){return I&&(M instanceof I)},q=/^(?:GET|HEAD)$/,e=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,L={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},D=a,F;if(self&&self.fetch){F=self.fetch}else{F=p.fetch}if(u){D=d.noop}function J(){}d.mix(J.prototype,{url:false,onSuccess:false,onError:false,onComplete:false,method:"GET",async:true,xhrFields:false,mimeType:false,username:false,password:false,data:false,dataType:"text",headers:false,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:false,afterSend:false,timeout:0,cache:true,crossDomain:false,retry:0,setRequestHeader:function(N,O){var M=this;M.headers[N]=O;return M},getAllResponseHeaders:function(){var M=this;return M.state===H?M.responseHeadersString:null},getNativeXhr:function(){var M=this;return M.nativeXhr},getResponseHeader:function(O){var N,M=this,P;O=O.toLowerCase();if(M.state===H){if(!(P=M.responseHeaders)){P=M.responseHeaders={};while((N=e.exec(M.responseHeadersString))){P[N[1].toLowerCase()]=N[2]}}N=P[O]}return N===undefined?null:N},overrideMimeType:function(N){var M=this;if(!M.state){M.mimeType=N}return M},abort:function(N){var M=this;N=N||"abort";M.state=g;M.status=0;M.statusText=N;if(M.nativeXhr){M.nativeXhr.abort()}M._callback();return M},_ioReady:function(N,Q){var O=this,M=false;if(O.state===H||O.state===g){return}if(O.state===A){O.state=H}O.readyState=4;if(N>=K&&N<l||N===w){if(N===w){Q="not modified";M=true}else{Q="success";M=true}}else{if(N<0){N=0}}try{if(N>=K){O.handleResponseData()}}catch(P){d.error(P.stack||P,"error");Q=P.message||"parser error"}if(N<K||!M){if(O.retry>0){O.retry=O.retry-1;setTimeout(function(){O.sendInternal()},200);return}}O.status=N;O.statusText=Q;O._callback(M)},_callback:function(M){var N=this,O=N.timeoutTimer;if(O){clearTimeout(O);N.timeoutTimer=0}n([M?N.onSuccess:N.onError,N.onComplete],function(P){if(d.isFunction(P)){P.apply(N.context,[N.responseData,N.statusText,N])}});N.responseData=null},handleResponseData:function(){var T=this,U,S=T.dataType,R=T.nativeXhr;if(S==="blob"||S==="arraybuffer"){if(s){var Q,O;if("responseBody" in R){Q=R.responseBody;O=dsVbsBinGetLength(Q);U=(new VBArray(dsVbsBinGetBytes(Q,0,O))).toArray()}else{var M;U=[];Q=R.responseText;O=Q.length;for(M=0;M<O;++M){U.push(Q.charCodeAt(M)&255)}}Q=null}else{if(!!p.Blob){U=R.response}else{if("responseBody" in R){U=R.responseBody}else{U=R.responseText}}}}else{if(S=="json"){if(R.responseType&&R.responseType.toLowerCase()=="json"){U=R.response}else{U=R.responseText?(((p.JSON&&p.JSON.parse)?p.JSON.parse:d.parse)(R.responseText)):{}}}else{if(S==="user-defined"){U=R.response!==undefined?R.response:R.responseText}else{T.responseText=U=R.responseText||"";try{var N=R.responseXML;if(N&&N.documentElement){T.responseXML=N}}catch(P){}}}}T.responseData=U},sendInternal:function(M){var T=this,ac,X,N,O,V,Y,W,ab,P,U,ad,R;ac=T._setup(M);N=ac.method;if(d.isString(N)){N=N.toUpperCase()}if(N=="POST"){Y=ac.contentType}else{Y=false}O=ac.url;V=ac.dataType;P=ac.mimeType;if(!d.isString(O)){return}T.nativeXhr=W=E(ac.crossDomain);if(!W){return}try{T.state=A;if(ac.username){W.open(N,O,ac.async,ac.username,ac.password)}else{W.open(N,O,ac.async)}if((ac.async||h.bIE)&&V&&V!="user-defined"&&("responseType" in W)){try{W.responseType=V}catch(aa){}}}catch(Z){if(T.state<2){d.error(Z.stack||Z,"error");T._ioReady(-1,C+(d.isNumber(Z.number)?"("+Z.number+")":"")+(Z.message||""))}else{d.error(Z)}return}ab=ac.xhrFields||{};if("withCredentials" in ab){if(!v){delete ab.withCredentials}}n(ab,function(ag,ae){try{W[ae]=ag}catch(af){d.error(af)}});if(P&&W.overrideMimeType){W.overrideMimeType(P)}U=ac.headers||{};var Q=U["X-Requested-With"];if(Q===false){delete U["X-Requested-With"]}if("setRequestHeader" in W){if(Y){W.setRequestHeader("Content-Type",ac.contentType)}W.setRequestHeader("Accept",V&&L[V]?L[V]+(V==="*"?"":", */*; q=0.01"):L["*"]);n(U,function(af,ae){W.setRequestHeader(ae,af)})}if(!ac.cache){W.setRequestHeader("If-Modified-Since","0");W.setRequestHeader("Cache-Control","no-cache")}ad=!q.test(ac.method);R=ad&&ac.data||null;if(ad&&s){R=ac.data}if(ac.async&&ac.timeout>0){if(ac.timeout<300){ac.timeout=300}T.timeoutTimer=setTimeout(function(){T.abort("timeout")},ac.timeout)}try{T.state=A;if(d.isFunction(T.beforeSend)){var S=T.beforeSend(W,T);if(S===false){T.abort("cancel");return}}W.send(R);R=null;ac.data=null;if(d.isFunction(T.afterSend)){T.afterSend(T)}}catch(aa){if(T.state<2){d.error(aa.stack||aa,"error");T._ioReady(-1,z+(aa.message||""))}else{d.error(aa)}}if(!ac.async||W.readyState===4){T._xhrCallback()}else{if(t(W)){W.onload=function(){W.readyState=4;W.status=K;T._xhrCallback()};W.onerror=function(){W.readyState=4;W.status=x;T._xhrCallback()}}else{W.onreadystatechange=function(){T._xhrCallback()}}}},_xhrCallback:function(N,S){var O=this,P=O.nativeXhr;try{if(P.readyState===4||S){if(t(P)){P.onerror=D;P.onload=D}else{P.onreadystatechange=D}if(S){if(P.readyState!==4){P.abort()}}else{if(!t(P)){O.responseHeadersString=P.getAllResponseHeaders()}var M=P.status,R;try{R=P.statusText}catch(Q){d.error("xhr statusText error: ");d.error(Q);R=""}O._ioReady(M,R)}}}catch(Q){d.error(Q.stack||Q,"error");P.onreadystatechange=D;if(!S){O._ioReady(-1,Q.message||"process error")}}},_setup:function(Q){var N=this,M,P,S,O,R;if(Q){N.context=Q.context;delete Q.context;if(Q instanceof J){Q=Q.config}N.config=Q;O=Q.url;if(d.startsWith(O,"http://")||d.startsWith(O,"https://")){R=new d.Uri(O)}else{if(d.startsWith(O,"//")){Q.url=O="http:"+O}R=k.resolve(O)}if(!Q.dataType){M="text"}else{M=Q.dataType.toLowerCase()}Q.dataType=M;if(!Q.method){Q.method="GET"}else{Q.method=Q.method.toUpperCase()}if(!("crossDomain" in Q)){Q.crossDomain=!R.isSameOriginAs(k)}S=Q.headers;for(P in S){if(d.isUndefined(S[P])){delete S[P]}}d.mix(N,Q)}N.state=A;return N}});function i(N){if(!N||!d.isString(N.url)){d.log("the url is error.");return}var M=new J();M.sendInternal(N);return M}d.mix(d,{ajax:i,io:{get:function(N,O,P,M){return i({method:"GET",url:N,onSuccess:O,onError:P,dataType:M})},post:function(N,P,O,Q,M){return i({method:"POST",data:P,url:N,onSuccess:O,onError:Q,dataType:M})},put:function(N,P,O,Q,M){return i({method:"PUT",data:P,url:N,onSuccess:O,onError:Q,dataType:M})}}});if(h.bChrome||h.bFirefox||F){d.fetch=function(P,O){var M="text";if(O){if(O&&O.dataType){M=O.dataType}}var N,Q;N=F(P,O);if(Promise!=d.nativePromise){Q=Promise;Promise=d.nativePromise;N=N.then(function(R){Promise=Q;if(R.ok){return R}else{throw {httpCode:R.status,errorString:R.statusText}}})}if(M=="blob"){N=N.then(function(R){return R.blob()})}else{if(M=="json"){N=N.then(function(R){return R.json()})}else{if(M=="arraybuffer"){N=N.then(function(R){return R.arrayBuffer()})}else{N=N.then(function(R){return R.text()})}}}return N}}else{if(s){d.addVBS(["Function dsVbsBinGetAt(strBinary,iOffset)\r\n"," dsVbsBinGetAt=AscB(MidB(strBinary,iOffset+1,1))\r\n","End Function\r\n","Function dsVbsBinGetBytes(strBinary,iOffset,iLength)\r\n"," Dim aBytes()\r\n"," ReDim aBytes(iLength-1)\r\n"," For i=0 To iLength-1\r\n","  aBytes(i)=dsVbsBinGetAt(strBinary,iOffset+i)\r\n"," Next\r\n"," dsVbsBinGetBytes=aBytes\r\n","End Function\r\n","Function dsVbsBinGetLength(strBinary)\r\n"," dsVbsBinGetLength=LenB(strBinary)\r\n","End Function"].join(""))}var y;if(Promise!=d.nativePromise){y=Promise;Promise=d.nativePromise}d.fetch=function(N,M){return new Promise(function(S,Q){var P=function(W,U,V){if(y){Promise=y}S(W)},T=function(W,U,V){if(y){Promise=y}Q({httpCode:V.status,errorString:U})},O={url:N,onSuccess:P,onError:T,dataType:"text"},R=false;if(M){if(M.method){O.method=M.method}if(M.body){O.data=M.body}if(M.headers){n(M.headers,function(V,U){if(U.toLowerCase()=="content-type"){R=true}O.headers[U]=V})}if(M.dataType){O.dataType=M.dataType}}if(R){O.contentType=false}if(O.dataType=="blob"&&s){O.mimeType="text/plain; charset=x-user-defined"}d.ajax(O)})}}})})(Dynamsoft);(function(c){var b=20200521;if(c._customEvt_ver){if(c.isNumber(c._customEvt_ver)&&c._customEvt_ver>=b){return}}c._customEvt_ver=b;var a={fire:function(f){var d=this,e;d.exec=d.exec||{};f=f.toLowerCase();e=Array.prototype.slice.call(arguments,1);c.each(d.exec[f]||[],function(i){var h=i.f,g=i.c||d;try{h.apply(g,e)}catch(j){c.log(j)}})},on:function(g,f,d){var e=this;e.exec=e.exec||{};g=g.toLowerCase();e.exec[g]=e.exec[g]||[];e.exec[g].push({f:f,c:d})},off:function(j,h,k){var f=this,e=f.exec;if(!e){return}if(!j){f.exec=null;return}j=j.toLowerCase();if(!h){e[j]=null;return}var d=e[j]||[];for(var g=d.length-1;g>=0;g--){if(d[g]===h){d.splice(g,1)}}}};c.obj={customEvent:a}})(Dynamsoft.Lib);(function(b){var g=b.Lib,e=!1,c=!0,f=g.win.document,d;var a=20200521;if(g._evtBase_ver){if(g.isNumber(g._evtBase_ver)&&g._evtBase_ver>=a){return}}g._evtBase_ver=a;d=function(h){return(Dynamsoft.navInfoSync.bGecko&&"mousewheel"===h)?"DOMMouseScroll":h};g.mix(g,{addEventListener:f.addEventListener?function(i,k,j){var h=d(k);if(i){i.addEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.attachEvent("on"+h,j)}},removeEventListener:f.removeEventListener?function(i,k,j){var h=d(k);if(i){i.removeEventListener(h,j,false)}}:function(i,k,j){var h=d(k);if(i){i.detachEvent("on"+h,j)}},stopPropagation:function(h){var i=h||window.event;if(i.preventDefault){i.preventDefault()}if(i.stopPropagation){i.stopPropagation()}i.returnValue=false;i.cancelBubble=true},fireEvent:function(h,i){var j;if(f.createEvent){j=f.createEvent("HTMLEvents");j.initEvent(h,c,c);if(i.dispatchEvent){i.dispatchEvent(j)}}else{if(f.createEventObject){j=f.createEventObject();j.bubbles=c;j.cancelable=c;i.fireEvent(h,j)}else{j=new Event(h);if(i.dispatchEvent){i.dispatchEvent(j)}}}}})})(Dynamsoft);(function(f,b){var e=20200716;if(f._loadbase64_ver){if(f._loadbase64_ver>=e){return}}f._loadbase64_ver=e;var d={encodeChars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeChars:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1]};f.base64={UTF16ToUTF8:function(n){var l=[],h=n.length,j,g;for(var k=0;k<h;k++){var m=n.charCodeAt(k);if(m>0&&m<=127){l.push(n.charAt(k))}else{if(m>=128&&m<=2047){j=192|((m>>6)&31);g=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g))}else{if(m>=2048&&m<=65535){j=224|((m>>12)&15);g=128|((m>>6)&63);var o=128|(m&63);l.push(String.fromCharCode(j),String.fromCharCode(g),String.fromCharCode(o))}else{if(m>=65536&&m<=2097151){}else{if(m>=2097152&&m<=67108863){}else{}}}}}}return l.join("")},UTF8ToUTF16:function(m){var l=[],k=m.length,j,p,o,g,q,n,h;for(j=0;j<k;j++){g=m.charCodeAt(j);if(((g>>7)&255)==0){l.push(m.charAt(j))}else{if(((g>>5)&255)==6){q=m.charCodeAt(++j);p=(g&31)<<6;o=q&63;h=p|o;l.push(String.fromCharCode(h))}else{if(((g>>4)&255)==14){q=m.charCodeAt(++j);n=m.charCodeAt(++j);p=(g<<4)|((q>>2)&15);o=((q&3)<<6)|(n&63);h=((p&255)<<8)|o;l.push(String.fromCharCode(h))}else{if(((g>>3)&255)==30){}else{if(((g>>2)&255)==62){}else{}}}}}}return l.join("")},encode:function(o){var n=this.UTF16ToUTF8(o),j=[],l=0,g=n.length,m,k,h;while(l<g){m=n.charCodeAt(l++)&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n.charCodeAt(l++);if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n.charCodeAt(l++);j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},encodeArray:function(n){var j=[],l=0,g=n.length,m,k,h;while(l<g){m=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt((m&3)<<4));j.push("==");break}k=n[l++]&255;if(l==g){j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt((k&15)<<2));j.push("=");break}h=n[l++]&255;j.push(d.encodeChars.charAt(m>>2));j.push(d.encodeChars.charAt(((m&3)<<4)|((k&240)>>4)));j.push(d.encodeChars.charAt(((k&15)<<2)|((h&192)>>6)));j.push(d.encodeChars.charAt(h&63))}return j.join("")},decode:function(p){var n=this,k=[],m=0,o=p.length,l,j,h,g;while(m<o){do{l=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&l==-1);if(l==-1){break}do{j=d.decodeChars[p.charCodeAt(m++)&255]}while(m<o&&j==-1);if(j==-1){break}k.push(String.fromCharCode((l<<2)|((j&48)>>4)));do{h=p.charCodeAt(m++)&255;if(h==61){return n.UTF8ToUTF16(k.join(""))}h=d.decodeChars[h]}while(m<o&&h==-1);if(h==-1){break}k.push(String.fromCharCode(((j&15)<<4)|((h&60)>>2)));do{g=p.charCodeAt(m++)&255;if(g==61){return n.UTF8ToUTF16(k.join(""))}g=d.decodeChars[g]}while(m<o&&g==-1);if(g==-1){break}k.push(String.fromCharCode(((h&3)<<6)|g))}return n.UTF8ToUTF16(k.join(""))}};f.utf8={fromUTF16:function(k){var h=[],j=0,g=k.length,l;while(j<g){l=k.charCodeAt(j);if((l>=1)&&(l<=127)){h.push(k.charAt(j))}else{if(l>2047){h.push(String.fromCharCode(224|((l>>12)&15)));h.push(String.fromCharCode(128|((l>>6)&63)));h.push(String.fromCharCode(128|((l>>0)&63)))}else{h.push(String.fromCharCode(192|((l>>6)&31)));h.push(String.fromCharCode(128|((l>>0)&63)))}}j++}return h.join("")},toUTF16:function(m){var h=[],k=0,g=m.length,n,l,j;while(k<g){n=m.charCodeAt(k++);switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:h.push(m.charAt(k-1));break;case 12:case 13:l=m.charCodeAt(k++);h.push(String.fromCharCode(((n&31)<<6)|(l&63)));break;case 14:l=m.charCodeAt(k++);j=m.charCodeAt(k++);h.push(String.fromCharCode(((n&15)<<12)|((l&63)<<6)|((j&63)<<0)));break}}return h.join("")}};var c=typeof exports!="undefined"?exports:typeof self!="undefined"?self:$.global;function a(g){this.message=g}a.prototype=new Error();a.prototype.name="InvalidCharacterError";f.btoa=c.btoa?(function(g){return c.btoa(g)}):(function(j){var m=String(j);for(var l,h,g=0,k=d.encodeChars,i="";m.charAt(g|0)||(k="=",g%1);i+=k.charAt(63&l>>8-g%1*8)){h=m.charCodeAt(g+=3/4);if(h>255){throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.")}l=l<<8|h}return i});f.atob=c.atob?(function(g){return c.atob(g)}):(function(j){var m=String(j).replace(/[=]+$/,"");if(m.length%4==1){throw new a("'atob' failed: The string to be decoded is not correctly encoded.")}for(var l=0,k,h,g=0,i="";h=m.charAt(g++);~h&&(k=l%4?k*64+h:h,l++%4)?i+=String.fromCharCode(255&k>>(-2*l&6)):0){h=d.encodeChars.indexOf(h)}return i})})(Dynamsoft.Lib);(function(h){var f=20200721;if(h._loadjs_ver){if(h._loadjs_ver>=f){return}}h._loadjs_ver=f;var b="",d=!0,g=h.doc,a=g&&g.documentElement,c=g.getElementsByTagName("head")[0]||a,e=g.createElement("script").readyState?function(j,k){var i=j.onreadystatechange;j.onreadystatechange=function(){var l=j.readyState;if(l==="loaded"||l==="complete"){j.onreadystatechange=null;if(i){i()}k.call(this,true)}else{if(l==="loading"){}else{k.call(this,false)}}}}:function(j,k){var i=!1;j.addEventListener("load",k,i);j.addEventListener("error",k,i)};h.getScript=function(j,l,m){var k,i;if(!h.isFunction(m)){m=function(){}}if(!h.isString(j)||j==b){m();return}k=g.createElement("script");i=["",j].join(b);k.src=i;if(l){k.async=d}k.charset="utf-8";e(k,m);c.insertBefore(k,c.firstChild);return k};h.getScripts=function(k,j,m){if(!h.isArray(k)){m();return}var l=k.length,i=function(n){if(n){l--}else{m()}if(l<=0){m("ok")}};h.each(k,function(n){h.getScript(n,j,i)})};h.getCss=function(i,l){var j,k=l;if(!h.isFunction(k)){k=!1}if(!h.isString(i)||i==b){if(k){k()}return}j=g.createElement("link");j.href=i;j.rel="stylesheet";j.async=d;if(k){e(j,k)}c.insertBefore(j,c.firstChild);return j};h.getAllCss=function(l,k){if(!h.isArray(l)){k();return}var j=l.length,i=function(m){if(m){j--}else{k()}if(j<=0){k("ok")}};h.each(l,function(m){h.getCss(m,i)})};h.addScript=function(i){var k,j;j=i.body;if(!h.isString(j)||j==b){return}k=g.createElement("script");k.charset="utf-8";if(Dynamsoft.navInfoSync.bIE){k.text=j}else{k.appendChild(g.createTextNode(j))}if(i.language){k.language=i.language}else{k.language="javascript"}if(i.type){k.type=i.type}else{k.type="text/javascript"}c.insertBefore(k,c.firstChild)};h.addJS=function(i){h.addScript({body:i})};h.addVBS=function(i){h.addScript({body:i,language:"vbscript",type:"text/vbscript"})}})(Dynamsoft.Lib);(function(a){var c=a.Lib,b=20200521;if(c._asyncQueue_ver){if(c.isNumber(c._asyncQueue_ver)&&c._asyncQueue_ver>=b){return}}c._asyncQueue_ver=b;var d={queue:[],doNextStarted:false,timer:false,pushToDo:function(g,f,e){d.queue.push({obj:g,method:f,args:e})},doNext:function(){if(!d.doNextStarted){clearTimeout(d.timer);d.timer=false;return}if(d.queue.length==0){d.timer=setTimeout(d.doNext,500);return}var h=d.queue[0],j=h.obj,k=h.method,f=h.args;d.queue.splice(0,1);if(c.isFunction(j[k])){if(f.length>2){var g=f[f.length-2],e=f[f.length-1];f[f.length-2]=function(){try{g.apply(j,arguments)}catch(l){}d.timer=setTimeout(d.doNext,0)};f[f.length-1]=function(){try{e.apply(j,arguments)}catch(l){}d.timer=setTimeout(d.doNext,0)}}try{j[k].apply(j,f)}catch(i){}return}else{c.log("not invoke a function: "+k);d.timer=setTimeout(d.doNext,0)}},start:function(){if(!d.doNextStarted){d.doNextStarted=true;d.timer=setTimeout(d.doNext,0)}},stop:function(){clearTimeout(d.timer);d.doNextStarted=false;d.queue=[]}};c.asyncQueue=d})(Dynamsoft);(function(f){var d=20200521;if(f._sprintf_ver){if(f._sprintf_ver>=d){return}}f._sprintf_ver=d;var e,i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function g(m,l){if("_".repeat){return m.repeat(l)}var k=0,j=[];for(;k<l;k++){j.push(m)}return j.join("")}function c(s,r){var w=1,u=s.length,x,l="",p,n,q,m,t,v,o,j;for(p=0;p<u;p++){if(typeof s[p]==="string"){l+=s[p]}else{if(typeof s[p]==="object"){q=s[p];if(q.keys){x=r[w];for(n=0;n<q.keys.length;n++){if(x==undefined){throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',q.keys[n],q.keys[n-1]))}x=x[q.keys[n]]}}else{if(q.param_no){x=r[q.param_no]}else{x=r[w++]}}if(i.not_type.test(q.type)&&i.not_primitive.test(q.type)&&x instanceof Function){x=x()}if(i.numeric_arg.test(q.type)&&(typeof x!=="number"&&isNaN(x))){throw new TypeError(e("[sprintf] expecting number but found %T",x))}if(i.number.test(q.type)){o=x>=0}switch(q.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,q.width?parseInt(q.width):0);break;case"e":x=q.precision?parseFloat(x).toExponential(q.precision):parseFloat(x).toExponential();break;case"f":x=q.precision?parseFloat(x).toFixed(q.precision):parseFloat(x);break;case"g":x=q.precision?String(Number(x.toPrecision(q.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x);x=(q.precision?x.substring(0,q.precision):x);break;case"t":x=String(!!x);x=(q.precision?x.substring(0,q.precision):x);break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase();x=(q.precision?x.substring(0,q.precision):x);break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf();x=(q.precision?x.substring(0,q.precision):x);break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase();break}if(i.json.test(q.type)){l+=x}else{if(i.number.test(q.type)&&(!o||q.sign)){j=o?"+":"-";x=x.toString().replace(i.sign,"")}else{j=""}t=q.pad_char?q.pad_char==="0"?"0":q.pad_char.charAt(1):" ";v=q.width-(j+x).length;m=q.width?(v>0?g(t,v):""):"";l+=q.align?j+x+m:(t==="0"?j+m+x:m+j+x)}}}}return l}var h=Object.create?Object.create(null):{};function a(j){if(h[j]){return h[j]}var m=j,n,p=[],o=0;while(m){if((n=i.text.exec(m))!==null){p.push(n[0])}else{if((n=i.modulo.exec(m))!==null){p.push("%")}else{if((n=i.placeholder.exec(m))!==null){if(n[2]){o|=1;var q=[],l=n[2],k=[];if((k=i.key.exec(l))!==null){q.push(k[1]);while((l=l.substring(k[0].length))!==""){if((k=i.key_access.exec(l))!==null){q.push(k[1])}else{if((k=i.index_access.exec(l))!==null){q.push(k[1])}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}n[2]=q}else{o|=2}if(o===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}p.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}else{throw new SyntaxError("[sprintf] unexpected placeholder")}}}m=m.substring(n[0].length)}h[j]=p;return p}e=function(j){return c(a(j),arguments)};function b(k,j){return e.apply(null,[k].concat(j||[]))}f.sprintf=e;f.vsprintf=b})(Dynamsoft.Lib);(function(b){var f=b.Lib,e=f.doc;var d=20200521;if(f._evt_ver){if(f.isNumber(f._evt_ver)&&f._evt_ver>=d){return}}f._evt_ver=d;f.Events={registedClass:[],registedObjs:[]};var c=function(g){var i=g||window.event;var h=true;f.each(f.Events.registedObjs,function(j){f.each(f.Events.registedClass,function(k){if(j instanceof k){if(j.bFocus&&j.handlerKeyDown){h=j.handlerKeyDown(i);if(!h){return false}}}})});return h};f.ready(function(){f.addEventListener(e.documentElement,"keydown",c)});f.mix(f,{getWheelDelta:function(g){g=g||window.event;var j,i=g.wheelDelta,h=g.detail;if(i){j=i/120}if(h){j=-(h%3===0?h/3:h)}return j}});var a={LEFT:0,MIDDLE:1,RIGHT:2};f.EnumMouseButton=a;f.detectButton=function(g){var h=g||window.event;if(h.which==null){return(h.button<2)?a.LEFT:((h.button==4)?a.MIDDLE:a.RIGHT)}else{return(h.which<2)?a.LEFT:((h.which==2)?a.MIDDLE:a.RIGHT)}}})(Dynamsoft);(function(b){var a=20200521;if(b._ui_eventWhich_ver){if(b.isNumber(b._ui_eventWhich_ver)&&b._ui_eventWhich_ver>=a){return}}b._ui_eventWhich_ver=a;b.switchEvent=function(c){c=c||window.event;if(c.which==null){c.which=(c.button<2)?1:((c.button==4)?2:3)}else{c.which=(c.which<2)?1:((c.which==2)?2:3)}return c}})(Dynamsoft.Lib);(function(b){var a=20200521;if(b._ui_style_ver){if(b.isNumber(b._ui_style_ver)&&b._ui_style_ver>=a){return}}b._ui_style_ver=a;b.currentStyle=function(f,g){var e=b.win,d=e.doc,c;if(f.currentStyle){return f.currentStyle[g]}else{if(e.getComputedStyle){c=g.replace(/([A-Z])/g,"-$1");c=g.toLowerCase();return d.defaultView.getComputedStyle(f,null)[g]}}return null}})(Dynamsoft.Lib);(function(f,h){var m=Array.prototype,i=!0,t=!1,l=f.Lib,b=f.navInfoSync,o=l.isString,v=l.each,s=m.slice,n=" ",p=(b.bIE&&b.IEMode<10),r=/[\n\t\r\.]/g;var d=20200521;if(l._ui_nodelist_ver){if(l.isNumber(l._ui_nodelist_ver)&&l._ui_nodelist_ver>=d){return}}l._ui_nodelist_ver=d;function w(z,A,y){var x=this;if(!(x instanceof w)){return new w(z,A,y)}if(!z){return x}if(typeof z==="string"){l.error("Err 4001.");return x}if(l.isArray(z)||z.isNodeList){Array.prototype.push.apply(x,l.makeArray(z));return x}x[0]=z;x.length=1;return x}w.prototype={isNodeList:true,length:0,item:function(y){var x=this;if(l.isNumber(y)){if(y>=x.length){return null}else{return new w(x[y])}}else{return new w(y)}},slice:function(){return new w(s.apply(this,arguments))},getDOMNodes:function(){return s.call(this)},each:function(z,y){var x=this;v(x,function(B,A){B=new w(B);return z.call(y||B,B,A,x)});return x},getEL:function(){var x=this;return(x.length>0)?x[0]:h},all:function(x){var z,y=this;if(y.length>0){z=l.all(x,y)}else{z=new w()}return z},one:function(x){var y=this,A=y.all(x),z=A.length?A.slice(0,1):A;return z}};function j(x){return o(x)&&(x=l.trim(x))&&x.length>=3&&l.startsWith(x,"<")&&l.endsWith(x,">")}function g(x){return(n+x+n).replace(r,n)}function u(x){return(x).replace(r,"")}function a(B){var y=B.innerHTML;if(!document.all){return y}var A=/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/ig;var z=/"'([^'"]*)'"/ig;y=y.replace(A,'$1="$2"').replace(z,'"$1"');var x=y.replace(/<(\/?)(\w+)([^>]*)>/g,function(D,C,F,E){if(C){return"</"+F.toLowerCase()+">"}return("<"+F.toLowerCase()+E+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(M,H,N,L,K,J,G,I){if(K){return'="'+K+'"'+J}return M})});return x.replace(/<\/?([^>]+)>/g,function(C){return C})}var q=function(B,D){var A=B.className,x,y=D.length,C,z,E;if(A){x=g(A);C=A;z=0;for(;z<y;z++){E=u(D[z]);if(x.indexOf(n+E+n)<0){C+=n+E}}C=l.trim(C)}else{C=D.join(" ")}B.className=C},k=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;while(A.indexOf(C)>=0){A=A.replace(C,n)}}B.className=l.trim(A)}},c=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;if(A.indexOf(C)<0){return t}}return i}return t};l.mix(w.prototype,{before:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.insertBefore(A,z.childNodes[0])})}},append:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.appendChild(A)})}},html:function(y){var x=this.getEL();if(x){if(l.isUndef(y)){return a(x)}x.innerHTML="";v(l.parseHTML(y),function(z){x.appendChild(z)})}},attr:function(z,x){var y=this.getEL();if(y){if(l.isUndef(x)){if(z==="readonly"){return y.readOnly?"readonly":""}if(z==="style"||!p){y=y.attributes[z];if(y){y=y.value}}else{y=y[z]}return y}if(z=="class"){y.className=x}else{y[z]=x}}},style:function(z,x){var y=this.getEL();if(y){return l.style(y,z,x)}},css:function(x){v(this,function(y){v(x,function(z,A){l.style(y,A,z)})})},addClass:function(x){var y=this.getEL();if(y){q(y,x.split(n))}},removeClass:function(x){var y=this.getEL();if(y){k(y,x.split(n))}},hasClass:function(x){var y=this.getEL();if(y){return c(y,x.split(n))}},parent:function(){var x=this.getEL();if(x){x=x.parentNode}return new w(x)},remove:function(){var x=this.getEL();if(x){x.parentNode.removeChild(x)}},offset:function(){var x=this.getEL();return l.DOM.getElDimensions(x,i)}});function e(x,z){var y=z;if(y&&y.isNodeList){y=y.getEL()}if(o(x)){if(j(x)){l.err("Err 4002.")}return new w(l.sizzle(x,y))}if(x.isNodeList){return x}return new w(x)}l.mix(l,{all:e,one:function(x,y){var z=e(x,y);return z.length?z.slice(0,1):z},isNodeList:function(x){return x instanceof w}});l.ready(function(){l.all=e})})(Dynamsoft);(function(e){var d=e.win,c=e.doc,b=isNaN;var a=20200521;if(e._dom_ver){if(e.isNumber(e._dom_ver)&&e._dom_ver>=a){return}}e._dom_ver=a;e.DOM={getOffset:function(p,j,l){p=p||d.event;var g=l||p.target,o=0,n=0,k=0,m=0,f,i,h=false;while(g&&!b(g.offsetLeft)&&!b(g.offsetTop)){i=g.scrollLeft;f=g.scrollTop;if(g.tagName==="BODY"){if(h){i=0;f=0}else{i=i|c.documentElement.scrollLeft;f=f|c.documentElement.scrollTop}}else{if(g.style.position==="fixed"){h=true}}o+=g.offsetLeft-i;n+=g.offsetTop-f;g=g.offsetParent}if(j){k=j.Left;m=j.Top}o=p.clientX-o-k;n=p.clientY-n-m;return{x:o,y:n}},getElDimensions:function(g,i){var f,h;if(!g){return{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}f=g.style.display;g.style.display="";h=i?{offsetTop:g.offsetTop,offsetLeft:g.offsetLeft,offsetWidth:g.offsetWidth,offsetHeight:g.offsetHeight}:{clientTop:g.clientTop,clientLeft:g.clientLeft,clientWidth:g.clientWidth?g.clientWidth:(parseInt(g.style.width)?parseInt(g.style.width):0),clientHeight:g.clientHeight?g.clientHeight:(parseInt(g.style.height)?parseInt(g.style.height):0)};g.style.display=f;return h}};e.getElDimensions=e.DOM.getElDimensions})(Dynamsoft.Lib);(function(g,h){var i=20200521,k=g.Lib,q;if(k._dialog_ver){if(k.isNumber(k._dialog_ver)&&k._dialog_ver>=i){return}}k._dialog_ver=i;q="data:image/gif;base64,R0lGODlhzAETAPf/AK/a/sfn/qnW/aLV/bPb/pnP/KnZ/9Ds/6jZ/8/s/6fY/57S/aTW/qHU/s3r/5XM/Mbn/sLk/bzh/Mrp/rje/K3b/6/d/6va/7nh/szq/8vq/8rp/8Xn/7Tf/8np/7Le/6rZ/6za/8Pm/6bX/sjp/7fe/J/T/bPe/6ra/7/k/5vQ/Lbg/sLm/8zr/7ri/rHd/77k/5rP/KjY/6zb/8Tm/rrg/Mjo/8bo/87r/8Tn/8bn/8Dl/6XW/s3q/8Ll/qPV/r/j/rfg/sXm/sfo/6LV/rbe/MLl/7Lc/bXf/s7s/67d/73j/5jO/Mrq/7zi/rrh/pfN/Ljh/rvh/MDj/ZbN/LTd/KjY/rnf/Kza/r7i/aLU/qHU/cjo/rvg/KXV/Ljf/bni/sDk/6fX/8np/sPl/qrY/cfo/sXn/qnY/sHj/bHb/pbM/KTV/b/j/arZ/rPf/6fX/rPe/aHS/LXe/M/r/8Hk/bjg/r7j/7Da/Z7S/KvZ/a7Z/b3j/pnO/Lvh/qvb/6fV/abW/p/S/LXg/sno/rTe/ZzR/L3i/cDk/rbf/rng/qHT/Lvi/qvZ/sHk/qvY/bvg/bzj/63a/qTU/LLd/p3R/ZzR/bDe/7Te/77j/rDZ/bXd/szq/sHl/6DU/rzh/a7b/prQ/b3i/sro/pjN/J/R/JXM+7bf/ZvQ/bbd/KjX/K3b/ZTM/K3d/6rY/rDb/pvP/JTL+53R/K3Y/aXX/rPc/bXd/K7b/7rg/cno/7jf/KfY/qna/6DT/aDU/aTV/sbm/rnf/Z7T/afX/aPU/KrX/JrQ/Lzj/sTm/7Hd/rbe/aTW/aXW/J3Q/KbV/KbW/bzi/6rX/ZrO/K/Z/anZ/r3h/b/l/7Lb/rfh/qjX/qvX/bvj/qbW/KzZ/bvi/73k/7ff/rHa/qLT/KDS/K7Y/bXe/bHa/cTl/anY/bbd+6LU/aXW/bfg/bjg/aTV/Lrf/LPd/p/T/MTl/q/b/anX/JXN/MPm/qnY/77i/q/Y/ZfO/LPc+7Tc/ZnO+63Y/AAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjAwMjY2NzMzQTQyMTFFODlFMUQ4ODdDOEJCNjY0RkEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjAwMjY2NzQzQTQyMTFFODlFMUQ4ODdDOEJCNjY0RkEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMDAyNjY3MTNBNDIxMUU4OUUxRDg4N0M4QkI2NjRGQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMDAyNjY3MjNBNDIxMUU4OUUxRDg4N0M4QkI2NjRGQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwABOcErJq1Qp0q9euXrn+DCvWJ9msYMmmDbv269izbbfGLdvzrIS5aN+q1cuWr1uzcP3KFUyXp128dwnn3cmECRQK6fYVK6CwQKUFmBdE2MyZc+bPnzuLBk1adGfSoE17Rp1Z9WbWrV3Dxuw6wmzNsmfXvr1bd27YvYH/Zh2c+HDUxZEfL708dfPQz2Or5t28kqVQBa5EppywQIPv4CGI/x8/Hrx58+TTn1+fnvz68+3Lvw8fH8J8+vHvf69vXz9//Q385199AAp4n4HzIfieguwROGB+D7ZXoIMHUpighQti2CCE55mwACoFUGALdzYxYOKJDEyg4oorouiiiSzG+KKLMbI4I4o1tngjjDlOsCOPOf6YYo9C9ujjj0YWSSSSS+6YJJNBQlmjklE62eSNT1pZJZZXzpgll1t62SUDRHiyQChQpEPiQQWMIIYCcMbpwJx00hnnnXfWqSeefOpZJ594+mknoHIK6gChhQqKKJyGHrpoo4sqAOmjhkY6KaKXEpopoJv2WSmlioLqp6WfYlqqpqdymqqnoSogxghkmv9gCROsrGlQAQrIgMCuvCKQwK/AAtvrsLsGayyxwxobLLK9Kisss8U6mwC00TpLra/SXivttNRuq2223YILrbfhWluust+aO664zJK7rrrtsousu/HCOy+4MigAawOVMPGArQUVIIMBBBdc8AEIJ5ywwQwTrPDDDTP8sMIRGzzxwhU7fPEBGWt8cccGbMxxxyKDXDLJG5ucMsofszyxyi1nfLLMK9Mcc8Uz41yzzjdHnLPPK8sgBgMNLFDAv5Uh4DLES1PcNMY2v/w0wjBLHTXTVzudNdQ8W9011l9rHTbXQPfc8M9n71y212uD3bbYb5OdttkSp4yAAkQbjXR3dFT57fbcbAP+d910W6y24HAjLjfhgTM+uOGFH3y444lTvjjkjWP+uOSRe5w55597vrnolWteOugPC5330QATVAAO3L6L7rnH0r6s7c/KXrvut/Oee72z+/5rusEDv7vxvSP/+732Eksv88VDf7z0yVO/vPPyYt98ssrSgcO+/e5t0yE9OGpqq6iir6r6rI4q6p7v/xn/oOe7Xz/898ufP/3p298//v/TXwD5tz7/FRCABxRgAgnYPgQ2UIEP7AEnJkAEWTGhHq1z3VQ2yMEOevCDIAyhCEdIwhIqpSYoTKEKV8jCFrrwhTCMoQxnSMMa2vCGOMyhDncYw4AAACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrOrxo8C1K4USsB6IHTuWyh6vXUssIst2DSC0XEsIYMtWDlyueOiSjXGXQhG9ZavcBQv4gdnBawG7HTy3sN27eQvzvfu3MBXBcAkDPpw5sd7FmRsDfgw3MuDJcCtvxoxWs17OrT3TBd1atF7SaE3rRY1W9WvWXl3ThR1c9lhWsUwVUFjgARQmTFRckUC9uoQugnwaO2K9ehdmPmNo/+tOXQq58F7IU6/yM496CTV+SlePXTt38t/DjydvHv179j65p158Ps2HX3Y9bUcfeD2Jp15/DaanHoA9CUgegT0Z2F19Cd63IYM8OcjfeRH+1957GPKkoXUc8qQgfiDeBB0UDyyX0E2hWFLJAiZkEcGPQEYwxTILFGmkkSZ8ESSQaehx5JPChLPkj3UQ8OSTZUz5Iy5XHjmAlkJ2iaSPUw4pJo9KTtnkmVFqWeWZC2SpJZdnfqnlFHD2eCeRYiap5Zpitjnlm2fKOSWdYtpZZp5kLmlmn2kuCWiXgi5JqJiGLolol4o6yuieZ/qpppNGVmJJKDcxhwqPDbT6gw8QxP8qKwRCoNHqrbj+4MessgqhBq7AEoEJr7KCAyyuWkhCbKyZHIvrCMtCQIMWzroKK7G1VtuArsv6qq2w0RpbbbLRNqsttMtOq+2r3dpaLbfY/lotuMuK6yy5y5pbLbrEqvvutbxm++6u8X47bL3a4kusvs7yy6u/zrKLrbsRExywvK2asAAqNtq0gCdEMCAyA3CcMcHJKE/ABRYjtyzyCECkjDIXhbjcMi12yHwyIX7YPDIPyeg8wRg++DwyNUJPYAYPRpNsss4rNw2z0DQ3jbPQPDcNtNBEN80A0kIv3XTJVLNs9NRQ12z01TpnbfTWOnfdNNg6i2002VCb7TPaMlf/vXbObff8dtBxFz130nb7jHffetvMd8p+M0CEJwt0fFABJoQ8ghgKdA4CCQ6ELroDTVjQ+emoG2DE6KJrEATqsBvgDeuhZ3AH7KjL0AHtDrSQA+6oV8C7AxsgALznoNNe+vEKqM6768zLzrvtzOvOu+/MKyA878Uz/znvyx/vPO3Qiz877dQfbz3t2DO/Pe3dH/+98qaLvzr5r5s//e3q787+7+4bXvyANz/WhQ9442Od68QwAsmZwHIGKUADGDACBcgAARhEwB88kIAOejABLbhEBkeIwQuI4IMedEAUSDhCFEQChR3EQQpYmEEDDAKGCUjCDWiYQSXgMAEaQAEP/zXIQRiGcIgmxKEKh+hCHMpwiDbEoQ6HiAAf4jCIQ9wgDo/IwyTCcIk8bCIMn8jDKMJwikO0IgyxyEMtGlGEXTzhF1cYxheOcYZlvOEZd5jGH7KRhm5EIRdp6EUUOsAOCmhgAyBYkAL8gAFikIEBJknJGWzgAJjM5AEccAJKenKSIUCGJjOJAwx80pMX4MMoMUmHHZySkiBYwSoPkIAhvJKSFpjlATJwgVsawJKz5KQvQznLUvoylbNspS9jOcta+tIAuZwlL30JzFUK85bEXKUxb4nMVSrzlsxcpTN9Gc1VTvOW1RzlNV+ZzVFu85XdHOU3XxnOUY7zluUc5Tlfmf9OTa7zlO3UJA7sIAYGLJI5ZKggAl5ZgUuusgedxKYIgvmEY6pSm64EpyzFaUty6nKfp2zoLCE6zIlas6LcvKg7M0rPjdqzo/j8aC9vKdKHRpSdJlUnSuGpUoGy9JT11OQ9X5lPTYL0kzUdJUklSlGLFvOnnwxqJod6yqJm8qieTKoml4rTWbbADgZlJEEKAIEz3EOSDHWoPm8K0Jz6c6enjKdPl+lSocKUqLrUQAh8qdWrsvWTIXBrJh0A10/KlZRQ9aRUMUnVT1oVk3rlq1qN+ldPBrapKX0qXZt516rmda80naxfS4pZnmpWo5x95mMPENnQSrOylLysPDdQjoOr3igYozADCIY4AxJc8QNZZMEWwcDEbSjRGkPkhR5RiEYeqhGFTbgAb327RuC2UbhGJG4YjftF5PJQuVLko3N/GN3p/ja4wy3ucZO73A82l4bP/WB5edjb8143vdtd73fb68H3sjC+HpwvDetbXfR6kA444EQA0CHWsU7lwRCOsIQnTOEKW/jCGM6wUmrC4Q57+MMgDrGIR0ziEpv4xChOsYpXzOIWu/jFJQ4IACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrKCYo8C1K4Uich6IHTuWyiSvXUvsIcv2QR+0XefEaDsWShm4FEoAoit2TSm8FKrwFUvqCF6wg83iVTvYLWC5g+0u3svXL2DBgwsfDstXMVzGg9/ihcxX8mfKdC3jxcxXM1zEnc9+Xhv68dzSd08PVg2XNV3XaGHT9YwW9ANWsUwVUFjgARQmTFSkkkC9uoQaXnyqUGW9upQjPw1J/+lOvYYg7ZrIX3/kMwYx9RKu/JSuHrt27uS/hx9P3jz6+uz15B588mk3XX/Z9bSdevr5JF595ymYXn8B8jSgegUqeGB39imIX3cN9vRgfxHypMKEHFa404XkZWjihtZ1aOKH1ukHHRQPLJfQTaFYUskCW0ASwZBERtCGHgskqaSSJqxSJJF1fLHklECm8eSQWbBBpZK9bHJlBFOosaWSw3wZwSFjJhnkl0em2eSXUaZZ5ZdZptnll2HKWeaXaKa55pVtjvnmlXH6aeWVdY5555V5prnnlX2O+eeTgW456JOFSnrok4luueiTjY756JORbjlpkZVSeWmRUVZiSSg3Mf+HygImNGArD0BAoOuuENDwiq3ABvsDJbzy6kSwyDYQiBDF6koGGskC+4sdzUIgRCLR2qpFI9VC4AMR2TaAa7W+hjtst8eGu2y1z4Y7bbXXhrttt9+GO26z5WZ7brXpZrtus+1m+26z8WY7b7X1ZntvsflGu2+z/Ub7b7EBRztwsQVHe3CzCUe7MK8NJ/twsX6YsAAqOtq0gCdEMOAyA1b4MMHMNE8QQBwv5+zyCKfUTPMYiOissxtm+DzzGVgI/fIuThg9ARdPKO0yD6A4PQENI0gNs8xG36w1z04DrTUDRDuNtNZMOw211lRbjbXWMTvttdRgGy221mUbfbbUaRv/vbbUbTv9ttRxd40z3T3bHTTeReudNN9N+x014FULnjXhXPs8t9J1+0yIKJ4skPJBBZjQ8ghiKKB6CDk44PrrDngQhOq0124ABrC/3gILtfeuQAVN5O46CS/4TvsFKQjvgAZLGK+6DB8o78AQIDivAOvKy2797crvbv3vwQtPvPXIK8+89dBLT7312AuvvfPcC++99cArP77z5Qt/vvPpK7++8+3L3fuMF7/czc959RNf8fCXPP01j3/R81/1ANg6980OfriDXQ84MQZRmGB0BilAAxgwAgXIAAEoREArOJCAFrowARqIQgpniEIUuOCFLkxCDmhIQwtoAIct9MAH/3iYwhnsAIgJaAEMiIhCA3QAiQkgwQWYqEIWAjGGVLQhEnVIRQT4EIlCpKIRkahEKjoRilKk4gqRiEUmahGIXKTiF4EYRiaOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGIr6xhXTAAScI4QcQFqQAPGCAGGRggFKa0gI6OIAqV3mADGDAlLAs5QVcwMpVJoADsYzlCzJQS1Vu4AS5NGUFdtDLAzggBcEsJQiQUMwD5KICyTQAKovpymjOspi3jKYBdlnMX0ZzmMU8ZjSX2cxnRnOavaxmMq/Zy2xGk5u99GYywdlLcSaTnMU0ZzLRWf9LdQaTnbV0ZzLhWUt5BpOetbRnMPHZS30Gk5+s9GcuAXoAOvRgAhDwJEEKAAQrKAABD01lOl+ZzBDQsp24jOYHNNDNDnwzDOFE5j2ZWUwbQHOfIu0nSYNpUmymNJkrbelLYzpOmvbSpufMaUR3msueolSbQY2nS+cJ03rKdKFGrSVScUpNpsbSqQH9aTCjWtCpHrSqCb1qLhmq1ZuGtKvRBGsCHIBRjQ6kABAgAwhI+VAOFFMDXoUlWFkp0LGytJceMGsuK4BWVip0rVll5Vb7+tfAmnKwthRrLsnKysQO1apFbeZkc2kBv/YSsHE9aVihethaepaqRJ2paN1KWtPJ1hK1JVUtYTUbS86u8rVnjS1WZ3tO27IStzw9qUXrypxgjMIeIZBjDpDYBAxQ8QJg2KIIuvgBD/DxDWJMARkbycRHAvEGFZAuda3LROxql7veBSIJwGtH8TKyi+bFIXrVC8TqXje7cNwuFbv73fCOF79Q3C8TLTDd/rKXiO4NMHwLXN8DUzG/L1QwERm83v9mkhOjCIZd7zqVEpv4xChOsYpXzOIWu/jFSqmJjGdM4xrb+MY4zrGOd8zjHvv4x0AOspCHTOQi7zggACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrPTlo8C1K4Uizh6IHTt2TTOvXqvEIMsWigC0XEs8Ysu2jy24FOaMozuWiji8FI7wHctkGl6wgx+YBaw2sVu8chM/sItXb2K/gAUnLnw47ODFeBsPfgw3cmLKcC0PxoxX82DOcBF/Pht67ei3peeevpt67+q/rSXDRiubL2ivJUrU6meqgMICD6AwYWKoloTr2CXUKOYzxqLs2XXl//GpYhb4613w/JR15byEK17Ic3MvocjP6u63d//uXjx58+elt15758EnH332+YTfefr15B19/vVUnnsC+sSeewZKOJ97Cfa0IHgN8vRgf+NJCCB4FfZ0YYHxaYjgfdYxyJ2D/GUnRRdzxOBcQjeFYkklC2zxRQREFhlBG3gsoOSSTD5jpJHVsMHklL5c8ySRaSgz5ZQ/HHJlBFmUseWSJnTzZQSfjLmkkF8iqaaSTn4Z5ZtVfpnlmwt0+WWYb5Z5Zppvsnmlm2/GeeWcatZ55Z1v6nkln2r6+SWgagr6JKFqGvokomMq+iSjajr6JKRjSnolpWNaaiSmY2oaQR1TZP9Rwo42obKACQ3kGogTEPTqKwQ0YJLrsMRq4cqvvzqCBrHM8pAIsr0C8wSzzGbjCLQQ+IAHtcP+oAa2EADxA7e68gptsOQ2YCy4yqbrLLbSptuAtdhqm6634Iqb7q7Yokvuuti2S+670MabLr3Q2ksuvtjqSy6/5wr777EBLzvwswVPe/C1CW+78LcNj/uwucj6yy3A0Z5zJK0HFbCAJ0QwIDMDbgAxwc04T2CGIjP3PLMkY+SMMw1Y+NyzFRgIfTMhmRjdcyM0KD3BGXE4LfMIhUg9ARlwWE2zzUrv7DUDQEtNtNdIS8302FBLTbXXWGvNtdc1Sy2212UrfbbVaSv/vbbXbSv9ttVxSz231XWHzTPeQetdNN9J+9004FELXjXhWRveNeJgC3231XmPEoAQEbBsUAEmxDyCGAq0XoERDsQuuwMbQNP67bgr8EEGs8t+wwu5435BJL3HnkEnweNuwQ3FO0DCCsm3bkAQzTuQAwrRK/B687Vnrzvvxf+e/fDNH+/98s0/n/301V+f/fbFd5/97s2LHz35xZufPfrFqx89+81zX/Tg1zv5RY9+4QPe/YiXP+Ttj3n9g97/qBdA7A0QdvGz3fwy0ANOTCAA5zBdQQrQAAaMQAEyQIAKEaAEFiTghTBMQAaWsMIarrADDoghDIfwARvWcAbf0OEL/3HAAh/W8BIkEGICPIANI6oQBVFQYgI4MAMnstCFQpyhFRGAQyXy0IpAVCIRt4hEJTLRilCUIhWt2EIlatGKXRTiF50YRiGO0YplFOIZnZhGJa7RiW3MIg3hmEM59pCOQbRjEfGYRD02kY9R9GMVAYlFHb7RiR3oAQ44MQpgiJAgBeABA8QgAwOY8pQvEMEBVsnKA/TgDqeM5SmR4IBWstIGHZBlLCsAA1uuMgEs0GUsT2ADXx5gAxgQpikvgAFjHkAHFVCmAVJpzFdK0wC0NCYupclLYwLzmsQ0JjKlyUxnQlOa1PSlNaWZTV9uU5nd9OU3pRlOX45TmeU05jmVmf9OW65Tme205TuFGU9bzlOZ9bTlPYWZT1/uU5j9bOU/hYkEDk4AAp8cSAGcgAYFIACiqlTnEq65gh5oM5fw7KU8g0nPYtozmcpEQTONyYFboDOk/hypNEt6Um6q1KAsRahLFQpTYcrUmTW9aTV1qkyeuhOlBP1pKw8qzIS2cqG6PCpNbcpPnEqUqcJ0qkChqsuCTjWoVR3qVYua1Zn6MqldXeo1B7GBi2ZUIAWAACJCUEqQGtMBYNXlCjJgzCGQVZZmbaURQCDNDqiVlViVJQqegFQLKNWXgCUpYX1pWJ86c7GNfewqIxvLyVb2srbM7E43a8vOpvSzjFWmY8XJVsnhUpamlo0rZgMry8EW9rC7lKpiYyvM2b5UmqbFLWpbqVphyuAEvbrrPwoQjFEgogJWtEAlY9iCY2xxBRpQ4g3eAEYYSHEHKLDiG25gxihY0QBgkKIIlJDd7cKwu98NrxDHW97zpteJ623ve+OrxPnWV4n4tSJ4xUteOppXiehVL3v16F4nwle+9HWidhHsXQXrV4f8dbB/JSxgCxNYiAbWsH1fmGAbykABI0iGMqQ73anY+MY4zrGOd8zjHvv4x0BWSk2GTOQiG/nISE6ykpfM5CY7+clQjrKUp0zlKluZyQEBACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrKCYo8C1K4Uich6IHTuWyiSvXUvsIcv2QR+0XefEaDsWShm4FEoAoit2TSm8FKrwFUvqCF6wg83iVTvYLWC5g+0u3svXL2DBgwsfDstXMVzGg9/ihcxX8mfKdC3jxcxXM1zEnc9+Xhv68dzSd08PVg2XNV3XaGHT9YwW9ANWsUwVUFjgARQmTFSkkkC9uoQaXnyqUGW9upQjPw1J/+lOvYYg7ZrIX3/kMwYx9RKu/JSuHrt27uS/hx9P3jz6+uz15B588mk3XX/Z9bSdevr5JF595ymYXn8B8jSgegUqeGB39imIX3cN9vRgfxHypMKEHFa404XkZWjihtZ1aOKH1ukHHRQPLJfQTaFYUskCW0ASwZBERtCGHgskqaSSJqxSJJF1fLHklECm8eSQWbBBpZK9bHJlBFOosaWSw3wZwSFjJhnkl0em2eSXUaZZ5ZdZptnll2HKWeaXaKa55pVtjvnmlXH6aeWVdY5555V5prnnlX2O+eeTgW456JOFSnrok4luueiTjY756JORbjlpkZVSeWmRUVZiSSg3Mf+HygImNGArD0BAoOuuENDwiq3ABvsDJbzy6kSwyDYQiBDF6koGGskC+4sdzUIgRCLR2qpFI9VC4AMR2TaAa7W+hjtst8eGu2y1z4Y7bbXXhrttt9+GO26z5WZ7brXpZrtus+1m+26z8WY7b7X1ZntvsflGu2+z/Ub7b7EBRztwsQVHe3CzCUe7MK8NJ/twsX6YsAAqOtq0gCdEMOAyA1b4MMHMNE8QQBwv5+zyCKfUTPMYiOissxtm+DzzGVgI/fIuThg9ARdPKO0yD6A4PQENI0gNs8xG36w1z04DrTUDRDuNtNZMOw211lRbjbXWMTvttdRgGy221mUbfbbUaRv/vbbUbTv9ttRxd40z3T3bHTTeReudNN9N+x014FULnjXhXPs8t9J1+0yIKJ4skPJBBZjQ8ghiKKB6CDk44PrrDngQhOq0124ABrC/3gILtfeuQAVN5O46CS/4TvsFKQjvgAZLGK+6DB8o78AQIDivAOvKy2797crvbv3vwQtPvPXIK8+89dBLT7312AuvvfPcC++99cArP77z5Qt/vvPpK7++8+3L3fuMF7/czc959RNf8fCXPP01j3/R81/1ANg6980OfriDXQ84MQZRmGB0BilAAxgwAgXIAAEoREArOJCAFrowARqIQgpniEIUuOCFLkxCDmhIQwtoAIct9MAH/3iYwhnsAIgJaAEMiIhCA3QAiQkgwQWYqEIWAjGGVLQhEnVIRQT4EIlCpKIRkahEKjoRilKk4gqRiEUmahGIXKTiF4EYRiaOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGIr6xhXTAAScI4QcQFqQAPGCAGGRggFKa0gI6OIAqV3mADGDAlLAs5QVcwMpVJoADsYzlCzJQS1Vu4AS5NGUFdtDLAzggBcEsJQiQUMwD5KICyTQAKovpymjOspi3jKYBdlnMX0ZzmMU8ZjSX2cxnRnOavaxmMq/Zy2xGk5u99GYywdlLcSaTnMU0ZzLRWf9LdQaTnbV0ZzLhWUt5BpOetbRnMPHZS30Gk5+s9GcuAXoAOvRgAhDwJEEKAAQrKAABD01lOl+ZzBDQsp24jOYHNNDNDnwzDOFE5j2ZWUwbQHOfIu0nSYNpUmymNJkrbelLYzpOmvbSpufMaUR3msueolSbQY2nS+cJ03rKdKFGrSVScUpNpsbSqQH9aTCjWtCpHrSqCb1qLhmq1ZuGtKvRBGsCHIBRjQ6kABAgAwhI+VAOFFMDXoUlWFkp0LGytJceMGsuK4BWVip0rVll5Vb7+tfAmnKwthRrLsnKysQO1apFbeZkc2kBv/YSsHE9aVihethaepaqRJ2paN1KWtPJ1hK1JVUtYTUbS86u8rVnjS1WZ3tO27IStzw9qUXrypxgjMIeIZBjDpDYBAxQ8QJg2KIIuvgBD/DxDWJMARkbycRHAvEGFZAuda3LROxql7veBSIJwGtH8TKyi+bFIXrVC8TqXje7cNwuFbv73fCOF79Q3C8TLTDd/rKXiO4NMHwLXN8DUzG/L1QwERm83v9mkhOjCIZd7zqVEpv4xChOsYpXzOIWu/jFSqmJjGdM4xrb+MY4zrGOd8zjHvv4x0AOspCHTOQi7zggACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrJjMosC1K4Ui0R6IHUtW2hGvXedMIsv2ASy0XauUajsWihy4XOFJoyuWFCC8JczxFdtnK1ywgx+Yxas28Vu8cgfbxUtB72C/gAUPLowX8eDFcBsPfgw3Mt/JeC3zxQw3cGLOh8N+Pht67WjKpumihquaLmu0rjcbRuuZ7+ISyNP5K6CwwAMoTJjIwiOhunUJNTT9zFPkuvV39H7G/+vivboudz5VeClfvUSe9NHYS7H1czr77Nu7lwcvnnz58+mtx5578MlHn0/2lYefT9yxx59P47EHYE/qsScBgRTGV9589VGnoHYM6ufdgz1F+B96FApYHoY8qaChdxwi6KF3C/bUoBRd1EABcwndFIollSygTjkRFGlkBFNsssCSTDbJBiRHGpnFPE1WucA6U0RZ5CfoWMmkCWVouSUbXi7pCx5iRoCLMGUKSaSWSba5wJNiTiknlmJy2SaYaX5CZplnprlmm0OKGWebdGppZ5t4aqlnmXzm+aeXgYo5aJmFwqkkolAqSiWjWTraJaRhStpmpVpe6mWmUR5a5pN1TP+RhQQ82oTKAiY0oCscikDg668QCKGIrsQW24AVQAD7KxlxGGusK/Io66sjADhLLBEASOsrEFZYqysPhWgLgSg/eNsAr9oKa+6xyUrL7LrQakutudiKy6254IpLrrnoSquuuchq+6658Uo7r7f1anuvt/lqu6+3/Sr7r7cBu9sswdEaXC3C2SrcLcPhOlwuxL36OyzA+JwTQRu1HlTAAp4QwcDMDLghygQ45zwBF07Q7DPNWPigc84QsPPzz6BAMDTONFByNM20wLM0zmRg8fTMVrQz9QSIwHF1zTcvzfPXDAQ9ddFkJz11019HvXXVX2e9dddf2zz12F+bvTTaX6v/vTTbV7s9NdxXyz013VfbLXbPeQu9t9F9K/2304FLPbjVhWt9uNeJhz003ldfAIQQEbRsUAEmyDyCGAq0XkEYDsQuuwMZpND67bgr8IIIs8vugQu5534CCb3HfgMSwd8uwwrFx57DC8m3fgEjzTtgxAXRK/B687Vnrzvvxf/u/fDNH5/98tU/n/301V+f/fbFd5/97s2Lnz35xZsfPfrNqx89+81zX/Tg1zv5RY9+4QPe/YiXP+Ttj3n9g97/qBdA7A0QdvGzXfLEMAJJpMx0BSlAAxgwAgXIAAEoRIASOpGAFrowAUnYQQpnmMIPcOCFLtQAI2hIw0F4AIctJMEK/3g4wygkAYgJ4MAHiIjCP0QCiQkQQQWYqEIWAjGGVESADZGowyz6EIlCzKIRkahEKjoRilKk4gqRiEUqbhGIXaTiF4EYRiqOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGGspAASPAwidASJACBIIBYpCBAUZJSgsY4QCoTOUBEhAGEJDylaM8gQ5UmcoMOAGWsFzBBmiJSg8EAZevxAAOeHkAHZwAmKMMwR2IeQAR3AKZBjAlMVnpSmTKkpi2hKYBdElMX2pTmMQ0JjSVyUxnQlOavKQmNK/Jy2xCk5u89CY0wclLcSKTnMQ0JzLRSf9LdVpzlu285Tt3Gc9fznOY9TzmPZeZz2fu85TpbCUuZSAGBriCkwMpAAbcoAAEAJOftEzBBdYJUFr2gBHaDAJBaSlPZLoAobS0JzDxyUsWWOCcEOWlSElKzJOmdKWqbCkwXxpOhc6UoTW96UOZudN/9hSl0FRpNw3qUpiqUqa4pCktbYpTpo7Uqbz0aVSBmkqh4pKoCR0nUreq1I/mNKRfJSUCFMCABmBUIAUYVwhE6VZmwiCuuOxASVXpAKgiMwgemKo2qRfODkDzAjBgphHaikuQqvKv0BQsMQub0sQWdLEOaOxjI0vMyXaVmJhFpmZ5ydmoepalVAUmY+vpWGTkQlaylIWlZVOZWmCulpatPexrgxpbXM42prUF5m1Lm9tX7haVvTUARet6138UIBijyEQkiagEFkBxCRcQJBIdAIYsroAESPRAIpnoggyQsZFE5AUMoNgJJajRu0gEr3iBSF7zoheI6s1ie99LRfnS175+xC8Q9cvEN+Kwv1Q8b3rXS8QBM7LA80Vife/73fA2eJAPLm+E/4vDAFPRwjjMY3wzDMQNJ7jDKLzkCBhggupadyo4zrGOd8zjHvv4x0AOspCVUpMiG/nISE6ykpfM5CY7+clQjrKUp0zlKlv5ylh2ckAAACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrPTlo8C1K4Uizh6IHTt2TTOvXqvEIMsWigC0XEs8Ysu2jy24FOaMozuWiji8FI7wHctkGl6wgx+YBaw2sVu8chM/sItXb2K/gAUnLnw47ODFeBsPfgw3cmLKcC0PxoxX82DOcBF/Pht67ei3peeevpt67+q/rSXDRiubL2ivJUrU6meqgMICD6AwYWKoloTr2CXUKOYzxqLs2XXl//GpYhb4613w/JR15byEK17Ic3MvocjP6u63d//uXjx58+elt15758EnH332+YTfefr15B19/vVUnnsC+sSeewZKOJ97Cfa0IHgN8vRgf+NJCCB4FfZ0YYHxaYjgfdYxyJ2D/GUnRRdzxOBcQjeFYkklC2zxRQREFhlBG3gsoOSSTD5jpJHVsMHklL5c8ySRaSgz5ZQ/HHJlBFmUseWSJnTzZQSfjLmkkF8iqaaSTn4Z5ZtVfpnlmwt0+WWYb5Z5Zppvsnmlm2/GeeWcatZ55Z1v6nkln2r6+SWgagr6JKFqGvokomMq+iSjajr6JKRjSnolpWNaaiSmY2oaQR1TZP9Rwo42obKACQ3kGogTEPTqKwQ0YJLrsMRq4cqvvzqCBrHM8pAIsr0C8wSzzGbjCLQQ+IAHtcP+oAa2EADxA7e68gptsOQ2YCy4yqbrLLbSptuAtdhqm6634Iqb7q7Yokvuuti2S+670MabLr3Q2ksuvtjqSy6/5wr777EBLzvwswVPe/C1CW+78LcNj/uwucj6yy3A0Z5zJK0HFbCAJ0QwIDMDbgAxwc04T2CGIjP3PLMkY+SMMw1Y+NyzFRgIfTMhmRjdcyM0KD3BGXE4LfMIhUg9ARlwWE2zzUrv7DUDQEtNtNdIS8302FBLTbXXWGvNtdc1Sy2212UrfbbVaSv/vbbXbSv9ttVxSz231XWHzTPeQetdNN9J+9004FELXjXhWRveNeJgC3231XmPEoAQEbBsUAEmxDyCGAq0XoERDsQuuwMbQNP67bgr8EEGs8t+wwu5435BJL3HnkEnweNuwQ3FO0DCCsm3bkAQzTuQAwrRK/B687Vnrzvvxf+e/fDNH+/98s0/n/301V+f/fbFd5/97s2LHz35xZufPfrFqx89+81zX/Tg1zv5RY9+4QPe/YiXP+Ttj3n9g97/qBdA7A0QdvGz3fwy0ANOTCAA5zBdQQrQAAaMQAEyQIAKEaAEFiTghTBMQAaWsMIarrADDoghDIfwARvWcAbf0OEL/3HAAh/W8BIkEGICPIANI6oQBVFQYgI4MAMnstCFQpyhFRGAQyXy0IpAVCIRt4hEJTLRilCUIhWt2EIlatGKXRTiF50YRiGO0YplFOIZnZhGJa7RiW3MIg3hmEM59pCOQbRjEfGYRD02kY9R9GMVAYlFHb7RiR3oAQ44MQpgiJAgBeABA8QgAwOY8pQvEMEBVsnKA/TgDqeM5SmR4IBWstIGHZBlLCsAA1uuMgEs0GUsT2ADXx5gAxgQpikvgAFjHkAHFVCmAVJpzFdK0wC0NCYupclLYwLzmsQ0JjKlyUxnQlOa1PSlNaWZTV9uU5nd9OU3pRlOX45TmeU05jmVmf9OW65Tme205TuFGU9bzlOZ9bTlPYWZT1/uU5j9bOU/hYkEDk4AAp8cSAGcgAYFIACiqlTnEq65gh5oM5fw7KU8g0nPYtozmcpEQTONyYFboDOk/hypNEt6Um6q1KAsRahLFQpTYcrUmTW9aTV1qkyeuhOlBP1pKw8qzIS2cqG6PCpNbcpPnEqUqcJ0qkChqsuCTjWoVR3qVYua1Zn6MqldXeo1B7GBi2ZUIAWAACJCUEqQGtMBYNXlCjJgzCGQVZZmbaURQCDNDqiVlViVJQqegFQLKNWXgCUpYX1pWJ86c7GNfewqIxvLyVb2srbM7E43a8vOpvSzjFWmY8XJVsnhUpamlo0rZgMry8EW9rC7lKpiYyvM2b5UmqbFLWpbqVphyuAEvbrrPwoQjFEgogJWtEAlY9iCY2xxBRpQ4g3eAEYYSHEHKLDiG25gxihY0QBgkKIIlJDd7cKwu98NrxDHW97zpteJ623ve+OrxPnWV4n4tSJ4xUteOppXiehVL3v16F4nwle+9HWidhHsXQXrV4f8dbB/JSxgCxNYiAbWsH1fmGAbykABI0iGMqQ73anY+MY4zrGOd8zjHvv4x0BWSk2GTOQiG/nISE6ykpfM5CY7+clQjrKUp0zlKluZyQEBACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrKCYo8C1K4Uich6IHTuWyiSvXUvsIcv2QR+0XefEaDsWShm4FEoAoit2TSm8FKrwFUvqCF6wg83iVTvYLWC5g+0u3svXL2DBgwsfDstXMVzGg9/ihcxX8mfKdC3jxcxXM1zEnc9+Xhv68dzSd08PVg2XNV3XaGHT9YwW9ANWsUwVUFjgARQmTFSkkkC9uoQaXnyqUGW9upQjPw1J/+lOvYYg7ZrIX3/kMwYx9RKu/JSuHrt27uS/hx9P3jz6+uz15B588mk3XX/Z9bSdevr5JF595ymYXn8B8jSgegUqeGB39imIX3cN9vRgfxHypMKEHFa404XkZWjihtZ1aOKH1ukHHRQPLJfQTaFYUskCW0ASwZBERtCGHgskqaSSJqxSJJF1fLHklECm8eSQWbBBpZK9bHJlBFOosaWSw3wZwSFjJhnkl0em2eSXUaZZ5ZdZptnll2HKWeaXaKa55pVtjvnmlXH6aeWVdY5555V5prnnlX2O+eeTgW456JOFSnrok4luueiTjY756JORbjlpkZVSeWmRUVZiSSg3Mf+HygImNGArD0BAoOuuENDwiq3ABvsDJbzy6kSwyDYQiBDF6koGGskC+4sdzUIgRCLR2qpFI9VC4AMR2TaAa7W+hjtst8eGu2y1z4Y7bbXXhrttt9+GO26z5WZ7brXpZrtus+1m+26z8WY7b7X1ZntvsflGu2+z/Ub7b7EBRztwsQVHe3CzCUe7MK8NJ/twsX6YsAAqOtq0gCdEMOAyA1b4MMHMNE8QQBwv5+zyCKfUTPMYiOissxtm+DzzGVgI/fIuThg9ARdPKO0yD6A4PQENI0gNs8xG36w1z04DrTUDRDuNtNZMOw211lRbjbXWMTvttdRgGy221mUbfbbUaRv/vbbUbTv9ttRxd40z3T3bHTTeReudNN9N+x014FULnjXhXPs8t9J1+0yIKJ4skPJBBZjQ8ghiKKB6CDk44PrrDngQhOq0124ABrC/3gILtfeuQAVN5O46CS/4TvsFKQjvgAZLGK+6DB8o78AQIDivAOvKy2797crvbv3vwQtPvPXIK8+89dBLT7312AuvvfPcC++99cArP77z5Qt/vvPpK7++8+3L3fuMF7/czc959RNf8fCXPP01j3/R81/1ANg6980OfriDXQ84MQZRmGB0BilAAxgwAgXIAAEoREArOJCAFrowARqIQgpniEIUuOCFLkxCDmhIQwtoAIct9MAH/3iYwhnsAIgJaAEMiIhCA3QAiQkgwQWYqEIWAjGGVLQhEnVIRQT4EIlCpKIRkahEKjoRilKk4gqRiEUmahGIXKTiF4EYRiaOEYhlZOIZkZhGJq7xijJ04w3huEM5/pCOQ7TjEfG4RD0+kY9T9KMVcdhGIr6xhXTAAScI4QcQFqQAPGCAGGRggFKa0gI6OIAqV3mADGDAlLAs5QVcwMpVJoADsYzlCzJQS1Vu4AS5NGUFdtDLAzggBcEsJQiQUMwD5KICyTQAKovpymjOspi3jKYBdlnMX0ZzmMU8ZjSX2cxnRnOavaxmMq/Zy2xGk5u99GYywdlLcSaTnMU0ZzLRWf9LdQaTnbV0ZzLhWUt5BpOetbRnMPHZS30Gk5+s9GcuAXoAOvRgAhDwJEEKAAQrKAABD01lOl+ZzBDQsp24jOYHNNDNDnwzDOFE5j2ZWUwbQHOfIu0nSYNpUmymNJkrbelLYzpOmvbSpufMaUR3msueolSbQY2nS+cJ03rKdKFGrSVScUpNpsbSqQH9aTCjWtCpHrSqCb1qLhmq1ZuGtKvRBGsCHIBRjQ6kABAgAwhI+VAOFFMDXoUlWFkp0LGytJceMGsuK4BWVip0rVll5Vb7+tfAmnKwthRrLsnKysQO1apFbeZkc2kBv/YSsHE9aVihethaepaqRJ2paN1KWtPJ1hK1JVUtYTUbS86u8rVnjS1WZ3tO27IStzw9qUXrypxgjMIeIZBjDpDYBAxQ8QJg2KIIuvgBD/DxDWJMARkbycRHAvEGFZAuda3LROxql7veBSIJwGtH8TKyi+bFIXrVC8TqXje7cNwuFbv73fCOF79Q3C8TLTDd/rKXiO4NMHwLXN8DUzG/L1QwERm83v9mkhOjCIZd7zqVEpv4xChOsYpXzOIWu/jFSqmJjGdM4xrb+MY4zrGOd8zjHvv4x0AOspCHTOQi7zggACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrOrxo8C1K4USsB6IHTuWyh6vXUssIst2DSC0XEsIYMtWDlyueOiSjXGXQhG9ZavcBQv4gdnBawG7HTy3sN27eQvzvfu3MBXBcAkDPpw5sd7FmRsDfgw3MuDJcCtvxoxWs17OrT3TBd1atF7SaE3rRY1W9WvWXl3ThR1c9lhWsUwVUFjgARQmTFRckUC9uoQugnwaO2K9ehdmPmNo/+tOXQq58F7IU6/yM496CTV+SlePXTt38t/DjydvHv179j65p158Ps2HX3Y9bUcfeD2Jp15/DaanHoA9CUgegT0Z2F19Cd63IYM8OcjfeRH+1957GPKkoXUc8qQgfiDeBB0UDyyX0E2hWFLJAiZkEcGPQEYwxTILFGmkkSZ8ESSQaehx5JPChLPkj3UQ8OSTZUz5Iy5XHjmAlkJ2iaSPUw4pJo9KTtnkmVFqWeWZC2SpJZdnfqnlFHD2eCeRYiap5Zpitjnlm2fKOSWdYtpZZp5kLmlmn2kuCWiXgi5JqJiGLolol4o6yuieZ/qpppNGVmJJKDcxhwqPDbT6gw8QxP8qKwRCoNHqrbj+4MessgqhBq7AEoEJr7KCAyyuWkhCbKyZHIvrCMtCQIMWzroKK7G1VtuArsv6qq2w0RpbbbLRNqsttMtOq+2r3dpaLbfY/lotuMuK6yy5y5pbLbrEqvvutbxm++6u8X47bL3a4kusvs7yy6u/zrKLrbsRExywvK2asAAqNtq0gCdEMCAyA3CcMcHJKE/ABRYjtyzyCECkjDIXhbjcMi12yHwyIX7YPDIPyeg8wRg++DwyNUJPYAYPRpNsss4rNw2z0DQ3jbPQPDcNtNBEN80A0kIv3XTJVLNs9NRQ12z01TpnbfTWOnfdNNg6i2002VCb7TPaMlf/vXbObff8dtBxFz130nb7jHffetvMd8p+M0CEJwt0fFABJoQ8ghgKdA4CCQ6ELroDTVjQ+emoG2DE6KJrEATqsBvgDeuhZ3AH7KjL0AHtDrSQA+6oV8C7AxsgALznoNNe+vEKqM6768zLzrvtzOvOu+/MKyA878Uz/znvyx/vPO3Qiz877dQfbz3t2DO/Pe3dH/+98qaLvzr5r5s//e3q787+7+4bXvyANz/WhQ9442Od68QwAsmZwHIGKUADGDACBcgAARhEwB88kIAOejABLbhEBkeIwQuI4IMedEAUSDhCFEQChR3EQQpYmEEDDAKGCUjCDWiYQSXgMAEaQAEP/zXIQRiGcIgmxKEKh+hCHMpwiDbEoQ6HiAAf4jCIQ9wgDo/IwyTCcIk8bCIMn8jDKMJwikO0IgyxyEMtGlGEXTzhF1cYxheOcYZlvOEZd5jGH7KRhm5EIRdp6EUUOsAOCmhgAyBYkAL8gAFikIEBJknJGWzgAJjM5AEccAJKenKSIUCGJjOJAwx80pMX4MMoMUmHHZySkiBYwSoPkIAhvJKSFpjlATJwgVsawJKz5KQvQznLUvoylbNspS9jOcta+tIAuZwlL30JzFUK85bEXKUxb4nMVSrzlsxcpTN9Gc1VTvOW1RzlNV+ZzVFu85XdHOU3XxnOUY7zluUc5Tlfmf9OTa7zlO3UJA7sIAYGLJI5ZKggAl5ZgUuusgedxKYIgvmEY6pSm64EpyzFaUty6nKfp2zoLCE6zIlas6LcvKg7M0rPjdqzo/j8aC9vKdKHRpSdJlUnSuGpUoGy9JT11OQ9X5lPTYL0kzUdJUklSlGLFvOnnwxqJod6yqJm8qieTKoml4rTWbbADgZlJEEKAIEz3EOSDHWoPm8K0Jz6c6enjKdPl+lSocKUqLrUQAh8qdWrsvWTIXBrJh0A10/KlZRQ9aRUMUnVT1oVk3rlq1qN+ldPBrapKX0qXZt516rmda80naxfS4pZnmpWo5x95mMPENnQSrOylLysPDdQjoOr3igYozADCIY4AxJc8QNZZMEWwcDEbSjRGkPkhR5RiEYeqhGFTbgAb327RuC2UbhGJG4YjftF5PJQuVLko3N/GN3p/ja4wy3ucZO73A82l4bP/WB5edjb8143vdtd73fb68H3sjC+HpwvDetbXfR6kA444EQA0CHWsU7lwRCOsIQnTOEKW/jCGM6wUmrC4Q57+MMgDrGIR0ziEpv4xChOsYpXzOIWu/jFJQ4IACH5BAkUAP8ALAAAAADMARMAAAj/AP8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEkTYYGbOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKFbqwgKlYrB6UoMC1K9cHYMOKfeC17NizZb2eHZu261qxbb++BRuXwly6ce+SzXu3rl6/ffnOBTxY8FvChw2vRbxYMVrHbCHDlRyW8eO2ekuUSOevgMICD6AwYVJAgunTp4GiXq16deqfrl/7jG26dWzbrnGzhk1bN2rfsnvSlgC8Nu/bx3Mn3z279/Lfz4PzHF6ceHTjPZl0qUHBc8KboSxV/1qwIIL58+fJq19PHr179vDdo4fPXn56+urtm8efXz//9v79p18E/5UXIH8DFpiggAfityCCDdL3oIMRxldhfReuN6GEGfZnn4IdVmJJFsR9hsoCJjSgYgMQtOiiiyvGGOOLNMpoI40v2igjjjDquCKPLfr4I5BCqggkBEWySGSRRybZJJNLCvmklFH6OKWVVep4pZZZ3tjljl/OGOaQPDo5pgkLtOGdTQt4QgQDcMI5wZx00hnnnXfWqSeefOpZJ594+mknoHEKOiehhRqKqJyKLmroBIsy8GikkzraKKKVYnopoZlyuimgnYL6aZ+jBlpqnqcmKiilpxLhyQJrHv9UgAlvjiCGArgq4MCuvPKa66+/9iossMQK2yuxwBrrK7K5Krsrs806Cy2uzjowra7STlvttdtqmy203YL7LbPhkjsusuWie26x6ybbbrDvRqsst+eKMQIDRJgQq0EFNMDACArIgMDAAydg8MEHE6ywwgg3vPDDDSP88MIRJzwxwRUbfDHGGW9ccMceZ5yAxwiITLLJIYO8Mcorq3wxyy+7PDHMM8sMsc0U48ywzhxXfLLLMihwbwP7FtQvA2LIYMDSTBtwwNNQQ9301EtHbTXVU1sdNdZNay0111V7fQDYYXtNttNiny322GSvrXbabcMNtttxm1231m/bPbfcXNP/vbfeffONtd+BAz443zKIwQDRn0HAgAIIFI733VdTvrXlX/89ueaVc36555lL3rnon5Me+uGGU0046pub/nTerbM+uuyl03666oLjnnrWciOgwOJFE1QABBMkDfrrmCN/PNvLwz677rFD/zzvu3edO/XRYz+99dUzvbr0tYN/u/bhkz8+99mjv73316tfvvtfJw78Z8GMwgnkLfucsv75R/wz/zEDYM0EeDMC5syAO0Ngz/y3Pwb2z2ENhOADJRZBCk7QYhfUWAUxGEAHdlCCH7RgCA8WtHvpqypTSaEKV8jCFrrwhTCMoQxnqJSa2PCGOMyhDnfIwx768IdADKIQDYdIxCIa8YhITOIPAwIAOw==";var f=k.win,y=k.doc,j=!0,p=!1,s,d,n=500000,a=1000;function b(z){var C,B,A;C=y.body.scrollTop||y.documentElement.scrollTop;if(f.innerHeight){A=f.innerHeight}else{A=y.documentElement.clientHeight}B=C+(A-z.offsetHeight)/2;z.style.top=B+"px";z._dlgInfo.isTopOverridden=j}function o(z,B){for(var A=0;A<z.length;++A){if(z[A]==B){return j}}return p}function t(C){for(var D=0;D<y.styleSheets.length;++D){var I=y.styleSheets[D],F=p,A=p,H,J;try{F=I.cssRules;A=y.querySelectorAll}catch(E){}if(F&&A){for(var B=0;B<F.length;++B){H=F[B];J=p;try{J=A(H.selectorText)}catch(E){}if(J&&o(J,C)){var z=H.style.getPropertyValue("top"),G=H.style.getPropertyValue("bottom");if((z&&z!="auto")||(G&&G!="auto")){return j}}}}}return p}function u(A){var z=p;if(f.getComputedStyle){z=f.getComputedStyle(A)}else{if(A.currentStyle){z=A.currentStyle}}if(z&&z.position!="absolute"){return p}if((A.style.top!="auto"&&A.style.top!="")||(A.style.bottom!="auto"&&A.style.bottom!="")){return p}return !t(A)}function w(A){var z=y.createEvent("MouseEvents");z.initMouseEvent(A.type,A.bubbles,A.cancelable,f,A.detail,A.screenX,A.screenY,A.clientX,A.clientY,A.ctrlKey,A.altKey,A.shiftKey,A.metaKey,A.button,A.relatedTarget);return z}function c(z){y.body.dispatchEvent(w(z))}function x(){s=y.createElement("div");d=s.style;d.position="fixed";d.display="block";d.left=d.top=d.margin=d.padding=0;d.backgroundColor="#000";d.filter="alpha(opacity=30)";d.opacity=d.MozOpacity=0.3;d.zIndex=n;d.width=d.height="100%";if(y.createEvent){k.addEventListener(s,"click",c)}}function l(){if(s===h){x()}if(!y.body.contains(s)){y.body.appendChild(s)}}function v(){if(s!==h){k.removeEventListener(s,"click",c);y.body.removeChild(s);s=h}}var e={pendingDialogStack:[],_updateStacking:function(C){var E=this,z,B,A,D;B=E.pendingDialogStack;if(B.length==0){v();return}if(C!=true){l()}D=n;k.each(B,function(F){D++;F._dlgInfo.mask.style.zIndex=D++;F.style.zIndex=D})},pushDialog:function(A,C){var D=this,z,B=A.getBoundingClientRect();if(D.pendingDialogStack.length>=a){k.error("Too many modal dialogs.");return}z=y.createElement("div");z.className="dynamsoft-backdrop";if(C==true){z.style.left=(B.x|B.left)+"px";z.style.top=(B.y|B.top)+"px";z.style.width=B.width+"px";z.style.height=B.height+"px"}if(y.createEvent){k.addEventListener(z,"click",function(E){if(A.dispatchEvent){var F=w(E);A.dispatchEvent(F)}})}A.parentNode.insertBefore(z,A.nextSibling);A._dlgInfo.mask=z;D.pendingDialogStack.push(A);D._updateStacking(C)},removeDialog:function(B){var C=this,A,z;A=k.isArray(C.pendingDialogStack)?k.indexOf(B,C.pendingDialogStack):-1;if(A==-1){return}C.pendingDialogStack.splice(A,1);z=B._dlgInfo.mask;z.parentNode.removeChild(z);B._dlgInfo.mask=null;C._updateStacking()}};function m(B,A){var C=this,z;if(C.open){k.error("showDialog called on open dialog.");return}C.open=j;C.removeAttribute("closed");C.setAttribute("open","open");if(u(C)){b(C)}if(B){C._dlgInfo.modal=j;e.pushDialog(C,A)}}function r(z){var A=this;if(!A.open){k.error("closeDialog called on closed dialog.")}A.open=p;A.removeAttribute("open");A.setAttribute("closed","closed");if(typeof z!="undefined"){A.returnValue=z}if(A._dlgInfo.isTopOverridden){A.style.top="auto"}if(A._dlgInfo.modal){e.removeDialog(A)}return A.returnValue}k.dialog={setup:function(z,A){z.show=m.bind(z,p,A);z.showModal=m.bind(z,j,A);z.close=r.bind(z);z._dlgInfo={}}};k.mask={container:false,bConfined:false,dlgMask:false,preOnresize:false,preOnscroll:false};k.showMask=function(){if(k.mask.dlgMask){return}var B=k.mask.bConfined,A=k.mask.container,z;if(A){z=A.getBoundingClientRect();var G=A.firstChild;while(G){if(k.isFunction(G.getBoundingClientRect)){z=G.getBoundingClientRect();break}G=G.nextSibling}}var E=document.createElement("div"),D="460px",C="300px";E.className="dynamsoft-dialog-wrap";if(!window.onresize){k.mask.preOnresize=false}else{k.mask.preOnresize=window.onresize}if(!window.onscroll){k.mask.preOnscroll=false}else{k.mask.preOnscroll=window.onscroll}if(B&&z){window.onresize=window.onscroll=function(){z=A.getBoundingClientRect();var H=A.firstChild;while(H){if(k.isFunction(H.getBoundingClientRect)){z=H.getBoundingClientRect();break}H=H.nextSibling}E.style.left=(z.x|z.left)+"px";E.style.top=(z.y|z.top)+"px";E.style.width=z.width+"px";if(z.width<470){D=(z.width-10)+"px"}E.style.height=C=z.height+"px";if(k.mask.dlgMask){k.mask.dlgMask.close();k.mask.dlgMask.showModal()}};window.onscroll()}var F=['<div style="margin:0 auto; width:',D,";line-height:",C,'"><img src="',q,'" style="margin:0 auto; width:',D,'" /></div>'].join("");E.innerHTML=F;document.body.appendChild(E);k.mask.dlgMask=E;k.dialog.setup(k.mask.dlgMask,B);k.mask.dlgMask.showModal()};k.hideMask=function(){var z=k.mask.dlgMask;if(z){z.close();document.body.removeChild(z);k.mask.dlgMask=false}if(!k.mask.preOnresize){window.onresize=null}else{window.onresize=k.mask.preOnresize}k.mask.preOnresize=false;if(!k.mask.preOnscroll){window.onscroll=null}else{window.onscroll=k.mask.preOnscroll}k.mask.preOnscroll=false}})(Dynamsoft);(function(t){var w=20200521;if(t._sizzle_ver){if(t.isNumber(t._sizzle_ver)&&t._sizzle_ver>=w){return}}t._sizzle_ver=w;var aq,g=RegExp,ae,ab,d,k,u,al,Y,U,s,v,o,p,ao=!0,f,M,b,S,am="dws_"+1*new Date(),an=window.document,K=0,y=0,ai,aj,G,z,A=function(i,e){if(i===e){s=true}return 0},I=[],V=I.pop,aa=I.push,ak=I.push,F=I.slice,H=function(ax,aw){var av=0,e=ax.length;for(;av<e;av++){if(ax[av]===aw){return av}}return -1},ag="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Q="[\\x20\\t\\r\\n\\f]",C="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ad=["\\[",Q,"*(",C,")(?:",Q,"*([*^$|!~]?=)",Q,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(",C,"))|)",Q,"*\\]"].join(""),E=new g(Q+"+","g"),ah=new g(["^",Q,"+|((?:^|[^\\\\])(?:\\\\.)*)",Q,"+$"].join(""),"g"),m=new g(["^",Q,"*,",Q,"*"].join("")),X=new g(["^",Q,"*([>+~]|",Q,")",Q,"*"].join("")),h=new g("^"+C+"$"),W={ID:new g("^#("+C+")"),CLASS:new g("^\\.("+C+")"),TAG:new g("^("+C+"|[*])"),ATTR:new g("^"+ad),needsContext:new g(["^",Q,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(",Q,"*((?:-\\d)?\\d*)",Q,"*\\)|)(?=[^-]|$)"].join(""),"i")},L=/^[^{]+\{\s*\[native \w/,ac=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,c=/^(?:#([\w-]+)|(\w+)|\.([\w-]+)) .*$/,R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,l=function(i,e){if(e){if(i==="\0"){return"\uFFFD"}return i.slice(0,-1)+"\\"+i.charCodeAt(i.length-1).toString(16)+" "}return"\\"+i},q=function(){v()};function au(){var i=[];function e(av,aw){if(i.push(av+" ")>ab.cacheLength){delete e[i.shift()]}return(e[av+" "]=aw)}return e}function a(ax){var aw=0,av=ax.length,e="";for(;aw<av;aw++){e+=ax[aw].value}return e}ai=au();aj=au();G=au();z=au();try{ak.apply((I=F.call(an.childNodes)),an.childNodes);var r=I[an.childNodes.length].nodeType}catch(at){ak={apply:I.length?function(i,e){aa.apply(i,F.call(e))}:function(ax,aw){var e=ax.length,av=0;while((ax[e++]=aw[av++])){}ax.length=e-1}}}function af(aB,av,aE,aH){var az,aF,ay,e,aG,ax,aC,aw=av&&av.ownerDocument,aD=av?av.nodeType:9;aE=aE||[];if(typeof aB!=="string"||!aB||aD!==1&&aD!==9&&aD!==11){return aE}if(!aH){if((av?av.ownerDocument||av:an)!==o){v(av)}av=av||o;if(aD!==11){if((aG=ac.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){aE.push(ay);return aE}}else{return aE}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){aE.push(ay);return aE}}}else{if(aG[2]){ak.apply(aE,av.getElementsByTagName(aB));return aE}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));return aE}}}}else{if((aG=c.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){av=ay}}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){av=ay}}az="#"+az+" "}else{if((az=aG[2])){ak.apply(aE,av.getElementsByTagName(aB));av=aE[0];az=az+" "}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));av=aE[0];az=az+" "}}}aB=aB.replace(az,"")}}}if(ae.qsa&&!z[aB+" "]&&(!f||!f.test(aB))){if(aD!==1){aw=av;aC=aB}else{if(av.nodeName.toLowerCase()!=="object"){if((e=av.getAttribute("id"))){e=e.replace(R,l)}else{av.setAttribute("id",(e=am))}ax=k(aB);aF=ax.length;while(aF--){ax[aF]="#"+e+" "+a(ax[aF])}aC=ax.join(",");aw=av}}if(aC){try{ak.apply(aE,aw.querySelectorAll(aC));return aE}catch(aA){z(aB,!0)}finally{if(e===am){av.removeAttribute("id")}}}}}return al(aB.replace(ah,"$1"),av,aE,aH)}function ap(e){e[am]=true;return e}function Z(av){var i=o.createElement("fieldset");try{return !!av(i)}catch(aw){return false}finally{if(i.parentNode){i.parentNode.removeChild(i)}i=null}}function B(e,i){}function j(i,e){var aw=e&&i,av=aw&&i.nodeType===1&&e.nodeType===1&&i.sourceIndex-e.sourceIndex;if(av){return av}if(aw){while((aw=aw.nextSibling)){if(aw===e){return -1}}}return i?1:-1}function T(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}ae=af.support={};v=af.setDocument=function(av){var e,i,aw=av?av.ownerDocument||av:an;if(aw===o||aw.nodeType!==9||!aw.documentElement){return o}o=aw;p=o.documentElement;if(an!==o&&(i=o.defaultView)&&i.top!==i){if(i.addEventListener){i.addEventListener("unload",q,false)}else{if(i.attachEvent){i.attachEvent("onunload",q)}}}ae.attributes=Z(function(ax){ax.className="i";return !ax.getAttribute("className")});ae.getElementsByTagName=Z(function(ax){ax.appendChild(o.createComment(""));return !ax.getElementsByTagName("*").length});ae.getElementsByClassName=L.test(o.getElementsByClassName);ae.getById=Z(function(ax){p.appendChild(ax).id=am;return !o.getElementsByName||!o.getElementsByName(am).length});if(ae.getById){ab.filter.ID=function(ay){var ax=ay;return function(az){return az.getAttribute("id")===ax}}}else{ab.filter.ID=function(ay){var ax=new g(["^",ay,"$"].join(""),"g");return function(aA){var az=typeof aA.getAttributeNode!=="undefined"&&aA.getAttributeNode("id");return az&&ax.test(az.value)}}}ab.find.TAG=ae.getElementsByTagName?function(ax,ay){if(typeof ay.getElementsByTagName!=="undefined"){return ay.getElementsByTagName(ax)}else{if(ae.qsa){return ay.querySelectorAll(ax)}}}:function(ax,aB){var aC,aA=[],az=0,ay=aB.getElementsByTagName(ax);if(ax==="*"){while((aC=ay[az++])){if(aC.nodeType===1){aA.push(aC)}}return aA}return ay};ab.find.CLASS=ae.getElementsByClassName&&function(ay,ax){if(typeof ax.getElementsByClassName!=="undefined"){return ax.getElementsByClassName(ay)}};M=[];f=[];if((ae.qsa=L.test(o.querySelectorAll))){Z(function(ax){p.appendChild(ax).innerHTML="<a id='"+am+"'></a><select id='"+am+"-\r\\' msallowcapture=''><option selected=''></option></select>";if(ax.querySelectorAll("[msallowcapture^='']").length){f.push("[*^$]="+Q+"*(?:''|\"\")")}if(!ax.querySelectorAll("[selected]").length){f.push("\\["+Q+"*(?:value|"+ag+")")}if(!ax.querySelectorAll("[id~="+am+"-]").length){f.push("~=")}if(!ax.querySelectorAll(":checked").length){f.push(":checked")}if(!ax.querySelectorAll("a#"+am+"+*").length){f.push(".#.+[+~]")}});Z(function(ay){ay.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ax=o.createElement("input");ax.setAttribute("type","hidden");ay.appendChild(ax).setAttribute("name","D");if(ay.querySelectorAll("[name=d]").length){f.push("name"+Q+"*[*^$|!~]?=")}if(ay.querySelectorAll(":enabled").length!==2){f.push(":enabled",":disabled")}p.appendChild(ay).disabled=true;if(ay.querySelectorAll(":disabled").length!==2){f.push(":enabled",":disabled")}ay.querySelectorAll("*,:x");f.push(",.*:")})}if((ae.matchesSelector=L.test((b=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)))){Z(function(ax){ae.disconnectedMatch=b.call(ax,"*");b.call(ax,"[s!='']:x")})}f=f.length&&new g(f.join("|"));M=M.length&&new g(M.join("|"));e=L.test(p.compareDocumentPosition);S=e||L.test(p.contains)?function(ay,ax){var aA=ay.nodeType===9?ay.documentElement:ay,az=ax&&ax.parentNode;return ay===az||!!(az&&az.nodeType===1&&(aA.contains?aA.contains(az):ay.compareDocumentPosition&&ay.compareDocumentPosition(az)&16))}:function(ay,ax){if(ax){while((ax=ax.parentNode)){if(ax===ay){return true}}}return false};A=e?function(ay,ax){if(ay===ax){s=true;return 0}var az=!ay.compareDocumentPosition-!ax.compareDocumentPosition;if(az){return az}az=(ay.ownerDocument||ay)===(ax.ownerDocument||ax)?ay.compareDocumentPosition(ax):1;if(az&1||(!ae.sortDetached&&ax.compareDocumentPosition(ay)===az)){if(ay===o||ay.ownerDocument===an&&S(an,ay)){return -1}if(ax===o||ax.ownerDocument===an&&S(an,ax)){return 1}return U?(H(U,ay)-H(U,ax)):0}return az&4?-1:1}:function(ay,ax){if(ay===ax){s=true;return 0}var aE,aB=0,aD=ay.parentNode,aA=ax.parentNode,az=[ay],aC=[ax];if(!aD||!aA){return ay===o?-1:ax===o?1:aD?-1:aA?1:U?(H(U,ay)-H(U,ax)):0}else{if(aD===aA){return j(ay,ax)}}aE=ay;while((aE=aE.parentNode)){az.unshift(aE)}aE=ax;while((aE=aE.parentNode)){aC.unshift(aE)}while(az[aB]===aC[aB]){aB++}return aB?j(az[aB],aC[aB]):az[aB]===an?-1:aC[aB]===an?1:0};return o};af.matches=function(i,e){return af(i,null,null,e)};af.matchesSelector=function(av,ax){if((av.ownerDocument||av)!==o){v(av)}if(ae.matchesSelector&&!z[ax+" "]&&(!M||!M.test(ax))&&(!f||!f.test(ax))){try{var i=b.call(av,ax);if(i||ae.disconnectedMatch||av.document&&av.document.nodeType!==11){return i}}catch(aw){z(ax,!0)}}return af(ax,o,null,[av]).length>0};af.contains=function(e,i){if((e.ownerDocument||e)!==o){v(e)}return S(e,i)};af.escape=function(e){return(e+"").replace(R,l)};af.error=function(e){throw new Error("Syntax error: "+e)};af.uniqueSort=function(aw){var ax,ay=[],e=0,av=0;s=!ae.detectDuplicates;U=!ae.sortStable&&aw.slice(0);aw.sort(A);if(s){while((ax=aw[av++])){if(ax===aw[av]){e=ay.push(av)}}while(e--){aw.splice(ay[e],1)}}U=null;return aw};d=af.getText=function(ay){var ax,av="",aw=0,e=ay.nodeType;if(!e){while((ax=ay[aw++])){av+=d(ax)}}else{if(e===1||e===9||e===11){if(typeof ay.textContent==="string"){return ay.textContent}else{for(ay=ay.firstChild;ay;ay=ay.nextSibling){av+=d(ay)}}}else{if(e===3||e===4){return ay.nodeValue}}}return av};ab=af.selectors={cacheLength:50,match:W,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[3]=(e[3]||e[4]||e[5]||"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)}},filter:{TAG:function(i){var e=i.toLowerCase();return i==="*"?function(){return true}:function(av){return av.nodeName&&av.nodeName.toLowerCase()===e}},CLASS:function(e){var i=ai[e+" "];return i||(i=new g("(^|"+Q+")"+e+"("+Q+"|$)"))&&ai(e,function(av){return i.test(typeof av.className==="string"&&av.className||typeof av.getAttribute!=="undefined"&&av.getAttribute("class")||"")})},ATTR:function(av,i,e){return function(ax){var aw=af.attr(ax,av);if(aw==null){return i==="!="}if(!i){return true}aw+="";return i==="="?aw===e:i==="!="?aw!==e:i==="^="?e&&aw.indexOf(e)===0:i==="*="?e&&aw.indexOf(e)>-1:i==="$="?e&&aw.slice(-e.length)===e:i==="~="?(" "+aw.replace(E," ")+" ").indexOf(e)>-1:i==="|="?aw===e||aw.slice(0,e.length+1)===e+"-":false}}}};function D(){}D.prototype=ab.filters=ab.pseudos;ab.setFilters=new D();k=af.tokenize=function(ax,aC){var i,ay,aA=[],aB,az,av,e,aw=aj[ax+" "];if(aw){return aC?0:aw.slice(0)}az=ax;av=[];e=ab.preFilter;while(az){if(!i||(ay=m.exec(az))){if(ay){az=az.slice(ay[0].length)||az}av.push((aA=[]))}i=false;if((ay=X.exec(az))){i=ay.shift();aA.push({value:i,type:ay[0].replace(ah," ")});az=az.slice(i.length)}for(aB in ab.filter){if((ay=W[aB].exec(az))&&(!e[aB]||(ay=e[aB](ay)))){i=ay.shift();aA.push({value:i,type:aB,matches:ay});az=az.slice(i.length)}}if(!i){break}}return aC?az.length:az?af.error(ax):aj(ax,av).slice(0)};function O(az,ax,ay){var e=ax.dir,aw=ax.next,av=aw||e,aA=ay&&av==="parentNode",i=y++;return ax.first?function(aD,aC,aB){while((aD=aD[e])){if(aD.nodeType===1||aA){return az(aD,aC,aB)}}return false}:function(aG,aE,aD){var aH,aB,aF,aC=[K,i];if(aD){while((aG=aG[e])){if(aG.nodeType===1||aA){if(az(aG,aE,aD)){return true}}}}else{while((aG=aG[e])){if(aG.nodeType===1||aA){aF=aG[am]||(aG[am]={});aB=aF[aG.uniqueID]||(aF[aG.uniqueID]={});if(aw&&aw===aG.nodeName.toLowerCase()){aG=aG[e]||aG}else{if((aH=aB[av])&&aH[0]===K&&aH[1]===i){return(aC[2]=aH[2])}else{aB[av]=aC;if((aC[2]=az(aG,aE,aD))){return true}}}}}}return false}}function x(e){return e.length>1?function(ay,ax,av){var aw=e.length;while(aw--){if(!e[aw](ay,ax,av)){return false}}return true}:e[0]}function J(av,ay,ax){var aw=0,e=ay.length;for(;aw<e;aw++){af(av,ay[aw],ax)}return ax}function N(e,av,aw,ax,aA){var ay,aD=[],az=0,aB=e.length,aC=av!=null;for(;az<aB;az++){if((ay=e[az])){if(!aw||aw(ay,ax,aA)){aD.push(ay);if(aC){av.push(az)}}}}return aD}function ar(av,i,ax,aw,ay,e){if(aw&&!aw[am]){aw=ar(aw)}if(ay&&!ay[am]){ay=ar(ay,e)}return ap(function(aJ,aG,aB,aI){var aL,aH,aD,aC=[],aK=[],aA=aG.length,az=aJ||J(i||"*",aB.nodeType?[aB]:aB,[]),aE=av&&(aJ||!i)?N(az,aC,av,aB,aI):az,aF=ax?ay||(aJ?av:aA||aw)?[]:aG:aE;if(ax){ax(aE,aF,aB,aI)}if(aw){aL=N(aF,aK);aw(aL,[],aB,aI);aH=aL.length;while(aH--){if((aD=aL[aH])){aF[aK[aH]]=!(aE[aK[aH]]=aD)}}}if(aJ){if(ay||av){if(ay){aL=[];aH=aF.length;while(aH--){if((aD=aF[aH])){aL.push((aE[aH]=aD))}}ay(null,(aF=[]),aL,aI)}aH=aF.length;while(aH--){if((aD=aF[aH])&&(aL=ay?H(aJ,aD):aC[aH])>-1){aJ[aL]=!(aG[aL]=aD)}}}}else{aF=N(aF===aG?aF.splice(aA,aF.length):aF);if(ay){ay(null,aG,aF,aI)}else{ak.apply(aG,aF)}}})}function P(aA){var av,ay,aw,az=aA.length,aD=ab.relative[aA[0].type],aE=aD||ab.relative[" "],ax=aD?1:0,aB=O(function(i){return i===av},aE,true),aC=O(function(i){return H(av,i)>-1},aE,true),e=[function(aH,aG,aF){var i=(!aD&&(aF||aG!==Y))||((av=aG).nodeType?aB(aH,aG,aF):aC(aH,aG,aF));av=null;return i}];for(;ax<az;ax++){if((ay=ab.relative[aA[ax].type])){e=[O(x(e),ay)]}else{ay=ab.filter[aA[ax].type].apply(null,aA[ax].matches);if(ay[am]){aw=++ax;for(;aw<az;aw++){if(ab.relative[aA[aw].type]){break}}return ar(ax>1&&x(e),ax>1&&a(aA.slice(0,ax-1).concat({value:aA[ax-2].type===" "?"*":""})).replace(ah,"$1"),ay,ax<aw&&P(aA.slice(ax,aw)),aw<az&&P((aA=aA.slice(aw))),aw<az&&a(aA))}e.push(ay)}}return x(e)}function n(aw,av){var e=av.length>0,ax=aw.length>0,i=function(aH,aB,aG,aF,aK){var aC,aD,aI,aM=0,aE="0",ay=aH&&[],aN=[],aL=Y,aA=aH||ax&&ab.find.TAG("*",aK),az=(K+=aL==null?1:Math.random()||0.1),aJ=aA.length;if(aK){Y=aB===o||aB||aK}for(;aE!==aJ&&(aC=aA[aE])!=null;aE++){if(ax&&aC){aD=0;if(!aB&&aC.ownerDocument!==o){v(aC);aG=!ao}while((aI=aw[aD++])){if(aI(aC,aB||o,aG)){aF.push(aC);break}}if(aK){K=az}}if(e){if((aC=!aI&&aC)){aM--}if(aH){ay.push(aC)}}}aM+=aE;if(e&&aE!==aM){aD=0;while((aI=av[aD++])){aI(ay,aN,aB,aG)}if(aH){if(aM>0){while(aE--){if(!(ay[aE]||aN[aE])){aN[aE]=V.call(aF)}}}aN=N(aN)}ak.apply(aF,aN);if(aK&&!aH&&aN.length>0&&(aM+av.length)>1){af.uniqueSort(aF)}}if(aK){K=az;Y=aL}return ay};return e?ap(i):i}u=af.compile=function(e,aw){var ax,av=[],az=[],ay=G[e+" "];if(!ay){if(!aw){aw=k(e)}ax=aw.length;while(ax--){ay=P(aw[ax]);if(ay[am]){av.push(ay)}else{az.push(ay)}}ay=G(e,n(az,av));ay.selector=e}return ay};al=af.select=function(e,az,ay,av){var ax,aA=typeof e==="function"&&e,aw=!av&&k((e=aA.selector||e));ay=ay||[];(aA||u(e,aw))(av,az,!ao,ay,!az||az);return ay};ae.sortStable=am.split("").sort(A).join("")===am;ae.detectDuplicates=!!s;v();ae.sortDetached=Z(function(e){return e.compareDocumentPosition(o.createElement("fieldset"))&1});if(!Z(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){B("type|href|height|width",function(i,e){return i.getAttribute(e,e.toLowerCase()==="type"?1:2)})}if(!ae.attributes||!Z(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){B("value",function(i,e){if(i.nodeName.toLowerCase()==="input"){return i.defaultValue}})}if(!Z(function(e){return e.getAttribute("disabled")==null})){B(ag,function(i,e){var av;return i[e]===true?e.toLowerCase():(av=i.getAttributeNode(e))&&av.specified?av.value:null})}t.support=ae;t.sizzle=af})(Dynamsoft.Lib);(function(j){var aa=Array.prototype,t=aa.slice,f=j.doc,U=j.each,d=f.documentElement;var y=20200521;if(j._ui_nodelistExt_ver){if(j.isNumber(j._ui_nodelistExt_ver)&&j._ui_nodelistExt_ver>=y){return}}j._ui_nodelistExt_ver=y;var M=j.support,Q=j.sizzle;var b,S,T,I,r,k,K=f.createElement("div"),Y=f.createElement("div");function p(){var ad,ac;d.appendChild(K);Y.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";b=T=k=false;S=r=true;if(window.getComputedStyle){ac=window.getComputedStyle(Y);b=(ac||{}).top!=="1%";k=(ac||{}).marginLeft==="2px";T=(ac||{width:"4px"}).width==="4px";Y.style.marginRight="50%";S=(ac||{marginRight:"4px"}).marginRight==="4px";ad=Y.appendChild(document.createElement("div"));ad.style.cssText=Y.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";ad.style.marginRight=ad.style.width="0";Y.style.width="1px";r=!parseFloat((window.getComputedStyle(ad)||{}).marginRight);Y.removeChild(ad)}Y.style.display="none";I=Y.getClientRects().length===0;if(I){Y.style.display="";Y.innerHTML="<table><tr><td></td><td>t</td></tr></table>";Y.childNodes[0].style.borderCollapse="separate";ad=Y.getElementsByTagName("td");ad[0].style.cssText="margin:0;border:0;padding:0;display:none";I=ad[0].offsetHeight===0;if(I){ad[0].style.display="";ad[1].style.display="none";I=ad[0].offsetHeight===0}}d.removeChild(K)}if(!Y.style){return}Y.style.cssText="float:left;opacity:.5";M.opacity=Y.style.opacity==="0.5";M.cssFloat=!!Y.style.cssFloat;Y.style.backgroundClip="content-box";Y.cloneNode(true).style.backgroundClip="";M.clearCloneStyle=Y.style.backgroundClip==="content-box";K=document.createElement("div");K.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";Y.innerHTML="";K.appendChild(Y);M.boxSizing=Y.style.boxSizing===""||Y.style.MozBoxSizing===""||Y.style.WebkitBoxSizing==="";j.mix(M,{reliableHiddenOffsets:function(){if(b==null){p()}return I},boxSizingReliable:function(){if(b==null){p()}return T},pixelMarginRight:function(){if(b==null){p()}return S},pixelPosition:function(){if(b==null){p()}return b},reliableMarginRight:function(){if(b==null){p()}return r},reliableMarginLeft:function(){if(b==null){p()}return k}});var i,g,x=(/^margin/),q=/^(top|right|bottom|left)$/,Z=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source,J=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),o=new RegExp("^("+Z+")(.*)$","i");if(window.getComputedStyle){i=function(ae){var ad,ac;ad=j.isFunction(ae.getEL)?ae.getEL():ae;ac=ad.ownerDocument.defaultView;if(!ac||!ac.opener){ac=window}return ac.getComputedStyle(ad)};g=function(aj,ad,ai){var ag,af,ah,ac,ae=aj.style;ai=ai||i(aj);ac=ai?ai.getPropertyValue(ad)||ai[ad]:undefined;if((ac===""||ac===undefined)&&!Q.contains(aj.ownerDocument,aj)){ac=j.style(aj,ad)}if(ai){if(!M.pixelMarginRight()&&J.test(ac)&&x.test(ad)){ag=ae.width;af=ae.minWidth;ah=ae.maxWidth;ae.minWidth=ae.maxWidth=ae.width=ac;ac=ai.width;ae.width=ag;ae.minWidth=af;ae.maxWidth=ah}}return ac===undefined?ac:ac+""}}else{if(d.currentStyle){i=function(ac){return ac.currentStyle};g=function(ai,af,ah){var aj,ad,ac,ae,ag=ai.style;ah=ah||i(ai);ae=ah?ah[af]:undefined;if(ae==null&&ag&&ag[af]){ae=ag[af]}if(J.test(ae)&&!q.test(af)){aj=ag.left;ad=ai.runtimeStyle;ac=ad&&ad.left;if(ac){ad.left=ai.currentStyle.left}ag.left=af==="fontSize"?"1em":ae;ae=ag.pixelLeft+"px";ag.left=aj;if(ac){ad.left=ac}}return ae===undefined?ae:ae+""||"auto"}}}var e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,n=(/<([\w:-]+)/),c=(/^\s+/),u=/<|&#?\w+;/,E=/<tbody/i,G=/^-ms-/,z=/-([\da-z])/gi,A=/^(none|table(?!-c[ea]).+)/,O=(/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/),L={position:"absolute",visibility:"hidden",display:"block"},D={letterSpacing:"0",fontWeight:"400"},a=["Top","Right","Bottom","Left"];var R={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:M.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};var C,X=["Webkit","O","Moz","ms"],H="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";var V=document.createElement("div");if(!V.style){return}C=V.style;M.cssFloat=!!V.style.cssFloat;var B=function(ac,ad){return ad.toUpperCase()};var v={type:j.type,cssHooks:{},htmlPrefilter:function(ac){return ac.replace(e,"<$1></$2>")},nodeName:function(ad,ac){return ad.nodeName&&ad.nodeName.toLowerCase()===ac.toLowerCase()},merge:function(ag,ae){var ac=+ae.length,ad=0,af=ag.length;while(ad<ac){ag[af++]=ae[ad++]}if(ac!==ac){while(ae[ad]!==undefined){ag[af++]=ae[ad++]}}ag.length=af;return ag},camelCase:function(ac){return ac.replace(G,"ms-").replace(z,B)},cssProps:{"float":M.cssFloat?"cssFloat":"styleFloat"},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true}};function N(ac){if(ac in C){return ac}var ae=ac.charAt(0).toUpperCase()+ac.slice(1),ad=X.length;while(ad--){ac=X[ad]+ae;if(ac in C){return ac}}}function m(af,ac){var ad,ag,ae=0,ah=typeof af.getElementsByTagName!=="undefined"?af.getElementsByTagName(ac||"*"):typeof af.querySelectorAll!=="undefined"?af.querySelectorAll(ac||"*"):undefined;if(!ah){ah=[];for(ad=af.childNodes||af;(ag=ad[ae])!=null;ae++){if(!ac||v.nodeName(ag,ac)){ah.push(ag)}else{v.merge(ah,m(ag,ac))}}}return ac===undefined||ac&&v.nodeName(af,ac)?v.merge([af],ah):ah}function W(ae){var ad=H.split("|"),ac=ae.createDocumentFragment();if(ac.createElement){while(ad.length){ac.createElement(ad.pop())}}return ac}function h(ad,af){var ak,ah,aj,am,ao,an,ae,ai=ad.length,ag=W(af),ac=[],al=0;for(;al<ai;al++){ah=ad[al];if(ah||ah===0){if(j.type(ah)==="object"){v.merge(ac,ah.nodeType?[ah]:ah)}else{if(!u.test(ah)){ac.push(af.createTextNode(ah))}else{am=am||ag.appendChild(af.createElement("div"));ao=(n.exec(ah)||["",""])[1].toLowerCase();ae=R[ao]||R._default;am.innerHTML=ae[1]+v.htmlPrefilter(ah)+ae[2];ak=ae[0];while(ak--){am=am.lastChild}if(!M.leadingWhitespace&&c.test(ah)){ac.push(af.createTextNode(c.exec(ah)[0]))}if(!M.tbody){ah=ao==="table"&&!E.test(ah)?am.firstChild:ae[1]==="<table>"&&!E.test(ah)?am:0;ak=ah&&ah.childNodes.length;while(ak--){if(v.nodeName((an=ah.childNodes[ak]),"tbody")&&!an.childNodes.length){ah.removeChild(an)}}}v.merge(ac,am.childNodes);am.textContent="";while(am.firstChild){am.removeChild(am.firstChild)}am=ag.lastChild}}}}if(am){ag.removeChild(am)}al=0;while((ah=ac[al++])){if(ah.tagName!=="SCRIPT"){aj=Q.contains(ah.ownerDocument,ah);ag.appendChild(ah)}}am=null;return ag}var F=function(ah,ag,ai,af){var ae,ad,ac={};U(ag,function(ak,aj){ac[aj]=ah.style[aj];ah.style[aj]=ag[aj]});ae=ai.apply(ah,af||[]);U(ag,function(ak,aj){ah.style[aj]=ac[aj]});return ae};function s(ag,ad,ac,ai,af){var ae=ac===(ai?"border":"content")?4:ad==="width"?1:0,ah=0;for(;ae<4;ae+=2){if(ac==="margin"){ah+=j.css(ag,ac+a[ae],true,af)}if(ai){if(ac==="content"){ah-=j.css(ag,"padding"+a[ae],true,af)}if(ac!=="margin"){ah-=j.css(ag,"border"+a[ae]+"Width",true,af)}}else{ah+=j.css(ag,"padding"+a[ae],true,af);if(ac!=="padding"){ah+=j.css(ag,"border"+a[ae]+"Width",true,af)}}}return ah}function ab(ag,ad,ac){var af=true,ah=ad==="width"?ag.offsetWidth:ag.offsetHeight,ae=i(ag),ai=M.boxSizing&&j.css(ag,"boxSizing",false,ae)==="border-box";if(ah<=0||ah==null){ah=g(ag,ad,ae);if(ah<0||ah==null){ah=ag.style[ad]}if(J.test(ah)){return ah}af=ai&&(M.boxSizingReliable()||ah===ag.style[ad]);ah=parseFloat(ah)||0}return(ah+s(ag,ad,ac||(ai?"border":"content"),af,ae))}function P(ac){var ad=new RegExp("^(?:([+-])=|)("+Z+")([a-z%]*)$","i");return ad.exec(ac)}function w(ac,ae,af){var ad=o.exec(ae);return ad?Math.max(0,ad[1]-(af||0))+(ad[2]||"px"):ae}function l(ad,ac,ag,al){var am,ae=1,ai=20,ak=al?function(){return al.cur()}:function(){return j.css(ad,ac,"")},ah=ak(),aj=ag&&ag[3]||(v.cssNumber[ac]?"":"px"),af=(v.cssNumber[ac]||aj!=="px"&&+ah)&&P(j.css(ad,ac));if(af&&af[3]!==aj){aj=aj||af[3];ag=ag||[];af=+ah||1;do{ae=ae||".5";af=af/ae;j.style(ad,ac,af+aj)}while(ae!==(ae=ak()/ah)&&ae!==1&&--ai)}if(ag){af=+af||+ah||0;am=ag[1]?af+(ag[1]+1)*ag[2]:+ag[2];if(al){al.unit=aj;al.start=af;al.end=am}}return am}U(["height","width"],function(ac,ad){v.cssHooks[ac]={get:function(ag,af,ae){if(af){return A.test(j.css(ag,"display"))&&ag.offsetWidth===0?F(ag,L,function(){return ab(ag,ac,ae)}):ab(ag,ac,ae)}},set:function(ag,ah,ae){var af=ae&&i(ag);return w(ag,ah,ae?s(ag,ac,ae,M.boxSizing&&j.css(ag,"boxSizing",false,af)==="border-box",af):0)}}});j.style=function(ae,ad,aj,af){if(!ae||ae.nodeType===3||ae.nodeType===8||!ae.style){return}var ah,ai,ak,ag=v.camelCase(ad),ac=ae.style;ad=v.cssProps[ag]||(v.cssProps[ag]=N(ag)||ag);ak=v.cssHooks[ad]||v.cssHooks[ag];if(aj!==undefined){ai=typeof aj;if(ai==="string"&&(ah=P(aj))&&ah[1]){aj=l(ae,ad,ah);ai="number"}if(aj==null||aj!==aj){return}if(ai==="number"){aj+=ah&&ah[3]||(v.cssNumber[ag]?"":"px")}if(!M.clearCloneStyle&&aj===""&&ad.indexOf("background")===0){ac[ad]="inherit"}if(!ak||!("set" in ak)||(aj=ak.set(ae,aj,af))!==undefined){ac[ad]=aj}}else{if(ak&&"get" in ak&&(ah=ak.get(ae,false,af))!==undefined){return ah}return ac[ad]+""}};j.css=function(ai,ag,ad,ah){var af,aj,ac,ae=v.camelCase(ag);ag=v.cssProps[ae]||(v.cssProps[ae]=N(ae)||ae);ac=v.cssHooks[ag]||v.cssHooks[ae];if(ac&&"get" in ac){aj=ac.get(ai,true,ad)}if(aj===undefined){aj=g(ai,ag,ah)}if(aj==="normal"&&ag in D){aj=D[ag]}if(ad===""||ad){af=parseFloat(aj);return ad===true||isFinite(af)?af||0:aj}return aj};j.parseHTML=function(ae,ad){if(!ae||typeof ae!=="string"){return[]}if(typeof ad==="boolean"){ad=false}ad=ad||document;var ac=O.exec(ae);if(ac){return[ad.createElement(ac[1])]}ac=h([ae],ad);return v.merge([],ac.childNodes)}})(Dynamsoft.Lib);(function(f,i){var c=Dynamsoft.managerEnv,k=f.LS,h=Dynamsoft.navInfoSync.host,d,a,g=20200522,j=function(){if(Dynamsoft.dcp){var l=Dynamsoft.dcp.dcpJSVer;if(f.isNumber(l)){return l>=g}}return false};if(!c){Dynamsoft.managerEnv={};c=Dynamsoft.managerEnv}c.resourcesPath=c.resourcesPath||"Resources";c.IfUpdateService=c.IfUpdateService?true:false;if(j()){j=i;g=i;return}a={dcpStatus:0,bConnected:false,connectedResult:"",curPortIndex:0,bConnectNumLimited:true,IMAXCONNECTCOUNT:3,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}};var b=[],e=0;Dynamsoft.dcp=d={host:"127.0.0.1",ports:[[18625,18626]],win64Port:[18627,18628],ifCheck64bitServiceFirst:false,dcpJSVer:g,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],DWASMVer14:[14,3,1,"0115"],managerVersion:[16,0,0,"0428"],managerVersionMac:[16,0,0,"0428"],managerVersionLinux:[16,0,0,"0428"],serviceVersion:[1,5,3,"0107"],serviceVersionMac:[1,5,3,"0107"],serviceVersionLinux:[1,5,3,"0107"],detect:a,strSID:"",bEnhancedMode:false,b64bit:false,onReadys:[],getManagerVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.managerVersionMac}else{if(l.bLinux){return d.managerVersionLinux}}}return d.managerVersion},getServiceVersion:function(){var l=Dynamsoft.Lib.getNavInfo();if(l.bWin||l.bWin64){}else{if(l.bMac){return d.serviceVersionMac}else{if(l.bLinux){return d.serviceVersionLinux}}}return d.serviceVersion},versionInfo:function(p,l){var o=0,n=function(t){if(f.isArray(t)&&t.length>0&&t[0]){a.curPort=d.ports[o%d.ports.length];var w=t[0];if(f.isString(w)&&d._compareVersion(w.split(","),d.oldDWASMVer)){var v=f.isString(t[1])&&t[1].toLowerCase(),u="",s=false,q=false;if(t.length>4){u=f.isString(t[2])?t[2]:"";s=f.isString(t[3])&&(t[3]==="true");q=f.isString(t[4])&&(t[4]==="64")}d.strSID=u;d.bEnhancedMode=s;d.b64bit=q;a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.Connected;d._sendStatusEvent(false,w);if(f.isFunction(p)){setTimeout(function(){p(u,s)},0)}return true}}return false},m=function(r,s,q){++o;a.curPortIndex=o%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&o>=a.IMAXCONNECTCOUNT){setTimeout(function(){p(r,s,q)},0);return true}return false};a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,l,n,m)},_checkOldManagerVersion:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,i,m,l)},_checkManagerVersion:function(l,n,m){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",false,l,n,m)},_checkService:function(m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingServiceVer;this._postBase("DSVersion",false,i,m,l)},_checkUpdateFile:function(m,l){this._postBase("CheckUpdateFile",false,i,m,l)},_updateService:function(m,l){this._postBase("UpdateService",false,i,m,l)},_postBase:function(n,r,o,t,s){var q,l;if(r){q=d.oldDWASMVerStr}else{q="dwasm2_"+d._getModuleVer()}l={id:"1",method:n,version:q,parameter:[]};if(o){if(f.startsWith(o,"http://")||f.startsWith(o,"https://")){if(Dynamsoft.managerEnv.ifCheckRemoteProductKey){var p=this,m=o;f.ajax({method:"GET",url:m,onSuccess:function(u){l.productKey=u;p._postBaseV2(n,r,l,t,s)},onError:s});return true}}else{l.productKey=o}}this._postBaseV2(n,r,l,t,s);return true},_postBaseV2:function(r,w,m,A,z){var x,B,t,u=f.stringify(m);if(!f.isFunction(A)||!f.isFunction(z)){return}if(d.detect.bConnected&&r=="VersionInfo"){A(d.detect.connectedResult);return}B=function(D,E,C){s--;if(s==0){if(z(D,E,C)){return}}};t=function(D,F,C){var E=d._getJSON(D);if(E&&"result" in E){s=-1;if(d.detect.bConnected){return}d.detect.bConnected=true;d.detect.connectedResult=E.result;d.detect.dcpStatus=d.detect.EnumDCP_DetectStatus.Connected;d.detect.curPort=d.ports[C.index];d.ports=[d.detect.curPort];d.detect.curPortIndex=0;if(k.isSupportLS()){k.item("DCP_port",d.detect.curPort[1])}if(A(E.result)){return}}B(D,F,C)};var p,s=d.ports.length;if(s>1&&k.isSupportLS()){var n=k.item("DCP_port");if(f.isString(n)&&n!==""){for(p=1;p<s;p++){var l=d.ports[p],y,v;y=l[0];v=l[1];if(v==n){d.ports[p][0]=d.ports[0][0];d.ports[p][1]=d.ports[0][1];d.ports[0][0]=y;d.ports[0][1]=v}break}}}if(d.detect.bConnected){s=1}b=[];d.detect.bConnected=false;for(p=0;p<s;p++){var o=[d._getPreUrl(p),w?"dcp/":d._getModuleName(),w?d.oldDWASMVerStr:d._getModuleVer(),"/",r,"?type=1&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");b.push({method:"POST",url:o,timeout:200,data:u,onSuccess:t,onError:B})}for(p=0;p<s;p++){var q=f.ajax(b[p]);q.index=p}},loadZip:function(m,q,p,r){var o,n=q,l=p;if(n===100){n=0;l=function(s){if(f.isString(s)){s=s.replace('"result" : [ 0,','"result" : [ 100,')}p(s)}}if(Dynamsoft.managerEnv.IfUpdateService){o=[d._getPreUrl(a.curPortIndex),d._getModuleName(),d._getModuleVer(),"/LoadZipFromBytes?type=",n,"&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}else{o=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("")}f.ajax({method:"POST",url:o,async:true,data:m,onSuccess:l,onError:r})},oldLoadZip:function(m,l,o,p){var n=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.getServiceVersion().join(""),"&ts=",f.now()].join("");f.ajax({method:"POST",url:n,async:true,data:m,onSuccess:o,onError:p})},_getPreUrl:function(o){var l,m;if(Dynamsoft.navInfoSync.bSSL){m="https://";l=d.ports[o][1]}else{m="http://";l=d.ports[o][0]}return[m,d.host,":",l,"/"].join("")},_getJSON:function(l){return l?f.parse(l):!1},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return d.getManagerVersion().join("")},_compareVersion:function(m,l){if(f.isArray(m)&&m.length==4&&f.isArray(l)&&l.length>=4){return m[0]>l[0]||m[0]==l[0]&&m[1]>l[1]||m[0]==l[0]&&m[1]==l[1]&&m[2]>l[2]||m[0]==l[0]&&m[1]==l[1]&&m[2]==l[2]&&parseInt(m[3])>=parseInt(l[3])}else{if(f.isArray(m)&&m.length==1&&f.isArray(l)&&l.length>=1){return parseInt(m[0])>=parseInt(l[0])}}return false},_getDSUpdateZipUrl:function(){var m=Dynamsoft.Lib.getNavInfo(),n,l,o="";n="Win";if(m.bMac){n="Mac"}else{if(m.bLinux){n="Linux"}}if(Dynamsoft.navInfoSync.bFileSystem){l=""}else{l="?t="+f.now()}if(m.bWin&&d.b64bit){o="_x64"}return[Dynamsoft.managerEnv.resourcesPath,"/dist/serviceupdate/",n,"DSUpdate_",d.getManagerVersion().join("."),o,".zip",l].join("")},getPorts:function(l,p,o){var n="GetPorts",q="dwasm2_"+d._getModuleVer(),m={id:"1",method:n,version:q,parameter:[l]};this._postBaseV2(n,false,m,p,o)},checkDcpForUpdate:function(q,l,s,t,o,n,D,v){var r=false,F=true,B=3,m=0,y=function(J){if(!(f.isArray(J)&&J.length>0&&J[0])){return false}var K=J[0].split(",");var I=false;if(J.length>4){I=f.isString(J[4])&&(J[4]==="64")}d.b64bit=I;if(!Dynamsoft.managerEnv.IfUpdateService){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{if(d._compareVersion(K,d.oldDWASMVer)){var H=d._getDSUpdateZipUrl();r=true;var M=function(N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadedZip;d._sendStatusEvent();var O=0;d.oldLoadZip(N,O,function(){setTimeout(function(){d._checkManagerVersion(v,u,p)},5000)},L)},L=function(O,P,N){d._funUpdateFailed(o,n,O,N.status);setTimeout(D,0)},G=function(O,Q,N){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(o){o()}var R=N.status,P;if(R==200){P=O}else{P="The update package can't be downloaded. The error code is "+R+"."}if(n){n(true,P)}d._sendStatusEvent(true,P);setTimeout(D,0)};if(s){s()}if(t){t()}a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.ajax({method:"GET",url:H,async:true,dataType:"blob",onSuccess:M,onError:G})}else{if(F){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;if(s){s()}if(q){q()}d._sendStatusEvent();F=false}}}return true},x=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;d._sendStatusEvent()}else{setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},u=function(G){if(!(f.isArray(G)&&G.length>0&&G[0])){return false}var H=G[0].split(",");if(d._compareVersion(H,d.getManagerVersion())){if(Dynamsoft.managerEnv.IfUpdateService){if(r){setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}return true}return false},p=function(I,J,H){var G=1000;if(B<3){G=500}B--;if(B<0){d._funShowUpgradeDialogWhenUpdateFailed(o,n);setTimeout(D,0)}else{setTimeout(function(){d._checkManagerVersion(v,u,p)},G)}return true},E=function(H){if(!(f.isArray(H)&&H.length>0&&H[0])){if(s){s()}return false}var G=H[0].split(",");if(d._compareVersion(G,d.getServiceVersion())){a.bConnected=true;if(o){o()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,H[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkUpdateZip(t,o,n,D)},0)}return true},w=function(H,I,G){d._funUpdateFailed(o,n,H,G.status);setTimeout(D,0);return true};var A=false,C=function(I){if(!(f.isArray(I)&&I.length>0&&I[0])){return false}var L=I[0];if(f.isString(L)&&d._compareVersion(L.split(","),d.oldDWASMVer)){var K=f.isString(I[1])&&I[1].toLowerCase(),J="",H=false,G=false;if(I.length>4){A=true;J=f.isString(I[2])?I[2]:"";H=f.isString(I[3])&&(I[3]==="true");G=f.isString(I[4])&&(I[4]==="64")}d.strSID=J;d.bEnhancedMode=H;d.b64bit=G;a.curPort=d.ports[m%d.ports.length];if(!Dynamsoft.managerEnv.IfUpdateService){a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(D,0)}else{setTimeout(function(){d._checkService(E,w)},0)}}else{m=0;a.curPortIndex=0;if(F){if(s){s()}if(q){q()}F=false}setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}return true},z=function(G,H){++m;a.curPortIndex=m%d.ports.length;a.bConnected=false;if(F){if(s){s()}if(q){q(G,H)}F=false}if(a.bConnectNumLimited&&m>=a.IMAXCONNECTCOUNT){m=0;a.curPortIndex=0;setTimeout(function(){d._checkOldManagerVersion(y,x)},1000)}else{setTimeout(function(){d._checkManagerVersion(v,C,z)},1000)}return true};if(l){l()}d._checkManagerVersion(v,C,z)},_checkUpdateZip:function(p,w,o,x,q){var r=function(B,C,A){var D=-1;if(A){D=A.status}if(D==0){setTimeout(function(){d._checkService(v,s)},5000);return true}var z=d._getDSUpdateZipUrl();a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();f.ajax({method:"GET",url:z,async:true,dataType:"blob",onSuccess:l,onError:u});return true},u=function(A,C,z){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(w){w()}var D=z.status,B;if(D==200){B=A}else{B="The update package can't be downloaded. The error code is "+D+"."}if(o){o(true,B)}d._sendStatusEvent(true,B);setTimeout(x,0);return true},t=function(A){if(!(f.isArray(A)&&A.length>1)){return false}if(A[1]==true){a.dcpStatus=a.EnumDCP_DetectStatus.VerifiedZip;d._sendStatusEvent();a.dcpStatus=a.EnumDCP_DetectStatus.UpdatingService;d._sendStatusEvent();setTimeout(function(){d._checkService(v,s)},5000)}else{var z=0;if("exception" in A){z=A.exception}if(z==-2373){d._funUpdateFailed(w,o,A,200);setTimeout(x,0);return true}setTimeout(r,0)}return true},l=function(z){var A=1;Dynamsoft.dcp.loadZip(z,A,function(B){var D,C;try{if(f.isString(B)){C=f.parse(B.replace(/\0/g,""));if("result" in C){D=C.result}}}catch(E){}if(f.isArray(D)&&D.length>2&&D[2]==true){setTimeout(function(){d._checkService(v,s)},5000);return}d._funUpdateFailed(w,o,B,200);setTimeout(x,0)},n)},n=function(A,B,z){var C=-1;if(z){C=z.status}if(C==0){setTimeout(function(){d._checkService(v,s)},5000)}else{d._funUpdateFailed(w,o,A,z.status);setTimeout(x,0)}return true},y=function(z){if(!(f.isArray(z)&&z.length>0)){return false}if(z[0]==true){setTimeout(function(){d._checkService(v,s)},5000)}else{d._funUpdateFailed(w,o,z,200);setTimeout(x,0)}return true},m=3,v=function(A){if(!(f.isArray(A)&&A.length>0&&A[0])){return false}var z=A[0].split(",");if(d._compareVersion(z,d.getServiceVersion())){a.bConnected=true;if(w){w()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,A[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(x,0);return true}return false},s=function(A,B){var z=1000;if(m<3){z=500}m--;if(m<0){d._funShowUpgradeDialogWhenUpdateFailed(w,o);setTimeout(x,0);return true}setTimeout(function(){d._checkService(v,s)},z);return true};if(p){p()}a.dcpStatus=a.EnumDCP_DetectStatus.VerifyingZip;d._sendStatusEvent();d._checkUpdateFile(t,r)},_getStatusString:function(p,o){var m,l,n="";if(p==a.EnumDCP_DetectStatus.Init){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.Connected){if(o){n=o}return"Getting manager version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.DownloadingZip){return"Downloading the update package"}else{if(p==a.EnumDCP_DetectStatus.DownloadedZip){return"Update package downloaded"}else{if(p==a.EnumDCP_DetectStatus.DownloadFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"Update package failed to download"+m+l}else{if(p==a.EnumDCP_DetectStatus.CheckingManagerVer){return"Getting manager version"}else{if(p==a.EnumDCP_DetectStatus.CheckingServiceVer){return"Getting service version"}else{if(p==a.EnumDCP_DetectStatus.NotInstalled){return"Dynamsoft Service Not Installed"}else{if(p==a.EnumDCP_DetectStatus.UpdateSkipped){return"Update skipped"}else{if(p==a.EnumDCP_DetectStatus.CheckedService){if(o){n=o}return"Getting service version succeeded and the version is "+n}else{if(p==a.EnumDCP_DetectStatus.VerifyingZip){return"Verifying the update package"}else{if(p==a.EnumDCP_DetectStatus.VerifiedZip){return"Update package verified"}else{if(p==a.EnumDCP_DetectStatus.UpdatingService){return"Updating the service"}else{if(p==a.EnumDCP_DetectStatus.UpdateSucceed){return"Update succeeded"}else{if(p==a.EnumDCP_DetectStatus.UpdateFailed){l=".";if(o&&o.length>0){if(o.slice(o.length-1)=="."){l=""}m=" with the error: "+o}else{m=""}return"The update failed"+m+l}}}}}}}}}}}}}}}return""},_sendStatusEvent:function(m,n){var l=m?true:false;if(f.isFunction(h.OnGetServiceUpdateStatus)){h.OnGetServiceUpdateStatus(l,a.dcpStatus,d._getStatusString(a.dcpStatus,n))}},_getErr:function(m){var n,l="";try{if(f.isString(m)){n=m.replace(/\0/g,"");n=f.parse(n)}else{if(m){n=m}}if("description" in n){l=n.description}}catch(o){}return l},_funShowUpgradeDialogWhenUpdateFailed:function(m,l){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}if(l){l()}d._sendStatusEvent(true);return true},_funUpdateFailed:function(m,l,n,q){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(m){m()}var o,p;if(q==200){o="The update failed.";p=d._getStatusString(a.dcpStatus,d._getErr(n))}else{o="The update failed. The error code is "+q;p=o}if(l){l(true,o)}d._sendStatusEvent(true,p);return true},getDSPath:function(l,n){var p=Dynamsoft.managerEnv.resourcesPath,o=n;if(Dynamsoft.Lib.isString(p)&&p.length>0){if(p[p.length-1]!="/"){p=p+"/"}}else{p="Resources/"}if(!o){var m=Dynamsoft.Lib.getNavInfo();if(m.bMac){o=".pkg"}else{if(m.bLinux){o=".deb"}else{o=".msi"}}}return[p,"dist/DynamsoftServiceSetup",o].join("")},getLinuxHTML5DebPath:function(){return Dynamsoft.dcp.getDSPath(false,".deb")},getLinuxHTML5RpmPath:function(){return Dynamsoft.dcp.getDSPath(false,".rpm")}};j=i;g=i;c=i;f.ready(function(){if(d.onReadys.length>0){f.each(d.onReadys,function(l){if(f.isFunction(l)){l()}})}})})(Dynamsoft.Lib);var EnumTransferErrorCode={TRANS_OK:0,TRANS_URL_MALFFORMAT:1,TRANS_FAILED_RESOLVE_PROXY:2,TRANS_FAILED_RESOLVE_HOST:3,TRANS_FAILED_CONNECT:4,TRANS_REMOTE_ACCESS_DENIED:5,TRANS_PARTIAL_FILE:6,TRANS_UPLOAD_FAILED:7,TRANS_READ_FAILED:8,TRANS_OUT_OF_MEMORY:9,TRANS_REMOTE_FULL_DISK:10,TRANS_OPERATION_TIMEOUT:11,TRANS_SERVICE_ERROR_404:12,TRANS_SERVICE_ERROR_500:13,TRANS_SERVICE_ERROR_503:14,TRANS_SERVICE_ERROR:15,TRANS_NOT_SEND:16,TRANS_WAITFOR_SEND:17,TRANS_SENDING:18,TRANS_PAUSE:19,TRANS_FINISHED:20,TRANS_NULL_POINTER:21,TRANS_INVALID_ID:22,TRANS_Failed:23,TRANS_SERVICE_ERROR_MORE_THAN_500:24,TRANS_SERVICE_ERROR_LESS_THAN_200:25,TRANS_SERVICE_ERROR_MORE_THAN_300:26,TRANS_CANNOT_FINDFILE:27,TRANS_ABORT:28,TRANS_NOT_FINISHED:29,TRANS_TASK_PREPARE_INIT:30,TRANS_TASK_INIT:31,TRANS_BEYOND_MAXSIZE:32};var Dynamsoft=self.Dynamsoft||{WebTwainEnv:{}};Dynamsoft.aryAddonReadyFun=Dynamsoft.aryAddonReadyFun||[];Dynamsoft.AddonReady=Dynamsoft.AddonReady||function(a){Dynamsoft.aryAddonReadyFun.push(a)};Dynamsoft.AddonReady(function(i,e){var j=Dynamsoft,k=1,g=!0,m=!1,l=Dynamsoft.dcp,u=l.detect,a="upload",n=[1,6,0,"0428"],s="upload_"+n.join(""),r={getFullUrl:function(x){return[j.FileUploader.protocol,j.FileUploader.ip,":",j.FileUploader.port,"/dcp/",s,"/",x,"?type=1&dsver=",n.join(""),"&ts=",i.now()].join("")},runUploadFile:function(){return r.getFullUrl("RunUploadFile")},versionInfo:function(){return r.getFullUrl("VersionInfo")},cancelAllUploadFile:function(){return r.getFullUrl("CancelAllUploadFile")},getUploadStatus:function(){return r.getFullUrl("GetUploadStatus")},deleteUploadTask:function(){return r.getFullUrl("DeleteUploadTask")}},f={Version:"1.0",HttpVersion:"1.1",ServerUrl:"",FileName:"",VERIFYPEER:false,VERIFYHOST:false,BlockSize:10240,ThreadNum:1,OnUploadTransferPercentage:function(y,x){},OnRunSuccess:function(x){},OnRunFailure:function(z,y,x){}};var h=0,w="",t={Upload_InvalidRemoteFilename:function(){h=-1;w="The zip file that contains the upload library (.dll) is invalid."},ServerUrlError:function(){h=-2;w="Upload failed because the url to upload to is invalid."},HttpUploadError:function(x,y,z){h=-3;if(x){w="Upload cancelled."}else{if(y&&y!=""){w="Upload failed with error: "+y}else{w="Upload failed."}if(y&&y!=""){w=w+"("+z+")"}}},HttpContentError:function(){h=-4;w="Upload failed because the file to upload has invalid content."},InvalidJobId:function(){h=-5;w="Invalid upload job id."},HttpRunError:function(){h=-6;w="Cannot create an upload job."},HttpFilenameError:function(){h=-7;w="The file name is incorrect in the upload job."},CancelAllWhenJobWatingError:function(){h=-8;w="Can not cancel all jobs when at least one job is still being created."},DownloadError:function(){h=-9;w="The zip file that contains the upload library (.dll) download failed."},MissingDll:function(){h=-10;w=["Error: the file UploadModule_",n.join("."),".dll is missing or invalid in the Dynamsoft Service Directory."].join("")},MobileNotSupport:function(){h=-2400;w="File uploader addon doesn't work under current settings."},_resetErr:function(){h=0;w=""}},o=function(){var x=false;if(Dynamsoft.WebTwainEnv){x=(Dynamsoft.WebTwainEnv.UseLocalService===false)}return x||Dynamsoft.navInfoSync.bMobile};function b(){}b.prototype={runWaiting:0,CreateJob:function(){var x={HttpHeader:{},documents:[],formFields:[],bEvent:false};i.mix(x,f);x.SourceValue=new d(x);x.FormField=new v(x);return x},Run:function(x){var C=this,A,z='""',y=x.ServerUrl;if(j.WebTwainEnv&&j.WebTwainEnv.ProductKey){z='"'+j.WebTwainEnv.ProductKey+'"'}if(!i.isString(y)||y==""){x.id=-1;t.ServerUrlError();if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}return false}if(!x.documents||!i.isArray(x.documents)||x.documents.length<=0){x.id=-1;t.HttpContentError();if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}return false}x.Url=y;delete x.ServerUrl;for(A=0;A<x.documents;A++){var E=x.documents[A];if(!i.isString(E.files)||E.files==""){x.id=-1;t.HttpFilenameError();if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}return false}if(!i.isString(E.remoteName)||E.remoteName==""){E.remoteName="RemoteFile"}}var F=x.SourceValue;delete x.SourceValue;var G=x.FormField;delete x.FormField;var D=i.stringify(x);D=i.replaceAll(D,'"',"'");x.ServerUrl=y;delete x.Url;x.SourceValue=F;x.FormField=G;var B='{"id":"'+k+'","method":"RunUploadFile","version":"'+s+'","parameter":['+z+',"'+D+'"]}';C.runWaiting++;i.ajax({url:r.runUploadFile(),method:"post",processData:false,data:B,dataType:"json",onSuccess:function(K){C.runWaiting--;if(K){var J=K.UploadId;if(J&&J>0){x.id=J;j.FileUploader.map[x.id]=x;j.FileUploader.ids.push(K.UploadId);if(x.OnUploadTransferPercentage){x.OnUploadTransferPercentage(x,0)}}else{var H=K.errorcode,I=K.errorstring;if(H&&I){h=H;w=I}else{t.HttpRunError()}if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}}}},onError:function(H,I,J){C.runWaiting--;j.FileUploader.parseHttpErrors(H,I,J);if(!x.bEvent&&i.isFunction(x.OnRunFailure)){x.bEvent=true;x.OnRunFailure(x,h,w);x.bEvent=false}}});return true},Cancel:function(y){if(!y.id||y.id<0){t.InvalidJobId();if(!y.bEvent&&i.isFunction(y.OnRunFailure)){y.bEvent=true;y.OnRunFailure(y,h,w);y.bEvent=false}return false}var x='{"id":"'+k+'","method":"DeleteUploadTask","version":"'+s+'","parameter":["'+y.id+'"]}';i.ajax({url:r.deleteUploadTask(),method:"post",processData:false,data:x,onSuccess:function(z){j.FileUploader.deleteJobById(y.id)},onError:function(z,A,B){j.FileUploader.parseHttpErrors(z,A,B);if(!y.bEvent&&i.isFunction(y.OnRunFailure)){y.bEvent=true;y.OnRunFailure(y,h,w);y.bEvent=false}}});return true},CancelAllUpload:function(){var z=this,y=j.FileUploader.ids,x='{"id":"'+k+'","method":"DeleteUploadTask","version":"'+s+'","parameter":["'+y.join(",")+'"]}';if(z.runWaiting>0){t.CancelAllWhenJobWatingError();return false}else{if(z.runWaiting<0){z.runWaiting=0}}if(y.length<=0){return true}i.ajax({url:r.deleteUploadTask(),method:"post",processData:false,data:x,onSuccess:function(B){for(var A=0;A<y.length;A++){j.FileUploader.deleteJobById(y[A])}j.FileUploader.ids=[];j.FileUploader.map=[]},onError:function(A,B,C){j.FileUploader.parseHttpErrors(A,B,C)}});return true},OnUploadTransferPercentage:function(y,x){},OnRunSuccess:function(x){},OnRunFailure:function(z,y,x){}};function d(x){this.job=x}j.SourceValue=d;d.prototype.Add=function(x,C,B){var A=this.job,z=B,y=x;if(!i.isString(y)||y==""){t.HttpFilenameError();if(!A.bEvent&&i.isFunction(A.OnRunFailure)){A.bEvent=true;A.OnRunFailure(A,h,w);A.bEvent=false}return}if(!z){z="RemoteFile"}y=Dynamsoft.Lib.replaceAll(y,"\\\\","\\\\");A.documents.push({files:[y],fileName:C,remoteName:z})};function v(x){this.job=x}j.FormField=v;v.prototype.Add=function(z,y){var A,C,B=y,x=z;if(B==null){B=""}if(!i.isString(x)||x==""||!i.isString(B)){return false}B=encodeURI(B);x=encodeURI(x);if(x.indexOf("'")>-1||B.indexOf("'")>-1){return false}for(A=0;A<this.job.formFields.length;A++){C=this.job.formFields[A];if(C.name==x){C.value=B;return true}}this.job.formFields.push({name:x,value:B});return true};j.FileUploader={ids:[],map:{},port:18625,protocol:"https://",ip:"127.0.0.1",nextLoopTime:600,deleteJobById:function(A){t._resetErr();if(o()){t.MobileNotSupport();return false}var x;if(!A){return}for(x=0;x<j.FileUploader.ids.length;x++){if(A==j.FileUploader.ids[x]){j.FileUploader.ids.splice(x,1);break}}var z=j.FileUploader.map[A];z.SourceValue.job=null;delete z.SourceValue;z.FormField.job=null;delete z.FormField;delete j.FileUploader.map[A];for(x=z.documents.length-1;x>=0;x--){z.documents.splice(x,1)}for(x=z.formFields.length-1;x>=0;x--){z.formFields.splice(x,1)}var y='{"id":"'+k+'","method":"DeleteUploadTask","version":"'+s+'","parameter":["'+A+'"]}';i.ajax({url:r.deleteUploadTask(),method:"post",processData:false,data:y})},parseHttpErrors:function(C,z,B){var y,A;if(C&&i.isArray(C)&&C.length>2){y=C[1];A=C[2]}else{y=z;A=B}if(A.state==2&&A.status==0){if(A.statusText==="abort"){var x=g;t.HttpUploadError(x)}else{t.ServerUrlError()}}else{t.HttpUploadError(m,y,A.status)}},loadHttpBlob:function(D,z,A,E,x,C,y){var F=function(I,G,H){j.FileUploader.parseHttpErrors(I,G,H);if(i.isFunction(x)){x()}},B={method:D,url:z,dataType:"blob",async:A,onSuccess:E,onError:F};if(i.isFunction(C)){B.beforeSend=function(G){G.addEventListener("progress",function(H){delete (H.totalSize);delete (H.position);C(H)},m)}}i.ajax(B)},_OnPercentDone:function(){},_GetPort:function(z){if(l.bEnhancedMode){i.showMask();var y=function(D){i.hideMask();if(i.isArray(D)&&D.length>1){var C=D[1];if(C){l.currentUserPorts=C;if(C.dcp){var B=C.dcp.port,A=C.dcp.sslPort;if(B==0||A==0){setTimeout(function(){l.getPorts(l.strSID,y,x)},0);return true}if(Dynamsoft.navInfoSync.bSSL){j.FileUploader.port=A}else{j.FileUploader.port=B}}}}z();return true},x=function(){i.hideMask();z();return true};l.getPorts(l.strSID,y,x);return true}z();return true},Init:function(D,x,A){t._resetErr();if(o()){t.MobileNotSupport();if(i.isFunction(A)){A(h,w)}return false}var y,C,E=l.detect.curPortIndex;if(Dynamsoft.navInfoSync.bSSL){C="https://";y=l.ports[E][1]}else{C="http://";y=l.ports[E][0]}j.FileUploader.port=y;j.FileUploader.protocol=C;j.FileUploader.ip=l.host;var z=function(){j.FileUploader._GetPort(function(){x(new b());setTimeout(j.FileUploader.StatusLoop,500)})};var B=function(){if(!i.isString(D)){t.MissingDll();if(i.isFunction(A)){A(h,w)}return false}var G=D;if(!G||G==""){G=Dynamsoft.managerEnv.resourcesPath+"/dist/win/UploadModule_"+n.join(".")+".zip"}var F=function(){t.DownloadError();if(i.isFunction(A)){A(h,w)}return false};var H=m;return j.FileUploader.loadHttpBlob("get",G,true,function(I){var J=100;l.loadZip(I,J,z,F)},F,H)};return j.FileUploader.VersionInfo(function(G){if(G&&G.result&&i.isArray(G.result)&&G.result.length>1){var F=G.result[0].split(",");if(l._compareVersion(F,n)){z();return true}}B()},B)},VersionInfo:function(x,y){t._resetErr();if(o()){t.MobileNotSupport();if(i.isFunction(y)){y(h,w)}return false}var z='{"id":"'+k+'","method":"VersionInfo","version":"'+s+'","parameter":[]}';i.ajax({url:r.versionInfo(),method:"post",dataType:"json",processData:false,data:z,onSuccess:function(A){x(A)},onError:function(A,B,C){j.FileUploader.parseHttpErrors(A,B,C);if(i.isFunction(y)){y(h,w)}}});return true},StatusLoop:function(){t._resetErr();if(o()){t.MobileNotSupport();return false}j.FileUploader.GetUploadStatus();setTimeout(j.FileUploader.StatusLoop,j.FileUploader.nextLoopTime);return true},GetUploadStatus:function(){t._resetErr();if(j.FileUploader.ids.length<=0){return true}if(o()){t.MobileNotSupport();return false}var x='{"id":"'+k+'","method":"GetUploadStatus","version":"'+s+'","parameter":["'+j.FileUploader.ids.join(",")+'"]}';i.ajax({url:r.getUploadStatus(),method:"post",dataType:"json",processData:false,data:x,onSuccess:function(z){if(i.isArray(z)){var C=0,F;for(;C<z.length;C++){F=z[C];var E=F.id,A=j.FileUploader.map[E],G=F.percentage,D=F.errorcode,B=F.response,y=F.errorstring;if(!A){continue}if(D==EnumTransferErrorCode.TRANS_FINISHED){A.OnUploadTransferPercentage(A,100,q(B));if(!A.bEvent&&i.isFunction(A.OnRunSuccess)){A.bEvent=true;A.OnRunSuccess(A,q(B));A.bEvent=false}j.FileUploader.deleteJobById(E)}else{if(D==EnumTransferErrorCode.TRANS_OK||D==EnumTransferErrorCode.TRANS_NOT_SEND||D==EnumTransferErrorCode.TRANS_WAITFOR_SEND||D==EnumTransferErrorCode.TRANS_SENDING||D==EnumTransferErrorCode.TRANS_PAUSE||D==EnumTransferErrorCode.TRANS_TASK_PREPARE_INIT||D==EnumTransferErrorCode.TRANS_TASK_INIT){A.OnUploadTransferPercentage(A,G,q(B))}else{if(!A.bEvent&&i.isFunction(A.OnRunFailure)){A.bEvent=true;A.OnRunFailure(A,D,y,q(B));A.bEvent=false}j.FileUploader.deleteJobById(E)}}}}},onError:function(y,z,A){}});return true}};var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var p=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);function q(E){var D,C,A,y;var B,x,z;x=E.length;B=0;z="";while(B<x){do{D=p[E.charCodeAt(B++)&255]}while(B<x&&D==-1);if(D==-1){break}do{C=p[E.charCodeAt(B++)&255]}while(B<x&&C==-1);if(C==-1){break}z+=String.fromCharCode((D<<2)|((C&48)>>4));do{A=E.charCodeAt(B++)&255;if(A==61){return z}A=p[A]}while(B<x&&A==-1);if(A==-1){break}z+=String.fromCharCode(((C&15)<<4)|((A&60)>>2));do{y=E.charCodeAt(B++)&255;if(y==61){return z}y=p[y]}while(B<x&&y==-1);if(y==-1){break}z+=String.fromCharCode(((A&3)<<6)|y)}return z}}); 
(function(){
	"use strict";
  var screenW = screen.width,
  promptDlgWidth = screenW > 550 ? 550 : (screenW - 10),
  reconnectTime = 0,
	imagesInBase64 = {
		icn_download: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAgCAYAAAAMq2gFAAABOklEQVRIie2WTW6DMBCFH4h1l22VqmqPVUEvEJa9gRt6FDhDpfx0FdJj+Arx3nldhEjEdchgWlaM9CSwMZ/fzMgQvX0TwvA+ePOpIsniRIwZGIl/n/8AGs3RWKB4JA4STjUKBo1EivLtGakEkP7Ru6vbpcpONzFxPFsazQloZyxEmkDepsYk0JIhkZGwzngfWRKvd0u1Pwf93k1NoBjg5uN+pbZuHn0gEFgQ2AVAdgTefQVzU9e2nzaplKbMkEhnK2W9oAOAC9IHIO+Yd5U/rJX2QbocnVSSqARuqse1Ki9BumrUp+U1gXkXRAoyBDIC1jNnCWRPG2Wug2SFrkkUnvHieaPqaxCpo3bL104rLySQviDbpNA0Sgl4W9kXfU9vjWPho+ZaHCHfo6r/kumfYUBEL1/jeJpqFBw/d5aBU2kHOMQAAAAASUVORK5CYII=',
		icn_install: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAA+klEQVRIid2SMWoCQRiFv3GnW7BII6ZPqeAlorewtBELsZdFOz2Q0VYkXQ6QA9iaIqU+mx2Y3QRd12WKffCY4WdmPt5jzPRT5PQOfOSHnky6/rnoqd/cJFt/0FB6I3UkWOVmZbz+GcyjLEjgeSjRzc3KuCMxzIC8fQwsbtTxqJan/jz+r7qZ4LWC2pzbgpkDmclBAG3gO011T0U+g9Mv8PayTY4u0UIQV5jGORYsAcz4oA7wBWR+SUWJAM5Az17E6gFIGUXA2goGJR8wAK1dUuiwVdECnpQZ7cOggiWy5zCcgIkCcbCX2iUKB6pfdfVLFAwUiNS4f6QaXQHE5K75dPBEiQAAAABJRU5ErkJggg==',
		icn_scan: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAADI0lEQVRIibWXTUhUURTHf+/NsxRCp3QGwhKT/MDoAyNo1apmNhYkodGmaFOWmUXQcpgo2gRN5kerllEGLWqjBqZGFH2BlSRJRVqCjpNjYOaUc1q80fnovZmnMx34w+Odc+///u+9595zlbPPBAuWBbiBPcAOoASwR3xB4BPwAngIdOV2en+n6lA5k5zYDjQBJwCHlRECk0Ar4Mvr9AbNglQRMMFBEYZE8IjgSBKXiIJIm6Gg23PQVHHT038U24DrQL1FhamsHThl7/LOxysGYmAT6BCoT/ifDuoFOqbcHlsyYp9ATQZJF1AjcC2OOMZbh9CQacYYnPzu8tQlKrYLNP8/zkU0B1weeyxxk4AzkySqYvjfKXp6opx8IiuAr1jP05S2bQ3sL4a29zA++4/bD6xTBVwCjkwp3eGAo+WQnw1b8w1jHAIuTQRXppTuWgt1JaAA90egc9Q01K0JVGWCdHch1BTr33c/Q89Y0vAqLQxl6ZJWF8He9RAWuPURHo+nbFKqiZC3XEIFOLAB9hTqpDc/wHO/paZ5ahgwQtEqOFIGNtXYD3Boo076R+DGe3jmN441gibCNAmplKXA8QooyAb7CmgZhLlw1G9T4GgZ7HRCKAytg/DO9AI0tGlVYDhxy4cEmgdhOgSVdjizGXI03acpcKxCJ/01D1ffwdvgktNuWBV4ZeQc/QmX30BgDkpz4dxmWL0SGjbB9gKY+QNX3sLQ9LLy/bVyuE+qgQdmc5K/Es5vAWcO/A5Dlgo/QjrpyMySpjfW9qkC3QIBs9FNzsGlARj7qZNOzcHlAfgys+zTzS/QpYq+pC3JgqdCOvnLSbg4AN9m0zpW20oeeUMLNZdPhIlktdSPEFwbhIlZ8xgL8Ivgg+i1GBRoTEOFVTRu7NUrz9gq844IrWmoSYXW0l7v7YXdpUn8bjsNrAVqLO9Pa3Yv0veiJRZ78wK1Au0ZnN52gdryvvjyVjMY3Tz6y6EfvTJ0LlPlBHC6oi86vfGKzdfktgjlIlwQIbCEtQxE2pSbkQIotT1i5ou1hUebi+ijbXXEN0X00dYNdFf2e0OpOvwLFunYK2i9bNwAAAAASUVORK5CYII='
	};

Dynamsoft.OnWebTwainNotFoundOnWindowsCallback = function (ProductName, InstallerUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion) {
    var _this = Dynamsoft, objUrl = { 'default': InstallerUrl };
    _this._show_install_dialog(ProductName, objUrl, bHTML5, _this.EnumDWT_PlatformType.enumWindow, bIE, bSafari, bSSL, strIEVersion);
};

Dynamsoft.OnWebTwainNotFoundOnLinuxCallback = function (ProductName, strDebUrl, strRpmUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion) {
    var _this = Dynamsoft, objUrl = { 'default': strDebUrl, 'deb': strDebUrl, 'rpm': strRpmUrl };
    _this._show_install_dialog(ProductName, objUrl, bHTML5, _this.EnumDWT_PlatformType.enumLinux, bIE, bSafari, bSSL, strIEVersion);
};

Dynamsoft.OnWebTwainNotFoundOnMacCallback = function (ProductName, InstallerUrl, bHTML5, bIE, bSafari, bSSL, strIEVersion) {
    var _this = Dynamsoft, objUrl = { 'default': InstallerUrl };
    _this._show_install_dialog(ProductName, objUrl, bHTML5, _this.EnumDWT_PlatformType.enumMac, bIE, bSafari, bSSL, strIEVersion);
};

Dynamsoft.dwt_change_install_url = function (url) {
	var install = document.getElementById('dwt-btn-install');
	if (install)
		install.href = url;
};

Dynamsoft.DWT_Reconnect = function () {
    var _this = Dynamsoft;
    if (((new Date() - reconnectTime) / 1000) > 30) {
		// change prompt
		var el = document.getElementById('dwt-btn-install');
		if (el) {
		    el.innerHTML = 'Failed to connect to the service, have you run the setup?<br />If not, please run the setup and <a href="javascript:void(0)" onclick="Dynamsoft.DCP_DWT_onclickInstallButton()">click here to connect again</a>.';
		}
		return;
	}
	if (_this.WebTwainEnv) {
	    _this.WebTwainEnv.CheckConnectToTheService(function () {
	        _this.WebTwainEnv.ConnectToTheService();
		}, function () {
		    setTimeout(Dynamsoft.DWT_Reconnect, 500);
		});
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.DCP_DWT_onclickInstallButton = function () {
  var btnInstall = document.getElementById('dwt-btn-install');
	if (btnInstall) {
		setTimeout(function () {
			var install = document.getElementById('dwt-install-url-div');
			if (install)
				install.style.display = 'none';
			var el = document.getElementById('dwt-btn-install');
			if (el && el.getAttribute("html5") == "1") {
				var pel = el.parentNode,
					newDiv = document.createElement('div');
				newDiv.id = 'dwt-btn-install';
				newDiv.style.textAlign = "center";
				newDiv.style.paddingBottom = '15px';
				newDiv.innerHTML = 'Connecting to the service...';
				newDiv.setAttribute("html5", "1");
				pel.removeChild(el);
				pel.appendChild(newDiv);
				reconnectTime = new Date();
				setTimeout(Dynamsoft.DWT_Reconnect, 10);
			} else {
				var pel = el.parentNode;
				pel.removeChild(el);
			}
		}, 10);
	}
	return true;
};

Dynamsoft._show_install_dialog = function (ProductName, objInstallerUrl, bHTML5, iPlatform, bIE, bSafari, bSSL, strIEVersion) {
    var _this = Dynamsoft, ObjString, title, browserActionNeeded;
	title = 'Please complete one-time setup';
	ObjString = [
		'<div class="dynamsoft-dwt-dlg-title">',
		title,
		'</div>'];
	if (_this.WebTwainEnv) {
	    if (iPlatform == _this.EnumDWT_PlatformType.enumLinux || navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
			browserActionNeeded = 'RESTART';
		}
		else {
			browserActionNeeded = 'REFRESH';
		}
		ObjString.push('<div class="dynamsoft-dwt-installdlg-iconholder"> ');
		ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 125px"></div>');
		ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>');
		ObjString.push('<img style="margin: 0px 134px 0px 0px" src=' + imagesInBase64.icn_download + ' alt="download">');
		ObjString.push('<img style="margin: 2px 132px 2px 0px" src=' + imagesInBase64.icn_install + ' alt="install">');
		ObjString.push('<img src=' + imagesInBase64.icn_scan + ' alt="scan">');
		ObjString.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>');
		ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Install</span>');
		ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>');
		ObjString.push('</div>');
		ObjString.push('</div>');

		if (bHTML5 && iPlatform == _this.EnumDWT_PlatformType.enumLinux) {
		    ObjString.push('<div style="margin:10px 0 0 60px;"><div id="dwt-install-url-div"><div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\'' + objInstallerUrl.deb + '\')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian)</label></div>');
			ObjString.push('<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\'' + objInstallerUrl.rpm + '\')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div></div></div>');
		}
		ObjString.push('<div><a id="dwt-btn-install" target="_blank" href="');
		ObjString.push(objInstallerUrl['default']);
		ObjString.push('"');
		if (bHTML5) {
			ObjString.push(' html5="1"');
		} else {
			ObjString.push(' html5="0"');
		}

		ObjString.push(' onclick="Dynamsoft.DCP_DWT_onclickInstallButton()"><div class="dynamsoft-dwt-dlg-button">Download</div></a></div>');
		if (bHTML5) {
			if (bIE) {
				ObjString.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">');
				ObjString.push('If you still see the dialog after installing the scan service, please<br />');
				ObjString.push('1. Add the website to the zone of trusted sites.<br />');
				ObjString.push('IE | Tools | Internet Options | Security | Trusted Sites.<br />');
				ObjString.push('2. Refresh your browser.');
				ObjString.push('</div>');

			} else {
				
				if (iPlatform == _this.EnumDWT_PlatformType.enumLinux) {
					ObjString.push('<div class="dynamsoft-dwt-dlg-tail">');
					ObjString.push('<div class="dynamsoft-dwt-dlg-red">After the installation, please <strong>' + browserActionNeeded + '</strong>  your browser.</div>');
					ObjString.push('</div>');
				}
			
			}

		} else {
			ObjString.push('<div class="dynamsoft-dwt-dlg-tail" style="text-align:left; padding-left: 80px">');
			if (bIE) {
				ObjString.push('After the installation, please<br />');
				ObjString.push('1. Restart the browser<br />');
				ObjString.push('2. Allow "DynamicWebTWAIN" add-on to run by right clicking on the Information Bar in the browser.');
			} else {
				ObjString.push('<div class="dynamsoft-dwt-dlg-red">After installation, please <strong>REFRESH</strong> your browser.</div>');
			}
			ObjString.push('</div>');
		}
		_this.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnWebTwainOldPluginNotAllowedCallback = function (ProductName) {
    var _this = Dynamsoft;
    var ObjString = [
		'<div class="dynamsoft-dwt-dlg-title">',
		ProductName,
		' plugin is not allowed to run on this site.',
		'</div>',
		'<div class="dynamsoft-dwt-dlg-tail" style="margin-top:40px">',
		'Please click "<strong>Always run on this site</strong>" for the prompt that says <br />"<strong>',
		ProductName,
		' Plugin needs your permission to run</strong>"<br /><div class="dynamsoft-dwt-dlg-red">After that, you need to refresh or restart the browser.',
		'</div></div>'];

	if (_this.WebTwainEnv) {
	    _this.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnWebTwainNeedUpgradeCallback = function (ProductName, objInstallerUrl, bHTML5, iPlatform,
	bIE, bSafari, bSSL, strIEVersion, bForceUpgrade, bError, strErrorString) {
	var browserActionNeeded, ObjString, title, bActiveX = !bHTML5 && bIE, bPlugin = !bHTML5 && !bIE;
	if (bError) {
		ObjString = [
			'<div class="dynamsoft-dwt-dlg-center">',
			'<div class="dynamsoft-dwt-dlg-errorIcon"></div>',
			'</div>',
			'<div class="dynamsoft-dwt-dlg-error">',
			strErrorString,
			'</div>'
		];
	} else {
		if (bActiveX)
			title = 'The ActiveX to scan needs to be updated';
		else if (bPlugin)
			title = 'The Plugin to scan needs to be updated';
		else
			title = 'The scan service needs to be updated';
		ObjString = [
			'<div class="dynamsoft-dwt-dlg-title">',
			title,
			'</div>'];
	} 
	var _this = Dynamsoft;
	if (_this.WebTwainEnv) {
	    if (iPlatform == _this.EnumDWT_PlatformType.enumLinux || navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
			browserActionNeeded = 'RESTART';
		}
		else {
			browserActionNeeded = 'REFRESH';
		}
		if (bHTML5) {
			ObjString.push('<div class="dynamsoft-dwt-installdlg-iconholder"> ');
			ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 125px"></div>');
			ObjString.push('<div class="dynamsoft-dwt-installdlg-splitline" style="left: 283px"></div>');
			ObjString.push('<img style="margin: 0px 134px 0px 0px" src=' + imagesInBase64.icn_download + ' alt="Update">');
			ObjString.push('<img style="margin: 2px 132px 2px 0px" src=' + imagesInBase64.icn_install + ' alt="install">');
			ObjString.push('<img src=' + imagesInBase64.icn_scan + ' alt="scan">');
			ObjString.push('<div><span class="dynamsoft-dwt-installdlg-text" style="right: 125px">Download</span>');
			ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="right: 18px">Update</span>');
			ObjString.push('<span class="dynamsoft-dwt-installdlg-text" style="left: 105px">Scan</span>');
			ObjString.push('</div>');
			ObjString.push('</div>');
		}
		if (bHTML5 && iPlatform == _this.EnumDWT_PlatformType.enumLinux) {
		    ObjString.push('<div style="margin:10px 0 0 19px;"><div id="dwt-install-url-div"><div><input id="dwt-install-url-deb" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\'' + objInstallerUrl.deb + '\')" checked="checked" /><label for="dwt-install-url-deb">64 bit .deb (For Ubuntu/Debian)</label></div>');
			ObjString.push('<div><input id="dwt-install-url-rpm" name="dwt-install-url" type="radio" onclick="Dynamsoft.dwt_change_install_url(\'' + objInstallerUrl.rpm + '\')" /><label for="dwt-install-url-rpm">64 bit .rpm (For Fedora)</label></div></div></div>');
		}
		else {
			if (!bError)
				ObjString.push('<div style="margin-top:40px;"></div>');
		}
		ObjString.push('<a id="dwt-btn-install" target="_blank" href="');
		ObjString.push(objInstallerUrl['default']);
		ObjString.push('" onclick="Dynamsoft.DCP_DWT_onclickInstallButton()"><div class="dynamsoft-dwt-dlg-button">Download</div></a>');
		ObjString.push('<p></p>');
		ObjString.push('<div class="dynamsoft-dwt-dlg-tail">');
		if (bActiveX) {
			ObjString.push('A newer version of the ActiveX is available. Please download and update now.');
			ObjString.push('<div class="dynamsoft-dwt-dlg-red">Please EXIT Internet Explorer before you install the new version.</div>');
		}
		else if (bPlugin) {
		}
		else {
			ObjString.push('A newer version of the scan service is available on this page. <br /> Please download and update now.');
		}
		ObjString.push('</div>');
		_this.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''), false, bForceUpgrade);
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnWebTwainPreExecuteCallback = function () {
    var _this = Dynamsoft;
    if (_this.WebTwainEnv) {
        _this.WebTwainEnv.OnWebTwainPreExecute();
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnWebTwainPostExecuteCallback = function () {
    var _this = Dynamsoft;
    if (_this.WebTwainEnv) {
        _this.WebTwainEnv.OnWebTwainPostExecute();
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnRemoteWebTwainNotFoundCallback = function (ProductName, ip, port, bSSL, bMobile) {
    var _this = Dynamsoft;
    var ObjString;
	
	if(bMobile) {
		ObjString = [
			'<div class="dynamsoft-dwt-dlg-tips" style="font-size:1.5em">',
			'The Dynamsoft Service is not configured correctly on ',
			'"', ip, '". Please check.',
			'</div>'
		];
	} else {
		ObjString = [
			'<div class="dynamsoft-dwt-dlg-tips">',
			'Dynamsoft Service is missing a certificate for the following IP/domain <br />',
			'or isn\'t installed on the PC with the following IP/domain <br />',
			'"', ip, '".<br />',
			'Please make sure you have put the correct certificate <br />',
			'in the {Dynamsoft Service Directory}<br />',
			'or that Dynamsoft Service is installed on that specified PC.',
			'</div>',
			'<div class="dynamsoft-dwt-dlg-tail">',
			'<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'
		];
	}
	if (_this.WebTwainEnv) {
	    _this.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnRemoteWebTwainNeedUpgradeCallback = function (ProductName, ip, port, bSSL) {
    var _this = Dynamsoft;
    var ObjString = [
		'<div class="dynamsoft-dwt-dlg-tips">',
		'Dynamsoft Service is outdated on the PC with IP/domain <br />',
		'"', ip, '".<br />',
		'Please open the page on that PC to download and install it.',
		'</div>',
		'<div class="dynamsoft-dwt-dlg-tail">',
		'<div class="dynamsoft-dwt-dlg-red">After installation, please REFRESH your browser.</div></div>'
	];
	if (_this.WebTwainEnv) {
	    _this.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''));
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnWebTWAINDllDownloadSuccessful = function () {
	console.log('The Web TWAIN Module was downloaded successfully!');
};

Dynamsoft.OnWebTWAINDllDownloadFailure = function (ProductName, errorCode, errorString) {
    var _this = Dynamsoft;
    if (_this.WebTwainEnv) {
		if (errorCode == -2371/* EnumDWT_Error.ModuleNotExists*/) {
			var ObjString = [
				'<div class="dynamsoft-dwt-dlg-tips">',
				errorString,
				'</div>',
				'<div class="dynamsoft-dwt-dlg-tail">',
				'<div class="dynamsoft-dwt-dlg-red">You can try <strong>REFRESHING</strong> your browser to try again. <br /> If the issue persists, please contact the website administrator.</div></div>'
			];

			_this.WebTwainEnv.ShowDialog(promptDlgWidth, 0, ObjString.join(''));

		}
		return true;
	} else {
		console.log("The Dynamsoft namespace is missing");
	}
};

Dynamsoft.OnGetServiceUpdateStatus = function (bError, statusCode, statusString) {
	if (statusString != "Update skipped")
		console.log(statusString);
};

Dynamsoft.OnWebTWAINModuleDownloadManually = function (objInstallerUrl, iPlatform, bIE, bSafari, bSSL, strIEVersion) {
    var _this = Dynamsoft;
    return _this._show_install_dialog('', objInstallerUrl, true, iPlatform, bIE, bSafari, bSSL, strIEVersion);
};
})(); 
/**
 * Basic Configuration (config.js with differences)
 */
Dynamsoft.WebTwainEnv.AutoLoad = false;
Dynamsoft.WebTwainEnv.Containers = [{ ContainerId: 'dwtcontrolContainer', Width: 270, Height: 350 }];
Dynamsoft.WebTwainEnv.IfAddMD5InUploadHeader = false;
Dynamsoft.WebTwainEnv.IfConfineMaskWithinTheViewer = false;
