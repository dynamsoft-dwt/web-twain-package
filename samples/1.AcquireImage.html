<!DOCTYPE html>
<html>

<head>
  <title>Use Auto Feeder to scan</title>
  <script src="../dist/dynamsoft.webtwain.min.js"></script>
</head>

<body>
  <lable id="ADF" ><input type="checkbox" checked="checked">Auto Feeder</lable>
  <input type="button" id="acquireButton" value="Acquire" onclick="AcquireImage();" />
  <input type="file" id="mobileFile" style="display:none" onchange="fileChanged(this)" />
  <!-- dwtcontrolContainer is the default div id for Dynamic Web TWAIN control.
    If you need to rename the id, you should also change the id in the dynamsoft.webtwain.config.js accordingly. -->
  <div id="dwtcontrolContainer"></div>

  <script type="text/javascript">
    Dynamsoft.WebTwainEnv.ResourcesPath = "../dist";
    Dynamsoft.WebTwainEnv.ProductKey = 't01025gAAALk9jAMRgcJZFeF/gOx+dqYJ3DovvmHp0V6A9i0SXwywSvj6C/IA4WBjouCI0I0qQxkHyWUeoj8qjcnMWhka+HONSZMxNZjQGQ1AqAKWdut4+8zM5nJnlieTxV7TqCeRzy30';
    Dynamsoft.WebTwainEnv.RegisterEvent('OnWebTwainReady', Dynamsoft_OnReady); 
    window.onload = function () {
      if (Dynamsoft.Lib.env.bMobile) {
        document.getElementById('ADF').style.display = "none";
        document.getElementById('acquireButton').style.display = "none";
        document.getElementById('mobileFile').style.display = "";
      }
      Dynamsoft.WebTwainEnv.Load();
    };
    var DWObject;

    function Dynamsoft_OnReady() {
      DWObject = Dynamsoft.WebTwainEnv.GetWebTwain('dwtcontrolContainer'); // Get the Dynamic Web TWAIN object that is embeded in the div with id 'dwtcontrolContainer'
    }

    function AcquireImage() {
      if (DWObject) {
        DWObject.SelectSource(function () {
          DWObject.OpenSource();
          DWObject.AcquireImage(
            {
              IfShowUI: false,
              IfFeederEnabled: document.getElementById("ADF").checked,
              PixelType: Dynamsoft.EnumDWT_PixelType.TWPT_RGB,
              Resolution: 200,
              IfDisableSourceAfterAcquire: true
            },
            function () {
              console.log("Successful!");
            },
            function (settings, errCode, errString) {
              alert(errString)
            }
          );
        }, function () {
          alert('SelectSource failed!');
        });
      }
    }

    function fileChanged(inputTarget) {
      DWObject.LoadImageFromBinary(
        inputTarget.files[0],
        function () { inputTarget.value = ""; },
        function (errCode, errString) { alert(errString); });
    }
  </script>
</body>

</html>